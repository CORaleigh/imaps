(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();function ISe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var LA={},TSe={get exports(){return LA},set exports(t){LA=t}},uP={},le={},kSe={get exports(){return le},set exports(t){le=t}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vI=Symbol.for("react.element"),$Se=Symbol.for("react.portal"),ASe=Symbol.for("react.fragment"),MSe=Symbol.for("react.strict_mode"),OSe=Symbol.for("react.profiler"),PSe=Symbol.for("react.provider"),RSe=Symbol.for("react.context"),LSe=Symbol.for("react.forward_ref"),DSe=Symbol.for("react.suspense"),FSe=Symbol.for("react.memo"),NSe=Symbol.for("react.lazy"),AG=Symbol.iterator;function zSe(t){return t===null||typeof t!="object"?null:(t=AG&&t[AG]||t["@@iterator"],typeof t=="function"?t:null)}var one={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ane=Object.assign,lne={};function jw(t,e,i){this.props=t,this.context=e,this.refs=lne,this.updater=i||one}jw.prototype.isReactComponent={};jw.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jw.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cne(){}cne.prototype=jw.prototype;function OU(t,e,i){this.props=t,this.context=e,this.refs=lne,this.updater=i||one}var PU=OU.prototype=new cne;PU.constructor=OU;ane(PU,jw.prototype);PU.isPureReactComponent=!0;var MG=Array.isArray,une=Object.prototype.hasOwnProperty,RU={current:null},dne={key:!0,ref:!0,__self:!0,__source:!0};function hne(t,e,i){var n,r={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)une.call(e,n)&&!dne.hasOwnProperty(n)&&(r[n]=e[n]);var a=arguments.length-2;if(a===1)r.children=i;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)r[n]===void 0&&(r[n]=a[n]);return{$$typeof:vI,type:t,key:s,ref:o,props:r,_owner:RU.current}}function jSe(t,e){return{$$typeof:vI,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function LU(t){return typeof t=="object"&&t!==null&&t.$$typeof===vI}function VSe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var OG=/\/+/g;function a3(t,e){return typeof t=="object"&&t!==null&&t.key!=null?VSe(""+t.key):e.toString(36)}function jk(t,e,i,n,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case vI:case $Se:o=!0}}if(o)return o=t,r=r(o),t=n===""?"."+a3(o,0):n,MG(r)?(i="",t!=null&&(i=t.replace(OG,"$&/")+"/"),jk(r,e,i,"",function(u){return u})):r!=null&&(LU(r)&&(r=jSe(r,i+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(OG,"$&/")+"/")+t)),e.push(r)),1;if(o=0,n=n===""?".":n+":",MG(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+a3(s,a);o+=jk(s,e,i,l,r)}else if(l=zSe(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+a3(s,a++),o+=jk(s,e,i,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function D2(t,e,i){if(t==null)return t;var n=[],r=0;return jk(t,n,"","",function(s){return e.call(i,s,r++)}),n}function USe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ks={current:null},Vk={transition:null},BSe={ReactCurrentDispatcher:Ks,ReactCurrentBatchConfig:Vk,ReactCurrentOwner:RU};mt.Children={map:D2,forEach:function(t,e,i){D2(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return D2(t,function(){e++}),e},toArray:function(t){return D2(t,function(e){return e})||[]},only:function(t){if(!LU(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};mt.Component=jw;mt.Fragment=ASe;mt.Profiler=OSe;mt.PureComponent=OU;mt.StrictMode=MSe;mt.Suspense=DSe;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BSe;mt.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=ane({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=RU.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)une.call(e,l)&&!dne.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=i;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:vI,type:t.type,key:r,ref:s,props:n,_owner:o}};mt.createContext=function(t){return t={$$typeof:RSe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PSe,_context:t},t.Consumer=t};mt.createElement=hne;mt.createFactory=function(t){var e=hne.bind(null,t);return e.type=t,e};mt.createRef=function(){return{current:null}};mt.forwardRef=function(t){return{$$typeof:LSe,render:t}};mt.isValidElement=LU;mt.lazy=function(t){return{$$typeof:NSe,_payload:{_status:-1,_result:t},_init:USe}};mt.memo=function(t,e){return{$$typeof:FSe,type:t,compare:e===void 0?null:e}};mt.startTransition=function(t){var e=Vk.transition;Vk.transition={};try{t()}finally{Vk.transition=e}};mt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};mt.useCallback=function(t,e){return Ks.current.useCallback(t,e)};mt.useContext=function(t){return Ks.current.useContext(t)};mt.useDebugValue=function(){};mt.useDeferredValue=function(t){return Ks.current.useDeferredValue(t)};mt.useEffect=function(t,e){return Ks.current.useEffect(t,e)};mt.useId=function(){return Ks.current.useId()};mt.useImperativeHandle=function(t,e,i){return Ks.current.useImperativeHandle(t,e,i)};mt.useInsertionEffect=function(t,e){return Ks.current.useInsertionEffect(t,e)};mt.useLayoutEffect=function(t,e){return Ks.current.useLayoutEffect(t,e)};mt.useMemo=function(t,e){return Ks.current.useMemo(t,e)};mt.useReducer=function(t,e,i){return Ks.current.useReducer(t,e,i)};mt.useRef=function(t){return Ks.current.useRef(t)};mt.useState=function(t){return Ks.current.useState(t)};mt.useSyncExternalStore=function(t,e,i){return Ks.current.useSyncExternalStore(t,e,i)};mt.useTransition=function(){return Ks.current.useTransition()};mt.version="18.2.0";(function(t){t.exports=mt})(kSe);const gl=ISe(le);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HSe=le,GSe=Symbol.for("react.element"),qSe=Symbol.for("react.fragment"),WSe=Object.prototype.hasOwnProperty,JSe=HSe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YSe={key:!0,ref:!0,__self:!0,__source:!0};function pne(t,e,i){var n,r={},s=null,o=null;i!==void 0&&(s=""+i),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)WSe.call(e,n)&&!YSe.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:GSe,type:t,key:s,ref:o,props:r,_owner:JSe.current}}uP.Fragment=qSe;uP.jsx=pne;uP.jsxs=pne;(function(t){t.exports=uP})(TSe);const re=LA.jsx,qe=LA.jsxs;var O5={},P5={},ZSe={get exports(){return P5},set exports(t){P5=t}},Ma={},R5={},KSe={get exports(){return R5},set exports(t){R5=t}},fne={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(oe,ge){var he=oe.length;oe.push(ge);e:for(;0<he;){var et=he-1>>>1,wt=oe[et];if(0<r(wt,ge))oe[et]=ge,oe[he]=wt,he=et;else break e}}function i(oe){return oe.length===0?null:oe[0]}function n(oe){if(oe.length===0)return null;var ge=oe[0],he=oe.pop();if(he!==ge){oe[0]=he;e:for(var et=0,wt=oe.length,pr=wt>>>1;et<pr;){var xn=2*(et+1)-1,fr=oe[xn],Ar=xn+1,Qs=oe[Ar];if(0>r(fr,he))Ar<wt&&0>r(Qs,fr)?(oe[et]=Qs,oe[Ar]=he,et=Ar):(oe[et]=fr,oe[xn]=he,et=xn);else if(Ar<wt&&0>r(Qs,he))oe[et]=Qs,oe[Ar]=he,et=Ar;else break e}}return ge}function r(oe,ge){var he=oe.sortIndex-ge.sortIndex;return he!==0?he:oe.id-ge.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,p=null,f=3,g=!1,v=!1,b=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(oe){for(var ge=i(u);ge!==null;){if(ge.callback===null)n(u);else if(ge.startTime<=oe)n(u),ge.sortIndex=ge.expirationTime,e(l,ge);else break;ge=i(u)}}function $(oe){if(b=!1,C(oe),!v)if(i(l)!==null)v=!0,Ie(M);else{var ge=i(u);ge!==null&&Me($,ge.startTime-oe)}}function M(oe,ge){v=!1,b&&(b=!1,w(D),D=-1),g=!0;var he=f;try{for(C(ge),p=i(l);p!==null&&(!(p.expirationTime>ge)||oe&&!j());){var et=p.callback;if(typeof et=="function"){p.callback=null,f=p.priorityLevel;var wt=et(p.expirationTime<=ge);ge=t.unstable_now(),typeof wt=="function"?p.callback=wt:p===i(l)&&n(l),C(ge)}else n(l);p=i(l)}if(p!==null)var pr=!0;else{var xn=i(u);xn!==null&&Me($,xn.startTime-ge),pr=!1}return pr}finally{p=null,f=he,g=!1}}var P=!1,k=null,D=-1,z=5,B=-1;function j(){return!(t.unstable_now()-B<z)}function K(){if(k!==null){var oe=t.unstable_now();B=oe;var ge=!0;try{ge=k(!0,oe)}finally{ge?ie():(P=!1,k=null)}}else P=!1}var ie;if(typeof S=="function")ie=function(){S(K)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,me=te.port2;te.port1.onmessage=K,ie=function(){me.postMessage(null)}}else ie=function(){_(K,0)};function Ie(oe){k=oe,P||(P=!0,ie())}function Me(oe,ge){D=_(function(){oe(t.unstable_now())},ge)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(oe){oe.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Ie(M))},t.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<oe?Math.floor(1e3/oe):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(oe){switch(f){case 1:case 2:case 3:var ge=3;break;default:ge=f}var he=f;f=ge;try{return oe()}finally{f=he}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(oe,ge){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var he=f;f=oe;try{return ge()}finally{f=he}},t.unstable_scheduleCallback=function(oe,ge,he){var et=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?et+he:et):he=et,oe){case 1:var wt=-1;break;case 2:wt=250;break;case 5:wt=1073741823;break;case 4:wt=1e4;break;default:wt=5e3}return wt=he+wt,oe={id:h++,callback:ge,priorityLevel:oe,startTime:he,expirationTime:wt,sortIndex:-1},he>et?(oe.sortIndex=he,e(u,oe),i(l)===null&&oe===i(u)&&(b?(w(D),D=-1):b=!0,Me($,he-et))):(oe.sortIndex=wt,e(l,oe),v||g||(v=!0,Ie(M))),oe},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(oe){var ge=f;return function(){var he=f;f=ge;try{return oe.apply(this,arguments)}finally{f=he}}}})(fne);(function(t){t.exports=fne})(KSe);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mne=le,ka=R5;function pe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gne=new Set,XE={};function L0(t,e){J_(t,e),J_(t+"Capture",e)}function J_(t,e){for(XE[t]=e,t=0;t<e.length;t++)gne.add(e[t])}var Sh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),L5=Object.prototype.hasOwnProperty,XSe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PG={},RG={};function QSe(t){return L5.call(RG,t)?!0:L5.call(PG,t)?!1:XSe.test(t)?RG[t]=!0:(PG[t]=!0,!1)}function eEe(t,e,i,n){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tEe(t,e,i,n){if(e===null||typeof e>"u"||eEe(t,e,i,n))return!0;if(n)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xs(t,e,i,n,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Jr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jr[t]=new Xs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jr[e]=new Xs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jr[t]=new Xs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jr[t]=new Xs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jr[t]=new Xs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jr[t]=new Xs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jr[t]=new Xs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jr[t]=new Xs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jr[t]=new Xs(t,5,!1,t.toLowerCase(),null,!1,!1)});var DU=/[\-:]([a-z])/g;function FU(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(DU,FU);Jr[e]=new Xs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(DU,FU);Jr[e]=new Xs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(DU,FU);Jr[e]=new Xs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jr[t]=new Xs(t,1,!1,t.toLowerCase(),null,!1,!1)});Jr.xlinkHref=new Xs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jr[t]=new Xs(t,1,!1,t.toLowerCase(),null,!0,!0)});function NU(t,e,i,n){var r=Jr.hasOwnProperty(e)?Jr[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tEe(e,i,r,n)&&(i=null),n||r===null?QSe(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):r.mustUseProperty?t[r.propertyName]=i===null?r.type===3?!1:"":i:(e=r.attributeName,n=r.attributeNamespace,i===null?t.removeAttribute(e):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,n?t.setAttributeNS(n,e,i):t.setAttribute(e,i))))}var Fh=mne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F2=Symbol.for("react.element"),Vb=Symbol.for("react.portal"),Ub=Symbol.for("react.fragment"),zU=Symbol.for("react.strict_mode"),D5=Symbol.for("react.profiler"),yne=Symbol.for("react.provider"),vne=Symbol.for("react.context"),jU=Symbol.for("react.forward_ref"),F5=Symbol.for("react.suspense"),N5=Symbol.for("react.suspense_list"),VU=Symbol.for("react.memo"),sf=Symbol.for("react.lazy"),bne=Symbol.for("react.offscreen"),LG=Symbol.iterator;function F1(t){return t===null||typeof t!="object"?null:(t=LG&&t[LG]||t["@@iterator"],typeof t=="function"?t:null)}var Qi=Object.assign,l3;function jx(t){if(l3===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);l3=e&&e[1]||""}return`
`+l3+t}var c3=!1;function u3(t,e){if(!t||c3)return"";c3=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=n.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{c3=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?jx(t):""}function iEe(t){switch(t.tag){case 5:return jx(t.type);case 16:return jx("Lazy");case 13:return jx("Suspense");case 19:return jx("SuspenseList");case 0:case 2:case 15:return t=u3(t.type,!1),t;case 11:return t=u3(t.type.render,!1),t;case 1:return t=u3(t.type,!0),t;default:return""}}function z5(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ub:return"Fragment";case Vb:return"Portal";case D5:return"Profiler";case zU:return"StrictMode";case F5:return"Suspense";case N5:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vne:return(t.displayName||"Context")+".Consumer";case yne:return(t._context.displayName||"Context")+".Provider";case jU:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case VU:return e=t.displayName||null,e!==null?e:z5(t.type)||"Memo";case sf:e=t._payload,t=t._init;try{return z5(t(e))}catch{}}return null}function nEe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z5(e);case 8:return e===zU?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _ne(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rEe(t){var e=_ne(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function N2(t){t._valueTracker||(t._valueTracker=rEe(t))}function wne(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),n="";return t&&(n=_ne(t)?t.checked?"true":"false":t.value),t=n,t!==i?(e.setValue(t),!0):!1}function DA(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function j5(t,e){var i=e.checked;return Qi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function DG(t,e){var i=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;i=Qf(e.value!=null?e.value:i),t._wrapperState={initialChecked:n,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xne(t,e){e=e.checked,e!=null&&NU(t,"checked",e,!1)}function V5(t,e){xne(t,e);var i=Qf(e.value),n=e.type;if(i!=null)n==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?U5(t,e.type,i):e.hasOwnProperty("defaultValue")&&U5(t,e.type,Qf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function FG(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function U5(t,e,i){(e!=="number"||DA(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Vx=Array.isArray;function y_(t,e,i,n){if(t=t.options,e){e={};for(var r=0;r<i.length;r++)e["$"+i[r]]=!0;for(i=0;i<t.length;i++)r=e.hasOwnProperty("$"+t[i].value),t[i].selected!==r&&(t[i].selected=r),r&&n&&(t[i].defaultSelected=!0)}else{for(i=""+Qf(i),e=null,r=0;r<t.length;r++){if(t[r].value===i){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function B5(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(pe(91));return Qi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function NG(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(pe(92));if(Vx(i)){if(1<i.length)throw Error(pe(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:Qf(i)}}function Sne(t,e){var i=Qf(e.value),n=Qf(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),n!=null&&(t.defaultValue=""+n)}function zG(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ene(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function H5(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ene(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var z2,Cne=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,i,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(z2=z2||document.createElement("div"),z2.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=z2.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function QE(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var nE={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sEe=["Webkit","ms","Moz","O"];Object.keys(nE).forEach(function(t){sEe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),nE[e]=nE[t]})});function Ine(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||nE.hasOwnProperty(t)&&nE[t]?(""+e).trim():e+"px"}function Tne(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var n=i.indexOf("--")===0,r=Ine(i,e[i],n);i==="float"&&(i="cssFloat"),n?t.setProperty(i,r):t[i]=r}}var oEe=Qi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function G5(t,e){if(e){if(oEe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(pe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(pe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(pe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(pe(62))}}function q5(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var W5=null;function UU(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var J5=null,v_=null,b_=null;function jG(t){if(t=wI(t)){if(typeof J5!="function")throw Error(pe(280));var e=t.stateNode;e&&(e=mP(e),J5(t.stateNode,t.type,e))}}function kne(t){v_?b_?b_.push(t):b_=[t]:v_=t}function $ne(){if(v_){var t=v_,e=b_;if(b_=v_=null,jG(t),e)for(t=0;t<e.length;t++)jG(e[t])}}function Ane(t,e){return t(e)}function Mne(){}var d3=!1;function One(t,e,i){if(d3)return t(e,i);d3=!0;try{return Ane(t,e,i)}finally{d3=!1,(v_!==null||b_!==null)&&(Mne(),$ne())}}function eC(t,e){var i=t.stateNode;if(i===null)return null;var n=mP(i);if(n===null)return null;i=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(pe(231,e,typeof i));return i}var Y5=!1;if(Sh)try{var N1={};Object.defineProperty(N1,"passive",{get:function(){Y5=!0}}),window.addEventListener("test",N1,N1),window.removeEventListener("test",N1,N1)}catch{Y5=!1}function aEe(t,e,i,n,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(i,u)}catch(h){this.onError(h)}}var rE=!1,FA=null,NA=!1,Z5=null,lEe={onError:function(t){rE=!0,FA=t}};function cEe(t,e,i,n,r,s,o,a,l){rE=!1,FA=null,aEe.apply(lEe,arguments)}function uEe(t,e,i,n,r,s,o,a,l){if(cEe.apply(this,arguments),rE){if(rE){var u=FA;rE=!1,FA=null}else throw Error(pe(198));NA||(NA=!0,Z5=u)}}function D0(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function Pne(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function VG(t){if(D0(t)!==t)throw Error(pe(188))}function dEe(t){var e=t.alternate;if(!e){if(e=D0(t),e===null)throw Error(pe(188));return e!==t?null:t}for(var i=t,n=e;;){var r=i.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){i=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return VG(r),t;if(s===n)return VG(r),e;s=s.sibling}throw Error(pe(188))}if(i.return!==n.return)i=r,n=s;else{for(var o=!1,a=r.child;a;){if(a===i){o=!0,i=r,n=s;break}if(a===n){o=!0,n=r,i=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===i){o=!0,i=s,n=r;break}if(a===n){o=!0,n=s,i=r;break}a=a.sibling}if(!o)throw Error(pe(189))}}if(i.alternate!==n)throw Error(pe(190))}if(i.tag!==3)throw Error(pe(188));return i.stateNode.current===i?t:e}function Rne(t){return t=dEe(t),t!==null?Lne(t):null}function Lne(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Lne(t);if(e!==null)return e;t=t.sibling}return null}var Dne=ka.unstable_scheduleCallback,UG=ka.unstable_cancelCallback,hEe=ka.unstable_shouldYield,pEe=ka.unstable_requestPaint,yn=ka.unstable_now,fEe=ka.unstable_getCurrentPriorityLevel,BU=ka.unstable_ImmediatePriority,Fne=ka.unstable_UserBlockingPriority,zA=ka.unstable_NormalPriority,mEe=ka.unstable_LowPriority,Nne=ka.unstable_IdlePriority,dP=null,Mu=null;function gEe(t){if(Mu&&typeof Mu.onCommitFiberRoot=="function")try{Mu.onCommitFiberRoot(dP,t,void 0,(t.current.flags&128)===128)}catch{}}var Cc=Math.clz32?Math.clz32:bEe,yEe=Math.log,vEe=Math.LN2;function bEe(t){return t>>>=0,t===0?32:31-(yEe(t)/vEe|0)|0}var j2=64,V2=4194304;function Ux(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jA(t,e){var i=t.pendingLanes;if(i===0)return 0;var n=0,r=t.suspendedLanes,s=t.pingedLanes,o=i&268435455;if(o!==0){var a=o&~r;a!==0?n=Ux(a):(s&=o,s!==0&&(n=Ux(s)))}else o=i&~r,o!==0?n=Ux(o):s!==0&&(n=Ux(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(n&4&&(n|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)i=31-Cc(e),r=1<<i,n|=t[i],e&=~r;return n}function _Ee(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wEe(t,e){for(var i=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Cc(s),a=1<<o,l=r[o];l===-1?(!(a&i)||a&n)&&(r[o]=_Ee(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function K5(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zne(){var t=j2;return j2<<=1,!(j2&4194240)&&(j2=64),t}function h3(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function bI(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cc(e),t[e]=i}function xEe(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<i;){var r=31-Cc(i),s=1<<r;e[r]=0,n[r]=-1,t[r]=-1,i&=~s}}function HU(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var n=31-Cc(i),r=1<<n;r&e|t[n]&e&&(t[n]|=e),i&=~r}}var ii=0;function jne(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vne,GU,Une,Bne,Hne,X5=!1,U2=[],Nf=null,zf=null,jf=null,tC=new Map,iC=new Map,yf=[],SEe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function BG(t,e){switch(t){case"focusin":case"focusout":Nf=null;break;case"dragenter":case"dragleave":zf=null;break;case"mouseover":case"mouseout":jf=null;break;case"pointerover":case"pointerout":tC.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":iC.delete(e.pointerId)}}function z1(t,e,i,n,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:i,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},e!==null&&(e=wI(e),e!==null&&GU(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function EEe(t,e,i,n,r){switch(e){case"focusin":return Nf=z1(Nf,t,e,i,n,r),!0;case"dragenter":return zf=z1(zf,t,e,i,n,r),!0;case"mouseover":return jf=z1(jf,t,e,i,n,r),!0;case"pointerover":var s=r.pointerId;return tC.set(s,z1(tC.get(s)||null,t,e,i,n,r)),!0;case"gotpointercapture":return s=r.pointerId,iC.set(s,z1(iC.get(s)||null,t,e,i,n,r)),!0}return!1}function Gne(t){var e=Ty(t.target);if(e!==null){var i=D0(e);if(i!==null){if(e=i.tag,e===13){if(e=Pne(i),e!==null){t.blockedOn=e,Hne(t.priority,function(){Une(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Uk(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=Q5(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var n=new i.constructor(i.type,i);W5=n,i.target.dispatchEvent(n),W5=null}else return e=wI(i),e!==null&&GU(e),t.blockedOn=i,!1;e.shift()}return!0}function HG(t,e,i){Uk(t)&&i.delete(e)}function CEe(){X5=!1,Nf!==null&&Uk(Nf)&&(Nf=null),zf!==null&&Uk(zf)&&(zf=null),jf!==null&&Uk(jf)&&(jf=null),tC.forEach(HG),iC.forEach(HG)}function j1(t,e){t.blockedOn===e&&(t.blockedOn=null,X5||(X5=!0,ka.unstable_scheduleCallback(ka.unstable_NormalPriority,CEe)))}function nC(t){function e(r){return j1(r,t)}if(0<U2.length){j1(U2[0],t);for(var i=1;i<U2.length;i++){var n=U2[i];n.blockedOn===t&&(n.blockedOn=null)}}for(Nf!==null&&j1(Nf,t),zf!==null&&j1(zf,t),jf!==null&&j1(jf,t),tC.forEach(e),iC.forEach(e),i=0;i<yf.length;i++)n=yf[i],n.blockedOn===t&&(n.blockedOn=null);for(;0<yf.length&&(i=yf[0],i.blockedOn===null);)Gne(i),i.blockedOn===null&&yf.shift()}var __=Fh.ReactCurrentBatchConfig,VA=!0;function IEe(t,e,i,n){var r=ii,s=__.transition;__.transition=null;try{ii=1,qU(t,e,i,n)}finally{ii=r,__.transition=s}}function TEe(t,e,i,n){var r=ii,s=__.transition;__.transition=null;try{ii=4,qU(t,e,i,n)}finally{ii=r,__.transition=s}}function qU(t,e,i,n){if(VA){var r=Q5(t,e,i,n);if(r===null)x3(t,e,n,UA,i),BG(t,n);else if(EEe(r,t,e,i,n))n.stopPropagation();else if(BG(t,n),e&4&&-1<SEe.indexOf(t)){for(;r!==null;){var s=wI(r);if(s!==null&&Vne(s),s=Q5(t,e,i,n),s===null&&x3(t,e,n,UA,i),s===r)break;r=s}r!==null&&n.stopPropagation()}else x3(t,e,n,null,i)}}var UA=null;function Q5(t,e,i,n){if(UA=null,t=UU(n),t=Ty(t),t!==null)if(e=D0(t),e===null)t=null;else if(i=e.tag,i===13){if(t=Pne(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return UA=t,null}function qne(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fEe()){case BU:return 1;case Fne:return 4;case zA:case mEe:return 16;case Nne:return 536870912;default:return 16}default:return 16}}var Cf=null,WU=null,Bk=null;function Wne(){if(Bk)return Bk;var t,e=WU,i=e.length,n,r="value"in Cf?Cf.value:Cf.textContent,s=r.length;for(t=0;t<i&&e[t]===r[t];t++);var o=i-t;for(n=1;n<=o&&e[i-n]===r[s-n];n++);return Bk=r.slice(t,1<n?1-n:void 0)}function Hk(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function B2(){return!0}function GG(){return!1}function Oa(t){function e(i,n,r,s,o){this._reactName=i,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(i=t[a],this[a]=i?i(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?B2:GG,this.isPropagationStopped=GG,this}return Qi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=B2)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=B2)},persist:function(){},isPersistent:B2}),e}var Vw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},JU=Oa(Vw),_I=Qi({},Vw,{view:0,detail:0}),kEe=Oa(_I),p3,f3,V1,hP=Qi({},_I,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:YU,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==V1&&(V1&&t.type==="mousemove"?(p3=t.screenX-V1.screenX,f3=t.screenY-V1.screenY):f3=p3=0,V1=t),p3)},movementY:function(t){return"movementY"in t?t.movementY:f3}}),qG=Oa(hP),$Ee=Qi({},hP,{dataTransfer:0}),AEe=Oa($Ee),MEe=Qi({},_I,{relatedTarget:0}),m3=Oa(MEe),OEe=Qi({},Vw,{animationName:0,elapsedTime:0,pseudoElement:0}),PEe=Oa(OEe),REe=Qi({},Vw,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),LEe=Oa(REe),DEe=Qi({},Vw,{data:0}),WG=Oa(DEe),FEe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NEe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zEe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jEe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=zEe[t])?!!e[t]:!1}function YU(){return jEe}var VEe=Qi({},_I,{key:function(t){if(t.key){var e=FEe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Hk(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NEe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:YU,charCode:function(t){return t.type==="keypress"?Hk(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Hk(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UEe=Oa(VEe),BEe=Qi({},hP,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JG=Oa(BEe),HEe=Qi({},_I,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:YU}),GEe=Oa(HEe),qEe=Qi({},Vw,{propertyName:0,elapsedTime:0,pseudoElement:0}),WEe=Oa(qEe),JEe=Qi({},hP,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),YEe=Oa(JEe),ZEe=[9,13,27,32],ZU=Sh&&"CompositionEvent"in window,sE=null;Sh&&"documentMode"in document&&(sE=document.documentMode);var KEe=Sh&&"TextEvent"in window&&!sE,Jne=Sh&&(!ZU||sE&&8<sE&&11>=sE),YG=String.fromCharCode(32),ZG=!1;function Yne(t,e){switch(t){case"keyup":return ZEe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zne(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bb=!1;function XEe(t,e){switch(t){case"compositionend":return Zne(e);case"keypress":return e.which!==32?null:(ZG=!0,YG);case"textInput":return t=e.data,t===YG&&ZG?null:t;default:return null}}function QEe(t,e){if(Bb)return t==="compositionend"||!ZU&&Yne(t,e)?(t=Wne(),Bk=WU=Cf=null,Bb=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jne&&e.locale!=="ko"?null:e.data;default:return null}}var eCe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function KG(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eCe[t.type]:e==="textarea"}function Kne(t,e,i,n){kne(n),e=BA(e,"onChange"),0<e.length&&(i=new JU("onChange","change",null,i,n),t.push({event:i,listeners:e}))}var oE=null,rC=null;function tCe(t){lre(t,0)}function pP(t){var e=qb(t);if(wne(e))return t}function iCe(t,e){if(t==="change")return e}var Xne=!1;if(Sh){var g3;if(Sh){var y3="oninput"in document;if(!y3){var XG=document.createElement("div");XG.setAttribute("oninput","return;"),y3=typeof XG.oninput=="function"}g3=y3}else g3=!1;Xne=g3&&(!document.documentMode||9<document.documentMode)}function QG(){oE&&(oE.detachEvent("onpropertychange",Qne),rC=oE=null)}function Qne(t){if(t.propertyName==="value"&&pP(rC)){var e=[];Kne(e,rC,t,UU(t)),One(tCe,e)}}function nCe(t,e,i){t==="focusin"?(QG(),oE=e,rC=i,oE.attachEvent("onpropertychange",Qne)):t==="focusout"&&QG()}function rCe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pP(rC)}function sCe(t,e){if(t==="click")return pP(e)}function oCe(t,e){if(t==="input"||t==="change")return pP(e)}function aCe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pc=typeof Object.is=="function"?Object.is:aCe;function sC(t,e){if(Pc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!L5.call(e,r)||!Pc(t[r],e[r]))return!1}return!0}function eq(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tq(t,e){var i=eq(t);t=0;for(var n;i;){if(i.nodeType===3){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=eq(i)}}function ere(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ere(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tre(){for(var t=window,e=DA();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=DA(t.document)}return e}function KU(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lCe(t){var e=tre(),i=t.focusedElem,n=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&ere(i.ownerDocument.documentElement,i)){if(n!==null&&KU(i)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=i.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!t.extend&&s>n&&(r=n,n=s,s=r),r=tq(i,s);var o=tq(i,n);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cCe=Sh&&"documentMode"in document&&11>=document.documentMode,Hb=null,eN=null,aE=null,tN=!1;function iq(t,e,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;tN||Hb==null||Hb!==DA(n)||(n=Hb,"selectionStart"in n&&KU(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),aE&&sC(aE,n)||(aE=n,n=BA(eN,"onSelect"),0<n.length&&(e=new JU("onSelect","select",null,e,i),t.push({event:e,listeners:n}),e.target=Hb)))}function H2(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Gb={animationend:H2("Animation","AnimationEnd"),animationiteration:H2("Animation","AnimationIteration"),animationstart:H2("Animation","AnimationStart"),transitionend:H2("Transition","TransitionEnd")},v3={},ire={};Sh&&(ire=document.createElement("div").style,"AnimationEvent"in window||(delete Gb.animationend.animation,delete Gb.animationiteration.animation,delete Gb.animationstart.animation),"TransitionEvent"in window||delete Gb.transitionend.transition);function fP(t){if(v3[t])return v3[t];if(!Gb[t])return t;var e=Gb[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in ire)return v3[t]=e[i];return t}var nre=fP("animationend"),rre=fP("animationiteration"),sre=fP("animationstart"),ore=fP("transitionend"),are=new Map,nq="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gm(t,e){are.set(t,e),L0(e,[t])}for(var b3=0;b3<nq.length;b3++){var _3=nq[b3],uCe=_3.toLowerCase(),dCe=_3[0].toUpperCase()+_3.slice(1);gm(uCe,"on"+dCe)}gm(nre,"onAnimationEnd");gm(rre,"onAnimationIteration");gm(sre,"onAnimationStart");gm("dblclick","onDoubleClick");gm("focusin","onFocus");gm("focusout","onBlur");gm(ore,"onTransitionEnd");J_("onMouseEnter",["mouseout","mouseover"]);J_("onMouseLeave",["mouseout","mouseover"]);J_("onPointerEnter",["pointerout","pointerover"]);J_("onPointerLeave",["pointerout","pointerover"]);L0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));L0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));L0("onBeforeInput",["compositionend","keypress","textInput","paste"]);L0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));L0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));L0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bx="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hCe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bx));function rq(t,e,i){var n=t.type||"unknown-event";t.currentTarget=i,uEe(n,e,void 0,t),t.currentTarget=null}function lre(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var n=t[i],r=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;rq(r,a,u),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;rq(r,a,u),s=l}}}if(NA)throw t=Z5,NA=!1,Z5=null,t}function Ei(t,e){var i=e[oN];i===void 0&&(i=e[oN]=new Set);var n=t+"__bubble";i.has(n)||(cre(e,t,2,!1),i.add(n))}function w3(t,e,i){var n=0;e&&(n|=4),cre(i,t,n,e)}var G2="_reactListening"+Math.random().toString(36).slice(2);function oC(t){if(!t[G2]){t[G2]=!0,gne.forEach(function(i){i!=="selectionchange"&&(hCe.has(i)||w3(i,!1,t),w3(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[G2]||(e[G2]=!0,w3("selectionchange",!1,e))}}function cre(t,e,i,n){switch(qne(e)){case 1:var r=IEe;break;case 4:r=TEe;break;default:r=qU}i=r.bind(null,e,i,t),r=void 0,!Y5||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,i,{capture:!0,passive:r}):t.addEventListener(e,i,!0):r!==void 0?t.addEventListener(e,i,{passive:r}):t.addEventListener(e,i,!1)}function x3(t,e,i,n,r){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ty(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}One(function(){var u=s,h=UU(i),p=[];e:{var f=are.get(t);if(f!==void 0){var g=JU,v=t;switch(t){case"keypress":if(Hk(i)===0)break e;case"keydown":case"keyup":g=UEe;break;case"focusin":v="focus",g=m3;break;case"focusout":v="blur",g=m3;break;case"beforeblur":case"afterblur":g=m3;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=qG;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=AEe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=GEe;break;case nre:case rre:case sre:g=PEe;break;case ore:g=WEe;break;case"scroll":g=kEe;break;case"wheel":g=YEe;break;case"copy":case"cut":case"paste":g=LEe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=JG}var b=(e&4)!==0,_=!b&&t==="scroll",w=b?f!==null?f+"Capture":null:f;b=[];for(var S=u,C;S!==null;){C=S;var $=C.stateNode;if(C.tag===5&&$!==null&&(C=$,w!==null&&($=eC(S,w),$!=null&&b.push(aC(S,$,C)))),_)break;S=S.return}0<b.length&&(f=new g(f,v,null,i,h),p.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&i!==W5&&(v=i.relatedTarget||i.fromElement)&&(Ty(v)||v[Eh]))break e;if((g||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=i.relatedTarget||i.toElement,g=u,v=v?Ty(v):null,v!==null&&(_=D0(v),v!==_||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(b=qG,$="onMouseLeave",w="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(b=JG,$="onPointerLeave",w="onPointerEnter",S="pointer"),_=g==null?f:qb(g),C=v==null?f:qb(v),f=new b($,S+"leave",g,i,h),f.target=_,f.relatedTarget=C,$=null,Ty(h)===u&&(b=new b(w,S+"enter",v,i,h),b.target=C,b.relatedTarget=_,$=b),_=$,g&&v)t:{for(b=g,w=v,S=0,C=b;C;C=nv(C))S++;for(C=0,$=w;$;$=nv($))C++;for(;0<S-C;)b=nv(b),S--;for(;0<C-S;)w=nv(w),C--;for(;S--;){if(b===w||w!==null&&b===w.alternate)break t;b=nv(b),w=nv(w)}b=null}else b=null;g!==null&&sq(p,f,g,b,!1),v!==null&&_!==null&&sq(p,_,v,b,!0)}}e:{if(f=u?qb(u):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var M=iCe;else if(KG(f))if(Xne)M=oCe;else{M=rCe;var P=nCe}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=sCe);if(M&&(M=M(t,u))){Kne(p,M,i,h);break e}P&&P(t,f,u),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&U5(f,"number",f.value)}switch(P=u?qb(u):window,t){case"focusin":(KG(P)||P.contentEditable==="true")&&(Hb=P,eN=u,aE=null);break;case"focusout":aE=eN=Hb=null;break;case"mousedown":tN=!0;break;case"contextmenu":case"mouseup":case"dragend":tN=!1,iq(p,i,h);break;case"selectionchange":if(cCe)break;case"keydown":case"keyup":iq(p,i,h)}var k;if(ZU)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Bb?Yne(t,i)&&(D="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(D="onCompositionStart");D&&(Jne&&i.locale!=="ko"&&(Bb||D!=="onCompositionStart"?D==="onCompositionEnd"&&Bb&&(k=Wne()):(Cf=h,WU="value"in Cf?Cf.value:Cf.textContent,Bb=!0)),P=BA(u,D),0<P.length&&(D=new WG(D,t,null,i,h),p.push({event:D,listeners:P}),k?D.data=k:(k=Zne(i),k!==null&&(D.data=k)))),(k=KEe?XEe(t,i):QEe(t,i))&&(u=BA(u,"onBeforeInput"),0<u.length&&(h=new WG("onBeforeInput","beforeinput",null,i,h),p.push({event:h,listeners:u}),h.data=k))}lre(p,e)})}function aC(t,e,i){return{instance:t,listener:e,currentTarget:i}}function BA(t,e){for(var i=e+"Capture",n=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=eC(t,i),s!=null&&n.unshift(aC(t,s,r)),s=eC(t,e),s!=null&&n.push(aC(t,s,r))),t=t.return}return n}function nv(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sq(t,e,i,n,r){for(var s=e._reactName,o=[];i!==null&&i!==n;){var a=i,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,r?(l=eC(i,s),l!=null&&o.unshift(aC(i,l,a))):r||(l=eC(i,s),l!=null&&o.push(aC(i,l,a)))),i=i.return}o.length!==0&&t.push({event:e,listeners:o})}var pCe=/\r\n?/g,fCe=/\u0000|\uFFFD/g;function oq(t){return(typeof t=="string"?t:""+t).replace(pCe,`
`).replace(fCe,"")}function q2(t,e,i){if(e=oq(e),oq(t)!==e&&i)throw Error(pe(425))}function HA(){}var iN=null,nN=null;function rN(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sN=typeof setTimeout=="function"?setTimeout:void 0,mCe=typeof clearTimeout=="function"?clearTimeout:void 0,aq=typeof Promise=="function"?Promise:void 0,gCe=typeof queueMicrotask=="function"?queueMicrotask:typeof aq<"u"?function(t){return aq.resolve(null).then(t).catch(yCe)}:sN;function yCe(t){setTimeout(function(){throw t})}function S3(t,e){var i=e,n=0;do{var r=i.nextSibling;if(t.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(n===0){t.removeChild(r),nC(e);return}n--}else i!=="$"&&i!=="$?"&&i!=="$!"||n++;i=r}while(i);nC(e)}function Vf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lq(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var Uw=Math.random().toString(36).slice(2),$u="__reactFiber$"+Uw,lC="__reactProps$"+Uw,Eh="__reactContainer$"+Uw,oN="__reactEvents$"+Uw,vCe="__reactListeners$"+Uw,bCe="__reactHandles$"+Uw;function Ty(t){var e=t[$u];if(e)return e;for(var i=t.parentNode;i;){if(e=i[Eh]||i[$u]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=lq(t);t!==null;){if(i=t[$u])return i;t=lq(t)}return e}t=i,i=t.parentNode}return null}function wI(t){return t=t[$u]||t[Eh],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qb(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(pe(33))}function mP(t){return t[lC]||null}var aN=[],Wb=-1;function ym(t){return{current:t}}function Oi(t){0>Wb||(t.current=aN[Wb],aN[Wb]=null,Wb--)}function bi(t,e){Wb++,aN[Wb]=t.current,t.current=e}var em={},Es=ym(em),Mo=ym(!1),c0=em;function Y_(t,e){var i=t.type.contextTypes;if(!i)return em;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in i)r[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Oo(t){return t=t.childContextTypes,t!=null}function GA(){Oi(Mo),Oi(Es)}function cq(t,e,i){if(Es.current!==em)throw Error(pe(168));bi(Es,e),bi(Mo,i)}function ure(t,e,i){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return i;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(pe(108,nEe(t)||"Unknown",r));return Qi({},i,n)}function qA(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||em,c0=Es.current,bi(Es,t),bi(Mo,Mo.current),!0}function uq(t,e,i){var n=t.stateNode;if(!n)throw Error(pe(169));i?(t=ure(t,e,c0),n.__reactInternalMemoizedMergedChildContext=t,Oi(Mo),Oi(Es),bi(Es,t)):Oi(Mo),bi(Mo,i)}var Jd=null,gP=!1,E3=!1;function dre(t){Jd===null?Jd=[t]:Jd.push(t)}function _Ce(t){gP=!0,dre(t)}function vm(){if(!E3&&Jd!==null){E3=!0;var t=0,e=ii;try{var i=Jd;for(ii=1;t<i.length;t++){var n=i[t];do n=n(!0);while(n!==null)}Jd=null,gP=!1}catch(r){throw Jd!==null&&(Jd=Jd.slice(t+1)),Dne(BU,vm),r}finally{ii=e,E3=!1}}return null}var Jb=[],Yb=0,WA=null,JA=0,nl=[],rl=0,u0=null,ih=1,nh="";function pg(t,e){Jb[Yb++]=JA,Jb[Yb++]=WA,WA=t,JA=e}function hre(t,e,i){nl[rl++]=ih,nl[rl++]=nh,nl[rl++]=u0,u0=t;var n=ih;t=nh;var r=32-Cc(n)-1;n&=~(1<<r),i+=1;var s=32-Cc(e)+r;if(30<s){var o=r-r%5;s=(n&(1<<o)-1).toString(32),n>>=o,r-=o,ih=1<<32-Cc(e)+r|i<<r|n,nh=s+t}else ih=1<<s|i<<r|n,nh=t}function XU(t){t.return!==null&&(pg(t,1),hre(t,1,0))}function QU(t){for(;t===WA;)WA=Jb[--Yb],Jb[Yb]=null,JA=Jb[--Yb],Jb[Yb]=null;for(;t===u0;)u0=nl[--rl],nl[rl]=null,nh=nl[--rl],nl[rl]=null,ih=nl[--rl],nl[rl]=null}var wa=null,ba=null,Ni=!1,yc=null;function pre(t,e){var i=al(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function dq(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wa=t,ba=Vf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wa=t,ba=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=u0!==null?{id:ih,overflow:nh}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=al(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,wa=t,ba=null,!0):!1;default:return!1}}function lN(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cN(t){if(Ni){var e=ba;if(e){var i=e;if(!dq(t,e)){if(lN(t))throw Error(pe(418));e=Vf(i.nextSibling);var n=wa;e&&dq(t,e)?pre(n,i):(t.flags=t.flags&-4097|2,Ni=!1,wa=t)}}else{if(lN(t))throw Error(pe(418));t.flags=t.flags&-4097|2,Ni=!1,wa=t}}}function hq(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wa=t}function W2(t){if(t!==wa)return!1;if(!Ni)return hq(t),Ni=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!rN(t.type,t.memoizedProps)),e&&(e=ba)){if(lN(t))throw fre(),Error(pe(418));for(;e;)pre(t,e),e=Vf(e.nextSibling)}if(hq(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(pe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){ba=Vf(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}ba=null}}else ba=wa?Vf(t.stateNode.nextSibling):null;return!0}function fre(){for(var t=ba;t;)t=Vf(t.nextSibling)}function Z_(){ba=wa=null,Ni=!1}function e8(t){yc===null?yc=[t]:yc.push(t)}var wCe=Fh.ReactCurrentBatchConfig;function uc(t,e){if(t&&t.defaultProps){e=Qi({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}var YA=ym(null),ZA=null,Zb=null,t8=null;function i8(){t8=Zb=ZA=null}function n8(t){var e=YA.current;Oi(YA),t._currentValue=e}function uN(t,e,i){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===i)break;t=t.return}}function w_(t,e){ZA=t,t8=Zb=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ko=!0),t.firstContext=null)}function yl(t){var e=t._currentValue;if(t8!==t)if(t={context:t,memoizedValue:e,next:null},Zb===null){if(ZA===null)throw Error(pe(308));Zb=t,ZA.dependencies={lanes:0,firstContext:t}}else Zb=Zb.next=t;return e}var ky=null;function r8(t){ky===null?ky=[t]:ky.push(t)}function mre(t,e,i,n){var r=e.interleaved;return r===null?(i.next=i,r8(e)):(i.next=r.next,r.next=i),e.interleaved=i,Ch(t,n)}function Ch(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var of=!1;function s8(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gre(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function uh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Uf(t,e,i){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,$t&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Ch(t,i)}return r=n.interleaved,r===null?(e.next=e,r8(n)):(e.next=r.next,r.next=e),n.interleaved=e,Ch(t,i)}function Gk(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,HU(t,i)}}function pq(t,e){var i=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var r=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?r=s=o:s=s.next=o,i=i.next}while(i!==null);s===null?r=s=e:s=s.next=e}else r=s=e;i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function KA(t,e,i,n){var r=t.updateQueue;of=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var p=r.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,g=a.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,b=a;switch(f=e,g=i,b.tag){case 1:if(v=b.payload,typeof v=="function"){p=v.call(g,p,f);break e}p=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,f=typeof v=="function"?v.call(g,p,f):v,f==null)break e;p=Qi({},p,f);break e;case 2:of=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else g={eventTime:g,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=g,l=p):h=h.next=g,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(1);if(h===null&&(l=p),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);h0|=o,t.lanes=o,t.memoizedState=p}}function fq(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=i,typeof r!="function")throw Error(pe(191,r));r.call(n)}}}var yre=new mne.Component().refs;function dN(t,e,i,n){e=t.memoizedState,i=i(n,e),i=i==null?e:Qi({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var yP={isMounted:function(t){return(t=t._reactInternals)?D0(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var n=qs(),r=Hf(t),s=uh(n,r);s.payload=e,i!=null&&(s.callback=i),e=Uf(t,s,r),e!==null&&(Ic(e,t,r,n),Gk(e,t,r))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var n=qs(),r=Hf(t),s=uh(n,r);s.tag=1,s.payload=e,i!=null&&(s.callback=i),e=Uf(t,s,r),e!==null&&(Ic(e,t,r,n),Gk(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=qs(),n=Hf(t),r=uh(i,n);r.tag=2,e!=null&&(r.callback=e),e=Uf(t,r,n),e!==null&&(Ic(e,t,n,i),Gk(e,t,n))}};function mq(t,e,i,n,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!sC(i,n)||!sC(r,s):!0}function vre(t,e,i){var n=!1,r=em,s=e.contextType;return typeof s=="object"&&s!==null?s=yl(s):(r=Oo(e)?c0:Es.current,n=e.contextTypes,s=(n=n!=null)?Y_(t,r):em),e=new e(i,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yP,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function gq(t,e,i,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,n),e.state!==t&&yP.enqueueReplaceState(e,e.state,null)}function hN(t,e,i,n){var r=t.stateNode;r.props=i,r.state=t.memoizedState,r.refs=yre,s8(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=yl(s):(s=Oo(e)?c0:Es.current,r.context=Y_(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(dN(t,e,s,i),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&yP.enqueueReplaceState(r,r.state,null),KA(t,i,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function U1(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(pe(309));var n=i.stateNode}if(!n)throw Error(pe(147,t));var r=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===yre&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(pe(284));if(!i._owner)throw Error(pe(290,t))}return t}function J2(t,e){throw t=Object.prototype.toString.call(e),Error(pe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yq(t){var e=t._init;return e(t._payload)}function bre(t){function e(w,S){if(t){var C=w.deletions;C===null?(w.deletions=[S],w.flags|=16):C.push(S)}}function i(w,S){if(!t)return null;for(;S!==null;)e(w,S),S=S.sibling;return null}function n(w,S){for(w=new Map;S!==null;)S.key!==null?w.set(S.key,S):w.set(S.index,S),S=S.sibling;return w}function r(w,S){return w=Gf(w,S),w.index=0,w.sibling=null,w}function s(w,S,C){return w.index=C,t?(C=w.alternate,C!==null?(C=C.index,C<S?(w.flags|=2,S):C):(w.flags|=2,S)):(w.flags|=1048576,S)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,S,C,$){return S===null||S.tag!==6?(S=M3(C,w.mode,$),S.return=w,S):(S=r(S,C),S.return=w,S)}function l(w,S,C,$){var M=C.type;return M===Ub?h(w,S,C.props.children,$,C.key):S!==null&&(S.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===sf&&yq(M)===S.type)?($=r(S,C.props),$.ref=U1(w,S,C),$.return=w,$):($=Kk(C.type,C.key,C.props,null,w.mode,$),$.ref=U1(w,S,C),$.return=w,$)}function u(w,S,C,$){return S===null||S.tag!==4||S.stateNode.containerInfo!==C.containerInfo||S.stateNode.implementation!==C.implementation?(S=O3(C,w.mode,$),S.return=w,S):(S=r(S,C.children||[]),S.return=w,S)}function h(w,S,C,$,M){return S===null||S.tag!==7?(S=Zy(C,w.mode,$,M),S.return=w,S):(S=r(S,C),S.return=w,S)}function p(w,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return S=M3(""+S,w.mode,C),S.return=w,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case F2:return C=Kk(S.type,S.key,S.props,null,w.mode,C),C.ref=U1(w,null,S),C.return=w,C;case Vb:return S=O3(S,w.mode,C),S.return=w,S;case sf:var $=S._init;return p(w,$(S._payload),C)}if(Vx(S)||F1(S))return S=Zy(S,w.mode,C,null),S.return=w,S;J2(w,S)}return null}function f(w,S,C,$){var M=S!==null?S.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return M!==null?null:a(w,S,""+C,$);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case F2:return C.key===M?l(w,S,C,$):null;case Vb:return C.key===M?u(w,S,C,$):null;case sf:return M=C._init,f(w,S,M(C._payload),$)}if(Vx(C)||F1(C))return M!==null?null:h(w,S,C,$,null);J2(w,C)}return null}function g(w,S,C,$,M){if(typeof $=="string"&&$!==""||typeof $=="number")return w=w.get(C)||null,a(S,w,""+$,M);if(typeof $=="object"&&$!==null){switch($.$$typeof){case F2:return w=w.get($.key===null?C:$.key)||null,l(S,w,$,M);case Vb:return w=w.get($.key===null?C:$.key)||null,u(S,w,$,M);case sf:var P=$._init;return g(w,S,C,P($._payload),M)}if(Vx($)||F1($))return w=w.get(C)||null,h(S,w,$,M,null);J2(S,$)}return null}function v(w,S,C,$){for(var M=null,P=null,k=S,D=S=0,z=null;k!==null&&D<C.length;D++){k.index>D?(z=k,k=null):z=k.sibling;var B=f(w,k,C[D],$);if(B===null){k===null&&(k=z);break}t&&k&&B.alternate===null&&e(w,k),S=s(B,S,D),P===null?M=B:P.sibling=B,P=B,k=z}if(D===C.length)return i(w,k),Ni&&pg(w,D),M;if(k===null){for(;D<C.length;D++)k=p(w,C[D],$),k!==null&&(S=s(k,S,D),P===null?M=k:P.sibling=k,P=k);return Ni&&pg(w,D),M}for(k=n(w,k);D<C.length;D++)z=g(k,w,D,C[D],$),z!==null&&(t&&z.alternate!==null&&k.delete(z.key===null?D:z.key),S=s(z,S,D),P===null?M=z:P.sibling=z,P=z);return t&&k.forEach(function(j){return e(w,j)}),Ni&&pg(w,D),M}function b(w,S,C,$){var M=F1(C);if(typeof M!="function")throw Error(pe(150));if(C=M.call(C),C==null)throw Error(pe(151));for(var P=M=null,k=S,D=S=0,z=null,B=C.next();k!==null&&!B.done;D++,B=C.next()){k.index>D?(z=k,k=null):z=k.sibling;var j=f(w,k,B.value,$);if(j===null){k===null&&(k=z);break}t&&k&&j.alternate===null&&e(w,k),S=s(j,S,D),P===null?M=j:P.sibling=j,P=j,k=z}if(B.done)return i(w,k),Ni&&pg(w,D),M;if(k===null){for(;!B.done;D++,B=C.next())B=p(w,B.value,$),B!==null&&(S=s(B,S,D),P===null?M=B:P.sibling=B,P=B);return Ni&&pg(w,D),M}for(k=n(w,k);!B.done;D++,B=C.next())B=g(k,w,D,B.value,$),B!==null&&(t&&B.alternate!==null&&k.delete(B.key===null?D:B.key),S=s(B,S,D),P===null?M=B:P.sibling=B,P=B);return t&&k.forEach(function(K){return e(w,K)}),Ni&&pg(w,D),M}function _(w,S,C,$){if(typeof C=="object"&&C!==null&&C.type===Ub&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case F2:e:{for(var M=C.key,P=S;P!==null;){if(P.key===M){if(M=C.type,M===Ub){if(P.tag===7){i(w,P.sibling),S=r(P,C.props.children),S.return=w,w=S;break e}}else if(P.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===sf&&yq(M)===P.type){i(w,P.sibling),S=r(P,C.props),S.ref=U1(w,P,C),S.return=w,w=S;break e}i(w,P);break}else e(w,P);P=P.sibling}C.type===Ub?(S=Zy(C.props.children,w.mode,$,C.key),S.return=w,w=S):($=Kk(C.type,C.key,C.props,null,w.mode,$),$.ref=U1(w,S,C),$.return=w,w=$)}return o(w);case Vb:e:{for(P=C.key;S!==null;){if(S.key===P)if(S.tag===4&&S.stateNode.containerInfo===C.containerInfo&&S.stateNode.implementation===C.implementation){i(w,S.sibling),S=r(S,C.children||[]),S.return=w,w=S;break e}else{i(w,S);break}else e(w,S);S=S.sibling}S=O3(C,w.mode,$),S.return=w,w=S}return o(w);case sf:return P=C._init,_(w,S,P(C._payload),$)}if(Vx(C))return v(w,S,C,$);if(F1(C))return b(w,S,C,$);J2(w,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,S!==null&&S.tag===6?(i(w,S.sibling),S=r(S,C),S.return=w,w=S):(i(w,S),S=M3(C,w.mode,$),S.return=w,w=S),o(w)):i(w,S)}return _}var K_=bre(!0),_re=bre(!1),xI={},Ou=ym(xI),cC=ym(xI),uC=ym(xI);function $y(t){if(t===xI)throw Error(pe(174));return t}function o8(t,e){switch(bi(uC,e),bi(cC,t),bi(Ou,xI),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:H5(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=H5(e,t)}Oi(Ou),bi(Ou,e)}function X_(){Oi(Ou),Oi(cC),Oi(uC)}function wre(t){$y(uC.current);var e=$y(Ou.current),i=H5(e,t.type);e!==i&&(bi(cC,t),bi(Ou,i))}function a8(t){cC.current===t&&(Oi(Ou),Oi(cC))}var Yi=ym(0);function XA(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var C3=[];function l8(){for(var t=0;t<C3.length;t++)C3[t]._workInProgressVersionPrimary=null;C3.length=0}var qk=Fh.ReactCurrentDispatcher,I3=Fh.ReactCurrentBatchConfig,d0=0,Ki=null,tr=null,wr=null,QA=!1,lE=!1,dC=0,xCe=0;function Qr(){throw Error(pe(321))}function c8(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!Pc(t[i],e[i]))return!1;return!0}function u8(t,e,i,n,r,s){if(d0=s,Ki=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,qk.current=t===null||t.memoizedState===null?ICe:TCe,t=i(n,r),lE){s=0;do{if(lE=!1,dC=0,25<=s)throw Error(pe(301));s+=1,wr=tr=null,e.updateQueue=null,qk.current=kCe,t=i(n,r)}while(lE)}if(qk.current=eM,e=tr!==null&&tr.next!==null,d0=0,wr=tr=Ki=null,QA=!1,e)throw Error(pe(300));return t}function d8(){var t=dC!==0;return dC=0,t}function xu(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wr===null?Ki.memoizedState=wr=t:wr=wr.next=t,wr}function vl(){if(tr===null){var t=Ki.alternate;t=t!==null?t.memoizedState:null}else t=tr.next;var e=wr===null?Ki.memoizedState:wr.next;if(e!==null)wr=e,tr=t;else{if(t===null)throw Error(pe(310));tr=t,t={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},wr===null?Ki.memoizedState=wr=t:wr=wr.next=t}return wr}function hC(t,e){return typeof e=="function"?e(t):e}function T3(t){var e=vl(),i=e.queue;if(i===null)throw Error(pe(311));i.lastRenderedReducer=t;var n=tr,r=n.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}n.baseQueue=r=s,i.pending=null}if(r!==null){s=r.next,n=n.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((d0&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=n):l=l.next=p,Ki.lanes|=h,h0|=h}u=u.next}while(u!==null&&u!==s);l===null?o=n:l.next=a,Pc(n,e.memoizedState)||(ko=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,i.lastRenderedState=n}if(t=i.interleaved,t!==null){r=t;do s=r.lane,Ki.lanes|=s,h0|=s,r=r.next;while(r!==t)}else r===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function k3(t){var e=vl(),i=e.queue;if(i===null)throw Error(pe(311));i.lastRenderedReducer=t;var n=i.dispatch,r=i.pending,s=e.memoizedState;if(r!==null){i.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Pc(s,e.memoizedState)||(ko=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),i.lastRenderedState=s}return[s,n]}function xre(){}function Sre(t,e){var i=Ki,n=vl(),r=e(),s=!Pc(n.memoizedState,r);if(s&&(n.memoizedState=r,ko=!0),n=n.queue,h8(Ire.bind(null,i,n,t),[t]),n.getSnapshot!==e||s||wr!==null&&wr.memoizedState.tag&1){if(i.flags|=2048,pC(9,Cre.bind(null,i,n,r,e),void 0,null),Ir===null)throw Error(pe(349));d0&30||Ere(i,e,r)}return r}function Ere(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=Ki.updateQueue,e===null?(e={lastEffect:null,stores:null},Ki.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function Cre(t,e,i,n){e.value=i,e.getSnapshot=n,Tre(e)&&kre(t)}function Ire(t,e,i){return i(function(){Tre(e)&&kre(t)})}function Tre(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!Pc(t,i)}catch{return!0}}function kre(t){var e=Ch(t,1);e!==null&&Ic(e,t,1,-1)}function vq(t){var e=xu();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hC,lastRenderedState:t},e.queue=t,t=t.dispatch=CCe.bind(null,Ki,t),[e.memoizedState,t]}function pC(t,e,i,n){return t={tag:t,create:e,destroy:i,deps:n,next:null},e=Ki.updateQueue,e===null?(e={lastEffect:null,stores:null},Ki.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(n=i.next,i.next=t,t.next=n,e.lastEffect=t)),t}function $re(){return vl().memoizedState}function Wk(t,e,i,n){var r=xu();Ki.flags|=t,r.memoizedState=pC(1|e,i,void 0,n===void 0?null:n)}function vP(t,e,i,n){var r=vl();n=n===void 0?null:n;var s=void 0;if(tr!==null){var o=tr.memoizedState;if(s=o.destroy,n!==null&&c8(n,o.deps)){r.memoizedState=pC(e,i,s,n);return}}Ki.flags|=t,r.memoizedState=pC(1|e,i,s,n)}function bq(t,e){return Wk(8390656,8,t,e)}function h8(t,e){return vP(2048,8,t,e)}function Are(t,e){return vP(4,2,t,e)}function Mre(t,e){return vP(4,4,t,e)}function Ore(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pre(t,e,i){return i=i!=null?i.concat([t]):null,vP(4,4,Ore.bind(null,e,t),i)}function p8(){}function Rre(t,e){var i=vl();e=e===void 0?null:e;var n=i.memoizedState;return n!==null&&e!==null&&c8(e,n[1])?n[0]:(i.memoizedState=[t,e],t)}function Lre(t,e){var i=vl();e=e===void 0?null:e;var n=i.memoizedState;return n!==null&&e!==null&&c8(e,n[1])?n[0]:(t=t(),i.memoizedState=[t,e],t)}function Dre(t,e,i){return d0&21?(Pc(i,e)||(i=zne(),Ki.lanes|=i,h0|=i,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ko=!0),t.memoizedState=i)}function SCe(t,e){var i=ii;ii=i!==0&&4>i?i:4,t(!0);var n=I3.transition;I3.transition={};try{t(!1),e()}finally{ii=i,I3.transition=n}}function Fre(){return vl().memoizedState}function ECe(t,e,i){var n=Hf(t);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},Nre(t))zre(e,i);else if(i=mre(t,e,i,n),i!==null){var r=qs();Ic(i,t,n,r),jre(i,e,n)}}function CCe(t,e,i){var n=Hf(t),r={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(Nre(t))zre(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,i);if(r.hasEagerState=!0,r.eagerState=a,Pc(a,o)){var l=e.interleaved;l===null?(r.next=r,r8(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}i=mre(t,e,r,n),i!==null&&(r=qs(),Ic(i,t,n,r),jre(i,e,n))}}function Nre(t){var e=t.alternate;return t===Ki||e!==null&&e===Ki}function zre(t,e){lE=QA=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function jre(t,e,i){if(i&4194240){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,HU(t,i)}}var eM={readContext:yl,useCallback:Qr,useContext:Qr,useEffect:Qr,useImperativeHandle:Qr,useInsertionEffect:Qr,useLayoutEffect:Qr,useMemo:Qr,useReducer:Qr,useRef:Qr,useState:Qr,useDebugValue:Qr,useDeferredValue:Qr,useTransition:Qr,useMutableSource:Qr,useSyncExternalStore:Qr,useId:Qr,unstable_isNewReconciler:!1},ICe={readContext:yl,useCallback:function(t,e){return xu().memoizedState=[t,e===void 0?null:e],t},useContext:yl,useEffect:bq,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,Wk(4194308,4,Ore.bind(null,e,t),i)},useLayoutEffect:function(t,e){return Wk(4194308,4,t,e)},useInsertionEffect:function(t,e){return Wk(4,2,t,e)},useMemo:function(t,e){var i=xu();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var n=xu();return e=i!==void 0?i(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=ECe.bind(null,Ki,t),[n.memoizedState,t]},useRef:function(t){var e=xu();return t={current:t},e.memoizedState=t},useState:vq,useDebugValue:p8,useDeferredValue:function(t){return xu().memoizedState=t},useTransition:function(){var t=vq(!1),e=t[0];return t=SCe.bind(null,t[1]),xu().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var n=Ki,r=xu();if(Ni){if(i===void 0)throw Error(pe(407));i=i()}else{if(i=e(),Ir===null)throw Error(pe(349));d0&30||Ere(n,e,i)}r.memoizedState=i;var s={value:i,getSnapshot:e};return r.queue=s,bq(Ire.bind(null,n,s,t),[t]),n.flags|=2048,pC(9,Cre.bind(null,n,s,i,e),void 0,null),i},useId:function(){var t=xu(),e=Ir.identifierPrefix;if(Ni){var i=nh,n=ih;i=(n&~(1<<32-Cc(n)-1)).toString(32)+i,e=":"+e+"R"+i,i=dC++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=xCe++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TCe={readContext:yl,useCallback:Rre,useContext:yl,useEffect:h8,useImperativeHandle:Pre,useInsertionEffect:Are,useLayoutEffect:Mre,useMemo:Lre,useReducer:T3,useRef:$re,useState:function(){return T3(hC)},useDebugValue:p8,useDeferredValue:function(t){var e=vl();return Dre(e,tr.memoizedState,t)},useTransition:function(){var t=T3(hC)[0],e=vl().memoizedState;return[t,e]},useMutableSource:xre,useSyncExternalStore:Sre,useId:Fre,unstable_isNewReconciler:!1},kCe={readContext:yl,useCallback:Rre,useContext:yl,useEffect:h8,useImperativeHandle:Pre,useInsertionEffect:Are,useLayoutEffect:Mre,useMemo:Lre,useReducer:k3,useRef:$re,useState:function(){return k3(hC)},useDebugValue:p8,useDeferredValue:function(t){var e=vl();return tr===null?e.memoizedState=t:Dre(e,tr.memoizedState,t)},useTransition:function(){var t=k3(hC)[0],e=vl().memoizedState;return[t,e]},useMutableSource:xre,useSyncExternalStore:Sre,useId:Fre,unstable_isNewReconciler:!1};function Q_(t,e){try{var i="",n=e;do i+=iEe(n),n=n.return;while(n);var r=i}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function $3(t,e,i){return{value:t,source:null,stack:i??null,digest:e??null}}function pN(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var $Ce=typeof WeakMap=="function"?WeakMap:Map;function Vre(t,e,i){i=uh(-1,i),i.tag=3,i.payload={element:null};var n=e.value;return i.callback=function(){iM||(iM=!0,SN=n),pN(t,e)},i}function Ure(t,e,i){i=uh(-1,i),i.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;i.payload=function(){return n(r)},i.callback=function(){pN(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){pN(t,e),typeof n!="function"&&(Bf===null?Bf=new Set([this]):Bf.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),i}function _q(t,e,i){var n=t.pingCache;if(n===null){n=t.pingCache=new $Ce;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(i)||(r.add(i),t=BCe.bind(null,t,e,i),e.then(t,t))}function wq(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xq(t,e,i,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=uh(-1,1),e.tag=2,Uf(i,e,1))),i.lanes|=1),t)}var ACe=Fh.ReactCurrentOwner,ko=!1;function Us(t,e,i,n){e.child=t===null?_re(e,null,i,n):K_(e,t.child,i,n)}function Sq(t,e,i,n,r){i=i.render;var s=e.ref;return w_(e,r),n=u8(t,e,i,n,s,r),i=d8(),t!==null&&!ko?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ih(t,e,r)):(Ni&&i&&XU(e),e.flags|=1,Us(t,e,n,r),e.child)}function Eq(t,e,i,n,r){if(t===null){var s=i.type;return typeof s=="function"&&!w8(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=s,Bre(t,e,s,n,r)):(t=Kk(i.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(i=i.compare,i=i!==null?i:sC,i(o,n)&&t.ref===e.ref)return Ih(t,e,r)}return e.flags|=1,t=Gf(s,n),t.ref=e.ref,t.return=e,e.child=t}function Bre(t,e,i,n,r){if(t!==null){var s=t.memoizedProps;if(sC(s,n)&&t.ref===e.ref)if(ko=!1,e.pendingProps=n=s,(t.lanes&r)!==0)t.flags&131072&&(ko=!0);else return e.lanes=t.lanes,Ih(t,e,r)}return fN(t,e,i,n,r)}function Hre(t,e,i){var n=e.pendingProps,r=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},bi(Xb,ha),ha|=i;else{if(!(i&1073741824))return t=s!==null?s.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,bi(Xb,ha),ha|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:i,bi(Xb,ha),ha|=n}else s!==null?(n=s.baseLanes|i,e.memoizedState=null):n=i,bi(Xb,ha),ha|=n;return Us(t,e,r,i),e.child}function Gre(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function fN(t,e,i,n,r){var s=Oo(i)?c0:Es.current;return s=Y_(e,s),w_(e,r),i=u8(t,e,i,n,s,r),n=d8(),t!==null&&!ko?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Ih(t,e,r)):(Ni&&n&&XU(e),e.flags|=1,Us(t,e,i,r),e.child)}function Cq(t,e,i,n,r){if(Oo(i)){var s=!0;qA(e)}else s=!1;if(w_(e,r),e.stateNode===null)Jk(t,e),vre(e,i,n),hN(e,i,n,r),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=i.contextType;typeof u=="object"&&u!==null?u=yl(u):(u=Oo(i)?c0:Es.current,u=Y_(e,u));var h=i.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&gq(e,o,n,u),of=!1;var f=e.memoizedState;o.state=f,KA(e,n,o,r),l=e.memoizedState,a!==n||f!==l||Mo.current||of?(typeof h=="function"&&(dN(e,i,h,n),l=e.memoizedState),(a=of||mq(e,i,a,n,f,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,gre(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:uc(e.type,a),o.props=u,p=e.pendingProps,f=o.context,l=i.contextType,typeof l=="object"&&l!==null?l=yl(l):(l=Oo(i)?c0:Es.current,l=Y_(e,l));var g=i.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||f!==l)&&gq(e,o,n,l),of=!1,f=e.memoizedState,o.state=f,KA(e,n,o,r);var v=e.memoizedState;a!==p||f!==v||Mo.current||of?(typeof g=="function"&&(dN(e,i,g,n),v=e.memoizedState),(u=of||mq(e,i,u,n,f,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=v),o.props=n,o.state=v,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return mN(t,e,i,n,s,r)}function mN(t,e,i,n,r,s){Gre(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&uq(e,i,!1),Ih(t,e,s);n=e.stateNode,ACe.current=e;var a=o&&typeof i.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=K_(e,t.child,null,s),e.child=K_(e,null,a,s)):Us(t,e,a,s),e.memoizedState=n.state,r&&uq(e,i,!0),e.child}function qre(t){var e=t.stateNode;e.pendingContext?cq(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cq(t,e.context,!1),o8(t,e.containerInfo)}function Iq(t,e,i,n,r){return Z_(),e8(r),e.flags|=256,Us(t,e,i,n),e.child}var gN={dehydrated:null,treeContext:null,retryLane:0};function yN(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wre(t,e,i){var n=e.pendingProps,r=Yi.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),bi(Yi,r&1),t===null)return cN(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=wP(o,n,0,null),t=Zy(t,n,i,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=yN(i),e.memoizedState=gN,t):f8(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return MCe(t,e,o,n,a,r,i);if(s){s=n.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Gf(r,l),n.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Gf(a,s):(s=Zy(s,o,i,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?yN(i):{baseLanes:o.baseLanes|i,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~i,e.memoizedState=gN,n}return s=t.child,t=s.sibling,n=Gf(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=i),n.return=e,n.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=n,e.memoizedState=null,n}function f8(t,e){return e=wP({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Y2(t,e,i,n){return n!==null&&e8(n),K_(e,t.child,null,i),t=f8(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function MCe(t,e,i,n,r,s,o){if(i)return e.flags&256?(e.flags&=-257,n=$3(Error(pe(422))),Y2(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,r=e.mode,n=wP({mode:"visible",children:n.children},r,0,null),s=Zy(s,r,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&K_(e,t.child,null,o),e.child.memoizedState=yN(o),e.memoizedState=gN,s);if(!(e.mode&1))return Y2(t,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(pe(419)),n=$3(s,n,void 0),Y2(t,e,o,n)}if(a=(o&t.childLanes)!==0,ko||a){if(n=Ir,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ch(t,r),Ic(n,t,r,-1))}return _8(),n=$3(Error(pe(421))),Y2(t,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=HCe.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,ba=Vf(r.nextSibling),wa=e,Ni=!0,yc=null,t!==null&&(nl[rl++]=ih,nl[rl++]=nh,nl[rl++]=u0,ih=t.id,nh=t.overflow,u0=e),e=f8(e,n.children),e.flags|=4096,e)}function Tq(t,e,i){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),uN(t.return,e,i)}function A3(t,e,i,n,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=i,s.tailMode=r)}function Jre(t,e,i){var n=e.pendingProps,r=n.revealOrder,s=n.tail;if(Us(t,e,n.children,i),n=Yi.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tq(t,i,e);else if(t.tag===19)Tq(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(bi(Yi,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(i=e.child,r=null;i!==null;)t=i.alternate,t!==null&&XA(t)===null&&(r=i),i=i.sibling;i=r,i===null?(r=e.child,e.child=null):(r=i.sibling,i.sibling=null),A3(e,!1,r,i,s);break;case"backwards":for(i=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&XA(t)===null){e.child=r;break}t=r.sibling,r.sibling=i,i=r,r=t}A3(e,!0,i,null,s);break;case"together":A3(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jk(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ih(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),h0|=e.lanes,!(i&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(pe(153));if(e.child!==null){for(t=e.child,i=Gf(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=Gf(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function OCe(t,e,i){switch(e.tag){case 3:qre(e),Z_();break;case 5:wre(e);break;case 1:Oo(e.type)&&qA(e);break;case 4:o8(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;bi(YA,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(bi(Yi,Yi.current&1),e.flags|=128,null):i&e.child.childLanes?Wre(t,e,i):(bi(Yi,Yi.current&1),t=Ih(t,e,i),t!==null?t.sibling:null);bi(Yi,Yi.current&1);break;case 19:if(n=(i&e.childLanes)!==0,t.flags&128){if(n)return Jre(t,e,i);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),bi(Yi,Yi.current),n)break;return null;case 22:case 23:return e.lanes=0,Hre(t,e,i)}return Ih(t,e,i)}var Yre,vN,Zre,Kre;Yre=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};vN=function(){};Zre=function(t,e,i,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,$y(Ou.current);var s=null;switch(i){case"input":r=j5(t,r),n=j5(t,n),s=[];break;case"select":r=Qi({},r,{value:void 0}),n=Qi({},n,{value:void 0}),s=[];break;case"textarea":r=B5(t,r),n=B5(t,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=HA)}G5(i,n);var o;i=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(XE.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(i||(i={}),i[o]=l[o])}else i||(s||(s=[]),s.push(u,i)),i=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(XE.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ei("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}i&&(s=s||[]).push("style",i);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Kre=function(t,e,i,n){i!==n&&(e.flags|=4)};function B1(t,e){if(!Ni)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function es(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,n=0;if(e)for(var r=t.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=i,e}function PCe(t,e,i){var n=e.pendingProps;switch(QU(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return es(e),null;case 1:return Oo(e.type)&&GA(),es(e),null;case 3:return n=e.stateNode,X_(),Oi(Mo),Oi(Es),l8(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(W2(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yc!==null&&(IN(yc),yc=null))),vN(t,e),es(e),null;case 5:a8(e);var r=$y(uC.current);if(i=e.type,t!==null&&e.stateNode!=null)Zre(t,e,i,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(pe(166));return es(e),null}if(t=$y(Ou.current),W2(e)){n=e.stateNode,i=e.type;var s=e.memoizedProps;switch(n[$u]=e,n[lC]=s,t=(e.mode&1)!==0,i){case"dialog":Ei("cancel",n),Ei("close",n);break;case"iframe":case"object":case"embed":Ei("load",n);break;case"video":case"audio":for(r=0;r<Bx.length;r++)Ei(Bx[r],n);break;case"source":Ei("error",n);break;case"img":case"image":case"link":Ei("error",n),Ei("load",n);break;case"details":Ei("toggle",n);break;case"input":DG(n,s),Ei("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Ei("invalid",n);break;case"textarea":NG(n,s),Ei("invalid",n)}G5(i,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&q2(n.textContent,a,t),r=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&q2(n.textContent,a,t),r=["children",""+a]):XE.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ei("scroll",n)}switch(i){case"input":N2(n),FG(n,s,!0);break;case"textarea":N2(n),zG(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=HA)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ene(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(i,{is:n.is}):(t=o.createElement(i),i==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,i),t[$u]=e,t[lC]=n,Yre(t,e,!1,!1),e.stateNode=t;e:{switch(o=q5(i,n),i){case"dialog":Ei("cancel",t),Ei("close",t),r=n;break;case"iframe":case"object":case"embed":Ei("load",t),r=n;break;case"video":case"audio":for(r=0;r<Bx.length;r++)Ei(Bx[r],t);r=n;break;case"source":Ei("error",t),r=n;break;case"img":case"image":case"link":Ei("error",t),Ei("load",t),r=n;break;case"details":Ei("toggle",t),r=n;break;case"input":DG(t,n),r=j5(t,n),Ei("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=Qi({},n,{value:void 0}),Ei("invalid",t);break;case"textarea":NG(t,n),r=B5(t,n),Ei("invalid",t);break;default:r=n}G5(i,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Tne(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Cne(t,l)):s==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&QE(t,l):typeof l=="number"&&QE(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(XE.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ei("scroll",t):l!=null&&NU(t,s,l,o))}switch(i){case"input":N2(t),FG(t,n,!1);break;case"textarea":N2(t),zG(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Qf(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?y_(t,!!n.multiple,s,!1):n.defaultValue!=null&&y_(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=HA)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return es(e),null;case 6:if(t&&e.stateNode!=null)Kre(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(pe(166));if(i=$y(uC.current),$y(Ou.current),W2(e)){if(n=e.stateNode,i=e.memoizedProps,n[$u]=e,(s=n.nodeValue!==i)&&(t=wa,t!==null))switch(t.tag){case 3:q2(n.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&q2(n.nodeValue,i,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(i.nodeType===9?i:i.ownerDocument).createTextNode(n),n[$u]=e,e.stateNode=n}return es(e),null;case 13:if(Oi(Yi),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ni&&ba!==null&&e.mode&1&&!(e.flags&128))fre(),Z_(),e.flags|=98560,s=!1;else if(s=W2(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(pe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(pe(317));s[$u]=e}else Z_(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;es(e),s=!1}else yc!==null&&(IN(yc),yc=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Yi.current&1?nr===0&&(nr=3):_8())),e.updateQueue!==null&&(e.flags|=4),es(e),null);case 4:return X_(),vN(t,e),t===null&&oC(e.stateNode.containerInfo),es(e),null;case 10:return n8(e.type._context),es(e),null;case 17:return Oo(e.type)&&GA(),es(e),null;case 19:if(Oi(Yi),s=e.memoizedState,s===null)return es(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)B1(s,!1);else{if(nr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=XA(t),o!==null){for(e.flags|=128,B1(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=i,i=e.child;i!==null;)s=i,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return bi(Yi,Yi.current&1|2),e.child}t=t.sibling}s.tail!==null&&yn()>ew&&(e.flags|=128,n=!0,B1(s,!1),e.lanes=4194304)}else{if(!n)if(t=XA(o),t!==null){if(e.flags|=128,n=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),B1(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ni)return es(e),null}else 2*yn()-s.renderingStartTime>ew&&i!==1073741824&&(e.flags|=128,n=!0,B1(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(i=s.last,i!==null?i.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=yn(),e.sibling=null,i=Yi.current,bi(Yi,n?i&1|2:i&1),e):(es(e),null);case 22:case 23:return b8(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ha&1073741824&&(es(e),e.subtreeFlags&6&&(e.flags|=8192)):es(e),null;case 24:return null;case 25:return null}throw Error(pe(156,e.tag))}function RCe(t,e){switch(QU(e),e.tag){case 1:return Oo(e.type)&&GA(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return X_(),Oi(Mo),Oi(Es),l8(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return a8(e),null;case 13:if(Oi(Yi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(pe(340));Z_()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oi(Yi),null;case 4:return X_(),null;case 10:return n8(e.type._context),null;case 22:case 23:return b8(),null;case 24:return null;default:return null}}var Z2=!1,vs=!1,LCe=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Kb(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(n){un(t,e,n)}else i.current=null}function bN(t,e,i){try{i()}catch(n){un(t,e,n)}}var kq=!1;function DCe(t,e){if(iN=VA,t=tre(),KU(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var o=0,a=-1,l=-1,u=0,h=0,p=t,f=null;t:for(;;){for(var g;p!==i||r!==0&&p.nodeType!==3||(a=o+r),p!==s||n!==0&&p.nodeType!==3||(l=o+n),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)f=p,p=g;for(;;){if(p===t)break t;if(f===i&&++u===r&&(a=o),f===s&&++h===n&&(l=o),(g=p.nextSibling)!==null)break;p=f,f=p.parentNode}p=g}i=a===-1||l===-1?null:{start:a,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(nN={focusedElem:t,selectionRange:i},VA=!1,Te=e;Te!==null;)if(e=Te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Te=t;else for(;Te!==null;){e=Te;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,_=v.memoizedState,w=e.stateNode,S=w.getSnapshotBeforeUpdate(e.elementType===e.type?b:uc(e.type,b),_);w.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pe(163))}}catch($){un(e,e.return,$)}if(t=e.sibling,t!==null){t.return=e.return,Te=t;break}Te=e.return}return v=kq,kq=!1,v}function cE(t,e,i){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&bN(e,i,s)}r=r.next}while(r!==n)}}function bP(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var n=i.create;i.destroy=n()}i=i.next}while(i!==e)}}function _N(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function Xre(t){var e=t.alternate;e!==null&&(t.alternate=null,Xre(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[$u],delete e[lC],delete e[oN],delete e[vCe],delete e[bCe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qre(t){return t.tag===5||t.tag===3||t.tag===4}function $q(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qre(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wN(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=HA));else if(n!==4&&(t=t.child,t!==null))for(wN(t,e,i),t=t.sibling;t!==null;)wN(t,e,i),t=t.sibling}function xN(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(xN(t,e,i),t=t.sibling;t!==null;)xN(t,e,i),t=t.sibling}var jr=null,pc=!1;function Jh(t,e,i){for(i=i.child;i!==null;)ese(t,e,i),i=i.sibling}function ese(t,e,i){if(Mu&&typeof Mu.onCommitFiberUnmount=="function")try{Mu.onCommitFiberUnmount(dP,i)}catch{}switch(i.tag){case 5:vs||Kb(i,e);case 6:var n=jr,r=pc;jr=null,Jh(t,e,i),jr=n,pc=r,jr!==null&&(pc?(t=jr,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):jr.removeChild(i.stateNode));break;case 18:jr!==null&&(pc?(t=jr,i=i.stateNode,t.nodeType===8?S3(t.parentNode,i):t.nodeType===1&&S3(t,i),nC(t)):S3(jr,i.stateNode));break;case 4:n=jr,r=pc,jr=i.stateNode.containerInfo,pc=!0,Jh(t,e,i),jr=n,pc=r;break;case 0:case 11:case 14:case 15:if(!vs&&(n=i.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&bN(i,e,o),r=r.next}while(r!==n)}Jh(t,e,i);break;case 1:if(!vs&&(Kb(i,e),n=i.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(a){un(i,e,a)}Jh(t,e,i);break;case 21:Jh(t,e,i);break;case 22:i.mode&1?(vs=(n=vs)||i.memoizedState!==null,Jh(t,e,i),vs=n):Jh(t,e,i);break;default:Jh(t,e,i)}}function Aq(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new LCe),e.forEach(function(n){var r=GCe.bind(null,t,n);i.has(n)||(i.add(n),n.then(r,r))})}}function Al(t,e){var i=e.deletions;if(i!==null)for(var n=0;n<i.length;n++){var r=i[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:jr=a.stateNode,pc=!1;break e;case 3:jr=a.stateNode.containerInfo,pc=!0;break e;case 4:jr=a.stateNode.containerInfo,pc=!0;break e}a=a.return}if(jr===null)throw Error(pe(160));ese(s,o,r),jr=null,pc=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){un(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tse(e,t),e=e.sibling}function tse(t,e){var i=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Al(e,t),Hc(t),n&4){try{cE(3,t,t.return),bP(3,t)}catch(b){un(t,t.return,b)}try{cE(5,t,t.return)}catch(b){un(t,t.return,b)}}break;case 1:Al(e,t),Hc(t),n&512&&i!==null&&Kb(i,i.return);break;case 5:if(Al(e,t),Hc(t),n&512&&i!==null&&Kb(i,i.return),t.flags&32){var r=t.stateNode;try{QE(r,"")}catch(b){un(t,t.return,b)}}if(n&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=i!==null?i.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&xne(r,s),q5(a,o);var u=q5(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?Tne(r,p):h==="dangerouslySetInnerHTML"?Cne(r,p):h==="children"?QE(r,p):NU(r,h,p,u)}switch(a){case"input":V5(r,s);break;case"textarea":Sne(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?y_(r,!!s.multiple,g,!1):f!==!!s.multiple&&(s.defaultValue!=null?y_(r,!!s.multiple,s.defaultValue,!0):y_(r,!!s.multiple,s.multiple?[]:"",!1))}r[lC]=s}catch(b){un(t,t.return,b)}}break;case 6:if(Al(e,t),Hc(t),n&4){if(t.stateNode===null)throw Error(pe(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(b){un(t,t.return,b)}}break;case 3:if(Al(e,t),Hc(t),n&4&&i!==null&&i.memoizedState.isDehydrated)try{nC(e.containerInfo)}catch(b){un(t,t.return,b)}break;case 4:Al(e,t),Hc(t);break;case 13:Al(e,t),Hc(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(y8=yn())),n&4&&Aq(t);break;case 22:if(h=i!==null&&i.memoizedState!==null,t.mode&1?(vs=(u=vs)||h,Al(e,t),vs=u):Al(e,t),Hc(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(Te=t,h=t.child;h!==null;){for(p=Te=h;Te!==null;){switch(f=Te,g=f.child,f.tag){case 0:case 11:case 14:case 15:cE(4,f,f.return);break;case 1:Kb(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,i=f.return;try{e=n,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(b){un(n,i,b)}}break;case 5:Kb(f,f.return);break;case 22:if(f.memoizedState!==null){Oq(p);continue}}g!==null?(g.return=f,Te=g):Oq(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{r=p.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ine("display",o))}catch(b){un(t,t.return,b)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(b){un(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Al(e,t),Hc(t),n&4&&Aq(t);break;case 21:break;default:Al(e,t),Hc(t)}}function Hc(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(Qre(i)){var n=i;break e}i=i.return}throw Error(pe(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(QE(r,""),n.flags&=-33);var s=$q(t);xN(t,s,r);break;case 3:case 4:var o=n.stateNode.containerInfo,a=$q(t);wN(t,a,o);break;default:throw Error(pe(161))}}catch(l){un(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function FCe(t,e,i){Te=t,ise(t)}function ise(t,e,i){for(var n=(t.mode&1)!==0;Te!==null;){var r=Te,s=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||Z2;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||vs;a=Z2;var u=vs;if(Z2=o,(vs=l)&&!u)for(Te=r;Te!==null;)o=Te,l=o.child,o.tag===22&&o.memoizedState!==null?Pq(r):l!==null?(l.return=o,Te=l):Pq(r);for(;s!==null;)Te=s,ise(s),s=s.sibling;Te=r,Z2=a,vs=u}Mq(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Te=s):Mq(t)}}function Mq(t){for(;Te!==null;){var e=Te;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vs||bP(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!vs)if(i===null)n.componentDidMount();else{var r=e.elementType===e.type?i.memoizedProps:uc(e.type,i.memoizedProps);n.componentDidUpdate(r,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&fq(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}fq(e,o,i)}break;case 5:var a=e.stateNode;if(i===null&&e.flags&4){i=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&nC(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pe(163))}vs||e.flags&512&&_N(e)}catch(f){un(e,e.return,f)}}if(e===t){Te=null;break}if(i=e.sibling,i!==null){i.return=e.return,Te=i;break}Te=e.return}}function Oq(t){for(;Te!==null;){var e=Te;if(e===t){Te=null;break}var i=e.sibling;if(i!==null){i.return=e.return,Te=i;break}Te=e.return}}function Pq(t){for(;Te!==null;){var e=Te;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{bP(4,e)}catch(l){un(e,i,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(l){un(e,r,l)}}var s=e.return;try{_N(e)}catch(l){un(e,s,l)}break;case 5:var o=e.return;try{_N(e)}catch(l){un(e,o,l)}}}catch(l){un(e,e.return,l)}if(e===t){Te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Te=a;break}Te=e.return}}var NCe=Math.ceil,tM=Fh.ReactCurrentDispatcher,m8=Fh.ReactCurrentOwner,hl=Fh.ReactCurrentBatchConfig,$t=0,Ir=null,Dn=null,qr=0,ha=0,Xb=ym(0),nr=0,fC=null,h0=0,_P=0,g8=0,uE=null,Co=null,y8=0,ew=1/0,Hd=null,iM=!1,SN=null,Bf=null,K2=!1,If=null,nM=0,dE=0,EN=null,Yk=-1,Zk=0;function qs(){return $t&6?yn():Yk!==-1?Yk:Yk=yn()}function Hf(t){return t.mode&1?$t&2&&qr!==0?qr&-qr:wCe.transition!==null?(Zk===0&&(Zk=zne()),Zk):(t=ii,t!==0||(t=window.event,t=t===void 0?16:qne(t.type)),t):1}function Ic(t,e,i,n){if(50<dE)throw dE=0,EN=null,Error(pe(185));bI(t,i,n),(!($t&2)||t!==Ir)&&(t===Ir&&(!($t&2)&&(_P|=i),nr===4&&vf(t,qr)),Po(t,n),i===1&&$t===0&&!(e.mode&1)&&(ew=yn()+500,gP&&vm()))}function Po(t,e){var i=t.callbackNode;wEe(t,e);var n=jA(t,t===Ir?qr:0);if(n===0)i!==null&&UG(i),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(i!=null&&UG(i),e===1)t.tag===0?_Ce(Rq.bind(null,t)):dre(Rq.bind(null,t)),gCe(function(){!($t&6)&&vm()}),i=null;else{switch(jne(n)){case 1:i=BU;break;case 4:i=Fne;break;case 16:i=zA;break;case 536870912:i=Nne;break;default:i=zA}i=use(i,nse.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function nse(t,e){if(Yk=-1,Zk=0,$t&6)throw Error(pe(327));var i=t.callbackNode;if(x_()&&t.callbackNode!==i)return null;var n=jA(t,t===Ir?qr:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=rM(t,n);else{e=n;var r=$t;$t|=2;var s=sse();(Ir!==t||qr!==e)&&(Hd=null,ew=yn()+500,Yy(t,e));do try{VCe();break}catch(a){rse(t,a)}while(1);i8(),tM.current=s,$t=r,Dn!==null?e=0:(Ir=null,qr=0,e=nr)}if(e!==0){if(e===2&&(r=K5(t),r!==0&&(n=r,e=CN(t,r))),e===1)throw i=fC,Yy(t,0),vf(t,n),Po(t,yn()),i;if(e===6)vf(t,n);else{if(r=t.current.alternate,!(n&30)&&!zCe(r)&&(e=rM(t,n),e===2&&(s=K5(t),s!==0&&(n=s,e=CN(t,s))),e===1))throw i=fC,Yy(t,0),vf(t,n),Po(t,yn()),i;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(pe(345));case 2:fg(t,Co,Hd);break;case 3:if(vf(t,n),(n&130023424)===n&&(e=y8+500-yn(),10<e)){if(jA(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){qs(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=sN(fg.bind(null,t,Co,Hd),e);break}fg(t,Co,Hd);break;case 4:if(vf(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var o=31-Cc(n);s=1<<o,o=e[o],o>r&&(r=o),n&=~s}if(n=r,n=yn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*NCe(n/1960))-n,10<n){t.timeoutHandle=sN(fg.bind(null,t,Co,Hd),n);break}fg(t,Co,Hd);break;case 5:fg(t,Co,Hd);break;default:throw Error(pe(329))}}}return Po(t,yn()),t.callbackNode===i?nse.bind(null,t):null}function CN(t,e){var i=uE;return t.current.memoizedState.isDehydrated&&(Yy(t,e).flags|=256),t=rM(t,e),t!==2&&(e=Co,Co=i,e!==null&&IN(e)),t}function IN(t){Co===null?Co=t:Co.push.apply(Co,t)}function zCe(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var n=0;n<i.length;n++){var r=i[n],s=r.getSnapshot;r=r.value;try{if(!Pc(s(),r))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function vf(t,e){for(e&=~g8,e&=~_P,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-Cc(e),n=1<<i;t[i]=-1,e&=~n}}function Rq(t){if($t&6)throw Error(pe(327));x_();var e=jA(t,0);if(!(e&1))return Po(t,yn()),null;var i=rM(t,e);if(t.tag!==0&&i===2){var n=K5(t);n!==0&&(e=n,i=CN(t,n))}if(i===1)throw i=fC,Yy(t,0),vf(t,e),Po(t,yn()),i;if(i===6)throw Error(pe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fg(t,Co,Hd),Po(t,yn()),null}function v8(t,e){var i=$t;$t|=1;try{return t(e)}finally{$t=i,$t===0&&(ew=yn()+500,gP&&vm())}}function p0(t){If!==null&&If.tag===0&&!($t&6)&&x_();var e=$t;$t|=1;var i=hl.transition,n=ii;try{if(hl.transition=null,ii=1,t)return t()}finally{ii=n,hl.transition=i,$t=e,!($t&6)&&vm()}}function b8(){ha=Xb.current,Oi(Xb)}function Yy(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,mCe(i)),Dn!==null)for(i=Dn.return;i!==null;){var n=i;switch(QU(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&GA();break;case 3:X_(),Oi(Mo),Oi(Es),l8();break;case 5:a8(n);break;case 4:X_();break;case 13:Oi(Yi);break;case 19:Oi(Yi);break;case 10:n8(n.type._context);break;case 22:case 23:b8()}i=i.return}if(Ir=t,Dn=t=Gf(t.current,null),qr=ha=e,nr=0,fC=null,g8=_P=h0=0,Co=uE=null,ky!==null){for(e=0;e<ky.length;e++)if(i=ky[e],n=i.interleaved,n!==null){i.interleaved=null;var r=n.next,s=i.pending;if(s!==null){var o=s.next;s.next=r,n.next=o}i.pending=n}ky=null}return t}function rse(t,e){do{var i=Dn;try{if(i8(),qk.current=eM,QA){for(var n=Ki.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}QA=!1}if(d0=0,wr=tr=Ki=null,lE=!1,dC=0,m8.current=null,i===null||i.return===null){nr=1,fC=e,Dn=null;break}e:{var s=t,o=i.return,a=i,l=e;if(e=qr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=wq(o);if(g!==null){g.flags&=-257,xq(g,o,a,s,e),g.mode&1&&_q(s,u,e),e=g,l=u;var v=e.updateQueue;if(v===null){var b=new Set;b.add(l),e.updateQueue=b}else v.add(l);break e}else{if(!(e&1)){_q(s,u,e),_8();break e}l=Error(pe(426))}}else if(Ni&&a.mode&1){var _=wq(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),xq(_,o,a,s,e),e8(Q_(l,a));break e}}s=l=Q_(l,a),nr!==4&&(nr=2),uE===null?uE=[s]:uE.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Vre(s,l,e);pq(s,w);break e;case 1:a=l;var S=s.type,C=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Bf===null||!Bf.has(C)))){s.flags|=65536,e&=-e,s.lanes|=e;var $=Ure(s,a,e);pq(s,$);break e}}s=s.return}while(s!==null)}ase(i)}catch(M){e=M,Dn===i&&i!==null&&(Dn=i=i.return);continue}break}while(1)}function sse(){var t=tM.current;return tM.current=eM,t===null?eM:t}function _8(){(nr===0||nr===3||nr===2)&&(nr=4),Ir===null||!(h0&268435455)&&!(_P&268435455)||vf(Ir,qr)}function rM(t,e){var i=$t;$t|=2;var n=sse();(Ir!==t||qr!==e)&&(Hd=null,Yy(t,e));do try{jCe();break}catch(r){rse(t,r)}while(1);if(i8(),$t=i,tM.current=n,Dn!==null)throw Error(pe(261));return Ir=null,qr=0,nr}function jCe(){for(;Dn!==null;)ose(Dn)}function VCe(){for(;Dn!==null&&!hEe();)ose(Dn)}function ose(t){var e=cse(t.alternate,t,ha);t.memoizedProps=t.pendingProps,e===null?ase(t):Dn=e,m8.current=null}function ase(t){var e=t;do{var i=e.alternate;if(t=e.return,e.flags&32768){if(i=RCe(i,e),i!==null){i.flags&=32767,Dn=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nr=6,Dn=null;return}}else if(i=PCe(i,e,ha),i!==null){Dn=i;return}if(e=e.sibling,e!==null){Dn=e;return}Dn=e=t}while(e!==null);nr===0&&(nr=5)}function fg(t,e,i){var n=ii,r=hl.transition;try{hl.transition=null,ii=1,UCe(t,e,i,n)}finally{hl.transition=r,ii=n}return null}function UCe(t,e,i,n){do x_();while(If!==null);if($t&6)throw Error(pe(327));i=t.finishedWork;var r=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(pe(177));t.callbackNode=null,t.callbackPriority=0;var s=i.lanes|i.childLanes;if(xEe(t,s),t===Ir&&(Dn=Ir=null,qr=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||K2||(K2=!0,use(zA,function(){return x_(),null})),s=(i.flags&15990)!==0,i.subtreeFlags&15990||s){s=hl.transition,hl.transition=null;var o=ii;ii=1;var a=$t;$t|=4,m8.current=null,DCe(t,i),tse(i,t),lCe(nN),VA=!!iN,nN=iN=null,t.current=i,FCe(i),pEe(),$t=a,ii=o,hl.transition=s}else t.current=i;if(K2&&(K2=!1,If=t,nM=r),s=t.pendingLanes,s===0&&(Bf=null),gEe(i.stateNode),Po(t,yn()),e!==null)for(n=t.onRecoverableError,i=0;i<e.length;i++)r=e[i],n(r.value,{componentStack:r.stack,digest:r.digest});if(iM)throw iM=!1,t=SN,SN=null,t;return nM&1&&t.tag!==0&&x_(),s=t.pendingLanes,s&1?t===EN?dE++:(dE=0,EN=t):dE=0,vm(),null}function x_(){if(If!==null){var t=jne(nM),e=hl.transition,i=ii;try{if(hl.transition=null,ii=16>t?16:t,If===null)var n=!1;else{if(t=If,If=null,nM=0,$t&6)throw Error(pe(331));var r=$t;for($t|=4,Te=t.current;Te!==null;){var s=Te,o=s.child;if(Te.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Te=u;Te!==null;){var h=Te;switch(h.tag){case 0:case 11:case 15:cE(8,h,s)}var p=h.child;if(p!==null)p.return=h,Te=p;else for(;Te!==null;){h=Te;var f=h.sibling,g=h.return;if(Xre(h),h===u){Te=null;break}if(f!==null){f.return=g,Te=f;break}Te=g}}}var v=s.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var _=b.sibling;b.sibling=null,b=_}while(b!==null)}}Te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Te=o;else e:for(;Te!==null;){if(s=Te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:cE(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,Te=w;break e}Te=s.return}}var S=t.current;for(Te=S;Te!==null;){o=Te;var C=o.child;if(o.subtreeFlags&2064&&C!==null)C.return=o,Te=C;else e:for(o=S;Te!==null;){if(a=Te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:bP(9,a)}}catch(M){un(a,a.return,M)}if(a===o){Te=null;break e}var $=a.sibling;if($!==null){$.return=a.return,Te=$;break e}Te=a.return}}if($t=r,vm(),Mu&&typeof Mu.onPostCommitFiberRoot=="function")try{Mu.onPostCommitFiberRoot(dP,t)}catch{}n=!0}return n}finally{ii=i,hl.transition=e}}return!1}function Lq(t,e,i){e=Q_(i,e),e=Vre(t,e,1),t=Uf(t,e,1),e=qs(),t!==null&&(bI(t,1,e),Po(t,e))}function un(t,e,i){if(t.tag===3)Lq(t,t,i);else for(;e!==null;){if(e.tag===3){Lq(e,t,i);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Bf===null||!Bf.has(n))){t=Q_(i,t),t=Ure(e,t,1),e=Uf(e,t,1),t=qs(),e!==null&&(bI(e,1,t),Po(e,t));break}}e=e.return}}function BCe(t,e,i){var n=t.pingCache;n!==null&&n.delete(e),e=qs(),t.pingedLanes|=t.suspendedLanes&i,Ir===t&&(qr&i)===i&&(nr===4||nr===3&&(qr&130023424)===qr&&500>yn()-y8?Yy(t,0):g8|=i),Po(t,e)}function lse(t,e){e===0&&(t.mode&1?(e=V2,V2<<=1,!(V2&130023424)&&(V2=4194304)):e=1);var i=qs();t=Ch(t,e),t!==null&&(bI(t,e,i),Po(t,i))}function HCe(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),lse(t,i)}function GCe(t,e){var i=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(i=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(pe(314))}n!==null&&n.delete(e),lse(t,i)}var cse;cse=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mo.current)ko=!0;else{if(!(t.lanes&i)&&!(e.flags&128))return ko=!1,OCe(t,e,i);ko=!!(t.flags&131072)}else ko=!1,Ni&&e.flags&1048576&&hre(e,JA,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Jk(t,e),t=e.pendingProps;var r=Y_(e,Es.current);w_(e,i),r=u8(null,e,n,t,r,i);var s=d8();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oo(n)?(s=!0,qA(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,s8(e),r.updater=yP,e.stateNode=r,r._reactInternals=e,hN(e,n,t,i),e=mN(null,e,n,!0,s,i)):(e.tag=0,Ni&&s&&XU(e),Us(null,e,r,i),e=e.child),e;case 16:n=e.elementType;e:{switch(Jk(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=WCe(n),t=uc(n,t),r){case 0:e=fN(null,e,n,t,i);break e;case 1:e=Cq(null,e,n,t,i);break e;case 11:e=Sq(null,e,n,t,i);break e;case 14:e=Eq(null,e,n,uc(n.type,t),i);break e}throw Error(pe(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:uc(n,r),fN(t,e,n,r,i);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:uc(n,r),Cq(t,e,n,r,i);case 3:e:{if(qre(e),t===null)throw Error(pe(387));n=e.pendingProps,s=e.memoizedState,r=s.element,gre(t,e),KA(e,n,null,i);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Q_(Error(pe(423)),e),e=Iq(t,e,n,i,r);break e}else if(n!==r){r=Q_(Error(pe(424)),e),e=Iq(t,e,n,i,r);break e}else for(ba=Vf(e.stateNode.containerInfo.firstChild),wa=e,Ni=!0,yc=null,i=_re(e,null,n,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Z_(),n===r){e=Ih(t,e,i);break e}Us(t,e,n,i)}e=e.child}return e;case 5:return wre(e),t===null&&cN(e),n=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,rN(n,r)?o=null:s!==null&&rN(n,s)&&(e.flags|=32),Gre(t,e),Us(t,e,o,i),e.child;case 6:return t===null&&cN(e),null;case 13:return Wre(t,e,i);case 4:return o8(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=K_(e,null,n,i):Us(t,e,n,i),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:uc(n,r),Sq(t,e,n,r,i);case 7:return Us(t,e,e.pendingProps,i),e.child;case 8:return Us(t,e,e.pendingProps.children,i),e.child;case 12:return Us(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,bi(YA,n._currentValue),n._currentValue=o,s!==null)if(Pc(s.value,o)){if(s.children===r.children&&!Mo.current){e=Ih(t,e,i);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=uh(-1,i&-i),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=i,l=s.alternate,l!==null&&(l.lanes|=i),uN(s.return,i,e),a.lanes|=i;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(pe(341));o.lanes|=i,a=o.alternate,a!==null&&(a.lanes|=i),uN(o,i,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Us(t,e,r.children,i),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,w_(e,i),r=yl(r),n=n(r),e.flags|=1,Us(t,e,n,i),e.child;case 14:return n=e.type,r=uc(n,e.pendingProps),r=uc(n.type,r),Eq(t,e,n,r,i);case 15:return Bre(t,e,e.type,e.pendingProps,i);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:uc(n,r),Jk(t,e),e.tag=1,Oo(n)?(t=!0,qA(e)):t=!1,w_(e,i),vre(e,n,r),hN(e,n,r,i),mN(null,e,n,!0,t,i);case 19:return Jre(t,e,i);case 22:return Hre(t,e,i)}throw Error(pe(156,e.tag))};function use(t,e){return Dne(t,e)}function qCe(t,e,i,n){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function al(t,e,i,n){return new qCe(t,e,i,n)}function w8(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WCe(t){if(typeof t=="function")return w8(t)?1:0;if(t!=null){if(t=t.$$typeof,t===jU)return 11;if(t===VU)return 14}return 2}function Gf(t,e){var i=t.alternate;return i===null?(i=al(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function Kk(t,e,i,n,r,s){var o=2;if(n=t,typeof t=="function")w8(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ub:return Zy(i.children,r,s,e);case zU:o=8,r|=8;break;case D5:return t=al(12,i,e,r|2),t.elementType=D5,t.lanes=s,t;case F5:return t=al(13,i,e,r),t.elementType=F5,t.lanes=s,t;case N5:return t=al(19,i,e,r),t.elementType=N5,t.lanes=s,t;case bne:return wP(i,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yne:o=10;break e;case vne:o=9;break e;case jU:o=11;break e;case VU:o=14;break e;case sf:o=16,n=null;break e}throw Error(pe(130,t==null?t:typeof t,""))}return e=al(o,i,e,r),e.elementType=t,e.type=n,e.lanes=s,e}function Zy(t,e,i,n){return t=al(7,t,n,e),t.lanes=i,t}function wP(t,e,i,n){return t=al(22,t,n,e),t.elementType=bne,t.lanes=i,t.stateNode={isHidden:!1},t}function M3(t,e,i){return t=al(6,t,null,e),t.lanes=i,t}function O3(t,e,i){return e=al(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JCe(t,e,i,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h3(0),this.expirationTimes=h3(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h3(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function x8(t,e,i,n,r,s,o,a,l){return t=new JCe(t,e,i,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=al(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},s8(s),t}function YCe(t,e,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vb,key:n==null?null:""+n,children:t,containerInfo:e,implementation:i}}function dse(t){if(!t)return em;t=t._reactInternals;e:{if(D0(t)!==t||t.tag!==1)throw Error(pe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Oo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(pe(171))}if(t.tag===1){var i=t.type;if(Oo(i))return ure(t,i,e)}return e}function hse(t,e,i,n,r,s,o,a,l){return t=x8(i,n,!0,t,r,s,o,a,l),t.context=dse(null),i=t.current,n=qs(),r=Hf(i),s=uh(n,r),s.callback=e??null,Uf(i,s,r),t.current.lanes=r,bI(t,r,n),Po(t,n),t}function xP(t,e,i,n){var r=e.current,s=qs(),o=Hf(r);return i=dse(i),e.context===null?e.context=i:e.pendingContext=i,e=uh(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Uf(r,e,o),t!==null&&(Ic(t,r,o,s),Gk(t,r,o)),o}function sM(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Dq(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function S8(t,e){Dq(t,e),(t=t.alternate)&&Dq(t,e)}function ZCe(){return null}var pse=typeof reportError=="function"?reportError:function(t){console.error(t)};function E8(t){this._internalRoot=t}SP.prototype.render=E8.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(pe(409));xP(t,e,null,null)};SP.prototype.unmount=E8.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;p0(function(){xP(null,t,null,null)}),e[Eh]=null}};function SP(t){this._internalRoot=t}SP.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bne();t={blockedOn:null,target:t,priority:e};for(var i=0;i<yf.length&&e!==0&&e<yf[i].priority;i++);yf.splice(i,0,t),i===0&&Gne(t)}};function C8(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function EP(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fq(){}function KCe(t,e,i,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var u=sM(o);s.call(u)}}var o=hse(e,n,t,0,null,!1,!1,"",Fq);return t._reactRootContainer=o,t[Eh]=o.current,oC(t.nodeType===8?t.parentNode:t),p0(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var a=n;n=function(){var u=sM(l);a.call(u)}}var l=x8(t,0,!1,null,null,!1,!1,"",Fq);return t._reactRootContainer=l,t[Eh]=l.current,oC(t.nodeType===8?t.parentNode:t),p0(function(){xP(e,l,i,n)}),l}function CP(t,e,i,n,r){var s=i._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=sM(o);a.call(l)}}xP(e,o,t,r)}else o=KCe(i,e,t,r,n);return sM(o)}Vne=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=Ux(e.pendingLanes);i!==0&&(HU(e,i|1),Po(e,yn()),!($t&6)&&(ew=yn()+500,vm()))}break;case 13:p0(function(){var n=Ch(t,1);if(n!==null){var r=qs();Ic(n,t,1,r)}}),S8(t,1)}};GU=function(t){if(t.tag===13){var e=Ch(t,134217728);if(e!==null){var i=qs();Ic(e,t,134217728,i)}S8(t,134217728)}};Une=function(t){if(t.tag===13){var e=Hf(t),i=Ch(t,e);if(i!==null){var n=qs();Ic(i,t,e,n)}S8(t,e)}};Bne=function(){return ii};Hne=function(t,e){var i=ii;try{return ii=t,e()}finally{ii=i}};J5=function(t,e,i){switch(e){case"input":if(V5(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var n=i[e];if(n!==t&&n.form===t.form){var r=mP(n);if(!r)throw Error(pe(90));wne(n),V5(n,r)}}}break;case"textarea":Sne(t,i);break;case"select":e=i.value,e!=null&&y_(t,!!i.multiple,e,!1)}};Ane=v8;Mne=p0;var XCe={usingClientEntryPoint:!1,Events:[wI,qb,mP,kne,$ne,v8]},H1={findFiberByHostInstance:Ty,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},QCe={bundleType:H1.bundleType,version:H1.version,rendererPackageName:H1.rendererPackageName,rendererConfig:H1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Rne(t),t===null?null:t.stateNode},findFiberByHostInstance:H1.findFiberByHostInstance||ZCe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var X2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!X2.isDisabled&&X2.supportsFiber)try{dP=X2.inject(QCe),Mu=X2}catch{}}Ma.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XCe;Ma.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C8(e))throw Error(pe(200));return YCe(t,e,null,i)};Ma.createRoot=function(t,e){if(!C8(t))throw Error(pe(299));var i=!1,n="",r=pse;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=x8(t,1,!1,null,null,i,!1,n,r),t[Eh]=e.current,oC(t.nodeType===8?t.parentNode:t),new E8(e)};Ma.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(pe(188)):(t=Object.keys(t).join(","),Error(pe(268,t)));return t=Rne(e),t=t===null?null:t.stateNode,t};Ma.flushSync=function(t){return p0(t)};Ma.hydrate=function(t,e,i){if(!EP(e))throw Error(pe(200));return CP(null,t,e,!0,i)};Ma.hydrateRoot=function(t,e,i){if(!C8(t))throw Error(pe(405));var n=i!=null&&i.hydratedSources||null,r=!1,s="",o=pse;if(i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),e=hse(e,null,t,1,i??null,r,!1,s,o),t[Eh]=e.current,oC(t),n)for(t=0;t<n.length;t++)i=n[t],r=i._getVersion,r=r(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,r]:e.mutableSourceEagerHydrationData.push(i,r);return new SP(e)};Ma.render=function(t,e,i){if(!EP(e))throw Error(pe(200));return CP(null,t,e,!1,i)};Ma.unmountComponentAtNode=function(t){if(!EP(t))throw Error(pe(40));return t._reactRootContainer?(p0(function(){CP(null,null,t,!1,function(){t._reactRootContainer=null,t[Eh]=null})}),!0):!1};Ma.unstable_batchedUpdates=v8;Ma.unstable_renderSubtreeIntoContainer=function(t,e,i,n){if(!EP(i))throw Error(pe(200));if(t==null||t._reactInternals===void 0)throw Error(pe(38));return CP(t,e,i,!1,n)};Ma.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(i){console.error(i)}}e(),t.exports=Ma})(ZSe);var Bw,Nq=P5;Bw=O5.createRoot=Nq.createRoot,O5.hydrateRoot=Nq.hydrateRoot;const eIe="modulepreload",tIe=function(t){return"/"+t},zq={},q=function(e,i,n){if(!i||i.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(i.map(s=>{if(s=tIe(s),s in zq)return;zq[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let h=r.length-1;h>=0;h--){const p=r[h];if(p.href===s&&(!o||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":eIe,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((h,p)=>{u.addEventListener("load",h),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())},iIe=t=>t.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),fse=t=>t.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`),nIe=(t,e,i={})=>{if(t instanceof Element){const n=rIe(t.classList,e,i);n!==""&&(t.className=n),Object.keys(e).forEach(r=>{if(!(r==="children"||r==="style"||r==="ref"||r==="class"||r==="className"||r==="forwardedRef"))if(r.indexOf("on")===0&&r[2]===r[2].toUpperCase()){const s=r.substring(2),o=s[0].toLowerCase()+s.substring(1);mse(o)||sIe(t,o,e[r])}else t[r]=e[r],typeof e[r]==="string"&&t.setAttribute(fse(r),e[r])})}},rIe=(t,e,i)=>{const n=e.className||e.class,r=i.className||i.class,s=P3(t),o=P3(n?n.split(" "):[]),a=P3(r?r.split(" "):[]),l=[];return s.forEach(u=>{o.has(u)?(l.push(u),o.delete(u)):a.has(u)||l.push(u)}),o.forEach(u=>l.push(u)),l.join(" ")};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const mse=t=>{if(typeof document>"u")return!0;{const e="on"+t;let i=e in document;if(!i){const n=document.createElement("div");n.setAttribute(e,"return;"),i=typeof n[e]=="function"}return i}},sIe=(t,e,i)=>{const n=t.__events||(t.__events={}),r=n[e];r&&t.removeEventListener(e,r),t.addEventListener(e,n[e]=function(o){i&&i.call(this,o)})},P3=t=>{const e=new Map;return t.forEach(i=>e.set(i,i)),e},oIe=(t,e)=>{typeof t=="function"?t(e):t!=null&&(t.current=e)},aIe=(...t)=>e=>{t.forEach(i=>{oIe(i,e)})},lIe=(t,e)=>{const i=(n,r)=>gl.createElement(t,Object.assign({},n,{forwardedRef:r}));return i.displayName=e,gl.forwardRef(i)};var cIe=globalThis&&globalThis.__rest||function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]]);return i};const Xe=(t,e,i,n)=>{n!==void 0&&n();const r=iIe(t),s=class extends gl.Component{constructor(o){super(o),this.setComponentElRef=a=>{this.componentEl=a}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(o){nIe(this.componentEl,this.props,o)}render(){const o=this.props,{children:a,forwardedRef:l,style:u,className:h,ref:p}=o,f=cIe(o,["children","forwardedRef","style","className","ref"]);let g=Object.keys(f).reduce((b,_)=>{const w=f[_];if(_.indexOf("on")===0&&_[2]===_[2].toUpperCase()){const S=_.substring(2).toLowerCase();typeof document<"u"&&mse(S)&&(b[_]=w)}else{const S=typeof w;(S==="string"||S==="boolean"||S==="number")&&(b[fse(_)]=w)}return b},{});i&&(g=i(this.props,g));const v=Object.assign(Object.assign({},g),{ref:aIe(l,this.setComponentElRef),style:u});return le.createElement(t,v,a)}static get displayName(){return r}};return e&&(s.contextType=e),lIe(s,r)},Mft=Xe("calcite-accordion"),Oft=Xe("calcite-accordion-item"),Vl=Xe("calcite-action"),uIe=Xe("calcite-action-bar"),jq=Xe("calcite-action-group"),dIe=Xe("calcite-alert"),Pft=Xe("calcite-block"),Xk=Xe("calcite-button"),Rft=Xe("calcite-checkbox"),Lft=Xe("calcite-color-picker"),Dft=Xe("calcite-color-picker-swatch"),Fft=Xe("calcite-combobox"),Nft=Xe("calcite-combobox-item"),hIe=Xe("calcite-dropdown"),R3=Xe("calcite-dropdown-group"),G1=Xe("calcite-dropdown-item"),zft=Xe("calcite-flow"),jft=Xe("calcite-flow-item"),L3=Xe("calcite-icon"),Vft=Xe("calcite-input"),Uft=Xe("calcite-input-message"),pIe=Xe("calcite-label"),Bft=Xe("calcite-link"),Hft=Xe("calcite-loader"),Vq=Xe("calcite-modal"),Gft=Xe("calcite-notice"),qft=Xe("calcite-option"),fIe=Xe("calcite-panel"),Wft=Xe("calcite-popover"),Jft=Xe("calcite-radio-button"),Yft=Xe("calcite-radio-button-group"),gse=Xe("calcite-scrim"),Zft=Xe("calcite-select"),mIe=Xe("calcite-shell"),Uq=Xe("calcite-shell-panel"),Kft=Xe("calcite-slider"),gIe=Xe("calcite-switch"),Bq=Xe("calcite-tab"),yIe=Xe("calcite-tab-nav"),Hq=Xe("calcite-tab-title"),vIe=Xe("calcite-tabs"),bIe=Xe("calcite-tip"),_Ie=Xe("calcite-tip-group"),wIe=Xe("calcite-tip-manager"),ua=Xe("calcite-tooltip");function c(t,e,i,n){var r,s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,i):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,i,o):r(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o}let Tf;function ee(t){return typeof Tf[t]=="function"?Tf[t]=Tf[t](globalThis):Tf[t]}var Xie,Qie,ene,tne;Tf=(Xie=globalThis.dojoConfig)!=null&&Xie.has||(Qie=globalThis.esriConfig)!=null&&Qie.has?{...(ene=globalThis.dojoConfig)==null?void 0:ene.has,...(tne=globalThis.esriConfig)==null?void 0:tne.has}:{},ee.add=(t,e,i,n)=>((n||Tf[t]===void 0)&&(Tf[t]=e),i&&ee(t)),ee.cache=Tf,ee.add("esri-deprecation-warnings",!0),(()=>{var e;ee.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ee.add("host-browser",t),ee.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),ee.add("dom",t),ee("host-browser")){const i=navigator,n=i.userAgent,r=i.appVersion,s=parseFloat(r);if(ee.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0),ee.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0),ee.add("khtml",r.includes("Konqueror")?s:void 0),ee.add("edge",parseFloat(n.split("Edge/")[1])||void 0),ee.add("opr",parseFloat(n.split("OPR/")[1])||void 0),ee.add("webkit",!ee("wp")&&!ee("edge")&&parseFloat(n.split("WebKit/")[1])||void 0),ee.add("chrome",!ee("edge")&&!ee("opr")&&parseFloat(n.split("Chrome/")[1])||void 0),ee.add("android",!ee("wp")&&parseFloat(n.split("Android ")[1])||void 0),ee.add("safari",!r.includes("Safari")||ee("wp")||ee("chrome")||ee("android")||ee("edge")||ee("opr")?void 0:parseFloat(r.split("Version/")[1])),ee.add("mac",r.includes("Macintosh")),!ee("wp")&&n.match(/(iPhone|iPod|iPad)/)){const o=RegExp.$1.replace(/P/,"p"),a=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replace(/_/g,""));ee.add(o,l),ee.add("ios",l)}ee("webkit")||(!n.includes("Gecko")||ee("wp")||ee("khtml")||ee("edge")||ee.add("mozilla",s),ee("mozilla")&&ee.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const t=navigator.userAgent,e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(t),i=/iPhone/i.test(t);e&&ee.add("esri-mobile",e),i&&ee.add("esri-iPhone",i),ee.add("esri-geolocation",!!navigator.geolocation)}ee.add("esri-wasm","WebAssembly"in globalThis),ee.add("esri-shared-array-buffer",()=>{const t="SharedArrayBuffer"in globalThis,e=globalThis.crossOriginIsolated===!1;return t&&!e}),ee.add("wasm-simd",()=>{const t=[0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11];return WebAssembly.validate(new Uint8Array(t))}),ee.add("esri-atomics","Atomics"in globalThis),ee.add("esri-workers","Worker"in globalThis),ee.add("web-feat:cache","caches"in globalThis),ee.add("esri-workers-arraybuffer-transfer",!ee("safari")||Number(ee("safari"))>=12),ee.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ee.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ee.add("featurelayer-snapshot-enabled",!0),ee.add("featurelayer-snapshot-point-min-threshold",8e4),ee.add("featurelayer-snapshot-point-max-threshold",4e5),ee.add("featurelayer-snapshot-point-coverage",.1),ee.add("featurelayer-advanced-symbols",!1),ee.add("featurelayer-pbf",!0),ee.add("featurelayer-pbf-statistics",!1),ee.add("feature-layers-workers",!0),ee.add("feature-polyline-generalization-factor",1),ee.add("mapview-transitions-duration",200),ee.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),ee.add("mapserver-pbf-version-support",10.81),ee.add("mapservice-popup-identify-max-tolerance",20),ee.add("heatmap-allow-raster-fallback",!0),ee.add("heatmap-force-raster",!1),ee("host-webworker")||ee("host-browser")&&(ee.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ee.add("esri-image-decode",()=>{if("decode"in new Image){const t=new Image;return t.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void t.decode().then(()=>{ee.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ee.add("esri-image-decode",!1,!0,!0)})}return!1}),ee.add("esri-url-encodes-apostrophe",()=>{const t=window.document.createElement("a");return t.href="?'",t.href.includes("?%27")}))})();const xIe=null;function A(t){return t!=null}function U(t){return t==null}function kf(t,e){return A(t)?e(t):xIe}function Xft(t){return t}function Qft(t){return t}function Sr(t,e){return Du(t,e),t}function Du(t,e){if(U(t))throw new Error(e??"value is None")}function xs(t,e){return A(t)?t:typeof e=="function"?e():e}function Gq(t,e){return A(t)?t:e}function si(t){return A(t)&&t.destroy(),null}function emt(t){return A(t)&&t.dispose(),null}function bn(t){return A(t)&&t.remove(),null}function Ky(t){return A(t)&&t.abort(),null}function tmt(t){return A(t)&&t.release(),null}function SIe(t,e,i){return A(t)&&A(e)?A(i)?i(t,e):t.equals(e):t===e}function EIe(t){return null}function imt(t,e){const i=new Array;for(const n of t)i.push(Hx(n,null,e));return i}function nmt(t,e){for(const i of t)kf(i,e)}function Hx(t,e,i){return A(t)?i(t):e}function rmt(t){return t.filter(e=>A(e))}function tw(t,...e){let i=t;for(let n=0;n<e.length&&i;++n)i=i[e[n]];return i}function smt(t){return t}let D3=class mg{constructor(e=1){this._seed=e}set seed(e){this._seed=e??Math.random()*mg._m}getInt(){return this._seed=(mg._a*this._seed+mg._c)%mg._m,this._seed}getFloat(){return this.getInt()/(mg._m-1)}getIntRange(e,i){return Math.round(this.getFloatRange(e,i))}getFloatRange(e,i){const n=i-e;return e+this.getInt()/mg._m*n}};D3._m=2147483647,D3._a=48271,D3._c=0;function CIe(t,e){return e?t.filter((i,n,r)=>r.findIndex(e.bind(null,i))===n):t.filter((i,n,r)=>r.indexOf(i)===n)}function SI(t,e,i){if(U(t)&&U(e))return!0;if(U(t)||U(e)||t.length!==e.length)return!1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function omt(t,e){let i=t.length!==e.length;i&&(t.length=e.length);for(let n=0;n<e.length;++n)t[n]!==e[n]&&(t[n]=e[n],i=!0);return i}function amt(t,e,i){let n,r;return i?(n=e.filter(s=>!t.some(o=>i(o,s))),r=t.filter(s=>!e.some(o=>i(o,s)))):(n=e.filter(s=>!t.includes(s)),r=t.filter(s=>!e.includes(s))),{added:n,removed:r}}function lmt(t){return t&&typeof t.length=="number"}const IIe=!!Array.prototype.fill;function cmt(t,e){if(IIe)return new Array(t).fill(e);const i=new Array(t);for(let n=0;n<t;n++)i[n]=e;return i}function umt(t,e){e===void 0&&(e=t,t=0);const i=new Array(e-t);for(let n=t;n<e;n++)i[n-t]=n;return i}let yse=class{constructor(){this.last=0}};const vse=new yse;function TN(t,e,i,n){n=n||vse;const r=Math.max(0,n.last-10);for(let o=r;o<i;++o)if(t[o]===e)return n.last=o,o;const s=Math.min(r,i);for(let o=0;o<s;++o)if(t[o]===e)return n.last=o,o;return-1}function TIe(t,e,i,n){const r=i??t.length,s=TN(t,e,r,n);if(s!==-1)return t[s]=t[r-1],i==null&&t.pop(),e}const Ml=new Set;function kIe(t,e,i=t.length,n=e.length,r,s){if(n===0||i===0)return i;Ml.clear();for(let a=0;a<n;++a)Ml.add(e[a]);r=r||vse;const o=Math.max(0,r.last-10);for(let a=o;a<i;++a)if(Ml.has(t[a])&&(s&&s.push(t[a]),Ml.delete(t[a]),t[a]=t[i-1],--i,--a,Ml.size===0||i===0))return Ml.clear(),i;for(let a=0;a<o;++a)if(Ml.has(t[a])&&(s&&s.push(t[a]),Ml.delete(t[a]),t[a]=t[i-1],--i,--a,Ml.size===0||i===0))return Ml.clear(),i;return Ml.clear(),i}function hmt(t,e){let i=0;for(let n=0;n<t.length;++n){const r=t[n];e(r,n)&&(t[i]=r,i++)}t.length=i}function Qk(t,e){const i=t.indexOf(e);return i!==-1?(t.splice(i,1),e):null}function pmt(t){return t instanceof ArrayBuffer}function $Ie(t){return t&&t.constructor&&t.constructor.name==="Int8Array"}function AIe(t){return t&&t.constructor&&t.constructor.name==="Uint8Array"}function MIe(t){return t&&t.constructor&&t.constructor.name==="Uint8ClampedArray"}function OIe(t){return t&&t.constructor&&t.constructor.name==="Int16Array"}function PIe(t){return t&&t.constructor&&t.constructor.name==="Uint16Array"}function RIe(t){return t&&t.constructor&&t.constructor.name==="Int32Array"}function LIe(t){return t&&t.constructor&&t.constructor.name==="Uint32Array"}function DIe(t){return t&&t.constructor&&t.constructor.name==="Float32Array"}function FIe(t){return t&&t.constructor&&t.constructor.name==="Float64Array"}const fmt=1024;function IP(t,e){let i;if(e)for(i in t)t.hasOwnProperty(i)&&(t[i]===void 0?delete t[i]:t[i]instanceof Object&&IP(t[i],!0));else for(i in t)t.hasOwnProperty(i)&&t[i]===void 0&&delete t[i];return t}function G(t){if(!t||typeof t!="object"||typeof t=="function")return t;const e=xse(t);if(A(e))return e;if(bse(t))return t.clone();if(_se(t))return t.map(G);if(wse(t))return t.clone();const i={};for(const n of Object.getOwnPropertyNames(t))i[n]=G(t[n]);return i}function kN(t){if(!t||typeof t!="object"||typeof t=="function"||"HTMLElement"in globalThis&&t instanceof HTMLElement)return t;const e=xse(t);if(A(e))return e;if(_se(t)){let i=!0;const n=t.map(r=>{const s=kN(r);return r!=null&&s==null&&(i=!1),s});return i?n:null}if(bse(t))return t.clone();if(!wse(t)){const i=new(Object.getPrototypeOf(t)).constructor;for(const n of Object.getOwnPropertyNames(t)){const r=t[n],s=kN(r);if(r!=null&&s==null)return null;i[n]=s}return i}return null}function bse(t){return typeof t.clone=="function"}function _se(t){return typeof t.map=="function"&&typeof t.forEach=="function"}function wse(t){return typeof t.notifyChange=="function"&&typeof t.watch=="function"}function qq(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function xse(t){if($Ie(t)||AIe(t)||MIe(t)||OIe(t)||PIe(t)||RIe(t)||LIe(t)||DIe(t)||FIe(t))return t.slice();if(t instanceof Date)return new Date(t.getTime());if(t instanceof ArrayBuffer)return t.slice(0,t.byteLength);if(t instanceof Map){const e=new Map;for(const[i,n]of t)e.set(i,G(n));return e}if(t instanceof Set){const e=new Set;for(const i of t)e.add(G(i));return e}return null}function I8(t,e){return t===e||typeof t=="number"&&isNaN(t)&&typeof e=="number"&&isNaN(e)||typeof(t||{}).getTime=="function"&&typeof(e||{}).getTime=="function"&&t.getTime()===e.getTime()||!1}function NIe(t,e){return t===e||(t==null||typeof t=="string"?t===e:typeof t=="number"?t===e||typeof e=="number"&&isNaN(t)&&isNaN(e):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():Array.isArray(t)?Array.isArray(e)&&SI(t,e):t instanceof Set?e instanceof Set&&jIe(t,e):t instanceof Map?e instanceof Map&&VIe(t,e):!!qq(t)&&qq(e)&&zIe(t,e))}function zIe(t,e){if(t===null||e===null)return!1;const i=Object.keys(t);if(e===null||Object.keys(e).length!==i.length)return!1;for(const n of i)if(t[n]!==e[n]||!Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}function jIe(t,e){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}function VIe(t,e){if(t.size!==e.size)return!1;for(const[i,n]of t){const r=e.get(i);if(r!==n||r===void 0&&!e.has(i))return!1}return!0}function Sse(t,e,i=!1){return Cse(t,e,i)}function rh(t,e){if(e!=null)return e[t]||Ese(t.split("."),!1,e)}function rr(t,e,i){const n=t.split("."),r=n.pop(),s=Ese(n,!0,i);s&&r&&(s[r]=e)}function Ese(t,e,i){let n=i;for(const r of t){if(n==null)return;if(!(r in n)){if(!e)return;n[r]={}}n=n[r]}return n}function Cse(t,e,i){return e?Object.keys(e).reduce((n,r)=>{let s=n[r],o=e[r];return s===o?n:s===void 0?(n[r]=G(o),n):(Array.isArray(o)||Array.isArray(n)?(s=s?Array.isArray(s)?n[r]=s.concat():n[r]=[s]:n[r]=[],o&&(Array.isArray(o)||(o=[o]),i?o.forEach(a=>{s.includes(a)||s.push(a)}):n[r]=o.concat())):o&&typeof o=="object"?n[r]=Cse(s,o,i):n.hasOwnProperty(r)&&!e.hasOwnProperty(r)||(n[r]=o),n)},t||{}):t}var ine;const lt={analysisTheme:{accentColor:[255,128,0],textColor:"white"},apiKey:void 0,applicationUrl:(ine=globalThis.location)==null?void 0:ine.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(Sse(lt,globalThis.esriConfig,!0),delete lt.has),!lt.assetsPath){{const t="4.26.5";lt.assetsPath=`https://js.arcgis.com/${t.slice(0,-2)}/@arcgis/core/assets`}lt.defaultAssetsPath=lt.assetsPath}const UIe=/\{([^\}]+)\}/g;function Wq(t){return t??""}function Fu(t,e){return t.replace(UIe,typeof e=="object"?(i,n)=>Wq(rh(n,e)):(i,n)=>Wq(e(n)))}function Ise(t,e){return t.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,i=>e&&e.includes(i)?i:`\\${i}`)}function T8(t){let e=0;for(let i=0;i<t.length;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e}function mmt(t){return new DOMParser().parseFromString(t||"","text/html").body.innerText||""}const Jq={info:0,warn:1,error:2,none:3};let se=class cs{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},e.level!=null&&(this.level=e.level),e.writer!=null&&(this.writer=e.writer),this._module=e.module,cs._loggers[this.module]=this;const i=this.module.lastIndexOf(".");i!==-1&&(this._parent=cs.getLogger(this.module.slice(0,i)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(e={}){const i=cs._loggers;return cs._loggers=e,i},set throttlingDisabled(e){cs._throttlingDisabled=e}}}static getLogger(e){let i=cs._loggers[e];return i||(i=new cs({module:e})),i}_log(e,i,...n){if(this._matchLevel(e)){if(i!=="always"&&!cs._throttlingDisabled){const r=this._argsToKey(n),s=this._loggedMessages[e].get(r);if(i==="once"&&s!=null||i==="oncePerTick"&&s&&s>=cs._tickCounter)return;this._loggedMessages[e].set(r,cs._tickCounter),cs._scheduleTickCounterIncrement()}for(const r of lt.log.interceptors)if(r(e,this.module,...n))return;this._inheritedWriter()(e,this.module,...n)}}_parentWithMember(e,i){let n=this;for(;A(n);){const r=n[e];if(A(r))return r;n=n.parent}return i}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,i,...n){console[e](`[${i}]`,...n)}_matchLevel(e){const i=lt.log.level?lt.log.level:"warn";return Jq[this._parentWithMember("level",i)]<=Jq[e]}_argsToKey(...e){return T8(JSON.stringify(e,(n,r)=>typeof r!="object"||Array.isArray(r)?r:"[Object]"))}static _scheduleTickCounterIncrement(){cs._tickCounterScheduled||(cs._tickCounterScheduled=!0,Promise.resolve().then(()=>{cs._tickCounter++,cs._tickCounterScheduled=!1}))}};se._loggers={},se._tickCounter=0,se._tickCounterScheduled=!1,se._throttlingDisabled=!1;function EI(t,e){for(const[i,n]of t)if(e(n,i))return!0;return!1}function gmt(t,e){for(const[i,n]of t)if(e(n,i))return n;return null}function Tse(t,e,i){const n=t.get(e);if(n!==void 0)return n;const r=i();return t.set(e,r),r}const S_=se.getLogger("esri.core.accessorSupport.ensureTypes");function BIe(t){return t==null?t:new Date(t)}function HIe(t){return t==null?t:!!t}function CI(t){return t==null?t:t.toString()}function sl(t){return t==null?t:(t=parseFloat(t),isNaN(t)?0:t)}function k8(t){return t==null?t:Math.round(parseFloat(t))}function kse(t){return t&&t.constructor&&t.constructor.__accessorMetadata__!==void 0}function oM(t,e){return e!=null&&t&&!(e instanceof t)}function $se(t){return t&&"isCollection"in t}function Yq(t){return t&&t.Type?typeof t.Type=="function"?t.Type:t.Type.base:null}function GIe(t,e){if(!e||!e.constructor||!$se(e.constructor))return $N(t,e)?e:new t(e);const i=Yq(t.prototype.itemType),n=Yq(e.constructor.prototype.itemType);return i?n?i===n?e:i.prototype.isPrototypeOf(n.prototype)?new t(e):($N(t,e),e):new t(e):e}function $N(t,e){return!!kse(e)&&(S_.error("Accessor#set","Assigning an instance of '"+(e.declaredClass||"unknown")+"' which is not a subclass of '"+TP(t)+"'"),!0)}function $8(t,e){return e==null?e:$se(t)?GIe(t,e):oM(t,e)?$N(t,e)?e:new t(e):e}function TP(t){return t&&t.prototype&&t.prototype.declaredClass||"unknown"}const qIe=new WeakMap;function WIe(t){switch(t){case Number:return sl;case Bt:return k8;case Boolean:return HIe;case String:return CI;case Date:return BIe;default:return Tse(qIe,t,()=>$8.bind(null,t))}}function Ht(t,e){const i=WIe(t);return arguments.length===1?i:i(e)}function mC(t,e,i){return arguments.length===1?mC.bind(null,t):e&&(Array.isArray(e)?e.map(n=>t(n,i)):[t(e,i)])}function JIe(t,e){return arguments.length===1?mC(Ht.bind(null,t)):mC(Ht.bind(null,t),e)}function Ase(t,e,i){return e!==0&&Array.isArray(i)?i.map(n=>Ase(t,e-1,n)):t(i)}function aM(t,e,i){if(arguments.length===2)return aM.bind(null,t,e);if(!i)return i;let n=e,r=i=Ase(t,e,i);for(;n>0&&Array.isArray(r);)n--,r=r[0];if(r!==void 0)for(let s=0;s<n;s++)i=[i];return i}function YIe(t,e,i){return arguments.length===2?aM(Ht.bind(null,t),e):aM(Ht.bind(null,t),e,i)}function Mse(t){return!!Array.isArray(t)&&!t.some(e=>{const i=typeof e;return!(i==="string"||i==="number"||i==="function"&&t.length>1)})}function AN(t,e){if(arguments.length===2)return AN(t).call(null,e);const i=new Set,n=t.filter(a=>typeof a!="function"),r=t.filter(a=>typeof a=="function");for(const a of t)typeof a!="string"&&typeof a!="number"||i.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,h=u==="string"||u==="number";return h&&(i.has(a)||r.some(p=>u==="string"&&p===String||u==="number"&&p===Number))||u==="object"&&r.some(p=>!oM(a,p))?a:(h&&n.length?(s||(s=n.map(p=>typeof p=="string"?`'${p}'`:`${p}`).join(", ")),S_.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&r.length?(o||(o=r.map(p=>TP(p)).join(", ")),S_.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):S_.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function Nu(t,e){if(arguments.length===2)return Nu(t).call(null,e);const i={},n=[],r=[];for(const l in t.typeMap){const u=t.typeMap[l];i[l]=Ht(u),n.push(TP(u)),r.push(l)}const s=()=>`'${n.join("', '")}'`,o=()=>`'${r.join("', '")}'`,a=typeof t.key=="string"?l=>l[t.key]:t.key;return l=>{if(t.base&&!oM(t.base,l)||l==null)return l;const u=a(l)||t.defaultKeyValue,h=i[u];if(!h)return S_.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!oM(t.typeMap[u],l))return l;if(typeof t.key=="string"&&!kse(l)){const p={};for(const f in l)f!==t.key&&(p[f]=l[f]);return h(p)}return h(l)}}let Bt=class{};const vmt={native:t=>({type:"native",value:t}),array:t=>({type:"array",value:t}),oneOf:t=>({type:"one-of",values:t})};function ZIe(t){if(!t||!("type"in t))return!1;switch(t.type){case"native":case"array":case"one-of":return!0}return!1}function Ose(t){switch(t.type){case"native":return Ht(t.value);case"array":return mC(Ose(t.value));case"one-of":return KIe(t);default:return null}}function KIe(t){let e=null;return(i,n)=>ON(i,t)?i:(e==null&&(e=MN(t)),S_.error("Accessor#set",`Invalid property value, value needs to be of type ${e}`),n&&(n.valid=!1),null)}function MN(t){switch(t.type){case"native":switch(t.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case Bt:return"integer";case Date:return"date";default:return TP(t.value)}case"array":return`array of ${MN(t.value)}`;case"one-of":{const e=t.values.map(i=>MN(i));return`one of ${e.slice(0,e.length-1)} or ${e[e.length-1]}`}}return"unknown"}function ON(t,e){if(t==null)return!0;switch(e.type){case"native":switch(e.value){case Number:case Bt:return typeof t=="number";case Boolean:return typeof t=="boolean";case String:return typeof t=="string"}return t instanceof e.value;case"array":return!!Array.isArray(t)&&!t.some(i=>!ON(i,e.value));case"one-of":return e.values.some(i=>ON(t,i))}}function kP(t){return Nh(()=>t.forEach(e=>A(e)&&e.remove()))}function Nh(t){return{remove:()=>{t&&(t(),t=void 0)}}}function bmt(t){return Nh(()=>{const e=t();A(e)&&e.remove()})}function _mt(t){return Nh(A(t)?()=>t.destroy():void 0)}function Cs(t){return t?t.__accessor__?t.__accessor__:t.propertyInvalidated?t:null:null}function XIe(t,e){return t!=null&&t.metadatas&&t.metadatas[e]!=null}function e$(t,e,i){return i?lM(t,e,{policy:i,path:""}):lM(t,e,null)}function lM(t,e,i){return e?Object.keys(e).reduce((n,r)=>{let s=null,o="merge";if(i&&(s=i.path?`${i.path}.${r}`:r,o=i.policy(s)),o==="replace"||o==="replace-arrays"&&Array.isArray(n[r]))return n[r]=e[r],n;if(n[r]===void 0)return n[r]=G(e[r]),n;let a=n[r],l=e[r];if(a===l)return n;if(Array.isArray(l)||Array.isArray(n))a=a?Array.isArray(a)?n[r]=a.concat():n[r]=[a]:n[r]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach(u=>{a.includes(u)||a.push(u)}));else if(l&&typeof l=="object")if(i){const u=i.path;i.path=s,n[r]=lM(a,l,i),i.path=u}else n[r]=lM(a,l,null);else n.hasOwnProperty(r)&&!e.hasOwnProperty(r)||(n[r]=l);return n},t||{}):t}function Pse(t){return Array.isArray(t)?t:t.split(".")}function Zq(t){return t.includes(",")?t.split(",").map(e=>e.trim()):[t.trim()]}function QIe(t){if(Array.isArray(t)){const e=[];for(const i of t)e.push(...Zq(i));return e}return Zq(t)}function Rse(t,e,i,n){const r=QIe(e);if(r.length!==1){const s=r.map(o=>n(t,o,i));return kP(s)}return n(t,r[0],i)}function Lse(t){let e=!1;return()=>{e||(e=!0,t())}}function Dse(t,e){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const r=parseInt(i,10);if(!isNaN(r))return Array.isArray(e)?e[r]:e.getItemAt(r)}const n=Cs(e);return XIe(n,i)?n.get(i):e[i]}function Fse(t,e,i){if(t==null)return t;const n=Dse(e[i],t);return!n&&i<e.length-1?void 0:i===e.length-1?n:Fse(n,e,i+1)}function II(t,e,i=0){return typeof e!="string"||e.includes(".")?Fse(t,Pse(e),i):Dse(e,t)}function cM(t,e){return II(t,e)}function Kq(t,e){return II(e,t)!==void 0}function TI(t){let e=t.constructor.__accessorMetadata__;const i=Object.prototype.hasOwnProperty.call(t.constructor,"__accessorMetadata__");if(e){if(!i){e=Object.create(e);for(const n in e)e[n]=G(e[n]);Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0})}}else e={},Object.defineProperty(t.constructor,"__accessorMetadata__",{value:e,enumerable:!1,configurable:!0,writable:!0});return t.constructor.__accessorMetadata__}function $P(t,e){const i=TI(t);let n=i[e];return n||(n=i[e]={}),n}function e2e(t,e){return e$(t,e,i2e)}const t2e=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function i2e(t){return t2e.test(t)?"replace":"merge"}function n2e(t,e){return t.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,(i,n)=>{if(n==="")return"$";const r=rh(n,e),s=r??"";if(s===void 0)throw new Error(`could not find key "${n}" in template`);return s.toString()})}let Nse=class zse{constructor(e,i,n){this.name=e,this.details=n,this instanceof zse&&(this.message=(i&&n2e(i,n))??"")}toString(){return"["+this.name+"]: "+this.message}},N=class t$ extends Nse{constructor(e,i,n){if(super(e,i,n),!(this instanceof t$))return new t$(e,i,n)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(e,i)=>{if(i&&typeof i=="object"&&typeof i.toJSON=="function")return i;try{return G(i)}catch{return"[object]"}}))}}catch(e){throw se.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details}}static fromJSON(e){return new t$(e.name,e.message,e.details)}};N.prototype.type="error";function uM(t,e,i){if(t&&e)if(typeof e=="object")for(const n of Object.getOwnPropertyNames(e))uM(t,n,e[n]);else{if(e.includes(".")){const r=e.split("."),s=r.splice(r.length-1,1)[0];return void uM(cM(t,r),s,i)}const n=t.__accessor__;n!=null&&r2e(e,n),t[e]=i}}function r2e(t,e){if(ee("esri-unknown-property-errors")&&!s2e(t,e))throw new N("set:unknown-property",o2e(t,e))}function s2e(t,e){return e.metadatas[t]!=null}function o2e(t,e){return"setting unknown property '"+t+"' on instance of "+e.host.declaredClass}function d(t={}){return(e,i)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${i}. Accessor does not support static properties.`);const n=Object.getOwnPropertyDescriptor(e,i),r=$P(e,i);n&&(n.get||n.set?(r.get=n.get||r.get,r.set=n.set||r.set):"value"in n&&("value"in t&&se.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${i}" on "${e.constructor.name}" already defined in the metadata`,t),r.value=t.value=n.value)),t.readOnly!=null&&(r.readOnly=t.readOnly);const s=t.aliasOf;if(s){const l=typeof s=="string"?s:s.source,u=typeof s=="string"?null:s.overridable===!0;let h;r.dependsOn=[l],r.get=function(){let p=cM(this,l);if(typeof p=="function"){h||(h=l.split(".").slice(0,-1).join("."));const f=cM(this,h);f&&(p=p.bind(f))}return p},r.readOnly||(r.set=u?function(p){this._override(i,p)}:function(p){uM(this,l,p)})}const o=t.type,a=t.types;r.cast||(o?r.cast=a2e(o):a&&(Array.isArray(a)?r.cast=mC(Nu(a[0])):r.cast=Nu(a))),e2e(r,t),t.range&&(r.cast=l2e(r.cast,t.range))}}function jse(t,e,i){const n=$P(t,i);n.json||(n.json={});let r=n.json;return e!==void 0&&(r.origins||(r.origins={}),r.origins[e]||(r.origins[e]={}),r=r.origins[e]),r}function a2e(t){let e=0,i=t;if(ZIe(t))return Ose(t);for(;Array.isArray(i)&&i.length===1&&typeof i[0]!="string"&&typeof i[0]!="number";)i=i[0],e++;const n=i;if(Mse(n))return e===0?AN(n):aM(AN(n),e);if(e===1)return JIe(n);if(e>1)return YIe(n,e);const r=t;return r.from?r.from:Ht(r)}function l2e(t,e){return i=>{let n=+t(i);return e.step!=null&&(n=Math.round(n/e.step)*e.step),e.min!=null&&(n=Math.max(e.min,n)),e.max!=null&&(n=Math.min(e.max,n)),n}}const Vse=Symbol("Accessor-beforeDestroy");var Qd;(function(t){t[t.INITIALIZING=0]="INITIALIZING",t[t.CONSTRUCTING=1]="CONSTRUCTING",t[t.CONSTRUCTED=2]="CONSTRUCTED"})(Qd||(Qd={}));var Vt;(function(t){t[t.Dirty=1]="Dirty",t[t.Overriden=2]="Overriden",t[t.Computing=4]="Computing",t[t.NonNullable=8]="NonNullable",t[t.HasDefaultValue=16]="HasDefaultValue",t[t.DepTrackingInitialized=32]="DepTrackingInitialized",t[t.AutoTracked=64]="AutoTracked",t[t.ExplicitlyTracking=128]="ExplicitlyTracking"})(Vt||(Vt={}));const dM={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},Gx=[];let hE=dM;function Ke(t){hE.onObservableAccessed(t)}let i$=!1,n$=!1;function Th(t,e,i){if(i$)return A8(t,e,i);Use(t);const n=e.call(i);return Bse(),n}function c2e(t,e){return Th(dM,t,e)}function A8(t,e,i){const n=i$;i$=!0,Use(t);let r=null;try{r=e.call(i)}catch(s){n$&&se.getLogger("esri.core.accessorSupport.tracking").error(s)}return Bse(),i$=n,r}function Use(t){hE=t,Gx.push(t)}function Bse(){const t=Gx.length;if(t>1){const e=Gx.pop();hE=Gx[t-2],e.onTrackingEnd()}else if(t===1){const e=Gx.pop();hE=dM,e.onTrackingEnd()}else hE=dM}function Hse(t,e){const i=e.observerObject;if(i.flags&Vt.DepTrackingInitialized)return;const n=n$;n$=!1,i.flags&Vt.AutoTracked?A8(e,e.metadata.get,t):Gse(t,e),n$=n}const u2e=[];function Gse(t,e){const i=e.observerObject;i.flags&Vt.ExplicitlyTracking||(i.flags|=Vt.ExplicitlyTracking,A8(e,()=>{const n=e.metadata.dependsOn||u2e;for(const r of n)if(typeof r!="string"||r.includes(".")){const s=Pse(r);for(let o=0,a=t;o<s.length&&a!=null&&typeof a=="object";++o)a=Xq(a,s[o],o!==s.length-1)}else Xq(t,r,!1)}),i.flags&=~Vt.ExplicitlyTracking)}function Xq(t,e,i){var s;const n=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const o=parseInt(n,10);if(!isNaN(o))return Array.isArray(t)?t[o]:t.getItemAt(o)}const r=(s=Cs(t))==null?void 0:s.properties.get(n);return r&&(Ke(r.observerObject),Hse(t,r)),i?t[n]:void 0}function d2e(t){if(t.json&&t.json.origins){const e=t.json.origins,i={"web-document":["web-scene","web-map"]};for(const n in i)if(e[n]){const r=e[n];i[n].forEach(s=>{e[s]=r}),delete e[n]}}}let bl=class PN extends Nse{constructor(e,i,n){if(super(e,i,n),!(this instanceof PN))return new PN(e,i,n)}};bl.prototype.type="warning";function qse(t){return!!t&&t.prototype&&t.prototype.declaredClass&&t.prototype.declaredClass.indexOf("esri.core.Collection")===0}const RN=se.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function Qq(t,e,i){var n,r;t&&(!i&&!e.read||(n=e.read)!=null&&n.reader||((r=e.read)==null?void 0:r.enabled)===!1||f2e(t)&&rr("read.reader",bm(t),e))}function bm(t){var i,n;const e=t.ndimArray??0;if(e>1)return p2e(t);if(e===1)return eW(t);if("type"in t&&Jse(t.type)){const r=(n=(i=t.type.prototype)==null?void 0:i.itemType)==null?void 0:n.Type,s=eW(typeof r=="function"?{type:r}:{types:r});return(o,a,l)=>{const u=s(o,a,l);return u&&new t.type(u)}}return M8(t)}function M8(t){return"type"in t?h2e(t.type):m2e(t.types)}function h2e(t){return t.prototype.read?(e,i,n)=>{if(e==null)return e;const r=typeof e;if(r!=="object")return void RN.error(`Expected JSON value of type 'object' to deserialize type '${t.prototype.declaredClass}', but got '${r}'`);const s=new t;return s.read(e,n),s}:t.fromJSON}function Wse(t,e,i,n){return n!==0&&Array.isArray(e)?e.map(r=>Wse(t,r,i,n-1)):t(e,void 0,i)}function p2e(t){const e=M8(t),i=Wse.bind(null,e),n=t.ndimArray??0;return(r,s,o)=>{if(r==null)return r;r=i(r,o,n);let a=n,l=r;for(;a>0&&Array.isArray(l);)a--,l=l[0];if(l!==void 0)for(let u=0;u<a;u++)r=[r];return r}}function eW(t){const e=M8(t);return(i,n,r)=>{if(i==null)return i;if(Array.isArray(i)){const o=[];for(const a of i){const l=e(a,void 0,r);l!==void 0&&o.push(l)}return o}const s=e(i,void 0,r);return s!==void 0?[s]:void 0}}function Jse(t){if(!qse(t))return!1;const e=t.prototype.itemType;return!(!e||!e.Type)&&(typeof e.Type=="function"?O8(e.Type):Yse(e.Type))}function f2e(t){return"types"in t?Yse(t.types):O8(t.type)}function O8(t){return!Array.isArray(t)&&!!t&&t.prototype&&("read"in t.prototype||"fromJSON"in t||Jse(t))}function Yse(t){for(const e in t.typeMap)if(!O8(t.typeMap[e]))return!1;return!0}function m2e(t){let e=null;const i=t.errorContext??"type";return(n,r,s)=>{if(n==null)return n;const o=typeof n;if(o!=="object")return void RN.error(`Expected JSON value of type 'object' to deserialize, but got '${o}'`);e||(e=g2e(t));const a=t.key;if(typeof a!="string")return;const l=n[a],u=l?e[l]:t.defaultKeyValue?t.typeMap[t.defaultKeyValue]:void 0;if(!u){const p=`Type '${l||"unknown"}' is not supported`;return s&&s.messages&&n&&s.messages.push(new bl(`${i}:unsupported`,p,{definition:n,context:s})),void RN.error(p)}const h=new u;return h.read(n,s),h}}function g2e(t){var i,n;const e={};for(const r in t.typeMap){const s=t.typeMap[r],o=TI(s.prototype);if(typeof t.key=="function")continue;const a=o[t.key];if(!a)continue;(i=a.json)!=null&&i.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(e[a.json.type[0]]=s);const l=(n=a.json)==null?void 0:n.write;if(!l||!l.writer){e[r]=s;continue}const u=l.target,h=typeof u=="string"?u:t.key,p={};l.writer(r,p,h),p[h]&&(e[p[h]]=s)}return e}function y2e(t){if(t.json||(t.json={}),iW(t.json),nW(t.json),tW(t.json),t.json.origins)for(const e in t.json.origins)iW(t.json.origins[e]),nW(t.json.origins[e]),tW(t.json.origins[e]);return!0}function tW(t){t.name&&(t.read&&typeof t.read=="object"?t.read.source===void 0&&(t.read.source=t.name):t.read={source:t.name},t.write&&typeof t.write=="object"?t.write.target===void 0&&(t.write.target=t.name):t.write={target:t.name})}function iW(t){typeof t.read=="boolean"?t.read={enabled:t.read}:typeof t.read=="function"?t.read={enabled:!0,reader:t.read}:t.read&&typeof t.read=="object"&&t.read.enabled===void 0&&(t.read.enabled=!0)}function nW(t){typeof t.write=="boolean"?t.write={enabled:t.write}:typeof t.write=="function"?t.write={enabled:!0,writer:t.write}:t.write&&typeof t.write=="object"&&t.write.enabled===void 0&&(t.write.enabled=!0)}function rW(t,e){if(!e.write||e.write.writer||e.write.enabled===!1&&!e.write.overridePolicy)return;const i=(t==null?void 0:t.ndimArray)??0;t&&(i===1||"type"in t&&qse(t.type))?e.write.writer=_2e:i>1?e.write.writer=w2e(i):e.types?Array.isArray(e.types)?e.write.writer=b2e(e.types[0]):e.write.writer=v2e(e.types):e.write.writer=gC}function v2e(t){return(e,i,n,r)=>e?Zse(e,t,r)?gC(e,i,n,r):void 0:gC(e,i,n,r)}function Zse(t,e,i){for(const n in e.typeMap)if(t instanceof e.typeMap[n])return!0;if(i!=null&&i.messages){const n=e.errorContext??"type",r=`Values of type '${(typeof e.key!="function"?t[e.key]:t.declaredClass)??"Unknown"}' cannot be written`;i&&i.messages&&t&&i.messages.push(new N(`${n}:unsupported`,r,{definition:t,context:i})),se.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(r)}return!1}function b2e(t){return(e,i,n,r)=>!e||!Array.isArray(e)?gC(e,i,n,r):gC(e.filter(s=>Zse(s,t,r)),i,n,r)}function gC(t,e,i,n){rr(i,hM(t,n),e)}function hM(t,e){return t&&typeof t.write=="function"?t.write({},e):t&&typeof t.toJSON=="function"?t.toJSON():typeof t=="number"?pM(t):t}function pM(t){return t===-1/0?-Number.MAX_VALUE:t===1/0?Number.MAX_VALUE:isNaN(t)?null:t}function _2e(t,e,i,n){let r;t===null?r=null:t&&typeof t.map=="function"?(r=t.map(s=>hM(s,n)),typeof r.toArray=="function"&&(r=r.toArray())):r=[hM(t,n)],rr(i,r,e)}function Kse(t,e,i){return i!==0&&Array.isArray(t)?t.map(n=>Kse(n,e,i-1)):hM(t,e)}function w2e(t){return(e,i,n,r)=>{let s;if(e===null)s=null;else{s=Kse(e,r,t);let o=t,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}rr(n,s,i)}}function LN(t,e){return P8(t,"read",e)}function Xse(t,e){return P8(t,"write",e)}function P8(t,e,i){let n=t&&t.json;if(t&&t.json&&t.json.origins&&i){const r=i.origin&&t.json.origins[i.origin];r&&(e==="any"||e in r)&&(n=r)}return n}function x2e(t){const e=S2e(t);if(t.json.origins)for(const i in t.json.origins){const n=t.json.origins[i],r=n.types?E2e(n):e;Qq(r,n,!1),n.types&&!n.write&&t.json.write&&t.json.write.enabled&&(n.write={...t.json.write}),rW(r,n)}Qq(e,t.json,!0),rW(e,t.json)}function S2e(t){return t.json.types?DN(t.json):t.type?Qse(t):DN(t)}function E2e(t){return t.type?Qse(t):DN(t)}function Qse(t){if(!t.type)return;let e=0,i=t.type;for(;Array.isArray(i)&&!Mse(i);)i=i[0],e++;return{type:i,ndimArray:e}}function DN(t){if(!t.types)return;let e=0,i=t.types;for(;Array.isArray(i);)i=i[0],e++;return{types:i,ndimArray:e}}function C2e(t){y2e(t)&&(d2e(t),x2e(t))}const F3=new Set,N3=new Set;function O(t){return e=>{e.prototype.declaredClass=t,T2e(e);const i=[],n=[];let r=e.prototype;for(;r;)r.hasOwnProperty("initialize")&&!F3.has(r.initialize)&&(F3.add(r.initialize),i.push(r.initialize)),r.hasOwnProperty("destroy")&&!N3.has(r.destroy)&&(N3.add(r.destroy),n.push(r.destroy)),r=Object.getPrototypeOf(r);F3.clear(),N3.clear();class s extends e{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(i.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=i.length-1;l>=0;l--)i[l].call(this)}}),n.length){let l=!1;const u=this[Vse];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0,u.call(this);for(let h=0;h<n.length;h++)n[h].call(this)}}})}this.postscript(...a)}}}return s.__accessorMetadata__=TI(e.prototype),s.prototype.declaredClass=t,s}}function I2e(t,e){return e.get==null?function(){const i=this.__accessor__.properties.get(t);if(i===void 0)return;Ke(i.observerObject);const n=this.__accessor__.store;return n.has(t)?n.get(t):i.metadata.value}:function(){const i=this.__accessor__.properties.get(t);if(i!==void 0)return i.getComputed()}}function T2e(t){const e=t.prototype,i=TI(e),n={};for(const r of Object.getOwnPropertyNames(i)){const s=i[r];C2e(s),n[r]={enumerable:!0,configurable:!0,get:I2e(r,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${r}' of ${this.declaredClass}`);if(a.lifecycle===Qd.CONSTRUCTED&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${r}' of ${this.declaredClass}`);a.set(r,o)}}else Object.defineProperty(this,r,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(t.prototype,n)}function wmt(t){const e=[];return function*(){yield*e;for(const i of t)e.push(i),yield i}}function k2e(t,e){for(const i of t)if(i!=null&&e(i))return i}function fM(t){return t!=null&&typeof t[Symbol.iterator]=="function"}let wn=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(i=>{e+=i.length}),e}add(e,i){if(fM(e)){const n=this._getOrCreateGroup(i);for(const r of e)this._isHandle(r)&&n.push(r)}else this._isHandle(e)&&this._getOrCreateGroup(i).push(e);return this}forEach(e,i){if(typeof e=="function")this._groups.forEach(n=>n.forEach(e));else{const n=this._getGroup(e);n&&i&&n.forEach(i)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(typeof e!="string"&&fM(e)){for(const i of e)this.remove(i);return this}return this.has(e)?(this._removeAllFromGroup(this._getGroup(e)),this._groups.delete(this._ensureGroupKey(e)),this):this}removeAll(){return this._groups.forEach(e=>this._removeAllFromGroup(e)),this._groups.clear(),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const i=[];return this._groups.set(this._ensureGroupKey(e),i),i}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}_removeAllFromGroup(e){e.forEach(i=>i.remove())}};function $2e(t){return t&&t.release&&typeof t.release=="function"}function A2e(t){return t&&t.acquire&&typeof t.acquire=="function"}let _m=class FN{constructor(e,i,n,r=1,s=0){if(this._ctor=e,this._acquireFunction=i,this._releaseFunction=n,this.allocationSize=r,this._pool=new Array(s),this._initialSize=s,this._ctor)for(let o=0;o<s;o++)this._pool[o]=new this._ctor;this.allocationSize=Math.max(r,1)}destroy(){this.prune(0)}acquire(...e){let i;if(FN.test.disabled)i=new this._ctor;else{if(this._pool.length===0){const n=this.allocationSize;for(let r=0;r<n;r++)this._pool[r]=new this._ctor}i=this._pool.pop()}return this._acquireFunction?this._acquireFunction(i,...e):A2e(i)&&i.acquire(...e),i}release(e){e&&!FN.test.disabled&&(this._releaseFunction?this._releaseFunction(e):$2e(e)&&e.release(),this._pool.push(e))}prune(e=this._initialSize){if(!(e>=this._pool.length)){for(let i=e;i<this._pool.length;++i){const n=this._pool[i];this._dispose(n)}this._pool.length=e}}_dispose(e){e.dispose&&typeof e.dispose=="function"&&e.dispose()}};_m.test={disabled:!1};let M2e=class{constructor(e,i){this._observers=e,this._observer=i}remove(){Qk(this._observers,this._observer)}},eoe=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return O2e;this._observers==null&&(this._observers=[]);const i=this._observers;let n=!1,r=!1;const s=i.length;for(let o=0;o<s;++o){const a=i[o];if(a.destroyed)r=!0;else if(a===e){n=!0;break}}return n||(i.push(e),r&&this._removeDestroyedObservers()),new M2e(i,e)}_removeDestroyedObservers(){const e=this._observers;if(!e||e.length===0)return;const i=e.length;let n=0;for(let r=0;r<i;++r){for(;r+n<i&&e[r+n].destroyed;)++n;if(n>0){if(!(r+n<i))break;e[r]=e[r+n]}}e.length=i-n}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this._observers;if(e!=null){for(const i of e)i.onCommitted();this._observers=null}}};const O2e={remove:()=>{}};var ht;(function(t){t[t.DEFAULTS=0]="DEFAULTS",t[t.COMPUTED=1]="COMPUTED",t[t.SERVICE=2]="SERVICE",t[t.PORTAL_ITEM=3]="PORTAL_ITEM",t[t.WEB_SCENE=4]="WEB_SCENE",t[t.WEB_MAP=5]="WEB_MAP",t[t.USER=6]="USER"})(ht||(ht={}));const NN=ht.USER+1;function $f(t){switch(t){case"defaults":return ht.DEFAULTS;case"service":return ht.SERVICE;case"portal-item":return ht.PORTAL_ITEM;case"web-scene":return ht.WEB_SCENE;case"web-map":return ht.WEB_MAP;case"user":return ht.USER;default:return null}}function mM(t){switch(t){case ht.DEFAULTS:return"defaults";case ht.SERVICE:return"service";case ht.PORTAL_ITEM:return"portal-item";case ht.WEB_SCENE:return"web-scene";case ht.WEB_MAP:return"web-map";case ht.USER:return"user"}return void 0}function P2e(t){return mM(t)}let sW=class{constructor(e,i,n){this.properties=e,this.propertyName=i,this.metadata=n,this.observerObject=new R2e,this._accessed=null,this._handles=null,this.observerObject.flags=Vt.Dirty|(n.nonNullable?Vt.NonNullable:0)|(n.hasOwnProperty("value")?Vt.HasDefaultValue:0)|(n.get===void 0?Vt.DepTrackingInitialized:0)|(n.dependsOn===void 0?Vt.AutoTracked:0),oW.register(this,this.observerObject)}destroy(){this.observerObject.destroy(),this._accessed=null,this._clearObservationHandles(),oW.unregister(this)}getComputed(){const e=this.observerObject;Ke(e);const i=this.properties.store,n=this.propertyName,r=e.flags,s=i.get(n);if(r&Vt.Computing||~r&Vt.Dirty&&i.has(n))return s;e.flags|=Vt.Computing;const o=this.properties.host;let a;r&Vt.AutoTracked?a=Th(this,this.metadata.get,o):(Gse(o,this),a=this.metadata.get.call(o)),i.set(n,a,ht.COMPUTED);const l=i.get(n);return l===s?e.flags&=~Vt.Dirty:c2e(this.commit,this),e.flags&=~Vt.Computing,l}onObservableAccessed(e){e!==this.observerObject&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(e)||this._accessed.push(e))}onTrackingEnd(){this._clearObservationHandles();const e=this.observerObject;e.flags|=Vt.DepTrackingInitialized;const i=this._accessed;if(i===null)return;let n=this._handles;n===null&&(n=this._handles=[]);for(let r=0;r<i.length;++r)n.push(i[r].observe(e));i.length=0}notifyChange(){const e=this.observerObject;e.onInvalidated(),e.onCommitted()}invalidate(){this.observerObject.onInvalidated()}commit(){const e=this.observerObject;e.flags&=~Vt.Dirty,e.onCommitted()}_clearObservationHandles(){const e=this._handles;if(e!==null){for(let i=0;i<e.length;++i)e[i].remove();e.length=0}}},R2e=class extends eoe{constructor(){super(...arguments),this.flags=0}onInvalidated(){~this.flags&Vt.Overriden&&(this.flags|=Vt.Dirty);const e=this._observers;if(e&&e.length>0)for(const i of e)i.onInvalidated()}onCommitted(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const n of i)n.onCommitted()}}destroy(){this.flags&Vt.Dirty&&this.onCommitted(),super.destroy()}};const oW=new FinalizationRegistry(t=>{t.destroy()});let L2e=class toe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new toe;return this._values.forEach((n,r)=>{e&&e.has(r)||i.set(r,G(n))}),i}get(e){return this._values.get(e)}originOf(){return ht.USER}keys(){return[...this._values.keys()]}set(e,i){this._values.set(e,i)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function Q2(t,e,i){return t!==void 0}function aW(t,e,i,n){return t!==void 0&&(!(i==null&&t.observerObject.flags&Vt.NonNullable)||(n.lifecycle,Qd.INITIALIZING,!1))}function D2e(t){return t&&typeof t.destroy=="function"}se.getLogger("esri.core.accessorSupport.Properties");let F2e=class{constructor(e){this.host=e,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=Qd.INITIALIZING,this.store=new L2e,this._origin=ht.USER;const i=this.host.constructor.__accessorMetadata__;for(const n in i){const r=new sW(this,n,i[n]);this.properties.set(n,r)}this.metadatas=i}initialize(){this.lifecycle=Qd.CONSTRUCTING}constructed(){this.lifecycle=Qd.CONSTRUCTED}destroy(){this.destroyed=!0;for(const[e,i]of this.properties){if(i.metadata.autoDestroy){const n=this.internalGet(e);n&&D2e(n)&&(n.destroy(),~i.observerObject.flags&Vt.NonNullable&&this._internalSet(i,null))}i.destroy()}}get initialized(){return this.lifecycle!==Qd.INITIALIZING}get(e){const i=this.properties.get(e);if(i.metadata.get)return i.getComputed();Ke(i.observerObject);const n=this.store;return n.has(e)?n.get(e):i.metadata.value}originOf(e){const i=this.store.originOf(e);if(i===void 0){const n=this.properties.get(e);if(n!==void 0&&n.observerObject.flags&Vt.HasDefaultValue)return"defaults"}return mM(i)}has(e){return!!this.properties.has(e)&&this.store.has(e)}keys(){return[...this.properties.keys()]}internalGet(e){const i=this.properties.get(e);if(Q2(i))return this.store.has(e)?this.store.get(e):i.metadata.value}internalSet(e,i){const n=this.properties.get(e);Q2(n)&&this._internalSet(n,i)}getDependsInfo(e,i,n){const r=this.properties.get(i);if(!Q2(r))return"";const s=new Set,o=Th({onObservableAccessed:l=>s.add(l),onTrackingEnd:()=>{}},()=>{var l;return(l=r.metadata.get)==null?void 0:l.call(e)});let a=`${n}${e.declaredClass.split(".").pop()}.${i}: ${o}
`;if(s.size===0)return a;n+="  ";for(const l of s){if(!(l instanceof sW))continue;const u=l.properties.host,h=l.propertyName,p=Cs(u);a+=p?p.getDependsInfo(u,h,n):`${n}${h}: undefined
`}return a}setAtOrigin(e,i,n){const r=this.properties.get(e);if(Q2(r))return this._setAtOrigin(r,i,n)}isOverridden(e){const i=this.properties.get(e);return i!==void 0&&!!(i.observerObject.flags&Vt.Overriden)}clearOverride(e){const i=this.properties.get(e),n=i==null?void 0:i.observerObject;n&&n.flags&Vt.Overriden&&(n.flags&=~Vt.Overriden,i.notifyChange())}override(e,i){const n=this.properties.get(e);if(!aW(n,e,i,this))return;const r=n.metadata.cast;if(r){const s=this._cast(r,i),{valid:o,value:a}=s;if(z3.release(s),!o)return;i=a}n.observerObject.flags|=Vt.Overriden,this._internalSet(n,i)}set(e,i){const n=this.properties.get(e);if(!aW(n,e,i,this))return;const r=n.metadata.cast;if(r){const o=this._cast(r,i),{valid:a,value:l}=o;if(z3.release(o),!a)return;i=l}const s=n.metadata.set;s?s.call(this.host,i):this._internalSet(n,i)}setDefaultOrigin(e){this._origin=$f(e)}getDefaultOrigin(){return mM(this._origin)}notifyChange(e){const i=this.properties.get(e);i!==void 0&&i.notifyChange()}invalidate(e){const i=this.properties.get(e);i!==void 0&&i.invalidate()}commit(e){const i=this.properties.get(e);i!==void 0&&i.commit()}_internalSet(e,i){const n=this.lifecycle!==Qd.INITIALIZING?this._origin:ht.DEFAULTS;this._setAtOrigin(e,i,n)}_setAtOrigin(e,i,n){const r=this.store,s=e.propertyName;r.has(s,n)&&I8(i,r.get(s))&&~e.observerObject.flags&Vt.Overriden&&n===r.originOf(s)||(e.invalidate(),r.set(s,i,n),e.commit(),Hse(this.host,e))}_cast(e,i){const n=z3.acquire();return n.valid=!0,n.value=i,e&&(n.value=e.call(this.host,i,n)),n}},N2e=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}};const z3=new _m(N2e);function z2e(t){t.length=0}let Bs=class{constructor(e=50,i=50){this._pool=new _m(Array,void 0,z2e,i,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return j3.acquire()}static release(e){return j3.release(e)}static prune(){j3.prune()}};const j3=new Bs(100);let ioe=class extends _m{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=EIe(this._set)}acquire(...e){const i=super.acquire(...e);return this._set.delete(i),i}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};const eT=[];function gM(t){eT.push(t),eT.length===1&&queueMicrotask(()=>{const e=eT.slice();eT.length=0;for(const i of e)i()})}let pE=class{constructor(e,i=30){this.name=e,this._counter=0,this._samples=new Array(i)}record(e){A(e)&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,i)=>e-i)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,i)=>e+i,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var zN;(function(t){const e=(s,o,a,l)=>{let u=o,h=o;const p=a>>>1,f=s[u-1];for(;h<=p;){h=u<<1,h<a&&l(s[h-1],s[h])<0&&++h;const g=s[h-1];if(l(g,f)<=0)break;s[u-1]=g,u=h}s[u-1]=f},i=(s,o)=>s<o?-1:s>o?1:0;function n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)e(s,h,a,l);const u=o+1;for(let h=a-1;h>o;h--){const p=s[o];s[o]=s[h],s[h]=p,e(s,u,h,l)}}function*r(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=i);for(let h=a>>>1;h>o;h--)e(s,h,a,l),yield;const u=o+1;for(let h=a-1;h>o;h--){const p=s[o];s[o]=s[h],s[h]=p,e(s,u,h,l),yield}}t.sort=n,t.iterableSort=r})(zN||(zN={}));const lW=zN,j2e=1.5,V2e=1.1;let Xy=class{constructor(e){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new yse,e&&(e.initialSize&&(this.data=new Array(e.initialSize)),e.allocator&&(this._allocator=e.allocator),e.deallocator!==void 0&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=()=>cW(this)))}toArray(){return this.data.slice(0,this.length)}filter(e){const i=new Array;for(let n=0;n<this._length;n++){const r=this.data[n];e(r)&&i.push(r)}return i}getItemAt(e){if(!(e<0||e>=this._length))return this.data[e]}includes(e,i){const n=this.data.indexOf(e,i);return n!==-1&&n<this.length}get length(){return this._length}set length(e){if(e>this._length){if(this._allocator){for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=e}else{if(this._deallocator)for(let i=e;i<this._length;++i)this.data[i]=this._deallocator(this.data[i]);this._length=e,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(e){this.data[this._length++]=e}pushArray(e,i=e.length){for(let n=0;n<i;n++)this.data[this._length++]=e[n]}fill(e,i){for(let n=0;n<i;n++)this.data[this._length++]=e}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const e=this.data[this._length];return++this._length,e}unshift(e){this.data.unshift(e),this._length++,cW(this)}pop(){if(this.length===0)return;const e=this.data[this.length-1];return this.length=this.length-1,this._shrink(),e}remove(e){const i=TN(this.data,e,this.length,this._hint);if(i!==-1)return this.data.splice(i,1),this.length=this.length-1,e}removeUnordered(e){return this.removeUnorderedIndex(TN(this.data,e,this.length,this._hint))}removeUnorderedIndex(e){if(!(e>=this.length||e<0))return this.swapElements(e,this.length-1),this.pop()}removeUnorderedMany(e,i=e.length,n){this.length=kIe(this.data,e,this.length,i,this._hint,n),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(e,i){if(e>=this.length||i>=this.length||e===i)return;const n=this.data[e];this.data[e]=this.data[i],this.data[i]=n}sort(e){lW.sort(this.data,0,this.length,e)}iterableSort(e){return lW.iterableSort(this.data,0,this.length,e)}some(e,i){for(let n=0;n<this.length;++n)if(e.call(i,this.data[n],n,this.data))return!0;return!1}find(e,i){for(let n=0;n<this.length;++n){const r=this.data[n];if(e.call(i,r,n))return r}}filterInPlace(e,i){let n=0;for(let r=0;r<this._length;++r){const s=this.data[r];e.call(i,s,r,this.data)&&(this.data[r]=this.data[n],this.data[n]=s,n++)}if(this._deallocator)for(let r=n;r<this._length;r++)this.data[r]=this._deallocator(this.data[r]);return this._length=n,this._shrink(),this}forAll(e,i){const n=this.length,r=this.data;for(let s=0;s<n;++s)e.call(i,r[s],s,r)}forEach(e,i){for(let n=0;n<this.length;++n)e.call(i,this.data[n],n,this.data)}map(e,i){const n=new Array(this.length);for(let r=0;r<this.length;++r)n[r]=e.call(i,this.data[r],r,this.data);return n}reduce(e,i){let n=i;for(let r=0;r<this.length;++r)n=e(n,this.data[r],r,this.data);return n}has(e){const i=this.length,n=this.data;for(let r=0;r<i;++r)if(n[r]===e)return!0;return!1}};function cW(t){t.data.length>j2e*t.length&&(t.data.length=Math.floor(t.length*V2e))}function U2e(t){return{setTimeout:(e,i)=>{const n=t.setTimeout(e,i);return{remove:()=>t.clearTimeout(n)}}}}const kI=U2e(globalThis),uW=new Set;function B2e(t,e,i=!1){i&&uW.has(e)||(i&&uW.add(e),t.warn(`🛑 DEPRECATED - ${e}`))}function dW(t,e,i={}){if(ee("esri-deprecation-warnings")){const{moduleName:n}=i;R8(t,`Function: ${(n?n+"::":"")+e+"()"}`,i)}}function Ay(t,e,i={}){if(ee("esri-deprecation-warnings")){const{moduleName:n}=i;R8(t,`Property: ${(n?n+"::":"")+e}`,i)}}function R8(t,e,i={}){if(ee("esri-deprecation-warnings")){const{replacement:n,version:r,see:s,warnOnce:o}=i;let a=e;n&&(a+=`
	🛠️ Replacement: ${n}`),r&&(a+=`
	⚙️ Version: ${r}`),s&&(a+=`
	🔗 See ${s} for more details.`),B2e(t,a,o)}}function AP(t){return t&&(typeof t.on=="function"||typeof t.addEventListener=="function")}function ll(t,e,i){if(!AP(t))throw new TypeError("target is not a Evented or EventTarget object");if("on"in t)return t.on(e,i);if(Array.isArray(e)){const n=e.slice();for(const r of n)t.addEventListener(r,i);return{remove(){for(const r of n)t.removeEventListener(r,i)}}}return t.addEventListener(e,i),{remove(){t.removeEventListener(e,i)}}}function noe(t,e,i){if(!AP(t))throw new TypeError("target is not a Evented or EventTarget object");if("once"in t)return t.once(e,i);const n=ll(t,e,r=>{n.remove(),i.call(t,r)});return{remove(){n.remove()}}}function H2e(t,e,i){let n=!1;const r=ll(t,e,s=>{n||i.call(t,s)});return{resume(){n=!1},pause(){n=!0},remove(){r.remove()}}}const G2e={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function To({key:t}){return G2e[t]||t}function li(t="Aborted"){return new N("AbortError",t)}function Xi(t,e="Aborted"){if($a(t))throw li(e)}function MP(t){return A(t)?"aborted"in t?t:t.signal:t}function $a(t){const e=MP(t);return A(e)&&e.aborted}function Tu(t){if(Pa(t))throw t}function jN(t){if(!Pa(t))throw t}function Ur(t,e){const i=MP(t);if(!U(i)){if(!i.aborted)return noe(i,"abort",()=>e());e()}}function L8(t,e){const i=MP(t);if(!U(i))return Xi(i),noe(i,"abort",()=>e(li()))}function D8(t,e){const i=MP(e);return U(i)?t:new Promise((n,r)=>{let s=Ur(e,()=>r(li()));const o=()=>s=bn(s);t.then(o,o),t.then(n,r)})}function Pa(t){return(t==null?void 0:t.name)==="AbortError"}async function Qy(t){try{return await t}catch(e){if(!Pa(e))throw e;return}}function kh(){let t=null;const e=new Promise((i,n)=>{t={promise:void 0,resolve:i,reject:n}});return t.promise=e,t}async function Zi(t){if(!t)return;if(typeof t.forEach!="function"){const i=Object.keys(t),n=i.map(o=>t[o]),r=await Zi(n),s={};return i.map((o,a)=>s[o]=r[a]),s}const e=t;return new Promise(i=>{const n=[];let r=e.length;r===0&&i(n),e.forEach(s=>{const o={promise:s||Promise.resolve(s)};n.push(o),o.promise.then(a=>{o.value=a}).catch(a=>{o.error=a}).then(()=>{--r,r===0&&i(n)})})})}async function roe(t){return(await Zi(t)).filter(e=>!!e.value).map(e=>e.value)}function $I(t,e,i){const n=new AbortController;return Ur(i,()=>n.abort()),new Promise((r,s)=>{let o=setTimeout(()=>{o=0,r(e)},t);Ur(n,()=>{o&&(clearTimeout(o),s(li()))})})}function zh(t){return t&&typeof t.then=="function"}function VN(t){return zh(t)?t:Promise.resolve(t)}function F8(t,e=-1){let i,n,r,s,o=null;const a=(...l)=>{if(i){n=l,s&&s.reject(li()),s=kh();const f=s.promise;if(o){const g=o;o=null,g.abort()}return f}if(r=s||kh(),s=null,e>0){const f=new AbortController;i=VN(t(...l,f.signal));const g=i;$I(e).then(()=>{i===g&&(s?f.abort():o=f)})}else i=1,i=VN(t(...l));const u=()=>{const f=n;n=r=i=o=null,f!=null&&a(...f)},h=i,p=r;return h.then(u,u),h.then(p.resolve,p.reject),p.promise};return a}function qx(){let t,e;const i=new Promise((r,s)=>{t=r,e=s}),n=r=>{t(r)};return n.resolve=r=>t(r),n.reject=r=>e(r),n.timeout=(r,s)=>kI.setTimeout(()=>n.reject(s),r),n.promise=i,n}async function hW(t){await Promise.resolve(),Xi(t)}function Pmt(t){return t}function Rmt(t){return .001*t}let q2e=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},W2e=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},UN=0;const q1={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},BN=["prepare","preRender","render","postRender","update","finish"],HN=[],f0=new Xy;let J2e=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};const yM={frameTasks:f0,willDispatch:!1,clearFrameTasks:Y2e,dispatch:aoe,executeFrameTasks:Z2e};function Hw(t){const e=new W2e(t);return HN.push(e),yM.willDispatch||(yM.willDispatch=!0,gM(aoe)),e}function iw(t){const e=new q2e(t);return f0.push(e),vM==null&&(UN=performance.now(),vM=requestAnimationFrame(soe)),new J2e(e)}let vM=null;function Y2e(t=!1){f0.forAll(e=>{e.removed=!0}),t&&ooe()}function soe(){const t=performance.now();vM=null,vM=f0.length>0?requestAnimationFrame(soe):null,yM.executeFrameTasks(t)}function Z2e(t){const e=t-UN;UN=t;const i=1e3/60,n=Math.max(0,e-i);q1.time=t,q1.frameDuration=i-n;for(let r=0;r<BN.length;r++){const s=performance.now(),o=BN[r];f0.forAll(a=>{var l;a.paused||a.removed||(r===0&&a.ticks++,a.phases[o]&&(q1.elapsedFrameTime=performance.now()-t,q1.deltaTime=a.ticks===0?0:e,(l=a.phases[o])==null||l.call(a,q1)))}),K2e[r].record(performance.now()-s)}ooe(),X2e.record(performance.now()-t)}const tT=new Xy;function ooe(){f0.forAll(t=>{t.removed&&tT.push(t)}),f0.removeUnorderedMany(tT.data,tT.length),tT.clear()}function aoe(){for(;HN.length;){const t=HN.shift();t.isActive&&t.callback()}yM.willDispatch=!1}function Nmt(t=1,e){const i=qx(),n=()=>{$a(e)?i.reject(li()):t===0?i():(--t,gM(()=>n()))};return n(),i.promise}const K2e=BN.map(t=>new pE(t)),X2e=new pE("total");function Q2e(t,e){for(const i of t.entries())if(e(i[0]))return!0;return!1}let eTe=0;function E_(){return++eTe}let OP=class{constructor(e){this._notify=e,this._accessed=[],this._handles=[],this._observerObject=new tTe(this._notify),pW.register(this,this._observerObject)}destroy(){var e;this._accessed.length=0,(e=this._observerObject)==null||e.destroy(),this.clear(),pW.unregister(this)}onObservableAccessed(e){const i=this._accessed;i.includes(e)||i.push(e)}onTrackingEnd(){const e=this._handles,i=this._accessed,n=this._observerObject;for(let r=0;r<i.length;++r)e.push(i[r].observe(n));i.length=0}clear(){const e=this._handles;for(let i=0;i<e.length;++i)e[i].remove();e.length=0}},tTe=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;const e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=iTe}};const pW=new FinalizationRegistry(t=>{t.destroy()});function iTe(){}let C_=!1;const bM=[];function loe(t,e){let i=new OP(s),n=null,r=!1;function s(){if(!i||r)return;if(C_)return void doe(s);const a=n;i.clear(),C_=!0,r=!0,n=Th(i,t),r=!1,C_=!1,e(n,a),hoe()}function o(){i&&(i.destroy(),i=null,n=null)}return r=!0,n=Th(i,t),r=!1,{remove:o}}function coe(t,e){let i=new OP(r),n=null;function r(){e(n,o)}function s(){i&&(i.destroy(),i=null),n=null}function o(){return i?(i.clear(),n=Th(i,t),n):null}return o(),{remove:s}}function uoe(t){let e=new OP(n),i=!1;function n(){e&&!i&&(C_?doe(n):(e.clear(),C_=!0,i=!0,Th(e,t),i=!1,C_=!1,hoe()))}function r(){e&&(e.destroy(),e=null)}return i=!0,Th(e,t),i=!1,{remove:r}}function doe(t){bM.includes(t)||bM.unshift(t)}function hoe(){for(;bM.length;)bM.pop()()}var fE;(function(t){t[t.Untracked=0]="Untracked",t[t.Tracked=1]="Tracked"})(fE||(fE={}));let yC=class{constructor(){this.uid=E_(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,i,n,r,s){return this.pool.acquire(fE.Untracked,e,i,n,r,s,I8)}static acquireTracked(e,i,n,r){return this.pool.acquire(fE.Tracked,e,i,n,null,null,r)}notify(e,i){this.type===fE.Untracked?this.callback.call(this.target,e,i,this.path,this.target):this.callback.call(null,e,i)}acquire(e,i,n,r,s,o,a){this.uid=E_(),this.removed=!1,this.type=e,this.oldValue=i,this.callback=n,this.getValue=r,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=E_(),this.removed=!0}};yC.pool=new ioe(yC);const r$=new Bs,dh=new Set;let _M;function wM(t){dh.delete(t),dh.add(t),_M||(_M=Hw(sTe))}function nTe(t){if(t.removed)return;const e=t.oldValue,i=t.getValue();t.equals(e,i)||(t.oldValue=i,t.notify(i,e))}function rTe(t){for(const e of dh.values())e.target===t&&(e.removed=!0)}function sTe(){let t=10;for(;_M&&t--;){_M=null;const e=oTe(),i=r$.acquire();for(const n of e){const r=n.uid;nTe(n),r===n.uid&&n.removed&&i.push(n)}for(const n of dh)n.removed&&(i.push(n),dh.delete(n));for(const n of i)yC.pool.release(n);r$.release(i),r$.release(e),GN.forEach(n=>n())}}function oTe(){const t=r$.acquire();t.length=dh.size;let e=0;for(const i of dh)t[e]=i,++e;return dh.clear(),t}const GN=new Set;function aTe(t){return GN.add(t),{remove(){GN.delete(t)}}}function lTe(t,e,i){let n=Rse(t,e,i,(r,s,o)=>{let a,l,u=coe(()=>II(r,s),(h,p)=>{r.__accessor__.destroyed||a&&a.uid!==l?n.remove():(a||(a=yC.acquireUntracked(h,o,p,r,s),l=a.uid),wM(a))});return{remove:Lse(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,wM(a)),a=null),n=u=null})}});return n}function cTe(t,e,i){const n=Rse(t,e,i,(r,s,o)=>{let a=!1;return loe(()=>II(r,s),(l,u)=>{r.__accessor__.destroyed?n.remove():a||(a=!0,I8(u,l)||o.call(r,l,u,s,r),a=!1)})});return n}function uTe(t,e,i,n=!1){return!t.__accessor__||t.__accessor__.destroyed?{remove(){}}:n?cTe(t,e,i):lTe(t,e,i)}function dTe(t,e,i){let n,r,s=coe(t,(o,a)=>{n&&n.uid!==r?s.remove():(n||(n=yC.acquireTracked(o,e,a,i),r=n.uid),wM(n))});return{remove:Lse(()=>{s.remove(),n&&(n.uid!==r||n.removed||(n.removed=!0,wM(n)),n=null),s=null})}}function hTe(t,e,i){let n=!1;return loe(t,(r,s)=>{n||(n=!0,i(s,r)||e(r,s),n=!1)})}function pTe(t,e,i=!1,n=NIe){return i?hTe(t,e,n):dTe(t,e,n)}function fW(t){return Q2e(dh,e=>e.oldValue===t)}var poe,foe;function fTe(t){var e;if(t==null)return{value:t};if(Array.isArray(t))return{type:[t[0]],value:null};switch(typeof t){case"object":return(e=t.constructor)!=null&&e.__accessorMetadata__||t instanceof Date?{type:t.constructor,value:t}:t;case"boolean":return{type:Boolean,value:t};case"string":return{type:String,value:t};case"number":return{type:Number,value:t};case"function":return{type:t,value:null};default:return}}const gg=Symbol("Accessor-Handles"),qN=Symbol("Accessor-Initialized");let _e=class moe{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:i,declaredClass:n,constructor:r}=e;delete e.declaredClass,delete e.properties,delete e.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,r&&r.apply(this,l)}}TI(o.prototype);for(const a in e){const l=e[a];o.prototype[a]=typeof l=="function"?function(...u){const h=this.inherited;let p;this.inherited=function(...f){if(s.prototype[a])return s.prototype[a].apply(this,f)};try{p=l.apply(this,u)}catch(f){throw this.inherited=h,f}return this.inherited=h,p}:e[a]}for(const a in i){const l=fTe(i[a]);d(l)(o.prototype,a)}return O(n)(o)}constructor(...e){if(this[poe]=null,this[foe]=!1,this.constructor===moe)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new F2e(this)}),e.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e))}postscript(e){const i=this.__accessor__,n=i.ctorArgs||e;i.initialize(),n&&(this.set(n),i.ctorArgs=null),i.constructed(),this.initialize(),this[qN]=!0}initialize(){}[Vse](){this[gg]=si(this[gg])}destroy(){this.destroyed||(rTe(this),this.__accessor__.destroy())}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[qN]}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(e){this.get(e)}get(e){return cM(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,i){return uM(this,e,i),this}watch(e,i,n){return uTe(this,e,i,n)}own(e){this.addHandles(e)}addHandles(e,i){let n=this[gg];U(n)&&(n=this[gg]=new wn),n.add(e,i)}removeHandles(e){const i=this[gg];U(i)||i.remove(e)}hasHandles(e){const i=this[gg];return!!A(i)&&i.has(e)}_override(e,i){i===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,i){i==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,i)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,i){return this.__accessor__.internalSet(e,i),this}};poe=gg,foe=qN;let mTe=class goe{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){const i=new goe;return this._values.forEach((n,r)=>{e&&e.has(r)||i.set(r,G(n.value),n.origin)}),i}get(e,i){i=this._normalizeOrigin(i);const n=this._values.get(e);return i==null||(n==null?void 0:n.origin)===i?n==null?void 0:n.value:void 0}originOf(e){var i;return((i=this._values.get(e))==null?void 0:i.origin)??ht.USER}keys(e){e=this._normalizeOrigin(e);const i=[...this._values.keys()];return e==null?i:i.filter(n=>{var r;return((r=this._values.get(n))==null?void 0:r.origin)===e})}set(e,i,n){if((n=this._normalizeOrigin(n))===ht.DEFAULTS){const r=this._values.get(e);if(r&&r.origin!=null&&r.origin>n)return}this._values.set(e,new gTe(i,n))}delete(e,i){var n;(i=this._normalizeOrigin(i))!=null&&((n=this._values.get(e))==null?void 0:n.origin)!==i||this._values.delete(e)}has(e,i){var n;return(i=this._normalizeOrigin(i))!=null?((n=this._values.get(e))==null?void 0:n.origin)===i:this._values.has(e)}forEach(e){this._values.forEach(({value:i},n)=>e(i,n))}_normalizeOrigin(e){if(e!=null)return e===ht.DEFAULTS?e:ht.USER}},gTe=class{constructor(e,i){this.value=e,this.origin=i}};function yoe(t,e,i){e.keys().forEach(r=>{i.set(r,e.get(r),ht.DEFAULTS)});const n=t.metadatas;Object.keys(n).forEach(r=>{t.internalGet(r)&&i.set(r,t.internalGet(r),ht.DEFAULTS)})}function yTe(t,e,i){if(!t||!t.read||t.read.enabled===!1||!t.read.source)return!1;const n=t.read.source;if(typeof n=="string"){if(n===e||n.includes(".")&&n.indexOf(e)===0&&Kq(n,i))return!0}else for(const r of n)if(r===e||r.includes(".")&&r.indexOf(e)===0&&Kq(r,i))return!0;return!1}function vTe(t){return t&&(!t.read||t.read.enabled!==!1&&!t.read.source)}function bTe(t,e,i,n,r){let s=LN(e[i],r);vTe(s)&&(t[i]=!0);for(const o of Object.getOwnPropertyNames(e))s=LN(e[o],r),yTe(s,i,n)&&(t[o]=!0)}function _Te(t,e,i,n){const r=i.metadatas,s=P8(r[e],"any",n),o=s&&s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(t,e,n):o;a!==void 0&&i.set(e,a)}const voe={origin:"service"};function boe(t,e,i=voe){if(!e||typeof e!="object")return;const n=Cs(t),r=n.metadatas,s={};for(const o of Object.getOwnPropertyNames(e))bTe(s,r,o,e,i);n.setDefaultOrigin(i.origin);for(const o of Object.getOwnPropertyNames(s)){const a=LN(r[o],i).read,l=a&&a.source;let u;u=l&&typeof l=="string"?II(e,l):e[o],a&&a.reader&&(u=a.reader.call(t,u,e,i)),u!==void 0&&n.set(o,u)}if(!i||!i.ignoreDefaults){n.setDefaultOrigin("defaults");for(const o of Object.getOwnPropertyNames(r))s[o]||_Te(t,o,n,i)}n.setDefaultOrigin("user")}function _oe(t,e,i,n=voe){var s;const r={...n,messages:[]};i(r),(s=r.messages)==null||s.forEach(o=>{o.type!=="warning"||t.loaded?n&&n.messages&&n.messages.push(o):t.loadWarnings.push(o)})}function wTe(t,e,i,n,r){var o,a;const s={};return(a=(o=e.write)==null?void 0:o.writer)==null||a.call(t,n,s,i,r),s}function woe(t,e,i,n,r,s){if(!n||!n.write)return!1;const o=t.get(i);if(!r&&n.write.overridePolicy){const a=n.write.overridePolicy.call(t,o,i,s);a!==void 0&&(r=a)}if(r||(r=n.write),!r||r.enabled===!1)return!1;if((o===null&&!r.allowNull&&!r.writerEnsuresNonNull||o===void 0)&&r.isRequired){const a=new N("web-document-write:property-required",`Missing value for required property '${i}' on '${t.declaredClass}'`,{propertyName:i,target:t});return a&&s&&s.messages?s.messages.push(a):a&&!s&&se.getLogger("esri.core.accessorSupport.write").error(a.name,a.message),!1}return!(o===void 0||o===null&&!r.allowNull&&!r.writerEnsuresNonNull||(!e.store.multipleOriginsSupported||e.store.originOf(i)===ht.DEFAULTS)&&xTe(t,i,s,n,o)||!r.ignoreOrigin&&s&&s.origin&&e.store.multipleOriginsSupported&&e.store.originOf(i)<$f(s.origin))}function xTe(t,e,i,n,r){const s=n.default;if(s===void 0)return!1;if(n.defaultEquals!=null)return n.defaultEquals(r);if(typeof s=="function"){if(Array.isArray(r)){const o=s.call(t,e,i);return SI(o,r)}return!1}return s===r}function STe(t,e,i,n){const r=Cs(t),s=r.metadatas,o=Xse(s[e],n);return!!o&&woe(t,r,e,o,i,n)}function xoe(t,e,i){var s,o;if(t&&typeof t.toJSON=="function"&&(!t.toJSON.isDefaultToJSON||!t.write))return e$(e,t.toJSON(i));const n=Cs(t),r=n.metadatas;for(const a in r){const l=Xse(r[a],i);if(!woe(t,n,a,l,void 0,i))continue;const u=t.get(a),h=wTe(t,l,l.write&&typeof l.write.target=="string"?l.write.target:a,u,i);Object.keys(h).length>0&&(e=e$(e,h),(o=(s=i==null?void 0:i.resources)==null?void 0:s.pendingOperations)!=null&&o.length&&i.resources.pendingOperations.push(Promise.all(i.resources.pendingOperations).then(()=>e$(e,h,()=>"replace-arrays"))),i&&i.writtenProperties&&i.writtenProperties.push({target:t,propName:a,oldOrigin:P2e(n.store.originOf(a)),newOrigin:i.origin}))}return e}const Gw=t=>{let e=class extends t{constructor(...i){super(...i);const n=Cs(this),r=n.store,s=new mTe;n.store=s,yoe(n,r,s)}read(i,n){boe(this,i,n)}write(i={},n){return xoe(this,i,n)}toJSON(i){return this.write({},i)}static fromJSON(i,n){return ETe.call(this,i,n)}};return e=c([O("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function ETe(t,e){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const i=new this;return i.read(t,e),i}let Y=class extends Gw(_e){};Y=c([O("esri.core.JSONSupport")],Y);function de(t,e,i){let n,r;return e===void 0||Array.isArray(e)?(r=t,i=e,n=[void 0]):(r=e,n=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;n.forEach(l=>{const u=jse(s,l,r);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],i&&(u.read.source=(u.read.source||[]).concat(i))})}}let Fe=class{constructor(e,i={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=i,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=n=>this.fromJSON(n),this.write=(n,r,s)=>{const o=this.toJSON(n);o!==void 0&&rr(s,o,r)},this.write.isJSONMapWriter=!0}toJSON(e){if(e==null)return null;if(this._apiToJSON.hasOwnProperty(e)){const i=this._apiToJSON[e];return this._options.useNumericKeys?+i:i}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return e!=null&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const i={};for(const n in e)i[e[n]]=n;return i}_getKeysSorted(e){const i=[];for(const n in e)i.push(n);return i.sort(),i}};function kr(){return function(t,e){return new Fe(t,{ignoreUnknown:!0,...e})}}let N8=class{constructor(e,i,n,r){this.semiMajorAxis=e,this.flattening=i,this.outerAtmosphereRimWidth=n;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=r||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}};const ci=new N8(6378137,1/298.257223563,3e5,.006694379990137799),hh=new N8(3396190,1/169.8944472236118,23e4),tm=new N8(1737400,0,0);var m0;(function(t){t[t.CGCS2000=4490]="CGCS2000",t[t.GCSMARS2000=104971]="GCSMARS2000",t[t.GCSMARS2000_SPHERE=104905]="GCSMARS2000_SPHERE",t[t.GCSMOON2000=104903]="GCSMOON2000"})(m0||(m0={}));let m;const R={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5041:0,5042:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,9793:0,9794:0,9869:0,9874:0,9875:0,9880:0,9943:0,9945:0,9947:0,9967:0,9972:0,9977:0,20042:0,20050:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22239:0,22240:0,22332:0,22337:0,22338:0,22391:0,22392:0,22639:0,22700:0,22739:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102731:0,102732:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(m=2e3;m<=2045;m++)R[m]=0;for(m=2056;m<=2065;m++)R[m]=0;for(m=2067;m<=2135;m++)R[m]=0;for(m=2137;m<=2154;m++)R[m]=0;for(m=2161;m<=2170;m++)R[m]=0;for(m=2172;m<=2193;m++)R[m]=0;for(m=2195;m<=2198;m++)R[m]=0;for(m=2200;m<=2203;m++)R[m]=0;for(m=2205;m<=2217;m++)R[m]=0;for(m=2222;m<=2224;m++)R[m]=1;for(m=2225;m<=2250;m++)R[m]=2;for(m=2251;m<=2253;m++)R[m]=1;for(m=2257;m<=2264;m++)R[m]=2;for(m=2274;m<=2279;m++)R[m]=2;for(m=2280;m<=2282;m++)R[m]=1;for(m=2283;m<=2289;m++)R[m]=2;for(m=2290;m<=2292;m++)R[m]=0;for(m=2308;m<=2313;m++)R[m]=0;for(m=2315;m<=2491;m++)R[m]=0;for(m=2494;m<=2866;m++)R[m]=0;for(m=2867;m<=2869;m++)R[m]=1;for(m=2870;m<=2888;m++)R[m]=2;for(m=2891;m<=2895;m++)R[m]=2;for(m=2896;m<=2898;m++)R[m]=1;for(m=2902;m<=2908;m++)R[m]=2;for(m=2915;m<=2920;m++)R[m]=2;for(m=2921;m<=2923;m++)R[m]=1;for(m=2924;m<=2930;m++)R[m]=2;for(m=2931;m<=2962;m++)R[m]=0;for(m=2964;m<=2968;m++)R[m]=2;for(m=2969;m<=2973;m++)R[m]=0;for(m=2975;m<=2991;m++)R[m]=0;for(m=2995;m<=3051;m++)R[m]=0;for(m=3054;m<=3079;m++)R[m]=0;for(m=3081;m<=3088;m++)R[m]=0;for(m=3092;m<=3101;m++)R[m]=0;for(m=3106;m<=3138;m++)R[m]=0;for(m=3146;m<=3151;m++)R[m]=0;for(m=3153;m<=3166;m++)R[m]=0;for(m=3168;m<=3172;m++)R[m]=0;for(m=3174;m<=3203;m++)R[m]=0;for(m=3294;m<=3358;m++)R[m]=0;for(m=3367;m<=3403;m++)R[m]=0;for(m=3408;m<=3416;m++)R[m]=0;for(m=3417;m<=3438;m++)R[m]=2;for(m=3441;m<=3446;m++)R[m]=2;for(m=3447;m<=3450;m++)R[m]=0;for(m=3451;m<=3459;m++)R[m]=2;for(m=3460;m<=3478;m++)R[m]=0;for(m=3554;m<=3559;m++)R[m]=0;for(m=3560;m<=3570;m++)R[m]=2;for(m=3571;m<=3581;m++)R[m]=0;for(m=3594;m<=3597;m++)R[m]=0;for(m=3601;m<=3604;m++)R[m]=0;for(m=3637;m<=3639;m++)R[m]=0;for(m=3665;m<=3667;m++)R[m]=0;for(m=3693;m<=3695;m++)R[m]=0;for(m=3701;m<=3727;m++)R[m]=0;for(m=3728;m<=3739;m++)R[m]=2;for(m=3740;m<=3751;m++)R[m]=0;for(m=3753;m<=3760;m++)R[m]=2;for(m=3761;m<=3773;m++)R[m]=0;for(m=3775;m<=3777;m++)R[m]=0;for(m=3779;m<=3781;m++)R[m]=0;for(m=3783;m<=3785;m++)R[m]=0;for(m=3788;m<=3791;m++)R[m]=0;for(m=3797;m<=3802;m++)R[m]=0;for(m=3814;m<=3816;m++)R[m]=0;for(m=3825;m<=3829;m++)R[m]=0;for(m=3832;m<=3841;m++)R[m]=0;for(m=3844;m<=3852;m++)R[m]=0;for(m=3873;m<=3885;m++)R[m]=0;for(m=3890;m<=3893;m++)R[m]=0;for(m=3907;m<=3912;m++)R[m]=0;for(m=3942;m<=3950;m++)R[m]=0;for(m=3968;m<=3970;m++)R[m]=0;for(m=3973;m<=3976;m++)R[m]=0;for(m=3986;m<=3989;m++)R[m]=0;for(m=3994;m<=3997;m++)R[m]=0;for(m=4048;m<=4051;m++)R[m]=0;for(m=4056;m<=4063;m++)R[m]=0;for(m=4093;m<=4096;m++)R[m]=0;for(m=4390;m<=4398;m++)R[m]=0;for(m=4399;m<=4413;m++)R[m]=2;for(m=4418;m<=4433;m++)R[m]=2;for(m=4455;m<=4457;m++)R[m]=2;for(m=4484;m<=4489;m++)R[m]=0;for(m=4491;m<=4554;m++)R[m]=0;for(m=4568;m<=4589;m++)R[m]=0;for(m=4652;m<=4656;m++)R[m]=0;for(m=4766;m<=4800;m++)R[m]=0;for(m=5014;m<=5016;m++)R[m]=0;for(m=5069;m<=5072;m++)R[m]=0;for(m=5105;m<=5130;m++)R[m]=0;for(m=5173;m<=5188;m++)R[m]=0;for(m=5253;m<=5259;m++)R[m]=0;for(m=5269;m<=5275;m++)R[m]=0;for(m=5292;m<=5311;m++)R[m]=0;for(m=5329;m<=5331;m++)R[m]=0;for(m=5343;m<=5349;m++)R[m]=0;for(m=5355;m<=5357;m++)R[m]=0;for(m=5387;m<=5389;m++)R[m]=0;for(m=5459;m<=5463;m++)R[m]=0;for(m=5479;m<=5482;m++)R[m]=0;for(m=5518;m<=5520;m++)R[m]=0;for(m=5530;m<=5539;m++)R[m]=0;for(m=5550;m<=5552;m++)R[m]=0;for(m=5562;m<=5583;m++)R[m]=0;for(m=5623;m<=5625;m++)R[m]=2;for(m=5631;m<=5639;m++)R[m]=0;for(m=5649;m<=5653;m++)R[m]=0;for(m=5663;m<=5680;m++)R[m]=0;for(m=5682;m<=5685;m++)R[m]=0;for(m=5875;m<=5877;m++)R[m]=0;for(m=5896;m<=5899;m++)R[m]=0;for(m=5921;m<=5940;m++)R[m]=0;for(m=6050;m<=6125;m++)R[m]=0;for(m=6244;m<=6275;m++)R[m]=0;for(m=6328;m<=6348;m++)R[m]=0;for(m=6350;m<=6356;m++)R[m]=0;for(m=6366;m<=6372;m++)R[m]=0;for(m=6381;m<=6387;m++)R[m]=0;for(m=6393;m<=6404;m++)R[m]=0;for(m=6480;m<=6483;m++)R[m]=0;for(m=6511;m<=6514;m++)R[m]=0;for(m=6579;m<=6581;m++)R[m]=0;for(m=6619;m<=6624;m++)R[m]=0;for(m=6625;m<=6627;m++)R[m]=2;for(m=6628;m<=6632;m++)R[m]=0;for(m=6634;m<=6637;m++)R[m]=0;for(m=6669;m<=6692;m++)R[m]=0;for(m=6707;m<=6709;m++)R[m]=0;for(m=6720;m<=6723;m++)R[m]=0;for(m=6732;m<=6738;m++)R[m]=0;for(m=6931;m<=6933;m++)R[m]=0;for(m=6956;m<=6959;m++)R[m]=0;for(m=7005;m<=7007;m++)R[m]=0;for(m=7057;m<=7070;m++)R[m]=2;for(m=7074;m<=7082;m++)R[m]=0;for(m=7109;m<=7118;m++)R[m]=0;for(m=7119;m<=7127;m++)R[m]=1;for(m=7374;m<=7376;m++)R[m]=0;for(m=7528;m<=7586;m++)R[m]=0;for(m=7587;m<=7645;m++)R[m]=2;for(m=7692;m<=7696;m++)R[m]=0;for(m=7755;m<=7787;m++)R[m]=0;for(m=7791;m<=7795;m++)R[m]=0;for(m=7799;m<=7801;m++)R[m]=0;for(m=7803;m<=7805;m++)R[m]=0;for(m=7825;m<=7831;m++)R[m]=0;for(m=7845;m<=7859;m++)R[m]=0;for(m=8013;m<=8032;m++)R[m]=0;for(m=8065;m<=8068;m++)R[m]=1;for(m=8518;m<=8529;m++)R[m]=2;for(m=8533;m<=8536;m++)R[m]=2;for(m=8538;m<=8540;m++)R[m]=2;for(m=8677;m<=8679;m++)R[m]=0;for(m=8836;m<=8840;m++)R[m]=0;for(m=8857;m<=8859;m++)R[m]=0;for(m=8908;m<=8910;m++)R[m]=0;for(m=9154;m<=9159;m++)R[m]=0;for(m=9205;m<=9218;m++)R[m]=0;for(m=9271;m<=9273;m++)R[m]=0;for(m=9295;m<=9297;m++)R[m]=0;for(m=9356;m<=9360;m++)R[m]=0;for(m=9404;m<=9407;m++)R[m]=0;for(m=9476;m<=9482;m++)R[m]=0;for(m=9487;m<=9494;m++)R[m]=0;for(m=9697;m<=9699;m++)R[m]=0;for(m=9821;m<=9865;m++)R[m]=0;for(m=20002;m<=20032;m++)R[m]=0;for(m=20047;m<=20049;m++)R[m]=0;for(m=20062;m<=20092;m++)R[m]=0;for(m=20135;m<=20138;m++)R[m]=0;for(m=20248;m<=20258;m++)R[m]=0;for(m=20348;m<=20358;m++)R[m]=0;for(m=20436;m<=20440;m++)R[m]=0;for(m=20822;m<=20824;m++)R[m]=0;for(m=20904;m<=20932;m++)R[m]=0;for(m=20934;m<=20936;m++)R[m]=0;for(m=21004;m<=21032;m++)R[m]=0;for(m=21035;m<=21037;m++)R[m]=0;for(m=21095;m<=21097;m++)R[m]=0;for(m=21148;m<=21150;m++)R[m]=0;for(m=21207;m<=21264;m++)R[m]=0;for(m=21307;m<=21364;m++)R[m]=0;for(m=21413;m<=21423;m++)R[m]=0;for(m=21453;m<=21463;m++)R[m]=0;for(m=21473;m<=21483;m++)R[m]=0;for(m=21780;m<=21782;m++)R[m]=0;for(m=21891;m<=21894;m++)R[m]=0;for(m=21896;m<=21899;m++)R[m]=0;for(m=22171;m<=22177;m++)R[m]=0;for(m=22181;m<=22187;m++)R[m]=0;for(m=22191;m<=22197;m++)R[m]=0;for(m=22207;m<=22222;m++)R[m]=0;for(m=22234;m<=22236;m++)R[m]=0;for(m=22243;m<=22250;m++)R[m]=0;for(m=22262;m<=22265;m++)R[m]=0;for(m=22307;m<=22322;m++)R[m]=0;for(m=22348;m<=22357;m++)R[m]=0;for(m=22407;m<=22422;m++)R[m]=0;for(m=22462;m<=22465;m++)R[m]=0;for(m=22521;m<=22525;m++)R[m]=0;for(m=22607;m<=22622;m++)R[m]=0;for(m=22641;m<=22646;m++)R[m]=0;for(m=22648;m<=22657;m++)R[m]=0;for(m=22707;m<=22722;m++)R[m]=0;for(m=22762;m<=22765;m++)R[m]=0;for(m=22991;m<=22994;m++)R[m]=0;for(m=23028;m<=23038;m++)R[m]=0;for(m=23830;m<=23853;m++)R[m]=0;for(m=23866;m<=23872;m++)R[m]=0;for(m=23877;m<=23884;m++)R[m]=0;for(m=23886;m<=23894;m++)R[m]=0;for(m=23946;m<=23948;m++)R[m]=0;for(m=24311;m<=24313;m++)R[m]=0;for(m=24342;m<=24347;m++)R[m]=0;for(m=24370;m<=24374;m++)R[m]=10;for(m=24375;m<=24381;m++)R[m]=0;for(m=24718;m<=24721;m++)R[m]=0;for(m=24817;m<=24821;m++)R[m]=0;for(m=24877;m<=24882;m++)R[m]=0;for(m=24891;m<=24893;m++)R[m]=0;for(m=25391;m<=25395;m++)R[m]=0;for(m=25828;m<=25838;m++)R[m]=0;for(m=26191;m<=26195;m++)R[m]=0;for(m=26391;m<=26393;m++)R[m]=0;for(m=26701;m<=26722;m++)R[m]=0;for(m=26729;m<=26799;m++)R[m]=2;for(m=26801;m<=26803;m++)R[m]=2;for(m=26811;m<=26813;m++)R[m]=2;for(m=26847;m<=26870;m++)R[m]=2;for(m=26891;m<=26899;m++)R[m]=0;for(m=26901;m<=26923;m++)R[m]=0;for(m=26929;m<=26946;m++)R[m]=0;for(m=26948;m<=26998;m++)R[m]=0;for(m=27037;m<=27040;m++)R[m]=0;for(m=27205;m<=27232;m++)R[m]=0;for(m=27258;m<=27260;m++)R[m]=0;for(m=27391;m<=27398;m++)R[m]=0;for(m=27561;m<=27564;m++)R[m]=0;for(m=27571;m<=27574;m++)R[m]=0;for(m=27581;m<=27584;m++)R[m]=0;for(m=27591;m<=27594;m++)R[m]=0;for(m=28191;m<=28193;m++)R[m]=0;for(m=28348;m<=28358;m++)R[m]=0;for(m=28402;m<=28432;m++)R[m]=0;for(m=28462;m<=28492;m++)R[m]=0;for(m=29118;m<=29122;m++)R[m]=0;for(m=29168;m<=29172;m++)R[m]=0;for(m=29177;m<=29185;m++)R[m]=0;for(m=29187;m<=29195;m++)R[m]=0;for(m=29900;m<=29903;m++)R[m]=0;for(m=30161;m<=30179;m++)R[m]=0;for(m=30491;m<=30494;m++)R[m]=0;for(m=30729;m<=30732;m++)R[m]=0;for(m=31251;m<=31259;m++)R[m]=0;for(m=31265;m<=31268;m++)R[m]=0;for(m=31275;m<=31279;m++)R[m]=0;for(m=31281;m<=31297;m++)R[m]=0;for(m=31461;m<=31469;m++)R[m]=0;for(m=31491;m<=31495;m++)R[m]=0;for(m=31917;m<=31922;m++)R[m]=0;for(m=31965;m<=32e3;m++)R[m]=0;for(m=32001;m<=32003;m++)R[m]=2;for(m=32005;m<=32031;m++)R[m]=2;for(m=32033;m<=32060;m++)R[m]=2;for(m=32064;m<=32067;m++)R[m]=2;for(m=32074;m<=32077;m++)R[m]=2;for(m=32081;m<=32086;m++)R[m]=0;for(m=32107;m<=32130;m++)R[m]=0;for(m=32133;m<=32159;m++)R[m]=0;for(m=32164;m<=32167;m++)R[m]=2;for(m=32180;m<=32199;m++)R[m]=0;for(m=32201;m<=32260;m++)R[m]=0;for(m=32301;m<=32360;m++)R[m]=0;for(m=32601;m<=32662;m++)R[m]=0;for(m=32664;m<=32667;m++)R[m]=2;for(m=32701;m<=32761;m++)R[m]=0;for(m=53001;m<=53004;m++)R[m]=0;for(m=53008;m<=53019;m++)R[m]=0;for(m=53021;m<=53032;m++)R[m]=0;for(m=53034;m<=53037;m++)R[m]=0;for(m=53042;m<=53046;m++)R[m]=0;for(m=53074;m<=53080;m++)R[m]=0;for(m=54001;m<=54004;m++)R[m]=0;for(m=54008;m<=54019;m++)R[m]=0;for(m=54021;m<=54032;m++)R[m]=0;for(m=54034;m<=54037;m++)R[m]=0;for(m=54042;m<=54046;m++)R[m]=0;for(m=54048;m<=54053;m++)R[m]=0;for(m=54074;m<=54080;m++)R[m]=0;for(m=54098;m<=54101;m++)R[m]=0;for(m=102001;m<=102040;m++)R[m]=0;for(m=102042;m<=102063;m++)R[m]=0;for(m=102065;m<=102067;m++)R[m]=0;for(m=102070;m<=102117;m++)R[m]=0;for(m=102122;m<=102216;m++)R[m]=0;for(m=102221;m<=102377;m++)R[m]=0;for(m=102382;m<=102388;m++)R[m]=0;for(m=102389;m<=102398;m++)R[m]=2;for(m=102399;m<=102444;m++)R[m]=0;for(m=102445;m<=102447;m++)R[m]=2;for(m=102448;m<=102458;m++)R[m]=0;for(m=102459;m<=102468;m++)R[m]=2;for(m=102469;m<=102499;m++)R[m]=0;for(m=102500;m<=102519;m++)R[m]=1;for(m=102520;m<=102524;m++)R[m]=0;for(m=102525;m<=102529;m++)R[m]=2;for(m=102530;m<=102588;m++)R[m]=0;for(m=102590;m<=102598;m++)R[m]=0;for(m=102601;m<=102603;m++)R[m]=0;for(m=102605;m<=102628;m++)R[m]=0;for(m=102629;m<=102646;m++)R[m]=2;for(m=102648;m<=102700;m++)R[m]=2;for(m=102701;m<=102703;m++)R[m]=0;for(m=102707;m<=102730;m++)R[m]=2;for(m=102733;m<=102758;m++)R[m]=2;for(m=102767;m<=102900;m++)R[m]=0;for(m=102901;m<=102933;m++)R[m]=2;for(m=102934;m<=102950;m++)R[m]=13;for(m=102951;m<=102955;m++)R[m]=0;for(m=102961;m<=102963;m++)R[m]=0;for(m=102965;m<=102969;m++)R[m]=0;for(m=102971;m<=102973;m++)R[m]=0;for(m=102975;m<=102989;m++)R[m]=0;for(m=102990;m<=102992;m++)R[m]=1;for(m=102997;m<=103002;m++)R[m]=0;for(m=103003;m<=103008;m++)R[m]=2;for(m=103009;m<=103011;m++)R[m]=0;for(m=103012;m<=103014;m++)R[m]=2;for(m=103019;m<=103021;m++)R[m]=0;for(m=103022;m<=103024;m++)R[m]=2;for(m=103029;m<=103031;m++)R[m]=0;for(m=103032;m<=103034;m++)R[m]=2;for(m=103065;m<=103068;m++)R[m]=0;for(m=103074;m<=103076;m++)R[m]=0;for(m=103077;m<=103079;m++)R[m]=1;for(m=103080;m<=103082;m++)R[m]=0;for(m=103083;m<=103085;m++)R[m]=2;for(m=103090;m<=103093;m++)R[m]=0;for(m=103097;m<=103099;m++)R[m]=0;for(m=103100;m<=103102;m++)R[m]=2;for(m=103107;m<=103109;m++)R[m]=0;for(m=103110;m<=103112;m++)R[m]=2;for(m=103113;m<=103116;m++)R[m]=0;for(m=103117;m<=103120;m++)R[m]=2;for(m=103153;m<=103157;m++)R[m]=0;for(m=103158;m<=103162;m++)R[m]=2;for(m=103163;m<=103165;m++)R[m]=0;for(m=103166;m<=103168;m++)R[m]=1;for(m=103169;m<=103171;m++)R[m]=2;for(m=103186;m<=103188;m++)R[m]=0;for(m=103189;m<=103191;m++)R[m]=2;for(m=103192;m<=103195;m++)R[m]=0;for(m=103196;m<=103199;m++)R[m]=2;for(m=103200;m<=103224;m++)R[m]=0;for(m=103225;m<=103227;m++)R[m]=1;for(m=103232;m<=103237;m++)R[m]=0;for(m=103238;m<=103243;m++)R[m]=2;for(m=103244;m<=103246;m++)R[m]=0;for(m=103247;m<=103249;m++)R[m]=2;for(m=103254;m<=103256;m++)R[m]=0;for(m=103257;m<=103259;m++)R[m]=2;for(m=103264;m<=103266;m++)R[m]=0;for(m=103267;m<=103269;m++)R[m]=2;for(m=103300;m<=103375;m++)R[m]=0;for(m=103381;m<=103383;m++)R[m]=0;for(m=103384;m<=103386;m++)R[m]=1;for(m=103387;m<=103389;m++)R[m]=0;for(m=103390;m<=103392;m++)R[m]=2;for(m=103397;m<=103399;m++)R[m]=0;for(m=103400;m<=103471;m++)R[m]=2;for(m=103476;m<=103478;m++)R[m]=0;for(m=103479;m<=103481;m++)R[m]=2;for(m=103486;m<=103488;m++)R[m]=0;for(m=103489;m<=103491;m++)R[m]=2;for(m=103492;m<=103495;m++)R[m]=0;for(m=103496;m<=103499;m++)R[m]=2;for(m=103528;m<=103543;m++)R[m]=0;for(m=103544;m<=103548;m++)R[m]=2;for(m=103549;m<=103551;m++)R[m]=0;for(m=103552;m<=103554;m++)R[m]=1;for(m=103555;m<=103557;m++)R[m]=2;for(m=103558;m<=103560;m++)R[m]=0;for(m=103571;m<=103573;m++)R[m]=0;for(m=103574;m<=103576;m++)R[m]=2;for(m=103577;m<=103580;m++)R[m]=0;for(m=103581;m<=103583;m++)R[m]=2;for(m=103595;m<=103694;m++)R[m]=0;for(m=103696;m<=103699;m++)R[m]=0;for(m=103700;m<=103793;m++)R[m]=2;for(m=103794;m<=103890;m++)R[m]=0;for(m=103891;m<=103896;m++)R[m]=2;for(m=103900;m<=103971;m++)R[m]=2;for(m=103972;m<=103977;m++)R[m]=0;for(m=112e3;m<=112101;m++)R[m]=0;const CTe={102113:!0,102100:!0,3857:!0,3785:!0},ITe={4326:!0,3785:!0,3857:!0,102113:!0,102100:!0,104905:!0,104971:!0},mW='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',iT=[-20037508342788905e-9,20037508342788905e-9],nT=[-20037508342787e-6,20037508342787e-6],Soe={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:iT,origin:nT,dx:1e-5},102100:{wkTemplate:mW,valid:iT,origin:nT,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:iT,origin:nT,dx:1e-5},3857:{wkTemplate:mW,valid:iT,origin:nT,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function ui(t,e){return t===e||!U(t)&&!U(e)&&(t.wkid!=null||e.wkid!=null?t.wkid===e.wkid||zu(t)&&zu(e)||e.latestWkid!=null&&t.wkid===e.latestWkid||t.latestWkid!=null&&e.wkid===t.latestWkid:!(!t.wkt||!e.wkt)&&t.wkt.toUpperCase()===e.wkt.toUpperCase())}function xa(t){return vn(t)&&t.wkid&&Soe[t.wkid]||null}function PP(t){return!!vn(t)&&(t.wkid?R[t.wkid]==null:!!t.wkt&&!!/^\s*GEOGCS/i.test(t.wkt))}function TTe(t){return!(j8(t)||U8(t))}function vC(t){return vn(t)&&t.wkid===4326}function qmt(t){return vn(t)&&t.wkid===m0.CGCS2000}function zu(t){return vn(t)&&t.wkid!=null&&CTe[t.wkid]===!0}function kTe(t){return vn(t)&&t.wkid===32662}function z8(t){return t===m0.GCSMARS2000||t===m0.GCSMARS2000_SPHERE}function j8(t){return vn(t)&&t.wkid!=null&&z8(t.wkid)}function V8(t){return t===m0.GCSMOON2000}function U8(t){return vn(t)&&t.wkid!=null&&V8(t.wkid)}function $Te(t){return vn(t)&&t.wkid!=null&&ITe[t.wkid]===!0}function vn(t){return A(t)&&(t.wkid!=null&&t.wkid>=2e3||t.wkt!=null)}const WN={wkid:4326,wkt:Fu(Soe[4326].wkTemplate,{Central_Meridian:"0.0"})},ATe={wkid:102100,latestWkid:3857},MTe={wkid:32662};function B8(t){return{wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${t.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`}}const OTe=B8(ci),Eoe=B8(hh),Coe=B8(tm),PTe={wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${ci.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`};function H8(t){return A(t)&&(j8(t)||ui(t,Eoe))?hh:A(t)&&(U8(t)||ui(t,Coe))?tm:ci}function Wmt(t){return z8(t)?hh:V8(t)?tm:ci}const Ioe=39.37,RTe=ci.radius*Math.PI/200,Toe=/UNIT\[([^\]]+)\]\]$/i,e0=R,koe=/UNIT\[([^\]]+)\]/i,LTe=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),DTe=kr()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Gc=t=>t*t,Yh=t=>t*t*t,bC={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Gc(.001)},"square-centimeters":{inBaseUnits:Gc(.01)},"square-decimeters":{inBaseUnits:Gc(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Gc(1e3)},"square-inches":{inBaseUnits:Gc(.0254)},"square-feet":{inBaseUnits:Gc(.3048)},"square-yards":{inBaseUnits:Gc(.9144)},"square-miles":{inBaseUnits:Gc(1609.344)},"square-us-feet":{inBaseUnits:Gc(1200/3937)},acres:{inBaseUnits:.0015625*Gc(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Yh(.001)},"cubic-centimeters":{inBaseUnits:1e3*Yh(.01)},"cubic-decimeters":{inBaseUnits:1e3*Yh(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Yh(1e3)},"cubic-inches":{inBaseUnits:1e3*Yh(.0254)},"cubic-feet":{inBaseUnits:1e3*Yh(.3048)},"cubic-yards":{inBaseUnits:1e3*Yh(.9144)},"cubic-miles":{inBaseUnits:1e3*Yh(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},FTe=(()=>{const t={};for(const e in bC)for(const i in bC[e].units)t[i]=e;return t})();function NTe(t,e,i){return t*bC[i].units[e].inBaseUnits}function zTe(t,e,i){return t/bC[i].units[e].inBaseUnits}const Jmt=["metric","imperial","square-inches","square-feet","square-yards","square-miles","square-us-feet","square-meters","square-kilometers","acres","ares","hectares"],$oe=["metric","imperial","inches","feet","yards","miles","nautical-miles","us-feet","meters","kilometers"],jTe=new Map([["meters","square-meters"],["feet","square-feet"],["us-feet","square-us-feet"]]);function Ymt(t){return t==="imperial"||t==="metric"}function JN(t){const e=FTe[t];if(!e)throw new Error("unknown type");return e}function gW(t,e=null){return e=e||JN(t),bC[e].baseUnit===t}function kt(t,e,i){if(e===i)return t;const n=JN(e);if(n!==JN(i))throw new Error("incompatible units");const r=gW(e,n)?t:NTe(t,e,n);return gW(i,n)?r:zTe(r,i,n)}function Aoe(t,e){const i=kt(t,e,"meters");return Math.abs(i)<3e3?"meters":"kilometers"}function Moe(t,e){const i=kt(t,e,"meters");return Math.abs(i)<1e5?"meters":"kilometers"}function Ooe(t,e){const i=kt(t,e,"feet");return Math.abs(i)<1e3?"feet":"miles"}function Poe(t,e){const i=kt(t,e,"feet");return Math.abs(i)<1e5?"feet":"miles"}function VTe(t,e){const i=kt(t,e,"square-meters");return Math.abs(i)<3e6?"square-meters":"square-kilometers"}function UTe(t,e){const i=kt(t,e,"square-feet");return Math.abs(i)<1e6?"square-feet":"square-miles"}function Roe(t,e,i){return kt(t,e,"meters")/(i*Math.PI/180)}function Loe(t){return DTe.fromJSON(t.toLowerCase())||null}function nw(t){if(A(t)&&!TTe(t))return 1;const e=jh(t);return e>1e5?1:e}function Doe(t){return jh(t)>=H8(t).metersPerDegree?"meters":qw(t)}function jh(t,e=ci.metersPerDegree){return xs(BTe(t,!0),e)}function BTe(t,e=!1){const i=A(t)?t.wkid:null,n=A(t)?t.wkt:null;let r=null;if(i){if(z8(i))return hh.metersPerDegree;if(V8(i))return tm.metersPerDegree;r=e0.values[e0[i]],!r&&e&&LTe.has(i)&&(r=RTe)}else n&&(zoe(n)?r=yW(Toe.exec(n),r):Noe(n)&&(r=yW(koe.exec(n),r)));return r}function yW(t,e){return t&&t[1]?Foe(t[1]):e}function Foe(t){return parseFloat(t.split(",")[1])}function qw(t){const e=A(t)?t.wkid:null,i=A(t)?t.wkt:null;let n=null;if(e)n=e0.units[e0[e]];else if(i){const r=zoe(i)?Toe:Noe(i)?koe:null;if(r){const s=r.exec(i);s&&s[1]&&(n=GTe(s[1]))}}return A(n)?Loe(n):null}function Zmt(t){const e=qw(t);return U(e)||!$oe.includes(e)?null:e}function Kmt(t){const e=Doe(t);return U(e)||!$oe.includes(e)?null:e}function Xmt(t){const e=qw(t);return U(e)?null:jTe.get(e)}function Noe(t){return/^GEOCCS/i.test(t)}function zoe(t){return/^PROJCS/i.test(t)}const HTe=1e-7;function GTe(t){const e=/[\\"\\']{1}([^\\"\\']+)/.exec(t);let i=e&&e[1];if(!i||!e0.units.includes(i)){const n=Foe(t);i=null;const r=e0.values;for(let s=0;s<r.length;++s)if(Math.abs(n-r[s])<HTe){i=e0.units[s];break}}return i}function Qmt(t){const e=qw(t);if(U(e))return null;switch(e){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric"}return null}const qTe={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},WTe={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},JTe={esriDUDecimalDegrees:"degrees",esriDURadians:"radians"},YTe=kr()(qTe),ZTe=kr()(WTe),egt=kr()(JTe);function fe(t,e,i){let n,r;return e===void 0?(r=t,n=[void 0]):typeof e!="string"?(r=t,n=[void 0],i=e):(r=e,n=Array.isArray(t)?t:[t]),(s,o)=>{const a=s.constructor.prototype;for(const l of n){const u=jse(s,l,r);u.write&&typeof u.write=="object"||(u.write={}),i&&(u.write.target=i),u.write.writer=a[o]}}}var Zc;let At=Zc=class extends Y{static fromJSON(t){if(!t)return null;if(t.wkid){if(t.wkid===102100)return Zc.WebMercator;if(t.wkid===4326)return Zc.WGS84}const e=new Zc;return e.read(t),e}constructor(t){super(t),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}normalizeCtorArgs(t){return t&&typeof t=="object"?t:{[typeof t=="string"?"wkt":"wkid"]:t}}get isWGS84(){return vC(this)}get isWebMercator(){return zu(this)}get isGeographic(){return PP(this)}get isWrappable(){return $Te(this)}get metersPerUnit(){return jh(this)}get unit(){return qw(this)||(this.isGeographic?"degrees":null)}writeWkt(t,e){this.wkid||(e.wkt=t)}clone(){if(this===Zc.WGS84)return Zc.WGS84;if(this===Zc.WebMercator)return Zc.WebMercator;const t=new Zc;return this.wkid!=null?(t.wkid=this.wkid,this.latestWkid!=null&&(t.latestWkid=this.latestWkid),this.vcsWkid!=null&&(t.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(t.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(t.wkt=this.wkt),this.imageCoordinateSystem&&(t.imageCoordinateSystem=G(this.imageCoordinateSystem)),t}equals(t){if(t==null)return!1;if(this.imageCoordinateSystem||t.imageCoordinateSystem){if(this.imageCoordinateSystem==null||t.imageCoordinateSystem==null)return!1;const{id:e,referenceServiceName:i}=t.imageCoordinateSystem,{geodataXform:n}=t.imageCoordinateSystem,r=this.imageCoordinateSystem;return e==null||n?JSON.stringify(r)===JSON.stringify(t.imageCoordinateSystem):i?r.id===e&&r.referenceServiceName===i:r.id===e}return ui(this,t)}toJSON(t){return this.write(void 0,t)}};At.GCS_NAD_1927=null,At.WGS84=null,At.WebMercator=null,At.PlateCarree=null,c([d({readOnly:!0})],At.prototype,"isWGS84",null),c([d({readOnly:!0})],At.prototype,"isWebMercator",null),c([d({readOnly:!0})],At.prototype,"isGeographic",null),c([d({readOnly:!0})],At.prototype,"isWrappable",null),c([d({type:Bt,json:{write:!0}})],At.prototype,"latestWkid",void 0),c([d({readOnly:!0})],At.prototype,"metersPerUnit",null),c([d({readOnly:!0})],At.prototype,"unit",null),c([d({type:Bt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],At.prototype,"wkid",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],At.prototype,"wkt",void 0),c([fe("wkt"),fe("web-scene","wkt")],At.prototype,"writeWkt",null),c([d({type:Bt,json:{write:!0}})],At.prototype,"vcsWkid",void 0),c([d({type:Bt,json:{write:!0}})],At.prototype,"latestVcsWkid",void 0),c([d()],At.prototype,"imageCoordinateSystem",void 0),At=Zc=c([O("esri.geometry.SpatialReference")],At),At.prototype.toJSON.isDefaultToJSON=!0,At.GCS_NAD_1927=new At({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),At.WGS84=new At(WN),At.WebMercator=new At(ATe),At.PlateCarree=new At(MTe),Object.freeze&&(Object.freeze(At.GCS_NAD_1927),Object.freeze(At.WGS84),Object.freeze(At.WebMercator));const Ge=At;let Kc=class extends Y{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Ge.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,i){if(e instanceof Ge)return e;if(e!=null){const n=new Ge;return n.read(e,i),n}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,i){this.cache[e]=i}};c([d()],Kc.prototype,"type",void 0),c([d({readOnly:!0})],Kc.prototype,"cache",null),c([d({readOnly:!0})],Kc.prototype,"extent",null),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Kc.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Kc.prototype,"hasZ",void 0),c([d({type:Ge,json:{write:!0},value:Ge.WGS84})],Kc.prototype,"spatialReference",void 0),c([de("spatialReference")],Kc.prototype,"readSpatialReference",null),Kc=c([O("esri.geometry.Geometry")],Kc);const wm=Kc,KTe=Object.prototype.toString;function XTe(t){const e="__accessorMetadata__"in t?Ht(t):t;return function(...i){if(i.push(e),typeof i[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return QTe.apply(this,i)}}function QTe(t,e,i,n){$P(t,e).cast=n}function eke(t){return(e,i)=>{$P(e,t).cast=e[i]}}function st(...t){if(t.length!==3||typeof t[1]!="string")return t.length===1&&KTe.call(t[0])==="[object Function]"?XTe(t[0]):t.length===1&&typeof t[0]=="string"?eke(t[0]):void 0}function tke(t,e){const i=t.x-e.x,n=t.y-e.y,r=t.hasZ&&e.hasZ?t.z-e.z:0;return Math.sqrt(i*i+n*n+r*r)}const ike=57.29577951308232,nke=.017453292519943;function vW(t){return t*ike}function bW(t){return t*nke}function igt(t){return t/ci.radius}function ngt(t){return Math.PI/2-2*Math.atan(Math.exp(-t/ci.radius))}function YN(t){return t.wkid!=null||t.wkt!=null}const V3=[0,0];function xM(t,e,i,n,r){const s=t,o=r;if(o.spatialReference=i,"x"in s&&"x"in o)[o.x,o.y]=e(s.x,s.y,V3,n);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=e(s.xmin,s.ymin,V3,n),[o.xmax,o.ymax]=e(s.xmax,s.ymax,V3,n);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let u;for(let h=0;h<a.length;h++){const p=a[h];u=[],l.push(u);for(let f=0;f<p.length;f++)u.push(e(p[f][0],p[f][1],[0,0],n)),p[f].length>2&&u[f].push(p[f][2]),p[f].length>3&&u[f].push(p[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let u=0;u<a.length;u++)l[u]=e(a[u][0],a[u][1],[0,0],n),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return r}function I_(t,e){const i=t&&(YN(t)?t:t.spatialReference),n=e&&(YN(e)?e:e.spatialReference);return!(t&&"type"in t&&t.type==="mesh"||e&&"type"in e&&e.type==="mesh"||!i||!n)&&(!!ui(n,i)||zu(n)&&vC(i)||zu(i)&&vC(n))}function RP(t,e){if(U(t))return null;const i=t.spatialReference,n=e&&(YN(e)?e:e.spatialReference);return I_(i,n)?ui(i,n)?G(t):zu(n)?xM(t,My,Ge.WebMercator,!1,G(t)):vC(n)?xM(t,T_,Ge.WGS84,!1,G(t)):null:null}function My(t,e,i=[0,0]){e>89.99999?e=89.99999:e<-89.99999&&(e=-89.99999);const n=bW(e);return i[0]=bW(t)*ci.radius,i[1]=ci.halfSemiMajorAxis*Math.log((1+Math.sin(n))/(1-Math.sin(n))),i}function T_(t,e,i=[0,0],n=!1){const r=vW(t/ci.radius);return i[0]=n?r:r-360*Math.floor((r+180)/360),i[1]=vW(Math.PI/2-2*Math.atan(Math.exp(-e/ci.radius))),i}function Tc(t,e=!1,i=G(t)){return xM(t,My,Ge.WebMercator,e,i)}function sh(t,e=!1,i=G(t)){return xM(t,T_,Ge.WGS84,e,i)}var s$;const W1=[0,0];function _W(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let Rs=s$=class extends wm{static copy(t,e){e._set("x",t._get("x")),e._set("y",t._get("y")),e._set("z",t._get("z")),e._set("m",t._get("m"));const i=t._get("spatialReference");e._set("spatialReference",Object.isFrozen(i)?i:i.clone())}constructor(...t){super(...t),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(t,e,i,n,r){let s;if(Array.isArray(t))s=t,r=e,t=s[0],e=s[1],i=s[2],n=s[3];else if(t&&typeof t=="object"){if(s=t,t=s.x!=null?s.x:s.longitude,e=s.y!=null?s.y:s.latitude,i=s.z,n=s.m,(r=s.spatialReference)&&r.declaredClass!=="esri.geometry.SpatialReference"&&(r=new Ge(r)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)se.getLogger(this.declaredClass).warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)se.getLogger(this.declaredClass).warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&r&&r.isWebMercator){const a=My(s.longitude,s.latitude,W1);t=a[0],e=a[1]}}}else _W(i)?(r=i,i=null):_W(n)&&(r=n,n=null);const o={x:t,y:e};return o.x==null&&o.y!=null?se.getLogger(this.declaredClass).warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&se.getLogger(this.declaredClass).warn(".x=","X coordinate was defined without a Y coordinate"),r!=null&&(o.spatialReference=r),i!=null&&(o.z=i),n!=null&&(o.m=n),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(t){t!==(this._get("m")!==void 0)&&(this._set("m",t?0:void 0),this._set("hasM",t))}get hasZ(){return this.z!==void 0}set hasZ(t){t!==(this._get("z")!==void 0)&&(this._set("z",t?0:void 0),this._set("hasZ",t))}get latitude(){const{spatialReference:t,x:e,y:i}=this;if(t){if(t.isWebMercator)return T_(e,i,W1)[1];if(t.isGeographic)return i}return null}set latitude(t){const{spatialReference:e,x:i}=this;t!=null&&e&&(e.isWebMercator?this._set("y",My(i,t,W1)[1]):e.isGeographic&&this._set("y",t),this._set("latitude",t))}get longitude(){const{x:t,y:e,spatialReference:i}=this;if(i){if(i.isWebMercator)return T_(t,e,W1)[0];if(i.isGeographic)return t}return null}set longitude(t){const{y:e,spatialReference:i}=this;t!=null&&i&&(i.isWebMercator?this._set("x",My(t,e,W1)[0]):i.isGeographic&&this._set("x",t),this._set("longitude",t))}writeX(t,e,i){e[i]=isNaN(t)?"NaN":t}readX(t){return typeof t=="string"?NaN:t}clone(){const t=new s$;return t.x=this.x,t.y=this.y,t.z=this.z,t.m=this.m,t.spatialReference=this.spatialReference,t}copy(t){return s$.copy(t,this),this}equals(t){if(U(t))return!1;const{x:e,y:i,z:n,m:r,spatialReference:s}=this,{z:o,m:a}=t;let{x:l,y:u,spatialReference:h}=t;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[l,u]=My(l,u),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[l,u]=T_(l,u),h=s}return e===l&&i===u&&n===o&&r===a&&s.wkid===h.wkid}offset(t,e,i){return this.x+=t,this.y+=e,i!=null&&(this.z=(this.z??0)+i),this}normalize(){if(!this.spatialReference)return this;const t=xa(this.spatialReference);if(!t)return this;let e=this.x;const[i,n]=t.valid,r=2*n;let s;return e>n?(s=Math.ceil(Math.abs(e-n)/r),e-=s*r):e<i&&(s=Math.ceil(Math.abs(e-i)/r),e+=s*r),this._set("x",e),this}distance(t){return tke(this,t)}toArray(){const t=this.hasZ,e=this.hasM;return t&&e?[this.x,this.y,this.z,this.m]:t?[this.x,this.y,this.z]:e?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],Rs.prototype,"cache",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Rs.prototype,"hasM",null),c([d({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Rs.prototype,"hasZ",null),c([d({type:Number})],Rs.prototype,"latitude",null),c([d({type:Number})],Rs.prototype,"longitude",null),c([d({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),st(t=>isNaN(t)?t:sl(t))],Rs.prototype,"x",void 0),c([fe("x")],Rs.prototype,"writeX",null),c([de("x")],Rs.prototype,"readX",null),c([d({type:Number,json:{write:!0}})],Rs.prototype,"y",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Rs.prototype,"z",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Rs.prototype,"m",void 0),Rs=s$=c([O("esri.geometry.Point")],Rs),Rs.prototype.toJSON.isDefaultToJSON=!0;const Ve=Rs,U3=[0,0];function LP(t,e){return!!A(e)&&js(t,e.x,e.y,e.z)}function rgt(t,e){if(!e.points||e.points.length)return!1;for(const i of e.points)if(!rw(t,i))return!1;return!0}function rke(t,e){const{xmin:i,ymin:n,zmin:r,xmax:s,ymax:o,zmax:a}=e;return t.hasZ&&e.hasZ?js(t,i,n,r)&&js(t,i,o,r)&&js(t,s,o,r)&&js(t,s,n,r)&&js(t,i,n,a)&&js(t,i,o,a)&&js(t,s,o,a)&&js(t,s,n,a):js(t,i,n)&&js(t,i,o)&&js(t,s,o)&&js(t,s,n)}function rw(t,e){return js(t,e[0],e[1])}function ske(t,e){return js(t,e[0],e[1],e[2])}function js(t,e,i,n){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(n==null||!t.hasZ||n>=t.zmin&&n<=t.zmax)}function joe(t,e){return U3[1]=e.y,U3[0]=e.x,oke(t,U3)}function oke(t,e){return Voe(t.rings,e)}function Voe(t,e){if(!t)return!1;if(ake(t))return wW(!1,t,e);let i=!1;for(let n=0,r=t.length;n<r;n++)i=wW(i,t[n],e);return i}function ake(t){return!Array.isArray(t[0][0])}function wW(t,e,i){const[n,r]=i;let s=t,o=0;for(let a=0,l=e.length;a<l;a++){o++,o===l&&(o=0);const[u,h]=e[a],[p,f]=e[o];(h<r&&f>=r||f<r&&h>=r)&&u+(r-h)/(f-h)*(p-u)<n&&(s=!s)}return s}function lke(t,e){return LP(t,e)}function cke(t,e){const i=t.hasZ&&e.hasZ;let n,r,s;if(t.xmin<=e.xmin){if(n=e.xmin,t.xmax<n)return!1}else if(n=t.xmin,e.xmax<n)return!1;if(t.ymin<=e.ymin){if(r=e.ymin,t.ymax<r)return!1}else if(r=t.ymin,e.ymax<r)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(s=e.zmin,t.zmax<s)return!1}else if(s=t.zmin,e.zmax<s)return!1}return!0}function uke(t,e){const{points:i,hasZ:n}=e,r=n?ske:rw;for(const s of i)if(r(t,s))return!0;return!1}const g0=[0,0],y0=[0,0],v0=[0,0],b0=[0,0],dke=[g0,y0,v0,b0],Uoe=[[v0,g0],[g0,y0],[y0,b0],[b0,v0]];function hke(t,e){return pke(t,e.rings)}function pke(t,e){g0[0]=t.xmin,g0[1]=t.ymax,y0[0]=t.xmax,y0[1]=t.ymax,v0[0]=t.xmin,v0[1]=t.ymin,b0[0]=t.xmax,b0[1]=t.ymin;for(const i of dke)if(Voe(e,i))return!0;for(const i of e){if(!i.length)continue;let n=i[0];if(rw(t,n))return!0;for(let r=1;r<i.length;r++){const s=i[r];if(rw(t,s)||Boe(n,s,Uoe))return!0;n=s}}return!1}function fke(t,e){g0[0]=t.xmin,g0[1]=t.ymax,y0[0]=t.xmax,y0[1]=t.ymax,v0[0]=t.xmin,v0[1]=t.ymin,b0[0]=t.xmax,b0[1]=t.ymin;const i=e.paths;for(const n of i){if(!i.length)continue;let r=n[0];if(rw(t,r))return!0;for(let s=1;s<n.length;s++){const o=n[s];if(rw(t,o)||Boe(r,o,Uoe))return!0;r=o}}return!1}const mr=[0,0];function mke(t){for(let e=0;e<t.length;e++){const i=t[e];for(let r=0;r<i.length-1;r++){const s=i[r],o=i[r+1];for(let a=e+1;a<t.length;a++)for(let l=0;l<t[a].length-1;l++){const u=t[a][l],h=t[a][l+1];if(ZN(s,o,u,h,mr)&&!(mr[0]===s[0]&&mr[1]===s[1]||mr[0]===u[0]&&mr[1]===u[1]||mr[0]===o[0]&&mr[1]===o[1]||mr[0]===h[0]&&mr[1]===h[1]))return!0}}const n=i.length;if(!(n<=4))for(let r=0;r<n-3;r++){let s=n-1;r===0&&(s=n-2);const o=i[r],a=i[r+1];for(let l=r+2;l<s;l++){const u=i[l],h=i[l+1];if(ZN(o,a,u,h,mr)&&!(mr[0]===o[0]&&mr[1]===o[1]||mr[0]===u[0]&&mr[1]===u[1]||mr[0]===a[0]&&mr[1]===a[1]||mr[0]===h[0]&&mr[1]===h[1]))return!0}}}return!1}function Boe(t,e,i){for(let n=0;n<i.length;n++)if(ZN(t,e,i[n][0],i[n][1]))return!0;return!1}function ZN(t,e,i,n,r){const[s,o]=t,[a,l]=e,[u,h]=i,[p,f]=n,g=p-u,v=s-u,b=a-s,_=f-h,w=o-h,S=l-o,C=_*b-g*S;if(C===0)return!1;const $=(g*w-_*v)/C,M=(b*w-S*v)/C;return $>=0&&$<=1&&M>=0&&M<=1&&(r&&(r[0]=s+$*(a-s),r[1]=o+$*(l-o)),!0)}function gke(t){switch(t){case"esriGeometryEnvelope":case"extent":return cke;case"esriGeometryMultipoint":case"multipoint":return uke;case"esriGeometryPoint":case"point":return lke;case"esriGeometryPolygon":case"polygon":return hke;case"esriGeometryPolyline":case"polyline":return fke}}var Ha;function yke(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function Zh(t,e,i){return e==null?i:i==null?e:t(e,i)}let Hn=Ha=class extends wm{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,n,r){return yke(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?Ge.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:n,spatialReference:r??Ge.WGS84}}static fromBounds(t,e){return new Ha({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}static fromPoint(t){return new Ha({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const t=new Ve({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){const e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){const t=new Ha;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&I_(e,i)&&(t=e.isWebMercator?Tc(t):sh(t,!0)),t.type==="point"?LP(this,t):t.type==="extent"&&rke(this,t)}equals(t){if(this===t)return!0;if(U(t))return!1;const e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&I_(e,i)&&(t=e.isWebMercator?Tc(t):sh(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){const e=.5*(1-t),i=this.width*e,n=this.height*e;if(this.xmin+=i,this.ymin+=n,this.xmax-=i,this.ymax-=n,this.hasZ){const r=(this.zmax-this.zmin)*e;this.zmin+=r,this.zmax-=r}if(this.hasM){const r=(this.mmax-this.mmin)*e;this.mmin+=r,this.mmax-=r}return this}intersects(t){if(U(t))return!1;t.type==="mesh"&&(t=t.extent);const e=this.spatialReference,i=t.spatialReference;return e&&i&&!ui(e,i)&&I_(e,i)&&(t=e.isWebMercator?Tc(t):sh(t,!0)),gke(t.type)(this,t)}normalize(){const t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Zh(Math.min,this.zmin,t.zmin),this.zmax=Zh(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Zh(Math.min,this.mmin,t.mmin),this.mmax=Zh(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:U(t)||!this.intersects(t)?null:(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=Zh(Math.max,this.zmin,t.zmin),this.zmax=Zh(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=Zh(Math.max,this.mmin,t.mmin),this.mmax=Zh(Math.min,this.mmax,t.mmax)),this)}toJSON(t){return this.write({},t)}_shiftCM(t=xa(this.spatialReference)){if(!t||!this.spatialReference)return this;const e=this.spatialReference,i=this._getCM(t);if(i){const n=e.isWebMercator?sh(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(n.x=this._normalizeX(n.x,t).x),this.spatialReference=new Ge(Fu((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:n.x}))}return this}_getCM(t){let e=null;const[i,n]=t.valid,r=this.xmin,s=this.xmax;return r>=i&&r<=n&&s>=i&&s<=n||(e=this.center),e}_normalize(t,e,i){const n=this.spatialReference;if(!n)return this;const r=i??xa(n);if(r==null)return this;const s=this._getParts(r).map(l=>l.extent);if(s.length<2)return s[0]||this;if(s.length>2)return t?this._shiftCM(r):this.set({xmin:r.valid[0],xmax:r.valid[1]});if(t)return this._shiftCM(r);if(e)return s;let o=!0,a=!0;return s.forEach(l=>{l.hasZ||(o=!1),l.hasM||(a=!1)}),{rings:s.map(l=>{const u=[[l.xmin,l.ymin],[l.xmin,l.ymax],[l.xmax,l.ymax],[l.xmax,l.ymin],[l.xmin,l.ymin]];if(o){const h=(l.zmax-l.zmin)/2;for(let p=0;p<u.length;p++)u[p].push(h)}if(a){const h=(l.mmax-l.mmin)/2;for(let p=0;p<u.length;p++)u[p].push(h)}return u}),hasZ:o,hasM:a,spatialReference:n}}_getParts(t){let e=this.cache._parts;if(!e){e=[];const{ymin:r,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let h;t=t||xa(o);const[p,f]=t.valid;h=this._normalizeX(this.xmin,t);const g=h.x,v=h.frameId;h=this._normalizeX(this.xmax,t);const b=h.x,_=h.frameId,w=g===b&&a>0;if(a>2*f){const S=new Ha(l<u?g:b,r,f,s,o),C=new Ha(p,r,l<u?b:g,s,o),$=new Ha(0,r,f,s,o),M=new Ha(p,r,0,s,o),P=[],k=[];S.contains($)&&P.push(v),S.contains(M)&&k.push(v),C.contains($)&&P.push(_),C.contains(M)&&k.push(_);for(let D=v+1;D<_;D++)P.push(D),k.push(D);e.push({extent:S,frameIds:[v]},{extent:C,frameIds:[_]},{extent:$,frameIds:P},{extent:M,frameIds:k})}else g>b||w?e.push({extent:new Ha(g,r,f,s,o),frameIds:[v]},{extent:new Ha(p,r,b,s,o),frameIds:[_]}):e.push({extent:new Ha(g,r,b,s,o),frameIds:[v]});this.cache._parts=e}const i=this.hasZ,n=this.hasM;if(i||n){const r={};i&&(r.zmin=this.zmin,r.zmax=this.zmax),n&&(r.mmin=this.mmin,r.mmax=this.mmax);for(let s=0;s<e.length;s++)e[s].extent.set(r)}return e}_normalizeX(t,e){const[i,n]=e.valid,r=2*n;let s,o=0;return t>n?(s=Math.ceil(Math.abs(t-n)/r),t-=s*r,o=s):t<i&&(s=Math.ceil(Math.abs(t-i)/r),t+=s*r,o=-s),{x:t,frameId:o}}};c([d({readOnly:!0})],Hn.prototype,"cache",null),c([d({readOnly:!0})],Hn.prototype,"center",null),c([d({readOnly:!0})],Hn.prototype,"extent",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Hn.prototype,"hasM",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Hn.prototype,"hasZ",null),c([d({readOnly:!0})],Hn.prototype,"height",null),c([d({readOnly:!0})],Hn.prototype,"width",null),c([d({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Hn.prototype,"xmin",void 0),c([d({type:Number,json:{write:!0}})],Hn.prototype,"ymin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Hn.prototype,"mmin",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Hn.prototype,"zmin",void 0),c([d({type:Number,json:{write:!0}})],Hn.prototype,"xmax",void 0),c([d({type:Number,json:{write:!0}})],Hn.prototype,"ymax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Hn.prototype,"mmax",void 0),c([d({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Hn.prototype,"zmax",void 0),Hn=Ha=c([O("esri.geometry.Extent")],Hn),Hn.prototype.toJSON.isDefaultToJSON=!0;const Dt=Hn;function sw(t,e,i=!1){let{hasM:n,hasZ:r}=t;Array.isArray(e)?e.length!==4||n||r?e.length===3&&i&&!n?(r=!0,n=!1):e.length===3&&n&&r&&(n=!1,r=!1):(n=!0,r=!0):(r=!r&&e.hasZ&&(!n||e.hasM),n=!n&&e.hasM&&(!r||e.hasZ)),t.hasZ=r,t.hasM=n}var KN;function xW(t){return(e,i)=>e==null?i:i==null?e:t(e,i)}function vke(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}let yp=KN=class extends wm{constructor(...t){super(...t),this.points=[],this.type="multipoint"}normalizeCtorArgs(t,e){if(!t&&!e)return{};const i={};Array.isArray(t)?(i.points=t,i.spatialReference=e):vke(t)?i.spatialReference=t:(t.points&&(i.points=t.points),t.spatialReference&&(i.spatialReference=t.spatialReference),t.hasZ&&(i.hasZ=t.hasZ),t.hasM&&(i.hasM=t.hasM));const n=i.points&&i.points[0];return n&&(i.hasZ===void 0&&i.hasM===void 0?(i.hasZ=n.length>2,i.hasM=!1):i.hasZ===void 0?i.hasZ=n.length>3:i.hasM===void 0&&(i.hasM=n.length>3)),i}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const t=this.points;if(!t.length)return null;const e=new Dt,i=this.hasZ,n=this.hasM,r=i?3:2,s=t[0],o=xW(Math.min),a=xW(Math.max);let l,u,h,p,[f,g]=s,[v,b]=s;for(let _=0,w=t.length;_<w;_++){const S=t[_],[C,$]=S;if(f=o(f,C),g=o(g,$),v=a(v,C),b=a(b,$),i&&S.length>2){const M=S[2];l=o(l,M),h=a(h,M)}if(n&&S.length>r){const M=S[r];u=o(u,M),p=a(p,M)}}return e.xmin=f,e.ymin=g,e.xmax=v,e.ymax=b,e.spatialReference=this.spatialReference,i?(e.zmin=l,e.zmax=h):(e.zmin=void 0,e.zmax=void 0),n?(e.mmin=u,e.mmax=p):(e.mmin=void 0,e.mmax=void 0),e}writePoints(t,e){e.points=G(this.points)}addPoint(t){return sw(this,t),Array.isArray(t)?this.points.push(t):this.points.push(t.toArray()),this.notifyChange("points"),this}clone(){const t={points:G(this.points),spatialReference:this.spatialReference};return this.hasZ&&(t.hasZ=!0),this.hasM&&(t.hasM=!0),new KN(t)}getPoint(t){if(!this._validateInputs(t))return null;const e=this.points[t],i={x:e[0],y:e[1],spatialReference:this.spatialReference};let n=2;return this.hasZ&&(i.z=e[2],n=3),this.hasM&&(i.m=e[n]),new Ve(i)}removePoint(t){if(!this._validateInputs(t))return null;const e=new Ve(this.points.splice(t,1)[0],this.spatialReference);return this.notifyChange("points"),e}setPoint(t,e){return this._validateInputs(t)?(sw(this,e),Array.isArray(e)||(e=e.toArray()),this.points[t]=e,this.notifyChange("points"),this):this}toJSON(t){return this.write({},t)}_validateInputs(t){return t!=null&&t>=0&&t<this.points.length}};c([d({readOnly:!0})],yp.prototype,"cache",null),c([d()],yp.prototype,"extent",null),c([d({type:[[Number]],json:{write:{isRequired:!0}}})],yp.prototype,"points",void 0),c([fe("points")],yp.prototype,"writePoints",null),yp=KN=c([O("esri.geometry.Multipoint")],yp),yp.prototype.toJSON.isDefaultToJSON=!0;const DP=yp;function SW(t){if(!t)return null;if(Array.isArray(t))return t;const e=t.hasZ,i=t.hasM;if(t.type==="point")return i&&e?[t.x,t.y,t.z,t.m]:e?[t.x,t.y,t.z]:i?[t.x,t.y,t.m]:[t.x,t.y];if(t.type==="polygon")return t.rings.slice(0);if(t.type==="polyline")return t.paths.slice(0);if(t.type==="multipoint")return t.points.slice(0);if(t.type==="extent"){const n=t.clone().normalize();if(!n)return null;let r=!1,s=!1;return n.forEach(o=>{o.hasZ&&(r=!0),o.hasM&&(s=!0)}),n.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(r&&o.hasZ){const l=.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(s&&o.hasM){const l=.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a})}return null}function G8(t,e){const i=e[0]-t[0],n=e[1]-t[1];if(t.length>2&&e.length>2){const r=t[2]-e[2];return Math.sqrt(i*i+n*n+r*r)}return Math.sqrt(i*i+n*n)}function Hoe(t,e,i){const n=t[0]+i*(e[0]-t[0]),r=t[1]+i*(e[1]-t[1]);return t.length>2&&e.length>2?[n,r,t[2]+i*(e[2]-t[2])]:[n,r]}function bke(t,e,i,n){const[r,s]=e,[o,a]=i[n],[l,u]=i[n+1],h=l-o,p=u-a,f=h*h+p*p,g=(r-o)*h+(s-a)*p,v=Math.min(1,Math.max(0,g/f));return t[0]=o+h*v,t[1]=a+p*v,t}function sgt(t,e,i){const n=i.rings;let r,s,o=!1,a=1/0;for(let l=0;l<n.length;l++){const u=n[l];for(let h=0,p=u.length-1;h<u.length;p=h++)r=u[h],s=u[p],r[1]>e!=s[1]>e&&t<(s[0]-r[0])*(e-r[1])/(s[1]-r[1])+r[0]&&(o=!o),a=Math.min(a,_ke(t,e,r,s))}return a===0?0:(o?1:-1)*Math.sqrt(a)}function _ke(t,e,i,n){let r=i[0],s=i[1],o=n[0]-r,a=n[1]-s;if(o!==0||a!==0){const l=((t-r)*o+(e-s)*a)/(o*o+a*a);l>1?(r=n[0],s=n[1]):l>0&&(r+=o*l,s+=a*l)}return o=t-r,a=e-s,o*o+a*a}function wke(t,e){return Hoe(t,e,.5)}function ogt(t){const e=t.length;let i=0;for(let n=0;n<e-1;++n)i+=G8(t[n],t[n+1]);return i}function agt(t,e){if(e<=0)return t[0];const i=t.length;let n=0;for(let r=0;r<i-1;++r){const s=G8(t[r],t[r+1]);if(e-n<s){const o=(e-n)/s;return Hoe(t[r],t[r+1],o)}n+=s}return t[i-1]}function Goe(t,e,i){const n=t.length;let r=0,s=0,o=0;for(let a=0;a<n;a++){const l=t[a],u=t[(a+1)%n];let h=2;r+=l[0]*u[1]-u[0]*l[1],l.length>2&&u.length>2&&i&&(s+=l[0]*u[2]-u[0]*l[2],h=3),l.length>h&&u.length>h&&e&&(o+=l[0]*u[h]-u[0]*l[h])}return r<=0&&s<=0&&o<=0}function xke(t){const e=t.length;return e>2&&SI(t[0],t[e-1])}function lgt(t){if("rings"in t&&(Ske(t),t.rings.length>0&&!Goe(t.rings[0],t.hasM??!1,t.hasZ??!1)))for(const e of t.rings)e.reverse()}function Ske(t){if("rings"in t)for(const e of t.rings)xke(e)||e.push(e[0].slice())}function cgt(t){return t.type!=="polygon"&&t.type!=="polyline"||Eke(t.type==="polygon"?t.rings:t.paths,t.spatialReference),t}function Eke(t,e){const i=xa(e);if(!i)return;const n=i.valid[0],r=i.valid[1],s=r-n;for(const o of t){let a=1/0,l=-1/0;for(const h of o){const p=Cke(h[0],n,r);a=Math.min(a,p),l=Math.max(l,p),h[0]=p}const u=l-a;s-u<u&&o.forEach(h=>{h[0]<0&&(h[0]+=s)})}}function Cke(t,e,i){const n=i-e;return t<e?i-(e-t)%n:t>i?e+(t-e)%n:t}function qoe(t){if(!t||t.length<3)return 0;let e=0;const i=t.length-1;for(let n=0;n<i;n++)e+=(t[n][0]-t[n+1][0])*(t[n][1]+t[n+1][1]);return e+=(t[i][0]-t[0][0])*(t[i][1]+t[0][1]),-.5*e}function ugt(t,e){if(t===e)return!0;if(t.type!==e.type)return!1;if(t.type==="point"||t.type==="extent")return!0;if(t.type==="multipoint")return t.points.length===e.points.length;const[i,n]=t.type==="polyline"?[t.paths,e.paths]:[t.rings,e.rings];return i.length===n.length&&i.every((r,s)=>r.length===n[s].length)}function Ike(t){return t?t.hasZ?[t.xmax-t.xmin/2,t.ymax-t.ymin/2,t.zmax-t.zmin/2]:[t.xmax-t.xmin/2,t.ymax-t.ymin/2]:null}function Woe(t){return t?Joe(t.rings,t.hasZ??!1):null}function Joe(t,e){if(!t||!t.length)return null;const i=[],n=[],r=e?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=t.length;s<o;s++){const a=Tke(t[s],e,r);a&&n.push(a)}if(n.sort((s,o)=>{let a=s[2]-o[2];return a===0&&e&&(a=s[4]-o[4]),a}),n.length&&(i[0]=n[0][0],i[1]=n[0][1],e&&(i[2]=n[0][3]),(i[0]<r[0]||i[0]>r[1]||i[1]<r[2]||i[1]>r[3]||e&&(i[2]<r[4]||i[2]>r[5]))&&(i.length=0)),!i.length){const s=t[0]&&t[0].length?kke(t[0],e):null;if(!s)return null;i[0]=s[0],i[1]=s[1],e&&s.length>2&&(i[2]=s[2])}return i}function Tke(t,e,i){let n=0,r=0,s=0,o=0,a=0;const l=t.length?t[0][0]:0,u=t.length?t[0][1]:0,h=t.length&&e?t[0][2]:0;for(let f=0;f<t.length;f++){const g=t[f],v=t[(f+1)%t.length],[b,_,w]=g,S=b-l,C=_-u,[$,M,P]=v,k=$-l,D=M-u,z=S*D-k*C;if(o+=z,n+=(S+k)*z,r+=(C+D)*z,e&&g.length>2&&v.length>2){const B=w-h,j=P-h,K=S*j-k*B;s+=(B+j)*K,a+=K}b<i[0]&&(i[0]=b),b>i[1]&&(i[1]=b),_<i[2]&&(i[2]=_),_>i[3]&&(i[3]=_),e&&(w<i[4]&&(i[4]=w),w>i[5]&&(i[5]=w))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const p=[n/(6*o)+l,r/(6*o)+u,o];return e&&(i[4]===i[5]||a===0?(p[3]=(i[4]+i[5])/2,p[4]=0):(p[3]=s/(6*a)+h,p[4]=a)),p}function kke(t,e){const i=e?[0,0,0]:[0,0],n=e?[0,0,0]:[0,0];let r=0,s=0,o=0,a=0;for(let l=0,u=t.length;l<u-1;l++){const h=t[l],p=t[l+1];if(h&&p){i[0]=h[0],i[1]=h[1],n[0]=p[0],n[1]=p[1],e&&h.length>2&&p.length>2&&(i[2]=h[2],n[2]=p[2]);const f=G8(i,n);if(f){r+=f;const g=wke(h,p);s+=f*g[0],o+=f*g[1],e&&g.length>2&&(a+=f*g[2])}}}return r>0?e?[s/r,o/r,a/r]:[s/r,o/r]:t.length?t[0]:null}const $ke=1e-6;function dgt(t){if(!t||!t.rings)return null;const{rings:e}=t;let i=0;for(let s=0;s<e.length;s++)i+=qoe(e[s]);if(i<$ke)return Joe(e,!1);const n=[0,0],r=e[0][0];for(let s=0;s<e.length;s++)Mke(n,r,e[s]);return n[0]*=1/i,n[1]*=1/i,n[0]+=r[0],n[1]+=r[1],n}const Ake=1/3;function Mke(t,e,i){if(!t||!i||i.length<3)return null;const n=i[0],r=[0,0],s=[i[1][0]-n[0],i[1][1]-n[1]];let o;for(let u=2;u<i.length;u++)r[0]=i[u][0]-n[0],r[1]=i[u][1]-n[1],o=.5*Ake*(r[0]*s[1]-r[1]*s[0]),t[0]+=o*(s[0]+r[0]),t[1]+=o*(s[1]+r[1]),s[0]=r[0],s[1]=r[1];const a=qoe(i),l=[n[0],n[1]];return l[0]-=e[0],l[1]-=e[1],l[0]*=a,l[1]*=a,t[0]+=l[0],t[1]+=l[1],t}function Yoe(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Zoe(t){return t.points!==void 0}function Koe(t){return t.x!==void 0&&t.y!==void 0}function Xoe(t){return t.paths!==void 0}function Qoe(t){return t.rings!==void 0}function eae(t){function e(i,n){return i==null?n:n==null?i:t(i,n)}return e}const Af=eae(Math.min),Mf=eae(Math.max);function hgt(t,e){return Xoe(e)?ow(t,e.paths,!1,!1):Qoe(e)?ow(t,e.rings,!1,!1):Zoe(e)?q8(t,e.points,!1,!1,!1,!1):Yoe(e)?tae(t,e):(Koe(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function pgt(t,e){return Xoe(e)?ow(t,e.paths,!0,!1):Qoe(e)?ow(t,e.rings,!0,!1):Zoe(e)?q8(t,e.points,!0,!1,!0,!1):Yoe(e)?tae(t,e,!0,!1,!0,!1):(Koe(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function ow(t,e,i,n){const r=i?3:2;if(!e.length||!e[0].length)return null;let s,o,a,l,[u,h]=e[0][0],[p,f]=e[0][0];for(let g=0;g<e.length;g++){const v=e[g];for(let b=0;b<v.length;b++){const _=v[b],[w,S]=_;if(u=Af(u,w),h=Af(h,S),p=Mf(p,w),f=Mf(f,S),i&&_.length>2){const C=_[2];s=Af(s,C),o=Mf(o,C)}if(n&&_.length>r){const C=_[r];a=Af(s,C),l=Mf(o,C)}}}return i?n?(t[0]=u,t[1]=h,t[2]=s,t[3]=a,t[4]=p,t[5]=f,t[6]=o,t[7]=l,t.length=8,t):(t[0]=u,t[1]=h,t[2]=s,t[3]=p,t[4]=f,t[5]=o,t.length=6,t):n?(t[0]=u,t[1]=h,t[2]=a,t[3]=p,t[4]=f,t[5]=l,t.length=6,t):(t[0]=u,t[1]=h,t[2]=p,t[3]=f,t.length=4,t)}function tae(t,e,i,n,r,s){const o=e.xmin,a=e.xmax,l=e.ymin,u=e.ymax;let h=e.zmin,p=e.zmax,f=e.mmin,g=e.mmax;return r?(h=h||0,p=p||0,s?(f=f||0,g=g||0,t[0]=o,t[1]=l,t[2]=h,t[3]=f,t[4]=a,t[5]=u,t[6]=p,t[7]=g,t):(t[0]=o,t[1]=l,t[2]=h,t[3]=a,t[4]=u,t[5]=p,t)):s?(f=f||0,g=g||0,t[0]=o,t[1]=l,t[2]=f,t[3]=a,t[4]=u,t[5]=g,t):(t[0]=o,t[1]=l,t[2]=a,t[3]=u,t)}function q8(t,e,i,n,r,s){const o=i?3:2,a=n&&s,l=i&&r;if(!e.length||!e[0].length)return null;let u,h,p,f,[g,v]=e[0],[b,_]=e[0];for(let w=0;w<e.length;w++){const S=e[w],[C,$]=S;if(g=Af(g,C),v=Af(v,$),b=Mf(b,C),_=Mf(_,$),l&&S.length>2){const M=S[2];u=Af(u,M),h=Mf(h,M)}if(a&&S.length>o){const M=S[o];p=Af(u,M),f=Mf(h,M)}}return r?(u=u||0,h=h||0,s?(p=p||0,f=f||0,t[0]=g,t[1]=v,t[2]=u,t[3]=p,t[4]=b,t[5]=_,t[6]=h,t[7]=f,t):(t[0]=g,t[1]=v,t[2]=u,t[3]=b,t[4]=_,t[5]=h,t)):s?(p=p||0,f=f||0,t[0]=g,t[1]=v,t[2]=p,t[3]=b,t[4]=_,t[5]=f,t):(t[0]=g,t[1]=v,t[2]=b,t[3]=_,t)}function Oke(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function Pke(t){return t.points!==void 0}function Rke(t){return t.x!==void 0&&t.y!==void 0}function Lke(t){return t.paths!==void 0}function Dke(t){return t.rings!==void 0}const W8=[];function iae(t,e,i,n){return{xmin:t,ymin:e,xmax:i,ymax:n}}function nae(t,e,i,n,r,s){return{xmin:t,ymin:e,zmin:i,xmax:n,ymax:r,zmax:s}}function rae(t,e,i,n,r,s){return{xmin:t,ymin:e,mmin:i,xmax:n,ymax:r,mmax:s}}function sae(t,e,i,n,r,s,o,a){return{xmin:t,ymin:e,zmin:i,mmin:n,xmax:r,ymax:s,zmax:o,mmax:a}}function J8(t,e=!1,i=!1){return e?i?sae(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):nae(t[0],t[1],t[2],t[3],t[4],t[5]):i?rae(t[0],t[1],t[2],t[3],t[4],t[5]):iae(t[0],t[1],t[2],t[3])}function XN(t){return t?Oke(t)?t:Rke(t)?Nke(t):Dke(t)?Y8(t):Lke(t)?oae(t):Pke(t)?Fke(t):null:null}function Fke(t){const{hasZ:e,hasM:i,points:n}=t;return J8(q8(W8,n,e??!1,i??!1),e,i)}function Nke(t){const{x:e,y:i,z:n,m:r}=t,s=r!=null;return n!=null?s?sae(e,i,n,r,e,i,n,r):nae(e,i,n,e,i,n):s?rae(e,i,r,e,i,r):iae(e,i,e,i)}function Y8(t){const{hasZ:e,hasM:i,rings:n}=t,r=ow(W8,n,e??!1,i??!1);return r?J8(r,e,i):null}function oae(t){const{hasZ:e,hasM:i,paths:n}=t,r=ow(W8,n,e??!1,i??!1);return r?J8(r,e,i):null}var o$;function EW(t){return!Array.isArray(t[0])}let Xc=o$=class extends wm{static fromExtent(t){const e=t.clone().normalize(),i=t.spatialReference;let n=!1,r=!1;for(const o of e)o.hasZ&&(n=!0),o.hasM&&(r=!0);const s={rings:e.map(o=>{const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(n&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(r&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:i};return n&&(s.hasZ=!0),r&&(s.hasM=!0),new o$(s)}constructor(...t){super(...t),this.rings=[],this.type="polygon"}normalizeCtorArgs(t,e){let i,n,r=null,s=null;return t&&!Array.isArray(t)?(r=t.rings?t.rings:null,e||(t.spatialReference?e=t.spatialReference:t.rings||(e=t)),i=t.hasZ,n=t.hasM):r=t,r=r||[],e=e||Ge.WGS84,r.length&&r[0]&&r[0][0]!=null&&typeof r[0][0]=="number"&&(r=[r]),s=r[0]&&r[0][0],s&&(i===void 0&&n===void 0?(i=s.length>2,n=s.length>3):i===void 0?i=n?s.length>3:s.length>2:n===void 0&&(n=i?s.length>3:s.length>2)),{rings:r,spatialReference:e,hasZ:i,hasM:n}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const t=Woe(this);if(!t||isNaN(t[0])||isNaN(t[1])||this.hasZ&&isNaN(t[2]))return null;const e=new Ve;return e.x=t[0],e.y=t[1],e.spatialReference=this.spatialReference,this.hasZ&&(e.z=t[2]),e}get extent(){const{spatialReference:t}=this,e=Y8(this);if(!e)return null;const i=new Dt(e);return i.spatialReference=t,i}get isSelfIntersecting(){return mke(this.rings)}writeRings(t,e){e.rings=G(this.rings)}addRing(t){if(!t)return;const e=this.rings,i=e.length;if(EW(t)){const n=[];for(let r=0,s=t.length;r<s;r++)n[r]=t[r].toArray();e[i]=n}else e[i]=t.concat();return this.notifyChange("rings"),this}clone(){const t=new o$;return t.spatialReference=this.spatialReference,t.rings=G(this.rings),t.hasZ=this.hasZ,t.hasM=this.hasM,t}equals(t){if(this===t)return!0;if(U(t))return!1;const e=this.spatialReference,i=t.spatialReference;if(A(e)!==A(i)||A(e)&&A(i)&&!e.equals(i)||this.rings.length!==t.rings.length)return!1;const n=([r,s,o,a],[l,u,h,p])=>r===l&&s===u&&(o==null&&h==null||o===h)&&(a==null&&p==null||a===p);for(let r=0;r<this.rings.length;r++){const s=this.rings[r],o=t.rings[r];if(!SI(s,o,n))return!1}return!0}contains(t){if(!t)return!1;const e=RP(t,this.spatialReference);return joe(this,A(e)?e:t)}isClockwise(t){let e;return e=EW(t)?t.map(i=>this.hasZ?this.hasM?[i.x,i.y,i.z,i.m]:[i.x,i.y,i.z]:[i.x,i.y]):t,Goe(e,this.hasM,this.hasZ)}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.rings[t][e],n=this.hasZ,r=this.hasM;return n&&!r?new Ve(i[0],i[1],i[2],void 0,this.spatialReference):r&&!n?new Ve(i[0],i[1],void 0,i[2],this.spatialReference):n&&r?new Ve(i[0],i[1],i[2],i[3],this.spatialReference):new Ve(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(sw(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t].splice(e,0,i),this.notifyChange("rings"),this):this}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ve(this.rings[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("rings"),i}removeRing(t){if(!this._validateInputs(t,null))return null;const e=this.rings.splice(t,1)[0],i=this.spatialReference,n=e.map(r=>new Ve(r,i));return this.notifyChange("rings"),n}setPoint(t,e,i){return this._validateInputs(t,e)?(sw(this,i),Array.isArray(i)||(i=i.toArray()),this.rings[t][e]=i,this.notifyChange("rings"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.rings.length)return!1;if(e!=null){const n=this.rings[t];if(i&&(e<0||e>n.length)||!i&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],Xc.prototype,"cache",null),c([d({readOnly:!0})],Xc.prototype,"centroid",null),c([d({readOnly:!0})],Xc.prototype,"extent",null),c([d({readOnly:!0})],Xc.prototype,"isSelfIntersecting",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],Xc.prototype,"rings",void 0),c([fe("rings")],Xc.prototype,"writeRings",null),Xc=o$=c([O("esri.geometry.Polygon")],Xc),Xc.prototype.toJSON.isDefaultToJSON=!0;const Ws=Xc;var QN;function zke(t){return!Array.isArray(t[0])}let vp=QN=class extends wm{constructor(...t){super(...t),this.paths=[],this.type="polyline"}normalizeCtorArgs(t,e){let i,n,r=null,s=null;return t&&!Array.isArray(t)?(r=t.paths?t.paths:null,e||(t.spatialReference?e=t.spatialReference:t.paths||(e=t)),i=t.hasZ,n=t.hasM):r=t,r=r||[],e=e||Ge.WGS84,r.length&&r[0]&&r[0][0]!=null&&typeof r[0][0]=="number"&&(r=[r]),s=r[0]&&r[0][0],s&&(i===void 0&&n===void 0?(i=s.length>2,n=!1):i===void 0?i=!n&&s.length>3:n===void 0&&(n=!i&&s.length>3)),{paths:r,spatialReference:e,hasZ:i,hasM:n}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:t}=this,e=oae(this);if(!e)return null;const i=new Dt(e);return i.spatialReference=t,i}writePaths(t,e){e.paths=G(this.paths)}addPath(t){if(!t)return;const e=this.paths,i=e.length;if(zke(t)){const n=[];for(let r=0,s=t.length;r<s;r++)n[r]=t[r].toArray();e[i]=n}else e[i]=t.concat();return this.notifyChange("paths"),this}clone(){const t=new QN;return t.spatialReference=this.spatialReference,t.paths=G(this.paths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;const i=this.paths[t][e],n=this.hasZ,r=this.hasM;return n&&!r?new Ve(i[0],i[1],i[2],void 0,this.spatialReference):r&&!n?new Ve(i[0],i[1],void 0,i[2],this.spatialReference):n&&r?new Ve(i[0],i[1],i[2],i[3],this.spatialReference):new Ve(i[0],i[1],this.spatialReference)}insertPoint(t,e,i){return this._validateInputs(t,e,!0)?(sw(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t].splice(e,0,i),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;const e=this.paths.splice(t,1)[0],i=this.spatialReference,n=e.map(r=>new Ve(r,i));return this.notifyChange("paths"),n}removePoint(t,e){if(!this._validateInputs(t,e))return null;const i=new Ve(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),i}setPoint(t,e,i){return this._validateInputs(t,e)?(sw(this,i),Array.isArray(i)||(i=i.toArray()),this.paths[t][e]=i,this.notifyChange("paths"),this):this}_validateInputs(t,e,i=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){const n=this.paths[t];if(i&&(e<0||e>n.length)||!i&&(e<0||e>=n.length))return!1}return!0}toJSON(t){return this.write({},t)}};c([d({readOnly:!0})],vp.prototype,"cache",null),c([d({readOnly:!0})],vp.prototype,"extent",null),c([d({type:[[[Number]]],json:{write:{isRequired:!0}}})],vp.prototype,"paths",void 0),c([fe("paths")],vp.prototype,"writePaths",null),vp=QN=c([O("esri.geometry.Polyline")],vp),vp.prototype.toJSON.isDefaultToJSON=!0;const Gs=vp,jke=kr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),CW=kr()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});function AI(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function FP(t){return t.points!==void 0}function NP(t){return t.x!==void 0&&t.y!==void 0}function MI(t){return t.paths!==void 0}function ph(t){return t.rings!==void 0}function Yr(t){return U(t)?null:t instanceof wm?t:NP(t)?Ve.fromJSON(t):MI(t)?Gs.fromJSON(t):ph(t)?Ws.fromJSON(t):FP(t)?DP.fromJSON(t):AI(t)?Dt.fromJSON(t):null}function Ww(t){return t?NP(t)?"esriGeometryPoint":MI(t)?"esriGeometryPolyline":ph(t)?"esriGeometryPolygon":AI(t)?"esriGeometryEnvelope":FP(t)?"esriGeometryMultipoint":null:null}const Vke={esriGeometryPoint:Ve,esriGeometryPolyline:Gs,esriGeometryPolygon:Ws,esriGeometryEnvelope:Dt,esriGeometryMultipoint:DP};function Uke(t){return t&&Vke[t]||null}const xm={base:wm,key:"type",typeMap:{extent:Dt,multipoint:DP,point:Ve,polyline:Gs,polygon:Ws}};Nu(xm);const _t=t=>{let e=class extends t{clone(){var l;const i=Sr(Cs(this),"unable to clone instance of non-accessor class"),n=i.metadatas,r=i.store,s={},o=new Map;for(const u in n){const h=n[u],p=r==null?void 0:r.originOf(u),f=h.clonable;if(h.readOnly||f===!1||p!==ht.USER&&p!==ht.DEFAULTS&&p!==ht.WEB_MAP&&p!==ht.WEB_SCENE)continue;const g=this[u];let v=null;v=typeof f=="function"?f(g):f==="reference"?g:kN(g),g!=null&&v==null||(p===ht.DEFAULTS?o.set(u,v):s[u]=v)}const a=new(Object.getPrototypeOf(this)).constructor(s);if(o.size){const u=(l=Cs(a))==null?void 0:l.store;if(u)for(const[h,p]of o)u.set(h,p,ht.DEFAULTS)}return a}};return e=c([O("esri.core.Clonable")],e),e};let IW=class extends _t(_e){};IW=c([O("esri.core.Clonable")],IW);let a$=class aae{constructor(){this._emitter=new aae.EventEmitter(this)}emit(e,i){return this._emitter.emit(e,i)}on(e,i){return this._emitter.on(e,i)}once(e,i){return this._emitter.once(e,i)}hasEventListener(e){return this._emitter.hasEventListener(e)}};(function(t){class e{constructor(r=null){this._target=r,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(r,s){const o=this._listenersMap&&this._listenersMap.get(r);if(!o)return!1;const a=this._target||this;return[...o].forEach(l=>{l.call(a,s)}),o.length>0}on(r,s){if(Array.isArray(r)){const a=r.map(l=>this.on(l,s));return kP(a)}if(r.includes(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const o=this._listenersMap.get(r)||[];return o.push(s),this._listenersMap.set(r,o),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(r)||[],l=a.indexOf(s);l>=0&&a.splice(l,1)}}}once(r,s){const o=this.on(r,a=>{o.remove(),s.call(null,a)});return o}hasEventListener(r){const s=this._listenersMap&&this._listenersMap.get(r);return s!=null&&s.length>0}}t.EventEmitter=e,t.EventedMixin=n=>{let r=class extends n{constructor(){super(...arguments),this._emitter=new e}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return r=c([O("esri.core.Evented")],r),r};let i=class extends _e{constructor(){super(...arguments),this._emitter=new a$.EventEmitter(this)}destroy(){this._emitter.clear()}emit(n,r){return this._emitter.emit(n,r)}on(n,r){return this._emitter.on(n,r)}once(n,r){return this._emitter.once(n,r)}hasEventListener(n){return this._emitter.hasEventListener(n)}};i=c([O("esri.core.Evented")],i),t.EventedAccessor=i})(a$||(a$={}));const $r=a$;var Pt;(function(t){t[t.ADD=1]="ADD",t[t.REMOVE=2]="REMOVE",t[t.MOVE=4]="MOVE"})(Pt||(Pt={}));function Z8(t){return(e,i)=>{e[i]=t}}let K8=class extends eoe{notify(){const e=this._observers;if(e&&e.length>0){const i=e.slice();for(const n of i)n.onInvalidated(),n.onCommitted()}}};var Yd;let Bke=class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}};const Fa=new _m(Bke,void 0,t=>{t.item=null,t.target=null,t.defaultPrevented=!1,t.cancellable=!1}),Hke=()=>{};function B3(t){return t?t instanceof hy?t.toArray():t.length?Array.prototype.slice.apply(t):[]:[]}function H3(t){if(t&&t.length)return t[0]}function Gke(t,e,i,n){const r=Math.min(t.length-i,e.length-n);let s=0;for(;s<r&&t[i+s]===e[n+s];)s++;return s}function lae(t,e,i,n){e&&e.forEach((r,s,o)=>{t.push(r),lae(t,i.call(n,r,s,o),i,n)})}const Kh=new Set,Xh=new Set,Qh=new Set,G3=new Map;let qke=0,hy=Yd=class extends $r.EventedAccessor{static isCollection(t){return t!=null&&t instanceof Yd}constructor(t){super(t),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new K8,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:qke++})}normalizeCtorArgs(t){return t?Array.isArray(t)||t instanceof Yd?{items:t}:t:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return Ke(this._observable),this._items}set items(t){this._emitBeforeChanges(Pt.ADD)||(this._splice(0,this.length,B3(t)),this._emitAfterChanges(Pt.ADD))}hasEventListener(t){return t==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(t)}on(t,e){if(t==="change"){const i=this._chgListeners,n={removed:!1,callback:e};return i.push(n),this._notifications&&this._notifications.push({listeners:i.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Hke,n.removed=!0,i.splice(i.indexOf(n),1)}}}return this._emitter.on(t,e)}once(t,e){const i=this.on(t,e);return{remove(){i.remove()}}}add(t,e){if(Ke(this._observable),this._emitBeforeChanges(Pt.ADD))return this;const i=this.getNextIndex(e??null);return this._splice(i,0,[t]),this._emitAfterChanges(Pt.ADD),this}addMany(t,e=this._items.length){if(Ke(this._observable),!t||!t.length)return this;if(this._emitBeforeChanges(Pt.ADD))return this;const i=this.getNextIndex(e);return this._splice(i,0,B3(t)),this._emitAfterChanges(Pt.ADD),this}at(t){if(Ke(this._observable),(t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this._items[t]}removeAll(){if(Ke(this._observable),!this.length||this._emitBeforeChanges(Pt.REMOVE))return[];const t=this._splice(0,this.length)||[];return this._emitAfterChanges(Pt.REMOVE),t}clone(){return Ke(this._observable),this._createNewInstance({items:this._items.map(G)})}concat(...t){Ke(this._observable);const e=t.map(B3);return this._createNewInstance({items:this._items.concat(...e)})}drain(t,e){if(Ke(this._observable),!this.length||this._emitBeforeChanges(Pt.REMOVE))return;const i=this._splice(0,this.length),n=i.length;for(let r=0;r<n;r++)t.call(e,i[r],r,i);this._emitAfterChanges(Pt.REMOVE)}every(t,e){return Ke(this._observable),this._items.every(t,e)}filter(t,e){let i;return Ke(this._observable),i=arguments.length===2?this._items.filter(t,e):this._items.filter(t),this._createNewInstance({items:i})}find(t,e){return Ke(this._observable),this._items.find(t,e)}findIndex(t,e){return Ke(this._observable),this._items.findIndex(t,e)}flatten(t,e){Ke(this._observable);const i=[];return lae(i,this,t,e),new Yd(i)}forEach(t,e){return Ke(this._observable),this._items.forEach(t,e)}getItemAt(t){return Ke(this._observable),this._items[t]}getNextIndex(t){Ke(this._observable);const e=this.length;return(t=t??e)<0?t=0:t>e&&(t=e),t}includes(t,e=0){return Ke(this._observable),this._items.includes(t,e)}indexOf(t,e=0){return Ke(this._observable),this._items.indexOf(t,e)}join(t=","){return Ke(this._observable),this._items.join(t)}lastIndexOf(t,e=this.length-1){return Ke(this._observable),this._items.lastIndexOf(t,e)}map(t,e){Ke(this._observable);const i=this._items.map(t,e);return new Yd({items:i})}reorder(t,e=this.length-1){Ke(this._observable);const i=this.indexOf(t);if(i!==-1){if(e<0?e=0:e>=this.length&&(e=this.length-1),i!==e){if(this._emitBeforeChanges(Pt.MOVE))return t;this._splice(i,1),this._splice(e,0,[t]),this._emitAfterChanges(Pt.MOVE)}return t}}pop(){if(Ke(this._observable),!this.length||this._emitBeforeChanges(Pt.REMOVE))return;const t=H3(this._splice(this.length-1,1));return this._emitAfterChanges(Pt.REMOVE),t}push(...t){return Ke(this._observable),this._emitBeforeChanges(Pt.ADD)||(this._splice(this.length,0,t),this._emitAfterChanges(Pt.ADD)),this.length}reduce(t,e){Ke(this._observable);const i=this._items;return arguments.length===2?i.reduce(t,e):i.reduce(t)}reduceRight(t,e){Ke(this._observable);const i=this._items;return arguments.length===2?i.reduceRight(t,e):i.reduceRight(t)}remove(t){return Ke(this._observable),this.removeAt(this.indexOf(t))}removeAt(t){if(Ke(this._observable),t<0||t>=this.length||this._emitBeforeChanges(Pt.REMOVE))return;const e=H3(this._splice(t,1));return this._emitAfterChanges(Pt.REMOVE),e}removeMany(t){if(Ke(this._observable),!t||!t.length||this._emitBeforeChanges(Pt.REMOVE))return[];const e=t instanceof Yd?t.toArray():t,i=this._items,n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s],a=i.indexOf(o);if(a>-1){const l=1+Gke(e,i,s+1,a+1),u=this._splice(a,l);u&&u.length>0&&n.push.apply(n,u),s+=l-1}}return this._emitAfterChanges(Pt.REMOVE),n}reverse(){if(Ke(this._observable),this._emitBeforeChanges(Pt.MOVE))return this;const t=this._splice(0,this.length);return t&&(t.reverse(),this._splice(0,0,t)),this._emitAfterChanges(Pt.MOVE),this}shift(){if(Ke(this._observable),!this.length||this._emitBeforeChanges(Pt.REMOVE))return;const t=H3(this._splice(0,1));return this._emitAfterChanges(Pt.REMOVE),t}slice(t=0,e=this.length){return Ke(this._observable),this._createNewInstance({items:this._items.slice(t,e)})}some(t,e){return Ke(this._observable),this._items.some(t,e)}sort(t){if(Ke(this._observable),!this.length||this._emitBeforeChanges(Pt.MOVE))return this;const e=this._splice(0,this.length);return arguments.length?e.sort(t):e.sort(),this._splice(0,0,e),this._emitAfterChanges(Pt.MOVE),this}splice(t,e,...i){Ke(this._observable);const n=(e?Pt.REMOVE:0)|(i.length?Pt.ADD:0);if(this._emitBeforeChanges(n))return[];const r=this._splice(t,e,i)||[];return this._emitAfterChanges(n),r}toArray(){return Ke(this._observable),this._items.slice()}toJSON(){return Ke(this._observable),this.toArray()}toLocaleString(){return Ke(this._observable),this._items.toLocaleString()}toString(){return Ke(this._observable),this._items.toString()}unshift(...t){return Ke(this._observable),!t.length||this._emitBeforeChanges(Pt.ADD)||(this._splice(0,0,t),this._emitAfterChanges(Pt.ADD)),this.length}_createNewInstance(t){return new this.constructor(t)}_splice(t,e,i){const n=this._items,r=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=Hw(()=>this._dispatchChange())),e){if(o=n.splice(t,e),this.hasEventListener("before-remove")){const a=Fa.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),n.splice(t,0,s),t+=1,l-=1,u-=1);Fa.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Fa.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);Fa.release(a)}}if(i&&i.length){if(r){const h=[];for(const p of i){const f=r.ensureType(p);f==null&&p!=null||h.push(f)}i=h}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=t===this.length;if(a||l){const h=Fa.acquire();h.target=this,h.cancellable=!0;const p=Fa.acquire();p.target=this,p.cancellable=!1;for(const f of i)a?(h.reset(f),this.emit("before-add",h),h.defaultPrevented||(u?n.push(f):n.splice(t++,0,f),this._set("length",n.length),l&&(p.reset(f),this.emit("after-add",p)))):(u?n.push(f):n.splice(t++,0,f),this._set("length",n.length),p.reset(f),this.emit("after-add",p));Fa.release(p),Fa.release(h)}else{if(u)for(const h of i)n.push(h);else n.splice(t,0,...i);this._set("length",n.length)}}return(i&&i.length||o&&o.length)&&this._notifyChangeEvent(i,o),o}_emitBeforeChanges(t){let e=!1;if(this.hasEventListener("before-changes")){const i=Fa.acquire();i.target=this,i.cancellable=!0,i.type=t,this.emit("before-changes",i),e=i.defaultPrevented,Fa.release(i)}return e}_emitAfterChanges(t){if(this.hasEventListener("after-changes")){const e=Fa.acquire();e.target=this,e.cancellable=!1,e.type=t,this.emit("after-changes",e),Fa.release(e)}this._observable.notify()}_notifyChangeEvent(t,e){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:t,removed:e})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const t=this._notifications;this._notifications=null;for(const e of t){const i=e.changes;Kh.clear(),Xh.clear(),Qh.clear();for(const{added:l,removed:u}of i){if(l)if(Qh.size===0&&Xh.size===0)for(const h of l)Kh.add(h);else for(const h of l)Xh.has(h)?(Qh.add(h),Xh.delete(h)):Qh.has(h)||Kh.add(h);if(u)if(Qh.size===0&&Kh.size===0)for(const h of u)Xh.add(h);else for(const h of u)Kh.has(h)?Kh.delete(h):(Qh.delete(h),Xh.add(h))}const n=Bs.acquire();Kh.forEach(l=>{n.push(l)});const r=Bs.acquire();Xh.forEach(l=>{r.push(l)});const s=this._items,o=e.items,a=Bs.acquire();if(Qh.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),e.listeners&&(n.length||r.length||a.length)){const l={target:this,added:n,removed:r,moved:a},u=e.listeners.length;for(let h=0;h<u;h++){const p=e.listeners[h];p.removed||p.callback.call(this,l)}}Bs.release(n),Bs.release(r),Bs.release(a)}Kh.clear(),Xh.clear(),Qh.clear()}};hy.ofType=t=>{if(!t)return Yd;if(G3.has(t))return G3.get(t);let e=null;if(typeof t=="function")e=t.prototype.declaredClass;else if(t.base)e=t.base.prototype.declaredClass;else for(const n in t.typeMap){const r=t.typeMap[n].prototype.declaredClass;e?e+=` | ${r}`:e=r}let i=class extends Yd{};return c([Z8({Type:t,ensureType:typeof t=="function"?Ht(t):Nu(t)})],i.prototype,"itemType",void 0),i=c([O(`esri.core.Collection<${e}>`)],i),G3.set(t,i),i},c([d()],hy.prototype,"length",void 0),c([d()],hy.prototype,"items",null),hy=Yd=c([O("esri.core.Collection")],hy);const we=hy;var im;function cae(t,e){switch(t.type){case"range":{const i="range"in t?t.range[0]:t.minValue,n="range"in t?t.range[1]:t.maxValue;if(i!=null&&+e<i||n!=null&&+e>n)return im.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(t.codedValues==null||t.codedValues.every(i=>i==null||i.code!==e))return im.INVALID_CODED_VALUE}return null}function uae(t){if(!(!t||t.type!=="range"))return{min:"range"in t?t.range[0]:t.minValue,max:"range"in t?t.range[1]:t.maxValue}}(function(t){t.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",t.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(im||(im={}));const Wke=se.getLogger("esri.support.arcadeOnDemand");let q3;function Rc(){return q3||(q3=(async()=>{const t=await q(()=>import("./arcadeUtils-293d89c6.js").then(e=>e.aw),["assets/arcadeUtils-293d89c6.js","assets/number-a7a9d67b.js","assets/arcadeTimeUtils-9cac350a.js"]);return{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}})()),q3}const ygt=(t,e,i)=>X8.create(t,e,i,null,["$feature"]),vgt=(t,e,i)=>X8.create(t,e,i,null,["$feature","$view"]),Jke=(t,e,i,n)=>X8.create(t,e,i,n,["$feature","$view"]);let X8=class dae{constructor(e,i,n,r,s,o,a){this.script=e,this.evaluate=r;const l=Array.isArray(o)?o:o.fields;this.fields=l,this._syntaxTree=n,this._arcade=i,this._arcadeFeature=s,this._spatialReference=a,this._referencesGeometry=i.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,i,n,r,s,o){const{arcade:a,Feature:l,Dictionary:u}=await Rc(),h=Ge.fromJSON(i);let p;try{p=a.parseScript(e,o)}catch(D){return Wke.error(new N("arcade-bad-expression","Failed to parse arcade script",{script:e,error:D})),null}const f=s.reduce((D,z)=>({...D,[z]:null}),{});let g=null;A(r)&&(g=new u(r),g.immutable=!0,f.$config=null);const v=a.scriptUsesGeometryEngine(p),b=v&&a.enableGeometrySupport(),_=a.scriptUsesFeatureSet(p)&&a.enableFeatureSetSupport(),w=a.scriptIsAsync(p),S=w&&a.enableAsyncSupport(),C={vars:f,spatialReference:h,useAsync:!!S};await Promise.all([b,_,S]);const $=new Set;await a.loadDependentModules($,p,null,w,v);const M=new u;M.immutable=!1,M.setField("scale",0);const P=a.compileScript(p,C),k=D=>("$view"in D&&D.$view&&(M.setField("scale",typeof D.$view=="object"?D.$view.scale:void 0),D.$view=M),g&&(D.$config=g),P({vars:D,spatialReference:h}));return new dae(e,a,p,k,new l,n,h)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}};const Yke=/^([0-9])/,Zke=/[^a-z0-9_\u0080-\uffff]/gi,Kke=/_{2,}/g,Xke=/^_/,Qke=/_$/;function e$e(t){return t==null?null:t.trim().replace(Zke,"_").replace(Kke,"_").replace(Xke,"").replace(Qke,"").replace(Yke,"F$1")||null}const t$e=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],i$e=["field","normalizationField"];function TW(t,e){if(t!=null&&e!=null){for(const i of Array.isArray(t)?t:[t])if(kW(t$e,i,e),"visualVariables"in i&&i.visualVariables)for(const n of i.visualVariables)kW(i$e,n,e)}}function kW(t,e,i){if(t)for(const n of t){const r=rh(n,e),s=r&&typeof r!="function"&&i.get(r);s&&rr(n,s.name,e)}}function hae(t,e){var i;if(t!=null&&((i=e==null?void 0:e.fields)!=null&&i.length))if("startField"in t){const n=e.get(t.startField),r=e.get(t.endField);t.startField=(n==null?void 0:n.name)??null,t.endField=(r==null?void 0:r.name)??null}else{const n=e.get(t.startTimeField),r=e.get(t.endTimeField);t.startTimeField=(n==null?void 0:n.name)??null,t.endTimeField=(r==null?void 0:r.name)??null}}const W3=new Set;function Q8(t,e){return t&&e?(W3.clear(),_C(W3,t,e),Array.from(W3).sort()):[]}function _C(t,e,i){var n;if(i)if((n=e==null?void 0:e.fields)!=null&&n.length)if(i.includes("*"))for(const{name:r}of e.fields)t.add(r);else for(const r of i)Sa(t,e,r);else{if(i.includes("*"))return t.clear(),void t.add("*");for(const r of i)r!=null&&t.add(r)}}function Sa(t,e,i){if(typeof i=="string")if(e){const n=e.get(i);n&&t.add(n.name)}else t.add(i)}function bgt(t,e){return U(e)||U(t)?[]:e.includes("*")?(t.fields??[]).map(i=>i.name):e}async function Js(t,e,i){var s;if(!i)return;const{arcadeUtils:n}=await Rc(),r=n.extractFieldNames(i,(s=e==null?void 0:e.fields)==null?void 0:s.map(o=>o.name));for(const o of r)Sa(t,e,o)}async function pae(t,e,i){if(i&&i!=="1=1"){const n=(await q(()=>Promise.resolve().then(()=>jve),void 0)).WhereClause.create(i,e);if(!n.isStandardized)throw new N("fieldUtils:collectFilterFields","Where clause is not standardized",{where:i});_C(t,e,n.fieldNames)}}function n$e({displayField:t,fields:e}){return t||(e&&e.length?J3(e,"name-or-title")||J3(e,"unique-identifier")||J3(e,"type-or-category")||r$e(e):null)}function r$e(t){for(const e of t){if(!e||!e.name)continue;const i=e.name.toLowerCase();if(i.includes("name")||i.includes("title"))return e.name}return null}function J3(t,e){for(const i of t)if(i&&i.valueType&&i.valueType===e)return i.name;return null}async function _gt(t,e){var n;if(!e)return;const i=(n=e.elevationInfo)==null?void 0:n.featureExpressionInfo;return i?i.collectRequiredFields(t,e.fieldsIndex):void 0}function s$e(t,e,i){i.onStatisticExpression?Js(t,e,i.onStatisticExpression.expression):t.add(i.onStatisticField)}async function wgt(t,e,i){if(!e||!i||!("fields"in i))return;const n=[],r=i.popupTemplate;n.push(o$e(t,e,r)),i.fields&&n.push(...i.fields.map(async s=>s$e(t,e.fieldsIndex,s))),await Promise.all(n)}async function o$e(t,e,i){const n=[];i!=null&&i.expressionInfos&&n.push(...i.expressionInfos.map(s=>Js(t,e.fieldsIndex,s.expression)));const r=i==null?void 0:i.content;if(Array.isArray(r))for(const s of r)s.type==="expression"&&s.expressionInfo&&n.push(Js(t,e.fieldsIndex,s.expressionInfo.expression));await Promise.all(n)}async function xgt(t,e,i){e&&(e.timeInfo&&A(i)&&i.timeExtent&&_C(t,e.fieldsIndex,[e.timeInfo.startField,e.timeInfo.endField]),e.floorInfo&&_C(t,e.fieldsIndex,[e.floorInfo.floorField]),A(i)&&A(i.where)&&await pae(t,e.fieldsIndex,i.where))}async function Sgt(t,e,i){e&&i&&await Promise.all(i.map(n=>a$e(t,e,n)))}async function a$e(t,e,i){e&&i&&(i.valueExpression?await Js(t,e.fieldsIndex,i.valueExpression):i.field&&Sa(t,e.fieldsIndex,i.field))}function l$e(t){if(!t)return[];const e="editFieldsInfo"in t&&t.editFieldsInfo;return e?Q8(t.fieldsIndex,[e&&e.creatorField,e&&e.creationDateField,e&&e.editorField,e&&e.editDateField]):[]}function c$e(t){if(!t)return[];const e=t.geometryFieldsInfo;return e?Q8(t.fieldsIndex,[e.shapeAreaField,e.shapeLengthField]):[]}async function Egt(t,e){const{labelingInfo:i,fieldsIndex:n}=e;i&&i.length&&await Promise.all(i.map(r=>u$e(t,n,r)))}async function u$e(t,e,i){if(!i)return;const n=i.getLabelExpression(),r=i.where;if(n.type==="arcade")await Js(t,e,n.expression);else{const s=n.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{Sa(t,e,o.slice(1,-1))})}await pae(t,e,r)}function d$e(t){const e=t.defaultValue;return e!==void 0&&gae(t,e)?e:t.nullable?null:void 0}function fae(t){return typeof t=="number"&&!isNaN(t)&&isFinite(t)}function h$e(t){return t===null||fae(t)}const e9="isInteger"in Number?Number.isInteger:t=>typeof t=="number"&&isFinite(t)&&Math.floor(t)===t;function p$e(t){return t===null||e9(t)}function mae(t){return t!=null&&typeof t=="string"}function f$e(t){return t===null||mae(t)}function m$e(){return!0}function gae(t,e){let i;switch(t.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=t.nullable?p$e:e9;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=t.nullable?h$e:fae;break;case"string":case"esriFieldTypeString":i=t.nullable?f$e:mae;break;default:i=m$e}return arguments.length===1?i:i(e)}const g$e=["integer","small-integer","single","double"],y$e=new Set([...g$e,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function _c(t){return t!=null&&y$e.has(t.type)}function wC(t){return t!=null&&(t.type==="string"||t.type==="esriFieldTypeString")}function $W(t){return t!=null&&(t.type==="date"||t.type==="esriFieldTypeDate")}var xC,aw;function Cgt(t){return t==null||typeof t=="number"&&isNaN(t)?null:t}function v$e(t,e){return t==null||t.nullable&&e===null?null:_c(t)&&!b$e(t.type,Number(e))?xC.OUT_OF_RANGE:gae(t,e)?t.domain?cae(t.domain,e):null:aw.INVALID_TYPE}function b$e(t,e){const i=typeof t=="string"?t9(t):t;if(!i)return!1;const n=i.min,r=i.max;return i.isInteger?e9(e)&&e>=n&&e<=r:e>=n&&e<=r}function _$e(t){return uae(t.domain)||(_c(t)?t9(t.type):void 0)}function t9(t){switch(t){case"esriFieldTypeSmallInteger":case"small-integer":return w$e;case"esriFieldTypeInteger":case"integer":return x$e;case"esriFieldTypeSingle":case"single":return S$e;case"esriFieldTypeDouble":case"double":return E$e}}(function(t){t.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(xC||(xC={})),function(t){t.INVALID_TYPE="type-validation-error::invalid-type"}(aw||(aw={}));const w$e={min:-32768,max:32767,isInteger:!0},x$e={min:-2147483648,max:2147483647,isInteger:!0},S$e={min:-34e37,max:12e37,isInteger:!1},E$e={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Igt(t,e,i){switch(t){case im.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case im.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${e.name}, domain: ${JSON.stringify(e.domain)}`;case aw.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${e.name}, type: ${e.type}, nullable: ${e.nullable}`;case xC.OUT_OF_RANGE:{const{min:n,max:r}=t9(e.type);return`Value ${i} is out of range for the number type - field: ${e.name}, type: ${e.type}, value range is ${n} to ${r}`}}}function C$e(t,e){return!I$e(t,e,null)}function I$e(t,e,i){if(!e||!e.attributes||!t){if(A(i))for(const s of t??[])i.add(s);return!0}const n=e.attributes;let r=!1;for(const s of t)if(!(s in n)){if(r=!0,!A(i))break;i.add(s)}return r}function yae(t){return!!t&&["raster.itempixelvalue","raster.servicepixelvalue"].some(e=>t.toLowerCase().startsWith(e))}let l$=class extends Y{constructor(e){super(e),this.type=null}};c([d({type:["attachments","custom","fields","media","text","expression","relationship"],readOnly:!0,json:{read:!1,write:!0}})],l$.prototype,"type",void 0),l$=c([O("esri.popup.content.Content")],l$);const Sm=l$;var ez;let yg=ez=class extends Sm{constructor(t){super(t),this.description=null,this.displayType="auto",this.title=null,this.type="attachments"}clone(){return new ez({description:this.description,displayType:this.displayType,title:this.title})}};c([d({type:String,json:{write:!0}})],yg.prototype,"description",void 0),c([d({type:["auto","preview","list"],json:{write:!0}})],yg.prototype,"displayType",void 0),c([d({type:String,json:{write:!0}})],yg.prototype,"title",void 0),c([d({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],yg.prototype,"type",void 0),yg=ez=c([O("esri.popup.content.AttachmentsContent")],yg);const SC=yg;var tz;let vg=tz=class extends Sm{constructor(t){super(t),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new tz({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?G(this.outFields):null})}};c([d()],vg.prototype,"creator",void 0),c([d()],vg.prototype,"destroyer",void 0),c([d()],vg.prototype,"outFields",void 0),c([d({type:["custom"],readOnly:!0})],vg.prototype,"type",void 0),vg=tz=c([O("esri.popup.content.CustomContent")],vg);const Em=vg;var iz;let Pv=iz=class extends Y{constructor(t){super(t),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new iz({title:this.title,expression:this.expression})}};c([d({type:String,json:{write:!0}})],Pv.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],Pv.prototype,"expression",void 0),c([d({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],Pv.prototype,"returnType",void 0),Pv=iz=c([O("esri.popup.ElementExpressionInfo")],Pv);const vae=Pv;var nz;let Wx=nz=class extends Sm{constructor(t){super(t),this.expressionInfo=null,this.type="expression"}clone(){var t;return new nz({expressionInfo:(t=this.expressionInfo)==null?void 0:t.clone()})}};c([d({type:vae,json:{write:!0}})],Wx.prototype,"expressionInfo",void 0),c([d({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],Wx.prototype,"type",void 0),Wx=nz=c([O("esri.popup.content.ExpressionContent")],Wx);const i9=Wx;function Ce(t,e={}){const i=t instanceof Fe?t:new Fe(t,e),n={type:(e==null?void 0:e.ignoreUnknown)??1?i.apiValues:String,json:{type:i.jsonValues,read:!(e!=null&&e.readOnly)&&{reader:i.read},write:{writer:i.write}}};return(e==null?void 0:e.readOnly)!==void 0&&(n.readOnly=!!e.readOnly),(e==null?void 0:e.default)!==void 0&&(n.json.default=e.default),(e==null?void 0:e.name)!==void 0&&(n.json.name=e.name),(e==null?void 0:e.nonNullable)!==void 0&&(n.nonNullable=e.nonNullable),d(n)}const EC=kr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});EC.toJSON.bind(EC);const T$e=EC.fromJSON.bind(EC);let mE;var nne,rne;const k$e=((nne=globalThis.esriConfig)==null?void 0:nne.locale)??((rne=globalThis.dojoConfig)==null?void 0:rne.locale);function bae(){var t;return k$e??((t=globalThis.navigator)==null?void 0:t.language)??"en"}function sr(){return mE===void 0&&(mE=bae()),mE}function $$e(t=sr()){var e;return(e=/^([a-zA-Z]{2,3})(?:[_\-]\w+)*$/.exec(t))==null?void 0:e[1].toLowerCase()}const gE=[];function zP(t){return gE.push(t),{remove(){gE.splice(gE.indexOf(t),1)}}}const rz=[];function n9(t){return rz.push(t),{remove(){gE.splice(rz.indexOf(t),1)}}}function A$e(){const t=bae();mE!==t&&(mE=t,[...rz].forEach(e=>{e.call(null,t)}),[...gE].forEach(e=>{e.call(null,t)}))}var sne;(sne=globalThis.addEventListener)==null||sne.call(globalThis,"languagechange",A$e);const qc={year:"numeric",month:"numeric",day:"numeric"},J1={year:"numeric",month:"long",day:"numeric"},Y1={year:"numeric",month:"short",day:"numeric"},Z1={year:"numeric",month:"long",weekday:"long",day:"numeric"},Ga={hour:"numeric",minute:"numeric"},Ol={...Ga,second:"numeric"},r9={"short-date":qc,"short-date-short-time":{...qc,...Ga},"short-date-short-time-24":{...qc,...Ga,hour12:!1},"short-date-long-time":{...qc,...Ol},"short-date-long-time-24":{...qc,...Ol,hour12:!1},"short-date-le":qc,"short-date-le-short-time":{...qc,...Ga},"short-date-le-short-time-24":{...qc,...Ga,hour12:!1},"short-date-le-long-time":{...qc,...Ol},"short-date-le-long-time-24":{...qc,...Ol,hour12:!1},"long-month-day-year":J1,"long-month-day-year-short-time":{...J1,...Ga},"long-month-day-year-short-time-24":{...J1,...Ga,hour12:!1},"long-month-day-year-long-time":{...J1,...Ol},"long-month-day-year-long-time-24":{...J1,...Ol,hour12:!1},"day-short-month-year":Y1,"day-short-month-year-short-time":{...Y1,...Ga},"day-short-month-year-short-time-24":{...Y1,...Ga,hour12:!1},"day-short-month-year-long-time":{...Y1,...Ol},"day-short-month-year-long-time-24":{...Y1,...Ol,hour12:!1},"long-date":Z1,"long-date-short-time":{...Z1,...Ga},"long-date-short-time-24":{...Z1,...Ga,hour12:!1},"long-date-long-time":{...Z1,...Ol},"long-date-long-time-24":{...Z1,...Ol,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":Ga,"long-time":Ol},CC=kr()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});CC.apiValues;CC.toJSON.bind(CC);CC.fromJSON.bind(CC);const M$e={ar:"ar-u-nu-latn-ca-gregory"};let sz=new WeakMap,_ae=r9["short-date-short-time"];function wae(t){const e=t||_ae;let i=sz.get(e);if(!i){const n=sr(),r=M$e[sr()]||n;i=new Intl.DateTimeFormat(r,e),sz.set(e,i)}return i}function Jw(t){return t?r9[t]:null}function Ai(t,e){return wae(e).format(t)}n9(()=>{sz=new WeakMap,_ae=r9["short-date-short-time"]});const O$e={ar:"ar-u-nu-latn"};let c$=new WeakMap,xae={};function P$e(t){const e=t||xae;if(!c$.has(e)){const i=sr(),n=O$e[sr()]||i;c$.set(e,new Intl.NumberFormat(n,t))}return c$.get(e)}function s9(t={}){const e={};return t.digitSeparator!=null&&(e.useGrouping=t.digitSeparator),t.places!=null&&(e.minimumFractionDigits=e.maximumFractionDigits=t.places),e}function Aa(t,e){return t===-0&&(t=0),P$e(e).format(t)}n9(()=>{c$=new WeakMap,xae={}});var oz;let bg=oz=class extends Y{constructor(t){super(t),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new oz({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(t){return this.dateFormat?Ai(t,{...Jw(this.dateFormat),...this.dateTimeFormatOptions}):Aa(t,s9(this))}formatRasterPixelValue(t){if(t.includes("-"))return t;let e,i;return t.trim().includes(",")?(e=",",i=e+" ",this._formatDelimitedString(t,e,i,this)):t.trim().includes(";")?(e=";",i=e+" ",this._formatDelimitedString(t,e,i,this)):t.trim().includes(" ")?(e=i=" ",this._formatDelimitedString(t,e,i,this)):this.format(Number(t))}_formatDelimitedString(t,e,i,n){return t&&e&&i&&n?t.trim().split(e).map(r=>this.format(Number(r))).join(i):t}};c([Ce(EC)],bg.prototype,"dateFormat",void 0),c([d({type:Object,json:{read:!1}})],bg.prototype,"dateTimeFormatOptions",void 0),c([d({type:Boolean,json:{write:!0}})],bg.prototype,"digitSeparator",void 0),c([d({type:Bt,json:{write:!0}})],bg.prototype,"places",void 0),bg=oz=c([O("esri.popup.support.FieldInfoFormat")],bg);const Qb=bg;var az;let Ul=az=class extends Y{constructor(t){super(t),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new az({fieldName:this.fieldName,format:this.format?G(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};c([d({type:String,json:{write:!0}})],Ul.prototype,"fieldName",void 0),c([d({type:Qb,json:{write:!0}})],Ul.prototype,"format",void 0),c([d({type:Boolean,json:{write:!0,default:!1}})],Ul.prototype,"isEditable",void 0),c([d({type:String,json:{write:!0}})],Ul.prototype,"label",void 0),c([Ce(new Fe({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Ul.prototype,"stringFieldOption",void 0),c([d({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Ul.prototype,"statisticType",void 0),c([d({type:String,json:{write:!0}})],Ul.prototype,"tooltip",void 0),c([d({type:Boolean,json:{write:!0}})],Ul.prototype,"visible",void 0),Ul=az=c([O("esri.popup.FieldInfo")],Ul);const Yw=Ul;var lz;let bd=lz=class extends Sm{constructor(t){super(t),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(t,e){e.fieldInfos=t&&t.map(i=>i.toJSON())}clone(){return new lz(G({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};c([d({type:Object,json:{write:!0}})],bd.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],bd.prototype,"description",void 0),c([d({type:[Yw]})],bd.prototype,"fieldInfos",void 0),c([fe("fieldInfos")],bd.prototype,"writeFieldInfos",null),c([d({type:String,json:{write:!0}})],bd.prototype,"title",void 0),c([d({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],bd.prototype,"type",void 0),bd=lz=c([O("esri.popup.content.FieldsContent")],bd);const lw=bd;let _g=class extends Y{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};c([d({type:String,json:{write:!0}})],_g.prototype,"altText",void 0),c([d({type:String,json:{write:!0}})],_g.prototype,"caption",void 0),c([d({type:String,json:{write:!0}})],_g.prototype,"title",void 0),c([d({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],_g.prototype,"type",void 0),_g=c([O("esri.popup.content.mixins.MediaInfo")],_g);const o9=_g;var cz;let Rv=cz=class extends _e{constructor(t){super(t),this.fieldName=null,this.tooltip=null,this.value=null}clone(){return new cz({fieldName:this.fieldName,tooltip:this.tooltip,value:this.value})}};c([d()],Rv.prototype,"fieldName",void 0),c([d()],Rv.prototype,"tooltip",void 0),c([d()],Rv.prototype,"value",void 0),Rv=cz=c([O("esri.popup.content.support.ChartMediaInfoValueSeries")],Rv);const Sae=Rv;var uz;let wg=uz=class extends Y{constructor(t){super(t),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new uz({fields:G(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};c([d({type:[String],json:{write:!0}})],wg.prototype,"fields",void 0),c([d({type:String,json:{write:!0}})],wg.prototype,"normalizeField",void 0),c([d({type:[Sae],json:{read:!1}})],wg.prototype,"series",void 0),c([d({type:String,json:{write:!0}})],wg.prototype,"tooltipField",void 0),wg=uz=c([O("esri.popup.content.support.ChartMediaInfoValue")],wg);const R$e=wg;let Jx=class extends o9{constructor(e){super(e),this.type=null,this.value=null}};c([d({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Jx.prototype,"type",void 0),c([d({type:R$e,json:{write:!0}})],Jx.prototype,"value",void 0),Jx=c([O("esri.popup.content.mixins.ChartMediaInfo")],Jx);const jP=Jx,VP=kr()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var dz;let u$=dz=class extends jP{constructor(t){super(t),this.type="bar-chart"}clone(){return new dz({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:VP.write}})],u$.prototype,"type",void 0),u$=dz=c([O("esri.popup.content.BarChartMediaInfo")],u$);const Eae=u$;var hz;let d$=hz=class extends jP{constructor(t){super(t),this.type="column-chart"}clone(){return new hz({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:VP.write}})],d$.prototype,"type",void 0),d$=hz=c([O("esri.popup.content.ColumnChartMediaInfo")],d$);const Cae=d$;var pz;let Yx=pz=class extends Y{constructor(t){super(t),this.linkURL=null,this.sourceURL=null}clone(){return new pz({linkURL:this.linkURL,sourceURL:this.sourceURL})}};c([d({type:String,json:{write:!0}})],Yx.prototype,"linkURL",void 0),c([d({type:String,json:{write:!0}})],Yx.prototype,"sourceURL",void 0),Yx=pz=c([O("esri.popup.content.support.ImageMediaInfoValue")],Yx);const L$e=Yx;var fz;let Lv=fz=class extends o9{constructor(t){super(t),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new fz({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};c([d({type:Number,json:{write:!0}})],Lv.prototype,"refreshInterval",void 0),c([d({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],Lv.prototype,"type",void 0),c([d({type:L$e,json:{write:!0}})],Lv.prototype,"value",void 0),Lv=fz=c([O("esri.popup.content.ImageMediaInfo")],Lv);const Iae=Lv;var mz;let h$=mz=class extends jP{constructor(t){super(t),this.type="line-chart"}clone(){return new mz({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:VP.write}})],h$.prototype,"type",void 0),h$=mz=c([O("esri.popup.content.LineChartMediaInfo")],h$);const Tae=h$;var gz;let p$=gz=class extends jP{constructor(t){super(t),this.type="pie-chart"}clone(){return new gz({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([d({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:VP.write}})],p$.prototype,"type",void 0),p$=gz=c([O("esri.popup.content.PieChartMediaInfo")],p$);const kae=p$,$ae={base:o9,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":Eae,"column-chart":Cae,"line-chart":Tae,"pie-chart":kae,image:Iae}};var yz;let Bl=yz=class extends Sm{constructor(t){super(t),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(t){return t&&t.map(e=>e.type==="image"?Iae.fromJSON(e):e.type==="barchart"?Eae.fromJSON(e):e.type==="columnchart"?Cae.fromJSON(e):e.type==="linechart"?Tae.fromJSON(e):e.type==="piechart"?kae.fromJSON(e):void 0).filter(Boolean)}writeMediaInfos(t,e){e.mediaInfos=t&&t.map(i=>i.toJSON())}clone(){return new yz(G({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};c([d()],Bl.prototype,"activeMediaInfoIndex",void 0),c([d({type:Object,json:{write:!0}})],Bl.prototype,"attributes",void 0),c([d({type:String,json:{write:!0}})],Bl.prototype,"description",void 0),c([d({types:[$ae]})],Bl.prototype,"mediaInfos",void 0),c([de("mediaInfos")],Bl.prototype,"readMediaInfos",null),c([fe("mediaInfos")],Bl.prototype,"writeMediaInfos",null),c([d({type:String,json:{write:!0}})],Bl.prototype,"title",void 0),c([d({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Bl.prototype,"type",void 0),Bl=yz=c([O("esri.popup.content.MediaContent")],Bl);const IC=Bl;var vz;let Zx=vz=class extends Y{constructor(t){super(t),this.field=null,this.order=null}clone(){return new vz({field:this.field,order:this.order})}};c([d({type:String,json:{write:!0}})],Zx.prototype,"field",void 0),c([d({type:["asc","desc"],json:{write:!0}})],Zx.prototype,"order",void 0),Zx=vz=c([O("esri.popup.support.RelatedRecordsInfoFieldOrder")],Zx);const a9=Zx;let Qc=class extends _t(Sm){constructor(e){super(e),this.description=null,this.displayCount=null,this.displayType="list",this.orderByFields=null,this.relationshipId=null,this.title=null,this.type="relationship"}};c([d({type:String,json:{write:!0}})],Qc.prototype,"description",void 0),c([d({type:Number,json:{type:Bt,write:!0}})],Qc.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:!0}})],Qc.prototype,"displayType",void 0),c([d({type:[a9],json:{write:!0}})],Qc.prototype,"orderByFields",void 0),c([d({type:Number,json:{type:Bt,write:!0}})],Qc.prototype,"relationshipId",void 0),c([d({type:String,json:{write:!0}})],Qc.prototype,"title",void 0),c([d({type:["relationship"],readOnly:!0,json:{read:!1,write:!0}})],Qc.prototype,"type",void 0),Qc=c([O("esri.popup.content.RelationshipContent")],Qc);const SM=Qc;var bz;let Kx=bz=class extends Sm{constructor(t){super(t),this.text=null,this.type="text"}clone(){return new bz({text:this.text})}};c([d({type:String,json:{write:!0}})],Kx.prototype,"text",void 0),c([d({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],Kx.prototype,"type",void 0),Kx=bz=c([O("esri.popup.content.TextContent")],Kx);const cw=Kx,D$e={base:null,key:"type",typeMap:{attachment:SC,media:IC,text:cw,expression:i9,field:lw,relationship:SM}};var _z;let xg=_z=class extends Y{constructor(t){super(t),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new _z({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],xg.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],xg.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],xg.prototype,"expression",void 0),c([d({type:["string","number"],json:{write:!0}})],xg.prototype,"returnType",void 0),xg=_z=c([O("esri.popup.ExpressionInfo")],xg);const Aae=xg;var wz;let Xx=wz=class extends Y{constructor(t){super(t),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new wz({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};c([d({type:Boolean,json:{write:!0}})],Xx.prototype,"returnTopmostRaster",void 0),c([d({type:Boolean,json:{write:!0}})],Xx.prototype,"showNoDataRecords",void 0),Xx=wz=c([O("esri.popup.LayerOptions")],Xx);const F$e=Xx;var xz;let Qx=xz=class extends Y{constructor(t){super(t),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new xz({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?G(this.orderByFields):null})}};c([d({type:Boolean,json:{write:!0}})],Qx.prototype,"showRelatedRecords",void 0),c([d({type:[a9],json:{write:!0}})],Qx.prototype,"orderByFields",void 0),Qx=xz=c([O("esri.popup.RelatedRecordsInfo")],Qx);const N$e=Qx;let Mae=0;const F0=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+Mae++})}};return e=c([O("esri.core.Identifiable")],e),e},l9=t=>{let e=class extends t{constructor(...i){super(...i),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Mae++})}};return e=c([O("esri.core.NumericIdentifiable")],e),e};let AW=class extends F0(class{}){};AW=c([O("esri.core.Identifiable")],AW);var Sz;let Hl=Sz=class extends F0(_e){constructor(t){super(t),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new Sz({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};c([d()],Hl.prototype,"active",void 0),c([d()],Hl.prototype,"className",void 0),c([d()],Hl.prototype,"disabled",void 0),c([d()],Hl.prototype,"id",void 0),c([d()],Hl.prototype,"indicator",void 0),c([d()],Hl.prototype,"title",void 0),c([d()],Hl.prototype,"type",void 0),c([d()],Hl.prototype,"visible",void 0),Hl=Sz=c([O("esri.support.actions.ActionBase")],Hl);const UP=Hl;var Ez;let f$=Ez=class extends UP{constructor(t){super(t),this.image=null,this.type="button"}clone(){return new Ez({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};c([d()],f$.prototype,"image",void 0),f$=Ez=c([O("esri.support.Action.ActionButton")],f$);const Zw=f$;var Cz;let eS=Cz=class extends UP{constructor(t){super(t),this.image=null,this.type="toggle",this.value=!1}clone(){return new Cz({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};c([d()],eS.prototype,"image",void 0),c([d()],eS.prototype,"value",void 0),eS=Cz=c([O("esri.support.Action.ActionToggle")],eS);const Oae=eS,z$e="esri.PopupTemplate",j$e=se.getLogger(z$e),K1="relationships/",MW="expression/",V$e=we.ofType({key:"type",defaultKeyValue:"button",base:UP,typeMap:{button:Zw,toggle:Oae}}),U$e={base:Sm,key:"type",typeMap:{media:IC,custom:Em,text:cw,attachments:SC,fields:lw,expression:i9,relationship:SM}},B$e=["attachments","fields","media","text","expression","relationship"];let Gn=class extends _t(Y){constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title=""}castContent(e){return Array.isArray(e)?e.map(i=>Nu(U$e,i)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||zh(e)?e:(j$e.error("content error","unsupported content value",{value:e}),null)}readContent(e,i){const{popupElements:n}=i;return Array.isArray(n)&&n.length>0?this._readPopupInfoElements(i.description,i.mediaInfos,n):this._readPopupInfo(i)}writeContent(e,i,n,r){typeof e!="string"?Array.isArray(e)&&(i.popupElements=e.filter(s=>B$e.includes(s.type)).map(s=>s&&s.toJSON(r)),i.popupElements.forEach(s=>{s.type==="attachments"?this._writeAttachmentContent(i):s.type==="media"?this._writeMediaContent(s,i):s.type==="text"?this._writeTextContent(s,i):s.type==="relationship"&&this._writeRelationshipContent(s,i)})):i.description=e}writeFieldInfos(e,i,n,r){const{content:s}=this,o=Array.isArray(s)?s:null;if(e){const a=o?o.filter(u=>u.type==="fields"):[],l=a.length&&a.every(u=>{var h;return(h=u.fieldInfos)==null?void 0:h.length});i.fieldInfos=e.filter(Boolean).map(u=>{const h=u.toJSON(r);return l&&(h.visible=!1),h})}if(o)for(const a of o)a.type==="fields"&&this._writeFieldsContent(a,i)}writeLayerOptions(e,i,n,r){i[n]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(r)}writeTitle(e,i){i.title=e||""}async collectRequiredFields(e,i){const n=this.expressionInfos||[];await this._collectExpressionInfoFields(e,i,[...n,...this._getContentExpressionInfos(this.content,n)]),_C(e,i,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const i=new Set;return await this.collectRequiredFields(i,e),[...i].sort()}_writeFieldsContent(e,i){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const n=G(e.fieldInfos);Array.isArray(i.fieldInfos)?n.forEach(r=>{const s=i.fieldInfos.find(o=>o.fieldName.toLowerCase()===r.fieldName.toLowerCase());s?s.visible=!0:i.fieldInfos.push(r)}):i.fieldInfos=n}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeRelationshipContent(e,i){var s,o;const n=((s=e.orderByFields)==null?void 0:s.map(a=>this._toFieldOrderJSON(a,e.relationshipId)))||[],r=[...((o=i.relatedRecordsInfo)==null?void 0:o.orderByFields)||[],...n];i.relatedRecordsInfo={showRelatedRecords:!0,...(r==null?void 0:r.length)&&{orderByFields:r}}}_writeTextContent(e,i){!i.description&&e.text&&(i.description=e.text)}_writeMediaContent(e,i){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const n=G(e.mediaInfos);Array.isArray(i.mediaInfos)?i.mediaInfos=[...i.mediaInfos,...n]:i.mediaInfos=n}_readPopupInfoElements(e,i,n){const r={description:!1,mediaInfos:!1};return n.map(s=>s.type==="media"?(s.mediaInfos||!i||r.mediaInfos||(s.mediaInfos=i,r.mediaInfos=!0),IC.fromJSON(s)):s.type==="text"?(s.text||!e||r.description||(s.text=e,r.description=!0),cw.fromJSON(s)):s.type==="attachments"?SC.fromJSON(s):s.type==="fields"?lw.fromJSON(s):s.type==="expression"?i9.fromJSON(s):s.type==="relationship"?SM.fromJSON(s):void 0).filter(Boolean)}_toRelationshipContent(e){const{field:i,order:n}=e;if(!(i!=null&&i.startsWith(K1)))return null;const r=i.replace(K1,"").split("/");if(r.length!==2)return null;const s=parseInt(r[0],10),o=r[1];return typeof s=="number"&&o?SM.fromJSON({relationshipId:s,orderByFields:[{field:o,order:n}]}):null}_toFieldOrderJSON(e,i){const{order:n,field:r}=e;return{field:`${K1}${i}/${r}`,order:n}}_readPopupInfo({description:e,mediaInfos:i,showAttachments:n,relatedRecordsInfo:r={showRelatedRecords:!1}}){const s=[];e?s.push(new cw({text:e})):s.push(new lw),Array.isArray(i)&&i.length&&s.push(IC.fromJSON({mediaInfos:i})),n&&s.push(SC.fromJSON({displayType:"auto"}));const{showRelatedRecords:o,orderByFields:a}=r;return o&&(a!=null&&a.length)&&a.forEach(l=>{const u=this._toRelationshipContent(l);u&&s.push(u)}),s.length?s:e}_getContentElementFields(e){const i=e==null?void 0:e.type;if(i==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(i==="custom")return e.outFields||[];if(i==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos??this.fieldInfos)];if(i==="media"){const n=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...n.reduce((r,s)=>[...r,...this._getMediaInfoFields(s)],[])]}return i==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:i,title:n,value:r}=e,s=r||{},{fields:o,normalizeField:a,tooltipField:l,sourceURL:u,linkURL:h}=s,p=[...this._extractFieldNames(n),...this._extractFieldNames(i),...this._extractFieldNames(u),...this._extractFieldNames(h),...o??[]];return a&&p.push(a),l&&p.push(l),p}_getContentExpressionInfos(e,i){return Array.isArray(e)?e.reduce((n,r)=>[...n,...r.type==="expression"&&r.expressionInfo?[r.expressionInfo]:[]],i):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((i,n)=>[...i,...this._getContentElementFields(n)],[]):[]}async _collectExpressionInfoFields(e,i,n){n&&await Promise.all(n.map(r=>Js(e,i,r.expression)))}_getFieldInfoFields(e){return e?e.filter(i=>i.visible===void 0||!!i.visible).map(i=>i.fieldName).filter(i=>!i.startsWith(K1)&&!i.startsWith(MW)):[]}_getActionsFields(e){return e?e.toArray().reduce((i,n)=>[...i,...this._getActionFields(n)],[]):[]}_getActionFields(e){const{className:i,title:n,type:r}=e,s=r==="button"||r==="toggle"?e.image:"";return[...this._extractFieldNames(n),...this._extractFieldNames(i),...this._extractFieldNames(s)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const i=/{[^}]*}/g,n=e.match(i);if(!n)return[];const r=/\{(\w+):.+\}/,s=n.filter(o=>!(o.indexOf(`{${K1}`)===0||o.indexOf(`{${MW}`)===0)).map(o=>o.replace(r,"{$1}"));return s?s.map(o=>o.slice(1,-1)):[]}};c([d({type:V$e})],Gn.prototype,"actions",void 0),c([d()],Gn.prototype,"content",void 0),c([st("content")],Gn.prototype,"castContent",null),c([de("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments","relatedRecordsInfo"])],Gn.prototype,"readContent",null),c([fe("content",{popupElements:{type:we.ofType(D$e)},showAttachments:{type:Boolean},mediaInfos:{type:we.ofType($ae)},description:{type:String},relatedRecordsInfo:{type:N$e}})],Gn.prototype,"writeContent",null),c([d({type:[Aae],json:{write:!0}})],Gn.prototype,"expressionInfos",void 0),c([d({type:[Yw]})],Gn.prototype,"fieldInfos",void 0),c([fe("fieldInfos")],Gn.prototype,"writeFieldInfos",null),c([d({type:F$e})],Gn.prototype,"layerOptions",void 0),c([fe("layerOptions")],Gn.prototype,"writeLayerOptions",null),c([d({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],Gn.prototype,"lastEditInfoEnabled",void 0),c([d()],Gn.prototype,"outFields",void 0),c([d()],Gn.prototype,"overwriteActions",void 0),c([d()],Gn.prototype,"returnGeometry",void 0),c([d({json:{type:String}})],Gn.prototype,"title",void 0),c([fe("title")],Gn.prototype,"writeTitle",null),Gn=c([O("esri.PopupTemplate")],Gn);const Cm=Gn,EM={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Pae(t){return EM[t]||EM[t.toLowerCase()]}function c9(t){return EM[t]??EM[t.toLowerCase()]}function H$e(t){return[...c9(t)]}function Y3(t,e,i){i<0&&++i,i>1&&--i;const n=6*i;return n<1?t+(e-t)*n:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}function Rae(t,e,i,n=1){const r=(t%360+360)%360/360,s=i<=.5?i*(e+1):i+e-i*e,o=2*i-s;return[Math.round(255*Y3(o,s,r+1/3)),Math.round(255*Y3(o,s,r)),Math.round(255*Y3(o,s,r-1/3)),n]}function G$e(t){const e=t.length>5,i=e?8:4,n=(1<<i)-1,r=e?1:17,s=e?t.length===9:t.length===5;let o=Number("0x"+t.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&n,o>>=i,a[3]=r*l/255),l=o&n,o>>=i,a[2]=r*l,l=o&n,o>>=i,a[1]=r*l,l=o&n,o>>=i,a[0]=r*l,a}function Et(){return[0,0,0]}function $h(t){return[t[0],t[1],t[2]]}function Ro(t,e,i){return[t,e,i]}function q$e(t){const e=Et(),i=Math.min(3,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function W$e(t,e){return new Float64Array(t,e,3)}function Lae(){return Et()}function Dae(){return Ro(1,1,1)}function Fae(){return Ro(1,0,0)}function Nae(){return Ro(0,1,0)}function zae(){return Ro(0,0,1)}const J$e=Lae(),jae=Dae(),Y$e=Fae(),Z$e=Nae(),K$e=zae();Object.freeze(Object.defineProperty({__proto__:null,ONES:jae,UNIT_X:Y$e,UNIT_Y:Z$e,UNIT_Z:K$e,ZEROS:J$e,clone:$h,create:Et,createView:W$e,fromArray:q$e,fromValues:Ro,ones:Dae,unitX:Fae,unitY:Nae,unitZ:zae,zeros:Lae},Symbol.toStringTag,{value:"Module"}));let u9=1e-6;function Ra(){return u9}function X$e(t){u9=t}const BP=Math.random,Q$e=Math.PI/180,eAe=180/Math.PI;function d9(t){return t*Q$e}function tAe(t){return t*eAe}function iAe(t,e){return Math.abs(t-e)<=u9*Math.max(1,Math.abs(t),Math.abs(e))}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:BP,equals:iAe,getEpsilon:Ra,setEpsilon:X$e,toDegree:tAe,toRadian:d9},Symbol.toStringTag,{value:"Module"}));function h9(t){const e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)}function TC(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ah(t,e,i,n){return t[0]=e,t[1]=i,t[2]=n,t}function Vae(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function HP(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function Uae(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t}function Bae(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t}function nAe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function rAe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function sAe(t,e){return t[0]=Math.abs(e[0]),t[1]=Math.abs(e[1]),t[2]=Math.abs(e[2]),t}function oAe(t,e){return t[0]=Math.sign(e[0]),t[1]=Math.sign(e[1]),t[2]=Math.sign(e[2]),t}function aAe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t}function lAe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t}function cAe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function Hae(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function qf(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t}function p9(t,e){const i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(i*i+n*n+r*r)}function kC(t,e){const i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2];return i*i+n*n+r*r}function Gae(t){const e=t[0],i=t[1],n=t[2];return e*e+i*i+n*n}function uAe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function dAe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Iz(t,e){const i=e[0],n=e[1],r=e[2];let s=i*i+n*n+r*r;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s),t}function cl(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function CM(t,e,i){const n=e[0],r=e[1],s=e[2],o=i[0],a=i[1],l=i[2];return t[0]=r*l-s*a,t[1]=s*o-n*l,t[2]=n*a-r*o,t}function qae(t,e,i,n){const r=e[0],s=e[1],o=e[2];return t[0]=r+n*(i[0]-r),t[1]=s+n*(i[1]-s),t[2]=o+n*(i[2]-o),t}function hAe(t,e,i,n,r,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,u=o*(s-1),h=o*(3-2*s);return t[0]=e[0]*a+i[0]*l+n[0]*u+r[0]*h,t[1]=e[1]*a+i[1]*l+n[1]*u+r[1]*h,t[2]=e[2]*a+i[2]*l+n[2]*u+r[2]*h,t}function pAe(t,e,i,n,r,s){const o=1-s,a=o*o,l=s*s,u=a*o,h=3*s*a,p=3*l*o,f=l*s;return t[0]=e[0]*u+i[0]*h+n[0]*p+r[0]*f,t[1]=e[1]*u+i[1]*h+n[1]*p+r[1]*f,t[2]=e[2]*u+i[2]*h+n[2]*p+r[2]*f,t}function fAe(t,e){e=e||1;const i=BP,n=2*i()*Math.PI,r=2*i()-1,s=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*s,t[1]=Math.sin(n)*s,t[2]=r*e,t}function mAe(t,e,i){const n=e[0],r=e[1],s=e[2];return t[0]=i[0]*n+i[4]*r+i[8]*s+i[12],t[1]=i[1]*n+i[5]*r+i[9]*s+i[13],t[2]=i[2]*n+i[6]*r+i[10]*s+i[14],t}function gAe(t,e,i){const n=e[0],r=e[1],s=e[2];return t[0]=n*i[0]+r*i[3]+s*i[6],t[1]=n*i[1]+r*i[4]+s*i[7],t[2]=n*i[2]+r*i[5]+s*i[8],t}function yAe(t,e,i){const n=i[0],r=i[1],s=i[2],o=i[3],a=e[0],l=e[1],u=e[2];let h=r*u-s*l,p=s*a-n*u,f=n*l-r*a,g=r*f-s*p,v=s*h-n*f,b=n*p-r*h;const _=2*o;return h*=_,p*=_,f*=_,g*=2,v*=2,b*=2,t[0]=a+h+g,t[1]=l+p+v,t[2]=u+f+b,t}function vAe(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[0],s[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),s[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function bAe(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),s[1]=r[1],s[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function _Ae(t,e,i,n){const r=[],s=[];return r[0]=e[0]-i[0],r[1]=e[1]-i[1],r[2]=e[2]-i[2],s[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),s[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),s[2]=r[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function wAe(t,e){TC(rT,t),TC(sT,e),Iz(rT,rT),Iz(sT,sT);const i=cl(rT,sT);return i>1?0:i<-1?Math.PI:Math.acos(i)}const rT=Et(),sT=Et();function xAe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Fn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function SAe(t,e){if(t===e)return!0;const i=t[0],n=t[1],r=t[2],s=e[0],o=e[1],a=e[2],l=Ra();return Math.abs(i-s)<=l*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-o)<=l*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=l*Math.max(1,Math.abs(r),Math.abs(a))}function EAe(t,e,i){const n=i[0]-e[0],r=i[1]-e[1],s=i[2]-e[2];let o=n*n+r*r+s*s;return o>0?(o=1/Math.sqrt(o),t[0]=n*o,t[1]=r*o,t[2]=s*o,t):(t[0]=0,t[1]=0,t[2]=0,t)}const ya=HP,CAe=Uae,IAe=Bae,TAe=p9,kAe=kC,$Ae=h9,IM=Gae;Object.freeze(Object.defineProperty({__proto__:null,abs:sAe,add:Vae,angle:wAe,bezier:pAe,ceil:nAe,copy:TC,cross:CM,direction:EAe,dist:TAe,distance:p9,div:IAe,divide:Bae,dot:cl,equals:SAe,exactEquals:Fn,floor:rAe,hermite:hAe,inverse:dAe,len:$Ae,length:h9,lerp:qae,max:lAe,min:aAe,mul:CAe,multiply:Uae,negate:uAe,normalize:Iz,random:fAe,rotateX:vAe,rotateY:bAe,rotateZ:_Ae,round:cAe,scale:Hae,scaleAndAdd:qf,set:Ah,sign:oAe,sqrDist:kAe,sqrLen:IM,squaredDistance:kC,squaredLength:Gae,str:xAe,sub:ya,subtract:HP,transformMat3:gAe,transformMat4:mAe,transformQuat:yAe},Symbol.toStringTag,{value:"Module"}));function AAe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function MAe(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}function OAe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t}function Wae(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t}function Jae(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t[2]=e[2]*i[2],t[3]=e[3]*i[3],t}function Yae(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t[2]=e[2]/i[2],t[3]=e[3]/i[3],t}function PAe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function RAe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function LAe(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t[2]=Math.min(e[2],i[2]),t[3]=Math.min(e[3],i[3]),t}function DAe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t[2]=Math.max(e[2],i[2]),t[3]=Math.max(e[3],i[3]),t}function FAe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function NAe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t}function zAe(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t}function Zae(t,e){const i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],s=e[3]-t[3];return Math.sqrt(i*i+n*n+r*r+s*s)}function Kae(t,e){const i=e[0]-t[0],n=e[1]-t[1],r=e[2]-t[2],s=e[3]-t[3];return i*i+n*n+r*r+s*s}function Xae(t){const e=t[0],i=t[1],n=t[2],r=t[3];return Math.sqrt(e*e+i*i+n*n+r*r)}function Qae(t){const e=t[0],i=t[1],n=t[2],r=t[3];return e*e+i*i+n*n+r*r}function jAe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function VAe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function UAe(t,e){const i=e[0],n=e[1],r=e[2],s=e[3];let o=i*i+n*n+r*r+s*s;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=n*o,t[2]=r*o,t[3]=s*o),t}function BAe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function ele(t,e,i,n){const r=e[0],s=e[1],o=e[2],a=e[3];return t[0]=r+n*(i[0]-r),t[1]=s+n*(i[1]-s),t[2]=o+n*(i[2]-o),t[3]=a+n*(i[3]-a),t}function HAe(t,e){const i=BP;let n,r,s,o,a,l;e=e||1;do n=2*i()-1,r=2*i()-1,a=n*n+r*r;while(a>=1);do s=2*i()-1,o=2*i()-1,l=s*s+o*o;while(l>=1);const u=Math.sqrt((1-a)/l);return t[0]=e*n,t[1]=e*r,t[2]=e*s*u,t[3]=e*o*u,t}function GAe(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3];return t[0]=i[0]*n+i[4]*r+i[8]*s+i[12]*o,t[1]=i[1]*n+i[5]*r+i[9]*s+i[13]*o,t[2]=i[2]*n+i[6]*r+i[10]*s+i[14]*o,t[3]=i[3]*n+i[7]*r+i[11]*s+i[15]*o,t}function qAe(t,e,i){const n=e[0],r=e[1],s=e[2],o=i[0],a=i[1],l=i[2],u=i[3],h=u*n+a*s-l*r,p=u*r+l*n-o*s,f=u*s+o*r-a*n,g=-o*n-a*r-l*s;return t[0]=h*u+g*-o+p*-l-f*-a,t[1]=p*u+g*-a+f*-o-h*-l,t[2]=f*u+g*-l+h*-a-p*-o,t[3]=e[3],t}function WAe(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function JAe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function YAe(t,e){const i=t[0],n=t[1],r=t[2],s=t[3],o=e[0],a=e[1],l=e[2],u=e[3],h=Ra();return Math.abs(i-o)<=h*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=h*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=h*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(s-u)<=h*Math.max(1,Math.abs(s),Math.abs(u))}const ZAe=Wae,KAe=Jae,XAe=Yae,QAe=Zae,eMe=Kae,tMe=Xae,iMe=Qae;Object.freeze(Object.defineProperty({__proto__:null,add:OAe,ceil:PAe,copy:AAe,dist:QAe,distance:Zae,div:XAe,divide:Yae,dot:BAe,equals:YAe,exactEquals:JAe,floor:RAe,inverse:VAe,len:tMe,length:Xae,lerp:ele,max:DAe,min:LAe,mul:KAe,multiply:Jae,negate:jAe,normalize:UAe,random:HAe,round:FAe,scale:NAe,scaleAndAdd:zAe,set:MAe,sqrDist:eMe,sqrLen:iMe,squaredDistance:Kae,squaredLength:Qae,str:WAe,sub:ZAe,subtract:Wae,transformMat4:GAe,transformQuat:qAe},Symbol.toStringTag,{value:"Module"}));const OW=new Float32Array(1);function Pgt(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function zo(t,e,i){return Math.min(Math.max(t,e),i)}function Rgt(t){return(t&t-1)==0}function Lgt(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function Dgt(t,e,i){return t+(e-t)*i}function nMe(t){return t*Math.PI/180}function tle(t){return 180*t/Math.PI}function Fgt(t,e=1e-6){return(t<0?-1:1)/Math.max(Math.abs(t),e)}function Ngt(t){return Math.acos(zo(t,-1,1))}function ile(t){return Math.asin(zo(t,-1,1))}function k_(t,e,i=1e-6){return t===e?!0:!Number.isFinite(t)||!Number.isFinite(e)?!1:(t>e?t-e:e-t)<=i}const TM=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT));function rMe(t){return TM.setFloat64(0,t),TM.getBigInt64(0)}function sMe(t){return TM.setBigInt64(0,t),TM.getFloat64(0)}const Z3=BigInt("1000000");oMe(1);function oMe(t){const e=rMe(t=Math.abs(t)),i=sMe(e<=Z3?Z3:e-Z3);return Math.abs(t-i)}function zgt(t,e,i=1e-6){if(t===e)return!0;if(!Number.isFinite(t)||!Number.isFinite(e))return!1;const n=Math.abs(t-e),r=Math.abs(t),s=Math.abs(e);if(t===0||e===0||r<1e-12&&s<1e-12){if(n>.01*i)return!1}else if(n/(r+s)>i)return!1;return!0}function jgt(t){return nle(Math.max(-PW,Math.min(t,PW)))}function nle(t){return OW[0]=t,OW[0]}function Vgt(t,e){const i=h9(t),n=ile(t[2]/i),r=Math.atan2(t[1]/i,t[0]/i);return Ah(e,i,n,r),e}function Ugt(t){const e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[3]*t[3]+t[4]*t[4]+t[5]*t[5],n=t[6]*t[6]+t[7]*t[7]+t[8]*t[8];return!(k_(e,1)&&k_(i,1)&&k_(n,1))}const PW=nle(34028234663852886e22);function oT(t){return zo(k8(t),0,255)}function aT(t,e,i){return t=Number(t),isNaN(t)?i:t<e?e:t>i?i:t}let m$=class Lr{static blendColors(e,i,n,r=new Lr){return r.r=Math.round(e.r+(i.r-e.r)*n),r.g=Math.round(e.g+(i.g-e.g)*n),r.b=Math.round(e.b+(i.b-e.b)*n),r.a=e.a+(i.a-e.a)*n,r._sanitize()}static fromRgb(e,i){const n=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(n){const r=n[2].split(/\s*,\s*/),s=n[1];if(s==="rgb"&&r.length===3||s==="rgba"&&r.length===4){const o=r[0];if(o.charAt(o.length-1)==="%"){const a=r.map(l=>2.56*parseFloat(l));return r.length===4&&(a[3]=parseFloat(r[3])),Lr.fromArray(a,i)}return Lr.fromArray(r.map(a=>parseFloat(a)),i)}if(s==="hsl"&&r.length===3||s==="hsla"&&r.length===4)return Lr.fromArray(Rae(parseFloat(r[0]),parseFloat(r[1])/100,parseFloat(r[2])/100,parseFloat(r[3])),i)}return null}static fromHex(e,i=new Lr){if(e.length!==4&&e.length!==7||e[0]!=="#")return null;const n=e.length===4?4:8,r=(1<<n)-1;let s=Number("0x"+e.substr(1));return isNaN(s)?null:(["b","g","r"].forEach(o=>{const a=s&r;s>>=n,i[o]=n===4?17*a:a}),i.a=1,i)}static fromArray(e,i=new Lr){return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i._sanitize()}static fromString(e,i){const n=Pae(e)?c9(e):null;return n&&Lr.fromArray(n,i)||Lr.fromRgb(e,i)||Lr.fromHex(e,i)}static fromJSON(e){return e&&new Lr([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return A(e)?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return A(e)?[e.r/255,e.g/255,e.b/255,e.a!=null?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return typeof e=="string"?Lr.fromString(e,this):Array.isArray(e)?Lr.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof Lr||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),i=this.g.toString(16),n=this.b.toString(16);return`#${e.length<2?"0"+e:e}${i.length<2?"0"+i:i}${n.length<2?"0"+n:n}`}toCss(e=!1){const i=this.r+", "+this.g+", "+this.b;return e?`rgba(${i}, ${this.a})`:`rgb(${i})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=Lr.AlphaMode.ALWAYS){const i=oT(this.r),n=oT(this.g),r=oT(this.b);return e===Lr.AlphaMode.ALWAYS||this.a!==1?[i,n,r,oT(255*this.a)]:[i,n,r]}clone(){return new Lr(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return A(e)&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(aT(this.r,0,255)),this.g=Math.round(aT(this.g,0,255)),this.b=Math.round(aT(this.b,0,255)),this.a=aT(this.a,0,1),this}_set(e,i,n,r){this.r=e,this.g=i,this.b=n,this.a=r}};m$.prototype.declaredClass="esri.Color",function(t){var e;(e=t.AlphaMode||(t.AlphaMode={}))[e.ALWAYS=0]="ALWAYS",e[e.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(m$||(m$={}));const Se=m$,RW=new Fe({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let aMe=0,Dv=class extends Y{constructor(e){super(e),this.id="sym"+aMe++,this.type=null,this.color=new Se([0,0,0,1])}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,i){}hash(){return JSON.stringify(this.toJSON())}clone(){}};c([d({type:RW.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:RW.write}}})],Dv.prototype,"type",void 0),c([d({type:Se,json:{write:{allowNull:!0}}})],Dv.prototype,"color",void 0),c([de("color")],Dv.prototype,"readColor",null),Dv=c([O("esri.symbols.Symbol")],Dv);const Uo=Dv;var Tz;let bp=Tz=class extends Uo{constructor(t){super(t),this.data=null,this.type="cim"}readData(t,e){return e}writeData(t,e){if(t)for(const i in t)e[i]=t[i]}async collectRequiredFields(t,e){var i;if(((i=this.data)==null?void 0:i.type)==="CIMSymbolReference"){const n=this.data.primitiveOverrides;if(n){const r=n.map(s=>{const o=s.valueExpressionInfo;return Js(t,e,o.expression)});await Promise.all(r)}}}clone(){return new Tz({data:G(this.data)})}hash(){return T8(JSON.stringify(this.data)).toString()}};c([d({json:{write:!1}})],bp.prototype,"color",void 0),c([d({json:{write:!0}})],bp.prototype,"data",void 0),c([de("data",["symbol"])],bp.prototype,"readData",null),c([fe("data",{})],bp.prototype,"writeData",null),c([Ce({CIMSymbolReference:"cim"},{readOnly:!0})],bp.prototype,"type",void 0),bp=Tz=c([O("esri.symbols.CIMSymbol")],bp);const OI=bp;let Fv=class extends Y{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,i,n){e||(i[n]=e)}};c([d({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],Fv.prototype,"enabled",void 0),c([fe("enabled")],Fv.prototype,"writeEnabled",null),c([d({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],Fv.prototype,"type",void 0),Fv=c([O("esri.symbols.Symbol3DLayer")],Fv);const Xu=Fv,lMe=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,cMe="screenUtils.toPt: input not recognized!",rle=96;function Br(t){return t?t/72*rle:0}function ju(t){return t?72*t/rle:0}function vt(t){if(typeof t=="string"){const e=t.match(lMe);if(e){const i=Number(e[1]),n=e[3]&&e[3].toLowerCase(),r=t.charAt(0)==="-",s=n==="px"?ju(i):i;return r?-s:s}return console.warn(cMe),null}return t}function Nn(t=0,e=0){return{x:t,y:e}}function uMe(t=0,e=0){return[t,e]}function Ggt(t=0,e=0,i=0){return[t,e,i]}function qgt(t){return t}function Wgt(t){return t}function Jgt(t){return t}function Ygt(t,e){return e?(e[0]=t.x,e[1]=t.y,e.length>2&&(e[2]=0),e):[t.x,t.y]}function GP(t){const e=k8(100*(1-t));return Math.max(0,Math.min(e,100))}function $C(t){const e=1-t/100;return Math.max(0,Math.min(e,1))}function dMe(t,e){const i=e.transparency!=null?$C(e.transparency):1,n=e.color;return n&&Array.isArray(n)?new Se([n[0]||0,n[1]||0,n[2]||0,i]):null}function hMe(t,e){e.color=t.toJSON().slice(0,3);const i=GP(t.a);i!==0&&(e.transparency=i)}const Im={type:Se,json:{type:[Bt],default:null,read:{source:["color","transparency"],reader:dMe},write:{target:{color:{type:[Bt]},transparency:{type:Bt}},writer:hMe}}},Vu={type:Number,cast:vt,json:{write:!0}};let Sg=class extends Y{constructor(e){super(e),this.color=new Se([0,0,0,1]),this.extensionLength=0,this.size=ju(1)}clone(){}cloneProperties(){return{color:G(this.color),size:this.size,extensionLength:this.extensionLength}}};c([d({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Sg.prototype,"type",void 0),c([d(Im)],Sg.prototype,"color",void 0),c([d({...Vu,json:{write:{overridePolicy:t=>({enabled:!!t})}}})],Sg.prototype,"extensionLength",void 0),c([d(Vu)],Sg.prototype,"size",void 0),Sg=c([O("esri.symbols.edges.Edges3D")],Sg);const f9=Sg;var kz;let g$=kz=class extends f9{constructor(t){super(t),this.type="sketch"}clone(){return new kz(this.cloneProperties())}};c([Ce({sketch:"sketch"},{readOnly:!0})],g$.prototype,"type",void 0),g$=kz=c([O("esri.symbols.edges.SketchEdges3D")],g$);const pMe=g$;var $z;let y$=$z=class extends f9{constructor(t){super(t),this.type="solid"}clone(){return new $z(this.cloneProperties())}};c([Ce({solid:"solid"},{readOnly:!0})],y$.prototype,"type",void 0),y$=$z=c([O("esri.symbols.support.SolidEdges3D")],y$);const fMe=y$,sle={types:{key:"type",base:f9,typeMap:{solid:fMe,sketch:pMe}},json:{write:!0}};var Az;let Ea=Az=class extends Y{constructor(t){super(t),this.color=null}clone(){const t={color:A(this.color)?this.color.clone():null};return new Az(t)}};c([d(Im)],Ea.prototype,"color",void 0),Ea=Az=c([O("esri.symbols.support.Symbol3DMaterial")],Ea);var Mz;let _p=Mz=class extends Xu{constructor(t){super(t),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new Mz({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:A(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};c([Ce({Extrude:"extrude"},{readOnly:!0})],_p.prototype,"type",void 0),c([d({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],_p.prototype,"size",void 0),c([d({type:Ea,json:{write:!0}})],_p.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],_p.prototype,"castShadows",void 0),c([d(sle)],_p.prototype,"edges",void 0),_p=Mz=c([O("esri.symbols.ExtrudeSymbol3DLayer")],_p);const ole=_p;let tS=class extends Uo{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};c([Ce({esriSLS:"simple-line"},{readOnly:!0})],tS.prototype,"type",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],tS.prototype,"width",void 0),tS=c([O("esri.symbols.LineSymbol")],tS);const mMe=tS,gMe=["begin","end","begin-end"],ale=["arrow","circle","square","diamond","cross","x"];var Oz;let eu=Oz=class extends Y{constructor(t){super(t),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(t,e,i,n){e[i]=(n==null?void 0:n.origin)==="web-map"?"arrow":t}set color(t){this._set("color",t)}readColor(t){return t&&t[0]!=null?[t[0],t[1],t[2],t[3]/255]:t}writeColor(t,e,i,n){(n==null?void 0:n.origin)==="web-map"||(e[i]=t)}clone(){return new Oz({color:G(this.color),placement:this.placement,style:this.style})}hash(){var t;return`${this.placement}.${(t=this.color)==null?void 0:t.hash()}.${this.style}`}};c([d({type:["begin","end","begin-end"],json:{write:!0}})],eu.prototype,"placement",void 0),c([Ce({"line-marker":"line-marker"},{readOnly:!0}),d({json:{origins:{"web-map":{write:!1}}}})],eu.prototype,"type",void 0),c([d({type:ale})],eu.prototype,"style",void 0),c([fe("style")],eu.prototype,"writeStyle",null),c([d({type:Se,value:null,json:{write:{allowNull:!0}}})],eu.prototype,"color",null),c([de("color")],eu.prototype,"readColor",null),c([fe("color")],eu.prototype,"writeColor",null),eu=Oz=c([O("esri.symbols.LineSymbolMarker")],eu);const yMe=eu;var Pz;const K3=new Fe({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let _d=Pz=class extends mMe{constructor(...t){super(...t),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(t,e,i,n,r,s){if(t&&typeof t!="string")return t;const o={};return t!=null&&(o.style=t),e!=null&&(o.color=e),i!=null&&(o.width=vt(i)),n!=null&&(o.cap=n),r!=null&&(o.join=r),s!=null&&(o.miterLimit=vt(s)),o}clone(){var t;return new Pz({color:G(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(t=this.marker)==null?void 0:t.clone()})}hash(){var t,e;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(e=this.marker)==null?void 0:e.hash()}`}};c([Ce({esriSLS:"simple-line"},{readOnly:!0})],_d.prototype,"type",void 0),c([d({type:K3.apiValues,json:{read:K3.read,write:K3.write}})],_d.prototype,"style",void 0),c([d({type:["butt","round","square"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],_d.prototype,"cap",void 0),c([d({type:["miter","round","bevel"],json:{write:{overridePolicy:(t,e,i)=>({enabled:t!=="round"&&(i==null||i.origin==null)})}}})],_d.prototype,"join",void 0),c([d({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":yMe}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],_d.prototype,"marker",void 0),c([d({type:Number,json:{read:!1,write:!1}})],_d.prototype,"miterLimit",void 0),_d=Pz=c([O("esri.symbols.SimpleLineSymbol")],_d);const Is=_d;let iS=class extends Uo{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Is}},json:{default:null,write:!0}})],iS.prototype,"outline",void 0),c([d({type:["simple-fill","picture-fill"],readOnly:!0})],iS.prototype,"type",void 0),iS=c([O("esri.symbols.FillSymbol")],iS);const lle=iS;let v$=class extends Y{constructor(e){super(e)}clone(){}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],v$.prototype,"type",void 0),v$=c([O("esri.symbols.patterns.LinePattern3D")],v$);const cle=v$,vMe=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var Rz;const bMe=kr()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let nS=Rz=class extends cle{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new Rz(t)}};c([d({type:["style"]})],nS.prototype,"type",void 0),c([Ce(bMe),d({type:vMe})],nS.prototype,"style",void 0),nS=Rz=c([O("esri.symbols.patterns.LineStylePattern3D")],nS);const m9=nS;let b$=class extends Y{constructor(e){super(e)}clone(){}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],b$.prototype,"type",void 0),b$=c([O("esri.symbols.patterns.Pattern3D")],b$);const ule=b$,_Me=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var Lz;let rS=Lz=class extends ule{constructor(t){super(t),this.type="style",this.style="solid"}clone(){const t={style:this.style};return new Lz(t)}};c([d({type:["style"]})],rS.prototype,"type",void 0),c([d({type:_Me,json:{read:!0,write:!0}})],rS.prototype,"style",void 0),rS=Lz=c([O("esri.symbols.patterns.StylePattern3D")],rS);const dle=rS,wMe={types:{key:"type",base:ule,typeMap:{style:dle}},json:{write:!0}},hle={types:{key:"type",base:cle,typeMap:{style:m9}},json:{write:!0}},yE=new Se("white");new Se("black");const xMe=new Se([255,255,255,0]);function SMe(t){return t.r===0&&t.g===0&&t.b===0}var Dz;let vE=Dz=class extends Ea{constructor(t){super(t),this.colorMixMode=null}clone(){const t={color:A(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new Dz(t)}};c([Ce({multiply:"multiply",replace:"replace",tint:"tint"})],vE.prototype,"colorMixMode",void 0),vE=Dz=c([O("esri.symbols.support.Symbol3DFillMaterial")],vE);function Mh(t=$Me){return[t[0],t[1],t[2],t[3]]}function tyt(t){return[t[0],t[1],t[2],t[3]]}function g9(t,e){return t!==e&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]),t}function EMe(t,e,i,n,r=Mh()){return r[0]=t,r[1]=e,r[2]=i,r[3]=n,r}function iyt(t,e=Mh()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function nyt(t,e){return new Dt({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function ryt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function syt(t,e,i){if(U(e))g9(i,t);else if("length"in e)Fz(e)?(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[2]),i[3]=Math.max(t[3],e[3])):e.length!==2&&e.length!==3||(i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i[2]=Math.max(t[2],e[0]),i[3]=Math.max(t[3],e[1]));else switch(e.type){case"extent":i[0]=Math.min(t[0],e.xmin),i[1]=Math.min(t[1],e.ymin),i[2]=Math.max(t[2],e.xmax),i[3]=Math.max(t[3],e.ymax);break;case"point":i[0]=Math.min(t[0],e.x),i[1]=Math.min(t[1],e.y),i[2]=Math.max(t[2],e.x),i[3]=Math.max(t[3],e.y)}}function X3(t,e,i=t){const n=e.length;let r=t[0],s=t[1],o=t[2],a=t[3];for(let l=0;l<n;l++){const u=e[l];r=Math.min(r,u[0]),s=Math.min(s,u[1]),o=Math.max(o,u[0]),a=Math.max(a,u[1])}return i[0]=r,i[1]=s,i[2]=o,i[3]=a,i}function oyt(t){for(let e=0;e<4;e++)if(!isFinite(t[e]))return!1;return!0}function CMe(t){return U(t)||t[0]>=t[2]?0:t[2]-t[0]}function IMe(t){return t[1]>=t[3]?0:t[3]-t[1]}function ayt(t){return CMe(t)*IMe(t)}function lyt(t,e=[0,0]){return e[0]=(t[0]+t[2])/2,e[1]=(t[1]+t[3])/2,e}function cyt(t,e){return ple(t,e[0],e[1])}function uyt(t,e){return ple(t,e.x,e.y)}function ple(t,e,i){return e>=t[0]&&i>=t[1]&&e<=t[2]&&i<=t[3]}function dyt(t,e,i){return e[0]>=t[0]-i&&e[1]>=t[1]-i&&e[0]<=t[2]+i&&e[1]<=t[3]+i}function hyt(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function TMe(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}function pyt(t,e,i,n=t){return n[0]=t[0]+e,n[1]=t[1]+i,n[2]=t[2]+e,n[3]=t[3]+i,n}function kMe(t){return t?g9(t,LW):Mh(LW)}function Fz(t){return t!=null&&t.length===4}function fyt(t,e){return Fz(t)&&Fz(e)?t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]:t===e}const LW=[1/0,1/0,-1/0,-1/0],$Me=[0,0,0,0];function y9(t=RMe){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function v9(t,e,i,n,r,s,o=y9()){return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o[4]=r,o[5]=s,o}function myt(t,e){const i=isFinite(t[2])||isFinite(t[5]);return new Dt(i?{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],zmin:t[2],zmax:t[5],spatialReference:e}:{xmin:t[0],xmax:t[3],ymin:t[1],ymax:t[4],spatialReference:e})}function gyt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[3]),t[4]=Math.max(t[4],e[4]),t[5]=Math.max(t[5],e[5])}function yyt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[3]=Math.max(t[3],e[2]),t[4]=Math.max(t[4],e[3])}function vyt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.min(t[2],e[2]),t[3]=Math.max(t[3],e[0]),t[4]=Math.max(t[4],e[1]),t[5]=Math.max(t[5],e[2])}function byt(t,e,i=0,n=e.length/3){let r=t[0],s=t[1],o=t[2],a=t[3],l=t[4],u=t[5];for(let h=0;h<n;h++)r=Math.min(r,e[i+3*h]),s=Math.min(s,e[i+3*h+1]),o=Math.min(o,e[i+3*h+2]),a=Math.max(a,e[i+3*h]),l=Math.max(l,e[i+3*h+1]),u=Math.max(u,e[i+3*h+2]);t[0]=r,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=u}function Q3(t,e,i){const n=e.length;let r=t[0],s=t[1],o=t[2],a=t[3],l=t[4],u=t[5];if(i)for(let h=0;h<n;h++){const p=e[h];r=Math.min(r,p[0]),s=Math.min(s,p[1]),o=Math.min(o,p[2]),a=Math.max(a,p[0]),l=Math.max(l,p[1]),u=Math.max(u,p[2])}else for(let h=0;h<n;h++){const p=e[h];r=Math.min(r,p[0]),s=Math.min(s,p[1]),a=Math.max(a,p[0]),l=Math.max(l,p[1])}t[0]=r,t[1]=s,t[2]=o,t[3]=a,t[4]=l,t[5]=u}function _yt(t){for(let e=0;e<6;e++)if(!isFinite(t[e]))return!1;return!0}function PI(t){return t[0]>=t[3]?0:t[3]-t[0]}function RI(t){return t[1]>=t[4]?0:t[4]-t[1]}function LI(t){return t[2]>=t[5]?0:t[5]-t[2]}function wyt(t){const e=PI(t),i=LI(t),n=RI(t);return Math.sqrt(e*e+i*i+n*n)}function xyt(t,e=[0,0,0]){return e[0]=t[0]+PI(t)/2,e[1]=t[1]+RI(t)/2,e[2]=t[2]+LI(t)/2,e}function Syt(t,e=[0,0,0]){return e[0]=PI(t),e[1]=RI(t),e[2]=LI(t),e}function Eyt(t,e){return e[0]>=t[0]&&e[1]>=t[1]&&e[2]>=t[2]&&e[0]<=t[3]&&e[1]<=t[4]&&e[2]<=t[5]}function AMe(t,e){return Math.max(e[0],t[0])<=Math.min(e[3],t[3])&&Math.max(e[1],t[1])<=Math.min(e[4],t[4])&&Math.max(e[2],t[2])<=Math.min(e[5],t[5])}function Cyt(t,e){return!!U(e)||AMe(t,e)}function Iyt(t,e,i,n,r=t){return r[0]=t[0]+e,r[1]=t[1]+i,r[2]=t[2]+n,r[3]=t[3]+e,r[4]=t[4]+i,r[5]=t[5]+n,r}function Tyt(t,e,i=t){const n=t[0]+PI(t)/2,r=t[1]+RI(t)/2,s=t[2]+LI(t)/2;return i[0]=n+(t[0]-n)*e,i[1]=r+(t[1]-r)*e,i[2]=s+(t[2]-s)*e,i[3]=n+(t[3]-n)*e,i[4]=r+(t[4]-r)*e,i[5]=s+(t[5]-s)*e,i}function kyt(t,e){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function $yt(t,e,i=t){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i!==t&&(i[3]=t[3],i[4]=t[4],i[5]=t[5]),i}function Ayt(t,e,i=t){return i[3]=e[0],i[4]=e[1],i[5]=e[2],i!==t&&(i[0]=t[0],i[1]=t[1],i[2]=t[2]),t}function MMe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function OMe(t){return t?MMe(t,DW):y9(DW)}function Myt(t,e){return e||(e=Mh()),e[0]=t[0],e[1]=t[1],e[2]=t[3],e[3]=t[4],e}function Oyt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=Number.NEGATIVE_INFINITY,t[3]=e[2],t[4]=e[3],t[5]=Number.POSITIVE_INFINITY,t}function PMe(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=Number.NEGATIVE_INFINITY,t[3]=n,t[4]=r,t[5]=Number.POSITIVE_INFINITY,t}function Nz(t){return t.length===6}function Pyt(t){return PI(t)===0&&RI(t)===0&&LI(t)===0}function Ryt(t,e,i){if(U(t)||U(e))return t===e;if(!Nz(t)||!Nz(e))return!1;if(i){for(let n=0;n<t.length;n++)if(!i(t[n],e[n]))return!1}else for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}const DW=[1/0,1/0,1/0,-1/0,-1/0,-1/0],RMe=[0,0,0,0,0,0];y9();function Lyt(t,{isPrimitive:e,width:i,depth:n,height:r}){const s=e?10:1;if(i==null&&r==null&&n==null)return[s*t[0],s*t[1],s*t[2]];const o=Ro(i,n,r);let a;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/t[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=t[l]*a);return o}const LMe=v9(-.5,-.5,-.5,.5,.5,.5),DMe=v9(-.5,-.5,0,.5,.5,1),FMe=v9(-.5,-.5,0,.5,.5,.5);function Dyt(t){switch(t){case"sphere":case"cube":case"diamond":return LMe;case"cylinder":case"cone":case"inverted-cone":return DMe;case"tetrahedron":return FMe;default:return}}const b9=["butt","square","round"],NMe=[...b9,"none"],fle=["miter","bevel","round"];var zz;let Eg=zz=class extends Y{constructor(t){super(t),this.color=new Se([0,0,0,1]),this.size=ju(1),this.pattern=null,this.patternCap="butt"}clone(){const t={color:A(this.color)?this.color.clone():null,size:this.size,pattern:A(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new zz(t)}};c([d(Im)],Eg.prototype,"color",void 0),c([d(Vu)],Eg.prototype,"size",void 0),c([d(hle)],Eg.prototype,"pattern",void 0),c([d({type:b9,json:{default:"butt",write:{overridePolicy(){return{enabled:A(this.pattern)}}}}})],Eg.prototype,"patternCap",void 0),Eg=zz=c([O("esri.symbols.support.Symbol3DOutline")],Eg);var _$;let wd=_$=class extends Xu{constructor(t){super(t),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const t={edges:A(this.edges)?this.edges.clone():null,enabled:this.enabled,material:A(this.material)?this.material.clone():null,pattern:A(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:A(this.outline)?this.outline.clone():null};return new _$(t)}static fromSimpleFillSymbol(t){var n,r,s;const e=t.outline&&t.outline.style&&t.outline.style!=="inside-frame"&&t.outline.style!=="solid"?new m9({style:t.outline.style}):null,i={size:((n=t.outline)==null?void 0:n.width)??0,color:(((r=t.outline)==null?void 0:r.color)??yE).clone(),pattern:e};return e&&((s=t.outline)!=null&&s.cap)&&(i.patternCap=t.outline.cap),new _$({material:new vE({color:(t.color??xMe).clone()}),pattern:t.style&&t.style!=="solid"?new dle({style:t.style}):null,outline:i})}};c([Ce({Fill:"fill"},{readOnly:!0})],wd.prototype,"type",void 0),c([d({type:vE,json:{write:!0}})],wd.prototype,"material",void 0),c([d(wMe)],wd.prototype,"pattern",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],wd.prototype,"castShadows",void 0),c([d({type:Eg,json:{write:!0}})],wd.prototype,"outline",void 0),c([d(sle)],wd.prototype,"edges",void 0),wd=_$=c([O("esri.symbols.FillSymbol3DLayer")],wd);const DI=wd,zMe=["none","underline","line-through"],jMe=["normal","italic","oblique"],VMe=["normal","lighter","bold","bolder"],mle={type:Number,cast:t=>{const e=sl(t);return e===0?1:zo(e,.1,4)},nonNullable:!0},UMe=["left","right","center"],BMe=["baseline","top","middle","bottom"],gle={type:UMe,nonNullable:!0},yle={type:BMe,nonNullable:!0};var jz;let xd=jz=class extends Y{constructor(t){super(t),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(t){return vt(t)}clone(){return new jz({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};c([d({type:zMe,json:{default:"none",write:!0}})],xd.prototype,"decoration",void 0),c([d({type:String,json:{write:!0}})],xd.prototype,"family",void 0),c([d({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:!i||!i.textSymbol3D})}}})],xd.prototype,"size",void 0),c([st("size")],xd.prototype,"castSize",null),c([d({type:jMe,json:{default:"normal",write:!0}})],xd.prototype,"style",void 0),c([d({type:VMe,json:{default:"normal",write:!0}})],xd.prototype,"weight",void 0),xd=jz=c([O("esri.symbols.Font")],xd);const qP=xd,HMe=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,GMe={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function kM(t){const e=t==null?void 0:t.match(HMe);if(!e)return null;const[,i,n,r]=e;if(!i)return null;let s=null,o=null,a=null;const{devext:l,qaext:u,www:h}=GMe;if(n)if(s=i,r)switch(r.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qa":({customBaseUrl:o,portalHostname:a}=u);break;default:return null}else({customBaseUrl:o,portalHostname:a}=h);else switch(i.toLowerCase()){case"devext":({customBaseUrl:o,portalHostname:a}=l);break;case"qaext":({customBaseUrl:o,portalHostname:a}=u);break;case"www":({customBaseUrl:o,portalHostname:a}=h);break;default:return null}return{customBaseUrl:o,isPortal:!1,portalHostname:a,urlKey:s}}function vle(t){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(t)}const qMe=se.getLogger("esri.core.urlUtils"),Kw=lt.request,FW="esri/config: esriConfig.request.proxyUrl is not set.",ble=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,_le=/^\s*http:/i,WMe=/^\s*https:/i,JMe=/^\s*file:/i,YMe=/:\d+$/,ZMe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,KMe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),XMe=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");let Hs=class{constructor(e=""){this.uri=e,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let i=this.uri.match(KMe);this.scheme=i[2]||(i[1]?"":null),this.authority=i[4]||(i[3]?"":null),this.path=i[5],this.query=i[7]||(i[6]?"":null),this.fragment=i[9]||(i[8]?"":null),this.authority!=null&&(i=this.authority.match(XMe),this.user=i[3]||null,this.password=i[4]||null,this.host=i[6]||i[7],this.port=i[9]||null)}toString(){return this.uri}};const lT={},QMe=new Hs(lt.applicationUrl);let bs=QMe;const eOe=tOe();let _9=eOe;const w9=()=>bs,Nyt=()=>_9;function tOe(){const t=bs.path,e=t.substring(0,t.lastIndexOf(t.split("/")[t.split("/").length-1]));return`${`${bs.scheme}://${bs.host}${bs.port!=null?`:${bs.port}`:""}`}${e}`}function _i(t){if(!t)return null;const e={path:null,query:null},i=new Hs(t),n=t.indexOf("?");return i.query===null?e.path=t:(e.path=t.substring(0,n),e.query=e_(i.query)),i.fragment&&(e.hash=i.fragment,i.query===null&&(e.path=e.path.substring(0,e.path.length-(i.fragment.length+1)))),e}function e_(t){const e=t.split("&"),i={};for(const n of e){if(!n)continue;const r=n.indexOf("=");let s,o;r<0?(s=decodeURIComponent(n),o=""):(s=decodeURIComponent(n.slice(0,r)),o=decodeURIComponent(n.slice(r+1)));let a=i[s];typeof a=="string"&&(a=i[s]=[a]),Array.isArray(a)?a.push(o):i[s]=o}return i}function NW(t){return t&&typeof t=="object"&&"toJSON"in t&&typeof t.toJSON=="function"}function _0(t,e){return t?e&&typeof e=="function"?Object.keys(t).map(i=>encodeURIComponent(i)+"="+encodeURIComponent(e(i,t[i]))).join("&"):Object.keys(t).map(i=>{const n=t[i];if(n==null)return"";const r=encodeURIComponent(i)+"=",s=e&&e[i];return s?r+encodeURIComponent(s(n)):Array.isArray(n)?n.map(o=>NW(o)?r+encodeURIComponent(JSON.stringify(o)):r+encodeURIComponent(o)).join("&"):NW(n)?r+encodeURIComponent(JSON.stringify(n)):r+encodeURIComponent(n)}).filter(i=>i).join("&"):""}function iOe(t=!1){let e,i=Kw.proxyUrl;if(typeof t=="string"){e=dOe(t);const n=FI(t);n&&(i=n.proxyUrl)}else e=!!t;if(!i)throw qMe.warn(FW),new N("urlutils:proxy-not-set",FW);return e&&Vz()&&(i=I9(i)),_i(i)}function zyt(t){const e=FI(t);let i,n;if(e){const r=x9(e.proxyUrl);i=r.path,n=r.query?e_(r.query):null}if(i){const r=_i(t);t=i+"?"+r.path;const s=_0({...n,...r.query});s&&(t=`${t}?${s}`)}return t}const X1={path:"",query:""};function x9(t){const e=t.indexOf("?");return e!==-1?(X1.path=t.slice(0,e),X1.query=t.slice(e+1)):(X1.path=t,X1.query=null),X1}function wle(t){return t=(t=$M(t=gOe(t=x9(t).path),!0)).toLowerCase()}function nOe(t){const e={proxyUrl:t.proxyUrl,urlPrefix:wle(t.urlPrefix)},i=Kw.proxyRules,n=e.urlPrefix;let r=i.length;for(let s=0;s<i.length;s++){const o=i[s].urlPrefix;if(n.indexOf(o)===0){if(n.length===o.length)return-1;r=s;break}o.indexOf(n)===0&&(r=s+1)}return i.splice(r,0,e),r}function FI(t){const e=Kw.proxyRules,i=wle(t);for(let n=0;n<e.length;n++)if(i.indexOf(e[n].urlPrefix)===0)return e[n]}function rOe(t,e){if(!t||!e)return!1;t=uw(t),e=uw(e);const i=kM(t),n=kM(e);return A(i)&&A(n)?i.portalHostname===n.portalHostname:!A(i)&&!A(n)&&vo(t,e,!0)}function sOe(t,e){if(!t||!e)return!1;t=uw(t),e=uw(e);const i=kM(t),n=kM(e);return!(!A(i)||!A(n))&&i.portalHostname===n.portalHostname}function xle(t,e){return t=uw(t),e=uw(e),$M(t)===$M(e)}function uw(t){const e=(t=Ca(t)).indexOf("/sharing");return e>0?t.substring(0,e):t.replace(/\/+$/,"")}function Sle(t){const e=n=>n==null||n instanceof RegExp&&n.test(t)||typeof n=="string"&&t.startsWith(n),i=Kw.interceptors;if(i){for(const n of i)if(Array.isArray(n.urls)){if(n.urls.some(e))return n}else if(e(n.urls))return n}return null}function vo(t,e,i=!1){if(!t||!e)return!1;const n=Bz(t),r=Bz(e);return!(!i&&n.scheme!==r.scheme)&&n.host!=null&&r.host!=null&&n.host.toLowerCase()===r.host.toLowerCase()&&n.port===r.port}function S9(t){if(typeof t=="string"){if(!Ia(t))return!0;t=Bz(t)}if(vo(t,bs))return!0;const e=Kw.trustedServers||[];for(let i=0;i<e.length;i++){const n=oOe(e[i]);for(let r=0;r<n.length;r++)if(vo(t,n[r]))return!0}return!1}function oOe(t){return lT[t]||(C9(t)||Uu(t)?lT[t]=[new Hs(_s(t))]:lT[t]=[new Hs(`http://${t}`),new Hs(`https://${t}`)]),lT[t]}function _s(t,e=_9,i){return Uu(t)?i&&i.preserveProtocolRelative?t:bs.scheme==="http"&&bs.authority===kc(t).slice(2)?`http:${t}`:`https:${t}`:C9(t)?t:w0(t[0]==="/"?mOe(e):e,t)}function E9(t,e=_9,i){if(t==null||!Ia(t))return t;const n=Ca(t),r=n.toLowerCase(),s=Ca(e).toLowerCase().replace(/\/+$/,""),o=i?Ca(i).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return t;const a=(p,f,g)=>(g=p.indexOf(f,g))===-1?p.length:g;let l=a(r,"/",r.indexOf("//")+2),u=-1;for(;r.slice(0,l+1)===s.slice(0,l)+"/"&&(u=l+1,l!==r.length);)l=a(r,"/",l+1);if(u===-1||o&&u<o.length)return t;t=n.slice(u);const h=s.slice(u-1).replace(/[^/]+/g,"").length;if(h>0)for(let p=0;p<h;p++)t=`../${t}`;else t=`./${t}`;return t}function Ca(t){return t=bOe(t=vOe(t=yOe(t=_s(t=t.trim()))))}function w0(...t){const e=t.filter(A);if(!e||!e.length)return;const i=[];if(Ia(e[0])){const r=e[0],s=r.indexOf("//");s!==-1&&(i.push(r.slice(0,s+1)),pOe(e[0])&&(i[0]+="/"),e[0]=r.slice(s+2))}else e[0][0]==="/"&&i.push("");const n=e.reduce((r,s)=>s?r.concat(s.split("/")):r,[]);for(let r=0;r<n.length;r++){const s=n[r];s===".."&&i.length>0&&i[i.length-1]!==".."?i.pop():(!s&&r===n.length-1||s&&(s!=="."||i.length===0))&&i.push(s)}return i.join("/")}function kc(t,e=!1){if(t==null||WP(t)||Tm(t))return null;let i=t.indexOf("://");if(i===-1&&Uu(t))i=2;else{if(i===-1)return null;i+=3}const n=t.indexOf("/",i);return n!==-1&&(t=t.slice(0,n)),e&&(t=$M(t,!0)),t}function Ia(t){return Uu(t)||C9(t)}function WP(t){return t!=null&&t.slice(0,5)==="blob:"}function Tm(t){return t!=null&&t.slice(0,5)==="data:"}function aOe(t){const e=JP(t);if(!e||!e.isBase64)return null;const i=atob(e.data),n=new Uint8Array(i.length);for(let r=0;r<i.length;r++)n[r]=i.charCodeAt(r);return n.buffer}function eD(t){return btoa(String.fromCharCode.apply(null,t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const lOe=/^data:(.*?)(;base64)?,(.*)$/;function JP(t){const e=t.match(lOe);if(!e)return null;const[,i,n,r]=e;return{mediaType:i,isBase64:!!n,data:r}}function Ele(t){return t.isBase64?`data:${t.mediaType};base64,${t.data}`:`data:${t.mediaType},${t.data}`}function jyt(t){const e=aOe(t);if(!e)return null;const i=JP(t);return new Blob([e],{type:i.mediaType})}function Vyt(t,e){cOe(t,e)||uOe(t,e)}function cOe(t,e){if(!t)return!1;const i=document.createElement("a");if(!("download"in i))return!1;const n=URL.createObjectURL(t);return i.download=e,i.href=n,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n),!0}function uOe(t,e){return!!window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(t,e)}function Uu(t){return t!=null&&t[0]==="/"&&t[1]==="/"}function C9(t){return t!=null&&ble.test(t)}function dOe(t){return t!=null&&WMe.test(t)||bs.scheme==="https"&&Uu(t)}function hOe(t){return t!=null&&_le.test(t)||bs.scheme==="http"&&Uu(t)}function pOe(t){return t!=null&&JMe.test(t)}function I9(t){return Uu(t)?`https:${t}`:t.replace(_le,"https:")}function fOe(){return bs.scheme==="http"}function Vz(){return bs.scheme==="https"}function $M(t,e=!1){return Uu(t)?t.slice(2):(t=t.replace(ble,""),e&&t.length>1&&t[0]==="/"&&t[1]==="/"&&(t=t.slice(2)),t)}function mOe(t){const e=t.indexOf("//"),i=t.indexOf("/",e+2);return i===-1?t:t.slice(0,i)}function T9(t){let e=0;if(Ia(t)){const n=t.indexOf("//");n!==-1&&(e=n+2)}const i=t.lastIndexOf("/");return i<e?t:t.slice(0,i+1)}function Uyt(t,e){if(!t)return"";const i=_i(t).path.replace(/\/+$/,""),n=i.substring(i.lastIndexOf("/")+1);if(!(e!=null&&e.length))return n;const r=new RegExp(`.(${e.join("|")})$`,"ig");return n.replace(r,"")}function gOe(t){return t&&t[t.length-1]==="/"?t:`${t}/`}function Cle(t){return t.replace(/\/+$/,"")}function yOe(t){if(/^https?:\/\//i.test(t)){const e=x9(t);t=(t=e.path.replace(/\/{2,}/g,"/")).replace("/","//"),e.query&&(t+=`?${e.query}`)}return t}function vOe(t){return t.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function bOe(t){const e=Kw.httpsDomains;if(!hOe(t))return t;const i=t.indexOf("/",7);let n;if(n=i===-1?t:t.slice(0,i),n=n.toLowerCase().slice(7),YMe.test(n)){if(!n.endsWith(":80"))return t;n=n.slice(0,-3),t=t.replace(":80","")}return fOe()&&n===bs.authority&&!ZMe.test(t)||(Vz()&&n===bs.authority||e&&e.some(r=>n===r||n.endsWith(`.${r}`))||Vz()&&!FI(t))&&(t=I9(t)),t}function Uz(t,e,i){if(!(e&&i&&t&&Ia(t)))return t;const n=t.indexOf("//"),r=t.indexOf("/",n+2),s=t.indexOf(":",n+2),o=Math.min(r<0?t.length:r,s<0?t.length:s);return t.slice(n+2,o).toLowerCase()!==e.toLowerCase()?t:`${t.slice(0,n+2)}${i}${t.slice(o)}`}function Bz(t){return typeof t=="string"?new Hs(_s(t)):(t.scheme||(t.scheme=bs.scheme),t)}function Byt(t){return _Oe.test(t)}function Ile(t,e){const i=_i(t),n=Object.keys(i.query||{});return n.length>0&&e&&e.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${n.join(", ")}.`),i.path}function k9(t,e,i){const n=_i(t),r=n.query||{};return r[e]=String(i),`${n.path}?${_0(r)}`}function w$(t,e){const i=_i(t),n=i.query||{};for(const s in e)n[s]=e[s];const r=_0(n);return r?`${i.path}?${r}`:i.path}function Hyt(t){if(U(t))return null;const e=t.match(Tle);return e?e[2]:null}function zW(t){if(U(t))return null;const e=t.match(Tle);return e?{path:e[1],extension:e[2]}:{path:t,extension:null}}const Tle=/([^.]*)\.([^\/]*)$/,_Oe=/(^data:image\/svg|\.svg$)/i;function nm(t,e){const i=e&&e.url&&e.url.path;if(t&&i&&(t=_s(t,i,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){const n=E9(t,e.portalItem.itemUrl);n!=null&&wOe.test(n)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(n).path)}return Hz(t,e&&e.portal)}function NI(t,e,i=AC.YES){if(t==null)return t;!Ia(t)&&e&&e.blockedRelativeUrls&&e.blockedRelativeUrls.push(t);let n=_s(t);if(e){const r=e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.rootPath||e.url&&e.url.path;if(r){const s=Hz(r,e.portal),o=Hz(n,e.portal);n=E9(o,s,s),n!=null&&n!==o&&n!==t&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(n)}}return n=$le(n,e==null?void 0:e.portal),Ia(n)&&(n=Ca(n)),e!=null&&e.resources&&(e!=null&&e.portalItem)&&!Ia(n)&&!Tm(n)&&i===AC.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(n),compress:!1}),n}function $9(t,e,i){return nm(t,i)}function x0(t,e,i,n){const r=NI(t,n);r!==void 0&&(e[i]=r)}const kle=/\/items\/([^\/]+)\/resources\/(.*)/,wOe=/^\.\/resources\//;function xOe(t){var e;return((e=(t==null?void 0:t.match(kle))??null)==null?void 0:e[1])??null}function SOe(t){const e=(t==null?void 0:t.match(kle))??null;if(e==null)return null;const i=e[2],n=i.lastIndexOf("/");if(n===-1){const{path:o,extension:a}=zW(i);return{prefix:null,filename:o,extension:a}}const{path:r,extension:s}=zW(i.slice(n+1));return{prefix:i.slice(0,n),filename:r,extension:s}}function $le(t,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?Uz(t,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):t}function Hz(t,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return t;const i=`${e.urlKey}.${e.customBaseUrl}`,n=w9();return vo(n,`${n.scheme}://${i}`)?Uz(t,e.portalHostname,i):Uz(t,i,e.portalHostname)}var AC;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(AC||(AC={}));const Gyt=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return AC},ensureMainOnlineDomain:$le,fromJSON:nm,itemIdFromResourceUrl:xOe,prefixAndFilenameFromResourceUrl:SOe,read:$9,toJSON:NI,write:x0},Symbol.toStringTag,{value:"Module"}));var Gz;const EOe=kr()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let Cg=Gz=class extends Y{constructor(t){super(t)}readHref(t,e,i){return t?nm(t,i):e.dataURI}writeHref(t,e,i,n){t&&(Tm(t)?e.dataURI=t:(e.href=NI(t,n),Ia(e.href)&&(e.href=Ca(e.href))))}clone(){return new Gz({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],Cg.prototype,"href",void 0),c([de("href")],Cg.prototype,"readHref",null),c([fe("href",{href:{type:String},dataURI:{type:String}})],Cg.prototype,"writeHref",null),c([Ce(EOe)],Cg.prototype,"primitive",void 0),Cg=Gz=c([O("esri.symbols.support.IconSymbol3DLayerResource")],Cg);const COe="circle";var qz;let t_=qz=class extends _e{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new qz({x:this.x,y:this.y})}};c([d({type:Number})],t_.prototype,"x",void 0),c([d({type:Number})],t_.prototype,"y",void 0),t_=qz=c([O("esri.symbols.support.Symbol3DAnchorPosition2D")],t_);var Wz;let sS=Wz=class extends Y{constructor(t){super(t),this.color=new Se([0,0,0,1]),this.size=ju(1)}clone(){const t={color:A(this.color)?this.color.clone():null,size:this.size};return new Wz(t)}};c([d(Im)],sS.prototype,"color",void 0),c([d(Vu)],sS.prototype,"size",void 0),sS=Wz=c([O("esri.symbols.support.Symbol3DIconOutline")],sS);var Nv;const Ale="esri.symbols.IconSymbol3DLayer";let tu=Nv=class extends Xu{constructor(t){super(t),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=null,this.outline=null}clone(){return new Nv({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:A(this.material)?this.material.clone():null,outline:A(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(t){const e=t.color||yE,i=jW(t),n=t.outline&&t.outline.width>0?{size:t.outline.width,color:(t.outline.color||yE).clone()}:null;return new Nv({size:t.size,resource:{primitive:TOe(t.style)},material:{color:e},outline:n,anchor:i?"relative":void 0,anchorPosition:i})}static fromPictureMarkerSymbol(t){const e=!t.color||SMe(t.color)?yE:t.color,i=jW(t);return new Nv({size:t.width<=t.height?t.height:t.width,resource:{href:t.url},material:{color:e.clone()},anchor:i?"relative":void 0,anchorPosition:i})}static fromCIMSymbol(t){return new Nv({resource:{href:Ele({mediaType:"application/json",data:JSON.stringify(t.data)})}})}};function jW(t){const e="width"in t?t.width:t.size,i="height"in t?t.height:t.size,n=VW(t.xoffset),r=VW(t.yoffset);return(n||r)&&e&&i?{x:-n/e,y:r/i}:null}function VW(t){return isFinite(t)?t:0}c([d({type:Ea,json:{write:!0}})],tu.prototype,"material",void 0),c([d({type:Cg,json:{write:!0}})],tu.prototype,"resource",void 0),c([Ce({Icon:"icon"},{readOnly:!0})],tu.prototype,"type",void 0),c([d(Vu)],tu.prototype,"size",void 0),c([Ce({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),d({json:{default:"center"}})],tu.prototype,"anchor",void 0),c([d({type:t_,json:{type:[Number],read:{reader:t=>new t_({x:t[0],y:t[1]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],tu.prototype,"anchorPosition",void 0),c([d({type:sS,json:{write:!0}})],tu.prototype,"outline",void 0),tu=Nv=c([O(Ale)],tu);const IOe={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function TOe(t){return IOe[t]||(se.getLogger(Ale).warn(`${t} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const Oy=tu;function S0(t,e,i=we){return e||(e=new i),e===t||(e.removeAll(),kOe(t)?e.addMany(t):t&&e.add(t)),e}function Mle(t){return t}function kOe(t){return t&&(Array.isArray(t)||"items"in t&&Array.isArray(t.items))}const Ole="20230301",Ple="2657e728c1857e6d94c324181c0788310bb0958a",A9="4.26",$Oe={async request(t,e){var a,l;const{default:i}=await q(()=>Promise.resolve().then(()=>WOe),void 0),n=t.options,r=n.responseType;n.signal=e==null?void 0:e.signal,n.responseType=r==="native"||r==="native-request-init"?"native-request-init":r&&["blob","json","text"].includes(r)&&((a=Sle(t.url))!=null&&a.after)?r:"array-buffer";const s=await i(t.url,n),o={data:s.data,httpStatus:s.httpStatus,ssl:s.ssl};switch((l=s.requestOptions)==null?void 0:l.responseType){case"native-request-init":return delete o.data.signal,o;case"blob":o.data=await o.data.arrayBuffer();break;case"json":o.data=new TextEncoder().encode(JSON.stringify(o.data)).buffer;break;case"text":o.data=new TextEncoder().encode(o.data).buffer}return{result:o,transferList:[o.data]}}};let Ne;function AOe(t){Ne=t}function qyt(t){const e=Ne&&Ne.findCredential(t);return e&&e.token?k9(t,"token",e.token):t}ee("host-webworker");const MOe=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function M9(t){const e=kc(t,!0);return!!e&&e.endsWith(".arcgis.com")&&!MOe.includes(e)&&!t.endsWith("/sharing/rest/generateToken")}function OOe(t,e,i=!1,n){return new Promise((r,s)=>{if($a(n))return void s(UW());let o=()=>{u(),s(new Error(`Unable to load ${e}`))},a=()=>{const h=t;u(),r(h)},l=()=>{if(!t)return;const h=t;u(),h.src="",s(UW())};const u=()=>{ee("esri-image-decode")||(t.removeEventListener("error",o),t.removeEventListener("load",a)),o=null,a=null,t=null,A(n)&&n.removeEventListener("abort",l),l=null,i&&URL.revokeObjectURL(e)};A(n)&&n.addEventListener("abort",l),ee("esri-image-decode")?t.decode().then(a,o):(t.addEventListener("error",o),t.addEventListener("load",a))})}function UW(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}function POe(t){lt.request.crossOriginNoCorsDomains||(lt.request.crossOriginNoCorsDomains={});const e=lt.request.crossOriginNoCorsDomains;for(let i of t)i=i.toLowerCase(),/^https?:\/\//.test(i)?e[kc(i)??""]=0:(e[kc("http://"+i)??""]=0,e[kc("https://"+i)??""]=0)}function ROe(t){const e=lt.request.crossOriginNoCorsDomains;if(e){let i=kc(t);if(i)return i=i.toLowerCase(),!vo(i,w9())&&e[i]<Date.now()-36e5}return!1}async function LOe(t){var r;const e=lt.request.crossOriginNoCorsDomains,i=kc(t);e&&i&&(e[i.toLowerCase()]=Date.now());const n=_i(t);t=n.path,((r=n.query)==null?void 0:r.f)==="json"&&(t+="?f=json");try{await fetch(t,{mode:"no-cors",credentials:"include"})}catch{}}async function rt(t,e){var u;const i=Tm(t),n=WP(t);n||i||(t=Ca(t));const r={url:t,requestOptions:{...e}};let s=Sle(t);if(s){const h=await BOe(s,r);if(h!=null)return{data:h,getHeader:O9,httpStatus:200,requestOptions:r.requestOptions,url:r.url};s.after||s.error||(s=null)}if(t=r.url,(e=r.requestOptions).responseType==="image"){if(ee("host-webworker")||ee("host-node"))throw wc("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),r)}else if(i)throw wc("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+e.responseType),r);if(e.method==="head"){if(e.body)throw wc("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),r);if(i||n)throw wc("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),r)}if(await jOe(),AM)return AM.execute(t,e);const o=new AbortController;Ur(e,()=>o.abort());const a={controller:o,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:s,params:r,redoRequest:!1,useIdentity:fc.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},l=await GOe(a);return(u=s==null?void 0:s.after)==null||u.call(s,l),l}let AM;const fc=lt.request,Rle="FormData"in globalThis,DOe=[499,498,403,401],FOe=["COM_0056","COM_0057","SB_0008"],NOe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],O9=()=>null,MM=Symbol();function zOe(t){const e=kc(t);e&&!rt._corsServers.includes(e)&&rt._corsServers.push(e)}function BW(t){const e=kc(t);return!e||e.endsWith(".arcgis.com")||rt._corsServers.includes(e)||S9(e)}function wc(t,e,i,n){let r="Error";const s={url:i.url,requestOptions:i.requestOptions,getHeader:O9,ssl:!1};if(e instanceof N)return e.details?(e.details=G(e.details),e.details.url=i.url,e.details.requestOptions=i.requestOptions):e.details=s,e;if(e){const o=n&&(u=>n.headers.get(u)),a=n&&n.status,l=e.message;l&&(r=l),o&&(s.getHeader=o),s.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||a||0,s.subCode=e.subcode,s.messageCode=e.messageCode,typeof e.details=="string"?s.messages=[e.details]:s.messages=e.details,s.raw=MM in e?e[MM]:e}return Pa(e)?li():new N(t,r,s)}async function jOe(){ee("host-webworker")?AM||(AM=await q(()=>import("./request-92ec0ac1.js"),[])):rt._abortableFetch||(rt._abortableFetch=globalThis.fetch.bind(globalThis))}async function Jz(){Ne||await q(()=>Promise.resolve().then(()=>zZe),void 0)}async function VOe(t){var a;const e=t.params.url,i=t.params.requestOptions,n=t.controller.signal,r=i.body;let s=null,o=null;if(Rle&&"HTMLFormElement"in globalThis&&(r instanceof FormData?s=r:r instanceof HTMLFormElement&&(s=new FormData(r))),typeof r=="string"&&(o=r),t.fetchOptions={cache:i.cacheBust&&!rt._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:i.headers||{},method:i.method==="head"?"HEAD":"GET",mode:"cors",priority:fc.priority,redirect:"follow",signal:n},(s||o)&&(t.fetchOptions.body=s||o),i.authMode==="anonymous"&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||(a=i.query)!=null&&a.token||s!=null&&s.get("token")),!t.hasToken&&lt.apiKey&&M9(e)&&(i.query||(i.query={}),i.query.token=lt.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!Lle(e)&&!$a(n)){let l;i.authMode==="immediate"?(await Jz(),l=await Ne.getCredential(e,{signal:n}),t.credential=l):i.authMode==="no-prompt"?(await Jz(),l=await Ne.getCredential(e,{prompt:!1,signal:n}).catch(()=>{}),t.credential=l):Ne&&(l=Ne.findCredential(e)),l&&(t.credentialToken=l.token,t.useSSL=!!l.ssl)}}function Lle(t){return NOe.some(e=>e.test(t))}async function UOe(t){let e=t.params.url;const i=t.params.requestOptions,n=t.fetchOptions??{},r=WP(e)||Tm(e),s=i.responseType||"json",o=r?0:i.timeout!=null?i.timeout:fc.timeout;let a=!1;if(!r){t.useSSL&&(e=I9(e)),i.cacheBust&&n.cache==="default"&&(e=k9(e,"request.preventCache",Date.now()));let f={...i.query};t.credentialToken&&(f.token=t.credentialToken);let g=_0(f);ee("esri-url-encodes-apostrophe")&&(g=g.replace(/'/g,"%27"));const v=e.length+1+g.length;let b;a=i.method==="delete"||i.method==="post"||i.method==="put"||!!i.body||v>fc.maxUrlLength;const _=i.useProxy||!!FI(e);if(_){const w=iOe(e);b=w.path,!a&&b.length+1+v>fc.maxUrlLength&&(a=!0),w.query&&(f={...w.query,...f})}if(n.method==="HEAD"&&(a||_)){if(a)throw v>fc.maxUrlLength?wc("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params):wc("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params);if(_)throw wc("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(a?(n.method=i.method==="delete"?"DELETE":i.method==="put"?"PUT":"POST",i.body?e=w$(e,f):(n.body=_0(f),n.headers||(n.headers={}),n.headers["Content-Type"]="application/x-www-form-urlencoded")):e=w$(e,f),_&&(t.useProxy=!0,e=`${b}?${e}`),f.token&&Rle&&n.body instanceof FormData&&!vle(e)&&n.body.set("token",f.token),i.hasOwnProperty("withCredentials"))t.withCredentials=i.withCredentials;else if(!vo(e,w9())){if(S9(e))t.withCredentials=!0;else if(Ne){const w=Ne.findServerInfo(e);w&&w.webTierAuth&&(t.withCredentials=!0)}}t.withCredentials&&(n.credentials="include",ROe(e)&&await LOe(a?w$(e,f):e))}let l,u,h=0,p=!1;o>0&&(h=setTimeout(()=>{p=!0,t.controller.abort()},o));try{if(i.responseType==="native-request-init")u=n,u.url=e;else if(i.responseType!=="image"||n.cache!=="default"||n.method!=="GET"||a||HOe(i.headers)||!r&&!t.useProxy&&fc.proxyUrl&&!BW(e)){if(l=await rt._abortableFetch(e,n),t.useProxy||zOe(e),i.responseType==="native")u=l;else if(n.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(h&&(clearTimeout(h),h=0),s==="json"||s==="xml"||s==="document")if(u)switch(s){case"json":u=JSON.parse(u);break;case"xml":u=HW(u,"application/xml");break;case"document":u=HW(u,"text/html")}else u=null;if(u){if(s==="array-buffer"||s==="blob"){const f=l.headers.get("Content-Type");if(f&&/application\/json|text\/plain/i.test(f)&&u[s==="blob"?"size":"byteLength"]<=750)try{const g=await new Response(u).json();g.error&&(u=g)}catch{}}s==="image"&&u instanceof Blob&&(u=await GW(URL.createObjectURL(u),t,!0))}}else u=await l.text()}else u=await GW(e,t)}catch(f){if(f.name==="AbortError")throw p?new Error("Timeout exceeded"):li("Request canceled");if(!(!l&&f instanceof TypeError&&fc.proxyUrl)||i.body||i.method==="delete"||i.method==="head"||i.method==="post"||i.method==="put"||t.useProxy||BW(e))throw f;t.redoRequest=!0,nOe({proxyUrl:fc.proxyUrl,urlPrefix:kc(e)??""})}finally{h&&clearTimeout(h)}return[l,u]}async function BOe(t,e){if(t.responseData!=null)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let i,n;try{n=await t.before(e)}catch(r){i=wc("request:interceptor",r,e)}if((n instanceof Error||n instanceof N)&&(i=wc("request:interceptor",n,e)),i)throw t.error&&t.error(i),i;return n}}function HOe(t){if(t){for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0}return!1}function HW(t,e){let i;try{i=new DOMParser().parseFromString(t,e)}catch{}if(!i||i.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return i}async function GOe(t){var s;let e,i;await VOe(t);try{do[e,i]=await UOe(t);while(!await qOe(t,e,i))}catch(o){const a=wc("request:server",o,t.params,e);throw a.details.ssl=t.useSSL,t.interceptor&&t.interceptor.error&&t.interceptor.error(a),a}const n=t.params.url;if(i&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(n)){if(!t.hasToken&&!t.credentialToken&&((s=i.user)!=null&&s.username)&&!S9(n)){const o=kc(n,!0);o&&fc.trustedServers.push(o)}Array.isArray(i.authorizedCrossOriginNoCorsDomains)&&POe(i.authorizedCrossOriginNoCorsDomains)}const r=t.credential;if(r&&Ne){const o=Ne.findServerInfo(r.server);let a=o&&o.owningSystemUrl;if(a){a=a.replace(/\/?$/,"/sharing");const l=Ne.findCredential(a,r.userId);l&&Ne._getIdenticalSvcIdx(a,l)===-1&&l.resources.unshift(a)}}return{data:i,getHeader:e?o=>e==null?void 0:e.headers.get(o):O9,httpStatus:(e==null?void 0:e.status)??200,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}async function qOe(t,e,i){if(t.redoRequest)return t.redoRequest=!1,!1;const n=t.params.requestOptions;if(!e||n.responseType==="native"||n.responseType==="native-request-init")return!0;let r,s;if(!e.ok)throw r=new Error(`Unable to load ${e.url} status: ${e.status}`),r[MM]=i,r;i&&(i.error?r=i.error:i.status==="error"&&Array.isArray(i.messages)&&(r={...i},r[MM]=i,r.details=i.messages));let o,a=null;r&&(s=Number(r.code),a=r.hasOwnProperty("subcode")?Number(r.subcode):null,o=r.messageCode,o=o&&o.toUpperCase());const l=n.authMode;if(s===403&&(a===4||r.message&&r.message.toLowerCase().includes("ssl")&&!r.message.toLowerCase().includes("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&(l!=="no-prompt"||s===498)&&s!==void 0&&DOe.includes(s)&&!Lle(t.params.url)&&(s!==403||o&&!FOe.includes(o)&&(a==null||a===2&&t.credentialToken))){await Jz();try{const u=await Ne.getCredential(t.params.url,{error:wc("request:server",r,t.params),prompt:l!=="no-prompt",signal:t.controller.signal,token:t.credentialToken});return t.credential=u,t.credentialToken=u.token,t.useSSL=t.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return t.credential=void 0,t.credentialToken=void 0,!1;r=u}}if(r)throw r;return!0}function GW(t,e,i=!1){const n=e.controller.signal,r=new Image;return e.withCredentials?r.crossOrigin="use-credentials":r.crossOrigin="anonymous",r.alt="",r.fetchPriority=fc.priority,r.src=t,OOe(r,t,i,n)}rt._abortableFetch=null,rt._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const WOe=Object.freeze(Object.defineProperty({__proto__:null,default:rt},Symbol.toStringTag,{value:"Module"}));var af;(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(af||(af={}));let JOe=class{constructor(e){this.instance=e,this._resolver=kh(),this._status=af.PENDING,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=af.RESOLVED,this._cleanUp()},()=>{this._status=af.REJECTED,this._cleanUp()})}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return this._status===af.RESOLVED}isRejected(){return this._status===af.REJECTED}isFulfilled(){return this._status!==af.PENDING}abort(){this._resolver.reject(li())}when(e,i){return this._resolver.promise.then(e,i)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const e=kh(),i=[...this._resolvingPromises,e.promise],n=this._allPromise=Promise.all(i);n.then(()=>{this.isFulfilled()||this._allPromise!==n||this._resolver.resolve(this.instance)},r=>{this.isFulfilled()||this._allPromise!==n||Pa(r)||this._resolver.reject(r)}),e.resolve()}};const zI=t=>{let e=class extends t{constructor(...i){super(...i),this._promiseProps=new JOe(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(i,n){return new Promise((r,s)=>{this._promiseProps.when(r,s)}).then(i,n)}catch(i){return this.when(null,i)}addResolvingPromise(i){i&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in i?i.when():i)}};return e=c([O("esri.core.Promise")],e),e};let OM=class extends zI(_e){};OM=c([O("esri.core.Promise")],OM);const YOe="not-loaded",ZOe="loading",KOe="failed",qW="loaded",Dle=t=>{let e=class extends t{constructor(...i){super(...i),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(n=>{const r=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const u=L8(s,l);this.destroyed&&l(new N("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===YOe){this._set("loadStatus",ZOe);const a=this._loadController=new AbortController;r({signal:a.signal}),Ur(a.signal,()=>{this._promiseProps.abort()})}return n(),o}})),this.when(()=>{this._set("loadStatus",qW),this._loadController=null},n=>{this._set("loadStatus",KOe),this._set("loadError",n),this._loadController=null})}get loaded(){return this.loadStatus===qW}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var i;return this.isFulfilled()||(this._set("loadError",new N("load:cancelled","Cancelled")),(i=this._loadController)==null||i.abort()),this}};return c([d({readOnly:!0})],e.prototype,"loaded",null),c([d({readOnly:!0})],e.prototype,"loadError",void 0),c([d({clonable:!1})],e.prototype,"loadStatus",void 0),c([d({type:[bl],readOnly:!0})],e.prototype,"loadWarnings",null),e=c([O("esri.core.Loadable")],e),e};let oS=class extends Dle(OM){};oS=c([O("esri.core.Loadable")],oS),function(t){function e(i){return!(!i||!i.load)}t.LoadableMixin=Dle,t.isLoadable=e}(oS||(oS={}));const _l=oS;var Yz;const XOe=new Fe({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let qa=Yz=class extends _e{constructor(t){super(t),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(t){t!=="asc"&&t!=="desc"||this._set("sortOrder",t)}clone(){return new Yz({categories:this.categories?G(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(t,e){let i=[];this.categories&&(i=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o));let n="";if(this.extent){const o=RP(this.extent,Ge.WGS84);A(o)&&(n=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let r=this.query;!this.disableExtraQuery&&t.extraQuery&&(r="("+r+")"+t.extraQuery);const s={categories:i,bbox:n,q:r,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>XOe.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...e,...s}}}};c([d()],qa.prototype,"categories",void 0),c([d()],qa.prototype,"disableExtraQuery",void 0),c([d({type:Dt})],qa.prototype,"extent",void 0),c([d()],qa.prototype,"filter",void 0),c([d()],qa.prototype,"num",void 0),c([d()],qa.prototype,"query",void 0),c([d()],qa.prototype,"sortField",void 0),c([d()],qa.prototype,"sortOrder",null),c([d()],qa.prototype,"start",void 0),qa=Yz=c([O("esri.portal.PortalQueryParams")],qa);const eh=qa;let Ig=class extends _e{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};c([d()],Ig.prototype,"nextQueryParams",void 0),c([d()],Ig.prototype,"queryParams",void 0),c([d()],Ig.prototype,"results",void 0),c([d()],Ig.prototype,"total",void 0),Ig=c([O("esri.portal.PortalQueryResult")],Ig);const QOe=Ig;let Sd=class extends Y{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new N("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};c([d({type:Date})],Sd.prototype,"created",void 0),c([d()],Sd.prototype,"id",void 0),c([d()],Sd.prototype,"portal",void 0),c([d()],Sd.prototype,"title",void 0),c([d({readOnly:!0})],Sd.prototype,"url",null),c([d()],Sd.prototype,"username",void 0),Sd=c([O("esri.portal.PortalFolder")],Sd);const ePe=Sd;let qn=class extends Y{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){var n;const e=this.url,i=this.thumbnail;return e&&i&&this.portal?(n=this.portal)==null?void 0:n.normalizeUrl(`${e}/info/${i}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return Sr(this.portal).request(this.url+"/categorySchema",e).then(i=>{const n=i.categorySchema||[];return n.some(r=>r.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):n})}fetchMembers(e){return Sr(this.portal).request(this.url+"/users",e)}getThumbnailUrl(e){let i=this.thumbnailUrl;return i&&e&&(i+=`&w=${e}`),i}toJSON(){throw new N("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,i){let n=Ht(eh,e);const r=Sr(this.portal);return parseFloat(r.currentVersion)>5?(n=n||new eh,r.queryPortal(`/content/groups/${this.id}/search`,n,"PortalItem",i)):(n=n?n.clone():new eh,n.query="group:"+this.id+(n.query?" "+n.query:""),r.queryItems(n,i))}_fetchCategorySchemaSet(e,i){const n=Sr(this.portal);return n.fetchSelf(n.authMode,!0,i).then(r=>{const s=r.contentCategorySetsGroupQuery;if(s){const o=new eh;return o.disableExtraQuery=!0,o.num=1,o.query=s,n.queryGroups(o,i)}throw new N("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const s=r.results[0],o=new eh;return o.num=1,o.query=`typekeywords:"${e}"`,s.queryItems(o,i)}throw new N("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",i).then(s=>{const o=s&&s.categorySchema;return o&&o.length?o:[]}):[])}};c([d()],qn.prototype,"access",void 0),c([d({type:Date})],qn.prototype,"created",void 0),c([d()],qn.prototype,"description",void 0),c([d()],qn.prototype,"id",void 0),c([d()],qn.prototype,"isInvitationOnly",void 0),c([d({type:Date})],qn.prototype,"modified",void 0),c([d()],qn.prototype,"owner",void 0),c([d()],qn.prototype,"portal",void 0),c([d()],qn.prototype,"snippet",void 0),c([d()],qn.prototype,"sortField",void 0),c([d()],qn.prototype,"sortOrder",void 0),c([d()],qn.prototype,"tags",void 0),c([d()],qn.prototype,"thumbnail",void 0),c([d({readOnly:!0})],qn.prototype,"thumbnailUrl",null),c([d()],qn.prototype,"title",void 0),c([d({readOnly:!0})],qn.prototype,"url",null),qn=c([O("esri.portal.PortalGroup")],qn);const Zz=qn,tPe=Object.freeze(Object.defineProperty({__proto__:null,default:Zz},Symbol.toStringTag,{value:"Module"}));var Kz;let hi=Kz=class extends Y{constructor(...t){super(...t),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const t=this.url,e=this.thumbnail;return t&&e?this.portal.normalizeUrl(`${t}/info/${e}?f=json`):null}get userContentUrl(){const t=this.get("portal.restUrl");return t?`${t}/content/users/${this.username}`:null}get url(){const t=this.get("portal.restUrl");return t?`${t}/community/users/${this.username}`:null}addItem(t){const e=t&&t.item,i=t&&t.data,n=t&&t.folder,r={method:"post"};e&&(r.query=e.createPostQuery(),i!=null&&(typeof i=="string"?r.query.text=i:typeof i=="object"&&(r.query.text=JSON.stringify(i))));let s=this.userContentUrl;return n&&(s+="/"+(typeof n=="string"?n:n.id)),this.portal.request(s+"/addItem",r).then(o=>(e.id=o.id,e.portal=this.portal,e.loaded?e.reload():e.load()))}deleteItem(t){let e=this.userContentUrl;return t.ownerFolder&&(e+="/"+t.ownerFolder),this.portal.request(e+`/items/${t.id}/delete`,{method:"post"}).then(()=>{t.id=null,t.portal=null})}deleteItems(t){const e=this.userContentUrl+"/deleteItems",i=t.map(n=>n.id);if(i.length){const n={method:"post",query:{items:i.join(",")}};return this.portal.request(e,n).then(()=>{t.forEach(r=>{r.id=null,r.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const t={query:{num:1}};return this.portal.request(this.userContentUrl??"",t).then(e=>{let i;return i=e&&e.folders?e.folders.map(n=>{const r=ePe.fromJSON(n);return r.portal=this.portal,r}):[],i})}fetchGroups(){return this.portal.request(this.url??"").then(t=>{let e;return e=t&&t.groups?t.groups.map(i=>{const n=Zz.fromJSON(i);return n.portal=this.portal,n}):[],e})}fetchItems(t){const e=t??{};let i,n=this.userContentUrl??"";return e.folder&&(n+="/"+e.folder.id),q(()=>Promise.resolve().then(()=>ffe),void 0).then(({default:r})=>{i=r;const s={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal.request(n,{query:s})}).then(r=>{let s;return r&&r.items?(s=r.items.map(o=>{const a=i.fromJSON(o);return a.portal=this.portal,a}),Promise.all(s.map(o=>o.load())).catch(o=>o).then(()=>({items:s,nextStart:r.nextStart,total:r.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal.request(this.url+"/tags").then(t=>t.tags)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}queryFavorites(t){return this.favGroupId?(this._favGroup||(this._favGroup=new Zz({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(t)):Promise.reject(new N("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new N("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");const e=new Kz;return e.sourceJSON=t,e.read(t),e}};c([d()],hi.prototype,"access",void 0),c([d({type:Date})],hi.prototype,"created",void 0),c([d()],hi.prototype,"culture",void 0),c([d()],hi.prototype,"description",void 0),c([d()],hi.prototype,"email",void 0),c([d()],hi.prototype,"favGroupId",void 0),c([d()],hi.prototype,"fullName",void 0),c([d({type:Date})],hi.prototype,"modified",void 0),c([d()],hi.prototype,"orgId",void 0),c([d()],hi.prototype,"portal",void 0),c([d()],hi.prototype,"preferredView",void 0),c([d()],hi.prototype,"privileges",void 0),c([d()],hi.prototype,"region",void 0),c([d()],hi.prototype,"role",void 0),c([d()],hi.prototype,"roleId",void 0),c([d()],hi.prototype,"sourceJSON",void 0),c([d()],hi.prototype,"thumbnail",void 0),c([d({readOnly:!0})],hi.prototype,"thumbnailUrl",null),c([d()],hi.prototype,"units",void 0),c([d({readOnly:!0})],hi.prototype,"userContentUrl",null),c([d({readOnly:!0})],hi.prototype,"url",null),c([d()],hi.prototype,"username",void 0),c([d()],hi.prototype,"userType",void 0),hi=Kz=c([O("esri.portal.PortalUser")],hi);const P9=hi,iPe=Object.freeze(Object.defineProperty({__proto__:null,default:P9},Symbol.toStringTag,{value:"Module"}));var Xo;let tD;const WW={PortalGroup:()=>q(()=>Promise.resolve().then(()=>tPe),void 0),PortalItem:()=>q(()=>Promise.resolve().then(()=>ffe),void 0),PortalUser:()=>q(()=>Promise.resolve().then(()=>iPe),void 0)};let ye=Xo=class extends Gw(_l){constructor(t){super(t),this._esriIdCredentialCreateHandle=null,this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=lt.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(t){return typeof t=="string"?{url:t}:t}destroy(){this._esriIdCredentialCreateHandle=bn(this._esriIdCredentialCreateHandle)}readAuthorizedCrossOriginDomains(t){if(t)for(const e of t)lt.request.trustedServers.includes(e)||lt.request.trustedServers.push(e);return t}readDefaultBasemap(t){return this._readBasemap(t)}readDefaultDevBasemap(t){return this._readBasemap(t)}readDefaultVectorBasemap(t){return this._readBasemap(t)}get extraQuery(){const t=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!t?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get itemPageUrl(){return this.url?`${this.url}/home/item.html`:null}get restUrl(){let t=this.url;if(t){const e=t.indexOf("/sharing");t=e>0?t.substring(0,e):this.url.replace(/\/+$/,""),t+="/sharing/rest"}return t}get thumbnailUrl(){const t=this.restUrl,e=this.thumbnail;return t&&e?this._normalizeSSL(t+"/portals/self/resources/"+e):null}readUrlKey(t){return t&&t.toLowerCase()}readUser(t){let e=null;return t&&(e=P9.fromJSON(t),e.portal=this),e}load(t){const e=q(()=>Promise.resolve().then(()=>EHe),void 0).then(({default:i})=>{Xi(t),tD=i}).then(()=>this.sourceJSON?this.sourceJSON:this.fetchSelf(this.authMode,!1,t)).then(i=>{if(Ne){const n=Ne;this.credential=n.findCredential(this.restUrl),this.credential||this.authMode!==Xo.AUTH_MODE_AUTO||(this._esriIdCredentialCreateHandle=n.on("credential-create",()=>{n.findCredential(this.restUrl)&&this.signIn().catch(()=>{})}))}this.sourceJSON=i,this.read(i)});return this.addResolvingPromise(e),Promise.resolve(this)}async createElevationLayers(){await this.load();const t=this._getHelperService("defaultElevationLayers"),e=(await q(()=>import("./ElevationLayer-2f4468ce.js"),["assets/ElevationLayer-2f4468ce.js","assets/ArcGISCachedService-985db020.js","assets/TilemapCache-e9fc1d5f.js","assets/WorkerHandle-e4c415d7.js"])).default;return t?t.map(i=>new e({id:i.id,url:i.url})):[]}fetchBasemaps(t,e){const i=new eh;return i.query=t||(lt.apiKey&&M9(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),i.disableExtraQuery=!0,this.queryGroups(i,e).then(n=>{if(i.num=100,i.query='type:"Web Map" -type:"Web Application"',n.total){const r=n.results[0];return i.sortField=r.sortField||"name",i.sortOrder=r.sortOrder||"desc",r.queryItems(i,e)}return null}).then(n=>{let r;return r=n&&n.total?n.results.filter(s=>s.type==="Web Map").map(s=>new tD({portalItem:s})):[],r})}fetchCategorySchema(t){return this.hasCategorySchema?this.request(this.restUrl+"/portals/self/categorySchema",t).then(e=>e.categorySchema):$a(t)?Promise.reject(li()):Promise.resolve([])}fetchFeaturedGroups(t){const e=this.featuredGroups,i=new eh;if(i.num=100,i.sortField="title",e&&e.length){const n=[];for(const r of e)n.push(`(title:"${r.title}" AND owner:${r.owner})`);return i.query=n.join(" OR "),this.queryGroups(i,t).then(r=>r.results)}return $a(t)?Promise.reject(li()):Promise.resolve([])}fetchRegions(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||sr();return this.request(this.restUrl+"/portals/regions",{...t,query:{culture:e}})}fetchSettings(t){var i;const e=((i=this.user)==null?void 0:i.culture)||this.culture||sr();return this.request(this.restUrl+"/portals/self/settings",{...t,query:{culture:e}})}static getDefault(){return Xo._default&&!Xo._default.destroyed||(Xo._default=new Xo),Xo._default}queryGroups(t,e){return this.queryPortal("/community/groups",t,"PortalGroup",e)}queryItems(t,e){return this.queryPortal("/search",t,"PortalItem",e)}queryUsers(t,e){return t.sortField||(t.sortField="username"),this.queryPortal("/community/users",t,"PortalUser",e)}fetchSelf(t=this.authMode,e=!1,i){const n=this.restUrl+"/portals/self",r={authMode:t,query:{culture:sr().toLowerCase()},...i};return r.authMode==="auto"&&(r.authMode="no-prompt"),e&&(r.query.default=!0),this.request(n,r)}queryPortal(t,e,i,n){const r=Ht(eh,e),s=o=>this.request(this.restUrl+t,{...r.toRequestOptions(this),...n}).then(a=>{const l=r.clone();return l.start=a.nextStart,new QOe({nextQueryParams:l,queryParams:r,total:a.total,results:Xo._resultsToTypedArray(o,{portal:this},a,n)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(Tu(l),a)));return i&&WW[i]?WW[i]().then(({default:o})=>(Xi(n),s(o))):s()}signIn(){if(this.authMode===Xo.AUTH_MODE_ANONYMOUS)return Promise.reject(new N("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const t=e=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(e||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=e,this.fetchSelf("immediate"))):this.user&&this.credential===e?null:(this.credential=e,this.fetchSelf("immediate"))).then(i=>{i&&(this.sourceJSON=i,this.read(i))});return Ne?Ne.getCredential(this.restUrl).then(e=>t(e)):t(this.credential)}normalizeUrl(t){const e=this.credential&&this.credential.token;return this._normalizeSSL(e?t+(t.includes("?")?"&":"?")+"token="+e:t)}requestToTypedArray(t,e,i){return this.request(t,e).then(n=>{const r=Xo._resultsToTypedArray(i,{portal:this},n);return Promise.all(r.map(s=>typeof s.when=="function"?s.when():n)).then(()=>r,()=>r)})}request(t,e={}){const i={f:"json",...e.query},{authMode:n=this.authMode===Xo.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:r=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=e,u={authMode:n,body:r,cacheBust:s,method:o,query:i,responseType:a,timeout:0,signal:l};return rt(this._normalizeSSL(t),u).then(h=>h.data)}toJSON(){throw new N("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new Xo({sourceJSON:t})}_getHelperService(t){const e=this.helperServices&&this.helperServices[t];if(!e)throw new N("portal:service-not-found",`The \`helperServices\` do not include an entry named "${t}"`);return e}_normalizeSSL(t){return t.replace(/^http:/i,"https:").replace(":7080",":7443")}_readBasemap(t){if(t){const e=tD.fromJSON(t);return e.portalItem={portal:this},e}return null}static _resultsToTypedArray(t,e,i,n){let r=[];if(i){const s=A(n)?n.signal:null;r=i.listings||i.notifications||i.userInvitations||i.tags||i.items||i.groups||i.comments||i.provisions||i.results||i.relatedItems||i,(t||e)&&(r=r.map(o=>{const a=Object.assign(t?t.fromJSON(o):o,e);return typeof a.load=="function"&&a.load(s),a}))}else r=[];return r}};ye.AUTH_MODE_ANONYMOUS="anonymous",ye.AUTH_MODE_AUTO="auto",ye.AUTH_MODE_IMMEDIATE="immediate",c([d()],ye.prototype,"access",void 0),c([d()],ye.prototype,"allSSL",void 0),c([d()],ye.prototype,"authMode",void 0),c([d()],ye.prototype,"authorizedCrossOriginDomains",void 0),c([de("authorizedCrossOriginDomains")],ye.prototype,"readAuthorizedCrossOriginDomains",null),c([d()],ye.prototype,"basemapGalleryGroupQuery",void 0),c([d()],ye.prototype,"bingKey",void 0),c([d()],ye.prototype,"canListApps",void 0),c([d()],ye.prototype,"canListData",void 0),c([d()],ye.prototype,"canListPreProvisionedItems",void 0),c([d()],ye.prototype,"canProvisionDirectPurchase",void 0),c([d()],ye.prototype,"canSearchPublic",void 0),c([d()],ye.prototype,"canShareBingPublic",void 0),c([d()],ye.prototype,"canSharePublic",void 0),c([d()],ye.prototype,"canSignInArcGIS",void 0),c([d()],ye.prototype,"canSignInIDP",void 0),c([d()],ye.prototype,"colorSetsGroupQuery",void 0),c([d()],ye.prototype,"commentsEnabled",void 0),c([d({type:Date})],ye.prototype,"created",void 0),c([d()],ye.prototype,"credential",void 0),c([d()],ye.prototype,"culture",void 0),c([d()],ye.prototype,"currentVersion",void 0),c([d()],ye.prototype,"customBaseUrl",void 0),c([d()],ye.prototype,"defaultBasemap",void 0),c([de("defaultBasemap")],ye.prototype,"readDefaultBasemap",null),c([d()],ye.prototype,"defaultDevBasemap",void 0),c([de("defaultDevBasemap")],ye.prototype,"readDefaultDevBasemap",null),c([d({type:Dt})],ye.prototype,"defaultExtent",void 0),c([d()],ye.prototype,"defaultVectorBasemap",void 0),c([de("defaultVectorBasemap")],ye.prototype,"readDefaultVectorBasemap",null),c([d()],ye.prototype,"description",void 0),c([d()],ye.prototype,"devBasemapGalleryGroupQuery",void 0),c([d()],ye.prototype,"eueiEnabled",void 0),c([d({readOnly:!0})],ye.prototype,"extraQuery",null),c([d()],ye.prototype,"featuredGroups",void 0),c([d()],ye.prototype,"featuredItemsGroupQuery",void 0),c([d()],ye.prototype,"galleryTemplatesGroupQuery",void 0),c([d()],ye.prototype,"livingAtlasGroupQuery",void 0),c([d()],ye.prototype,"hasCategorySchema",void 0),c([d()],ye.prototype,"helpBase",void 0),c([d()],ye.prototype,"helperServices",void 0),c([d()],ye.prototype,"helpMap",void 0),c([d()],ye.prototype,"homePageFeaturedContent",void 0),c([d()],ye.prototype,"homePageFeaturedContentCount",void 0),c([d()],ye.prototype,"httpPort",void 0),c([d()],ye.prototype,"httpsPort",void 0),c([d()],ye.prototype,"id",void 0),c([d()],ye.prototype,"ipCntryCode",void 0),c([d({readOnly:!0})],ye.prototype,"isOrganization",null),c([d()],ye.prototype,"isPortal",void 0),c([d()],ye.prototype,"isReadOnly",void 0),c([d({readOnly:!0})],ye.prototype,"itemPageUrl",null),c([d()],ye.prototype,"layerTemplatesGroupQuery",void 0),c([d()],ye.prototype,"maxTokenExpirationMinutes",void 0),c([d({type:Date})],ye.prototype,"modified",void 0),c([d()],ye.prototype,"name",void 0),c([d()],ye.prototype,"portalHostname",void 0),c([d()],ye.prototype,"portalMode",void 0),c([d()],ye.prototype,"portalProperties",void 0),c([d()],ye.prototype,"region",void 0),c([d({readOnly:!0})],ye.prototype,"restUrl",null),c([d()],ye.prototype,"rotatorPanels",void 0),c([d()],ye.prototype,"showHomePageDescription",void 0),c([d()],ye.prototype,"sourceJSON",void 0),c([d()],ye.prototype,"staticImagesUrl",void 0),c([d({json:{name:"2DStylesGroupQuery"}})],ye.prototype,"stylesGroupQuery2d",void 0),c([d({json:{name:"stylesGroupQuery"}})],ye.prototype,"stylesGroupQuery3d",void 0),c([d()],ye.prototype,"supportsHostedServices",void 0),c([d()],ye.prototype,"symbolSetsGroupQuery",void 0),c([d()],ye.prototype,"templatesGroupQuery",void 0),c([d()],ye.prototype,"thumbnail",void 0),c([d({readOnly:!0})],ye.prototype,"thumbnailUrl",null),c([d()],ye.prototype,"units",void 0),c([d()],ye.prototype,"url",void 0),c([d()],ye.prototype,"urlKey",void 0),c([de("urlKey")],ye.prototype,"readUrlKey",null),c([d()],ye.prototype,"user",void 0),c([de("user")],ye.prototype,"readUser",null),c([d()],ye.prototype,"useStandardizedQuery",void 0),c([d()],ye.prototype,"useVectorBasemaps",void 0),c([d()],ye.prototype,"vectorBasemapGalleryGroupQuery",void 0),ye=Xo=c([O("esri.portal.Portal")],ye);const zi=ye;let Tg=class extends _t(Y){constructor(e){super(e),this.type="style",this.placement="begin-end",this.style="arrow",this.color=null}equals(e){return A(e)&&e.placement===this.placement&&e.style===this.style&&(U(this.color)&&U(e.color)||A(this.color)&&A(e.color)&&this.color.toJSON()===e.color.toJSON())}};c([d({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],Tg.prototype,"type",void 0),c([d({type:gMe,json:{default:"begin-end",write:!0}})],Tg.prototype,"placement",void 0),c([d({type:ale,json:{default:"arrow",write:!0}})],Tg.prototype,"style",void 0),c([d({type:Se,json:{type:[Bt],default:null,write:!0}})],Tg.prototype,"color",void 0),Tg=c([O("esri.symbols.LineStyleMarker3D")],Tg);const Xz=Tg;var x$;let iu=x$=class extends Xu{constructor(t){super(t),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=ju(1),this.pattern=null,this.marker=null}clone(){const t={enabled:this.enabled,material:A(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:A(this.pattern)?this.pattern.clone():null,marker:A(this.marker)?this.marker.clone():null};return new x$(t)}static fromSimpleLineSymbol(t){var i;const e={enabled:!0,size:t.width??ju(1),cap:t.cap||"butt",join:t.join||"miter",pattern:t.style&&t.style!=="inside-frame"?new m9({style:t.style}):null,material:new Ea({color:(t.color||yE).clone()}),marker:t.marker?new Xz({placement:t.marker.placement,style:t.marker.style,color:((i=t.marker.color)==null?void 0:i.clone())??null}):null};return new x$(e)}};c([d({type:Ea,json:{write:!0}})],iu.prototype,"material",void 0),c([Ce({Line:"line"},{readOnly:!0})],iu.prototype,"type",void 0),c([d({type:fle,json:{write:!0,default:"miter"}})],iu.prototype,"join",void 0),c([d({type:b9,json:{write:!0,default:"butt"}})],iu.prototype,"cap",void 0),c([d(Vu)],iu.prototype,"size",void 0),c([d(hle)],iu.prototype,"pattern",void 0),c([d({types:{key:"type",base:Xz,typeMap:{style:Xz}},json:{write:!0}})],iu.prototype,"marker",void 0),iu=x$=c([O("esri.symbols.LineSymbol3DLayer")],iu);const jI=iu;var Qz;const nPe=kr()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let aS=Qz=class extends Y{clone(){return new Qz({href:this.href,primitive:this.primitive})}};c([d({type:String,json:{read:$9,write:x0}})],aS.prototype,"href",void 0),c([Ce(nPe)],aS.prototype,"primitive",void 0),aS=Qz=c([O("esri.symbols.support.ObjectSymbol3DLayerResource")],aS);const rPe="sphere";var e4;let py=e4=class extends _e{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new e4({x:this.x,y:this.y,z:this.z})}};c([d({type:Number})],py.prototype,"x",void 0),c([d({type:Number})],py.prototype,"y",void 0),c([d({type:Number})],py.prototype,"z",void 0),py=e4=c([O("esri.symbols.support.Symbol3DAnchorPosition3D")],py);var t4;let us=t4=class extends Xu{constructor(t){super(t),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new t4({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:A(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};c([d({type:Ea,json:{write:!0}})],us.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],us.prototype,"castShadows",void 0),c([d({type:aS,json:{write:!0}})],us.prototype,"resource",void 0),c([Ce({Object:"object"},{readOnly:!0})],us.prototype,"type",void 0),c([d({type:Number,json:{write:!0}})],us.prototype,"width",void 0),c([d({type:Number,json:{write:!0}})],us.prototype,"height",void 0),c([d({type:Number,json:{write:!0}})],us.prototype,"depth",void 0),c([Ce({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),d({json:{default:"origin"}})],us.prototype,"anchor",void 0),c([d({type:py,json:{type:[Number],read:{reader:t=>new py({x:t[0],y:t[1],z:t[2]})},write:{writer:(t,e)=>{e.anchorPosition=[t.x,t.y,t.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],us.prototype,"anchorPosition",void 0),c([d({type:Number,json:{write:!0}})],us.prototype,"heading",void 0),c([d({type:Number,json:{write:!0}})],us.prototype,"tilt",void 0),c([d({type:Number,json:{write:!0}})],us.prototype,"roll",void 0),c([d({readOnly:!0})],us.prototype,"isPrimitive",null),us=t4=c([O("esri.symbols.ObjectSymbol3DLayer")],us);const R9=us;var i4;let Ls=i4=class extends Xu{constructor(t){super(t),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(t,e){return t??(e.height==null&&e.size!=null?e.size:void 0)}readHeight(t,e){return t??(e.width==null&&e.size!=null?e.size:void 0)}clone(){return new i4({enabled:this.enabled,material:A(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};c([d({type:Ea,json:{write:!0}})],Ls.prototype,"material",void 0),c([d({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Ls.prototype,"castShadows",void 0),c([Ce({Path:"path"},{readOnly:!0})],Ls.prototype,"type",void 0),c([d({type:["circle","quad"],json:{write:!0,default:"circle"}})],Ls.prototype,"profile",void 0),c([d({type:fle,json:{write:!0,default:"miter"}})],Ls.prototype,"join",void 0),c([d({type:NMe,json:{write:!0,default:"butt"}})],Ls.prototype,"cap",void 0),c([d({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Ls.prototype,"width",void 0),c([de("width",["width","size","height"])],Ls.prototype,"readWidth",null),c([d({type:Number,json:{write:!0}})],Ls.prototype,"height",void 0),c([de("height",["height","size","width"])],Ls.prototype,"readHeight",null),c([d({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Ls.prototype,"anchor",void 0),c([d({type:["heading","all"],json:{write:!0,default:"all"}})],Ls.prototype,"profileRotation",void 0),Ls=i4=c([O("esri.symbols.PathSymbol3DLayer")],Ls);const L9=Ls;var n4;let i_=n4=class extends Y{constructor(){super(...arguments),this.color=new Se([0,0,0,1]),this.size=0}clone(){const t={color:G(this.color),size:this.size};return new n4(t)}};c([d(Im)],i_.prototype,"color",void 0),c([d(Vu)],i_.prototype,"size",void 0),i_=n4=c([O("esri.symbols.support.Symbol3DHalo")],i_);let bE=class extends _t(Y){constructor(e){super(e),this.color=null}};c([d(Im)],bE.prototype,"color",void 0),bE=c([O("esri.symbols.support.Symbol3DTextBackground")],bE);var S$;let oo=S$=class extends Xu{constructor(t){super(t),this._userSize=void 0,this.halo=null,this.horizontalAlignment="center",this.lineHeight=1,this.material=null,this.background=null,this.text=null,this.type="text",this.verticalAlignment="baseline"}get font(){return this._get("font")||null}set font(t){A(t)&&A(this._userSize)&&(t.size=this._userSize),this._set("font",t)}writeFont(t,e,i,n){const r={...n,textSymbol3D:!0};e.font=t.write({},r),delete e.font.size}get size(){return A(this._userSize)?this._userSize:A(this.font)&&this.font.size!=null?this.font.size:9}set size(t){this._userSize=t,A(this.font)&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){const t=new S$({enabled:this.enabled,font:this.font&&G(this.font),halo:this.halo&&G(this.halo),horizontalAlignment:this.horizontalAlignment,lineHeight:this.lineHeight,material:A(this.material)?this.material.clone():null,text:this.text,verticalAlignment:this.verticalAlignment,background:G(this.background)});return t._userSize=this._userSize,t}static fromTextSymbol(t){return new S$({font:A(t.font)?t.font.clone():new qP,halo:sPe(t.haloColor,t.haloSize),horizontalAlignment:t.horizontalAlignment,lineHeight:t.lineHeight,material:t.color?new Ea({color:t.color.clone()}):null,text:t.text,verticalAlignment:t.verticalAlignment,background:t.backgroundColor?new bE({color:t.backgroundColor.clone()}):null})}};function sPe(t,e){return t&&e!=null&&e>0?new i_({color:G(t),size:e}):null}c([d({type:qP,json:{write:!0}})],oo.prototype,"font",null),c([fe("font")],oo.prototype,"writeFont",null),c([d({type:i_,json:{write:!0}})],oo.prototype,"halo",void 0),c([d({...gle,json:{default:"center",write:!0}})],oo.prototype,"horizontalAlignment",void 0),c([d({...mle,json:{default:1,write:!0}})],oo.prototype,"lineHeight",void 0),c([d({type:Ea,json:{write:!0}})],oo.prototype,"material",void 0),c([d({type:bE,json:{write:!0}})],oo.prototype,"background",void 0),c([d(Vu)],oo.prototype,"size",null),c([d({type:String,json:{write:!0}})],oo.prototype,"text",void 0),c([Ce({Text:"text"},{readOnly:!0})],oo.prototype,"type",void 0),c([d({...yle,json:{default:"baseline",write:!0}})],oo.prototype,"verticalAlignment",void 0),oo=S$=c([O("esri.symbols.TextSymbol3DLayer")],oo);const Xw=oo;var r4;let wp=r4=class extends Xu{constructor(t){super(t),this.color=s4.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new r4({color:G(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};c([d({type:Se,nonNullable:!0,json:{type:[Bt],write:(t,e,i)=>e[i]=t.toArray(Se.AlphaMode.UNLESS_OPAQUE),default:()=>s4.clone(),defaultEquals:t=>t.toCss(!0)===s4.toCss(!0)}})],wp.prototype,"color",void 0),c([Ce({Water:"water"},{readOnly:!0})],wp.prototype,"type",void 0),c([d({type:["small","medium","large"],json:{write:!0,default:"medium"}})],wp.prototype,"waterbodySize",void 0),c([d({type:Number,json:{write:!0,default:null}})],wp.prototype,"waveDirection",void 0),c([d({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],wp.prototype,"waveStrength",void 0),wp=r4=c([O("esri.symbols.WaterSymbol3DLayer")],wp);const s4=new Se([0,119,190]),Fle=wp;var o4;let kg=o4=class extends _e{constructor(t){super(t),this.name=null,this.styleUrl=null,this.styleName=null,this.portal=null}clone(){return new o4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};c([d({type:String})],kg.prototype,"name",void 0),c([d({type:String})],kg.prototype,"styleUrl",void 0),c([d({type:String})],kg.prototype,"styleName",void 0),c([d({type:zi})],kg.prototype,"portal",void 0),kg=o4=c([O("esri.symbols.support.StyleOrigin")],kg);const MC=kg;var a4;let t0=a4=class extends _e{constructor(){super(...arguments),this.url=""}clone(){return new a4({url:this.url})}};c([d({type:String})],t0.prototype,"url",void 0),t0=a4=c([O("esri.symbols.support.Thumbnail")],t0);const Nle={icon:Oy,object:R9,line:jI,path:L9,fill:DI,extrude:ole,text:Xw,water:Fle},oPe=we.ofType({base:Xu,key:"type",typeMap:Nle,errorContext:"symbol-layer"});let nu=class extends Uo{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const i=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,n=i&&i.type||we;this._set("symbolLayers",new n)}get color(){return null}set color(e){this.constructed&&se.getLogger(this.declaredClass).error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){S0(e,this._get("symbolLayers"))}readStyleOrigin(e,i,n){if(e.styleUrl&&e.name){const r=nm(e.styleUrl,n);return new MC({styleUrl:r,name:e.name})}if(e.styleName&&e.name)return new MC({portal:n&&n.portal||zi.getDefault(),styleName:e.styleName,name:e.name});n&&n.messages&&n.messages.push(new bl("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:n,definition:e}))}writeStyleOrigin(e,i,n,r){if(e.styleUrl&&e.name){let s=NI(e.styleUrl,r);Ia(s)&&(s=Ca(s)),i.styleOrigin={styleUrl:s,name:e.name}}else e.styleName&&e.name&&(e.portal&&r&&r.portal&&!xle(e.portal.restUrl,r.portal.restUrl)?r&&r.messages&&r.messages.push(new bl("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):i.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Xu||e&&Nle[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};c([d({json:{read:!1,write:!1}})],nu.prototype,"color",null),c([d({type:oPe,nonNullable:!0,json:{write:!0}}),st(Mle)],nu.prototype,"symbolLayers",null),c([d({type:MC})],nu.prototype,"styleOrigin",void 0),c([de("styleOrigin")],nu.prototype,"readStyleOrigin",null),c([fe("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],nu.prototype,"writeStyleOrigin",null),c([d({type:t0,json:{read:!1}})],nu.prototype,"thumbnail",void 0),c([d({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],nu.prototype,"type",void 0),nu=c([O("esri.symbols.Symbol3D")],nu);const Qw=nu;let lS=class extends Y{constructor(e){super(e),this.visible=!0}clone(){}};c([d({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],lS.prototype,"type",void 0),c([d({readOnly:!0})],lS.prototype,"visible",void 0),lS=c([O("esri.symbols.callouts.Callout3D")],lS);const zle=lS;var l4;let E$=l4=class extends Y{constructor(){super(...arguments),this.color=new Se("white")}clone(){return new l4({color:G(this.color)})}};c([d(Im)],E$.prototype,"color",void 0),E$=l4=c([O("esri.symbols.callouts.LineCallout3DBorder")],E$);const jle=E$;Object.freeze(Object.defineProperty({__proto__:null,default:jle},Symbol.toStringTag,{value:"Module"}));var c4;let xp=c4=class extends zle{constructor(t){super(t),this.type="line",this.color=new Se([0,0,0,1]),this.size=ju(1),this.border=null}get visible(){return this.size>0&&A(this.color)&&this.color.a>0}clone(){return new c4({color:G(this.color),size:this.size,border:G(this.border)})}};c([Ce({line:"line"},{readOnly:!0})],xp.prototype,"type",void 0),c([d(Im)],xp.prototype,"color",void 0),c([d(Vu)],xp.prototype,"size",void 0),c([d({type:jle,json:{write:!0}})],xp.prototype,"border",void 0),c([d({readOnly:!0})],xp.prototype,"visible",null),xp=c4=c([O("esri.symbols.callouts.LineCallout3D")],xp);const aPe=xp;function D9(t){if(!t)return!1;const e=t.verticalOffset;return!!e&&!(e.screenLength<=0||A(e.maxWorldLength)&&e.maxWorldLength<=0)}function Vle(t){if(!t||!t.supportsCallout||!t.supportsCallout())return!1;const e=t.callout;return!!e&&!!e.visible&&!!D9(t)}function n0t(t){return t.type==="point-3d"||t.type==="label-3d"}function r0t(t){return t.horizontalAlignment==="center"}const Ule={types:{key:"type",base:zle,typeMap:{line:aPe}},json:{write:!0}};var u4;let zv=u4=class extends Y{constructor(t){super(t),this.screenLength=0,this.minWorldLength=0,this.maxWorldLength=null}clone(){return new u4({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};c([d(Vu)],zv.prototype,"screenLength",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0,default:0}})],zv.prototype,"minWorldLength",void 0),c([d({type:Number,json:{write:!0}})],zv.prototype,"maxWorldLength",void 0),zv=u4=c([O("esri.symbols.support.Symbol3DVerticalOffset")],zv);const Ble=zv;var C$;const Hle=we.ofType({base:null,key:"type",typeMap:{text:Xw}});let Sp=C$=class extends Qw{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new Hle,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return Vle(this)}hasVisibleVerticalOffset(){return D9(this)}clone(){return new C$({styleOrigin:G(this.styleOrigin),symbolLayers:G(this.symbolLayers),thumbnail:G(this.thumbnail),callout:G(this.callout),verticalOffset:G(this.verticalOffset)})}static fromTextSymbol(t){return new C$({symbolLayers:[Xw.fromTextSymbol(t)]})}};c([d({type:Ble,json:{write:!0}})],Sp.prototype,"verticalOffset",void 0),c([d(Ule)],Sp.prototype,"callout",void 0),c([d({json:{read:!1,write:!1}})],Sp.prototype,"styleOrigin",void 0),c([d({type:Hle})],Sp.prototype,"symbolLayers",void 0),c([Ce({LabelSymbol3D:"label-3d"},{readOnly:!0})],Sp.prototype,"type",void 0),Sp=C$=c([O("esri.symbols.LabelSymbol3D")],Sp);const YP=Sp;var I$;const Gle=we.ofType({base:null,key:"type",typeMap:{line:jI,path:L9}}),lPe=we.ofType({base:null,key:"type",typeMap:{line:jI,path:L9}});let cS=I$=class extends Qw{constructor(t){super(t),this.symbolLayers=new Gle,this.type="line-3d"}clone(){return new I$({styleOrigin:G(this.styleOrigin),symbolLayers:G(this.symbolLayers),thumbnail:G(this.thumbnail)})}static fromSimpleLineSymbol(t){return new I$({symbolLayers:[jI.fromSimpleLineSymbol(t)]})}};c([d({type:Gle,json:{type:lPe}})],cS.prototype,"symbolLayers",void 0),c([Ce({LineSymbol3D:"line-3d"},{readOnly:!0})],cS.prototype,"type",void 0),cS=I$=c([O("esri.symbols.LineSymbol3D")],cS);const ZP=cS;let Ep=class extends Uo{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};c([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Ep.prototype,"angle",void 0),c([d({type:["simple-marker","picture-marker"],readOnly:!0})],Ep.prototype,"type",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Ep.prototype,"xoffset",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Ep.prototype,"yoffset",void 0),c([d({type:Number,cast:t=>t==="auto"?t:vt(t),json:{write:!0}})],Ep.prototype,"size",void 0),Ep=c([O("esri.symbols.MarkerSymbol")],Ep);const qle=Ep;var T$;const Wle=we.ofType({base:null,key:"type",typeMap:{fill:DI}});let uS=T$=class extends Qw{constructor(t){super(t),this.symbolLayers=new Wle,this.type="mesh-3d"}clone(){return new T$({styleOrigin:G(this.styleOrigin),symbolLayers:G(this.symbolLayers),thumbnail:G(this.thumbnail)})}static fromSimpleFillSymbol(t){return new T$({symbolLayers:[DI.fromSimpleFillSymbol(t)]})}};c([d({type:Wle})],uS.prototype,"symbolLayers",void 0),c([Ce({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],uS.prototype,"type",void 0),uS=T$=c([O("esri.symbols.MeshSymbol3D")],uS);const KP=uS;function cPe(t,e,i){return e.imageData?Ele({mediaType:e.contentType||"image/png",isBase64:!0,data:e.imageData}):Jle(e.url,i)}function Jle(t,e){var i;return dPe(e)&&!Ia(t)&&((i=e==null?void 0:e.layer)!=null&&i.parsedUrl)?w0(e.layer.parsedUrl.path,"images",t):nm(t,e)}function uPe(t,e,i,n){if(Tm(t)){const r=JP(t);if(!r)return;e.contentType=r.mediaType,e.imageData=r.data,i&&i.imageData===e.imageData&&i.url&&x0(i.url,e,"url",n)}else x0(t,e,"url",n)}const Yle={json:{read:{source:["imageData","url"],reader:cPe},write:{writer(t,e,i,n){uPe(t,e,this.source,n)}}}},Zle={readOnly:!0,json:{read:{source:["imageData","url"],reader(t,e,i){const n={};return e.imageData&&(n.imageData=e.imageData),e.contentType&&(n.contentType=e.contentType),e.url&&(n.url=Jle(e.url,i)),n}}}};function dPe(t){var e,i;return!(t==null||t.origin!=="service"&&t.origin!=="portal-item"||((e=t.layer)==null?void 0:e.type)!=="feature"&&((i=t.layer)==null?void 0:i.type)!=="stream")}var d4;let Wa=d4=class extends lle{constructor(...t){super(...t),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(t,e,i,n){if(t&&typeof t!="string"&&t.imageData==null)return t;const r={};return t&&(r.url=t),e&&(r.outline=e),i!=null&&(r.width=vt(i)),n!=null&&(r.height=vt(n)),r}clone(){const t=new d4({color:G(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return t._set("source",G(this.source)),t}hash(){var t;return`${super.hash()}.${(t=this.color)==null?void 0:t.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};c([Ce({esriPFS:"picture-fill"},{readOnly:!0})],Wa.prototype,"type",void 0),c([d(Yle)],Wa.prototype,"url",void 0),c([d({type:Number,json:{write:!0}})],Wa.prototype,"xscale",void 0),c([d({type:Number,json:{write:!0}})],Wa.prototype,"yscale",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Wa.prototype,"width",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Wa.prototype,"height",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Wa.prototype,"xoffset",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Wa.prototype,"yoffset",void 0),c([d(Zle)],Wa.prototype,"source",void 0),Wa=d4=c([O("esri.symbols.PictureFillSymbol")],Wa);const Kle=Wa;var h4;let Gl=h4=class extends qle{constructor(...t){super(...t),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string"&&t.imageData==null)return t;const n={};return t&&(n.url=t),e!=null&&(n.width=vt(e)),i!=null&&(n.height=vt(i)),n}readHeight(t,e){return e.size||t}readWidth(t,e){return e.size||t}clone(){const t=new h4({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return t._set("source",G(this.source)),t}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};c([d({json:{write:!1}})],Gl.prototype,"color",void 0),c([Ce({esriPMS:"picture-marker"},{readOnly:!0})],Gl.prototype,"type",void 0),c([d(Yle)],Gl.prototype,"url",void 0),c([d(Zle)],Gl.prototype,"source",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Gl.prototype,"height",void 0),c([de("height",["height","size"])],Gl.prototype,"readHeight",null),c([d({type:Number,cast:vt,json:{write:!0}})],Gl.prototype,"width",void 0),c([d({json:{write:!1}})],Gl.prototype,"size",void 0),Gl=h4=c([O("esri.symbols.PictureMarkerSymbol")],Gl);const e1=Gl;var $g;const Xle=we.ofType({base:null,key:"type",typeMap:{icon:Oy,object:R9,text:Xw}});let Ag=$g=class extends Qw{constructor(t){super(t),this.verticalOffset=null,this.callout=null,this.symbolLayers=new Xle,this.type="point-3d"}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const t of this.symbolLayers.items)switch(t.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return Vle(this)}hasVisibleVerticalOffset(){return D9(this)}clone(){return new $g({verticalOffset:G(this.verticalOffset),callout:G(this.callout),styleOrigin:G(this.styleOrigin),symbolLayers:G(this.symbolLayers),thumbnail:G(this.thumbnail)})}static fromSimpleMarkerSymbol(t){return new $g({symbolLayers:[Oy.fromSimpleMarkerSymbol(t)]})}static fromPictureMarkerSymbol(t){return new $g({symbolLayers:[Oy.fromPictureMarkerSymbol(t)]})}static fromCIMSymbol(t){var n,r;if(((r=(n=t.data)==null?void 0:n.symbol)==null?void 0:r.type)!=="CIMPointSymbol")return null;const i=t.data.symbol;return new $g(i!=null&&i.callout?{symbolLayers:[Oy.fromCIMSymbol(t)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}:{symbolLayers:[Oy.fromCIMSymbol(t)]})}static fromTextSymbol(t){return new $g({symbolLayers:[Xw.fromTextSymbol(t)]})}};c([d({type:Ble,json:{write:!0}})],Ag.prototype,"verticalOffset",void 0),c([d(Ule)],Ag.prototype,"callout",void 0),c([d({type:Xle,json:{origins:{"web-scene":{write:!0}}}})],Ag.prototype,"symbolLayers",void 0),c([Ce({PointSymbol3D:"point-3d"},{readOnly:!0})],Ag.prototype,"type",void 0),Ag=$g=c([O("esri.symbols.PointSymbol3D")],Ag);const Py=Ag;var dS;const Qle=we.ofType({base:null,key:"type",typeMap:{extrude:ole,fill:DI,icon:Oy,line:jI,object:R9,text:Xw,water:Fle}});let hS=dS=class extends Qw{constructor(t){super(t),this.symbolLayers=new Qle,this.type="polygon-3d"}clone(){return new dS({styleOrigin:G(this.styleOrigin),symbolLayers:G(this.symbolLayers),thumbnail:G(this.thumbnail)})}static fromJSON(t){const e=new dS;if(e.read(t),e.symbolLayers.length===2&&e.symbolLayers.getItemAt(0).type==="fill"&&e.symbolLayers.getItemAt(1).type==="line"){const i=e.symbolLayers.getItemAt(0),n=e.symbolLayers.getItemAt(1);!n.enabled||t.symbolLayers&&t.symbolLayers[1]&&t.symbolLayers[1].enable===!1||(i.outline={size:n.size,color:A(n.material)?n.material.color:null}),e.symbolLayers.removeAt(1)}return e}static fromSimpleFillSymbol(t){return new dS({symbolLayers:[DI.fromSimpleFillSymbol(t)]})}};c([d({type:Qle,json:{write:!0}})],hS.prototype,"symbolLayers",void 0),c([Ce({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],hS.prototype,"type",void 0),hS=dS=c([O("esri.symbols.PolygonSymbol3D")],hS);const VI=hS;var p4;const iD=new Fe({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let Mg=p4=class extends lle{constructor(...t){super(...t),this.color=new Se([0,0,0,.25]),this.outline=new Is,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const n={};return t&&(n.style=t),e&&(n.outline=e),i&&(n.color=i),n}clone(){return new p4({color:G(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};c([d()],Mg.prototype,"color",void 0),c([d()],Mg.prototype,"outline",void 0),c([Ce({esriSFS:"simple-fill"},{readOnly:!0})],Mg.prototype,"type",void 0),c([d({type:iD.apiValues,json:{read:iD.read,write:iD.write}})],Mg.prototype,"style",void 0),Mg=p4=c([O("esri.symbols.SimpleFillSymbol")],Mg);const Lc=Mg;var f4;const nD=new Fe({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ru=f4=class extends qle{constructor(...t){super(...t),this.color=new Se([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new Is}normalizeCtorArgs(t,e,i,n){if(t&&typeof t!="string")return t;const r={};return t&&(r.style=t),e!=null&&(r.size=vt(e)),i&&(r.outline=i),n&&(r.color=n),r}writeColor(t,e){t&&this.style!=="x"&&this.style!=="cross"&&(e.color=t.toJSON()),t===null&&(e.color=null)}set path(t){this.style="path",this._set("path",t)}clone(){return new f4({angle:this.angle,color:G(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(t=this.outline)==null?void 0:t.hash()}`}};c([d()],ru.prototype,"color",void 0),c([fe("color")],ru.prototype,"writeColor",null),c([Ce({esriSMS:"simple-marker"},{readOnly:!0})],ru.prototype,"type",void 0),c([d()],ru.prototype,"size",void 0),c([d({type:nD.apiValues,json:{read:nD.read,write:nD.write}})],ru.prototype,"style",void 0),c([d({type:String,json:{write:!0}})],ru.prototype,"path",null),c([d({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":Is}},json:{default:null,write:!0}})],ru.prototype,"outline",void 0),ru=f4=c([O("esri.symbols.SimpleMarkerSymbol")],ru);const $c=ru;var m4;let Ci=m4=class extends Uo{constructor(...t){super(...t),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new qP,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment="baseline",this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(t,e,i){if(t&&typeof t!="string")return t;const n={};return t&&(n.text=t),e&&(n.font=e),i&&(n.color=i),n}writeLineWidth(t,e,i,n){n&&typeof n!="string"?n.origin:e[i]=t}castLineWidth(t){return vt(t)}writeLineHeight(t,e,i,n){n&&typeof n!="string"?n.origin:e[i]=t}clone(){return new m4({angle:this.angle,backgroundColor:G(this.backgroundColor),borderLineColor:G(this.borderLineColor),borderLineSize:this.borderLineSize,color:G(this.color),font:this.font&&this.font.clone(),haloColor:G(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var t;return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${(t=this.color)==null?void 0:t.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};c([d({type:Se,json:{write:!0}})],Ci.prototype,"backgroundColor",void 0),c([d({type:Se,json:{write:!0}})],Ci.prototype,"borderLineColor",void 0),c([d({type:Number,json:{write:!0},cast:vt})],Ci.prototype,"borderLineSize",void 0),c([d({type:qP,json:{write:!0}})],Ci.prototype,"font",void 0),c([d({...gle,json:{write:!0}})],Ci.prototype,"horizontalAlignment",void 0),c([d({type:Boolean,json:{write:!0}})],Ci.prototype,"kerning",void 0),c([d({type:Se,json:{write:!0}})],Ci.prototype,"haloColor",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Ci.prototype,"haloSize",void 0),c([d({type:Boolean,json:{write:!0}})],Ci.prototype,"rightToLeft",void 0),c([d({type:Boolean,json:{write:!0}})],Ci.prototype,"rotated",void 0),c([d({type:String,json:{write:!0}})],Ci.prototype,"text",void 0),c([Ce({esriTS:"text"},{readOnly:!0})],Ci.prototype,"type",void 0),c([d({...yle,json:{write:!0}})],Ci.prototype,"verticalAlignment",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Ci.prototype,"xoffset",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Ci.prototype,"yoffset",void 0),c([d({type:Number,json:{read:t=>t&&-1*t,write:(t,e)=>e.angle=t&&-1*t}})],Ci.prototype,"angle",void 0),c([d({type:Number,json:{write:!0}})],Ci.prototype,"width",void 0),c([d({type:Number})],Ci.prototype,"lineWidth",void 0),c([fe("lineWidth")],Ci.prototype,"writeLineWidth",null),c([st("lineWidth")],Ci.prototype,"castLineWidth",null),c([d(mle)],Ci.prototype,"lineHeight",void 0),c([fe("lineHeight")],Ci.prototype,"writeLineHeight",null),Ci=m4=c([O("esri.symbols.TextSymbol")],Ci);const N0=Ci;var g4;let ql=g4=class extends Uo{constructor(t){super(t),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}get _fetchCacheKey(){const t=A(this.portal)?this.portal:zi.getDefault(),e=t.user?t.user.username:null;return`${this.styleName}:${this.styleUrl}:${this.name}:${e}:${t.url}`}read(t,e){this.portal=e==null?void 0:e.portal,super.read(t,e)}clone(){return new g4({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(t){return this._fetchSymbol("webRef",t)}fetchCIMSymbol(t){return this._fetchSymbol("cimRef",t)}async _fetchSymbol(t,e){const i=A(e)?e.cache:null,n=i?this._fetchCacheKey:null;if(A(i)){const a=n&&i.get(n);if(a)return a.clone()}const r=await hPe();Xi(e);const s=r.resolveWebStyleSymbol(this,{portal:this.portal},t,e);s.catch(a=>{se.getLogger(this.declaredClass).error("#fetchSymbol()","Failed to create symbol from style",a)});const o=await s;return t==="webRef"&&o.type==="point-3d"||t==="cimRef"&&o.type==="cim"?(A(i)&&i.set(n,o.clone()),o):null}};function hPe(){return q(()=>Promise.resolve().then(()=>R7e),void 0)}c([d({json:{write:!1}})],ql.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],ql.prototype,"styleName",void 0),c([d({type:zi,json:{write:!1}})],ql.prototype,"portal",void 0),c([d({type:String,json:{read:$9,write:x0}})],ql.prototype,"styleUrl",void 0),c([d({type:t0,json:{read:!1}})],ql.prototype,"thumbnail",void 0),c([d({type:String,json:{write:!0}})],ql.prototype,"name",void 0),c([Ce({styleSymbolReference:"web-style"},{readOnly:!0})],ql.prototype,"type",void 0),c([d()],ql.prototype,"_fetchCacheKey",null),ql=g4=c([O("esri.symbols.WebStyleSymbol")],ql);const z0=ql;function XP(t){if(!t)return!1;switch(t.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function rm(t){if(!t)return!1;switch(t.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const _o={base:Uo,key:"type",typeMap:{"simple-fill":Lc,"picture-fill":Kle,"picture-marker":e1,"simple-line":Is,"simple-marker":$c,text:N0,"label-3d":YP,"line-3d":ZP,"mesh-3d":KP,"point-3d":Py,"polygon-3d":VI,"web-style":z0,cim:OI},errorContext:"symbol"},pPe={base:Uo,key:"type",typeMap:{"picture-marker":e1,"simple-marker":$c,text:N0,"web-style":z0,cim:OI},errorContext:"symbol"},fPe=bm({types:_o}),QP={base:Uo,key:"type",typeMap:{"simple-fill":Lc,"picture-fill":Kle,"picture-marker":e1,"simple-line":Is,"simple-marker":$c,text:N0,"line-3d":ZP,"mesh-3d":KP,"point-3d":Py,"polygon-3d":VI,"web-style":z0,cim:OI},errorContext:"symbol"},mPe={base:Uo,key:"type",typeMap:{text:N0,"label-3d":YP},errorContext:"symbol"},JW={base:Uo,key:"type",typeMap:{"line-3d":ZP,"mesh-3d":KP,"point-3d":Py,"polygon-3d":VI,"web-style":z0,cim:OI},errorContext:"symbol"},gPe={base:Uo,key:"type",typeMap:{"label-3d":YP},errorContext:"symbol"},ece=Nu(_o);function yPe(t){if(!t)return null;const e={};for(const i in t){const n=Yr(t[i]);n&&(e[i]=n)}return Object.keys(e).length!==0?e:null}function vPe(t){if(!A(t))return null;const e={};for(const i in t){const n=t[i];n&&(e[i]=n.toJSON())}return Object.keys(e).length!==0?e:null}let ao=class extends _t(Y){constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:E_(),configurable:!0})}normalizeCtorArgs(e,i,n,r){return e&&!e.declaredClass?e:{geometry:e,symbol:i,attributes:n,popupTemplate:r}}set aggregateGeometries(e){const i=this._get("aggregateGeometries");JSON.stringify(i)!==JSON.stringify(e)&&this._set("aggregateGeometries",e)}set attributes(e){const i=this._get("attributes");i!==e&&(this._set("attributes",e),this._notifyLayer("attributes",i,e))}set geometry(e){const i=this._get("geometry");i!==e&&(this._set("geometry",e),this._notifyLayer("geometry",i,e))}set symbol(e){const i=this._get("symbol");i!==e&&(this._set("symbol",e),this._notifyLayer("symbol",i,e))}set visible(e){const i=this._get("visible");i!==e&&(this._set("visible",e),this._notifyLayer("visible",i,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const i of[this.sourceLayer,this.layer])if(i){if("popupTemplate"in i&&i.popupTemplate)return i.popupTemplate;if(e&&"defaultPopupTemplate"in i&&A(i.defaultPopupTemplate))return i.defaultPopupTemplate}return null}getAttribute(e){var i;return(i=this.attributes)==null?void 0:i[e]}setAttribute(e,i){if(this.attributes){const n=this.getAttribute(e);this.attributes[e]=i,this._notifyLayer("attributes",n,i,e)}else this.attributes={[e]:i},this._notifyLayer("attributes",void 0,i,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{aggregateGeometries:vPe(this.aggregateGeometries),geometry:A(this.geometry)?this.geometry.toJSON():null,symbol:A(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}notifyMeshTransformChanged(){A(this.geometry)&&this.geometry.type==="mesh"&&this._notifyLayer("transform",this.geometry.transform,this.geometry.transform)}_notifyLayer(e,i,n,r){if(!this.layer||!("graphicChanged"in this.layer))return;const s={graphic:this,property:e,oldValue:i,newValue:n};e==="attributes"&&(s.attributeName=r),this.layer.graphicChanged(s)}};c([d({value:null,json:{read:yPe}})],ao.prototype,"aggregateGeometries",null),c([d({value:null})],ao.prototype,"attributes",null),c([d({value:null,types:xm,json:{read:Yr}})],ao.prototype,"geometry",null),c([d({type:Boolean})],ao.prototype,"isAggregate",void 0),c([d({clonable:"reference"})],ao.prototype,"layer",void 0),c([d({type:Cm})],ao.prototype,"popupTemplate",void 0),c([d({clonable:"reference"})],ao.prototype,"sourceLayer",void 0),c([d({value:null,types:_o})],ao.prototype,"symbol",null),c([d({type:Boolean,value:!0})],ao.prototype,"visible",null),ao=c([O("esri.Graphic")],ao),function(t){t.generateUID=E_}(ao||(ao={}));const en=ao;let F9=class{constructor(e,i){this.min=e,this.max=i,this.range=i-e}ndiff(e,i=0){return Math.ceil((e-i)/this.range)*this.range+i}_normalize(e,i,n,r=0,s=!1){return(n-=r)<e?n+=this.ndiff(e-n):n>i&&(n-=this.ndiff(n-i)),s&&n===i&&(n=e),n+r}normalize(e,i=0,n=!1){return this._normalize(this.min,this.max,e,i,n)}clamp(e,i=0){return zo(e-i,this.min,this.max)+i}monotonic(e,i,n){return e<i?i:i+this.ndiff(e-i,n)}minimalMonotonic(e,i,n){return this._normalize(e,e+this.range,i,n)}center(e,i,n){return i=this.monotonic(e,i,n),this.normalize((e+i)/2,n)}diff(e,i,n){return this.monotonic(e,i,n)-e}shortestSignedDiff(e,i){e=this.normalize(e);const n=(i=this.normalize(i))-e,r=i<e?this.minimalMonotonic(e,i)-e:i-this.minimalMonotonic(i,e);return Math.abs(n)<Math.abs(r)?n:r}contains(e,i,n){return i=this.minimalMonotonic(e,i),(n=this.minimalMonotonic(e,n))>e&&n<i}};function N9(t){for(const e in t){const i=t[e];i instanceof Function&&(t[e]=i.bind(t))}return t}N9(new F9(0,2*Math.PI));const l0t=N9(new F9(-Math.PI,Math.PI)),tce=N9(new F9(0,360));let Ed=class extends _t(Y){constructor(...e){super(...e),this.position=new Ve([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,i,n,r){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const s={position:e};return i!=null&&(s.heading=i),n!=null&&(s.tilt=n),r!=null&&(s.fov=r),s}return e}writePosition(e,i,n,r){const s=e.clone();s.x=sl(e.x||0),s.y=sl(e.y||0),s.z=e.hasZ?sl(e.z||0):e.z,i[n]=s.write({},r)}readPosition(e,i){const n=new Ve;return n.read(e,i),n.x=sl(n.x||0),n.y=sl(n.y||0),n.z=n.hasZ?sl(n.z||0):n.z,n}equals(e){return!U(e)&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}};c([d({type:Ve,json:{write:{isRequired:!0}}})],Ed.prototype,"position",void 0),c([fe("position")],Ed.prototype,"writePosition",null),c([de("position")],Ed.prototype,"readPosition",null),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),st(t=>tce.normalize(sl(t)))],Ed.prototype,"heading",void 0),c([d({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),st(t=>zo(sl(t),-180,180))],Ed.prototype,"tilt",void 0),c([d({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Ed.prototype,"fov",void 0),Ed=c([O("esri.Camera")],Ed);const bPe=Ed;var y4;let Cp=y4=class extends Y{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new y4({rotation:this.rotation,scale:this.scale,targetGeometry:A(this.targetGeometry)?this.targetGeometry.clone():null,camera:A(this.camera)?this.camera.clone():null})}};function rD(){return{enabled:!this.camera}}c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:rD}}}}})],Cp.prototype,"rotation",void 0),c([st("rotation")],Cp.prototype,"castRotation",null),c([d({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:rD}}}}})],Cp.prototype,"scale",void 0),c([d({types:xm,json:{read:Yr,write:!0,origins:{"web-scene":{read:Yr,write:{overridePolicy:rD}}}}})],Cp.prototype,"targetGeometry",void 0),c([d({type:bPe,json:{write:!0}})],Cp.prototype,"camera",void 0),Cp=y4=c([O("esri.Viewpoint")],Cp);const Tr=Cp;let jv=class extends we{constructor(e){super(e),this.getCollections=null}initialize(){this.own(uoe(()=>this._refresh()))}destroy(){this.getCollections=null}_refresh(){const e=A(this.getCollections)?this.getCollections():null;if(U(e))return void this.removeAll();let i=0;for(const n of e)A(n)&&(i=this._processCollection(i,n));this.splice(i,this.length)}_createNewInstance(e){return new we(e)}_processCollection(e,i){if(!i)return e;const n=this.itemFilterFunction?this.itemFilterFunction:r=>!!r;for(const r of i)if(r){if(n(r)){const s=this.indexOf(r,e);s>=0?s!==e&&this.reorder(r,e):this.add(r,e),++e}if(this.getChildrenFunction){const s=this.getChildrenFunction(r);if(Array.isArray(s))for(const o of s)e=this._processCollection(e,o);else e=this._processCollection(e,s)}}return e}};c([d()],jv.prototype,"getCollections",void 0),c([d()],jv.prototype,"getChildrenFunction",void 0),c([d()],jv.prototype,"itemFilterFunction",void 0),jv=c([O("esri.core.CollectionFlattener")],jv);const OC=jv;function X(t,e,i={}){return z9(t,e,i,ice)}function Ys(t,e,i={}){return z9(t,e,i,nce)}function z9(t,e,i={},n){let r=null;const s=i.once?(o,a)=>{n(o)&&(bn(r),e(o,a))}:(o,a)=>{n(o)&&e(o,a)};if(r=pTe(t,s,i.sync,i.equals),i.initial){const o=t();s(o,o)}return r}function ji(t,e,i,n={}){let r=null,s=null,o=null;function a(){var h;r&&s&&(s.remove(),(h=n.onListenerRemove)==null||h.call(n,r),r=null,s=null)}function l(h){n.once&&n.once&&bn(o),i(h)}const u=X(t,(h,p)=>{var f;a(),AP(h)&&(r=h,s=ll(h,e,l),(f=n.onListenerAdd)==null||f.call(n,h))},{sync:n.sync,initial:!0});return o=Nh(()=>{u.remove(),a()}),o}function jo(t,e){return _Pe(t,nce,e)}function _Pe(t,e,i){if($a(i))return Promise.reject(li());const n=t();if(e!=null&&e(n))return Promise.resolve(n);let r=null;function s(){r=bn(r)}return new Promise((o,a)=>{r=kP([Ur(i,()=>{s(),a(li())}),z9(t,l=>{s(),o(l)},{sync:!1,once:!0},e??ice)])})}function ice(t){return!0}function nce(t){return!!t}function wPe(t,e,i={}){let n=!1;const r=X(t,(s,o)=>{n||e(s,o)},i);return{remove(){r.remove()},pause(){n=!0},resume(){n=!1}}}const Bu={sync:!0},ut={initial:!0},Io={sync:!0,initial:!0};let PM=class{constructor(e=i=>i.values().next().value){this._peeker=e,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let e;for(e of this._items);return e}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(e){this.contains(e)||this._items.add(e)}contains(e){return this._items.has(e)}pop(){if(this.length===0)return;const e=this.peek();return this._items.delete(e),e}popLast(){if(this.length===0)return;const e=this.last();return this._items.delete(e),e}remove(e){this._items.delete(e)}filter(e){return this._items.forEach(i=>{e(i)||this._items.delete(i)}),this}};var Er;(function(t){t[t.HANDSHAKE=0]="HANDSHAKE",t[t.OPEN=1]="OPEN",t[t.OPENED=2]="OPENED",t[t.RESPONSE=3]="RESPONSE",t[t.INVOKE=4]="INVOKE",t[t.ABORT=5]="ABORT",t[t.CLOSE=6]="CLOSE",t[t.OPEN_PORT=7]="OPEN_PORT",t[t.ON=8]="ON"})(Er||(Er={}));let xPe=0;function rce(){return xPe++}function SPe(t){return t&&typeof t=="object"&&("result"in t||"transferList"in t)}function PC(t){return t?typeof t=="string"?JSON.stringify({name:"message",message:t}):t.toJSON?JSON.stringify(t):JSON.stringify({name:t.name,message:t.message,details:t.details||{stack:t.stack}}):null}function j9(t,e,i,n){if(e.type===Er.OPEN_PORT)return void t.postMessage(e,[e.port]);if(e.type!==Er.INVOKE&&e.type!==Er.RESPONSE)return void t.postMessage(e);let r;if(SPe(i)?(r=YW(i.transferList),e.data=i.result):(r=YW(n),e.data=i),r){if(ee("ff")){for(const s of r)if("byteLength"in s&&s.byteLength>267386880){const o="Worker call with large ArrayBuffer would crash Firefox";switch(e.type){case Er.INVOKE:throw o;case Er.RESPONSE:return void j9(t,{type:Er.RESPONSE,jobId:e.jobId,error:PC(o)})}}}t.postMessage(e,r)}else t.postMessage(e)}function RC(t){if(!t)return null;const e=t.data;return e?typeof e=="string"?JSON.parse(e):e:null}function YW(t){if(!t||!t.length)return null;if(ee("esri-workers-arraybuffer-transfer"))return t;const e=t.filter(i=>!EPe(i));return e.length?e:null}function EPe(t){return t instanceof ArrayBuffer||t&&t.constructor&&t.constructor.name==="ArrayBuffer"}const CPe={statsWorker:()=>q(()=>import("./statsWorker-7728b9ad.js"),[]),geometryEngineWorker:()=>q(()=>import("./geometryEngineWorker-311c667d.js"),["assets/geometryEngineWorker-311c667d.js","assets/geometryEngineJSON-eda070ea.js","assets/geometryEngineBase-e1a33b0a.js"]),CSVSourceWorker:()=>q(()=>import("./CSVSourceWorker-63794da2.js"),["assets/CSVSourceWorker-63794da2.js","assets/FeatureStore-54ae2bff.js","assets/BoundsStore-99d6d491.js","assets/PooledRBush-5d91c5ae.js","assets/optimizedFeatureQueryEngineAdapter-042e303f.js","assets/centroid-9716b441.js","assets/QueryEngine-641ba8a0.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-10aa9f55.js","assets/number-a7a9d67b.js","assets/clientSideDefaults-041b6800.js"]),EdgeProcessingWorker:()=>q(()=>import("./EdgeProcessingWorker-82f59b15.js"),["assets/EdgeProcessingWorker-82f59b15.js","assets/workerHelper-82d53ebe.js","assets/BufferView-48b69dc1.js","assets/InterleavedLayout-fd66e391.js","assets/types-e1c0a5bf.js","assets/edgeProcessing-472acca0.js","assets/deduplicate-37ec4dbf.js","assets/Indices-679d5379.js","assets/VertexAttribute-15d1866a.js","assets/glUtil-7a9be557.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js"]),ElevationSamplerWorker:()=>q(()=>import("./ElevationSamplerWorker-ba2ae081.js"),["assets/ElevationSamplerWorker-ba2ae081.js","assets/PooledRBush-5d91c5ae.js","assets/georeference-a52539c7.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/quat-b06529da.js","assets/quatf64-3363c48e.js","assets/axisAngleDegrees-fd3200b6.js","assets/BufferView-48b69dc1.js","assets/vec33-c2c00d51.js","assets/projection-210bf221.js"]),FeatureServiceSnappingSourceWorker:()=>q(()=>import("./FeatureServiceSnappingSourceWorker-8794d07a.js"),["assets/FeatureServiceSnappingSourceWorker-8794d07a.js","assets/FeatureStore-54ae2bff.js","assets/BoundsStore-99d6d491.js","assets/PooledRBush-5d91c5ae.js","assets/optimizedFeatureQueryEngineAdapter-042e303f.js","assets/centroid-9716b441.js","assets/QueryEngine-641ba8a0.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-10aa9f55.js","assets/symbologySnappingCandidates-2dcea371.js"]),GeoJSONSourceWorker:()=>q(()=>import("./GeoJSONSourceWorker-50b2bd14.js"),["assets/GeoJSONSourceWorker-50b2bd14.js","assets/FeatureStore-54ae2bff.js","assets/BoundsStore-99d6d491.js","assets/PooledRBush-5d91c5ae.js","assets/optimizedFeatureQueryEngineAdapter-042e303f.js","assets/centroid-9716b441.js","assets/QueryEngine-641ba8a0.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-10aa9f55.js","assets/geojson-2d0c82d1.js","assets/clientSideDefaults-041b6800.js","assets/sourceUtils-39f0821e.js"]),LercWorker:()=>q(()=>import("./LercWorker-0e8192a1.js"),[]),MemorySourceWorker:()=>q(()=>import("./MemorySourceWorker-1a7c9fad.js"),["assets/MemorySourceWorker-1a7c9fad.js","assets/objectIdUtils-789e911a.js","assets/FeatureStore-54ae2bff.js","assets/BoundsStore-99d6d491.js","assets/PooledRBush-5d91c5ae.js","assets/optimizedFeatureQueryEngineAdapter-042e303f.js","assets/centroid-9716b441.js","assets/QueryEngine-641ba8a0.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-10aa9f55.js","assets/clientSideDefaults-041b6800.js","assets/sourceUtils-39f0821e.js"]),PBFDecoderWorker:()=>q(()=>import("./PBFDecoderWorker-d0af7959.js"),[]),Pipeline:()=>q(()=>import("./Pipeline-e6a0b2db.js"),["assets/Pipeline-e6a0b2db.js","assets/QueryEngine-641ba8a0.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-10aa9f55.js","assets/FeatureStore2D-c20ad512.js","assets/CircularArray-7c7c2321.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/definitions-19bfb61c.js","assets/visualVariablesUtils-ca43c24b.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/visualVariablesUtils-d2906eec.js","assets/ogcFeatureUtils-c8c927d7.js","assets/geojson-2d0c82d1.js","assets/clientSideDefaults-041b6800.js","assets/createConnection-d9e271b9.js"]),PointCloudWorker:()=>q(()=>import("./PointCloudWorker-4b60aba2.js"),["assets/PointCloudWorker-4b60aba2.js","assets/quat-b06529da.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/I3SBinaryReader-b287f82b.js","assets/VertexAttribute-15d1866a.js","assets/vec3f32-ad1dc57f.js","assets/PointCloudUniqueValueRenderer-8c766c35.js"]),RasterWorker:()=>q(()=>import("./RasterWorker-3f12543c.js"),["assets/RasterWorker-3f12543c.js","assets/dataUtils-40d36dc7.js","assets/pixelRangeUtils-03719dd8.js","assets/RasterSymbolizer-f37c2893.js","assets/utils-b6b63793.js","assets/rasterProjectionHelper-1604863e.js"]),SceneLayerSnappingSourceWorker:()=>q(()=>import("./SceneLayerSnappingSourceWorker-450591b3.js"),["assets/SceneLayerSnappingSourceWorker-450591b3.js","assets/lineSegment-63c436ff.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/Octree-20f758fd.js","assets/plane-163fe497.js","assets/Util-778b7564.js","assets/edgeProcessing-472acca0.js","assets/deduplicate-37ec4dbf.js","assets/Indices-679d5379.js","assets/InterleavedLayout-fd66e391.js","assets/BufferView-48b69dc1.js","assets/types-e1c0a5bf.js","assets/VertexAttribute-15d1866a.js","assets/glUtil-7a9be557.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js"]),SceneLayerWorker:()=>q(()=>import("./SceneLayerWorker-92ebdb4f.js"),["assets/SceneLayerWorker-92ebdb4f.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js"]),WFSSourceWorker:()=>q(()=>import("./WFSSourceWorker-a1bd4b05.js"),["assets/WFSSourceWorker-a1bd4b05.js","assets/FeatureStore-54ae2bff.js","assets/BoundsStore-99d6d491.js","assets/PooledRBush-5d91c5ae.js","assets/optimizedFeatureQueryEngineAdapter-042e303f.js","assets/centroid-9716b441.js","assets/QueryEngine-641ba8a0.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-10aa9f55.js","assets/geojson-2d0c82d1.js","assets/sourceUtils-39f0821e.js","assets/wfsUtils-17c6d9bc.js","assets/xmlUtils-444cb4c0.js"]),WorkerTileHandler:()=>q(()=>import("./WorkerTileHandler-401e9ba0.js"),["assets/WorkerTileHandler-401e9ba0.js","assets/enums-fb086c25.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/config-1337d16e.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/TurboLine-54758822.js","assets/definitions-19bfb61c.js","assets/StyleRepository-3b0d9deb.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/earcut-61f7b102.js","assets/BidiEngine-836b7ef6.js"])},{CLOSE:ZW,ABORT:KW,INVOKE:XW,RESPONSE:Q1,OPEN_PORT:QW,ON:IPe}=Er,TPe=2;let kPe=class{constructor(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}push(e){e.type===Er.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const e of this._invokeMessages)this._cancelledJobIds.has(e.jobId)||this._invoke(e);this._cancelledJobIds.clear(),this._invokeMessages.length=0}},sm=class Vv{static connect(e){const i=new MessageChannel;let n;n=typeof e=="function"?new e:"default"in e&&typeof e.default=="function"?new e.default:e;const r=new Vv(i.port1,{channel:i,client:n},()=>null);return typeof n=="object"&&"remoteClient"in n&&(n.remoteClient=r),Vv.clients.set(r,n),i.port2}static loadWorker(e){const i=CPe[e];return i?i():Promise.resolve(null)}constructor(e,i,n){this._port=e,this._getNextJob=n,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new kPe(r=>this._onInvokeMessage(r)),this._client=i.client,this._onMessage=this._onMessage.bind(this),this._channel=i.channel,this._schedule=i.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}close(){this._post({type:ZW}),this._close()}isBusy(){return this._outJobs.size>0}invoke(e,i,n){const r=n&&n.signal,s=n&&n.transferList;if(!this._port)return Promise.reject(new N("worker:port-closed",`Cannot call invoke('${e}'), port is closed`,{methodName:e,data:i}));const o=rce();return new Promise((a,l)=>{if($a(r))return this._processWork(),void l(li());const u=Ur(r,()=>{const p=this._outJobs.get(o);p&&(this._outJobs.delete(o),this._processWork(),bn(p.abortHandle),this._post({type:KW,jobId:o}),l(li()))}),h={resolve:a,reject:l,abortHandle:u,debugInfo:e};this._outJobs.set(o,h),this._post({type:XW,jobId:o,methodName:e,abortable:r!=null},i,s)})}on(e,i){const n=new MessageChannel;function r(s){i(s.data)}return this._port.postMessage({type:Er.ON,eventType:e,port:n.port2},[n.port2]),n.port1.addEventListener("message",r),n.port1.start(),{remove(){n.port1.postMessage({type:Er.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",r)}}}jobAdded(){this._processWork()}openPort(){const e=new MessageChannel;return this._post({type:QW,port:e.port2}),e.port1}_processWork(){if(this._outJobs.size>=TPe)return;const e=this._getNextJob();if(!e)return;const{methodName:i,data:n,invokeOptions:r,deferred:s}=e;this.invoke(i,n,r).then(o=>s.resolve(o)).catch(o=>s.reject(o))}_close(){this._channel&&(this._channel=void 0),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(e=>{bn(e.abortHandle),e.reject(li(`Worker closing, aborting job calling '${e.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(e){A(this._schedule)?this._schedule(()=>this._processMessage(e)):this._processMessage(e)}_processMessage(e){const i=RC(e);if(i)switch(i.type){case Q1:this._onResponseMessage(i);break;case XW:this._invokeQueue.push(i);break;case KW:this._onAbortMessage(i);break;case ZW:this._onCloseMessage();break;case QW:this._onOpenPortMessage(i);break;case IPe:this._onOnMessage(i)}}_onAbortMessage(e){const i=this._inJobs,n=e.jobId,r=i.get(n);this._invokeQueue.push(e),r&&(r.controller&&r.controller.abort(),i.delete(n))}_onCloseMessage(){const e=this._client;this._close(),e&&"destroy"in e&&Vv.clients.get(this)===e&&e.destroy(),Vv.clients.delete(this),e&&e.remoteClient&&(e.remoteClient=null)}_onInvokeMessage(e){const{methodName:i,jobId:n,data:r,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs;let l,u=this._client,h=u[i];try{if(!h&&i&&i.includes(".")){const p=i.split(".");for(let f=0;f<p.length-1;f++)u=u[p[f]],h=u[p[f+1]]}if(typeof h!="function")throw new TypeError(`${i} is not a function`);l=h.call(u,r,{client:this,signal:o?o.signal:null})}catch(p){return void this._post({type:Q1,jobId:n,error:PC(p)})}zh(l)?(a.set(n,{controller:o,promise:l}),l.then(p=>{a.has(n)&&(a.delete(n),this._post({type:Q1,jobId:n},p))},p=>{a.has(n)&&(a.delete(n),Pa(p)||this._post({type:Q1,jobId:n,error:PC(p||{message:`Error encountered at method ${i}`})}))})):this._post({type:Q1,jobId:n},l)}_onOpenPortMessage(e){new Vv(e.port,{client:this._client},()=>null)}_onOnMessage(e){const{port:i}=e,n=this._client.on(e.eventType,s=>{i.postMessage(s)}),r=ll(e.port,"message",s=>{var o;((o=RC(s))==null?void 0:o.type)===Er.CLOSE&&(r.remove(),n.remove(),i.close())})}_onResponseMessage(e){const{jobId:i,error:n,data:r}=e,s=this._outJobs;if(!s.has(i))return;const o=s.get(i);s.delete(i),this._processWork(),bn(o.abortHandle),n?o.reject(N.fromJSON(JSON.parse(n))):o.resolve(r)}_post(e,i,n){return j9(this._port,e,i,n)}};sm.kernelInfo={revision:Ple,version:A9,buildDate:Ole},sm.clients=new Map;let $Pe=class{constructor(){this._inUseClients=new Array,this._clients=new Array,this._clientPromises=new Array,this._ongoingJobsQueue=new PM}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(e,i){return new Promise((n,r)=>{let s=!0;const o=a=>{Xi(i.signal),s&&(s=!1,a())};this._clients.length=e.length,this._clientPromises.length=e.length,this._inUseClients.length=e.length;for(let a=0;a<e.length;++a){const l=e[a];zh(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new sm(u,i,()=>this._ongoingJobsQueue.pop()??null),o(n),this._clients[a]),()=>(o(r),null)):(this._clients[a]=new sm(l,i,()=>this._ongoingJobsQueue.pop()??null),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(n))}})}broadcast(e,i,n){const r=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];r[s]=o.then(a=>a==null?void 0:a.invoke(e,i,n))}return r}close(){let e;for(;e=this._ongoingJobsQueue.pop();)e.deferred.reject(li(`Worker closing, aborting job calling '${e.methodName}'`));for(const i of this._clientPromises)i.then(n=>n==null?void 0:n.close());this._clients.length=0,this._clientPromises.length=0}invoke(e,i,n){let r;Array.isArray(n)?(se.getLogger("esri.core.workers.Connection").warn("invoke()","The transferList parameter is deprecated, use the options object instead"),r={transferList:n}):r=n;const s=kh();this._ongoingJobsQueue.push({methodName:e,data:i,invokeOptions:r,deferred:s});for(let o=0;o<this._clientPromises.length;o++){const a=this._clients[o];a?a.jobAdded():this._clientPromises[o].then(l=>l==null?void 0:l.jobAdded())}return s.promise}on(e,i){return Promise.all(this._clientPromises).then(()=>kP(this._clients.map(n=>n.on(e,i))))}openPorts(){return new Promise(e=>{const i=new Array(this._clientPromises.length);let n=i.length;for(let r=0;r<this._clientPromises.length;++r)this._clientPromises[r].then(s=>{s&&(i[r]=s.openPort()),--n==0&&e(i)})})}get test(){return{numClients:this._clients.length}}};const APe=se.getLogger("esri.assets");function pt(t){if(!lt.assetsPath)throw APe.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new N("assets:path-not-set","config.assetsPath is not set");return w0(lt.assetsPath,t)}const sce=se.getLogger("esri.intl.substitute");function Vr(t,e,i={}){const{format:n={}}=i;return Fu(t,r=>MPe(r,e,n))}function MPe(t,e,i){let n,r;const s=t.indexOf(":");if(s===-1?n=t.trim():(n=t.slice(0,s).trim(),r=t.slice(s+1).trim()),!n)return"";const o=rh(n,e);if(o==null)return"";const a=(r?i==null?void 0:i[r]:null)??(i==null?void 0:i[n]);return a?OPe(o,a):r?PPe(o,r):V9(o)}function OPe(t,e){switch(e.type){case"date":return Ai(t,e.intlOptions);case"number":return Aa(t,e.intlOptions);default:return sce.warn("missing format descriptor for key {key}"),V9(t)}}function PPe(t,e){switch(e.toLowerCase()){case"dateformat":return Ai(t);case"numberformat":return Aa(t);default:return sce.warn(`inline format is unsupported since 4.12: ${e}`),/^(dateformat|datestring)/i.test(e)?Ai(t):/^numberformat/i.test(e)?Aa(t):V9(t)}}function V9(t){switch(typeof t){case"string":return t;case"number":return Aa(t);case"boolean":return""+t;default:return t instanceof Date?Ai(t):""}}const eJ=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,RPe={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function tJ(t){return RPe[t]??!1}const pS=[],$_=new Map;function iJ(t){for(const e of $_.keys())oce(t.pattern,e)&&$_.delete(e)}function LPe(t){return pS.includes(t)||(iJ(t),pS.unshift(t)),{remove(){const e=pS.indexOf(t);e>-1&&(pS.splice(e,1),iJ(t))}}}async function A_(t){const e=sr();$_.has(t)||$_.set(t,FPe(t,e));const i=$_.get(t);return i&&await NPe.add(i),i}function DPe(t){if(!eJ.test(t))return null;const e=eJ.exec(t);if(e===null)return null;const[,i,n]=e,r=i+(n?"-"+n.toUpperCase():"");return tJ(r)?r:tJ(i)?i:null}async function FPe(t,e){const i=[];for(const n of pS)if(oce(n.pattern,t))try{return await n.fetchMessageBundle(t,e)}catch(r){i.push(r)}throw i.length?new N("intl:message-bundle-error",`Errors occurred while loading "${t}"`,{errors:i}):new N("intl:no-message-bundle-loader",`No loader found for message bundle "${t}"`)}function oce(t,e){return typeof t=="string"?e.startsWith(t):t.test(e)}n9(()=>{$_.clear()});const NPe=new class{constructor(){this._numLoading=0,this._dfd=null}async waitForAll(){this._dfd&&await this._dfd.promise}add(t){return this._increase(),t.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=kh())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function zPe(t,e,i,n){const r=e.exec(i);if(!r)throw new N("esri-intl:invalid-bundle",`Bundle id "${i}" is not compatible with the pattern "${e}"`);const s=r[1]?`${r[1]}/`:"",o=r[2],a=DPe(n),l=`${s}${o}.json`,u=a?`${s}${o}_${a}.json`:l;let h;try{h=await nJ(t(u))}catch(p){if(u===l)throw new N("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:p});try{h=await nJ(t(l))}catch(f){throw new N("intl:unknown-bundle",`Bundle "${i}" cannot be loaded`,{error:f})}}return h}async function nJ(t){if(A(rJ.fetchBundleAsset))return rJ.fetchBundleAsset(t);const e=await rt(t,{responseType:"text"});return JSON.parse(e.data)}let jPe=class{constructor({base:e="",pattern:i,location:n=new URL(window.location.href)}){let r;r=typeof n=="string"?s=>new URL(s,new URL(n,window.location.href)).href:n instanceof URL?s=>new URL(s,n).href:n,this.pattern=typeof i=="string"?new RegExp(`^${i}`):i,this.getAssetUrl=r,e=e?e.endsWith("/")?e:e+"/":"",this.matcher=new RegExp(`^${e}(?:(.*)/)?(.*)$`)}fetchMessageBundle(e,i){return zPe(this.getAssetUrl,this.matcher,e,i)}};function VPe(t){return new jPe(t)}const rJ={};LPe(VPe({pattern:"esri/",location:pt}));const UPe={};function BPe(t){const e={async:t.async,isDebug:t.isDebug,locale:t.locale,baseUrl:t.baseUrl,has:{...t.has},map:{...t.map},packages:t.packages&&t.packages.concat()||[],paths:{...t.paths}};return t.hasOwnProperty("async")||(e.async=!0),t.hasOwnProperty("isDebug")||(e.isDebug=!1),t.baseUrl||(e.baseUrl=UPe.baseUrl),e}let HPe=class{constructor(){const e=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(i=>{this[i]=(...n)=>e[i](...n)})}},k$=class{constructor(){this._dispatcher=new HPe,this._workerPostMessage({type:Er.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=e,e&&this.addEventListener("message",e)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(e){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=e,e&&this.addEventListener("messageerror",e)}get onerror(){return this._onerrorHandler}set onerror(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=e,e&&this.addEventListener("error",e)}postMessage(e){gM(()=>{this._workerMessageHandler(new MessageEvent("message",{data:e}))})}dispatchEvent(e){return this._dispatcher.dispatchEvent(e)}addEventListener(e,i,n){this._dispatcher.addEventListener(e,i,n)}removeEventListener(e,i,n){this._dispatcher.removeEventListener(e,i,n)}_workerPostMessage(e){gM(()=>{this.dispatchEvent(new MessageEvent("message",{data:e}))})}async _workerMessageHandler(e){const i=RC(e);if(i&&i.type===Er.OPEN){const{modulePath:n,jobId:r}=i;let s=await sm.loadWorker(n);s||(s=await q(()=>import(n),[]));const o=sm.connect(s);this._workerPostMessage({type:Er.OPENED,jobId:r,data:o})}}};const v4=se.getLogger("esri.core.workers.workerFactory"),{HANDSHAKE:GPe}=Er,qPe='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,version:r}=configuration.kernelInfo,{revision:t,version:n}=e.kernelInfo;esriConfig.assetsPath!==esriConfig.defaultAssetsPath&&o!==t&&console.warn(`Version mismatch detected between ArcGIS API for JavaScript modules and assets. For more information visit https://bit.ly/3QnsuSo.\\nModules version: ${r}\\nAssets version: ${n}`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let n;function t(e){const o=n.connect(e);self.postMessage({type:2,jobId:r,data:o},[o])}"function"==typeof define&&define.amd?require([workerPath],(e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((e=>(n=e.default,checkWorkerRevision(n),n.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):esriConfig.workers.useDynamicImport?import(workerPath).then((e=>{n=e.default||e,checkWorkerRevision(n),n.loadWorker(o.modulePath).then((e=>e||import(o.modulePath))).then(t)})):(self.RemoteClient||importScripts(workerPath),n=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(n),n.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const i=outgoing.get(r);outgoing.delete(r),o.error?i.reject(JSON.parse(o.error)):i.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let cT,uT;const sJ="Failed to create Worker. Fallback to execute module in main thread";async function WPe(){if(!ee("esri-workers")||(ee("mozilla"),0))return oJ(new k$);if(!cT&&!uT)try{const e=qPe.split('"{CONFIGURATION}"').join(`'${JPe()}'`);cT=URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}catch(e){uT=e||{}}let t;if(cT)try{t=new Worker(cT,{name:"esri-worker-"+YPe++})}catch{v4.warn(sJ,uT),t=new k$}else v4.warn(sJ,uT),t=new k$;return oJ(t)}async function oJ(t){return new Promise(e=>{function i(r){const s=RC(r);s&&s.type===GPe&&(t.removeEventListener("message",i),t.removeEventListener("error",n),e(t))}function n(r){r.preventDefault(),t.removeEventListener("message",i),t.removeEventListener("error",n),v4.warn("Failed to create Worker. Fallback to execute module in main thread",r),(t=new k$).addEventListener("message",i),t.addEventListener("error",n)}t.addEventListener("message",i),t.addEventListener("error",n)})}function JPe(){let t;if(lt.default!=null){const r={...lt};delete r.default,t=JSON.parse(JSON.stringify(r))}else t=JSON.parse(JSON.stringify(lt));t.assetsPath=_s(t.assetsPath),t.defaultAssetsPath=t.defaultAssetsPath?_s(t.defaultAssetsPath):void 0,t.request.interceptors=[],t.log.interceptors=[],t.locale=sr(),t.has={"esri-csp-restrictions":ee("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ee("esri-2d-update-debug"),"featurelayer-pbf":ee("featurelayer-pbf"),"featurelayer-simplify-thresholds":ee("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ee("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ee("featurelayer-simplify-mobile-factor"),"esri-atomics":ee("esri-atomics"),"esri-shared-array-buffer":ee("esri-shared-array-buffer"),"esri-tiles-debug":ee("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ee("esri-workers-arraybuffer-transfer"),"feature-polyline-generalization-factor":ee("feature-polyline-generalization-factor"),"host-webworker":1,"polylabel-placement-enabled":ee("polylabel-placement-enabled")},t.workers.loaderUrl&&(t.workers.loaderUrl=_s(t.workers.loaderUrl)),t.workers.workerPath?t.workers.workerPath=_s(t.workers.workerPath):t.workers.workerPath=_s(pt("esri/core/workers/RemoteClient.js")),t.workers.useDynamicImport=!1;const e=lt.workers.loaderConfig,i=BPe({baseUrl:e==null?void 0:e.baseUrl,locale:sr(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...e==null?void 0:e.has},map:{...e==null?void 0:e.map},paths:{...e==null?void 0:e.paths},packages:(e==null?void 0:e.packages)||[]});return JSON.stringify({esriConfig:t,loaderConfig:i,kernelInfo:{version:A9,buildDate:Ole,revision:Ple}})}let YPe=0;const{ABORT:aJ,INVOKE:ZPe,OPEN:KPe,OPENED:XPe,RESPONSE:ex}=Er;let QPe=class ace{static async create(e){const i=await WPe();return new ace(i,e)}constructor(e,i){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=i,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",n=>{n.preventDefault(),se.getLogger("esri.core.workers.WorkerOwner").error(n)})}terminate(){this.worker.terminate()}async open(e,i={}){const{signal:n}=i,r=rce();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:L8(n,()=>{this._outJobs.delete(r),this._post({type:aJ,jobId:r})})};this._outJobs.set(r,a),this._post({type:KPe,jobId:r,modulePath:e})})}_onMessage(e){const i=RC(e);if(i)switch(i.type){case XPe:this._onOpenedMessage(i);break;case ex:this._onResponseMessage(i);break;case aJ:this._onAbortMessage(i);break;case ZPe:this._onInvokeMessage(i)}}_onAbortMessage(e){const i=this._inJobs,n=e.jobId,r=i.get(n);r&&(r.controller&&r.controller.abort(),i.delete(n))}_onInvokeMessage(e){const{methodName:i,jobId:n,data:r,abortable:s}=e,o=s?new AbortController:null,a=this._inJobs,l=$Oe[i];let u;try{if(typeof l!="function")throw new TypeError(`${i} is not a function`);u=l.call(null,r,{signal:o?o.signal:null})}catch(h){return void this._post({type:ex,jobId:n,error:PC(h)})}zh(u)?(a.set(n,{controller:o,promise:u}),u.then(h=>{a.has(n)&&(a.delete(n),this._post({type:ex,jobId:n},h))},h=>{a.has(n)&&(a.delete(n),h||(h={message:"Error encountered at method"+i}),Pa(h)||this._post({type:ex,jobId:n,error:PC(h||{message:`Error encountered at method ${i}`})}))})):this._post({type:ex,jobId:n},u)}_onOpenedMessage(e){const{jobId:i,data:n}=e,r=this._outJobs.get(i);r&&(this._outJobs.delete(i),bn(r.abortHandle),r.resolve(n))}_onResponseMessage(e){const{jobId:i,error:n,data:r}=e,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),bn(s.abortHandle),n?s.reject(N.fromJSON(JSON.parse(n))):s.resolve(r))}_post(e,i,n){return j9(this.worker,e,i,n)}},Ry=ee("esri-workers-debug")?1:ee("esri-mobile")?Math.min(navigator.hardwareConcurrency-1,3):ee("host-browser")?navigator.hardwareConcurrency-1:0;Ry||(Ry=ee("safari")&&ee("mac")?7:2);let lJ=0;const $$=[];function eRe(){lce()}async function dT(t,e){const i=new $Pe;return await i.open(t,e),i}async function tRe(t,e={}){if(typeof t!="string")throw new N("workers:undefined-module","modulePath is missing");let i=e.strategy||"distributed";if(ee("host-webworker")&&!ee("esri-workers")&&(i="local"),i==="local"){let n=await sm.loadWorker(t);n||(n=await q(()=>import(t),[])),Xi(e.signal);const r=e.client||n;return dT([sm.connect(n)],{...e,client:r})}if(await lce(),Xi(e.signal),i==="dedicated"){const n=lJ++%Ry;return dT([await $$[n].open(t,e)],e)}if(e.maxNumWorkers&&e.maxNumWorkers>0){const n=Math.min(e.maxNumWorkers,Ry);if(n<Ry){const r=new Array(n);for(let s=0;s<n;++s){const o=lJ++%Ry;r[s]=$$[o].open(t,e)}return dT(r,e)}}return dT($$.map(n=>n.open(t,e)),e)}let hT=null;async function lce(){if(hT)return hT;new AbortController;const t=[];for(let e=0;e<Ry;e++){const i=QPe.create(e).then(n=>($$[e]=n,n));t.push(i)}return hT=Promise.all(t),hT}function iRe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function km(t,e,i,n,r,s,o,a,l,u,h,p,f,g,v,b,_){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t[9]=h,t[10]=p,t[11]=f,t[12]=g,t[13]=v,t[14]=b,t[15]=_,t}function UI(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Vh(t,e){if(t===e){const i=e[1],n=e[2],r=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=r,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function nRe(t,e){return cce(t,e)||UI(t),t}function cce(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=e[9],f=e[10],g=e[11],v=e[12],b=e[13],_=e[14],w=e[15],S=i*a-n*o,C=i*l-r*o,$=i*u-s*o,M=n*l-r*a,P=n*u-s*a,k=r*u-s*l,D=h*b-p*v,z=h*_-f*v,B=h*w-g*v,j=p*_-f*b,K=p*w-g*b,ie=f*w-g*_;let te=S*ie-C*K+$*j+M*B-P*z+k*D;return te?(te=1/te,t[0]=(a*ie-l*K+u*j)*te,t[1]=(r*K-n*ie-s*j)*te,t[2]=(b*k-_*P+w*M)*te,t[3]=(f*P-p*k-g*M)*te,t[4]=(l*B-o*ie-u*z)*te,t[5]=(i*ie-r*B+s*z)*te,t[6]=(_*$-v*k-w*C)*te,t[7]=(h*k-f*$+g*C)*te,t[8]=(o*K-a*B+u*D)*te,t[9]=(n*B-i*K-s*D)*te,t[10]=(v*P-b*$+w*S)*te,t[11]=(p*$-h*P-g*S)*te,t[12]=(a*z-o*j-l*D)*te,t[13]=(i*j-n*z+r*D)*te,t[14]=(b*C-v*M-_*S)*te,t[15]=(h*M-p*C+f*S)*te,t):null}function rRe(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=e[9],f=e[10],g=e[11],v=e[12],b=e[13],_=e[14],w=e[15];return t[0]=a*(f*w-g*_)-p*(l*w-u*_)+b*(l*g-u*f),t[1]=-(n*(f*w-g*_)-p*(r*w-s*_)+b*(r*g-s*f)),t[2]=n*(l*w-u*_)-a*(r*w-s*_)+b*(r*u-s*l),t[3]=-(n*(l*g-u*f)-a*(r*g-s*f)+p*(r*u-s*l)),t[4]=-(o*(f*w-g*_)-h*(l*w-u*_)+v*(l*g-u*f)),t[5]=i*(f*w-g*_)-h*(r*w-s*_)+v*(r*g-s*f),t[6]=-(i*(l*w-u*_)-o*(r*w-s*_)+v*(r*u-s*l)),t[7]=i*(l*g-u*f)-o*(r*g-s*f)+h*(r*u-s*l),t[8]=o*(p*w-g*b)-h*(a*w-u*b)+v*(a*g-u*p),t[9]=-(i*(p*w-g*b)-h*(n*w-s*b)+v*(n*g-s*p)),t[10]=i*(a*w-u*b)-o*(n*w-s*b)+v*(n*u-s*a),t[11]=-(i*(a*g-u*p)-o*(n*g-s*p)+h*(n*u-s*a)),t[12]=-(o*(p*_-f*b)-h*(a*_-l*b)+v*(a*f-l*p)),t[13]=i*(p*_-f*b)-h*(n*_-r*b)+v*(n*f-r*p),t[14]=-(i*(a*_-l*b)-o*(n*_-r*b)+v*(n*l-r*a)),t[15]=i*(a*f-l*p)-o*(n*f-r*p)+h*(n*l-r*a),t}function sRe(t){const e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],h=t[9],p=t[10],f=t[11],g=t[12],v=t[13],b=t[14],_=t[15];return(e*o-i*s)*(p*_-f*b)-(e*a-n*s)*(h*_-f*v)+(e*l-r*s)*(h*b-p*v)+(i*a-n*o)*(u*_-f*g)-(i*l-r*o)*(u*b-p*g)+(n*l-r*a)*(u*v-h*g)}function uce(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=e[8],f=e[9],g=e[10],v=e[11],b=e[12],_=e[13],w=e[14],S=e[15];let C=i[0],$=i[1],M=i[2],P=i[3];return t[0]=C*n+$*a+M*p+P*b,t[1]=C*r+$*l+M*f+P*_,t[2]=C*s+$*u+M*g+P*w,t[3]=C*o+$*h+M*v+P*S,C=i[4],$=i[5],M=i[6],P=i[7],t[4]=C*n+$*a+M*p+P*b,t[5]=C*r+$*l+M*f+P*_,t[6]=C*s+$*u+M*g+P*w,t[7]=C*o+$*h+M*v+P*S,C=i[8],$=i[9],M=i[10],P=i[11],t[8]=C*n+$*a+M*p+P*b,t[9]=C*r+$*l+M*f+P*_,t[10]=C*s+$*u+M*g+P*w,t[11]=C*o+$*h+M*v+P*S,C=i[12],$=i[13],M=i[14],P=i[15],t[12]=C*n+$*a+M*p+P*b,t[13]=C*r+$*l+M*f+P*_,t[14]=C*s+$*u+M*g+P*w,t[15]=C*o+$*h+M*v+P*S,t}function oRe(t,e,i){const n=i[0],r=i[1],s=i[2];if(e===t)t[12]=e[0]*n+e[4]*r+e[8]*s+e[12],t[13]=e[1]*n+e[5]*r+e[9]*s+e[13],t[14]=e[2]*n+e[6]*r+e[10]*s+e[14],t[15]=e[3]*n+e[7]*r+e[11]*s+e[15];else{const o=e[0],a=e[1],l=e[2],u=e[3],h=e[4],p=e[5],f=e[6],g=e[7],v=e[8],b=e[9],_=e[10],w=e[11];t[0]=o,t[1]=a,t[2]=l,t[3]=u,t[4]=h,t[5]=p,t[6]=f,t[7]=g,t[8]=v,t[9]=b,t[10]=_,t[11]=w,t[12]=o*n+h*r+v*s+e[12],t[13]=a*n+p*r+b*s+e[13],t[14]=l*n+f*r+_*s+e[14],t[15]=u*n+g*r+w*s+e[15]}return t}function aRe(t,e,i){const n=i[0],r=i[1],s=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function lRe(t,e,i,n){let r,s,o,a,l,u,h,p,f,g,v,b,_,w,S,C,$,M,P,k,D,z,B,j,K=n[0],ie=n[1],te=n[2],me=Math.sqrt(K*K+ie*ie+te*te);return me<Ra()?null:(me=1/me,K*=me,ie*=me,te*=me,r=Math.sin(i),s=Math.cos(i),o=1-s,a=e[0],l=e[1],u=e[2],h=e[3],p=e[4],f=e[5],g=e[6],v=e[7],b=e[8],_=e[9],w=e[10],S=e[11],C=K*K*o+s,$=ie*K*o+te*r,M=te*K*o-ie*r,P=K*ie*o-te*r,k=ie*ie*o+s,D=te*ie*o+K*r,z=K*te*o+ie*r,B=ie*te*o-K*r,j=te*te*o+s,t[0]=a*C+p*$+b*M,t[1]=l*C+f*$+_*M,t[2]=u*C+g*$+w*M,t[3]=h*C+v*$+S*M,t[4]=a*P+p*k+b*D,t[5]=l*P+f*k+_*D,t[6]=u*P+g*k+w*D,t[7]=h*P+v*k+S*D,t[8]=a*z+p*B+b*j,t[9]=l*z+f*B+_*j,t[10]=u*z+g*B+w*j,t[11]=h*z+v*B+S*j,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function cRe(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],h=e[9],p=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*r+u*n,t[5]=o*r+h*n,t[6]=a*r+p*n,t[7]=l*r+f*n,t[8]=u*r-s*n,t[9]=h*r-o*n,t[10]=p*r-a*n,t[11]=f*r-l*n,t}function uRe(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],u=e[8],h=e[9],p=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r-u*n,t[1]=o*r-h*n,t[2]=a*r-p*n,t[3]=l*r-f*n,t[8]=s*n+u*r,t[9]=o*n+h*r,t[10]=a*n+p*r,t[11]=l*n+f*r,t}function dRe(t,e,i){const n=Math.sin(i),r=Math.cos(i),s=e[0],o=e[1],a=e[2],l=e[3],u=e[4],h=e[5],p=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*r+u*n,t[1]=o*r+h*n,t[2]=a*r+p*n,t[3]=l*r+f*n,t[4]=u*r-s*n,t[5]=h*r-o*n,t[6]=p*r-a*n,t[7]=f*r-l*n,t}function dce(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function hRe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pRe(t,e,i){if(e===0)return UI(t);let n,r,s,o=i[0],a=i[1],l=i[2],u=Math.sqrt(o*o+a*a+l*l);return u<Ra()?null:(u=1/u,o*=u,a*=u,l*=u,n=Math.sin(e),r=Math.cos(e),s=1-r,t[0]=o*o*s+r,t[1]=a*o*s+l*n,t[2]=l*o*s-a*n,t[3]=0,t[4]=o*a*s-l*n,t[5]=a*a*s+r,t[6]=l*a*s+o*n,t[7]=0,t[8]=o*l*s+a*n,t[9]=a*l*s-o*n,t[10]=l*l*s+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function fRe(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function mRe(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gRe(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function hce(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=n+n,l=r+r,u=s+s,h=n*a,p=n*l,f=n*u,g=r*l,v=r*u,b=s*u,_=o*a,w=o*l,S=o*u;return t[0]=1-(g+b),t[1]=p+S,t[2]=f-w,t[3]=0,t[4]=p-S,t[5]=1-(h+b),t[6]=v+_,t[7]=0,t[8]=f+w,t[9]=v-_,t[10]=1-(h+g),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function yRe(t,e){const i=vRe,n=-e[0],r=-e[1],s=-e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=n*n+r*r+s*s+o*o;return p>0?(i[0]=2*(a*o+h*n+l*s-u*r)/p,i[1]=2*(l*o+h*r+u*n-a*s)/p,i[2]=2*(u*o+h*s+a*r-l*n)/p):(i[0]=2*(a*o+h*n+l*s-u*r),i[1]=2*(l*o+h*r+u*n-a*s),i[2]=2*(u*o+h*s+a*r-l*n)),hce(t,e,i),t}const vRe=Et();function bRe(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function _Re(t,e){const i=e[0],n=e[1],r=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],h=e[10];return t[0]=Math.sqrt(i*i+n*n+r*r),t[1]=Math.sqrt(s*s+o*o+a*a),t[2]=Math.sqrt(l*l+u*u+h*h),t}function wRe(t,e){const i=e[0]+e[5]+e[10];let n=0;return i>0?(n=2*Math.sqrt(i+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function xRe(t,e,i,n){const r=e[0],s=e[1],o=e[2],a=e[3],l=r+r,u=s+s,h=o+o,p=r*l,f=r*u,g=r*h,v=s*u,b=s*h,_=o*h,w=a*l,S=a*u,C=a*h,$=n[0],M=n[1],P=n[2];return t[0]=(1-(v+_))*$,t[1]=(f+C)*$,t[2]=(g-S)*$,t[3]=0,t[4]=(f-C)*M,t[5]=(1-(p+_))*M,t[6]=(b+w)*M,t[7]=0,t[8]=(g+S)*P,t[9]=(b-w)*P,t[10]=(1-(p+v))*P,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function SRe(t,e,i,n,r){const s=e[0],o=e[1],a=e[2],l=e[3],u=s+s,h=o+o,p=a+a,f=s*u,g=s*h,v=s*p,b=o*h,_=o*p,w=a*p,S=l*u,C=l*h,$=l*p,M=n[0],P=n[1],k=n[2],D=r[0],z=r[1],B=r[2],j=(1-(b+w))*M,K=(g+$)*M,ie=(v-C)*M,te=(g-$)*P,me=(1-(f+w))*P,Ie=(_+S)*P,Me=(v+C)*k,oe=(_-S)*k,ge=(1-(f+b))*k;return t[0]=j,t[1]=K,t[2]=ie,t[3]=0,t[4]=te,t[5]=me,t[6]=Ie,t[7]=0,t[8]=Me,t[9]=oe,t[10]=ge,t[11]=0,t[12]=i[0]+D-(j*D+te*z+Me*B),t[13]=i[1]+z-(K*D+me*z+oe*B),t[14]=i[2]+B-(ie*D+Ie*z+ge*B),t[15]=1,t}function ERe(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=i+i,a=n+n,l=r+r,u=i*o,h=n*o,p=n*a,f=r*o,g=r*a,v=r*l,b=s*o,_=s*a,w=s*l;return t[0]=1-p-v,t[1]=h+w,t[2]=f-_,t[3]=0,t[4]=h-w,t[5]=1-u-v,t[6]=g+b,t[7]=0,t[8]=f+_,t[9]=g-b,t[10]=1-u-p,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function CRe(t,e,i,n,r,s,o){const a=1/(i-e),l=1/(r-n),u=1/(s-o);return t[0]=2*s*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(r+n)*l,t[10]=(o+s)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*u,t[15]=0,t}function IRe(t,e,i,n,r){const s=1/Math.tan(e/2);let o;return t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,r!=null&&r!==1/0?(o=1/(n-r),t[10]=(r+n)*o,t[14]=2*r*n*o):(t[10]=-1,t[14]=-2*n),t}function TRe(t,e,i,n){const r=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(r+s);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(r-s)*u*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t}function kRe(t,e,i,n,r,s,o){const a=1/(e-i),l=1/(n-r),u=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(e+i)*a,t[13]=(r+n)*l,t[14]=(o+s)*u,t[15]=1,t}function $Re(t,e,i,n){let r,s,o,a,l,u,h,p,f,g;const v=e[0],b=e[1],_=e[2],w=n[0],S=n[1],C=n[2],$=i[0],M=i[1],P=i[2],k=Ra();return Math.abs(v-$)<k&&Math.abs(b-M)<k&&Math.abs(_-P)<k?UI(t):(h=v-$,p=b-M,f=_-P,g=1/Math.sqrt(h*h+p*p+f*f),h*=g,p*=g,f*=g,r=S*f-C*p,s=C*h-w*f,o=w*p-S*h,g=Math.sqrt(r*r+s*s+o*o),g?(g=1/g,r*=g,s*=g,o*=g):(r=0,s=0,o=0),a=p*o-f*s,l=f*r-h*o,u=h*s-p*r,g=Math.sqrt(a*a+l*l+u*u),g?(g=1/g,a*=g,l*=g,u*=g):(a=0,l=0,u=0),t[0]=r,t[1]=a,t[2]=h,t[3]=0,t[4]=s,t[5]=l,t[6]=p,t[7]=0,t[8]=o,t[9]=u,t[10]=f,t[11]=0,t[12]=-(r*v+s*b+o*_),t[13]=-(a*v+l*b+u*_),t[14]=-(h*v+p*b+f*_),t[15]=1,t)}function ARe(t,e,i,n){const r=e[0],s=e[1],o=e[2],a=n[0],l=n[1],u=n[2];let h=r-i[0],p=s-i[1],f=o-i[2],g=h*h+p*p+f*f;g>0&&(g=1/Math.sqrt(g),h*=g,p*=g,f*=g);let v=l*f-u*p,b=u*h-a*f,_=a*p-l*h;return g=v*v+b*b+_*_,g>0&&(g=1/Math.sqrt(g),v*=g,b*=g,_*=g),t[0]=v,t[1]=b,t[2]=_,t[3]=0,t[4]=p*_-f*b,t[5]=f*v-h*_,t[6]=h*b-p*v,t[7]=0,t[8]=h,t[9]=p,t[10]=f,t[11]=0,t[12]=r,t[13]=s,t[14]=o,t[15]=1,t}function MRe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function ORe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2+t[9]**2+t[10]**2+t[11]**2+t[12]**2+t[13]**2+t[14]**2+t[15]**2)}function PRe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function pce(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function RRe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function LRe(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t[9]=e[9]+i[9]*n,t[10]=e[10]+i[10]*n,t[11]=e[11]+i[11]*n,t[12]=e[12]+i[12]*n,t[13]=e[13]+i[13]*n,t[14]=e[14]+i[14]*n,t[15]=e[15]+i[15]*n,t}function DRe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function FRe(t,e){if(t===e)return!0;const i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],p=t[9],f=t[10],g=t[11],v=t[12],b=t[13],_=t[14],w=t[15],S=e[0],C=e[1],$=e[2],M=e[3],P=e[4],k=e[5],D=e[6],z=e[7],B=e[8],j=e[9],K=e[10],ie=e[11],te=e[12],me=e[13],Ie=e[14],Me=e[15],oe=Ra();return Math.abs(i-S)<=oe*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(n-C)<=oe*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(r-$)<=oe*Math.max(1,Math.abs(r),Math.abs($))&&Math.abs(s-M)<=oe*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(o-P)<=oe*Math.max(1,Math.abs(o),Math.abs(P))&&Math.abs(a-k)<=oe*Math.max(1,Math.abs(a),Math.abs(k))&&Math.abs(l-D)<=oe*Math.max(1,Math.abs(l),Math.abs(D))&&Math.abs(u-z)<=oe*Math.max(1,Math.abs(u),Math.abs(z))&&Math.abs(h-B)<=oe*Math.max(1,Math.abs(h),Math.abs(B))&&Math.abs(p-j)<=oe*Math.max(1,Math.abs(p),Math.abs(j))&&Math.abs(f-K)<=oe*Math.max(1,Math.abs(f),Math.abs(K))&&Math.abs(g-ie)<=oe*Math.max(1,Math.abs(g),Math.abs(ie))&&Math.abs(v-te)<=oe*Math.max(1,Math.abs(v),Math.abs(te))&&Math.abs(b-me)<=oe*Math.max(1,Math.abs(b),Math.abs(me))&&Math.abs(_-Ie)<=oe*Math.max(1,Math.abs(_),Math.abs(Ie))&&Math.abs(w-Me)<=oe*Math.max(1,Math.abs(w),Math.abs(Me))}function NRe(t){const e=Ra(),i=t[0],n=t[1],r=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],h=t[10];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(n*n+o*o+u*u))<=e&&Math.abs(1-(r*r+a*a+h*h))<=e}function zRe(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[4]===0&&t[5]===1&&t[6]===0&&t[8]===0&&t[9]===0&&t[10]===1}const jRe=uce,VRe=pce;Object.freeze(Object.defineProperty({__proto__:null,add:PRe,adjoint:rRe,copy:iRe,determinant:sRe,equals:FRe,exactEquals:DRe,frob:ORe,fromQuat:ERe,fromQuat2:yRe,fromRotation:pRe,fromRotationTranslation:hce,fromRotationTranslationScale:xRe,fromRotationTranslationScaleOrigin:SRe,fromScaling:hRe,fromTranslation:dce,fromXRotation:fRe,fromYRotation:mRe,fromZRotation:gRe,frustum:CRe,getRotation:wRe,getScaling:_Re,getTranslation:bRe,hasIdentityRotation:zRe,identity:UI,invert:cce,invertOrIdentity:nRe,isOrthoNormal:NRe,lookAt:$Re,mul:jRe,multiply:uce,multiplyScalar:RRe,multiplyScalarAndAdd:LRe,ortho:kRe,perspective:IRe,perspectiveFromFieldOfView:TRe,rotate:lRe,rotateX:cRe,rotateY:uRe,rotateZ:dRe,scale:aRe,set:km,str:MRe,sub:VRe,subtract:pce,targetTo:ARe,translate:oRe,transpose:Vh},Symbol.toStringTag,{value:"Module"}));let sD,W=null;function fce(){return!!W}function URe(){return!!ee("esri-wasm")}function mce(){return sD||(sD=q(()=>import("./pe-wasm-815c1904.js"),[]).then(t=>t.p).then(({default:t})=>t({locateFile:e=>pt(`esri/geometry/support/${e}`)})).then(t=>{yce(t)}),sD)}var b4,$i,_4;(function(t){function e(s,o,a){W.ensureCache.prepare();const l=fy(a),u=a===l,h=W.ensureFloat64(l),p=W._pe_geog_to_proj(W.getPointer(s),o,h);return p&&bf(a,o,h,u),p}function i(s,o,a,l){switch(l){case $i.PE_TRANSFORM_P_TO_G:return n(s,o,a);case $i.PE_TRANSFORM_G_TO_P:return e(s,o,a)}return 0}function n(s,o,a){return r(s,o,a,0)}function r(s,o,a,l){W.ensureCache.prepare();const u=fy(a),h=a===u,p=W.ensureFloat64(u),f=W._pe_proj_to_geog_center(W.getPointer(s),o,p,l);return f&&bf(a,o,p,h),f}t.geogToProj=e,t.projGeog=i,t.projToGeog=n,t.projToGeogCenter=r})(b4||(b4={})),function(t){function e(){t.PE_BUFFER_MAX=W.PeDefs.prototype.PE_BUFFER_MAX,t.PE_NAME_MAX=W.PeDefs.prototype.PE_NAME_MAX,t.PE_MGRS_MAX=W.PeDefs.prototype.PE_MGRS_MAX,t.PE_USNG_MAX=W.PeDefs.prototype.PE_USNG_MAX,t.PE_DD_MAX=W.PeDefs.prototype.PE_DD_MAX,t.PE_DDM_MAX=W.PeDefs.prototype.PE_DDM_MAX,t.PE_DMS_MAX=W.PeDefs.prototype.PE_DMS_MAX,t.PE_UTM_MAX=W.PeDefs.prototype.PE_UTM_MAX,t.PE_PARM_MAX=W.PeDefs.prototype.PE_PARM_MAX,t.PE_TYPE_NONE=W.PeDefs.prototype.PE_TYPE_NONE,t.PE_TYPE_GEOGCS=W.PeDefs.prototype.PE_TYPE_GEOGCS,t.PE_TYPE_PROJCS=W.PeDefs.prototype.PE_TYPE_PROJCS,t.PE_TYPE_GEOGTRAN=W.PeDefs.prototype.PE_TYPE_GEOGTRAN,t.PE_TYPE_COORDSYS=W.PeDefs.prototype.PE_TYPE_COORDSYS,t.PE_TYPE_UNIT=W.PeDefs.prototype.PE_TYPE_UNIT,t.PE_TYPE_LINUNIT=W.PeDefs.prototype.PE_TYPE_LINUNIT,t.PE_STR_OPTS_NONE=W.PeDefs.prototype.PE_STR_OPTS_NONE,t.PE_STR_AUTH_NONE=W.PeDefs.prototype.PE_STR_AUTH_NONE,t.PE_STR_AUTH_TOP=W.PeDefs.prototype.PE_STR_AUTH_TOP,t.PE_STR_NAME_CANON=W.PeDefs.prototype.PE_STR_NAME_CANON,t.PE_PARM_X0=W.PeDefs.prototype.PE_PARM_X0,t.PE_PARM_ND=W.PeDefs.prototype.PE_PARM_ND,t.PE_TRANSFORM_1_TO_2=W.PeDefs.prototype.PE_TRANSFORM_1_TO_2,t.PE_TRANSFORM_2_TO_1=W.PeDefs.prototype.PE_TRANSFORM_2_TO_1,t.PE_TRANSFORM_P_TO_G=W.PeDefs.prototype.PE_TRANSFORM_P_TO_G,t.PE_TRANSFORM_G_TO_P=W.PeDefs.prototype.PE_TRANSFORM_G_TO_P,t.PE_HORIZON_RECT=W.PeDefs.prototype.PE_HORIZON_RECT,t.PE_HORIZON_POLY=W.PeDefs.prototype.PE_HORIZON_POLY,t.PE_HORIZON_LINE=W.PeDefs.prototype.PE_HORIZON_LINE,t.PE_HORIZON_DELTA=W.PeDefs.prototype.PE_HORIZON_DELTA}t.init=e}($i||($i={})),function(t){const e={},i={},n=g=>{if(g){const v=g.getType();switch(v){case $i.PE_TYPE_GEOGCS:g=W.castObject(g,W.PeGeogcs);break;case $i.PE_TYPE_PROJCS:g=W.castObject(g,W.PeProjcs);break;case $i.PE_TYPE_GEOGTRAN:g=W.castObject(g,W.PeGeogtran);break;default:v&$i.PE_TYPE_UNIT&&(g=W.castObject(g,W.PeUnit))}}return g};function r(){W.PeFactory.prototype.initialize(null)}function s(g){return o($i.PE_TYPE_COORDSYS,g)}function o(g,v){let b=null,_=e[g];if(_||(_={},e[g]=_),_.hasOwnProperty(String(v)))b=_[v];else{const w=W.PeFactory.prototype.factoryByType(g,v);W.compare(w,W.NULL)||(b=w,_[v]=b)}return b=n(b),b}function a(g,v){let b=null,_=i[g];if(_||(_={},i[g]=_),_.hasOwnProperty(v))b=_[v];else{const w=W.PeFactory.prototype.fromString(g,v);W.compare(w,W.NULL)||(b=w,_[v]=b)}return b=n(b),b}function l(g){return o($i.PE_TYPE_GEOGCS,g)}function u(g){return o($i.PE_TYPE_GEOGTRAN,g)}function h(g){return W.PeFactory.prototype.getCode(g)}function p(g){return o($i.PE_TYPE_PROJCS,g)}function f(g){return o($i.PE_TYPE_UNIT,g)}t.initialize=r,t.coordsys=s,t.factoryByType=o,t.fromString=a,t.geogcs=l,t.geogtran=u,t.getCode=h,t.projcs=p,t.unit=f}(_4||(_4={}));let gce=null;var RM,w4,x4,S4,LM,E4,DM,FM,C4;function yce(t){function e(s,o,a){s[o]=a(s[o])}W=t,$i.init(),RM.init(),LM.init(),DM.init(),FM.init(),gce=class extends W.PeGCSExtent{destroy(){W.destroy(this)}};const i=[W.PeDatum,W.PeGeogcs,W.PeGeogtran,W.PeObject,W.PeParameter,W.PePrimem,W.PeProjcs,W.PeSpheroid,W.PeUnit];for(const s of i)e(s.prototype,"getName",o=>function(){return o.call(this,new Array($i.PE_NAME_MAX))});for(const s of[W.PeGeogtran,W.PeProjcs])e(s.prototype,"getParameters",o=>function(){const a=new Array($i.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const h=W.getValue(l,"*");a[u]=h?W.wrapPointer(h,W.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});e(W.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return bf(a,o,s.call(this)),a}),e(W.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=W._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!W.compare(l,W.NULL)){a=[l];const u=this.getSteps();if(u>1){const h=W.getPointer(l);for(let p=1;p<u;p++)a.push(W.wrapPointer(h+o*p,W.PeGTlistExtendedGTs))}}return a}});const n=W._pe_getPeHorizonSize(),r=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!W.compare(l,W.NULL)){a=[l];const u=l.getNump();if(u>1){const h=W.getPointer(l);for(let p=1;p<u;p++)a.push(W.wrapPointer(h+n*p,W.PeHorizon))}}return o.set(s,a),a};e(W.PeProjcs.prototype,"horizonGcsGenerate",r),e(W.PeProjcs.prototype,"horizonPcsGenerate",r),W.PeObject.prototype.toString=function(s=$i.PE_STR_OPTS_NONE){W.ensureCache.prepare();const o=W.getPointer(this),a=W.ensureInt8(new Array($i.PE_BUFFER_MAX));return W.UTF8ToString(W._pe_object_to_string_ext(o,s,a))}}function sd(t){if(!t)return;const e=W.getClass(t);if(!e)return;const i=W.getCache(e);if(!i)return;const n=W.getPointer(t);n&&delete i[n]}function pT(t,e){const i=[],n=new Array(e);for(let r=0;r<t;r++)i.push(W.ensureInt8(n));return i}function fy(t){let e;return Array.isArray(t[0])?(e=[],t.forEach(i=>{e.push(i[0],i[1])})):e=t,e}function bf(t,e,i,n=!1){if(n)for(let r=0;r<2*e;r++)t[r]=W.getValue(i+r*Float64Array.BYTES_PER_ELEMENT,"double");else{const r=t.length===0;for(let s=0;s<e;s++)r&&(t[s]=new Array(2)),t[s][0]=W.getValue(i,"double"),t[s][1]=W.getValue(i+Float64Array.BYTES_PER_ELEMENT,"double"),i+=2*Float64Array.BYTES_PER_ELEMENT}}(function(t){let e;function i(){t.PE_GTLIST_OPTS_COMMON=W.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,e=W._pe_getPeGTlistExtendedEntrySize()}function n(r,s,o,a,l,u){let h=null;const p=new W.PeInteger(u);try{const f=W.PeGTlistExtended.prototype.getGTlist(r,s,o,a,l,p);if((u=p.val)&&(h=[f],u>1)){const g=W.getPointer(f);for(let v=1;v<u;v++)h.push(W.wrapPointer(g+e*v,W.PeGTlistExtendedEntry))}}finally{W.destroy(p)}return h}t.init=i,t.getGTlist=n})(RM||(RM={})),function(t){function e(i){if(i&&i.length){for(const n of i)sd(n),n.getEntries().forEach(r=>{sd(r);const s=r.getGeogtran();sd(s),s.getParameters().forEach(sd),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{sd(o);const a=o.getDatum();sd(a),sd(a.getSpheroid()),sd(o.getPrimem()),sd(o.getUnit())})});W.PeGTlistExtendedEntry.prototype.Delete(i[0])}}t.destroy=e}(w4||(w4={})),function(t){function e(i,n,r,s,o){W.ensureCache.prepare();const a=fy(r),l=r===a,u=W.ensureFloat64(a);let h=0;s&&(h=W.ensureFloat64(s));const p=W._pe_geog_to_geog(W.getPointer(i),n,u,h,o);return p&&bf(r,n,u,l),p}t.geogToGeog=e}(x4||(x4={})),function(t){const e=(u,h,p,f,g,v)=>{let b,_;switch(W.ensureCache.prepare(),u){case"dd":b=W._pe_geog_to_dd,_=$i.PE_DD_MAX;break;case"ddm":b=W._pe_geog_to_ddm,_=$i.PE_DDM_MAX;break;case"dms":b=W._pe_geog_to_dms,_=$i.PE_DMS_MAX}let w=0;h&&(w=W.getPointer(h));const S=fy(f),C=W.ensureFloat64(S),$=pT(p,_),M=b(w,p,C,g,W.ensureInt32($));if(M)for(let P=0;P<p;P++)v[P]=W.UTF8ToString($[P]);return M},i=(u,h,p,f,g)=>{let v;switch(W.ensureCache.prepare(),u){case"dd":v=W._pe_dd_to_geog;break;case"ddm":v=W._pe_ddm_to_geog;break;case"dms":v=W._pe_dms_to_geog}let b=0;h&&(b=W.getPointer(h));const _=f.map($=>W.ensureString($)),w=W.ensureInt32(_),S=W.ensureFloat64(new Array(2*p)),C=v(b,p,w,S);return C&&bf(g,p,S),C};function n(u,h,p,f,g){return e("dms",u,h,p,f,g)}function r(u,h,p,f){return i("dms",u,h,p,f)}function s(u,h,p,f,g){return e("ddm",u,h,p,f,g)}function o(u,h,p,f){return i("ddm",u,h,p,f)}function a(u,h,p,f,g){return e("dd",u,h,p,f,g)}function l(u,h,p,f){return i("dd",u,h,p,f)}t.geogToDms=n,t.dmsToGeog=r,t.geogToDdm=s,t.ddmToGeog=o,t.geogToDd=a,t.ddToGeog=l}(S4||(S4={})),function(t){function e(){t.PE_MGRS_STYLE_NEW=W.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,t.PE_MGRS_STYLE_OLD=W.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,t.PE_MGRS_STYLE_AUTO=W.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,t.PE_MGRS_180_ZONE_1_PLUS=W.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,t.PE_MGRS_ADD_SPACES=W.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function i(r,s,o,a,l,u,h){W.ensureCache.prepare();let p=0;r&&(p=W.getPointer(r));const f=fy(o),g=W.ensureFloat64(f),v=pT(s,$i.PE_MGRS_MAX),b=W.ensureInt32(v),_=W._pe_geog_to_mgrs_extended(p,s,g,a,l,u,b);if(_)for(let w=0;w<s;w++)h[w]=W.UTF8ToString(v[w]);return _}function n(r,s,o,a,l){W.ensureCache.prepare();let u=0;r&&(u=W.getPointer(r));const h=o.map(v=>W.ensureString(v)),p=W.ensureInt32(h),f=W.ensureFloat64(new Array(2*s)),g=W._pe_mgrs_to_geog_extended(u,s,p,a,f);return g&&bf(l,s,f),g}t.init=e,t.geogToMgrsExtended=i,t.mgrsToGeogExtended=n}(LM||(LM={})),function(t){function e(n,r,s,o,a,l,u){W.ensureCache.prepare();let h=0;n&&(h=W.getPointer(n));const p=fy(s),f=W.ensureFloat64(p),g=pT(r,$i.PE_MGRS_MAX),v=W.ensureInt32(g),b=W._pe_geog_to_usng(h,r,f,o,a,l,v);if(b)for(let _=0;_<r;_++)u[_]=W.UTF8ToString(g[_]);return b}function i(n,r,s,o){W.ensureCache.prepare();let a=0;n&&(a=W.getPointer(n));const l=s.map(f=>W.ensureString(f)),u=W.ensureInt32(l),h=W.ensureFloat64(new Array(2*r)),p=W._pe_usng_to_geog(a,r,u,h);return p&&bf(o,r,h),p}t.geogToUsng=e,t.usngToGeog=i}(E4||(E4={})),function(t){function e(){t.PE_UTM_OPTS_NONE=W.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,t.PE_UTM_OPTS_ADD_SPACES=W.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,t.PE_UTM_OPTS_NS=W.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function i(r,s,o,a,l){W.ensureCache.prepare();let u=0;r&&(u=W.getPointer(r));const h=fy(o),p=W.ensureFloat64(h),f=pT(s,$i.PE_UTM_MAX),g=W.ensureInt32(f),v=W._pe_geog_to_utm(u,s,p,a,g);if(v)for(let b=0;b<s;b++)l[b]=W.UTF8ToString(f[b]);return v}function n(r,s,o,a,l){W.ensureCache.prepare();let u=0;r&&(u=W.getPointer(r));const h=o.map(v=>W.ensureString(v)),p=W.ensureInt32(h),f=W.ensureFloat64(new Array(2*s)),g=W._pe_utm_to_geog(u,s,p,a,f);return g&&bf(l,s,f),g}t.init=e,t.geogToUtm=i,t.utmToGeog=n}(DM||(DM={})),function(t){const e=new Map;function i(){t.PE_PCSINFO_OPTION_NONE=W.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,t.PE_PCSINFO_OPTION_DOMAIN=W.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,t.PE_POLE_OUTSIDE_BOUNDARY=W.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,t.PE_POLE_POINT=W.PePCSInfo.prototype.PE_POLE_POINT}function n(r,s=t.PE_PCSINFO_OPTION_DOMAIN){let o=null,a=null;return e.has(r)&&(a=e.get(r),a[s]&&(o=a[s])),o||(o=W.PePCSInfo.prototype.generate(r,s),a||(a=[],e.set(r,a)),a[s]=o),o}t.init=i,t.generate=n}(FM||(FM={})),function(t){function e(){return W.PeVersion.prototype.version_string()}t.versionString=e}(C4||(C4={}));const BRe=Object.freeze(Object.defineProperty({__proto__:null,get PeCSTransformations(){return b4},get PeDefs(){return $i},get PeFactory(){return _4},get PeGCSExtent(){return gce},get PeGTTransformations(){return x4},get PeGTlistExtended(){return RM},get PeGTlistExtendedEntry(){return w4},get PeNotationDms(){return S4},get PeNotationMgrs(){return LM},get PeNotationUsng(){return E4},get PeNotationUtm(){return DM},get PePCSInfo(){return FM},get PeVersion(){return C4},_init:yce,get _pe(){return W},isLoaded:fce,isSupported:URe,load:mce},Symbol.toStringTag,{value:"Module"})),wo=Math.PI/180,HRe=/SPHEROID\[([^\]]+)]/i,ep=ci.radius,Pl=ci.eccentricitySquared,GRe={a1:ep*Pl,a2:ep*Pl*ep*Pl,a3:ep*Pl*Pl/2,a4:ep*Pl*ep*Pl*2.5,a5:ep*Pl+ep*Pl*Pl/2,a6:1-Pl},qRe={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:ci.radius,f:ci.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:tm.radius,f:tm.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:hh.radius,f:hh.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:hh.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let fT=0,oD=class I4{static fromGE(e){const i=new I4;return i._wkt=e.wkt,i._wkid=e.wkid,i._isInverse=e.isInverse,i}constructor(e){this.uid=fT++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=fT++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=fT++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=fT++}getInverse(){const e=new I4;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}},T4=class fS{static cacheKey(e,i){return[e.wkid!==void 0&&e.wkid!==null?e.wkid.toString():"-1",e.wkt!==void 0&&e.wkt!==null?e.wkt.toString():"",i.wkid!==void 0&&i.wkid!==null?i.wkid.toString():"-1",i.wkt!==void 0&&i.wkt!==null?i.wkt.toString():""].join(",")}static fromGE(e){const i=new fS;let n="";for(const r of e.steps){const s=oD.fromGE(r);i.steps.push(s),n+=s.uid.toString()+","}return i._cachedProjection={},i._gtlistentry=null,i._chain=n,i}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e&&e.steps)for(const i of e.steps)i instanceof oD?this.steps.push(i):this.steps.push(new oD({wkid:i.wkid,wkt:i.wkt,isInverse:i.isInverse}))}getInverse(){const e=new fS;e.steps=[];for(let i=this.steps.length-1;i>=0;i--){const n=this.steps[i];e.steps.push(n.getInverse())}return e}getGTListEntry(){let e="";for(const i of this.steps)e+=i.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,i,n){this._cachedProjection[fS.cacheKey(e,i)]=n}getCachedGeTransformation(e,i){let n="";for(const s of this.steps)n+=s.uid.toString()+",";n!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=n);const r=this._cachedProjection[fS.cacheKey(e,i)];return r===void 0?null:r}};function vce(t,e,i){if(U(e)||U(i)||i.vcsWkid||ui(e,i))return null;const n=nw(e)/nw(i);if(n===1)return null;switch(t){case"point":case"esriGeometryPoint":return r=>WRe(r,n);case"polyline":case"esriGeometryPolyline":return r=>YRe(r,n);case"polygon":case"esriGeometryPolygon":return r=>JRe(r,n);case"multipoint":case"esriGeometryMultipoint":return r=>ZRe(r,n);case"extent":case"esriGeometryExtent":return r=>KRe(r,n);default:return null}}function WRe(t,e){t&&t.z!=null&&(t.z*=e)}function JRe(t,e){if(t)for(const i of t.rings)for(const n of i)n.length>2&&(n[2]*=e)}function YRe(t,e){if(t)for(const i of t.paths)for(const n of i)n.length>2&&(n[2]*=e)}function ZRe(t,e){if(t)for(const i of t.points)i.length>2&&(i[2]*=e)}function KRe(t,e){t&&t.zmin!=null&&t.zmax!=null&&(t.zmin*=e,t.zmax*=e)}let Wf=null,LC=null,aD=null,lD={};const bce=new K8;function om(){return!!Wf&&fce()}function am(t){return U(aD)&&(aD=Promise.all([mce(),q(()=>import("./geometryEngineBase-e1a33b0a.js"),[]).then(e=>e.g),q(()=>import("./hydrated-e67bc681.js"),[])])),aD.then(([,e,{hydratedAdapter:i}])=>{Xi(t),LC=i,Wf=e.default,Wf._enableProjection(BRe),bce.notify()})}function Hu(t,e,i=null,n=null){return Array.isArray(t)?t.length===0?[]:NM(LC,t,t[0].spatialReference,e,i,n):NM(LC,[t],t.spatialReference,e,i,n)[0]}function NM(t,e,i,n,r=null,s=null){if(U(i)||U(n))return e;if(Gu(i,n,r))return e.map(o=>tLe(o,i,n));if(U(r)){const o=T4.cacheKey(i,n);lD[o]!==void 0?r=lD[o]:(r=QRe(i,n,void 0),U(r)&&(r=new T4),lD[o]=r)}if(U(Wf)||U(t))throw new U9;return A(s)?Wf._project(t,e,i,n,r,s):Wf._project(t,e,i,n,r)}function y0t(t,e){const i=XRe([t],e);return A(i.pending)?{pending:i.pending,geometry:null}:A(i.geometries)?{pending:null,geometry:i.geometries[0]}:{pending:null,geometry:null}}function XRe(t,e){if(!om()){for(const i of t)if(A(i)&&!ui(i.spatialReference,e)&&vn(i.spatialReference)&&vn(e)&&!Gu(i.spatialReference,e))return Ke(bce),{pending:am(),geometries:null}}return{pending:null,geometries:t.map(i=>U(i)?null:ui(i.spatialReference,e)?i:vn(i.spatialReference)&&vn(e)?eLe(i,e):null)}}function QRe(t,e,i=null){if(U(t)||U(e))return null;if(U(Wf)||U(LC))throw new U9;const n=Wf._getTransformation(LC,t,e,i,i==null?void 0:i.spatialReference);return n!==null?T4.fromGE(n):null}let U9=class extends N{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}};var H;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.SPHERICAL_ECEF=1]="SPHERICAL_ECEF",t[t.WGS84=2]="WGS84",t[t.WEB_MERCATOR=3]="WEB_MERCATOR",t[t.WGS84_ECEF=4]="WGS84_ECEF",t[t.CGCS2000=5]="CGCS2000",t[t.WGS84_COMPARABLE_LON_LAT=6]="WGS84_COMPARABLE_LON_LAT",t[t.SPHERICAL_MARS_PCPF=7]="SPHERICAL_MARS_PCPF",t[t.GCSMARS2000=8]="GCSMARS2000",t[t.SPHERICAL_MOON_PCPF=9]="SPHERICAL_MOON_PCPF",t[t.GCSMOON2000=10]="GCSMOON2000",t[t.LON_LAT=11]="LON_LAT",t[t.PLATE_CARREE=12]="PLATE_CARREE"})(H||(H={}));function eLe(t,e){try{const i=Hu(t,e);if(i==null)return null;"xmin"in t&&"xmin"in i&&(i.zmin=t.zmin,i.zmax=t.zmax);const n=vce(i.type,t.spatialReference,e);return A(n)&&n(i),i}catch(i){if(!(i instanceof U9))throw i;return null}}function Gu(t,e,i){return!i&&(!!ui(t,e)||vn(t)&&vn(e)&&!!Ece(t,e,Cce))}async function B9(t,e,i,n){if(om())return hW(n);if(Array.isArray(t)){for(const{source:r,dest:s,geographicTransformation:o}of t)if(!Gu(r,s,o))return am(n)}else if(!Gu(t,e,i))return am(n);return hW(n)}function tLe(t,e,i){return t?"x"in t?_ce(t,e,new Ve,i,0):"xmin"in t?rLe(t,e,new Dt,i,0):"rings"in t?wce(t,e,new Ws,i,0):"paths"in t?nLe(t,e,new Gs,i,0):"points"in t?iLe(t,e,new DP,i,0):null:null}function b0t(t,e,i=e.spatialReference,n=0){return A(i)&&A(t.spatialReference)&&A(_ce(t,t.spatialReference,e,i,n))}function _ce(t,e,i,n,r){yi[0]=t.x,yi[1]=t.y;const s=t.z;return yi[2]=s!==void 0?s:r,Oh(yi,e,0,yi,n,0,1)?(i.x=yi[0],i.y=yi[1],i.spatialReference=n,s===void 0?(i.z=void 0,i.hasZ=!1):(i.z=yi[2],i.hasZ=!0),t.m===void 0?(i.m=void 0,i.hasM=!1):(i.m=t.m,i.hasM=!0),i):null}function iLe(t,e,i,n,r){const{points:s,hasZ:o,hasM:a}=t,l=[],u=s.length,h=[];for(const p of s)h.push(p[0],p[1],o?p[2]:r);if(!Oh(h,e,0,h,n,0,u))return null;for(let p=0;p<u;++p){const f=3*p,g=h[f],v=h[f+1];o&&a?l.push([g,v,h[f+2],s[p][3]]):o?l.push([g,v,h[f+2]]):a?l.push([g,v,s[p][2]]):l.push([g,v])}return i.points=l,i.spatialReference=n,i.hasZ=o,i.hasM=a,i}function nLe(t,e,i,n,r){const{paths:s,hasZ:o,hasM:a}=t,l=[];return xce(s,o??!1,a??!1,e,l,n,r)?(i.paths=l,i.spatialReference=n,i.hasZ=o,i.hasM=a,i):null}function _0t({hasZ:t,spatialReference:e,paths:i},n,r=0){const s=lm(e,BI),o=oh[s][H.WGS84_COMPARABLE_LON_LAT];if(U(o))return!1;const a=t?l=>l:l=>Ah(yi,l[0],l[1],r);for(const l of i){const u=[];for(const h of l){const p=[0,0,r];o(a(h),0,p,0),u.push(p)}n.push(u)}return!0}function w0t({hasZ:t,spatialReference:e,rings:i},n,r=0){const s=lm(e,BI),o=oh[s][H.WGS84_COMPARABLE_LON_LAT];if(U(o))return!1;const a=t?l=>l:l=>Ah(yi,l[0],l[1],r);for(const l of i){const u=[];for(const h of l){const p=[0,0,r];o(a(h),0,p,0),u.push(p)}n.push(u)}return!0}function x0t(t,e,i=e.spatialReference,n=0){return A(t.spatialReference)&&A(i)&&A(wce(t,t.spatialReference,e,i,n))}function wce(t,e,i,n,r){const{rings:s,hasZ:o,hasM:a}=t,l=[];return xce(s,o??!1,a??!1,e,l,n,r)?(i.rings=l,i.spatialReference=n,i.hasZ=o,i.hasM=a,i):null}function rLe(t,e,i,n,r){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:h}=t;return cJ(s,o,u?t.zmin:r,e,yi,n)?(i.xmin=yi[0],i.ymin=yi[1],u&&(i.zmin=yi[2]),cJ(a,l,u?t.zmax:r,e,yi,n)?(i.xmax=yi[0],i.ymax=yi[1],u&&(i.zmax=yi[2]),h&&(i.mmin=t.mmin,i.mmax=t.mmax),i.spatialReference=n,i):null):null}function S0t(t,e,i){return Oh(t,e,0,yi,i.spatialReference,0,1)?(i.x=yi[0],i.y=yi[1],i.z=yi[2],i):null}function E0t(t,e,i,n=0){yi[0]=t.x,yi[1]=t.y;const r=t.z;return yi[2]=r!==void 0?r:n,Oh(yi,t.spatialReference,0,e,i,0,1)}function cJ(t,e,i,n,r,s){return ai[0]=t,ai[1]=e,ai[2]=i,Oh(ai,n,0,r,s,0,1)}function C0t(t,e,i,n){return!(U(e)||U(n)||t.length<2)&&(t.length===2&&(ai[0]=t[0],ai[1]=t[1],ai[2]=0,t=ai),Oh(t,e,0,i,n,0,1))}function I0t(t,e,i){return sLe(t,e,i)}function sLe(t,e,i){if(U(e))return!1;const n=lm(e,BI),r=oh[n][H.WGS84_COMPARABLE_LON_LAT];return!U(r)&&(r(t,0,ai,0),i!==ai&&(i[0]=ai[0],i[1]=ai[1],i.length>2&&(i[2]=ai[2])),!0)}function Oh(t,e,i,n,r,s,o=1){const a=Ece(e,r,Cce);if(U(a))return!1;if(a===Qt){if(t===n&&i===s)return!0;const u=i+3*o;for(let h=i,p=s;h<u;h++,p++)n[p]=t[h];return!0}const l=i+3*o;for(let u=i,h=s;u<l;u+=3,h+=3)a(t,u,n,h);return!0}function xce(t,e,i,n,r,s,o=0){const a=new Array;for(const u of t)for(const h of u)a.push(h[0],h[1],e?h[2]:o);if(!Oh(a,n,0,a,s,0,a.length/3))return!1;let l=0;r.length=0;for(const u of t){const h=new Array;for(const p of u)e&&i?h.push([a[l++],a[l++],a[l++],p[3]]):e?h.push([a[l++],a[l++],a[l++]]):i?(h.push([a[l++],a[l++],p[2]]),l++):(h.push([a[l++],a[l++]]),l++);r.push(h)}return!0}function T0t(t,e,i,n){return t!=null&&(ui(e,n)?(g9(i,t),!0):(ai[0]=t[0],ai[1]=t[1],ai[2]=0,!!Oh(ai,e,0,ai,n,0,1)&&(i[0]=ai[0],i[1]=ai[1],ai[0]=t[2],ai[1]=t[3],ai[2]=0,!!Oh(ai,e,0,ai,n,0,1)&&(i[2]=ai[0],i[3]=ai[1],!0))))}function k0t(t,e,i,n){if(U(t)||U(n))return!1;const r=lm(t,BI),s=lm(n,xLe);if(r===s&&!uJ(s)&&(r!==H.UNKNOWN||ui(t,n)))return dce(i,e),!0;if(uJ(s)){const o=oh[r][H.LON_LAT],a=oh[H.LON_LAT][s];return!U(o)&&!U(a)&&(o(e,0,tp,0),a(tp,0,ip,0),Sce(Au*tp[0],Au*tp[1],i),i[12]=ip[0],i[13]=ip[1],i[14]=ip[2],!0)}if((s===H.WEB_MERCATOR||s===H.PLATE_CARREE)&&(r===H.WGS84||r===H.CGCS2000&&s===H.PLATE_CARREE||r===H.SPHERICAL_ECEF||r===H.WEB_MERCATOR)){const o=oh[r][H.LON_LAT],a=oh[H.LON_LAT][s];return!U(o)&&!U(a)&&(o(e,0,tp,0),a(tp,0,ip,0),r===H.SPHERICAL_ECEF?oLe(Au*tp[0],Au*tp[1],i):UI(i),i[12]=ip[0],i[13]=ip[1],i[14]=ip[2],!0)}return!1}function uJ(t){return t===H.SPHERICAL_ECEF||t===H.SPHERICAL_MARS_PCPF||t===H.SPHERICAL_MOON_PCPF}function Sce(t,e,i){const n=Math.sin(t),r=Math.cos(t),s=Math.sin(e),o=Math.cos(e),a=i;return a[0]=-n,a[4]=-s*r,a[8]=o*r,a[12]=0,a[1]=r,a[5]=-s*n,a[9]=o*n,a[13]=0,a[2]=0,a[6]=o,a[10]=s,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function oLe(t,e,i){return Sce(t,e,i),Vh(i,i),i}function lm(t,e){return t?e.spatialReference===t?e.spatialReferenceId:(e.spatialReference=t,"metersPerUnit"in e&&(e.metersPerUnit=jh(t,1)),t.wkt===OTe.wkt?e.spatialReferenceId=H.SPHERICAL_ECEF:vC(t)?e.spatialReferenceId=H.WGS84:zu(t)?e.spatialReferenceId=H.WEB_MERCATOR:kTe(t)?e.spatialReferenceId=H.PLATE_CARREE:t.wkt===PTe.wkt?e.spatialReferenceId=H.WGS84_ECEF:t.wkid===m0.CGCS2000?e.spatialReferenceId=H.CGCS2000:t.wkt===Eoe.wkt?e.spatialReferenceId=H.SPHERICAL_MARS_PCPF:t.wkt===Coe.wkt?e.spatialReferenceId=H.SPHERICAL_MOON_PCPF:j8(t)?e.spatialReferenceId=H.GCSMARS2000:U8(t)?e.spatialReferenceId=H.GCSMOON2000:e.spatialReferenceId=H.UNKNOWN):H.UNKNOWN}function Qt(t,e,i,n){t!==i&&(i[n++]=t[e++],i[n++]=t[e++],i[n]=t[e])}function M_(t,e,i,n){i[n++]=dw*(t[e++]/ci.radius),i[n++]=dw*(Math.PI/2-2*Math.atan(Math.exp(-t[e++]/ci.radius))),i[n]=t[e]}function aLe(t,e,i,n){M_(t,e,i,n),Fy(i,n,i,n)}function lLe(t,e,i,n){M_(t,e,i,n),zy(i,n,i,n)}function cLe(t,e,i,n,r){const s=.4999999*Math.PI,o=zo(Au*t[e+1],-s,s),a=Math.sin(o);i[n++]=Au*t[e]*r.radius,i[n++]=r.halfSemiMajorAxis*Math.log((1+a)/(1-a)),i[n]=t[e+2]}function DC(t,e,i,n){cLe(t,e,i,n,ci)}const dJ=ci.radius*Math.PI/180,hJ=180/(ci.radius*Math.PI);function Ly(t,e,i,n){i[n]=t[e]*dJ,i[n+1]=t[e+1]*dJ,i[n+2]=t[e+2]}function Dy(t,e,i,n){i[n]=t[e]*hJ,i[n+1]=t[e+1]*hJ,i[n+2]=t[e+2]}function uLe(t,e,i,n){M_(t,e,i,n),Ly(i,n,i,n)}function dLe(t,e,i,n){jy(t,e,i,n),Ly(i,n,i,n)}function hLe(t,e,i,n){Ny(t,e,i,n),Ly(i,n,i,n)}function pLe(t,e,i,n){Dy(t,e,i,n),Fy(i,n,i,n)}function fLe(t,e,i,n){Dy(t,e,i,n),DC(i,n,i,n)}function mLe(t,e,i,n){Dy(t,e,i,n),zy(i,n,i,n)}function $0t(t){if(U(t))return!1;const e=lm(t,BI);return!!oh[e][H.WGS84_COMPARABLE_LON_LAT]}function H9(t,e,i,n,r){const s=r+t[e+2],o=Au*t[e+1],a=Au*t[e],l=Math.cos(o);i[n++]=Math.cos(a)*l*s,i[n++]=Math.sin(a)*l*s,i[n]=Math.sin(o)*s}function pJ(t,e,i,n){H9(t,e,i,n,tm.radius)}function fJ(t,e,i,n){H9(t,e,i,n,hh.radius)}function Fy(t,e,i,n){H9(t,e,i,n,ci.radius)}function G9(t,e,i,n,r){const s=t[e],o=t[e+1],a=t[e+2],l=Math.sqrt(s*s+o*o+a*a),u=ile(a/(l===0?1:l)),h=Math.atan2(o,s);i[n++]=dw*h,i[n++]=dw*u,i[n]=l-r}function mJ(t,e,i,n){G9(t,e,i,n,tm.radius)}function gJ(t,e,i,n){G9(t,e,i,n,hh.radius)}function Ny(t,e,i,n){G9(t,e,i,n,ci.radius)}function gLe(t,e,i,n){Ny(t,e,i,n),DC(i,n,i,n)}function yLe(t,e,i,n){Ny(t,e,i,n),zy(i,n,i,n)}function vLe(t,e,i,n,r){const s=Au*t[e],o=Au*t[e+1],a=t[e+2],l=Math.sin(o),u=Math.cos(o),h=r.radius/Math.sqrt(1-r.eccentricitySquared*l*l);i[n++]=(h+a)*u*Math.cos(s),i[n++]=(h+a)*u*Math.sin(s),i[n++]=(h*(1-r.eccentricitySquared)+a)*l}function zy(t,e,i,n){vLe(t,e,i,n,ci)}function jy(t,e,i,n){const r=GRe,s=t[e],o=t[e+1],a=t[e+2];let l,u,h,p,f,g,v,b,_,w,S,C,$,M,P,k,D,z,B,j,K;l=Math.abs(a),u=s*s+o*o,h=Math.sqrt(u),p=u+a*a,f=Math.sqrt(p),j=Math.atan2(o,s),g=a*a/p,v=u/p,M=r.a2/f,P=r.a3-r.a4/f,v>.3?(b=l/f*(1+v*(r.a1+M+g*P)/f),B=Math.asin(b),w=b*b,_=Math.sqrt(1-w)):(_=h/f*(1-g*(r.a5-M-v*P)/f),B=Math.acos(_),w=1-_*_,b=Math.sqrt(w)),S=1-ci.eccentricitySquared*w,C=ci.radius/Math.sqrt(S),$=r.a6*C,M=h-C*_,P=l-$*b,D=_*M+b*P,k=_*P-b*M,z=k/($/S+D),B+=z,K=D+k*z/2,a<0&&(B=-B),i[n++]=dw*j,i[n++]=dw*B,i[n]=K}function bLe(t,e,i,n){jy(t,e,i,n),Fy(i,n,i,n)}function _Le(t,e,i,n){jy(t,e,i,n),DC(i,n,i,n)}const oh={[H.WGS84]:{[H.CGCS2000]:null,[H.GCSMARS2000]:null,[H.GCSMOON2000]:null,[H.LON_LAT]:Qt,[H.WGS84_COMPARABLE_LON_LAT]:Qt,[H.SPHERICAL_ECEF]:Fy,[H.SPHERICAL_MARS_PCPF]:null,[H.SPHERICAL_MOON_PCPF]:null,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:DC,[H.PLATE_CARREE]:Ly,[H.WGS84]:Qt,[H.WGS84_ECEF]:zy},[H.CGCS2000]:{[H.CGCS2000]:Qt,[H.GCSMARS2000]:null,[H.GCSMOON2000]:null,[H.LON_LAT]:Qt,[H.WGS84_COMPARABLE_LON_LAT]:Qt,[H.SPHERICAL_ECEF]:Fy,[H.SPHERICAL_MARS_PCPF]:null,[H.SPHERICAL_MOON_PCPF]:null,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:null,[H.PLATE_CARREE]:Ly,[H.WGS84]:null,[H.WGS84_ECEF]:zy},[H.GCSMARS2000]:{[H.CGCS2000]:null,[H.GCSMARS2000]:Qt,[H.GCSMOON2000]:null,[H.LON_LAT]:Qt,[H.WGS84_COMPARABLE_LON_LAT]:null,[H.SPHERICAL_ECEF]:null,[H.SPHERICAL_MARS_PCPF]:fJ,[H.SPHERICAL_MOON_PCPF]:null,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:null,[H.PLATE_CARREE]:null,[H.WGS84]:null,[H.WGS84_ECEF]:null},[H.GCSMOON2000]:{[H.CGCS2000]:null,[H.GCSMARS2000]:null,[H.GCSMOON2000]:Qt,[H.LON_LAT]:Qt,[H.WGS84_COMPARABLE_LON_LAT]:null,[H.SPHERICAL_ECEF]:null,[H.SPHERICAL_MARS_PCPF]:null,[H.SPHERICAL_MOON_PCPF]:pJ,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:null,[H.PLATE_CARREE]:null,[H.WGS84]:null,[H.WGS84_ECEF]:null},[H.WEB_MERCATOR]:{[H.CGCS2000]:null,[H.GCSMARS2000]:null,[H.GCSMOON2000]:null,[H.LON_LAT]:M_,[H.WGS84_COMPARABLE_LON_LAT]:M_,[H.SPHERICAL_ECEF]:aLe,[H.SPHERICAL_MARS_PCPF]:null,[H.SPHERICAL_MOON_PCPF]:null,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:Qt,[H.PLATE_CARREE]:uLe,[H.WGS84]:M_,[H.WGS84_ECEF]:lLe},[H.WGS84_ECEF]:{[H.CGCS2000]:jy,[H.GCSMARS2000]:null,[H.GCSMOON2000]:null,[H.LON_LAT]:jy,[H.WGS84_COMPARABLE_LON_LAT]:jy,[H.SPHERICAL_ECEF]:bLe,[H.SPHERICAL_MARS_PCPF]:null,[H.SPHERICAL_MOON_PCPF]:null,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:_Le,[H.PLATE_CARREE]:dLe,[H.WGS84]:jy,[H.WGS84_ECEF]:Qt},[H.SPHERICAL_ECEF]:{[H.CGCS2000]:Ny,[H.GCSMARS2000]:null,[H.GCSMOON2000]:null,[H.LON_LAT]:Ny,[H.WGS84_COMPARABLE_LON_LAT]:Ny,[H.SPHERICAL_ECEF]:Qt,[H.SPHERICAL_MARS_PCPF]:null,[H.SPHERICAL_MOON_PCPF]:null,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:gLe,[H.PLATE_CARREE]:hLe,[H.WGS84]:Ny,[H.WGS84_ECEF]:yLe},[H.SPHERICAL_MARS_PCPF]:{[H.CGCS2000]:null,[H.GCSMARS2000]:gJ,[H.GCSMOON2000]:null,[H.LON_LAT]:gJ,[H.WGS84_COMPARABLE_LON_LAT]:null,[H.SPHERICAL_ECEF]:null,[H.SPHERICAL_MARS_PCPF]:Qt,[H.SPHERICAL_MOON_PCPF]:null,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:null,[H.PLATE_CARREE]:null,[H.WGS84]:null,[H.WGS84_ECEF]:null},[H.SPHERICAL_MOON_PCPF]:{[H.CGCS2000]:null,[H.GCSMARS2000]:null,[H.GCSMOON2000]:mJ,[H.LON_LAT]:mJ,[H.WGS84_COMPARABLE_LON_LAT]:null,[H.SPHERICAL_ECEF]:null,[H.SPHERICAL_MARS_PCPF]:null,[H.SPHERICAL_MOON_PCPF]:Qt,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:null,[H.PLATE_CARREE]:null,[H.WGS84]:null,[H.WGS84_ECEF]:null},[H.UNKNOWN]:{[H.CGCS2000]:null,[H.GCSMARS2000]:null,[H.GCSMOON2000]:null,[H.LON_LAT]:null,[H.WGS84_COMPARABLE_LON_LAT]:null,[H.SPHERICAL_ECEF]:null,[H.SPHERICAL_MARS_PCPF]:null,[H.SPHERICAL_MOON_PCPF]:null,[H.UNKNOWN]:Qt,[H.WEB_MERCATOR]:null,[H.PLATE_CARREE]:null,[H.WGS84]:null,[H.WGS84_ECEF]:null},[H.LON_LAT]:{[H.CGCS2000]:Qt,[H.GCSMARS2000]:Qt,[H.GCSMOON2000]:Qt,[H.LON_LAT]:Qt,[H.WGS84_COMPARABLE_LON_LAT]:Qt,[H.SPHERICAL_ECEF]:Fy,[H.SPHERICAL_MARS_PCPF]:fJ,[H.SPHERICAL_MOON_PCPF]:pJ,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:DC,[H.PLATE_CARREE]:Ly,[H.WGS84]:Qt,[H.WGS84_ECEF]:zy},[H.WGS84_COMPARABLE_LON_LAT]:{[H.CGCS2000]:null,[H.GCSMARS2000]:null,[H.GCSMOON2000]:null,[H.LON_LAT]:Qt,[H.WGS84_COMPARABLE_LON_LAT]:Qt,[H.SPHERICAL_ECEF]:Fy,[H.SPHERICAL_MARS_PCPF]:null,[H.SPHERICAL_MOON_PCPF]:null,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:null,[H.PLATE_CARREE]:Ly,[H.WGS84]:Qt,[H.WGS84_ECEF]:zy},[H.PLATE_CARREE]:{[H.CGCS2000]:Dy,[H.GCSMARS2000]:null,[H.GCSMOON2000]:null,[H.LON_LAT]:Dy,[H.WGS84_COMPARABLE_LON_LAT]:Dy,[H.SPHERICAL_ECEF]:pLe,[H.SPHERICAL_MARS_PCPF]:null,[H.SPHERICAL_MOON_PCPF]:null,[H.UNKNOWN]:null,[H.WEB_MERCATOR]:fLe,[H.PLATE_CARREE]:Qt,[H.WGS84]:Dy,[H.WGS84_ECEF]:mLe}};function Ece(t,e,i=q9()){return U(t)||U(e)?null:wLe(t,e,i).projector}function wLe(t,e,i){if(U(t)||U(e)||i.source.spatialReference===t&&i.dest.spatialReference===e)return i;const n=lm(t,i.source),r=lm(e,i.dest);return n===H.UNKNOWN&&r===H.UNKNOWN?ui(t,e)?i.projector=Qt:i.projector=null:i.projector=oh[n][r],i}function q9(){return{source:{spatialReference:null,spatialReferenceId:H.UNKNOWN,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:H.UNKNOWN,metersPerUnit:1},projector:Qt}}const BI={spatialReference:null,spatialReferenceId:H.UNKNOWN},xLe={spatialReference:null,spatialReferenceId:H.UNKNOWN},Cce=q9();q9();const Au=nMe(1),dw=tle(1),ai=Et(),tp=Et(),ip=Et(),yi=Et();var k4;let su=k4=class extends Y{constructor(t){super(t),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new k4({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],su.prototype,"cols",void 0),c([d({type:Bt,json:{write:!0}})],su.prototype,"level",void 0),c([d({type:String,json:{write:!0}})],su.prototype,"levelValue",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],su.prototype,"origin",void 0),c([d({type:Number,json:{write:!0}})],su.prototype,"resolution",void 0),c([d({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],su.prototype,"rows",void 0),c([d({type:Number,json:{write:!0}})],su.prototype,"scale",void 0),su=k4=c([O("esri.layers.support.LOD")],su);const lf=su;let SLe=class{constructor(e,i,n,r,s){this.id=e,this.level=i,this.row=n,this.col=r,this.extent=s}};var Ip;const yJ=new Fe({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let Wn=Ip=class extends Y{static create(t={}){const{resolutionFactor:e=1,scales:i,size:n=256,spatialReference:r=Ge.WebMercator,numLODs:s=24}=t;if(!vn(r)){const p=[];if(i)for(let f=0;f<i.length;f++){const g=i[f];p.push(new lf({level:f,scale:g,resolution:g}))}else{let f=5e-4;for(let g=s-1;g>=0;g--)p.unshift(new lf({level:g,scale:f,resolution:f})),f*=2}return new Ip({dpi:96,lods:p,origin:new Ve(0,0,r),size:[n,n],spatialReference:r})}const o=xa(r),a=t.origin?new Ve({x:t.origin.x,y:t.origin.y,spatialReference:r}):new Ve(o?{x:o.origin[0],y:o.origin[1],spatialReference:r}:{x:0,y:0,spatialReference:r}),l=96,u=1/(jh(r)*39.37*l),h=[];if(i)for(let p=0;p<i.length;p++){const f=i[p],g=f*u;h.push(new lf({level:p,scale:f,resolution:g}))}else{let p=PP(r)?512/n*5916575275917094e-7:256/n*591657527591555e-6;const f=Math.ceil(s/e);h.push(new lf({level:0,scale:p,resolution:p*u}));for(let g=1;g<f;g++){const v=p/2**e,b=v*u;h.push(new lf({level:g,scale:v,resolution:b})),p=v}}return new Ip({dpi:l,lods:h,origin:a,size:[n,n],spatialReference:r})}constructor(t){super(t),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}get isWrappable(){const{spatialReference:t,origin:e}=this;if(t&&e){const i=xa(t);return t.isWrappable&&!!i&&Math.abs(i.origin[0]-e.x)<=i.dx}return!1}readOrigin(t,e){return Ve.fromJSON({spatialReference:e.spatialReference,...t})}set lods(t){let e=0,i=0;const n=[],r=this._levelToLOD={};t&&(e=-1/0,i=1/0,t.forEach(s=>{n.push(s.scale),e=s.scale>e?s.scale:e,i=s.scale<i?s.scale:i,r[s.level]=s})),this._set("scales",n),this._set("minScale",e),this._set("maxScale",i),this._set("lods",t),this._initializeUpsampleLevels()}readSize(t,e){return[e.cols,e.rows]}writeSize(t,e){e.cols=t[0],e.rows=t[1]}zoomToScale(t){const e=this.scales;if(t<=0)return e[0];if(t>=e.length-1)return e[e.length-1];const i=Math.floor(t),n=i+1;return e[i]/(e[i]/e[n])**(t-i)}scaleToZoom(t){const e=this.scales,i=e.length-1;let n=0;for(;n<i;n++){const r=e[n],s=e[n+1];if(r<=t)return n;if(s===t)return n+1;if(r>t&&s<t)return n+Math.log(r/t)/Math.log(r/s)}return n}snapScale(t,e=.95){const i=this.scaleToZoom(t);return i%Math.floor(i)>=e?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(t,e,i,n){const r=this.lodAt(t);if(!r)return null;let s,o;if(typeof e=="number")s=e,o=i;else if(ui(e.spatialReference,this.spatialReference))s=e.x,o=e.y,n=i;else{const u=RP(e,this.spatialReference);if(U(u))return null;s=u.x,o=u.y,n=i}const a=r.resolution*this.size[0],l=r.resolution*this.size[1];return n||(n=new SLe(null,0,0,0,Mh())),n.level=t,n.row=Math.floor((this.origin.y-o)/l+.001),n.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(n),n}updateTileInfo(t,e=Ip.ExtrapolateOptions.NONE){let i=this.lodAt(t.level);if(!i&&e===Ip.ExtrapolateOptions.POWER_OF_TWO){const o=this.lods[this.lods.length-1];o.level<t.level&&(i=o)}if(!i)return;const n=t.level-i.level,r=i.resolution*this.size[0]/2**n,s=i.resolution*this.size[1]/2**n;t.id=`${t.level}/${t.row}/${t.col}`,t.extent||(t.extent=Mh()),t.extent[0]=this.origin.x+t.col*r,t.extent[1]=this.origin.y-(t.row+1)*s,t.extent[2]=t.extent[0]+r,t.extent[3]=t.extent[1]+s}upsampleTile(t){const e=this._upsampleLevels[t.level];return!(!e||e.parentLevel===-1)&&(t.level=e.parentLevel,t.row=Math.floor(t.row/e.factor+.001),t.col=Math.floor(t.col/e.factor+.001),this.updateTileInfo(t),!0)}getTileBounds(t,e){const i=this.lodAt(e.level);if(i==null)return null;const{resolution:n}=i,r=n*this.size[0],s=n*this.size[1];return t[0]=this.origin.x+e.col*r,t[1]=this.origin.y-(e.row+1)*s,t[2]=t[0]+r,t[3]=t[1]+s,t}lodAt(t){var e;return((e=this._levelToLOD)==null?void 0:e[t])??null}clone(){return Ip.fromJSON(this.write({}))}getOrCreateCompatible(t,e){if(this.size[0]===256&&this.size[1]===256)return t===256?this:null;const i=[],n=this.lods.length;for(let r=0;r<n;r++){const s=this.lods[r],o=s.resolution*e;i.push(new lf({level:s.level,scale:s.scale,resolution:o}))}return new Ip({size:[t,t],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:i})}_initializeUpsampleLevels(){const t=this.lods;this._upsampleLevels=[];let e=null;for(let i=0;i<t.length;i++){const n=t[i];this._upsampleLevels[n.level]={parentLevel:e?e.level:-1,factor:e?e.resolution/n.resolution:0},e=n}}};c([d({type:Number,json:{write:!0}})],Wn.prototype,"compressionQuality",void 0),c([d({type:Number,json:{write:!0}})],Wn.prototype,"dpi",void 0),c([d({type:String,json:{read:yJ.read,write:yJ.write,origins:{"web-scene":{read:!1,write:!1}}}})],Wn.prototype,"format",void 0),c([d({readOnly:!0})],Wn.prototype,"isWrappable",null),c([d({type:Ve,json:{write:!0}})],Wn.prototype,"origin",void 0),c([de("origin")],Wn.prototype,"readOrigin",null),c([d({type:[lf],value:null,json:{write:!0}})],Wn.prototype,"lods",null),c([d({readOnly:!0})],Wn.prototype,"minScale",void 0),c([d({readOnly:!0})],Wn.prototype,"maxScale",void 0),c([d({readOnly:!0})],Wn.prototype,"scales",void 0),c([d({cast:t=>Array.isArray(t)?t:typeof t=="number"?[t,t]:[256,256]})],Wn.prototype,"size",void 0),c([de("size",["rows","cols"])],Wn.prototype,"readSize",null),c([fe("size",{cols:{type:Bt},rows:{type:Bt}})],Wn.prototype,"writeSize",null),c([d({type:Ge,json:{write:!0}})],Wn.prototype,"spatialReference",void 0),Wn=Ip=c([O("esri.layers.support.TileInfo")],Wn),function(t){var e;(e=t.ExtrapolateOptions||(t.ExtrapolateOptions={}))[e.NONE=0]="NONE",e[e.POWER_OF_TWO=1]="POWER_OF_TWO"}(Wn||(Wn={}));const Ice=Wn,A$={widthBreakpoint:{getValue(t){const e=t.viewSize[0],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){const e=t.viewSize[1],i=t.breakpoints,n=this.values;return e<=i.xsmall?n.xsmall:e<=i.small?n.small:e<=i.medium?n.medium:e<=i.large?n.large:n.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){const e=t.viewSize,i=e[0],n=e[1],r=this.values;return n>=i?r.portrait:r.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},cD={xsmall:544,small:768,medium:992,large:1200};function ELe(t){const e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function uD(t,e){return e?A$[t].valueToClassName[e].split(" "):[]}const CLe=t=>{let e=class extends t{constructor(...i){super(...i),this._breakpointsHandles=new wn,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=cD}initialize(){this._breakpointsHandles.add(X(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),ut))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles=si(this._breakpointsHandles))}set breakpoints(i){if(i===this._get("breakpoints"))return;const n=ELe(i);if(!n){const r=JSON.stringify(cD,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r)}i=n?i:cD,this._set("breakpoints",{...i})}_updateClassNames(){if(!this.container)return;const i=Bs.acquire(),n=Bs.acquire();let r,s=!1;for(r in A$){const o=this[r],a=A$[r].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[r]=a,uD(r,o).forEach(l=>n.push(l)),uD(r,a).forEach(l=>i.push(l)))}s&&(this._applyClassNameChanges(i,n),Bs.release(i),Bs.release(n))}_applyClassNameChanges(i,n){const r=this.container;r&&(n.forEach(s=>r.classList.remove(s)),i.forEach(s=>r.classList.add(s)))}_removeActiveClassNames(){const i=this.container;if(!i)return;let n;for(n in A$)uD(n,this[n]).forEach(r=>i.classList.remove(r))}};return c([d()],e.prototype,"breakpoints",null),c([d()],e.prototype,"orientation",void 0),c([d()],e.prototype,"widthBreakpoint",void 0),c([d()],e.prototype,"heightBreakpoint",void 0),e=c([O("esri.views.BreakpointsOwner")],e),e};function eR(t){return typeof t=="string"?document.getElementById(t):t??null}function Tce(t){for(;t.hasChildNodes();)t.removeChild(t.firstChild)}function vJ(t,e){const i=e.parentNode;i&&i.insertBefore(t,e)}function bJ(t,e){for(;;){const i=t.firstChild;if(!i)break;e.appendChild(i)}}function ILe(t){t.parentNode&&t.parentNode.removeChild(t)}let O_=class extends _e{constructor(){super(...arguments),this.updating=!1,this._handleId=0,this._handles=new wn,this._scheduleHandleId=0,this._pendingPromises=new Set}destroy(){this.removeAll(),this._handles.destroy()}add(e,i,n={}){return this._installWatch(e,i,n,X)}addWhen(e,i,n={}){return this._installWatch(e,i,n,Ys)}addOnCollectionChange(e,i,{initial:n=!1,final:r=!1}={}){const s=++this._handleId;return this._handles.add([ji(e,"after-changes",this._createSyncUpdatingCallback(),Bu),ji(e,"change",i,{onListenerAdd:n?o=>i({added:o.toArray(),removed:[]}):void 0,onListenerRemove:r?o=>i({added:[],removed:o.toArray()}):void 0})],s),{remove:()=>this._handles.remove(s)}}addPromise(e){if(U(e))return e;const i=++this._handleId;this._handles.add({remove:()=>{this._pendingPromises.delete(e)&&(this._pendingPromises.size!==0||this._handles.has(mT)||this._set("updating",!1))}},i),this._pendingPromises.add(e),this._set("updating",!0);const n=()=>this._handles.remove(i);return e.then(n,n),e}removeAll(){this._pendingPromises.clear(),this._handles.removeAll(),this._set("updating",!1)}_installWatch(e,i,n={},r){const s=++this._handleId;n.sync||this._installSyncUpdatingWatch(e,s);const o=r(e,i,n);return this._handles.add(o,s),{remove:()=>this._handles.remove(s)}}_installSyncUpdatingWatch(e,i){const n=this._createSyncUpdatingCallback(),r=X(e,n,{sync:!0,equals:()=>!1});return this._handles.add(r,i),r}_createSyncUpdatingCallback(){return()=>{this._handles.remove(mT),++this._scheduleHandleId;const e=this._scheduleHandleId;this._get("updating")||this._set("updating",!0),this._handles.add(Hw(()=>{e===this._scheduleHandleId&&(this._set("updating",this._pendingPromises.size>0),this._handles.remove(mT))}),mT)}}};c([d({readOnly:!0})],O_.prototype,"updating",void 0),O_=c([O("esri.core.support.WatchUpdatingTracking")],O_);const mT=-42;/*!
 * @esri/arcgis-html-sanitizer - v3.0.1 - Tue Nov 15 2022 09:46:54 GMT-0800 (Pacific Standard Time)
 * Copyright (c) 2022 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2018 Zongmin Lei(雷宗民) <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 */var TLe=function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},my={exports:{}},tn={},FC={exports:{}},j0={};function kce(){var t={};return t["align-content"]=!1,t["align-items"]=!1,t["align-self"]=!1,t["alignment-adjust"]=!1,t["alignment-baseline"]=!1,t.all=!1,t["anchor-point"]=!1,t.animation=!1,t["animation-delay"]=!1,t["animation-direction"]=!1,t["animation-duration"]=!1,t["animation-fill-mode"]=!1,t["animation-iteration-count"]=!1,t["animation-name"]=!1,t["animation-play-state"]=!1,t["animation-timing-function"]=!1,t.azimuth=!1,t["backface-visibility"]=!1,t.background=!0,t["background-attachment"]=!0,t["background-clip"]=!0,t["background-color"]=!0,t["background-image"]=!0,t["background-origin"]=!0,t["background-position"]=!0,t["background-repeat"]=!0,t["background-size"]=!0,t["baseline-shift"]=!1,t.binding=!1,t.bleed=!1,t["bookmark-label"]=!1,t["bookmark-level"]=!1,t["bookmark-state"]=!1,t.border=!0,t["border-bottom"]=!0,t["border-bottom-color"]=!0,t["border-bottom-left-radius"]=!0,t["border-bottom-right-radius"]=!0,t["border-bottom-style"]=!0,t["border-bottom-width"]=!0,t["border-collapse"]=!0,t["border-color"]=!0,t["border-image"]=!0,t["border-image-outset"]=!0,t["border-image-repeat"]=!0,t["border-image-slice"]=!0,t["border-image-source"]=!0,t["border-image-width"]=!0,t["border-left"]=!0,t["border-left-color"]=!0,t["border-left-style"]=!0,t["border-left-width"]=!0,t["border-radius"]=!0,t["border-right"]=!0,t["border-right-color"]=!0,t["border-right-style"]=!0,t["border-right-width"]=!0,t["border-spacing"]=!0,t["border-style"]=!0,t["border-top"]=!0,t["border-top-color"]=!0,t["border-top-left-radius"]=!0,t["border-top-right-radius"]=!0,t["border-top-style"]=!0,t["border-top-width"]=!0,t["border-width"]=!0,t.bottom=!1,t["box-decoration-break"]=!0,t["box-shadow"]=!0,t["box-sizing"]=!0,t["box-snap"]=!0,t["box-suppress"]=!0,t["break-after"]=!0,t["break-before"]=!0,t["break-inside"]=!0,t["caption-side"]=!1,t.chains=!1,t.clear=!0,t.clip=!1,t["clip-path"]=!1,t["clip-rule"]=!1,t.color=!0,t["color-interpolation-filters"]=!0,t["column-count"]=!1,t["column-fill"]=!1,t["column-gap"]=!1,t["column-rule"]=!1,t["column-rule-color"]=!1,t["column-rule-style"]=!1,t["column-rule-width"]=!1,t["column-span"]=!1,t["column-width"]=!1,t.columns=!1,t.contain=!1,t.content=!1,t["counter-increment"]=!1,t["counter-reset"]=!1,t["counter-set"]=!1,t.crop=!1,t.cue=!1,t["cue-after"]=!1,t["cue-before"]=!1,t.cursor=!1,t.direction=!1,t.display=!0,t["display-inside"]=!0,t["display-list"]=!0,t["display-outside"]=!0,t["dominant-baseline"]=!1,t.elevation=!1,t["empty-cells"]=!1,t.filter=!1,t.flex=!1,t["flex-basis"]=!1,t["flex-direction"]=!1,t["flex-flow"]=!1,t["flex-grow"]=!1,t["flex-shrink"]=!1,t["flex-wrap"]=!1,t.float=!1,t["float-offset"]=!1,t["flood-color"]=!1,t["flood-opacity"]=!1,t["flow-from"]=!1,t["flow-into"]=!1,t.font=!0,t["font-family"]=!0,t["font-feature-settings"]=!0,t["font-kerning"]=!0,t["font-language-override"]=!0,t["font-size"]=!0,t["font-size-adjust"]=!0,t["font-stretch"]=!0,t["font-style"]=!0,t["font-synthesis"]=!0,t["font-variant"]=!0,t["font-variant-alternates"]=!0,t["font-variant-caps"]=!0,t["font-variant-east-asian"]=!0,t["font-variant-ligatures"]=!0,t["font-variant-numeric"]=!0,t["font-variant-position"]=!0,t["font-weight"]=!0,t.grid=!1,t["grid-area"]=!1,t["grid-auto-columns"]=!1,t["grid-auto-flow"]=!1,t["grid-auto-rows"]=!1,t["grid-column"]=!1,t["grid-column-end"]=!1,t["grid-column-start"]=!1,t["grid-row"]=!1,t["grid-row-end"]=!1,t["grid-row-start"]=!1,t["grid-template"]=!1,t["grid-template-areas"]=!1,t["grid-template-columns"]=!1,t["grid-template-rows"]=!1,t["hanging-punctuation"]=!1,t.height=!0,t.hyphens=!1,t.icon=!1,t["image-orientation"]=!1,t["image-resolution"]=!1,t["ime-mode"]=!1,t["initial-letters"]=!1,t["inline-box-align"]=!1,t["justify-content"]=!1,t["justify-items"]=!1,t["justify-self"]=!1,t.left=!1,t["letter-spacing"]=!0,t["lighting-color"]=!0,t["line-box-contain"]=!1,t["line-break"]=!1,t["line-grid"]=!1,t["line-height"]=!1,t["line-snap"]=!1,t["line-stacking"]=!1,t["line-stacking-ruby"]=!1,t["line-stacking-shift"]=!1,t["line-stacking-strategy"]=!1,t["list-style"]=!0,t["list-style-image"]=!0,t["list-style-position"]=!0,t["list-style-type"]=!0,t.margin=!0,t["margin-bottom"]=!0,t["margin-left"]=!0,t["margin-right"]=!0,t["margin-top"]=!0,t["marker-offset"]=!1,t["marker-side"]=!1,t.marks=!1,t.mask=!1,t["mask-box"]=!1,t["mask-box-outset"]=!1,t["mask-box-repeat"]=!1,t["mask-box-slice"]=!1,t["mask-box-source"]=!1,t["mask-box-width"]=!1,t["mask-clip"]=!1,t["mask-image"]=!1,t["mask-origin"]=!1,t["mask-position"]=!1,t["mask-repeat"]=!1,t["mask-size"]=!1,t["mask-source-type"]=!1,t["mask-type"]=!1,t["max-height"]=!0,t["max-lines"]=!1,t["max-width"]=!0,t["min-height"]=!0,t["min-width"]=!0,t["move-to"]=!1,t["nav-down"]=!1,t["nav-index"]=!1,t["nav-left"]=!1,t["nav-right"]=!1,t["nav-up"]=!1,t["object-fit"]=!1,t["object-position"]=!1,t.opacity=!1,t.order=!1,t.orphans=!1,t.outline=!1,t["outline-color"]=!1,t["outline-offset"]=!1,t["outline-style"]=!1,t["outline-width"]=!1,t.overflow=!1,t["overflow-wrap"]=!1,t["overflow-x"]=!1,t["overflow-y"]=!1,t.padding=!0,t["padding-bottom"]=!0,t["padding-left"]=!0,t["padding-right"]=!0,t["padding-top"]=!0,t.page=!1,t["page-break-after"]=!1,t["page-break-before"]=!1,t["page-break-inside"]=!1,t["page-policy"]=!1,t.pause=!1,t["pause-after"]=!1,t["pause-before"]=!1,t.perspective=!1,t["perspective-origin"]=!1,t.pitch=!1,t["pitch-range"]=!1,t["play-during"]=!1,t.position=!1,t["presentation-level"]=!1,t.quotes=!1,t["region-fragment"]=!1,t.resize=!1,t.rest=!1,t["rest-after"]=!1,t["rest-before"]=!1,t.richness=!1,t.right=!1,t.rotation=!1,t["rotation-point"]=!1,t["ruby-align"]=!1,t["ruby-merge"]=!1,t["ruby-position"]=!1,t["shape-image-threshold"]=!1,t["shape-outside"]=!1,t["shape-margin"]=!1,t.size=!1,t.speak=!1,t["speak-as"]=!1,t["speak-header"]=!1,t["speak-numeral"]=!1,t["speak-punctuation"]=!1,t["speech-rate"]=!1,t.stress=!1,t["string-set"]=!1,t["tab-size"]=!1,t["table-layout"]=!1,t["text-align"]=!0,t["text-align-last"]=!0,t["text-combine-upright"]=!0,t["text-decoration"]=!0,t["text-decoration-color"]=!0,t["text-decoration-line"]=!0,t["text-decoration-skip"]=!0,t["text-decoration-style"]=!0,t["text-emphasis"]=!0,t["text-emphasis-color"]=!0,t["text-emphasis-position"]=!0,t["text-emphasis-style"]=!0,t["text-height"]=!0,t["text-indent"]=!0,t["text-justify"]=!0,t["text-orientation"]=!0,t["text-overflow"]=!0,t["text-shadow"]=!0,t["text-space-collapse"]=!0,t["text-transform"]=!0,t["text-underline-position"]=!0,t["text-wrap"]=!0,t.top=!1,t.transform=!1,t["transform-origin"]=!1,t["transform-style"]=!1,t.transition=!1,t["transition-delay"]=!1,t["transition-duration"]=!1,t["transition-property"]=!1,t["transition-timing-function"]=!1,t["unicode-bidi"]=!1,t["vertical-align"]=!1,t.visibility=!1,t["voice-balance"]=!1,t["voice-duration"]=!1,t["voice-family"]=!1,t["voice-pitch"]=!1,t["voice-range"]=!1,t["voice-rate"]=!1,t["voice-stress"]=!1,t["voice-volume"]=!1,t.volume=!1,t["white-space"]=!1,t.widows=!1,t.width=!0,t["will-change"]=!1,t["word-break"]=!0,t["word-spacing"]=!0,t["word-wrap"]=!0,t["wrap-flow"]=!1,t["wrap-through"]=!1,t["writing-mode"]=!1,t["z-index"]=!1,t}function kLe(t,e,i){}function $Le(t,e,i){}var ALe=/javascript\s*\:/img;function MLe(t,e){return ALe.test(e)?"":e}j0.whiteList=kce();j0.getDefaultWhiteList=kce;j0.onAttr=kLe;j0.onIgnoreAttr=$Le;j0.safeAttrValue=MLe;var OLe={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,r;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(t){return String.prototype.trimRight?t.trimRight():t.replace(/(\s*$)/g,"")}},tx=OLe;function PLe(t,e){t=tx.trimRight(t),t[t.length-1]!==";"&&(t+=";");var i=t.length,n=!1,r=0,s=0,o="";function a(){if(!n){var h=tx.trim(t.slice(r,s)),p=h.indexOf(":");if(p!==-1){var f=tx.trim(h.slice(0,p)),g=tx.trim(h.slice(p+1));if(f){var v=e(r,o.length,f,g,h);v&&(o+=v+"; ")}}}r=s+1}for(;s<i;s++){var l=t[s];if(l==="/"&&t[s+1]==="*"){var u=t.indexOf("*/",s+2);if(u===-1)break;s=u+1,r=s+1,n=!1}else l==="("?n=!0:l===")"?n=!1:l===";"?n||a():l===`
`&&a()}return tx.trim(o)}var RLe=PLe,gT=j0,LLe=RLe;function _J(t){return t==null}function DLe(t){var e={};for(var i in t)e[i]=t[i];return e}function $ce(t){t=DLe(t||{}),t.whiteList=t.whiteList||gT.whiteList,t.onAttr=t.onAttr||gT.onAttr,t.onIgnoreAttr=t.onIgnoreAttr||gT.onIgnoreAttr,t.safeAttrValue=t.safeAttrValue||gT.safeAttrValue,this.options=t}$ce.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,n=i.whiteList,r=i.onAttr,s=i.onIgnoreAttr,o=i.safeAttrValue,a=LLe(t,function(l,u,h,p,f){var g=n[h],v=!1;if(g===!0?v=g:typeof g=="function"?v=g(p):g instanceof RegExp&&(v=g.test(p)),v!==!0&&(v=!1),p=o(h,p),!!p){var b={position:u,sourcePosition:l,source:f,isWhite:v};if(v){var _=r(h,p,b);return _J(_)?h+":"+p:_}else{var _=s(h,p,b);if(!_J(_))return _}}});return a};var FLe=$ce;(function(t,e){var i=j0,n=FLe;function r(o,a){var l=new n(a);return l.process(o)}e=t.exports=r,e.FilterCSS=n;for(var s in i)e[s]=i[s]})(FC,FC.exports);var W9={indexOf:function(t,e){var i,n;if(Array.prototype.indexOf)return t.indexOf(e);for(i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},forEach:function(t,e,i){var n,r;if(Array.prototype.forEach)return t.forEach(e,i);for(n=0,r=t.length;n<r;n++)e.call(i,t[n],n,t)},trim:function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(t){var e=/\s|\n|\t/,i=e.exec(t);return i?i.index:-1}},NLe=FC.exports.FilterCSS,zLe=FC.exports.getDefaultWhiteList,zM=W9;function Ace(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var Mce=new NLe;function jLe(t,e,i){}function VLe(t,e,i){}function ULe(t,e,i){}function BLe(t,e,i){}function Oce(t){return t.replace(GLe,"&lt;").replace(qLe,"&gt;")}function HLe(t,e,i,n){if(i=Nce(i),e==="href"||e==="src"){if(i=zM.trim(i),i==="#")return"#";if(!(i.substr(0,7)==="http://"||i.substr(0,8)==="https://"||i.substr(0,7)==="mailto:"||i.substr(0,4)==="tel:"||i.substr(0,11)==="data:image/"||i.substr(0,6)==="ftp://"||i.substr(0,2)==="./"||i.substr(0,3)==="../"||i[0]==="#"||i[0]==="/"))return""}else if(e==="background"){if(yT.lastIndex=0,yT.test(i))return""}else if(e==="style"){if(wJ.lastIndex=0,wJ.test(i)||(xJ.lastIndex=0,xJ.test(i)&&(yT.lastIndex=0,yT.test(i))))return"";n!==!1&&(n=n||Mce,i=n.process(i))}return i=zce(i),i}var GLe=/</g,qLe=/>/g,WLe=/"/g,JLe=/&quot;/g,YLe=/&#([a-zA-Z0-9]*);?/gim,ZLe=/&colon;?/gim,KLe=/&newline;?/gim,yT=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,wJ=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,xJ=/u\s*r\s*l\s*\(.*/gi;function Pce(t){return t.replace(WLe,"&quot;")}function Rce(t){return t.replace(JLe,'"')}function Lce(t){return t.replace(YLe,function(i,n){return n[0]==="x"||n[0]==="X"?String.fromCharCode(parseInt(n.substr(1),16)):String.fromCharCode(parseInt(n,10))})}function Dce(t){return t.replace(ZLe,":").replace(KLe," ")}function Fce(t){for(var e="",i=0,n=t.length;i<n;i++)e+=t.charCodeAt(i)<32?" ":t.charAt(i);return zM.trim(e)}function Nce(t){return t=Rce(t),t=Lce(t),t=Dce(t),t=Fce(t),t}function zce(t){return t=Pce(t),t=Oce(t),t}function XLe(){return""}function QLe(t,e){typeof e!="function"&&(e=function(){});var i=!Array.isArray(t);function n(o){return i?!0:zM.indexOf(t,o)!==-1}var r=[],s=!1;return{onIgnoreTag:function(o,a,l){if(n(o))if(l.isClosing){var u="[/removed]",h=l.position+u.length;return r.push([s!==!1?s:l.position,h]),s=!1,u}else return s||(s=l.position),"[removed]";else return e(o,a,l)},remove:function(o){var a="",l=0;return zM.forEach(r,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function e3e(t){for(var e="",i=0;i<t.length;){var n=t.indexOf("<!--",i);if(n===-1){e+=t.slice(i);break}e+=t.slice(i,n);var r=t.indexOf("-->",n);if(r===-1)break;i=r+3}return e}function t3e(t){var e=t.split("");return e=e.filter(function(i){var n=i.charCodeAt(0);return n===127?!1:n<=31?n===10||n===13:!0}),e.join("")}tn.whiteList=Ace();tn.getDefaultWhiteList=Ace;tn.onTag=jLe;tn.onIgnoreTag=VLe;tn.onTagAttr=ULe;tn.onIgnoreTagAttr=BLe;tn.safeAttrValue=HLe;tn.escapeHtml=Oce;tn.escapeQuote=Pce;tn.unescapeQuote=Rce;tn.escapeHtmlEntities=Lce;tn.escapeDangerHtml5Entities=Dce;tn.clearNonPrintableCharacter=Fce;tn.friendlyAttrValue=Nce;tn.escapeAttrValue=zce;tn.onIgnoreTagStripAll=XLe;tn.StripTagBody=QLe;tn.stripCommentTag=e3e;tn.stripBlankChar=t3e;tn.cssFilter=Mce;tn.getDefaultCSSWhiteList=zLe;var tR={},cf=W9;function i3e(t){var e=cf.spaceIndex(t),i;return e===-1?i=t.slice(1,-1):i=t.slice(1,e+1),i=cf.trim(i).toLowerCase(),i.slice(0,1)==="/"&&(i=i.slice(1)),i.slice(-1)==="/"&&(i=i.slice(0,-1)),i}function n3e(t){return t.slice(0,2)==="</"}function r3e(t,e,i){var n="",r=0,s=!1,o=!1,a=0,l=t.length,u="",h="";e:for(a=0;a<l;a++){var p=t.charAt(a);if(s===!1){if(p==="<"){s=a;continue}}else if(o===!1){if(p==="<"){n+=i(t.slice(r,a)),s=a,r=a;continue}if(p===">"){n+=i(t.slice(r,s)),h=t.slice(s,a+1),u=i3e(h),n+=e(s,n.length,u,h,n3e(h)),r=a+1,s=!1;continue}if(p==='"'||p==="'")for(var f=1,g=t.charAt(a-f);g.trim()===""||g==="=";){if(g==="="){o=p;continue e}g=t.charAt(a-++f)}}else if(p===o){o=!1;continue}}return r<t.length&&(n+=i(t.substr(r))),n}var s3e=/[^a-zA-Z0-9\\_:.-]/gim;function o3e(t,e){var i=0,n=0,r=[],s=!1,o=t.length;function a(f,g){if(f=cf.trim(f),f=f.replace(s3e,"").toLowerCase(),!(f.length<1)){var v=e(f,g||"");v&&r.push(v)}}for(var l=0;l<o;l++){var u=t.charAt(l),h,p;if(s===!1&&u==="="){s=t.slice(i,l),i=l+1,n=t.charAt(i)==='"'||t.charAt(i)==="'"?i:l3e(t,l+1);continue}if(s!==!1&&l===n){if(p=t.indexOf(u,l+1),p===-1)break;h=cf.trim(t.slice(n+1,p)),a(s,h),s=!1,l=p,i=l+1;continue}if(/\s|\n|\t/.test(u))if(t=t.replace(/\s|\n|\t/g," "),s===!1)if(p=a3e(t,l),p===-1){h=cf.trim(t.slice(i,l)),a(h),s=!1,i=l+1;continue}else{l=p-1;continue}else if(p=c3e(t,l-1),p===-1){h=cf.trim(t.slice(i,l)),h=SJ(h),a(s,h),s=!1,i=l+1;continue}else continue}return i<t.length&&(s===!1?a(t.slice(i)):a(s,SJ(cf.trim(t.slice(i))))),cf.trim(r.join(" "))}function a3e(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="="?e:-1}}function l3e(t,e){for(;e<t.length;e++){var i=t[e];if(i!==" ")return i==="'"||i==='"'?e:-1}}function c3e(t,e){for(;e>0;e--){var i=t[e];if(i!==" ")return i==="="?e:-1}}function u3e(t){return t[0]==='"'&&t[t.length-1]==='"'||t[0]==="'"&&t[t.length-1]==="'"}function SJ(t){return u3e(t)?t.substr(1,t.length-2):t}tR.parseTag=r3e;tR.parseAttr=o3e;var d3e=FC.exports.FilterCSS,dc=tn,jce=tR,h3e=jce.parseTag,p3e=jce.parseAttr,M$=W9;function vT(t){return t==null}function f3e(t){var e=M$.spaceIndex(t);if(e===-1)return{html:"",closing:t[t.length-2]==="/"};t=M$.trim(t.slice(e+1,-1));var i=t[t.length-1]==="/";return i&&(t=M$.trim(t.slice(0,-1))),{html:t,closing:i}}function m3e(t){var e={};for(var i in t)e[i]=t[i];return e}function g3e(t){var e={};for(var i in t)Array.isArray(t[i])?e[i.toLowerCase()]=t[i].map(function(n){return n.toLowerCase()}):e[i.toLowerCase()]=t[i];return e}function Vce(t){t=m3e(t||{}),t.stripIgnoreTag&&(t.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),t.onIgnoreTag=dc.onIgnoreTagStripAll),t.whiteList||t.allowList?t.whiteList=g3e(t.whiteList||t.allowList):t.whiteList=dc.whiteList,t.onTag=t.onTag||dc.onTag,t.onTagAttr=t.onTagAttr||dc.onTagAttr,t.onIgnoreTag=t.onIgnoreTag||dc.onIgnoreTag,t.onIgnoreTagAttr=t.onIgnoreTagAttr||dc.onIgnoreTagAttr,t.safeAttrValue=t.safeAttrValue||dc.safeAttrValue,t.escapeHtml=t.escapeHtml||dc.escapeHtml,this.options=t,t.css===!1?this.cssFilter=!1:(t.css=t.css||{},this.cssFilter=new d3e(t.css))}Vce.prototype.process=function(t){if(t=t||"",t=t.toString(),!t)return"";var e=this,i=e.options,n=i.whiteList,r=i.onTag,s=i.onIgnoreTag,o=i.onTagAttr,a=i.onIgnoreTagAttr,l=i.safeAttrValue,u=i.escapeHtml,h=e.cssFilter;i.stripBlankChar&&(t=dc.stripBlankChar(t)),i.allowCommentTag||(t=dc.stripCommentTag(t));var p=!1;i.stripIgnoreTagBody&&(p=dc.StripTagBody(i.stripIgnoreTagBody,s),s=p.onIgnoreTag);var f=h3e(t,function(g,v,b,_,w){var S={sourcePosition:g,position:v,isClosing:w,isWhite:Object.prototype.hasOwnProperty.call(n,b)},C=r(b,_,S);if(!vT(C))return C;if(S.isWhite){if(S.isClosing)return"</"+b+">";var $=f3e(_),M=n[b],P=p3e($.html,function(k,D){var z=M$.indexOf(M,k)!==-1,B=o(b,k,D,z);return vT(B)?z?(D=l(b,k,D,h),D?k+'="'+D+'"':k):(B=a(b,k,D,z),vT(B)?void 0:B):B});return _="<"+b,P&&(_+=" "+P),$.closing&&(_+=" /"),_+=">",_}else return C=s(b,_,S),vT(C)?u(_):C},u);return p&&(f=p.remove(f)),f};var y3e=Vce;(function(t,e){var i=tn,n=tR,r=y3e;function s(a,l){var u=new r(l);return u.process(a)}e=t.exports=s,e.filterXSS=s,e.FilterXSS=r,function(){for(var a in i)e[a]=i[a];for(var l in n)e[l]=n[l]}();function o(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}o()&&(self.filterXSS=t.exports)})(my,my.exports);var v3e=function(){function t(e,i){var n=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?n.sanitizeUrl(a):my.exports.safeAttrValue(s,o,a,l)}},this._entityMap={"&":"&#x38;","<":"&#x3C;",">":"&#x3E;",'"':"&#x22;","'":"&#x27;","/":"&#x2F;"};var r;e&&!i?r=e:e&&i?(r=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(s){s==="whiteList"?r.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]):r[s]=e[s]})):(r=Object.create(this.arcgisFilterOptions),r.whiteList=this.arcgisWhiteList),this.xssFilterOptions=r,this._xssFilter=new my.exports.FilterXSS(r)}return t.prototype.sanitize=function(e,i){switch(i===void 0&&(i={}),typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e,i);default:return i.allowUndefined&&typeof e>"u"?void 0:null}},t.prototype.sanitizeUrl=function(e,i){var n=(i??{}).isProtocolRequired,r=n===void 0?!0:n,s=this._trim(e.substring(0,e.indexOf(":"))),o=e==="/",a=/^#/.test(e),l=s&&this.allowedProtocols.indexOf(s.toLowerCase())>-1;return o||a||l?my.exports.escapeAttrValue(e):!s&&!r?my.exports.escapeAttrValue("https://".concat(e)):""},t.prototype.sanitizeHTMLAttribute=function(e,i,n,r){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(e,i,n,r):my.exports.safeAttrValue(e,i,n,r)},t.prototype.validate=function(e,i){i===void 0&&(i={});var n=this.sanitize(e,i);return{isValid:e===n,sanitized:n}},t.prototype.encodeHTML=function(e){var i=this;return String(e).replace(/[&<>"'\/]/g,function(n){return i._entityMap[n]})},t.prototype.encodeAttrValue=function(e){var i=/^[a-zA-Z0-9]$/;return String(e).replace(/[\x00-\xFF]/g,function(n,r){return i.test(n)?n:"&#x".concat(Number(e.charCodeAt(r)).toString(16),";")})},t.prototype._extendObjectOfArrays=function(e){var i={};return e.forEach(function(n){Object.keys(n).forEach(function(r){Array.isArray(n[r])&&Array.isArray(i[r])?i[r]=i[r].concat(n[r]):i[r]=n[r]})}),i},t.prototype._iterateOverObject=function(e,i){var n=this;i===void 0&&(i={});try{var r=!1,s=void 0;if(Array.isArray(e))s=e.reduce(function(a,l){var u=n.validate(l,i);return u.isValid?a.concat([l]):(r=!0,a.concat([u.sanitized]))},[]);else if(TLe(e)){var o=Object.keys(e);s=o.reduce(function(a,l){var u=e[l],h=n.validate(u,i);return h.isValid?a[l]=u:(r=!0,a[l]=h.sanitized),a},{})}else return i.allowUndefined&&typeof e>"u"?void 0:null;return r?s:e}catch{return null}},t.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},t}();const iR=new Map;function Uce(){iR.clear()}function b3e(t){return iR.get(t)}function _3e(t,e){iR.set(t,e)}function dD(t){iR.delete(t)}var E0,hw,w3e=function(t){if("WebkitTransition"in t.style)E0="webkitTransitionEnd",hw="webkitAnimationEnd";else{if(!("transition"in t.style))throw new Error("Your browser is not supported!");E0="transitionend",hw="animationend"}},Bce=function(t){E0||w3e(t)},x3e=function(t,e){return e===void 0&&(e=t+"-active"),function(i){Bce(i);var n=!1,r=function(s){n||(n=!0,i.removeEventListener(E0,r),i.removeEventListener(hw,r),i.classList.remove(t),i.classList.remove(e))};i.classList.add(t),i.addEventListener(E0,r),i.addEventListener(hw,r),requestAnimationFrame(function(){i.classList.add(e)})}},S3e=function(t,e){return e===void 0&&(e=t+"-active"),function(i,n){Bce(i);var r=!1,s=function(o){r||(r=!0,i.removeEventListener(E0,s),i.removeEventListener(hw,s),n())};i.classList.add(t),i.addEventListener(E0,s),i.addEventListener(hw,s),requestAnimationFrame(function(){i.classList.add(e)})}};const E3e=se.getLogger("esri.widgets.support.widgetUtils");function Hce(t){const e=Bs.acquire();for(let n=0;n<arguments.length;n++){const r=arguments[n],s=typeof r;if(s==="string")e.push(r);else if(Array.isArray(r))e.push.apply(e,r);else if(s==="object")for(const o in r)r[o]&&e.push(o)}const i=e.join(" ");return Bs.release(e),i}(()=>{const t=new Map,e=new ResizeObserver(i=>{var n;Uce();for(const r of i)(n=t.get(r.target))==null||n(r)});return(i,n,r)=>(t.has(i)&&E3e.error("Already observing element",i),t.set(i,n),e.observe(i,r),Nh(()=>{e.unobserve(i),t.delete(i)}))})();function $o(t){const e=t==null?void 0:t.closest("[dir]");return e!==null&&e instanceof HTMLElement&&e.dir==="rtl"||document.dir==="rtl"}function C3e(t){return $o(t)?"rtl":"ltr"}function EJ(t){const e="data-node-ref";this[t.getAttribute(e)]=null}function Ao(t){const e="data-node-ref";this[t.getAttribute(e)]=t}function I3e(t,e){return(t==="enter"?x3e:S3e)(e)}const T3e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],k3e=T3e.reduce((t,e)=>(t[e]=[],t),{}),$3e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],C0=new v3e({whiteList:k3e,onTagAttr:(t,e,i)=>{const n=`${e}="${i}"`;if($3e.includes(e))return n},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function A3e(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect(),r=i.top+i.height,s=n.top+n.height,o=i.top,a=n.top;(r>s||o<a)&&t.scrollIntoView({block:"end"})}function Vy(t){return t==="Enter"||t===" "}const Gce="http://www.w3.org/",nR=`${Gce}2000/svg`,qce=`${Gce}1999/xlink`;let CJ=[],J9=(t,e)=>{let i={};return Object.keys(t).forEach(n=>{i[n]=t[n]}),e&&Object.keys(e).forEach(n=>{i[n]=e[n]}),i},Y9=(t,e)=>t.vnodeSelector===e.vnodeSelector&&(t.properties&&e.properties?t.properties.key===e.properties.key&&t.properties.bind===e.properties.bind:!t.properties&&!e.properties),Wce=t=>{if(typeof t!="string")throw new Error("Style values must be strings")},M3e=(t,e,i)=>{if(e.vnodeSelector!==""){for(let n=i;n<t.length;n++)if(Y9(t[n],e))return n}return-1},hD=(t,e,i,n)=>{let r=t[e];if(r.vnodeSelector==="")return;let s=r.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<t.length;o++)if(o!==e){let a=t[o];if(Y9(a,r))throw new Error(`${i.vnodeSelector} had a ${r.vnodeSelector} child ${n==="added"?n:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},O3e=t=>{if(t.properties){let e=t.properties.enterAnimation;e&&e(t.domNode,t.properties)}},$4=[],A4=!1,Jce=t=>{(t.children||[]).forEach(Jce),t.properties&&t.properties.afterRemoved&&t.properties.afterRemoved.apply(t.properties.bind||t.properties,[t.domNode])},IJ=()=>{A4=!1,$4.forEach(Jce),$4.length=0},TJ=t=>{$4.push(t),A4||(A4=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(IJ,{timeout:16}):setTimeout(IJ,16))},kJ=t=>{let e=t.domNode;if(t.properties){let i=t.properties.exitAnimation;if(i)return e.style.pointerEvents="none",void i(e,()=>{e.parentNode&&(e.parentNode.removeChild(e),TJ(t))},t.properties)}e.parentNode&&(e.parentNode.removeChild(e),TJ(t))},P3e=(t,e,i)=>{if(!e)return;let n=i.eventHandlerInterceptor,r=Object.keys(e),s=r.length;for(let o=0;o<s;o++){let a=r[o],l=e[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")M4(t,l,!0);else if(a==="classes"){let u=Object.keys(l),h=u.length;for(let p=0;p<h;p++){let f=u[p];l[f]&&t.classList.add(f)}}else if(a==="styles"){let u=Object.keys(l),h=u.length;for(let p=0;p<h;p++){let f=u[p],g=l[f];g&&(Wce(g),i.styleApplyer(t,f,g))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(n&&(l=n(a,l,t,e)),a==="oninput"&&function(){let h=l;l=function(p){h.apply(this,[p]),p.target["oninput-value"]=p.target.value}}()),t[a]=l):i.namespace===nR?a==="href"?t.setAttributeNS(qce,a,l):t.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?t[a]=C0.sanitize(l):Yce(t)&&a in t?t[a]=l:t.setAttribute(a,l):t[a]=l}}};function Yce(t){if(!(t instanceof Element&&t.tagName.includes("-")))return!1;const e=window.customElements.get(t.tagName.toLowerCase());return!!e&&t instanceof e}let jM,R3e=(t,e,i)=>{if(e)for(let n of e)n_(n,t,void 0,i)},Zce=(t,e,i)=>{R3e(t,e.children,i),e.text&&(t.textContent=e.text),P3e(t,e.properties,i),e.properties&&e.properties.afterCreate&&e.properties.afterCreate.apply(e.properties.bind||e.properties,[t,i,e.vnodeSelector,e.properties,e.children])},n_=(t,e,i,n)=>{let r,s=0,o=t.vnodeSelector,a=e.ownerDocument;if(o==="")r=t.domNode=a.createTextNode(t.text),i!==void 0?e.insertBefore(r,i):e.appendChild(r);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let h=o.charAt(s-1),p=o.slice(s,l);h==="."?r.classList.add(p):h==="#"?r.id=p:(p==="svg"&&(n=J9(n,{namespace:nR})),n.namespace!==void 0?r=t.domNode=a.createElementNS(n.namespace,p):(r=t.domNode=t.domNode||a.createElement(p),p==="input"&&t.properties&&t.properties.type!==void 0&&r.setAttribute("type",t.properties.type)),i!==void 0?e.insertBefore(r,i):r.parentNode!==e&&e.appendChild(r)),s=l+1}}Zce(r,t,n)}},M4=(t,e,i)=>{e&&e.split(" ").forEach(n=>{n&&t.classList.toggle(n,i)})},L3e=(t,e,i,n)=>{if(!i)return;let r=!1,s=Object.keys(i),o=s.length;for(let a=0;a<o;a++){let l=s[a],u=i[l],h=e[l];if(l==="class")h!==u&&(M4(t,h,!1),M4(t,u,!0));else if(l==="classes"){let p=t.classList,f=Object.keys(u),g=f.length;for(let v=0;v<g;v++){let b=f[v],_=!!u[b];_!==!!h[b]&&(r=!0,_?p.add(b):p.remove(b))}}else if(l==="styles"){let p=Object.keys(u),f=p.length;for(let g=0;g<f;g++){let v=p[g],b=u[v];b!==h[v]&&(r=!0,b?(Wce(b),n.styleApplyer(t,v,b)):n.styleApplyer(t,v,""))}}else if(u||typeof h!="string"||(u=""),l==="value"){let p=t[l];p!==u&&(t["oninput-value"]?p===t["oninput-value"]:u!==h)&&(t[l]=u,t["oninput-value"]=void 0),u!==h&&(r=!0)}else if(u!==h){let p=typeof u;p==="function"&&n.eventHandlerInterceptor||(n.namespace===nR?l==="href"?t.setAttributeNS(qce,l,u):t.setAttribute(l,u):p==="string"?l==="innerHTML"?t[l]=C0.sanitize(u):l==="role"&&u===""?t.removeAttribute(l):Yce(t)&&l in t?t[l]=u:t.setAttribute(l,u):t[l]!==u&&(t[l]=u),r=!0)}}return r},D3e=(t,e,i,n,r)=>{if(i===n)return!1;n=n||CJ;let s,o=(i=i||CJ).length,a=n.length,l=0,u=0,h=!1;for(;u<a;){let p=l<o?i[l]:void 0,f=n[u];if(p!==void 0&&Y9(p,f))h=jM(p,f,r)||h,l++;else{let g=M3e(i,f,l+1);if(g>=0){for(s=l;s<g;s++)kJ(i[s]),hD(i,s,t,"removed");h=jM(i[g],f,r)||h,l=g+1}else n_(f,e,l<o?i[l].domNode:void 0,r),O3e(f),hD(n,u,t,"added")}u++}if(o>l)for(s=l;s<o;s++)kJ(i[s]),hD(i,s,t,"removed");return h};jM=(t,e,i)=>{let n=t.domNode,r=!1;if(t===e)return!1;let s=!1;if(e.vnodeSelector===""){if(e.text!==t.text){let o=n.ownerDocument.createTextNode(e.text);return n.parentNode.replaceChild(o,n),e.domNode=o,r=!0,r}e.domNode=n}else e.vnodeSelector.lastIndexOf("svg",0)===0&&(i=J9(i,{namespace:nR})),t.text!==e.text&&(s=!0,e.text===void 0?n.removeChild(n.firstChild):n.textContent=e.text),e.domNode=n,s=D3e(e,n,t.children,e.children,i)||s,s=L3e(n,t.properties,e.properties,i)||s,e.properties&&e.properties.afterUpdate&&e.properties.afterUpdate.apply(e.properties.bind||e.properties,[n,i,e.vnodeSelector,e.properties,e.children]);return s&&e.properties&&e.properties.updateAnimation&&e.properties.updateAnimation(n,e.properties,t.properties),r};let ix=(t,e)=>({getLastRender:()=>t,update:i=>{if(t.vnodeSelector!==i.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let n=t;t=i,jM(n,i,e)},domNode:t.domNode});const F3e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{e.charAt(0)==="-"?t.style.setProperty(e,i):t.style[e]=i}};let Uv=t=>J9(F3e,t),Of={create:(t,e)=>(e=Uv(e),n_(t,document.createElement("div"),void 0,e),ix(t,e)),append:(t,e,i)=>(i=Uv(i),n_(e,t,void 0,i),ix(e,i)),insertBefore:(t,e,i)=>(i=Uv(i),n_(e,t.parentNode,t,i),ix(e,i)),merge:(t,e,i)=>(i=Uv(i),e.domNode=t,Zce(t,e,i),ix(e,i)),replace:(t,e,i)=>(i=Uv(i),n_(e,t.parentNode,t,i),t.parentNode.removeChild(t),ix(e,i))},Kce,N3e=(t,e)=>{let i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i};Kce=Array.prototype.find?(t,e)=>t.find(e):(t,e)=>t.filter(e)[0];let z3e=(t,e)=>{let i=t;return e.forEach(n=>{i=i&&i.children?Kce(i.children,r=>r.domNode===n):void 0}),i},j3e=(t,e,i)=>{let n=function(r){i("domEvent",r);let s=e(),o=N3e(r.currentTarget,s.domNode);o.reverse();let a,l=z3e(s.getLastRender(),o);return t.scheduleRender(),l&&(a=l.properties[`on${r.type}`].apply(l.properties.bind||this,arguments)),i("domEventProcessed",r),a};return(r,s,o,a)=>n},O4=t=>{let e,i,n=Uv(t),r=n.performanceLogger,s=!0,o=!1,a=[],l=[],u=(p,f,g)=>{let v,b=()=>v;n.eventHandlerInterceptor=j3e(e,b,r),v=p(f,g(),n),a.push(v),l.push(g)},h=()=>{if(i=void 0,s){s=!1,r("renderStart",void 0);for(let p=0;p<a.length;p++){let f=l[p]();r("rendered",void 0),a[p].update(f),r("patched",void 0)}r("renderDone",void 0),s=!0}};return e={renderNow:h,scheduleRender:()=>{i||o||(i=requestAnimationFrame(h))},stop:()=>{i&&(cancelAnimationFrame(i),i=void 0),o=!0},resume:()=>{o=!1,s=!0,e.scheduleRender()},append:(p,f)=>{u(Of.append,p,f)},insertBefore:(p,f)=>{u(Of.insertBefore,p,f)},merge:(p,f)=>{u(Of.merge,p,f)},replace:(p,f)=>{u(Of.replace,p,f)},detach:p=>{for(let f=0;f<l.length;f++)if(l[f]===p)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},e},Tp=class extends _e{constructor(){super(...arguments),this.items=new we,this._watchUpdatingTracking=new O_,this._callbacks=new Map,this._projector=O4(),this._hiddenProjector=O4()}get needsRender(){return this.items.length>0}get updating(){var e;return((e=this._watchUpdatingTracking)==null?void 0:e.updating)??!1}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,i=>{for(const n of i.added){const r=()=>n.render();this._callbacks.set(n,r),this._projector.append(this.surface,r)}for(const n of i.removed){const r=this._projector.detach(this._callbacks.get(n));this.surface.removeChild(r.domNode),this._callbacks.delete(n)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const i=this._hiddenSurface,n=this._hiddenProjector;let r;const s=()=>(r=e.render(),r);n.append(i,s),n.renderNow();const o={left:0,top:0,right:0,bottom:0};if(r&&r.domNode){const a=r.domNode.getBoundingClientRect();o.left=a.left,o.top=a.top,o.right=a.right,o.bottom=a.bottom}for(n.detach(s);i.firstChild;)i.removeChild(i.firstChild);return o}overlaps(e,i){const n=this.computeBoundingRect(e),r=this.computeBoundingRect(i);return Math.max(n.left,r.left)<=Math.min(n.right,r.right)&&Math.max(n.top,r.top)<=Math.min(n.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(e){if(!this.items.some(n=>n.visible))return;const i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(n=>{i.save(),n.renderCanvas(i),i.restore()}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c([d({readOnly:!0})],Tp.prototype,"surface",void 0),c([d({readOnly:!0})],Tp.prototype,"items",void 0),c([d({readOnly:!0})],Tp.prototype,"needsRender",null),c([d({readOnly:!0})],Tp.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],Tp.prototype,"updating",null),Tp=c([O("esri.views.overlay.ViewOverlay")],Tp);const $J=Tp;function P_(t,e,i,n){let r=null,s=1e3;typeof e=="number"?(s=e,n=i):(r=e??null,s=i);let o,a=0;const l=()=>{a=0,t.apply(n,o)},u=(...h)=>{r&&r.apply(n,h),o=h,s?a||(a=setTimeout(l,s)):l()};return u.remove=()=>{a&&(clearTimeout(a),a=0)},u.forceUpdate=()=>{a&&(clearTimeout(a),l())},u.hasPendingUpdates=()=>!!a,u}const V3e="randomUUID"in crypto;function U3e(){if(V3e)return crypto.randomUUID();const t=crypto.getRandomValues(new Uint16Array(8));t[3]=4095&t[3]|16384,t[4]=16383&t[4]|32768;const e=i=>t[i].toString(16).padStart(4,"0");return e(0)+e(1)+"-"+e(2)+"-"+e(3)+"-"+e(4)+"-"+e(5)+e(6)+e(7)}const B3e={handleInterceptedEvent:(t,e,i,n)=>(t.scheduleRender(),e.properties[`on${n.type}`].apply(e.properties.bind||i,[n]))},H3e={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(t,e,i)=>{t.style[e]=i}},G3e=t=>({...H3e,...t}),q3e=(t,e)=>{const i=[];for(;t&&t!==e;)i.push(t),t=t.parentNode;return i},W3e=(t,e)=>t.find(e),AJ=(t,e,i=!1)=>{let n=t;return e.forEach((r,s)=>{const o=n!=null&&n.children?W3e(n.children,a=>a.domNode===r):void 0;i&&!o&&s!==e.length-1||(n=o)}),n},J3e=t=>{let e;const i={...B3e,...t},n=G3e(i),r=n.performanceLogger;let s,o=!0,a=!1;const l=[],u=[],h=(f,g,v)=>{var w;let b;n.eventHandlerInterceptor=(S,C,$,M)=>function(P){let k;r("domEvent",P);const D=q3e(P.currentTarget,b.domNode),z=D.some(j=>{var K;return customElements.get((K=j==null?void 0:j.tagName)==null?void 0:K.toLowerCase())});if(P.eventPhase===Event.CAPTURING_PHASE||!z)D.reverse(),k=AJ(b.getLastRender(),D);else{const j=P.composedPath(),K=j.slice(j.indexOf(P.currentTarget),j.indexOf(b.domNode)).filter(ie=>ie.getRootNode()===ie.ownerDocument).reverse();k=AJ(b.getLastRender(),K,!0)}let B;return k&&(B=i.handleInterceptedEvent(e,k,this,P)),r("domEventProcessed",P),B},(w=i.postProcessProjectionOptions)==null||w.call(i,n);const _=v();b=f(g,_,n),l.push(b),u.push(v),i.afterFirstVNodeRendered&&i.afterFirstVNodeRendered(b,_)};let p=()=>{if(s=void 0,o){o=!1,r("renderStart",void 0);for(let f=0;f<l.length;f++){const g=u[f]();r("rendered",void 0),l[f].update(g),r("patched",void 0)}r("renderDone",void 0),o=!0}};return i.modifyDoRenderImplementation&&(p=i.modifyDoRenderImplementation(p,l,u)),e={renderNow:p,scheduleRender:()=>{s||a||(s=requestAnimationFrame(p))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,e.scheduleRender()},append:(f,g)=>{h(Of.append,f,g)},insertBefore:(f,g)=>{h(Of.insertBefore,f,g)},merge:(f,g)=>{h(Of.merge,f,g)},replace:(f,g)=>{h(Of.replace,f,g)},detach:f=>{for(let g=0;g<u.length;g++)if(u[g]===f)return u.splice(g,1),l.splice(g,1)[0];throw new Error("renderFunction was not found")}},e},Bv={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Hv,Xce,rR,Qce=!1,VM=!1,Z9=!1,pa=!1,MJ=null,P4=!1;const K9=t=>{const e=new URL(t,Zr.$resourcesUrl$);return e.origin!==qI.location.origin?e.href:e.pathname},eue=t=>Zr.$resourcesUrl$=t,I0=(t,e="")=>()=>{},OJ="http://www.w3.org/1999/xlink",PJ={},Y3e="http://www.w3.org/2000/svg",Z3e="http://www.w3.org/1999/xhtml",K3e=t=>t!=null,X9=t=>(t=typeof t,t==="object"||t==="function"),I=(t,e,...i)=>{let n=null,r=null,s=null,o=!1,a=!1;const l=[],u=p=>{for(let f=0;f<p.length;f++)n=p[f],Array.isArray(n)?u(n):n!=null&&typeof n!="boolean"&&((o=typeof t!="function"&&!X9(n))&&(n=String(n)),o&&a?l[l.length-1].$text$+=n:l.push(o?UM(null,n):n),a=o)};if(u(i),e){e.key&&(r=e.key),e.name&&(s=e.name);{const p=e.className||e.class;p&&(e.class=typeof p!="object"?p:Object.keys(p).filter(f=>p[f]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,l,Q3e);const h=UM(t,null);return h.$attrs$=e,l.length>0&&(h.$children$=l),h.$key$=r,h.$name$=s,h},UM=(t,e)=>{const i={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return i.$attrs$=null,i.$key$=null,i.$name$=null,i},Ft={},X3e=t=>t&&t.$tag$===Ft,Q3e={forEach:(t,e)=>t.map(RJ).forEach(e),map:(t,e)=>t.map(RJ).map(e).map(eDe)},RJ=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),eDe=t=>{if(typeof t.vtag=="function"){const i=Object.assign({},t.vattrs);return t.vkey&&(i.key=t.vkey),t.vname&&(i.name=t.vname),I(t.vtag,i,...t.vchildren||[])}const e=UM(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},tDe=t=>kDe.map(e=>e(t)).find(e=>!!e),iDe=(t,e)=>t!=null&&!X9(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,nDe=t=>t,ue=(t,e,i)=>{const n=nDe(t);return{emit:r=>rDe(n,e,{bubbles:!!(i&4),composed:!!(i&2),cancelable:!!(i&1),detail:r})}},rDe=(t,e,i)=>{const n=Zr.ce(e,i);return t.dispatchEvent(n),n},LJ=new WeakMap,sDe=(t,e,i)=>{let n=HM.get(t);MDe&&i?(n=n||new CSSStyleSheet,typeof n=="string"?n=e:n.replaceSync(e)):n=e,HM.set(t,n)},oDe=(t,e,i,n)=>{let r=tue(e,i);const s=HM.get(r);if(t=t.nodeType===11?t:Pu,s)if(typeof s=="string"){t=t.head||t;let o=LJ.get(t),a;o||LJ.set(t,o=new Set),o.has(r)||(a=Pu.createElement("style"),a.innerHTML=s,t.insertBefore(a,t.querySelector("link")),o&&o.add(r))}else t.adoptedStyleSheets.includes(s)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,s]);return r},aDe=t=>{const e=t.$cmpMeta$,i=t.$hostElement$,n=e.$flags$,r=I0("attachStyles",e.$tagName$),s=oDe(i.shadowRoot?i.shadowRoot:i.getRootNode(),e,t.$modeName$);n&10&&(i["s-sc"]=s,i.classList.add(s+"-h"),n&2&&i.classList.add(s+"-s")),r()},tue=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),DJ=(t,e,i,n,r,s)=>{if(i!==n){let o=jJ(t,e),a=e.toLowerCase();if(e==="class"){const l=t.classList,u=FJ(i),h=FJ(n);l.remove(...u.filter(p=>p&&!h.includes(p))),l.add(...h.filter(p=>p&&!u.includes(p)))}else if(e==="style"){for(const l in i)(!n||n[l]==null)&&(l.includes("-")?t.style.removeProperty(l):t.style[l]="");for(const l in n)(!i||n[l]!==i[l])&&(l.includes("-")?t.style.setProperty(l,n[l]):t.style[l]=n[l])}else if(e!=="key")if(e==="ref")n&&n(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n")e[2]==="-"?e=e.slice(3):jJ(qI,a)?e=a.slice(2):e=a[2]+e.slice(3),i&&Zr.rel(t,e,i,!1),n&&Zr.ael(t,e,n,!1);else{const l=X9(n);if((o||l&&n!==null)&&!r)try{if(t.tagName.includes("-"))t[e]=n;else{const h=n??"";e==="list"?o=!1:(i==null||t[e]!=h)&&(t[e]=h)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,u=!0),n==null||n===!1?(n!==!1||t.getAttribute(e)==="")&&(u?t.removeAttributeNS(OJ,e):t.removeAttribute(e)):(!o||s&4||r)&&!l&&(n=n===!0?"":n,u?t.setAttributeNS(OJ,e,n):t.setAttribute(e,n))}}},lDe=/\s/,FJ=t=>t?t.split(lDe):[],iue=(t,e,i,n)=>{const r=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||PJ,o=e.$attrs$||PJ;for(n in s)n in o||DJ(r,n,s[n],void 0,i,e.$flags$);for(n in o)DJ(r,n,s[n],o[n],i,e.$flags$)},BM=(t,e,i,n)=>{const r=e.$children$[i];let s=0,o,a,l;if(Qce||(Z9=!0,r.$tag$==="slot"&&(Hv&&n.classList.add(Hv+"-s"),r.$flags$|=r.$children$?2:1)),r.$text$!==null)o=r.$elm$=Pu.createTextNode(r.$text$);else if(r.$flags$&1)o=r.$elm$=Pu.createTextNode("");else{if(pa||(pa=r.$tag$==="svg"),o=r.$elm$=Pu.createElementNS(pa?Y3e:Z3e,r.$flags$&2?"slot-fb":r.$tag$),pa&&r.$tag$==="foreignObject"&&(pa=!1),iue(null,r,pa),K3e(Hv)&&o["s-si"]!==Hv&&o.classList.add(o["s-si"]=Hv),r.$children$)for(s=0;s<r.$children$.length;++s)a=BM(t,r,s,o),a&&o.appendChild(a);r.$tag$==="svg"?pa=!1:o.tagName==="foreignObject"&&(pa=!0)}return o["s-hn"]=rR,r.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=Xce,o["s-sn"]=r.$name$||"",l=t&&t.$children$&&t.$children$[i],l&&l.$tag$===r.$tag$&&t.$elm$&&NC(t.$elm$,!1)),o},NC=(t,e)=>{Zr.$flags$|=1;const i=t.childNodes;for(let n=i.length-1;n>=0;n--){const r=i[n];r["s-hn"]!==rR&&r["s-ol"]&&(sue(r).insertBefore(r,Q9(r)),r["s-ol"].remove(),r["s-ol"]=void 0,Z9=!0),e&&NC(r,e)}Zr.$flags$&=-2},nue=(t,e,i,n,r,s)=>{let o=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(o.shadowRoot&&o.tagName===rR&&(o=o.shadowRoot);r<=s;++r)n[r]&&(a=BM(null,i,r,t),a&&(n[r].$elm$=a,o.insertBefore(a,Q9(e))))},rue=(t,e,i,n,r)=>{for(;e<=i;++e)(n=t[e])&&(r=n.$elm$,lue(n),VM=!0,r["s-ol"]?r["s-ol"].remove():NC(r,!0),r.remove())},cDe=(t,e,i,n)=>{let r=0,s=0,o=0,a=0,l=e.length-1,u=e[0],h=e[l],p=n.length-1,f=n[0],g=n[p],v,b;for(;r<=l&&s<=p;)if(u==null)u=e[++r];else if(h==null)h=e[--l];else if(f==null)f=n[++s];else if(g==null)g=n[--p];else if(bT(u,f))Gv(u,f),u=e[++r],f=n[++s];else if(bT(h,g))Gv(h,g),h=e[--l],g=n[--p];else if(bT(u,g))(u.$tag$==="slot"||g.$tag$==="slot")&&NC(u.$elm$.parentNode,!1),Gv(u,g),t.insertBefore(u.$elm$,h.$elm$.nextSibling),u=e[++r],g=n[--p];else if(bT(h,f))(u.$tag$==="slot"||g.$tag$==="slot")&&NC(h.$elm$.parentNode,!1),Gv(h,f),t.insertBefore(h.$elm$,u.$elm$),h=e[--l],f=n[++s];else{for(o=-1,a=r;a<=l;++a)if(e[a]&&e[a].$key$!==null&&e[a].$key$===f.$key$){o=a;break}o>=0?(b=e[o],b.$tag$!==f.$tag$?v=BM(e&&e[s],i,o,t):(Gv(b,f),e[o]=void 0,v=b.$elm$),f=n[++s]):(v=BM(e&&e[s],i,s,t),f=n[++s]),v&&sue(u.$elm$).insertBefore(v,Q9(u.$elm$))}r>l?nue(t,n[p+1]==null?null:n[p+1].$elm$,i,n,s,p):s>p&&rue(e,r,l)},bT=(t,e)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:t.$key$===e.$key$:!1,Q9=t=>t&&t["s-ol"]||t,sue=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,Gv=(t,e)=>{const i=e.$elm$=t.$elm$,n=t.$children$,r=e.$children$,s=e.$tag$,o=e.$text$;let a;o===null?(pa=s==="svg"?!0:s==="foreignObject"?!1:pa,s==="slot"||iue(t,e,pa),n!==null&&r!==null?cDe(i,n,e,r):r!==null?(t.$text$!==null&&(i.textContent=""),nue(i,null,e,r,0,r.length-1)):n!==null&&rue(n,0,n.length-1),pa&&s==="svg"&&(pa=!1)):(a=i["s-cr"])?a.parentNode.textContent=o:t.$text$!==o&&(i.data=o)},oue=t=>{const e=t.childNodes;let i,n,r,s,o,a;for(n=0,r=e.length;n<r;n++)if(i=e[n],i.nodeType===1){if(i["s-sr"]){for(o=i["s-sn"],i.hidden=!1,s=0;s<r;s++)if(a=e[s].nodeType,e[s]["s-hn"]!==i["s-hn"]||o!==""){if(a===1&&o===e[s].getAttribute("slot")){i.hidden=!0;break}}else if(a===1||a===3&&e[s].textContent.trim()!==""){i.hidden=!0;break}}oue(i)}},vc=[],aue=t=>{let e,i,n,r,s,o,a=0;const l=t.childNodes,u=l.length;for(;a<u;a++){if(e=l[a],e["s-sr"]&&(i=e["s-cr"])&&i.parentNode)for(n=i.parentNode.childNodes,r=e["s-sn"],o=n.length-1;o>=0;o--)i=n[o],!i["s-cn"]&&!i["s-nr"]&&i["s-hn"]!==e["s-hn"]&&(NJ(i,r)?(s=vc.find(h=>h.$nodeToRelocate$===i),VM=!0,i["s-sn"]=i["s-sn"]||r,s?s.$slotRefNode$=e:vc.push({$slotRefNode$:e,$nodeToRelocate$:i}),i["s-sr"]&&vc.map(h=>{NJ(h.$nodeToRelocate$,i["s-sn"])&&(s=vc.find(p=>p.$nodeToRelocate$===i),s&&!h.$slotRefNode$&&(h.$slotRefNode$=s.$slotRefNode$))})):vc.some(h=>h.$nodeToRelocate$===i)||vc.push({$nodeToRelocate$:i}));e.nodeType===1&&aue(e)}},NJ=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",lue=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(lue)},uDe=(t,e)=>{const i=t.$hostElement$,n=t.$cmpMeta$,r=t.$vnode$||UM(null,null),s=X3e(e)?e:I(null,null,e);rR=i.tagName,n.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},n.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=i[o])),s.$tag$=null,s.$flags$|=4,t.$vnode$=s,s.$elm$=r.$elm$=i.shadowRoot||i,Hv=i["s-sc"],Xce=i["s-cr"],Qce=(n.$flags$&1)!==0,VM=!1,Gv(r,s);{if(Zr.$flags$|=1,Z9){aue(s.$elm$);let o,a,l,u,h,p,f=0;for(;f<vc.length;f++)o=vc[f],a=o.$nodeToRelocate$,a["s-ol"]||(l=Pu.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(f=0;f<vc.length;f++)if(o=vc[f],a=o.$nodeToRelocate$,o.$slotRefNode$){for(u=o.$slotRefNode$.parentNode,h=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(p=l["s-nr"],p&&p["s-sn"]===a["s-sn"]&&u===p.parentNode&&(p=p.nextSibling,!p||!p["s-nr"])){h=p;break}(!h&&u!==a.parentNode||a.nextSibling!==h)&&a!==h&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),u.insertBefore(a,h))}else a.nodeType===1&&(a.hidden=!0)}VM&&oue(s.$elm$),Zr.$flags$&=-2,vc.length=0}},dDe=(t,e)=>{},eB=(t,e)=>(t.$flags$|=16,dDe(t,t.$ancestorComponent$),RDe(()=>hDe(t,e))),hDe=(t,e)=>{const i=t.$hostElement$,n=I0("scheduleUpdate",t.$cmpMeta$.$tagName$),r=i;let s;return e?s=R_(r,"componentWillLoad"):s=R_(r,"componentWillUpdate"),s=zJ(s,()=>R_(r,"componentWillRender")),n(),zJ(s,()=>pDe(t,r,e))},pDe=async(t,e,i)=>{const n=t.$hostElement$,r=I0("update",t.$cmpMeta$.$tagName$);n["s-rc"],i&&aDe(t);const s=I0("render",t.$cmpMeta$.$tagName$);fDe(t,e,n),s(),r(),mDe(t)},fDe=(t,e,i)=>{try{MJ=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(Bv.hasRenderFn||Bv.reflect)&&(Bv.vdomRender||Bv.reflect)&&(Bv.hydrateServerSide||uDe(t,e))}catch(a){GI(a,t.$hostElement$)}return MJ=null,null},mDe=t=>{const e=t.$cmpMeta$.$tagName$,i=t.$hostElement$,n=I0("postUpdate",e),r=i;t.$ancestorComponent$,R_(r,"componentDidRender"),t.$flags$&64?(R_(r,"componentDidUpdate"),n()):(t.$flags$|=64,R_(r,"componentDidLoad"),n())},t1=t=>{{const e=HI(t),i=e.$hostElement$.isConnected;return i&&(e.$flags$&18)===2&&eB(e,!1),i}},R_=(t,e,i)=>{if(t&&t[e])try{return t[e](i)}catch(n){GI(n)}},zJ=(t,e)=>t&&t.then?t.then(e):e(),gDe=(t,e)=>HI(t).$instanceValues$.get(e),yDe=(t,e,i,n)=>{const r=HI(t),s=t,o=r.$instanceValues$.get(e),a=r.$flags$,l=s;i=iDe(i,n.$members$[e][0]);const u=Number.isNaN(o)&&Number.isNaN(i);if(i!==o&&!u){r.$instanceValues$.set(e,i);{if(n.$watchers$&&a&128){const p=n.$watchers$[e];p&&p.map(f=>{try{l[f](i,o,e)}catch(g){GI(g,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(i,o,e)===!1)return;eB(r,!1)}}}},vDe=(t,e,i)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const n=Object.entries(e.$members$),r=t.prototype;n.map(([s,[o]])=>{(o&31||o&32)&&Object.defineProperty(r,s,{get(){return gDe(this,s)},set(a){yDe(this,s,a,e)},configurable:!0,enumerable:!0})});{const s=new Map;r.attributeChangedCallback=function(o,a,l){Zr.jmp(()=>{const u=s.get(o);if(this.hasOwnProperty(u))l=this[u],delete this[u];else if(r.hasOwnProperty(u)&&typeof this[u]=="number"&&this[u]==l)return;this[u]=l===null&&typeof this[u]=="boolean"?!1:l})},t.observedAttributes=n.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return s.set(l,o),a[0]&512&&e.$attrsToReflect$.push([o,l]),l})}}return t},bDe=async(t,e,i,n,r)=>{if(!(e.$flags$&32)&&(r=t.constructor,e.$flags$|=32,customElements.whenDefined(i.$tagName$).then(()=>e.$flags$|=128),r.style)){let o=r.style;typeof o!="string"&&(o=o[e.$modeName$=tDe(t)]);const a=tue(i,e.$modeName$);if(!HM.has(a)){const l=I0("registerStyles",i.$tagName$);sDe(a,o,!!(i.$flags$&1)),l()}}e.$ancestorComponent$,(()=>eB(e,!0))()},_De=t=>{},wDe=t=>{if(!(Zr.$flags$&1)){const e=HI(t),i=e.$cmpMeta$,n=I0("connectedCallback",i.$tagName$);e.$flags$&1?(cue(t,e,i.$listeners$),_De(e.$lazyInstance$)):(e.$flags$|=1,i.$flags$&12&&xDe(t),i.$members$&&Object.entries(i.$members$).map(([r,[s]])=>{if(s&31&&t.hasOwnProperty(r)){const o=t[r];delete t[r],t[r]=o}}),bDe(t,e,i)),n()}},xDe=t=>{const e=t["s-cr"]=Pu.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},SDe=t=>{if(!(Zr.$flags$&1)){const e=HI(t);e.$rmListeners$&&(e.$rmListeners$.map(i=>i()),e.$rmListeners$=void 0)}},Be=(t,e)=>{const i={$flags$:e[0],$tagName$:e[1]};i.$members$=e[2],i.$listeners$=e[3],i.$watchers$=t.$watchers$,i.$attrsToReflect$=[];const n=t.prototype.connectedCallback,r=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){TDe(this,i)},connectedCallback(){wDe(this),n&&n.call(this)},disconnectedCallback(){SDe(this),r&&r.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(i.$flags$&16)})}}),t.is=i.$tagName$,vDe(t,i)},$m=(t,e)=>e,cue=(t,e,i,n)=>{i&&i.map(([r,s,o])=>{const a=CDe(t,r),l=EDe(e,o),u=IDe(r);Zr.ael(a,s,l,u),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>Zr.rel(a,s,l,u))})},EDe=(t,e)=>i=>{try{Bv.lazyLoad||t.$hostElement$[e](i)}catch(n){GI(n)}},CDe=(t,e)=>e&4?Pu:e&8?qI:e&16?Pu.body:t,IDe=t=>$De?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,uue=new WeakMap,HI=t=>uue.get(t),TDe=(t,e)=>{const i={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return cue(t,i,e.$listeners$),uue.set(t,i)},jJ=(t,e)=>e in t,GI=(t,e)=>(0,console.error)(t,e),HM=new Map,kDe=[],qI=typeof window<"u"?window:{},Pu=qI.document||{head:{}},He=qI.HTMLElement||class{},Zr={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,i,n)=>t.addEventListener(e,i,n),rel:(t,e,i,n)=>t.removeEventListener(e,i,n),ce:(t,e)=>new CustomEvent(t,e)},$De=(()=>{let t=!1;try{Pu.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch{}return t})(),ADe=t=>Promise.resolve(t),MDe=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch{}return!1})(),R4=[],due=[],hue=(t,e)=>i=>{t.push(i),P4||(P4=!0,e&&Zr.$flags$&4?ODe(L4):Zr.raf(L4))},VJ=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(i){GI(i)}t.length=0},L4=()=>{VJ(R4),VJ(due),(P4=R4.length>0)&&Zr.raf(L4)},ODe=t=>ADe().then(t),PDe=hue(R4,!1),RDe=hue(due,!0);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function LDe(t){return t.map(e=>{let i="";for(let n=0;n<e;n++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i}).join("-")}const Ts=()=>LDe([2,1,1,1,3]);/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const pue="calcite-mode-auto",fue="calcite-mode-dark",DDe="calcite-mode-light",pw={autoMode:pue,darkMode:fue,lightMode:DDe,rtl:"calcite--rtl"};/*!
* tabbable 6.0.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var mue=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],GM=mue.join(","),gue=typeof Element>"u",T0=gue?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,qM=!gue&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},yue=function(e,i,n){var r=Array.prototype.slice.apply(e.querySelectorAll(GM));return i&&T0.call(e,GM)&&r.unshift(e),r=r.filter(n),r},vue=function t(e,i,n){for(var r=[],s=Array.from(e);s.length;){var o=s.shift();if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,n);n.flatten?r.push.apply(r,u):r.push({scopeParent:o,candidates:u})}else{var h=T0.call(o,GM);h&&n.filter(o)&&(i||!e.includes(o))&&r.push(o);var p=o.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(o),f=!n.shadowRootFilter||n.shadowRootFilter(o);if(p&&f){var g=t(p===!0?o.children:p.children,!0,n);n.flatten?r.push.apply(r,g):r.push({scopeParent:o,candidates:g})}else s.unshift.apply(s,o.children)}}return r},bue=function(e,i){return e.tabIndex<0&&(i||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||e.isContentEditable)&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},FDe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},_ue=function(e){return e.tagName==="INPUT"},NDe=function(e){return _ue(e)&&e.type==="hidden"},zDe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return i},jDe=function(e,i){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===i)return e[n]},VDe=function(e){if(!e.name)return!0;var i=e.form||qM(e),n=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=n(window.CSS.escape(e.name));else try{r=n(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=jDe(r,e.form);return!s||s===e},UDe=function(e){return _ue(e)&&e.type==="radio"},BDe=function(e){return UDe(e)&&!VDe(e)},HDe=function(e){for(var i,n=qM(e).host,r=!!((i=n)!==null&&i!==void 0&&i.ownerDocument.contains(n)||e.ownerDocument.contains(e));!r&&n;){var s;n=qM(n).host,r=!!((s=n)!==null&&s!==void 0&&s.ownerDocument.contains(n))}return r},UJ=function(e){var i=e.getBoundingClientRect(),n=i.width,r=i.height;return n===0&&r===0},GDe=function(e,i){var n=i.displayCheck,r=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=T0.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(T0.call(o,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof r=="function"){for(var a=e;e;){var l=e.parentElement,u=qM(e);if(l&&!l.shadowRoot&&r(l)===!0)return UJ(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(HDe(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return UJ(e);return!1},qDe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var n=0;n<i.children.length;n++){var r=i.children.item(n);if(r.tagName==="LEGEND")return T0.call(i,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}i=i.parentElement}return!1},WM=function(e,i){return!(i.disabled||NDe(i)||GDe(i,e)||zDe(i)||qDe(i))},D4=function(e,i){return!(BDe(i)||bue(i)<0||!WM(e,i))},WDe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},JDe=function t(e){var i=[],n=[];return e.forEach(function(r,s){var o=!!r.scopeParent,a=o?r.scopeParent:r,l=bue(a,o),u=o?t(r.candidates):a;l===0?o?i.push.apply(i,u):i.push(a):n.push({documentOrder:s,tabIndex:l,item:r,isScope:o,content:u})}),n.sort(FDe).reduce(function(r,s){return s.isScope?r.push.apply(r,s.content):r.push(s.content),r},[]).concat(i)},wue=function(e,i){i=i||{};var n;return i.getShadowRoot?n=vue([e],i.includeContainer,{filter:D4.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:WDe}):n=yue(e,i.includeContainer,D4.bind(null,i)),JDe(n)},YDe=function(e,i){i=i||{};var n;return i.getShadowRoot?n=vue([e],i.includeContainer,{filter:WM.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):n=yue(e,i.includeContainer,WM.bind(null,i)),n},_T=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return T0.call(e,GM)===!1?!1:D4(i,e)},ZDe=mue.concat("iframe").join(","),pD=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return T0.call(e,ZDe)===!1?!1:WM(i,e)};const xue={getShadowRoot:!0};function BJ(t){return t?t.id=t.id||`${t.tagName.toLowerCase()}-${Ts()}`:""}function tB(t){return Array.isArray(t)?t:Array.from(t)}function KDe(t){const e=Qu(t,`.${pw.darkMode}, .${pw.lightMode}`);return e!=null&&e.classList.contains("calcite-mode-dark")?"dark":"light"}function Kr(t){const e="dir",i=`[${e}]`,n=Qu(t,i);return n?n.getAttribute(e):"ltr"}function Hr(t,e,i){const n=`[${e}]`,r=t.closest(n);return r?r.getAttribute(e):i}function Sue(t){return t.getRootNode()}function Eue(t){return t.host||null}function iB(t,{selector:e,id:i}){function n(r){if(!r)return null;r.assignedSlot&&(r=r.assignedSlot);const s=Sue(r),o=i?"getElementById"in s?s.getElementById(i):null:e?s.querySelector(e):null,a=Eue(s);return o||(a?n(a):null)}return n(t)}function Qu(t,e){function i(n){return n?n.closest(e)||i(Eue(Sue(n))):null}return i(t)}function XDe(t,e){return Cue(t,e)}function Cue(t,e){if(!t)return;const i=e(t);if(i!==void 0)return i;const{parentNode:n}=t;return Cue(n instanceof ShadowRoot?n.host:n,e)}function QDe(t,e){return!!XDe(e,i=>i===t?!0:void 0)}function eFe(t){return typeof(t==null?void 0:t.setFocus)=="function"}async function qu(t){if(t)return eFe(t)?t.setFocus():t.focus()}function nB(t){(wue(t,xue)[0]||t).focus()}const zC=":not([slot])";function Wr(t,e,i){e&&!Array.isArray(e)&&typeof e!="string"&&(i=e,e=null);const n=e?Array.isArray(e)?e.map(r=>`[slot="${r}"]`).join(","):`[slot="${e}"]`:zC;return i!=null&&i.all?tFe(t,n,i):iFe(t,n,i)}function Iue(t,e){return t?Array.from(t.children||[]).filter(i=>i==null?void 0:i.matches(e)):[]}function tFe(t,e,i){let n=e===zC?Iue(t,zC):Array.from(t.querySelectorAll(e));n=i&&i.direct===!1?n:n.filter(s=>s.parentElement===t),n=i!=null&&i.matches?n.filter(s=>s==null?void 0:s.matches(i.matches)):n;const r=i==null?void 0:i.selector;return r?n.map(s=>Array.from(s.querySelectorAll(r))).reduce((s,o)=>[...s,...o],[]).filter(s=>!!s):n}function iFe(t,e,i){let n=e===zC?Iue(t,zC)[0]||null:t.querySelector(e);n=i&&i.direct===!1||(n==null?void 0:n.parentElement)===t?n:null,n=i!=null&&i.matches?n!=null&&n.matches(i.matches)?n:null:n;const r=i==null?void 0:i.selector;return r?n==null?void 0:n.querySelector(r):n}function HJ(t,e){return Array.from(t.children).filter(i=>i.matches(e))}function fw(t,e,i){if(typeof e=="string"&&e!=="")return e;if(e==="")return t[i]}function GJ(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function Vi(t){return Boolean(t).toString()}function r_(t){return!!F4(t).length}function F4(t){return t.target.assignedElements({flatten:!0})}function Lo(t){return!!(t.isPrimary&&t.button===0)}const ah=(t,e,i)=>{const n=t.indexOf(e),r=n===0,s=n===t.length-1;i=i==="previous"&&r?"last":i==="next"&&s?"first":i;let o;switch(i){case"first":o=t[0];break;case"last":o=t[t.length-1];break;case"next":o=t[n+1]||t[0];break;case"previous":o=t[n-1]||t[t.length-1];break}return qu(o),o};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function qJ(){const{classList:t}=document.body,e=window.matchMedia("(prefers-color-scheme: dark)").matches,i=()=>t.contains(fue)||t.contains(pue)&&e?"dark":"light",n=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),r=o=>{s!==o&&n(o),s=o};let s=i();n(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>r(o.matches?"dark":"light")),new MutationObserver(()=>r(i())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function nFe(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?qJ():document.addEventListener("DOMContentLoaded",()=>qJ(),{once:!0}))}const rFe=nFe;rFe();let Tue;function sFe(){eue(_s(pt(Tue)))}Tue="components/assets";const kue=Symbol("widget"),oFe=Symbol("widget-test-data"),aFe=[],lFe={},JM=new WeakMap;function $ue(t,e){let i=e.children;if(i&&i.length)for(let r=0;r<i.length;++r)i[r]=$ue(t,i[r]);else i=aFe;const n=e.vnodeSelector;if(rB(n)){const r=e.properties||lFe,s=r.key||n;return{vnodeSelector:"div",properties:{key:s,afterCreate:cFe,afterUpdate:uFe,afterRemoved:Aue,parentWidget:t,widgetConstructor:n,widgetProperties:{...r,key:s,children:i}},children:void 0,text:void 0,domNode:null}}return e}function cFe(t,e,i,{parentWidget:n,widgetConstructor:r,widgetProperties:s}){var a;const o=new r(s);o.container=t,JM.set(t,o),(a=o.afterCreate)==null||a.call(o,o,t),n._internalHandles.add(Nh(()=>Aue(t)))}function uFe(t,e,i,{widgetProperties:n}){var s;const r=JM.get(t);r&&(r.set(n),(s=r.afterUpdate)==null||s.call(r,r,t))}function Aue(t){var i;const e=JM.get(t);e&&((i=e.afterRemoved)==null||i.call(e,e,t),e.destroy(),JM.delete(t))}function rB(t){return typeof t=="function"&&t[kue]}const WJ=new Set;function dFe(t){WJ.add(t),t.finally(()=>WJ.delete(t))}var Mue;const hFe="esri.widgets.Widget";let pFe=0;const fFe={widgetIcon:"esri-icon-checkbox-unchecked"};function Oue(t,e){for(const i in e)t[i]!=null&&(typeof t[i]=="object"&&typeof e[i]=="object"?Oue(t[i],e==null?void 0:e[i]):t[i]=e[i]);return t}const mFe=J3e({postProcessProjectionOptions(t){const e=t.eventHandlerInterceptor,i=/capture$/i;t.eventHandlerInterceptor=(n,r,s,o)=>{const a=e==null?void 0:e(n,r,s,o),l=i.test(n);if(!((n=n.replace(i,"")).toLowerCase()in s)||l){const u=n[2].toLowerCase()+n.slice(3),h=g=>a==null?void 0:a.call(s,g);s.addEventListener(u,h,l);const p=()=>s.removeEventListener(u,h,l),f=o.afterRemoved;o.afterRemoved=g=>{f==null||f(g),p()}}return a}},handleInterceptedEvent(t,e,i,n){const{eventPhase:r,type:s}=n,o=r===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=e.properties;(l&&a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,l&&a in l))&&(Uce(),t.scheduleRender(),l[a].call(l.bind||i,n))}});let fD=!1,Jn=class extends zI($r.EventedAccessor){constructor(e,i){super(e,i),this._attached=!1,this._internalHandles=new wn,this._projector=mFe,this._readyForTrueRender=!1,this.iconClass=fFe.widgetIcon,this.key=this,this._loadLocale=F8(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const o=await Zi(this._messageBundleProps.map(async({bundlePath:a,propertyName:l})=>{let u=await A_(a);this.uiStrings&&Object.keys(this.uiStrings)&&(u=Oue(G(u),this.uiStrings)),this[l]=u}));for(const a of o)a.error&&se.getLogger(this.declaredClass).error("widget-intl:locale-error",this.declaredClass,a.error)}await this.loadLocale()}),sFe();const n="esri-widget-uid-"+U3e(),r=this.render.bind(this);this._trackingTarget=new OP(()=>this.scheduleRender());const s=()=>{var p;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:n,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0};const o=r();let{properties:a}=o;a||(o.properties=a={});let{key:l,styles:u}=a;l||(a.key=n),u||(a.styles=u={}),u.display||(u.display="");let h=0;return(p=o.children)==null||p.forEach(f=>{if(rB(f.vnodeSelector))return;let{properties:g}=f;g||(f.properties=g={}),g.key||(g.key=`${this.id}--${h++}`)}),$ue(this,o)};this.render=()=>{if(fD)return s();let o=b3e(this)??null;if(o)return o;this._trackingTarget.clear(),fD=!0;try{o=Th(this._trackingTarget,s)}catch(a){throw console.error(a),a}finally{fD=!1}return o&&_3e(this,o),o},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()})),dFe(this._resourcesFetch)}normalizeCtorArgs(e,i){const n={...e};return i&&(n.container=i),n}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(jN)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(si(this._trackingTarget),si(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,dD(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return eR(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+pFe++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(Mue=kue,oFe)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(dD(this),this._projector.scheduleRender())}classes(...e){return Hce.apply(this,e)}renderNow(){dD(this),this._projector.renderNow()}_postInitialize(){var i;if(this.destroyed)return;this.scheduleRender(),(i=this._delegatedEventNames)!=null&&i.length&&this._internalHandles.add(X(()=>this.viewModel,(n,r)=>{r&&this._internalHandles.remove("delegated-events"),n&&AP(n)&&this._internalHandles.add(this._delegatedEventNames.map(s=>ll(n,s,o=>{this.emit(s,o)})),"delegated-events")},ut)),this.postInitialize();const e=async()=>{await this._loadLocale().catch(jN),this.scheduleRender()};this._internalHandles.add([zP(e),X(()=>this.uiStrings,e),Ys(()=>this.container,n=>{this.destroyed||this._attach(n)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){var i;this._attached&&(this._projector.detach(this.render),this._attached=!1),(i=e==null?void 0:e.parentNode)==null||i.removeChild(e)}};Jn[Mue]=!0,c([d()],Jn.prototype,"_readyForTrueRender",void 0),c([d({value:null})],Jn.prototype,"container",null),c([st("container")],Jn.prototype,"castContainer",null),c([d()],Jn.prototype,"iconClass",void 0),c([d()],Jn.prototype,"id",null),c([d()],Jn.prototype,"label",null),c([d()],Jn.prototype,"renderable",null),c([d()],Jn.prototype,"uiStrings",void 0),c([d()],Jn.prototype,"viewModel",void 0),c([d({value:!0})],Jn.prototype,"visible",null),c([d()],Jn.prototype,"key",void 0),c([d()],Jn.prototype,"children",void 0),c([d()],Jn.prototype,"afterCreate",void 0),c([d()],Jn.prototype,"afterUpdate",void 0),c([d()],Jn.prototype,"afterRemoved",void 0),Jn=c([O(hFe)],Jn);const qt=Jn;function Pue(t){return 32+t.length}function Rue(t){return 16}function R0t(t){if(!t)return 0;let e=Due;for(const i in t)if(t.hasOwnProperty(i)){const n=t[i];switch(typeof n){case"string":e+=Pue(n);break;case"number":e+=Rue();break;case"boolean":e+=4}}return e}function gFe(t){if(!t)return 0;if(Array.isArray(t))return yFe(t);let e=Due;for(const i in t)t.hasOwnProperty(i)&&(e+=Lue(t[i]));return e}function yFe(t){const e=t.length;if(e===0||typeof t[0]=="number")return 32+8*e;let i=Fue;for(let n=0;n<e;n++)i+=Lue(t[n]);return i}function Lue(t){switch(typeof t){case"object":return gFe(t);case"string":return Pue(t);case"number":return Rue();case"boolean":return 4;default:return 8}}function L0t(t,e){return Fue+t.length*e}const Due=32,Fue=32;var YM;(function(t){t[t.KILOBYTES=1024]="KILOBYTES",t[t.MEGABYTES=1048576]="MEGABYTES",t[t.GIGABYTES=1073741824]="GIGABYTES"})(YM||(YM={}));function Nue(t,e,i){return t.units[e][i]}function i1(t,e,i,n=2,r="abbr"){return`${Aa(e,{minimumFractionDigits:n,maximumFractionDigits:n,signDisplay:e>0?"never":"exceptZero"})} ${Nue(t,i,r)}`}function sR(t,e,i,n=2,r="abbr"){return`${Aa(e,{minimumFractionDigits:n,maximumFractionDigits:n,signDisplay:"exceptZero"})} ${Nue(t,i,r)}`}function D0t(t,e,i,n=2,r="abbr"){const s=Aoe(e,i);return i1(t,kt(e,i,s),s,n,r)}function F0t(t,e,i,n=2,r="abbr"){const s=Aoe(e,i);return sR(t,kt(e,i,s),s,n,r)}function N0t(t,e,i,n=2,r="abbr"){const s=Moe(e,i);return i1(t,kt(e,i,s),s,n,r)}function z0t(t,e,i,n=2,r="abbr"){const s=Moe(e,i);return sR(t,kt(e,i,s),s,n,r)}function j0t(t,e,i,n=2,r="abbr"){const s=Ooe(e,i);return i1(t,kt(e,i,s),s,n,r)}function V0t(t,e,i,n=2,r="abbr"){const s=Ooe(e,i);return sR(t,kt(e,i,s),s,n,r)}function U0t(t,e,i,n=2,r="abbr"){const s=Poe(e,i);return i1(t,kt(e,i,s),s,n,r)}function B0t(t,e,i,n=2,r="abbr"){const s=Poe(e,i);return sR(t,kt(e,i,s),s,n,r)}function H0t(t,e,i,n=2,r="abbr"){const s=VTe(e,i);return i1(t,kt(e,i,s),s,n,r)}function G0t(t,e,i,n=2,r="abbr"){const s=UTe(e,i);return i1(t,kt(e,i,s),s,n,r)}function q0t(t,e,i,n,r){r=xs(r,2);let s=tce.normalize(vFe(kt(t,e,"degrees"),i,n),0,!0);const o={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:r,minimumFractionDigits:r,signDisplay:s>0?"never":"exceptZero"};return s=zue(s,o),Aa(s,o)}function W0t(t,e,i,n,r){i!==n&&(t=-t);const s={style:"unit",unitDisplay:"narrow",unit:"degree",maximumFractionDigits:r=xs(r,2),minimumFractionDigits:r,signDisplay:"exceptZero"};let o=kt(t,e,"degrees")%360;return o=zue(o,s),Aa(o,s)}const JJ=new Map;function zue(t,e){const i=JSON.stringify(e);let n=JJ.get(i);return n||(n=new Intl.NumberFormat("en-US",e),JJ.set(i,n)),/\-?\+?360/.test(n.format(t))?0:t}function vFe(t,e,i){if(e===i)return t;switch(i){case"arithmetic":return bFe(t);case"geographic":return _Fe(t)}}function bFe(t){return 90-t}function _Fe(t){return-t-90}const YJ=["B","kB","MB","GB","TB"];function wFe(t,e){let i=e===0?0:Math.floor(Math.log(e)/Math.log(YM.KILOBYTES));i=zo(i,0,YJ.length-1);const n=Aa(e/YM.KILOBYTES**i,{maximumFractionDigits:2});return Fu(t.units.bytes[YJ[i]],{fileSize:n})}function xFe(t){const{exifInfo:e,exifName:i,tagName:n}=t;if(!e||!i||!n)return null;const r=e.find(s=>s.name===i);return r?SFe({tagName:n,tags:r.tags}):null}function SFe(t){const{tagName:e,tags:i}=t;if(!i||!e)return null;const n=i.find(r=>r.name===e);return n&&n.value||null}var N4;const EFe={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let lo=N4=class extends Y{constructor(t){super(t),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:t}=this,e=xFe({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:t});return EFe[e]||null}clone(){return new N4({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};c([d({type:String})],lo.prototype,"contentType",void 0),c([d()],lo.prototype,"exifInfo",void 0),c([d({readOnly:!0})],lo.prototype,"orientationInfo",null),c([d({type:Bt})],lo.prototype,"id",void 0),c([d({type:String})],lo.prototype,"globalId",void 0),c([d({type:String})],lo.prototype,"keywords",void 0),c([d({type:String})],lo.prototype,"name",void 0),c([d({json:{read:!1}})],lo.prototype,"parentGlobalId",void 0),c([d({json:{read:!1}})],lo.prototype,"parentObjectId",void 0),c([d({type:Bt})],lo.prototype,"size",void 0),c([d({json:{read:!1}})],lo.prototype,"url",void 0),lo=N4=c([O("esri.layers.support.AttachmentInfo")],lo);const CFe=lo;var z4;let gr=z4=class extends Y{constructor(t){super(t),this.attachmentTypes=null,this.attachmentsWhere=null,this.cacheHint=void 0,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new z4(G({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};c([d({type:[String],json:{write:!0}})],gr.prototype,"attachmentTypes",void 0),c([d({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],gr.prototype,"attachmentsWhere",void 0),c([d({type:Boolean,json:{write:!0}})],gr.prototype,"cacheHint",void 0),c([d({type:[String],json:{write:!0}})],gr.prototype,"keywords",void 0),c([d({type:[Number],json:{write:!0}})],gr.prototype,"globalIds",void 0),c([d({json:{write:!0}})],gr.prototype,"name",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],gr.prototype,"num",void 0),c([d({type:[Number],json:{write:!0}})],gr.prototype,"objectIds",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],gr.prototype,"returnMetadata",void 0),c([d({type:[Number],json:{write:!0}})],gr.prototype,"size",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],gr.prototype,"start",void 0),c([fe("start"),fe("num")],gr.prototype,"writeStart",null),c([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],gr.prototype,"where",void 0),gr=z4=c([O("esri.rest.support.AttachmentQuery")],gr),gr.from=Ht(gr);const ZM=gr;function J0t(t){const e=t==null?void 0:t.type;return e==="imagery-tile"||e==="tile"||e==="open-street-map"||e==="vector-tile"||e==="web-tile"||e==="wmts"}function Y0t(t){const e=t==null?void 0:t.type;return e==="base-tile"||e==="tile"||e==="elevation"||e==="imagery-tile"||e==="base-elevation"||e==="open-street-map"||e==="wcs"||e==="web-tile"||e==="wmts"||e==="vector-tile"}const Z0t={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};function jue(t){const e=t==null?void 0:t.type;return e==="building-scene"||e==="integrated-mesh"||e==="point-cloud"||e==="scene"}function oR(t){var e;return(t==null?void 0:t.type)==="feature"&&!t.url&&((e=t.source)==null?void 0:e.type)==="memory"}function ZJ(t){var e;return(t==null?void 0:t.type)==="feature"&&((e=t.source)==null?void 0:e.type)==="feature-layer"}function K0t(t){if(t.activeLayer){const e=t.activeLayer.tileMatrixSet;if(e)return e;const i=t.activeLayer.tileMatrixSets;if(i)return i}return null}async function Vue(t,e){const i=Ne==null?void 0:Ne.findServerInfo(t);if((i==null?void 0:i.currentVersion)!=null)return i.owningSystemUrl||null;const n=t.toLowerCase().indexOf("/rest/services");if(n===-1)return null;const r=`${t.substring(0,n)}/rest/info`,s=A(e)?e.signal:null,{data:o}=await rt(r,{query:{f:"json"},responseType:"json",signal:s});return(o==null?void 0:o.owningSystemUrl)||null}function IFe(t){if(!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"imagery":case"knowledge-graph-sublayer":case"ogc-feature":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":case"wfs":return!0;default:return!1}}function Pf(t){return IFe(t)?"effectiveCapabilities"in t?t.effectiveCapabilities:t.capabilities:null}function TFe(t){if(!("editingEnabled"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"oriented-imagery":case"scene":case"subtype-group":case"subtype-sublayer":return!0;default:return!1}}function kFe(t){return!!TFe(t)&&("effectiveEditingEnabled"in t?t.effectiveEditingEnabled:t.editingEnabled)}const $Fe="esri.widgets.Feature.support.featureUtils",KJ=se.getLogger($Fe),AFe=/href=(""|'')/gi,MFe=/(\{([^\{\r\n]+)\})/g,OFe=/\'/g,Uue=/^\s*expression\//i,PFe=/(\n)/gi,RFe=/[\u00A0-\u9999<>\&]/gim,LFe=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,DFe=/^(?:mailto:|tel:)/,Bue="relationships/",j4=Jw("short-date-short-time");function Hue(t){if(!U(t))return t.get("sourceLayer")||t.get("layer")}async function KM(t,e){return typeof t=="function"?t.call(null,e):t}function Gue(t=""){if(t)return!DFe.test(t.trim().toLowerCase())}function sB(t){return!!t&&Uue.test(t)}function FFe(t,e){if(!sB(e)||!t)return null;const i=e.replace(Uue,"").toLowerCase();let n=null;return t.some(r=>r.name.toLowerCase()===i&&(n=r,!0)),n}function que(t,e){const i=FFe(e,t==null?void 0:t.fieldName);return i?i.title||null:t?t.label||t.fieldName:null}function NFe(t,e){const i=e.get(t.toLowerCase());return`{${i&&i.fieldName||t}}`}function zFe(t){return t.replace(AFe,"")}function jC(t,e){const i=oB(e,t);return i?i.name:t}function jFe(t,e){return t&&t.map(i=>jC(i,e))}function oB(t,e){return t&&typeof t.getField=="function"&&e?t.getField(e)??null:null}function Wue(t){return`${t}`.trim()}function Uy({attributes:t,globalAttributes:e,layer:i,text:n,expressionAttributes:r,fieldInfoMap:s}){return n?V4({formattedAttributes:e,template:HFe(n,{...e,...r,...t},i),fieldInfoMap:s}):""}function V4({formattedAttributes:t,template:e,fieldInfoMap:i}){return Wue(zFe(Fu(Fu(e,n=>NFe(n,i)),t)))}function VFe(t,e,i=!1){const n=e[t];if(typeof n=="string"){const r="%27",s=(i?encodeURIComponent(n):n).replace(OFe,r);e[t]=s}}function UFe(t,e=!1){const i={...t};return Object.keys(i).forEach(n=>VFe(n,i,e)),i}function BFe(t,e,i){const n=(e=Wue(e))&&e[0]!=="{";return Fu(t,UFe(i,n||!1))}function U4(t,e){return t.replace(MFe,(i,n,r)=>{const s=oB(e,r);return s?`{${s.name}}`:n})}function HFe(t,e,i){const n=U4(t,i);return n&&n.replace(LFe,(r,s,o)=>BFe(r,s||o,e))}function GFe(t,e){if(typeof t=="string"&&e&&e.dateFormat==null&&(e.places!=null||e.digitSeparator!=null)){const i=Number(t);if(!isNaN(i))return i}return t}function qFe(t){return(t==null?void 0:t.type)==="feature"}function XJ(t){return!!(t!=null&&t.layer)}function WFe(t){return(t==null?void 0:t.type)==="map-image"}function JFe(t,e){var u;const i=e.fieldInfos,n=e.fieldName,r=(u=Jue(i,n))==null?void 0:u.clone(),s=e.preventPlacesFormatting,o=e.layer,a=oB(o,n);if(r&&(a==null?void 0:a.type)==="date"){const h=r.format||new Qb;h.dateFormat=h.dateFormat||"short-date-short-time",h.dateTimeFormatOptions=!XJ(o)&&qFe(o)&&o.datesInUnknownTimezone||XJ(o)&&WFe(o.layer)&&o.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,r.format=h}const l=r&&r.format;return typeof t=="string"&&yae(n)&&l?l.formatRasterPixelValue(t):typeof(t=GFe(t,l))=="string"||t==null||l==null?WI(t):s?Aa(t,{...s9(l),minimumFractionDigits:0,maximumFractionDigits:20}):l.format(t)}function Jue(t,e){if(!t||!t.length||!e)return;const i=e.toLowerCase();let n;return t.some(r=>!(!r.fieldName||r.fieldName.toLowerCase()!==i)&&(n=r,!0)),n}function YFe({fieldName:t,graphic:e,layer:i}){if(lh(t)||!i||typeof i.getFeatureType!="function")return null;const{typeIdField:n}=i;if(!n||t!==n)return null;const r=i.getFeatureType(e);return r?r.name:null}function ZFe({fieldName:t,value:e,graphic:i,layer:n}){if(lh(t)||!n||typeof n.getFieldDomain!="function")return null;const r=i&&n.getFieldDomain(t,{feature:i});return r&&r.type==="coded-value"?r.getName(e):null}function KFe(t,e){const{creatorField:i,creationDateField:n,editorField:r,editDateField:s}=t;if(!e)return;const o=e[s];if(typeof o=="number"){const l=e[r];return{type:"edit",date:Ai(o,j4),user:l}}const a=e[n];if(typeof a=="number"){const l=e[i];return{type:"create",date:Ai(a,j4),user:l}}return null}function XFe(t,e){const i=new Map;return t&&t.forEach(n=>{const r=jC(n.fieldName,e);n.fieldName=r,i.set(r.toLowerCase(),n)}),i}function QJ(t){const e=[];if(!t)return e;const{fieldInfos:i,content:n}=t;return i&&e.push(...i),n&&Array.isArray(n)&&n.forEach(r=>{if(r.type==="fields"){const s=r&&r.fieldInfos;s&&e.push(...s)}}),e}function aB(t){return t.replace(RFe,e=>`&#${e.charCodeAt(0)};`)}function WI(t){return typeof t=="string"?t.replace(PFe,'<br class="esri-text-new-line" />'):t}function Yue(t){const{value:e,fieldName:i,fieldInfos:n,fieldInfoMap:r,layer:s,graphic:o}=t;if(e==null)return"";const a=ZFe({fieldName:i,value:e,graphic:o,layer:s});if(a)return a;const l=YFe({fieldName:i,graphic:o,layer:s});if(l)return l;if(r.get(i.toLowerCase()))return JFe(e,{fieldInfos:n||Array.from(r.values()),fieldName:i,layer:s});const u=s&&s.fieldsIndex;return u&&u.isDateField(i)?Ai(e,j4):WI(e)}function mD({fieldInfos:t,attributes:e,layer:i,graphic:n,fieldInfoMap:r,relatedInfos:s}){const o={};return s==null||s.forEach(a=>i5e({attributes:o,relatedInfo:a,fieldInfoMap:r,fieldInfos:t,layer:i})),e&&Object.keys(e).forEach(a=>{const l=e[a];o[a]=Yue({fieldName:a,fieldInfos:t,fieldInfoMap:r,layer:i,value:l,graphic:n})}),o}async function Zue(t,e){var h,p;const{layer:i,graphic:n,outFields:r,objectIds:s,returnGeometry:o,spatialReference:a}=t,l=s[0];if(typeof l!="number"&&typeof l!="string"){const f="Could not query required fields for the specified feature. The feature's ID is invalid.",g={layer:i,graphic:n,objectId:l,requiredFields:r};return KJ.warn(f,g),null}if(!((p=(h=Pf(i))==null?void 0:h.operations)!=null&&p.supportsQuery)){const f="The specified layer cannot be queried. The following fields will not be available.",g={layer:i,graphic:n,requiredFields:r,returnGeometry:o};return KJ.warn(f,g),null}const u=i.createQuery();return u.objectIds=s,u.outFields=r!=null&&r.length?r:[i.objectIdField],u.returnGeometry=!!o,u.returnZ=!!o,u.returnM=!!o,u.outSpatialReference=a,(await i.queryFeatures(u,e)).features[0]}async function QFe(t){var n;if(!((n=t.expressionInfos)!=null&&n.length))return!1;const e=await Rc(),{arcadeUtils:{hasGeometryFunctions:i}}=e;return i(t)}async function e5e({graphic:t,popupTemplate:e,layer:i,spatialReference:n},r){if(!i||!e||(typeof i.load=="function"&&await i.load(r),!t.attributes))return;const s=t.attributes[i.objectIdField];if(s==null)return;const o=[s],a=await e.getRequiredFields(i.fieldsIndex),l=C$e(a,t),u=l?[]:a,h=e.returnGeometry||await QFe(e);if(l&&!h)return;const p=await Zue({layer:i,graphic:t,outFields:u,objectIds:o,returnGeometry:h,spatialReference:n},r);p&&(p.geometry&&(t.geometry=p.geometry),p.attributes&&(t.attributes={...t.attributes,...p.attributes}))}function lh(t=""){return!!t&&t.includes(Bue)}function t5e(t){return t?`${Bue}${t.layerId}/${t.fieldName}`:""}function eY({attributes:t,graphic:e,relatedInfo:i,fieldInfos:n,fieldInfoMap:r,layer:s}){t&&e&&i&&Object.keys(e.attributes).forEach(o=>{const a=t5e({layerId:i.relation.id.toString(),fieldName:o}),l=e.attributes[o];t[a]=Yue({fieldName:a,fieldInfos:n,fieldInfoMap:r,layer:s,value:l,graphic:e})})}function i5e({attributes:t,relatedInfo:e,fieldInfoMap:i,fieldInfos:n,layer:r}){t&&e&&(e.relatedFeatures&&e.relatedFeatures&&e.relatedFeatures.forEach(s=>eY({attributes:t,graphic:s,relatedInfo:e,fieldInfoMap:i,fieldInfos:n,layer:r})),e.relatedStatsFeatures&&e.relatedStatsFeatures&&e.relatedStatsFeatures.forEach(s=>eY({attributes:t,graphic:s,relatedInfo:e,fieldInfoMap:i,fieldInfos:n,layer:r})))}const tY=t=>{if(!t)return!1;const e=t.toUpperCase();return e.includes("CURRENT_TIMESTAMP")||e.includes("CURRENT_DATE")||e.includes("CURRENT_TIME")},Kue=({layer:t,method:e,query:i,definitionExpression:n})=>{var o,a;if(!((a=(o=t.capabilities)==null?void 0:o.query)!=null&&a.supportsCacheHint)||e==="attachments")return;const r=A(i.where)?i.where:null,s=A(i.geometry)?i.geometry:null;tY(n)||tY(r)||(s==null?void 0:s.type)==="extent"||i.resultType==="tile"||(i.cacheHint=!0)},n5e=({query:t,layer:e,method:i})=>{Kue({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})},r5e=({queryPayload:t,layer:e,method:i})=>{Kue({layer:e,method:i,query:t,definitionExpression:`${e.definitionExpression} ${e.serviceDefinitionExpression}`})};function s5e(t,e,i){return t&&e&&i?iY(t.allLayers,e,i)||iY(t.allTables,e,i):null}function iY(t,e,i){return t.find(n=>n!==e&&n.type==="feature"&&n.url===e.url&&n.layerId===i.relatedTableId)}const nY={editing:!1,operations:{add:!0,update:!0,delete:!0}},Xue=we.ofType(CFe);let co=class extends _e{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...nY},this.activeAttachmentInfo=null,this.activeFileInfo=null,this.attachmentInfos=new Xue,this.fileInfos=new we,this.graphic=null,this.mode="view",this.filesEnabled=!1,this.addHandles(X(()=>this.graphic,()=>this._graphicChanged(),ut))}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...nY,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){const{graphic:e}=this;if(!e)return!1;const i=e.layer||e.sourceLayer;return(i==null?void 0:i.loaded)&&"capabilities"in i&&i.capabilities&&"operations"in i.capabilities&&"supportsResizeAttachments"in i.capabilities.operations&&i.capabilities.operations.supportsResizeAttachments||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:i}=this;if(!e||typeof e.queryAttachments!="function")throw new N("invalid-layer","getAttachments(): A valid layer is required.");const n=this._getObjectId(),r=new ZM({objectIds:[n],returnMetadata:!0}),s=[],o=e.queryAttachments(r).then(l=>l[n]||s).catch(()=>s);this._getAttachmentsPromise=o,this.notifyChange("state");const a=await o;return i.removeAll(),a.length&&i.addMany(a),this._getAttachmentsPromise=null,this.notifyChange("state"),a}async addAttachment(e,i=this.graphic){var l;const{_attachmentLayer:n,attachmentInfos:r,abilities:s}=this;if(!i)throw new N("invalid-graphic","addAttachment(): A valid graphic is required.",{graphic:i});if(!e)throw new N("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!((l=s.operations)!=null&&l.add))throw new N("invalid-abilities","addAttachment(): add abilities are required.");if(!n||typeof n.addAttachment!="function")throw new N("invalid-layer","addAttachment(): A valid layer is required.");const o=n.addAttachment(i,e).then(u=>this._queryAttachment(u.objectId,i)),a=await o;return r.add(a),a}async deleteAttachment(e){var l;const{_attachmentLayer:i,attachmentInfos:n,graphic:r,abilities:s}=this;if(!e)throw new N("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!((l=s.operations)!=null&&l.delete))throw new N("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!i||typeof i.deleteAttachments!="function")throw new N("invalid-layer","deleteAttachment(): A valid layer is required.");if(!r)throw new N("invalid-graphic","deleteAttachment(): A graphic is required.");const o=i.deleteAttachments(r,[e.id]).then(()=>e),a=await o;return n.remove(a),a}async updateAttachment(e,i=this.activeAttachmentInfo){var h;const{_attachmentLayer:n,attachmentInfos:r,graphic:s,abilities:o}=this;if(!e)throw new N("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!i)throw new N("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:i});if(!((h=o.operations)!=null&&h.update))throw new N("invalid-abilities","updateAttachment(): Update abilities are required.");const a=r.findIndex(p=>p===i);if(!n||typeof n.updateAttachment!="function")throw new N("invalid-layer","updateAttachment(): A valid layer is required.");if(!s)throw new N("invalid-graphic","updateAttachment(): A graphic is required.");const l=n.updateAttachment(s,i.id,e).then(p=>this._queryAttachment(p.objectId)),u=await l;return r.splice(a,1,u),u}async commitFiles(){return await Promise.all(this.fileInfos.items.map(e=>this.addAttachment(e.form))),this.fileInfos.removeAll(),this.getAttachments()}addFile(e,i){if(!e||!i)return null;const n={file:e,form:i};return this.fileInfos.add(n),n}updateFile(e,i,n=this.activeFileInfo){if(!e||!i||!n)return null;const r=this.fileInfos.findIndex(s=>n===s);return r>-1&&this.fileInfos.splice(r,1,{file:e,form:i}),this.fileInfos.items[r]}deleteFile(e){const i=this.fileInfos.find(n=>n.file===e);return i?(this.fileInfos.remove(i),i):null}async _queryAttachment(e,i){const{_attachmentLayer:n}=this;if(!e||!(n!=null&&n.queryAttachments))throw new N("invalid-attachment-id","Could not query attachment.");const r=this._getObjectId(i),s=new ZM({objectIds:[r],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return n.queryAttachments(s).then(o=>o[r][0])}_getObjectId(e=this.graphic){return(e==null?void 0:e.getObjectId())??null}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,i=Hue(e);this._attachmentLayer=i?i.type==="scene"&&A(i.associatedLayer)?i.associatedLayer:i:null}};c([d()],co.prototype,"abilities",void 0),c([st("abilities")],co.prototype,"castAbilities",null),c([d()],co.prototype,"activeAttachmentInfo",void 0),c([d()],co.prototype,"activeFileInfo",void 0),c([d({readOnly:!0,type:Xue})],co.prototype,"attachmentInfos",void 0),c([d()],co.prototype,"fileInfos",void 0),c([d({type:en})],co.prototype,"graphic",void 0),c([d()],co.prototype,"mode",void 0),c([d({readOnly:!0})],co.prototype,"state",null),c([d()],co.prototype,"filesEnabled",void 0),c([d({readOnly:!0})],co.prototype,"supportsResizeAttachments",null),co=c([O("esri.widgets.Attachments.AttachmentsViewModel")],co);const lB=co;function rY(t){const e=t.toLowerCase();return e==="image/bmp"||e==="image/emf"||e==="image/exif"||e==="image/gif"||e==="image/x-icon"||e==="image/jpeg"||e==="image/png"||e==="image/tiff"||e==="image/x-wmf"}function o5e(t){const e=pt("esri/themes/base/images/files/");return t?t==="text/plain"?`${e}text-32.svg`:t==="application/pdf"?`${e}pdf-32.svg`:t==="text/csv"?`${e}csv-32.svg`:t==="application/gpx+xml"?`${e}gpx-32.svg`:t==="application/x-dwf"?`${e}cad-32.svg`:t==="application/postscript"||t==="application/json"||t==="text/xml"||t==="model/vrml"?`${e}code-32.svg`:t==="application/x-zip-compressed"||t==="application/x-7z-compressed"||t==="application/x-gzip"||t==="application/x-tar"||t==="application/x-gtar"||t==="application/x-bzip2"||t==="application/gzip"||t==="application/x-compress"||t==="application/x-apple-diskimage"||t==="application/x-rar-compressed"||t==="application/zip"?`${e}zip-32.svg`:t.includes("image/")?`${e}image-32.svg`:t.includes("audio/")?`${e}sound-32.svg`:t.includes("video/")?`${e}video-32.svg`:t.includes("msexcel")||t.includes("ms-excel")||t.includes("spreadsheetml")?`${e}excel-32.svg`:t.includes("msword")||t.includes("ms-word")||t.includes("wordprocessingml")?`${e}word-32.svg`:t.includes("powerpoint")||t.includes("presentationml")?`${e}report-32.svg`:`${e}generic-32.svg`:`${e}generic-32.svg`}function bt(t){return(e,i)=>{e.hasOwnProperty("_messageBundleProps")||(e._messageBundleProps=e._messageBundleProps?e._messageBundleProps.slice():[]),e._messageBundleProps.push({bundlePath:t,propertyName:i})}}var a5e=function(t){return{vnodeSelector:"",properties:void 0,children:void 0,text:t.toString(),domNode:null}},Que=function(t,e){for(var i=0,n=t.length;i<n;i++){var r=t[i];Array.isArray(r)?Que(r,e):r!=null&&r!==!1&&(r.hasOwnProperty("vnodeSelector")||(r=a5e(r)),e.push(r))}},l5e=function(t,e){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(i.length===1&&typeof i[0]=="string")return{vnodeSelector:t,properties:e||void 0,children:void 0,text:i[0],domNode:null};var r=[];return Que(i,r),{vnodeSelector:t,properties:e||void 0,children:r,text:void 0,domNode:null}};function L(t,e,...i){return typeof t!="function"||rB(t)?l5e(t,e,...i):t(e,...i)}const sY={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},yt="esri-attachments",qm="esri-button",be={base:yt,loaderContainer:`${yt}__loader-container`,loader:`${yt}__loader`,fadeIn:`${yt}--fade-in`,container:`${yt}__container`,containerList:`${yt}__container--list`,containerPreview:`${yt}__container--preview`,actions:`${yt}__actions`,deleteButton:`${yt}__delete-button`,addAttachmentButton:`${yt}__add-attachment-button`,errorMessage:`${yt}__error-message`,items:`${yt}__items`,item:`${yt}__item`,itemButton:`${yt}__item-button`,itemMask:`${yt}__item-mask`,itemMaskIcon:`${yt}__item-mask--icon`,itemImage:`${yt}__image`,itemImageResizable:`${yt}__image--resizable`,itemLabel:`${yt}__label`,itemFilename:`${yt}__filename`,itemChevronIcon:`${yt}__item-chevron-icon`,itemLink:`${yt}__item-link`,itemLinkOverlay:`${yt}__item-link-overlay`,itemLinkOverlayIcon:`${yt}__item-link-overlay-icon`,itemEditIcon:`${yt}__item-edit-icon`,itemAddIcon:`${yt}__item-add-icon`,itemAddButton:`${yt}__item-add-button`,formNode:`${yt}__form-node`,fileFieldset:`${yt}__file-fieldset`,fileLabel:`${yt}__file-label`,fileName:`${yt}__file-name`,fileInput:`${yt}__file-input`,metadata:`${yt}__metadata`,metadataFieldset:`${yt}__metadata-fieldset`,progressBar:`${yt}__progress-bar`,esriWidget:"esri-widget",esriButton:qm,buttonDisabled:`${qm}--disabled`,esriButtonSecondary:`${qm}--secondary`,esriButtonTertiary:`${qm}--tertiary`,esriButtonThird:`${qm}--third`,esriButtonSmall:`${qm}--small`,esriButtonHalf:`${qm}--half`,empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},gD=window.CSS;let ds=class extends qt{constructor(e,i){super(e,i),this.displayType="auto",this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=null,this.visibleElements={...sY},this._supportsImageOrientation=gD&&gD.supports&&gD.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.viewModel||(this.viewModel=new lB),this.addHandles([ji(()=>{var e;return(e=this.viewModel)==null?void 0:e.attachmentInfos},"change",()=>this.scheduleRender()),ji(()=>{var e;return(e=this.viewModel)==null?void 0:e.fileInfos},"change",()=>this.scheduleRender()),X(()=>{var e;return(e=this.viewModel)==null?void 0:e.mode},()=>this._modeChanged(),ut)])}loadDependencies(){return Promise.all([q(()=>import("./calcite-icon-ee29cf49.js"),[])])}get abilities(){return this.viewModel.abilities}set abilities(e){this.viewModel.abilities=e}get effectiveDisplayType(){const{displayType:e}=this;return e&&e!=="auto"?e:this.viewModel.supportsResizeAttachments?"preview":"list"}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}castVisibleElements(e){return{...sY,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.addAttachment(e).then(n=>(this._set("submitting",!1),this._set("error",null),i.mode="view",n)).catch(n=>{throw this._set("submitting",!1),this._set("error",new N("attachments:add-attachment",this.messages.addErrorMessage,n)),n})}deleteAttachment(e){const{viewModel:i}=this;return this._set("submitting",!0),this._set("error",null),i.deleteAttachment(e).then(n=>(this._set("submitting",!1),this._set("error",null),i.mode="view",n)).catch(n=>{throw this._set("submitting",!1),this._set("error",new N("attachments:delete-attachment",this.messages.deleteErrorMessage,n)),n})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:i}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(i).then(n=>(this._set("submitting",!1),this._set("error",null),e.mode="view",n)).catch(n=>{throw this._set("submitting",!1),this._set("error",new N("attachments:update-attachment",this.messages.updateErrorMessage,n)),n})}addFile(){const e=this.viewModel.addFile(this.selectedFile,this._addAttachmentForm);return this.viewModel.mode="view",e}updateFile(){const{viewModel:e}=this,i=e.updateFile(this.selectedFile,this._updateAttachmentForm,e.activeFileInfo);return e.mode="view",i}deleteFile(e){var n;const i=this.viewModel.deleteFile(e||((n=this.viewModel.activeFileInfo)==null?void 0:n.file));return this.viewModel.mode="view",i}render(){const{submitting:e,viewModel:i}=this,{state:n}=i;return L("div",{class:this.classes(be.base,be.esriWidget)},e?this.renderProgressBar():null,n==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:i}=this;return e&&i.errorMessage?L("div",{key:"error-message",class:be.errorMessage},e.message):null}renderAttachments(){const{activeFileInfo:e,mode:i,activeAttachmentInfo:n}=this.viewModel;return i==="add"?this.renderAddForm():i==="edit"?this.renderDetailsForm(n||e):this.renderAttachmentContainer()}renderLoading(){return L("div",{class:be.loaderContainer,key:"loader"},L("div",{class:be.loader}))}renderProgressBar(){return this.visibleElements.progressBar?L("div",{class:be.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:i}=this,n=e||!i,r=this.visibleElements.cancelAddButton?L("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(be.esriButton,be.esriButtonTertiary,be.esriButtonSmall,be.esriButtonHalf,e&&be.buttonDisabled)},this.messages.cancel):null,s=this.visibleElements.addSubmitButton?L("button",{type:"submit",disabled:n,class:this.classes(be.esriButton,be.esriButtonSecondary,be.esriButtonSmall,be.esriButtonHalf,{[be.buttonDisabled]:n})},this.messages.add):null,o=i?L("span",{key:"file-name",class:be.fileName},i.name):null,a=L("form",{bind:this,afterCreate:Ao,afterRemoved:EJ,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},L("fieldset",{class:be.fileFieldset},o,L("label",{class:this.classes(be.fileLabel,be.esriButton,be.esriButtonSecondary)},i?this.messages.changeFile:this.messages.selectFile,L("input",{class:be.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),s,r);return L("div",{key:"add-form-container",class:be.formNode},a)}renderDetailsForm(e){var $,M,P;const{visibleElements:i,viewModel:n,selectedFile:r,submitting:s}=this,{abilities:o}=n,a=s||!r;let l,u,h,p;r?(l=r.type,u=r.name,h=r.size):e&&"file"in e?(l=e.file.type,u=e.file.name,h=e.file.size):e&&"contentType"in e&&(l=e.contentType,u=e.name,h=e.size,p=e.url);const f=o.editing&&(($=o.operations)!=null&&$.delete)&&i.deleteButton?L("button",{key:"delete-button",type:"button",disabled:s,bind:this,onclick:k=>this._submitDeleteAttachment(k,e),class:this.classes(be.esriButton,be.esriButtonSmall,be.esriButtonTertiary,be.deleteButton,{[be.buttonDisabled]:s})},this.messages.delete):void 0,g=o.editing&&((M=o.operations)!=null&&M.update)&&i.updateButton?L("button",{disabled:a,key:"update-button",type:"submit",class:this.classes(be.esriButton,be.esriButtonSmall,be.esriButtonThird,{[be.buttonDisabled]:a})},this.messages.update):void 0,v=this.visibleElements.cancelUpdateButton?L("button",{disabled:s,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(be.esriButton,be.esriButtonSmall,be.esriButtonTertiary,be.esriButtonThird,{[be.buttonDisabled]:s})},this.messages.cancel):void 0,b=o.editing&&((P=o.operations)!=null&&P.update)?L("fieldset",{key:"file",class:be.fileFieldset},L("span",{key:"file-name",class:be.fileName},u),L("label",{class:this.classes(be.fileLabel,be.esriButton,be.esriButtonSecondary)},this.messages.changeFile,L("input",{class:be.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):void 0,_=L("fieldset",{key:"size",class:be.metadataFieldset},L("label",null,wFe(this.messagesUnits,h??0))),w=L("fieldset",{key:"content-type",class:be.metadataFieldset},L("label",null,l)),S=A(p)?L("a",{class:be.itemLink,href:p,rel:"noreferrer",target:"_blank"},this.renderImageMask(e,400),L("div",{class:be.itemLinkOverlay},L("span",{class:be.itemLinkOverlayIcon},L("calcite-icon",{icon:"launch"})))):this.renderImageMask(e,400),C=L("form",{bind:this,afterCreate:Ao,afterRemoved:EJ,"data-node-ref":"_updateAttachmentForm",onsubmit:k=>this._submitUpdateAttachment(k,e)},L("div",{class:be.metadata},_,w),b,L("div",{class:be.actions},f,v,g));return L("div",{key:"edit-form-container",class:be.formNode},S,C)}renderImageMask(e,i){return e?"file"in e?this.renderGenericImageMask(e.file.name,e.file.type):this.renderImageMaskForAttachment(e,i):null}renderGenericImageMask(e,i){const{supportsResizeAttachments:n}=this.viewModel,r=o5e(i),s={[be.itemImageResizable]:n};return L("div",{class:this.classes(be.itemMaskIcon,be.itemMask)},L("img",{title:e,alt:e,src:r,class:this.classes(s,be.itemImage)}))}renderImageMaskForAttachment(e,i){const{supportsResizeAttachments:n}=this.viewModel;if(!e)return null;const{contentType:r,name:s,url:o}=e;if(!n||!rY(r))return this.renderGenericImageMask(s,r);const a=this._getCSSTransform(e),l=a?{transform:a,"image-orientation":"none"}:{},u=`${o}${o!=null&&o.includes("?")?"&":"?"}w=${i}`,h={[be.itemImageResizable]:n};return L("div",{class:this.classes(be.itemMask)},L("img",{styles:l,alt:s,title:s,src:u,class:this.classes(h,be.itemImage)}))}renderFile(e){const{file:i}=e;return L("li",{class:be.item,key:i},L("button",{key:"details-button",bind:this,class:be.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,onclick:()=>this._startEditFile(e),type:"button"},this.renderImageMask(e),L("label",{class:be.itemLabel},L("span",{class:be.itemFilename},i.name||this.messages.noTitle),L("span",{"aria-hidden":"true",class:this.classes(be.itemChevronIcon,$o(this.container)?be.iconLeft:be.iconRight)}))))}renderAttachmentInfo({attachmentInfo:e,displayType:i}){const{viewModel:n,effectiveDisplayType:r}=this,{abilities:s,supportsResizeAttachments:o}=n,{contentType:a,name:l,url:u}=e,h=this.renderImageMask(e,i==="list"?48:400),p=s.editing?L("span",{"aria-hidden":"true",class:this.classes(be.itemChevronIcon,$o(this.container)?be.iconLeft:be.iconRight)}):null,f=[h,r==="preview"&&o&&rY(a)?null:L("label",{class:be.itemLabel},L("span",{class:be.itemFilename},l||this.messages.noTitle),p)],g=s.editing?L("button",{key:"details-button",bind:this,class:be.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},f):L("a",{key:"details-link",class:be.itemButton,href:u??void 0,target:"_blank"},f);return L("li",{class:be.item,key:e},g)}renderAttachmentContainer(){var v;const{effectiveDisplayType:e,viewModel:i,visibleElements:n}=this,{attachmentInfos:r,abilities:s,fileInfos:o}=i,a=!!(r!=null&&r.length),l=!!(o!=null&&o.length),u={[be.containerList]:e!=="preview",[be.containerPreview]:e==="preview"},h=s.editing&&((v=s.operations)!=null&&v.add)&&n.addButton?L("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(be.esriButton,be.esriButtonTertiary,be.addAttachmentButton),type:"button"},L("span",{"aria-hidden":"true",class:this.classes(be.itemAddIcon,be.iconPlus)}),this.messages.add):void 0,p=a?L("ul",{key:"attachments-list",class:be.items},r.toArray().map(b=>this.renderAttachmentInfo({attachmentInfo:b,displayType:e}))):void 0,f=l?L("ul",{key:"file-list",class:be.items},o.toArray().map(b=>this.renderFile(b))):void 0,g=l||a?void 0:L("div",{class:be.empty},this.messages.noAttachments);return L("div",{key:"attachments-container",class:this.classes(be.container,u)},p,f,g,h)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const i=e.target,n=i&&i.files&&i.files.item(0);this._set("selectedFile",n)}_submitDeleteAttachment(e,i){e.preventDefault(),i&&("file"in i?this.deleteFile(i.file):i&&this.deleteAttachment(i))}_submitAddAttachment(e){e.preventDefault(),this.viewModel.filesEnabled?this.addFile():this.addAttachment()}_submitUpdateAttachment(e,i){e.preventDefault(),i&&"file"in i?this.updateFile():this.updateAttachment()}_startEditAttachment(e){const{viewModel:i}=this;i.activeFileInfo=null,i.activeAttachmentInfo=e,i.mode="edit"}_startEditFile(e){const{viewModel:i}=this;i.activeAttachmentInfo=null,i.activeFileInfo=e,i.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e){const{orientationInfo:i}=e;return!this._supportsImageOrientation&&i?[i.rotation?`rotate(${i.rotation}deg)`:"",i.mirrored?"scaleX(-1)":""].join(" "):""}};c([d()],ds.prototype,"abilities",null),c([d()],ds.prototype,"displayType",void 0),c([d({readOnly:!0})],ds.prototype,"effectiveDisplayType",null),c([d()],ds.prototype,"graphic",null),c([d()],ds.prototype,"label",null),c([d(),bt("esri/widgets/Attachments/t9n/Attachments")],ds.prototype,"messages",void 0),c([d(),bt("esri/core/t9n/Units")],ds.prototype,"messagesUnits",void 0),c([d({readOnly:!0})],ds.prototype,"selectedFile",void 0),c([d({readOnly:!0})],ds.prototype,"submitting",void 0),c([d({readOnly:!0})],ds.prototype,"error",void 0),c([d({type:lB})],ds.prototype,"viewModel",void 0),c([d()],ds.prototype,"visibleElements",void 0),c([st("visibleElements")],ds.prototype,"castVisibleElements",null),ds=c([O("esri.widgets.Attachments")],ds);const c5e=ds;let mS=class extends lB{constructor(e){super(e),this.description=null,this.title=null}};c([d()],mS.prototype,"description",void 0),c([d()],mS.prototype,"title",void 0),mS=c([O("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],mS);const cB=mS,u5e={heading:"esri-widget__heading"};function aR({level:t,class:e,...i},n){const r=ede(t);return L(`h${r}`,{...i,class:Hce(u5e.heading,e),role:"heading","aria-level":String(r)},n)}function ede(t){return zo(Math.ceil(t),1,6)}function tvt(t,e=1){return ede(t+e)}const yD="esri-feature-element-info",vD={base:yD,title:`${yD}__title`,description:`${yD}__description`};let qv=class extends qt{constructor(e,i){super(e,i),this.description=null,this.headingLevel=2,this.title=null}render(){return L("div",{class:vD.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?L(aR,{level:this.headingLevel,class:vD.title},e):null}renderDescription(){const{description:e}=this;return e?L("div",{key:"description",class:vD.description},e):null}};c([d()],qv.prototype,"description",void 0),c([d()],qv.prototype,"headingLevel",void 0),c([d()],qv.prototype,"title",void 0),qv=c([O("esri.widgets.Feature.support.FeatureElementInfo")],qv);const lR=qv,d5e={base:"esri-feature-attachments"};let ou=class extends qt{constructor(e,i){super(e,i),this._featureElementInfo=null,this.attachmentsWidget=new c5e,this.headingLevel=2,this.viewModel=new cB}initialize(){this._featureElementInfo=new lR,this.addHandles([X(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title,this.headingLevel]},()=>this._setupFeatureElementInfo(),ut),X(()=>this.viewModel,e=>this.attachmentsWidget.viewModel=e,ut)])}destroy(){var e;this.attachmentsWidget.destroy(),(e=this._featureElementInfo)==null||e.destroy()}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get displayType(){return this.attachmentsWidget.displayType}set displayType(e){this.attachmentsWidget.displayType=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var i;const{attachmentsWidget:e}=this;return L("div",{class:d5e.base},(i=this._featureElementInfo)==null?void 0:i.render(),e==null?void 0:e.render())}_setupFeatureElementInfo(){var r;const{description:e,title:i,headingLevel:n}=this;(r=this._featureElementInfo)==null||r.set({description:e,title:i,headingLevel:n})}};c([d({readOnly:!0})],ou.prototype,"attachmentsWidget",void 0),c([d()],ou.prototype,"description",null),c([d()],ou.prototype,"displayType",null),c([d()],ou.prototype,"graphic",null),c([d()],ou.prototype,"headingLevel",void 0),c([d()],ou.prototype,"title",null),c([d({type:cB})],ou.prototype,"viewModel",void 0),ou=c([O("esri.widgets.Feature.FeatureAttachments")],ou);const h5e=ou,La=t=>{let e=class extends t{destroy(){var i,n;this.destroyed||((i=this._get("handles"))==null||i.destroy(),(n=this._get("updatingHandles"))==null||n.destroy())}get handles(){return this._get("handles")||new wn}get updatingHandles(){return this._get("updatingHandles")||new O_}};return c([d({readOnly:!0})],e.prototype,"handles",null),c([d({readOnly:!0})],e.prototype,"updatingHandles",null),e=c([O("esri.core.HandleOwner")],e),e};let mw=class extends La(_e){};mw=c([O("esri.core.HandleOwner")],mw);let kp=class extends La(_e){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(X(()=>this.creator,i=>{this._destroyContent(),this._createContent(i)},ut))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:i,destroyer:n}=this;e&&i&&(KM(n,{graphic:i}).catch(()=>null),this._set("created",null))}async _createContent(e){const i=this.graphic;if(!i||!e)return;const n=KM(e,{graphic:i}).catch(()=>null);this._loadingPromise=n,this.notifyChange("state");const r=await n;n===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",r))}};c([d({readOnly:!0})],kp.prototype,"created",void 0),c([d()],kp.prototype,"creator",void 0),c([d()],kp.prototype,"destroyer",void 0),c([d({type:en})],kp.prototype,"graphic",void 0),c([d({readOnly:!0})],kp.prototype,"state",null),kp=c([O("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],kp);const XM=kp;function Ln(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${e}'`);return{value:f5e(t[e])}}}function p5e(t){const e=t==null?void 0:t.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function f5e(t){return function(e,...i){p5e(e)?Vy(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...i)}}function cR(t){return e=>{e.hasOwnProperty("_delegatedEventNames")||(e._delegatedEventNames=e._delegatedEventNames?e._delegatedEventNames.slice():[]);const i=e._delegatedEventNames,n=Array.isArray(t)?t:m5e(t);i.push(...n)}}function m5e(t){return t.split(",").map(e=>e.trim())}const tde="calcite-mode-";function g5e(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-mode-name").replace(/\s|'|"/g,"")}function QM(){return g5e().startsWith("dark")}function y5e(){return`${tde}${QM()?"dark":"light"}`}function v5e(t){b5e(t),t.classList.add(y5e())}function b5e(t){Array.from(t.classList).forEach(e=>{e.startsWith(tde)&&t.classList.remove(e)})}function VC(t){return t&&typeof t.render=="function"}function ide(t){return t&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}const bD="esri-feature-content",_D={base:bD,loaderContainer:`${bD}__loader-container`,loader:`${bD}__loader`};let Wv=class extends qt{constructor(e,i){super(e,i),this.viewModel=null,this._addTargetToAnchors=n=>{Array.from(n.querySelectorAll("a")).forEach(r=>{Gue(r.href)&&!r.hasAttribute("target")&&r.setAttribute("target","_blank")})}}get creator(){var e;return(e=this.viewModel)==null?void 0:e.creator}set creator(e){this.viewModel&&(this.viewModel.creator=e)}get graphic(){var e;return(e=this.viewModel)==null?void 0:e.graphic}set graphic(e){this.viewModel&&(this.viewModel.graphic=e)}renderLoading(){return L("div",{class:_D.loaderContainer,key:"loader"},L("div",{class:_D.loader}))}renderCreated(){var i;const e=(i=this.viewModel)==null?void 0:i.created;return e?e instanceof HTMLElement?L("div",{key:e,bind:e,afterCreate:this._attachToNode}):VC(e)?L("div",{key:e},!e.destroyed&&e.render()):L("div",{key:e,innerHTML:e,afterCreate:this._addTargetToAnchors}):null}render(){var i;const e=(i=this.viewModel)==null?void 0:i.state;return L("div",{class:_D.base},e==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const i=this;e.appendChild(i)}};c([d()],Wv.prototype,"creator",null),c([d()],Wv.prototype,"graphic",null),c([d({type:XM})],Wv.prototype,"viewModel",void 0),Wv=c([O("esri.widgets.Feature.FeatureContent")],Wv);const O$=Wv;let Cd=class extends _e{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:i}=this,n=[];return i==null||i.forEach(r=>{if(!(!r.hasOwnProperty("visible")||r.visible))return;const s=r.clone();s.label=que(s,e),n.push(s)}),n}};c([d()],Cd.prototype,"attributes",void 0),c([d({type:[Aae]})],Cd.prototype,"expressionInfos",void 0),c([d()],Cd.prototype,"description",void 0),c([d({type:[Yw]})],Cd.prototype,"fieldInfos",void 0),c([d({readOnly:!0})],Cd.prototype,"formattedFieldInfos",null),c([d()],Cd.prototype,"title",void 0),Cd=c([O("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Cd);const uR=Cd,_5e=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function w5e(t){let e=null;return _5e.some(i=>(i.pattern.test(t)&&(e=i),!!e)),e}function P$(t,e){if(typeof e!="string"||!e)return e;const i=w5e(e);if(!i)return e;const n=e.match(i.pattern),r=n&&n[2],s=Fu(Fu(i.label,{messages:t,hierPart:r}),{appName:i.appName}),o=i.target?` target="${i.target}"`:"",a=i.target==="_blank"?' rel="noreferrer"':"";return e.replace(i.pattern,`<a${o} href="$1"${a}>${s}</a>`)}const wT="esri-feature-fields",nx={base:wT,fieldHeader:`${wT}__field-header`,fieldData:`${wT}__field-data`,fieldDataDate:`${wT}__field-data--date`,esriTable:"esri-widget__table"};let Wl=class extends qt{constructor(e,i){super(e,i),this._featureElementInfo=null,this.viewModel=new uR,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new lR,this.addHandles(X(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),ut))}destroy(){var e;(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get expressionInfos(){return this.viewModel.expressionInfos}set expressionInfos(e){this.viewModel.expressionInfos=e}get fieldInfos(){return this.viewModel.fieldInfos}set fieldInfos(e){this.viewModel.fieldInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}renderFieldInfo(e,i){const{attributes:n}=this.viewModel,r=e.fieldName,s=e.label||r,o=n?n[r]==null?"":n[r]:"",a=!(!e.format||!e.format.dateFormat),l=typeof o=="number"&&!a?this._forceLTR(o):P$(this.messagesURIUtils,o),u={[nx.fieldDataDate]:a};return L("tr",{key:`fields-element-info-row-${r}-${i}`},L("th",{key:`fields-element-info-row-header-${r}-${i}`,class:nx.fieldHeader,innerHTML:s}),L("td",{key:`fields-element-info-row-data-${r}-${i}`,class:this.classes(nx.fieldData,u),innerHTML:l}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?L("table",{class:nx.esriTable,summary:this.messages.fieldsSummary},L("tbody",null,e.map((i,n)=>this.renderFieldInfo(i,n)))):null}render(){var e;return L("div",{class:nx.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){var n;const{description:e,title:i}=this;(n=this._featureElementInfo)==null||n.set({description:e,title:i})}_forceLTR(e){return`&lrm;${e}`}};c([d()],Wl.prototype,"attributes",null),c([d()],Wl.prototype,"description",null),c([d()],Wl.prototype,"expressionInfos",null),c([d()],Wl.prototype,"fieldInfos",null),c([d()],Wl.prototype,"title",null),c([d({type:uR,nonNullable:!0})],Wl.prototype,"viewModel",void 0),c([d(),bt("esri/widgets/Feature/t9n/Feature")],Wl.prototype,"messages",void 0),c([d(),bt("esri/widgets/support/t9n/uriUtils")],Wl.prototype,"messagesURIUtils",void 0),Wl=c([O("esri.widgets.Feature.FeatureFields")],Wl);const nde=Wl,x5e=/^-?(\d+)(\.(\d+))?$/i;function S5e(t,e){return t-e}function E5e(t,e){let i,n;return i=Number(t.toFixed(e)),i<t?n=i+1/10**e:(n=i,i-=1/10**e),i=Number(i.toFixed(e)),n=Number(n.toFixed(e)),[i,n]}function C5e(t,e,i,n,r){const s=I5e(t,e,i,n),o=s.previous==null||s.previous<=r,a=s.next==null||s.next<=r;return o&&a||s.previous+s.next<=2*r}function rde(t){const e=String(t),i=e.match(x5e);if(i&&i[1])return{integer:i[1].split("").length,fractional:i[3]?i[3].split("").length:0};if(e.toLowerCase().includes("e")){const n=e.split("e"),r=n[0],s=n[1];if(r&&s){const o=Number(r);let a=Number(s);const l=a>0;l||(a=Math.abs(a));const u=rde(o);return l?(u.integer+=a,a>u.fractional?u.fractional=0:u.fractional-=a):(u.fractional+=a,a>u.integer?u.integer=1:u.integer-=a),u}}return{integer:0,fractional:0}}function I5e(t,e,i,n){const r={previous:null,next:null};if(i!=null){const s=t-i,o=e-i-s;r.previous=Math.floor(Math.abs(100*o/s))}if(n!=null){const s=n-t,o=n-e-s;r.next=Math.floor(Math.abs(100*o/s))}return r}function cvt(t,e={}){const i=t.slice(0),{tolerance:n=2,strictBounds:r=!1,indexes:s=i.map((o,a)=>a)}=e;s.sort(S5e);for(let o=0;o<s.length;o++){const a=s[o],l=i[a],u=a===0?null:i[a-1],h=a===i.length-1?null:i[a+1],p=rde(l).fractional;if(p){let f,g=0,v=!1;for(;g<=p&&!v;){const b=E5e(l,g);f=r&&o===0?b[1]:b[0],v=C5e(l,f,u,h,n),g++}v&&(i[a]=f)}}return i}const T5e={maximumFractionDigits:20};function k5e(t){return Aa(t,T5e)}var B4;let Og=B4=class extends Y{constructor(t){super(t),this.color=null,this.label=null,this.value=null}writeValue(t,e,i){e[i]=t??0}clone(){return new B4({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};c([d({type:Se,json:{type:[Bt],write:!0}})],Og.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],Og.prototype,"label",void 0),c([d({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],Og.prototype,"value",void 0),c([fe("value")],Og.prototype,"writeValue",null),Og=B4=c([O("esri.renderers.visualVariables.support.ColorStop")],Og);const $5e=Og;function A5e(t,e,i){return Zi(t.map((n,r)=>e.apply(i,[n,r])))}async function M5e(t,e,i){return(await Zi(t.map((n,r)=>e.apply(i,[n,r])))).map(n=>n.value)}function uB(t){return{ok:!0,value:t}}function dB(t){return{ok:!1,error:t}}function O5e(t){return A(t)&&t.ok===!0?t.value:null}function P5e(t){return A(t)&&t.ok===!1?t.error:null}async function dR(t){if(U(t))return{ok:!1,error:new Error("no promise provided")};try{return uB(await t)}catch(e){return dB(e)}}async function uvt(t){try{return uB(await t)}catch(e){return Tu(e),dB(e)}}function sde(t,e){return new $p(t,e)}let $p=class extends _e{get value(){return O5e(this._result)}get error(){return P5e(this._result)}get finished(){return A(this._result)}constructor(e,i){super({}),this._result=null,this._abortHandle=null,this.abort=()=>{this._abortController=Ky(this._abortController)},this.remove=this.abort,this._abortController=new AbortController;const{signal:n}=this._abortController;this.promise=e(n),this.promise.then(r=>{this._result=uB(r),this._cleanup()},r=>{this._result=dB(r),this._cleanup()}),this._abortHandle=Ur(i,this.abort)}normalizeCtorArgs(){return{}}destroy(){this.abort()}_cleanup(){this._abortHandle=bn(this._abortHandle),this._abortController=null}};c([d()],$p.prototype,"value",null),c([d()],$p.prototype,"error",null),c([d()],$p.prototype,"finished",null),c([d()],$p.prototype,"promise",void 0),c([d()],$p.prototype,"_result",void 0),$p=c([O("esri.core.asyncUtils.ReactiveTask")],$p);function hR(){const t=new Float32Array(16);return t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function R5e(t){const e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function L5e(t,e,i,n,r,s,o,a,l,u,h,p,f,g,v,b){const _=new Float32Array(16);return _[0]=t,_[1]=e,_[2]=i,_[3]=n,_[4]=r,_[5]=s,_[6]=o,_[7]=a,_[8]=l,_[9]=u,_[10]=h,_[11]=p,_[12]=f,_[13]=g,_[14]=v,_[15]=b,_}function D5e(t,e){return new Float32Array(t,e,16)}const F5e=hR();Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:F5e,clone:R5e,create:hR,createView:D5e,fromValues:L5e},Symbol.toStringTag,{value:"Module"}));const N5e=(t,e)=>{const i=km(t,e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,1);return Vh(i,i)},z5e=(t,e)=>{const i=km(t,e,0,0,.5-.5*e,0,e,0,.5-.5*e,0,0,e,.5-.5*e,0,0,0,1);return Vh(i,i)},j5e=(t,e)=>{const i=1-e,n=km(t,.2126+.7874*i,.7152-.7152*i,.0722-.0722*i,0,.2126-.2126*i,.7152+.2848*i,.0722-.0722*i,0,.2126-.2126*i,.7152-.7152*i,.0722+.9278*i,0,0,0,0,1);return Vh(n,n)},V5e=(t,e)=>{const i=Math.sin(e*Math.PI/180),n=Math.cos(e*Math.PI/180),r=km(t,.213+.787*n-.213*i,.715-.715*n-.715*i,.072-.072*n+.928*i,0,.213-.213*n+.143*i,.715+.285*n+.14*i,.072-.072*n-.283*i,0,.213-.213*n-.787*i,.715-.715*n+.715*i,.072+.928*n+.072*i,0,0,0,0,1);return Vh(r,r)},U5e=(t,e)=>{const i=1-2*e,n=km(t,i,0,0,e,0,i,0,e,0,0,i,e,0,0,0,1);return Vh(n,n)},B5e=(t,e)=>{const i=km(t,.213+.787*e,.715-.715*e,.072-.072*e,0,.213-.213*e,.715+.285*e,.072-.072*e,0,.213-.213*e,.715-.715*e,.072+.928*e,0,0,0,0,1);return Vh(i,i)},H5e=(t,e)=>{const i=1-e,n=km(t,.393+.607*i,.769-.769*i,.189-.189*i,0,.349-.349*i,.686+.314*i,.168-.168*i,0,.272-.272*i,.534-.534*i,.131+.869*i,0,0,0,0,1);return Vh(n,n)};let ode=class ade{constructor(e,i,n){this.strength=e,this.radius=i,this.threshold=n,this.type="bloom"}interpolate(e,i,n){this.strength=xo(e.strength,i.strength,n),this.radius=xo(e.radius,i.radius,n),this.threshold=xo(e.threshold,i.threshold,n)}clone(){return new ade(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:_E(this.radius),strength:this.strength,threshold:this.threshold}}},lde=class cde{constructor(e){this.radius=e,this.type="blur"}interpolate(e,i,n){this.radius=Math.round(xo(e.radius,i.radius,n))}clone(){return new cde(this.radius)}toJSON(){return{type:"blur",radius:_E(this.radius)}}},H4=class ude{constructor(e,i){this.type=e,this.amount=i,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,n){this.amount=xo(e.amount,i.amount,n),this._updateMatrix()}clone(){return new ude(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const e=this._colorMatrix||hR();switch(this.type){case"brightness":this._colorMatrix=N5e(e,this.amount);break;case"contrast":this._colorMatrix=z5e(e,this.amount);break;case"grayscale":this._colorMatrix=j5e(e,this.amount);break;case"invert":this._colorMatrix=U5e(e,this.amount);break;case"saturate":this._colorMatrix=B5e(e,this.amount);break;case"sepia":this._colorMatrix=H5e(e,this.amount)}}},dde=class hde{constructor(e,i,n,r){this.offsetX=e,this.offsetY=i,this.blurRadius=n,this.color=r,this.type="drop-shadow"}interpolate(e,i,n){this.offsetX=xo(e.offsetX,i.offsetX,n),this.offsetY=xo(e.offsetY,i.offsetY,n),this.blurRadius=xo(e.blurRadius,i.blurRadius,n),this.color[0]=Math.round(xo(e.color[0],i.color[0],n)),this.color[1]=Math.round(xo(e.color[1],i.color[1],n)),this.color[2]=Math.round(xo(e.color[2],i.color[2],n)),this.color[3]=xo(e.color[3],i.color[3],n)}clone(){return new hde(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const e=[...this.color];return e[3]*=255,{type:"drop-shadow",xoffset:_E(this.offsetX),yoffset:_E(this.offsetY),blurRadius:_E(this.blurRadius),color:e}}},pde=class fde{constructor(e){this.angle=e,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(e,i,n){this.angle=xo(e.angle,i.angle,n),this._updateMatrix()}clone(){return new fde(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const e=this._colorMatrix||hR();this._colorMatrix=V5e(e,this.angle)}},mde=class gde{constructor(e){this.amount=e,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(e,i,n){this.amount=xo(e.amount,i.amount,n)}clone(){return new gde(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}};function xo(t,e,i){return t+(e-t)*i}function _E(t){return Math.round(1e3*ju(t))/1e3}function G5e(t){switch(t.type){case"grayscale":case"sepia":case"invert":return new H4(t.type,0);case"saturate":case"brightness":case"contrast":return new H4(t.type,1);case"opacity":return new mde(1);case"hue-rotate":return new pde(0);case"blur":return new lde(0);case"drop-shadow":return new dde(0,0,0,[...c9("transparent")]);case"bloom":return new ode(0,0,1)}}function q5e(t,e){const i=t.length>e.length?t:e;return(t.length>e.length?e:t).every((n,r)=>n.type===i[r].type)}function W5e(t,e){const i=t.length>e.length?t:e,n=t.length>e.length?e:t;for(let r=n.length;r<i.length;r++)n.push(G5e(i[r]))}function J5e(t){const e=t[0];return!!e&&"type"in e}var oY,aY,G4={};function yde(t){if(!t||t.length===0)return null;if(typeof t=="string"){const i=lY(t);return i&&i.length!==0?i:null}const e=t.map(i=>{if(!Number.isFinite(i.scale)||i.scale<=0)throw new N("effect:invalid-scale","scale must be finite and greater than 0",{stop:i});return{scale:i.scale,effects:lY(i.value)}});e.sort((i,n)=>n.effects.length-i.effects.length);for(let i=0;i<e.length-1;i++){if(!q5e(e[i].effects,e[i+1].effects))throw new N("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:e[i].effects,b:e[i+1].effects});W5e(e[i].effects,e[i+1].effects)}return e.sort((i,n)=>n.scale-i.scale),e}function lY(t){let e;if(!t)return[];try{e=G4.parse(t)}catch(i){throw new N("effect:invalid-syntax","Invalid effect syntax",{value:t,error:i})}return e.map(i=>Y5e(i))}function Y5e(t){try{switch(t.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return Z5e(t);case"opacity":return K5e(t);case"hue-rotate":return X5e(t);case"blur":return Q5e(t);case"drop-shadow":return eNe(t);case"bloom":return tNe(t)}}catch(e){throw e.details.filter=t,e}throw new N("effect:unknown-effect",`Effect '${t.name}' is not supported`,{effect:t})}function Z5e(t){let e=1;return n1(t.parameters,1),t.parameters.length===1&&(e=mc(t.parameters[0])),new H4(t.name,e)}function K5e(t){let e=1;return n1(t.parameters,1),t.parameters.length===1&&(e=mc(t.parameters[0])),new mde(e)}function X5e(t){let e=0;return n1(t.parameters,1),t.parameters.length===1&&(e=aNe(t.parameters[0])),new pde(e)}function Q5e(t){let e=0;return n1(t.parameters,1),t.parameters.length===1&&(e=fB(t.parameters[0]),JI(e,t.parameters[0])),new lde(e)}function eNe(t){const e=[];let i=null;for(const n of t.parameters)if(n.type==="color"){if(e.length&&Object.freeze(e),i)throw new N("effect:type-error","Accepts only one color",{});i=lNe(n)}else{const r=fB(n);if(Object.isFrozen(e))throw new N("effect:type-error","<length> parameters not consecutive",{lengths:e});e.push(r),e.length===3&&JI(r,n)}if(e.length<2||e.length>3)throw new N("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${e.length}}`,{lengths:e});return new dde(e[0],e[1],e[2]||0,i||vde("black"))}function tNe(t){let e=1,i=0,n=0;return n1(t.parameters,3),t.parameters[0]&&(e=mc(t.parameters[0])),t.parameters[1]&&(i=fB(t.parameters[1]),JI(i,t.parameters[1])),t.parameters[2]&&(n=mc(t.parameters[2])),new ode(e,i,n)}function n1(t,e){if(t.length>e)throw new N("effect:type-error",`Function supports up to ${e} parameters, Actual: ${t.length}`,{parameters:t})}function pR(t){if(t.type==="color")return"<color>";if(t.unit){if(pB[t.unit])return"<length>";if(hB[t.unit])return"<angle>";if(t.unit==="%")return"<percentage>"}return"<double>"}function JI(t,e){if(t<0)throw new N("effect:type-error",`Negative values are not allowed, Actual: ${t}`,{term:e})}function iNe(t){if(t.type!=="quantity"||t.unit!==null)throw new N("effect:type-error",`Expected <double>, Actual: ${pR(t)}`,{term:t})}function nNe(t){if(t.type!=="quantity"||t.unit!==null&&t.unit!=="%")throw new N("effect:type-error",`Expected <double> or <percentage>, Actual: ${pR(t)}`,{term:t})}aY=function(){function t(r,s){function o(){this.constructor=r}o.prototype=s.prototype,r.prototype=new o}function e(r,s,o,a){var l=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(l,e.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function i(r,s,o){return o=o||" ",r.length>s?r:(s-=r.length,r+(o+=o.repeat(s)).slice(0,s))}function n(r,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,u={start:M1},h=M1,p="none",f=")",g=",",v="(",b="%",_="px",w="cm",S="mm",C="in",$="pt",M="pc",P="deg",k="rad",D="grad",z="turn",B="#",j=".",K="e",ie=/^[ \t\n\r]/,te=/^[a-z\-]/,me=/^[0-9a-fA-F]/,Ie=/^[+\-]/,Me=/^[0-9]/,oe=$l("none"),ge=Sn("none",!1),he=Sn(")",!1),et=Sn(",",!1),wt=$l("whitespace"),pr=Bm([" ","	",`
`,"\r"],!1,!1),xn=$l("function"),fr=Sn("(",!1),Ar=$l("identifier"),Qs=Bm([["a","z"],"-"],!1,!1),Tl=$l("percentage"),Fm=Sn("%",!1),E1=$l("length"),Nm=Sn("px",!1),C1=Sn("cm",!1),W0=Sn("mm",!1),I1=Sn("in",!1),T1=Sn("pt",!1),J0=Sn("pc",!1),Y0=$l("angle"),k1=Sn("deg",!1),$1=Sn("rad",!1),kl=Sn("grad",!1),Wh=Sn("turn",!1),Z0=$l("number"),K0=$l("color"),zm=Sn("#",!1),jm=Bm([["0","9"],["a","f"],["A","F"]],!1,!1),Vm=Bm(["+","-"],!1,!1),Ho=Bm([["0","9"]],!1,!1),X0=Sn(".",!1),bL=Sn("e",!1),_L=function(){return[]},wL=function(V,ne){return{type:"function",name:V,parameters:ne||[]}},xL=function(V,ne){return ne.length>0?ZL(V,ne,3):[V]},SL=function(V){return{type:"quantity",value:V.value,unit:V.unit}},EL=function(V){return{type:"color",colorType:V.type,value:V.value}},CL=function(V){return V},IL=function(){return ev()},TL=function(V){return{value:V,unit:"%"}},v2=function(V){return{value:V,unit:"px"}},kL=function(V){return{value:V,unit:"cm"}},$L=function(V){return{value:V,unit:"mm"}},AL=function(V){return{value:V,unit:"in"}},b2=function(V){return{value:V,unit:"pt"}},ML=function(V){return{value:V,unit:"pc"}},OL=function(V){return{value:V,unit:"deg"}},PL=function(V){return{value:V,unit:"rad"}},RL=function(V){return{value:V,unit:"grad"}},_2=function(V){return{value:V,unit:"turn"}},LL=function(V){return{value:V,unit:null}},w2=function(){return{type:"hex",value:ev()}},DL=function(V){return{type:"function",value:V}},FL=function(){return{type:"named",value:ev()}},NL=function(){return parseFloat(ev())},Z=0,di=0,Q0=[{line:1,column:1}],eo=0,Um=[],$e=0;if("startRule"in s){if(!(s.startRule in u))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');h=u[s.startRule]}function ev(){return r.substring(di,Z)}function Sn(V,ne){return{type:"literal",text:V,ignoreCase:ne}}function Bm(V,ne,ce){return{type:"class",parts:V,inverted:ne,ignoreCase:ce}}function zL(){return{type:"end"}}function $l(V){return{type:"other",description:V}}function x2(V){var ne,ce=Q0[V];if(ce)return ce;for(ne=V-1;!Q0[ne];)ne--;for(ce={line:(ce=Q0[ne]).line,column:ce.column};ne<V;)r.charCodeAt(ne)===10?(ce.line++,ce.column=1):ce.column++,ne++;return Q0[V]=ce,ce}function A1(V,ne){var ce=x2(V),tt=x2(ne);return{source:l,start:{offset:V,line:ce.line,column:ce.column},end:{offset:ne,line:tt.line,column:tt.column}}}function Ye(V){Z<eo||(Z>eo&&(eo=Z,Um=[]),Um.push(V))}function S2(V,ne,ce){return new e(e.buildMessage(V,ne),V,ne,ce)}function M1(){var V;return(V=jL())===a&&(V=VL()),V}function jL(){var V,ne;return $e++,V=Z,En(),r.substr(Z,4)===p?(ne=p,Z+=4):(ne=a,$e===0&&Ye(ge)),ne!==a?(En(),di=V,V=_L()):(Z=V,V=a),$e--,V===a&&$e===0&&Ye(oe),V}function VL(){var V,ne;if(V=[],(ne=O1())!==a)for(;ne!==a;)V.push(ne),ne=O1();else V=a;return V}function O1(){var V,ne,ce,tt;return V=Z,En(),(ne=BL())!==a?(En(),(ce=UL())===a&&(ce=null),En(),r.charCodeAt(Z)===41?(tt=f,Z++):(tt=a,$e===0&&Ye(he)),tt!==a?(En(),di=V,V=wL(ne,ce)):(Z=V,V=a)):(Z=V,V=a),V}function UL(){var V,ne,ce,tt,Vn,wi,io,tv;if(V=Z,(ne=P1())!==a){for(ce=[],tt=Z,Vn=En(),r.charCodeAt(Z)===44?(wi=g,Z++):(wi=a,$e===0&&Ye(et)),wi===a&&(wi=null),io=En(),(tv=P1())!==a?tt=Vn=[Vn,wi,io,tv]:(Z=tt,tt=a);tt!==a;)ce.push(tt),tt=Z,Vn=En(),r.charCodeAt(Z)===44?(wi=g,Z++):(wi=a,$e===0&&Ye(et)),wi===a&&(wi=null),io=En(),(tv=P1())!==a?tt=Vn=[Vn,wi,io,tv]:(Z=tt,tt=a);di=V,V=xL(ne,ce)}else Z=V,V=a;return V}function P1(){var V,ne;return V=Z,(ne=HL())===a&&(ne=GL())===a&&(ne=qL())===a&&(ne=WL()),ne!==a&&(di=V,ne=SL(ne)),(V=ne)===a&&(V=Z,(ne=JL())!==a&&(di=V,ne=EL(ne)),V=ne),V}function En(){var V,ne;for($e++,V=[],ie.test(r.charAt(Z))?(ne=r.charAt(Z),Z++):(ne=a,$e===0&&Ye(pr));ne!==a;)V.push(ne),ie.test(r.charAt(Z))?(ne=r.charAt(Z),Z++):(ne=a,$e===0&&Ye(pr));return $e--,ne=a,$e===0&&Ye(wt),V}function BL(){var V,ne,ce;return $e++,V=Z,(ne=E2())!==a?(r.charCodeAt(Z)===40?(ce=v,Z++):(ce=a,$e===0&&Ye(fr)),ce!==a?(di=V,V=CL(ne)):(Z=V,V=a)):(Z=V,V=a),$e--,V===a&&(ne=a,$e===0&&Ye(xn)),V}function E2(){var V,ne,ce;if($e++,V=Z,ne=[],te.test(r.charAt(Z))?(ce=r.charAt(Z),Z++):(ce=a,$e===0&&Ye(Qs)),ce!==a)for(;ce!==a;)ne.push(ce),te.test(r.charAt(Z))?(ce=r.charAt(Z),Z++):(ce=a,$e===0&&Ye(Qs));else ne=a;return ne!==a&&(di=V,ne=IL()),$e--,(V=ne)===a&&(ne=a,$e===0&&Ye(Ar)),V}function HL(){var V,ne,ce;return $e++,V=Z,En(),(ne=to())!==a?(r.charCodeAt(Z)===37?(ce=b,Z++):(ce=a,$e===0&&Ye(Fm)),ce!==a?(di=V,V=TL(ne)):(Z=V,V=a)):(Z=V,V=a),$e--,V===a&&$e===0&&Ye(Tl),V}function GL(){var V,ne,ce;return $e++,V=Z,En(),(ne=to())!==a?(r.substr(Z,2)===_?(ce=_,Z+=2):(ce=a,$e===0&&Ye(Nm)),ce!==a?(di=V,V=v2(ne)):(Z=V,V=a)):(Z=V,V=a),V===a&&(V=Z,En(),(ne=to())!==a?(r.substr(Z,2)===w?(ce=w,Z+=2):(ce=a,$e===0&&Ye(C1)),ce!==a?(di=V,V=kL(ne)):(Z=V,V=a)):(Z=V,V=a),V===a&&(V=Z,En(),(ne=to())!==a?(r.substr(Z,2)===S?(ce=S,Z+=2):(ce=a,$e===0&&Ye(W0)),ce!==a?(di=V,V=$L(ne)):(Z=V,V=a)):(Z=V,V=a),V===a&&(V=Z,En(),(ne=to())!==a?(r.substr(Z,2)===C?(ce=C,Z+=2):(ce=a,$e===0&&Ye(I1)),ce!==a?(di=V,V=AL(ne)):(Z=V,V=a)):(Z=V,V=a),V===a&&(V=Z,En(),(ne=to())!==a?(r.substr(Z,2)===$?(ce=$,Z+=2):(ce=a,$e===0&&Ye(T1)),ce!==a?(di=V,V=b2(ne)):(Z=V,V=a)):(Z=V,V=a),V===a&&(V=Z,En(),(ne=to())!==a?(r.substr(Z,2)===M?(ce=M,Z+=2):(ce=a,$e===0&&Ye(J0)),ce!==a?(di=V,V=ML(ne)):(Z=V,V=a)):(Z=V,V=a)))))),$e--,V===a&&$e===0&&Ye(E1),V}function qL(){var V,ne,ce;return $e++,V=Z,(ne=to())!==a?(r.substr(Z,3)===P?(ce=P,Z+=3):(ce=a,$e===0&&Ye(k1)),ce!==a?(di=V,V=OL(ne)):(Z=V,V=a)):(Z=V,V=a),V===a&&(V=Z,(ne=to())!==a?(r.substr(Z,3)===k?(ce=k,Z+=3):(ce=a,$e===0&&Ye($1)),ce!==a?(di=V,V=PL(ne)):(Z=V,V=a)):(Z=V,V=a),V===a&&(V=Z,(ne=to())!==a?(r.substr(Z,4)===D?(ce=D,Z+=4):(ce=a,$e===0&&Ye(kl)),ce!==a?(di=V,V=RL(ne)):(Z=V,V=a)):(Z=V,V=a),V===a&&(V=Z,(ne=to())!==a?(r.substr(Z,4)===z?(ce=z,Z+=4):(ce=a,$e===0&&Ye(Wh)),ce!==a?(di=V,V=_2(ne)):(Z=V,V=a)):(Z=V,V=a)))),$e--,V===a&&(ne=a,$e===0&&Ye(Y0)),V}function WL(){var V,ne;return $e++,V=Z,En(),(ne=to())!==a?(di=V,V=LL(ne)):(Z=V,V=a),$e--,V===a&&$e===0&&Ye(Z0),V}function JL(){var V,ne,ce,tt;if($e++,V=Z,r.charCodeAt(Z)===35?(ne=B,Z++):(ne=a,$e===0&&Ye(zm)),ne!==a){if(ce=[],me.test(r.charAt(Z))?(tt=r.charAt(Z),Z++):(tt=a,$e===0&&Ye(jm)),tt!==a)for(;tt!==a;)ce.push(tt),me.test(r.charAt(Z))?(tt=r.charAt(Z),Z++):(tt=a,$e===0&&Ye(jm));else ce=a;ce!==a?(di=V,V=w2()):(Z=V,V=a)}else Z=V,V=a;return V===a&&(V=Z,(ne=O1())!==a&&(di=V,ne=DL(ne)),(V=ne)===a&&(V=Z,(ne=E2())!==a&&(di=V,ne=FL()),V=ne)),$e--,V===a&&(ne=a,$e===0&&Ye(K0)),V}function to(){var V,ne,ce,tt,Vn,wi,io;for(V=Z,Ie.test(r.charAt(Z))?(r.charAt(Z),Z++):$e===0&&Ye(Vm),ne=Z,ce=[],Me.test(r.charAt(Z))?(tt=r.charAt(Z),Z++):(tt=a,$e===0&&Ye(Ho));tt!==a;)ce.push(tt),Me.test(r.charAt(Z))?(tt=r.charAt(Z),Z++):(tt=a,$e===0&&Ye(Ho));if(r.charCodeAt(Z)===46?(tt=j,Z++):(tt=a,$e===0&&Ye(X0)),tt!==a){if(Vn=[],Me.test(r.charAt(Z))?(wi=r.charAt(Z),Z++):(wi=a,$e===0&&Ye(Ho)),wi!==a)for(;wi!==a;)Vn.push(wi),Me.test(r.charAt(Z))?(wi=r.charAt(Z),Z++):(wi=a,$e===0&&Ye(Ho));else Vn=a;Vn!==a?ne=ce=[ce,tt,Vn]:(Z=ne,ne=a)}else Z=ne,ne=a;if(ne===a)if(ne=[],Me.test(r.charAt(Z))?(ce=r.charAt(Z),Z++):(ce=a,$e===0&&Ye(Ho)),ce!==a)for(;ce!==a;)ne.push(ce),Me.test(r.charAt(Z))?(ce=r.charAt(Z),Z++):(ce=a,$e===0&&Ye(Ho));else ne=a;if(ne!==a){if(ce=Z,r.charCodeAt(Z)===101?(tt=K,Z++):(tt=a,$e===0&&Ye(bL)),tt!==a){if(Ie.test(r.charAt(Z))?(Vn=r.charAt(Z),Z++):(Vn=a,$e===0&&Ye(Vm)),Vn===a&&(Vn=null),wi=[],Me.test(r.charAt(Z))?(io=r.charAt(Z),Z++):(io=a,$e===0&&Ye(Ho)),io!==a)for(;io!==a;)wi.push(io),Me.test(r.charAt(Z))?(io=r.charAt(Z),Z++):(io=a,$e===0&&Ye(Ho));else wi=a;wi!==a?ce=tt=[tt,Vn,wi]:(Z=ce,ce=a)}else Z=ce,ce=a;ce===a&&(ce=null),di=V,V=NL()}else Z=V,V=a;return V}function YL(V,ne){return V.map(function(ce){return ce[ne]})}function ZL(V,ne,ce){return[V].concat(YL(ne,ce))}if((o=h())!==a&&Z===r.length)return o;throw o!==a&&Z<r.length&&Ye(zL()),S2(Um,eo<r.length?r.charAt(eo):null,eo<r.length?A1(eo,eo+1):A1(eo,eo))}return t(e,Error),e.prototype.format=function(r){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<r.length;o++)if(r[o].source===this.location.source){a=r[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,u=this.location.source+":"+l.line+":"+l.column;if(a){var h=this.location.end,p=i("",l.line.toString().length," "),f=a[l.line-1],g=(l.line===h.line?h.column:f.length+1)-l.column||1;s+=`
 --> `+u+`
`+p+` |
`+l.line+" | "+f+`
`+p+" | "+i("",l.column-1," ")+i("",g,"^")}else s+=`
 at `+u}return s},e.buildMessage=function(r,s){var o={literal:function(g){return'"'+l(g.text)+'"'},class:function(g){var v=g.parts.map(function(b){return Array.isArray(b)?u(b[0])+"-"+u(b[1]):u(b)});return"["+(g.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(g){return g.description}};function a(g){return g.charCodeAt(0).toString(16).toUpperCase()}function l(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+a(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+a(v)})}function u(g){return g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+a(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+a(v)})}function h(g){return o[g.type](g)}function p(g){var v,b,_=g.map(h);if(_.sort(),_.length>0){for(v=1,b=1;v<_.length;v++)_[v-1]!==_[v]&&(_[b]=_[v],b++);_.length=b}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function f(g){return g?'"'+l(g)+'"':"end of input"}return"Expected "+p(r)+" but "+f(s)+" found."},{SyntaxError:e,parse:n}},(oY={get exports(){return G4},set exports(t){G4=t}}).exports&&(oY.exports=aY());const hB={deg:1,grad:.9,rad:180/Math.PI,turn:360};function rNe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&hB[t.unit]!=null))throw new N("effect:type-error",`Expected <angle>, Actual: ${pR(t)}`,{term:t})}const pB={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function sNe(t){if(t.type!=="quantity"||!(t.value===0&&t.unit===null||t.unit&&pB[t.unit]!=null))throw new N("effect:type-error",`Expected <length>, Actual: ${pR(t)}`,{term:t})}function mc(t){nNe(t);const e=t.value;return JI(e,t),t.unit==="%"?.01*e:e}function oNe(t){return iNe(t),JI(t.value,t),t.value}function aNe(t){return rNe(t),t.value*hB[t.unit]||0}function fB(t){return sNe(t),t.value*pB[t.unit]||0}function lNe(t){switch(t.colorType){case"hex":return G$e(t.value);case"named":return vde(t.value);case"function":return dNe(t.value)}}function vde(t){if(!Pae(t))throw new N("effect:unknown-color",`color '${t}' isn't valid`,{namedColor:t});return H$e(t)}const cNe=/^rgba?/i,uNe=/^hsla?/i;function dNe(t){if(n1(t.parameters,4),cNe.test(t.name))return[mc(t.parameters[0]),mc(t.parameters[1]),mc(t.parameters[2]),t.parameters[3]?mc(t.parameters[3]):1];if(uNe.test(t.name))return Rae(oNe(t.parameters[0]),mc(t.parameters[1]),mc(t.parameters[2]),t.parameters[3]?mc(t.parameters[3]):1);throw new N("effect:syntax-error",`Invalid color function '${t.name}'`,{colorFunction:t})}function mB(t,e,i){var n;try{return pNe(t)}catch(r){(n=i==null?void 0:i.messages)==null||n.push(r)}return null}function gB(t,e,i,n){try{const r=hNe(t);rr(i,r,e)}catch(r){n.messages&&n.messages.push(r)}}function hNe(t){const e=yde(t);return e?J5e(e)?e.map(i=>i.toJSON()):e.map(({scale:i,effects:n})=>({scale:i,value:n.map(r=>r.toJSON())})):null}function pNe(t){if(!t||t.length===0)return null;if(fNe(t)){const e=[];for(const i of t)e.push({scale:i.scale,value:q4(i.value)});return e}return q4(t)}function fNe(t){const e=t[0];return!!e&&"scale"in e}function q4(t){if(!t||!t.length)return"";const e=[];for(const i of t){let n=[];switch(i.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":n=[od(i,"amount")];break;case"blur":n=[od(i,"radius","pt")];break;case"hue-rotate":n=[od(i,"angle","deg")];break;case"drop-shadow":n=[od(i,"xoffset","pt"),od(i,"yoffset","pt"),od(i,"blurRadius","pt"),mNe(i,"color")];break;case"bloom":n=[od(i,"strength"),od(i,"radius","pt"),od(i,"threshold")]}const r=`${i.type}(${n.filter(Boolean).join(" ")})`;yde(r),e.push(r)}return e.join(" ")}function od(t,e,i){if(t[e]==null)throw new N("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});return i?t[e]+i:""+t[e]}function mNe(t,e){if(t[e]==null)throw new N("effect:missing-parameter",`Missing parameter '${e}' in ${t.type} effect`,{effect:t});const i=t[e];return`rgba(${i[0]||0}, ${i[1]||0}, ${i[2]||0}, ${i[3]/255||0})`}const wD=-3;var uf;(function(t){t[t.ALL=0]="ALL",t[t.SOME=1]="SOME"})(uf||(uf={}));let hvt=class{constructor(e,i,n){this._namespace=e,this._storage=i,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",n&&(this._storage.registerRemoveFunc(this._namespace,n),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(e,i,n,r=0){this._storage.put(this._namespace+e,i,n,r)}get(e){const i=this._storage.get(this._namespace+e);return i===void 0?++this._miss:++this._hit,i}pop(e){const i=this._storage.pop(this._namespace+e);return i===void 0?++this._miss:++this._hit,i}updateSize(e,i,n){this._storage.updateSize(this._namespace+e,i,n)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}},bde=class{constructor(e=10485760){this._maxSize=e,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Xy,this._users=new Xy}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(e){this._users.push(e)}deregister(e){this._users.removeUnordered(e)}registerRemoveFunc(e,i){this._removeFuncs.push([e,i])}deregisterRemoveFunc(e){this._removeFuncs.filterInPlace(i=>i[0]!==e)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()}put(e,i,n,r){const s=this._db.get(e);if(s&&(this._size-=s.size,this._db.delete(e),s.entry!==i&&this._notifyRemove(e,s.entry,uf.ALL)),n>this._maxSize)return void this._notifyRemove(e,i,uf.ALL);if(i===void 0)return void console.warn("Refusing to cache undefined entry ");if(!n||n<0)return void console.warn("Refusing to cache entry with invalid size "+n);const o=1+Math.max(r,wD)-wD;this._db.set(e,{entry:i,size:n,lifetime:o,lives:o}),this._size+=n,this._checkSizeLimit()}updateSize(e,i,n){const r=this._db.get(e);if(r&&r.entry===i){for(this._size-=r.size;n>this._maxSize;){const s=this._notifyRemove(e,i,uf.SOME);if(!(A(s)&&s>0))return void this._db.delete(e);n=s}r.size=n,this._size+=n,this._checkSizeLimit()}}pop(e){const i=this._db.get(e);if(i)return this._size-=i.size,this._db.delete(e),++this._hit,i.entry;++this._miss}get(e){const i=this._db.get(e);if(i!==void 0)return this._db.delete(e),i.lives=i.lifetime,this._db.set(e,i),++this._hit,i.entry;++this._miss}getStats(){const e={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},n=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;n[l]=(n[l]||0)+o.size,this._users.forAll(u=>{const h=u.namespace;if(a.startsWith(h)){const p=i[h]||0;i[h]=p+o.size}})});const r={};this._users.forAll(o=>{const a=o.namespace;if(!isNaN(o.hitRate)&&o.hitRate>0){const l=i[a]||0;i[a]=l,r[a]=Math.round(100*o.hitRate)+"%"}else r[a]="0%"});const s=Object.keys(i);s.sort((o,a)=>i[a]-i[o]),s.forEach(o=>e[o]=Math.round(i[o]/2**20)+"MB / "+r[o]);for(let o=n.length-1;o>=0;--o){const a=n[o];a&&(e["Priority "+(o+wD-1)]=Math.round(a/this.size*100)+"%")}return e}resetStats(){this._hit=this._miss=0,this._users.forAll(e=>e.resetHitRate())}clear(e){this._db.forEach((i,n)=>{n.startsWith(e)&&(this._size-=i.size,this._db.delete(n),this._notifyRemove(n,i.entry,uf.ALL))})}clearAll(){this._db.forEach((e,i)=>this._notifyRemove(i,e.entry,uf.ALL)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(e,i,n){let r;return this._removeFuncs.some(s=>{if(e.startsWith(s[0])){const o=s[1](i,n);return typeof o=="number"&&(r=o),!0}return!1}),r}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[e,i]of this._db){if(this._db.delete(e),i.lives<=1){this._size-=i.size;const n=this._notifyRemove(e,i.entry,uf.SOME);A(n)&&n>0&&(this._size+=n,i.lives=i.lifetime,i.size=n,this._db.set(e,i))}else--i.lives,this._db.set(e,i);if(this._size<=.9*this.maxSize)return}}},W4=class{constructor(e,i){this._storage=new bde,this._storage.maxSize=e,i&&this._storage.registerRemoveFunc("",i)}put(e,i){this._storage.put(e,i,1,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}};function gNe(t){return typeof t=="function"}function gvt(t,e,i,n){return gNe(t)?t(e,i,n):t}function yvt(t){return[t.r,t.g,t.b,t.a]}const yNe=` /-,
`;function cY(t){let e=t.length;for(;e--;)if(!yNe.includes(t.charAt(e)))return!1;return!0}function vNe(t,e){const i=[];let n=0,r=-1;do if(r=t.indexOf("[",n),r>=n){if(r>n){const s=t.substr(n,r-n);i.push([s,null,cY(s)])}if(n=r+1,r=t.indexOf("]",n),r>=n){if(r>n){const s=e[t.substr(n,r-n)];s&&i.push([null,s,!1])}n=r+1}}while(r!==-1);if(n<t.length-1){const s=t.substr(n);i.push([s,null,cY(s)])}return i}function bNe(t,e,i){let n="",r=null;for(const s of e){const[o,a,l]=s;if(o)l?r=o:(r&&(n+=r,r=null),n+=o);else{const u=t.attributes[a];u&&(r&&(n+=r,r=null),n+=u)}}return _Ne(n,i)}function vvt(t,e,i){const n=vNe(e,t);return r=>bNe(r,n,i)}function _Ne(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function bvt(t,e,i,n,r,s,o=!0){const a=e/r,l=i/s,u=Math.ceil(a/2),h=Math.ceil(l/2);for(let p=0;p<s;p++)for(let f=0;f<r;f++){const g=4*(f+(o?s-p-1:p)*r);let v=0,b=0,_=0,w=0,S=0,C=0,$=0;const M=(p+.5)*l;for(let P=Math.floor(p*l);P<(p+1)*l;P++){const k=Math.abs(M-(P+.5))/h,D=(f+.5)*a,z=k*k;for(let B=Math.floor(f*a);B<(f+1)*a;B++){let j=Math.abs(D-(B+.5))/u;const K=Math.sqrt(z+j*j);K>=-1&&K<=1&&(v=2*K*K*K-3*K*K+1,v>0&&(j=4*(B+P*e),$+=v*t[j+3],_+=v,t[j+3]<255&&(v=v*t[j+3]/250),w+=v*t[j],S+=v*t[j+1],C+=v*t[j+2],b+=v))}}n[g]=w/b,n[g+1]=S/b,n[g+2]=C/b,n[g+3]=$/_}}function _de(t){return t?{r:t[0],g:t[1],b:t[2],a:t[3]/255}:{r:0,g:0,b:0,a:0}}function fR(t){var e;return((e=t.data)==null?void 0:e.symbol)??null}function eO(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function tO(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function wde(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function iO(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const _vt=(t,e=0)=>t==null||isNaN(t)?e:t,wvt=t=>t.tintColor?_de(t.tintColor):{r:255,g:255,b:255,a:1},xvt=t=>{if(!t)return!1;for(const e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function Svt(){return q(()=>import("./geometryEngineJSON-f583f472.js"),["assets/geometryEngineJSON-f583f472.js","assets/geometryEngineBase-e1a33b0a.js","assets/geometryEngineJSON-eda070ea.js"])}function Evt(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Cvt(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function Ivt(t){let e="",i="";if(t){const n=t.toLowerCase();n.includes("italic")?e="italic":n.includes("oblique")&&(e="oblique"),n.includes("bold")?i="bold":n.includes("light")&&(i="lighter")}return{style:e,weight:i}}function Tvt(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function uY(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=uY(e);if(i!=null)return i}break;case"CIMTextSymbol":return uY(t.symbol);case"CIMSolidFill":return t.color}}function dY(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{const e=t.symbolLayers;if(e)for(const i of e){const n=dY(i);if(n!=null)return n}break}case"CIMTextSymbol":return dY(t.symbol);case"CIMSolidStroke":case"CIMSolidFill":return t.color}}function hY(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(const e of t.symbolLayers){const i=hY(e);if(i!==void 0)return i}break;case"CIMTextSymbol":return hY(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function kvt(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function $vt(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function Avt(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}const Mvt=t=>t.includes("data:image/svg+xml");function Ovt(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function wNe(t){const e=fR(t);if((e==null?void 0:e.type)==="CIMTextSymbol")return e.height??0;let i=0;if(e!=null&&e.symbolLayers)for(const n of e.symbolLayers)eO(n)&&n.size!=null&&n.size>i?i=n.size:tO(n)&&n.width!=null&&n.width>i?i=n.width:wde(n);return i}function Pvt(t,e,i){if(!t)return;const n=fR(t),r=wNe(t);if(r===0)return void xNe(n,e);yB(n,e/r,!1,i)}function xNe(t,e){if(t)if(t.type!=="CIMTextSymbol"){if(t.symbolLayers)for(const i of t.symbolLayers)switch(i.type){case"CIMPictureMarker":case"CIMVectorMarker":i.size=e;break;case"CIMPictureStroke":case"CIMSolidStroke":i.width=e}}else t.height=e}function yB(t,e,i,n){if(t)if(t.type!=="CIMTextSymbol"){if(i&&t.effects)for(const r of t.effects)CNe(r,e);if(t.symbolLayers)for(const r of t.symbolLayers)switch(r.type){case"CIMPictureMarker":case"CIMVectorMarker":SNe(r,e,n);break;case"CIMPictureStroke":case"CIMSolidStroke":!(n!=null&&n.preserveOutlineWidth)&&r.width&&(r.width*=e);break;case"CIMPictureFill":r.height&&(r.height*=e),r.offsetX&&(r.offsetX*=e),r.offsetY&&(r.offsetY*=e);break;case"CIMHatchFill":yB(r.lineSymbol,e,!0,{...n,preserveOutlineWidth:!1}),r.offsetX&&(r.offsetX*=e),r.offsetY&&(r.offsetY*=e),r.separation&&(r.separation*=e)}}else t.height!=null&&(t.height*=e)}function SNe(t,e,i){if(t&&(t.markerPlacement&&ENe(t.markerPlacement,e),t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.anchorPoint&&t.anchorPointUnits==="Absolute"&&(t.anchorPoint={x:t.anchorPoint.x*e,y:t.anchorPoint.y*e}),t.size=t.size!=null?t.size*e:0,t.type==="CIMVectorMarker"&&t.markerGraphics))for(const n of t.markerGraphics)t.scaleSymbolsProportionally||yB(n.symbol,e,!0,i)}function ENe(t,e){switch(iO(t)&&t.offset&&(t.offset*=e),t.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(n=>n*e);t.placementTemplate=i}break;case"CIMMarkerPlacementAlongLineVariableSize":if(t.maxRandomOffset&&(t.maxRandomOffset*=e),t.placementTemplate&&t.placementTemplate.length){const i=t.placementTemplate.map(n=>n*e);t.placementTemplate=i}break;case"CIMMarkerPlacementOnLine":t.startPointOffset&&(t.startPointOffset*=e);break;case"CIMMarkerPlacementAtExtremities":t.offsetAlongLine&&(t.offsetAlongLine*=e);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":t.beginPosition&&(t.beginPosition*=e),t.endPosition&&(t.endPosition*=e);break;case"CIMMarkerPlacementPolygonCenter":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMMarkerPlacementInsidePolygon":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e),t.stepX&&(t.stepX*=e),t.stepY&&(t.stepY*=e)}}function CNe(t,e){switch(t.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":t.width&&(t.width*=e);break;case"CIMGeometricEffectBuffer":t.size&&(t.size*=e);break;case"CIMGeometricEffectCut":t.beginCut&&(t.beginCut*=e),t.endCut&&(t.endCut*=e),t.middleCut&&(t.middleCut*=e);break;case"CIMGeometricEffectDashes":if(t.customEndingOffset&&(t.customEndingOffset*=e),t.offsetAlongLine&&(t.offsetAlongLine*=e),t.dashTemplate&&t.dashTemplate.length){const i=t.dashTemplate.map(n=>n*e);t.dashTemplate=i}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":t.length&&(t.length*=e);break;case"CIMGeometricEffectMove":t.offsetX&&(t.offsetX*=e),t.offsetY&&(t.offsetY*=e);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":t.offset&&(t.offset*=e);break;case"CIMGeometricEffectRegularPolygon":t.radius&&(t.radius*=e);break;case"CIMGeometricEffectTaperedPolygon":t.fromWidth&&(t.fromWidth*=e),t.length&&(t.length*=e),t.toWidth&&(t.toWidth*=e);break;case"CIMGeometricEffectWave":t.amplitude&&(t.amplitude*=e),t.period&&(t.period*=e)}}function INe(t){const e=[];return J4(fR(t),e),e.length?new Se(_de(e[0])):null}function J4(t,e){var r;if(!t)return;let i;i=t.type==="CIMTextSymbol"?t.symbol:t;const n=t.type==="CIMPolygonSymbol";if(i!=null&&i.symbolLayers){for(const s of i.symbolLayers)if(!(s.colorLocked||n&&(tO(s)||eO(s)&&s.markerPlacement&&iO(s.markerPlacement))))switch(s.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":s.tintColor&&pY(e,s.tintColor);break;case"CIMVectorMarker":(r=s.markerGraphics)==null||r.forEach(o=>{J4(o.symbol,e)});break;case"CIMSolidStroke":case"CIMSolidFill":pY(e,s.color);break;case"CIMHatchFill":J4(s.lineSymbol,e)}}}function pY(t,e){for(const i of t)if(i.join(".")===e.join("."))return;t.push(e)}function Rvt(t,e,i){e instanceof Se||(e=new Se(e));const n=fR(t);n&&Y4(n,e,i)}function Y4(t,e,i){var s;if(!t)return;let n;n=t.type==="CIMTextSymbol"?t.symbol:t;const r=(n==null?void 0:n.type)==="CIMPolygonSymbol";if(n!=null&&n.symbolLayers)for(const o of n.symbolLayers){if(o.colorLocked)continue;if(r){if(i){const{layersToColor:l}=i;if((tO(o)||eO(o)&&o.markerPlacement&&iO(o.markerPlacement))&&l==="fill"||wde(o)&&l==="outline")continue}else if(tO(o)||eO(o)&&o.markerPlacement&&iO(o.markerPlacement))continue}const a=e.toArray();switch(o.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":o.tintColor=a;break;case"CIMVectorMarker":(s=o.markerGraphics)==null||s.forEach(l=>{Y4(l.symbol,e,i)});break;case"CIMSolidStroke":case"CIMSolidFill":o.color=a;break;case"CIMHatchFill":Y4(o.lineSymbol,e,i)}}}const xde="picture-fill",Sde="simple-fill",TNe="simple-line",Ede="simple-marker",kNe="text",$Ne="cim",xD=new W4(1e3);function Lvt(t){const e=t.style;let i=null;if(t)switch(t.type){case Ede:e!=="cross"&&e!=="x"&&(i=t.color);break;case Sde:e==="solid"?i=t.color:e!=="none"&&(i={type:"pattern",x:0,y:0,src:pt(`esri/symbols/patterns/${e}.png`),width:5,height:5});break;case xde:i={type:"pattern",src:t.url,width:Br(t.width)*t.xscale,height:Br(t.height)*t.yscale,x:Br(t.xoffset),y:Br(t.yoffset)};break;case kNe:i=t.color;break;case $Ne:i=INe(t)}return i}function ANe(t,e){const i=t+"-"+e;return xD.get(i)!==void 0?Promise.resolve(xD.get(i)):rt(t,{responseType:"image"}).then(n=>{const r=n.data,s=r.naturalWidth,o=r.naturalHeight,a=document.createElement("canvas");a.width=s,a.height=o;const l=a.getContext("2d");l.fillStyle=e,l.fillRect(0,0,s,o),l.globalCompositeOperation="destination-in",l.drawImage(r,0,0);const u=a.toDataURL();return xD.put(i,u),u})}function vB(t){if(!t)return null;let e=null;switch(t.type){case Sde:case xde:case Ede:e=vB(t.outline);break;case TNe:{const i=Br(t.width);t.style!=null&&t.style!=="none"&&i!==0&&(e={color:t.color,style:bB(t.style),width:i,cap:t.cap,join:t.join==="miter"?Br(t.miterLimit):t.join});break}default:e=null}return e}const bB=(()=>{const t={};return e=>{if(t[e])return t[e];const i=e.replace(/-/g,"");return t[e]=i,i}})(),MNe=new Se([128,128,128]),ONe=new Se("white");function PNe(t){const e=t.symbolLayers&&t.symbolLayers.length;if(!e)return;const i=t.symbolLayers.getItemAt(e-1);return"outline"in i?tw(i,"outline","size"):void 0}function Dvt(t){var e;if(!t)return 0;if(rm(t)){const i=PNe(t);return A(i)?i:0}return ju((e=vB(t))==null?void 0:e.width)}function RNe(t){if(U(t)||!("symbolLayers"in t)||U(t.symbolLayers))return!1;switch(t.type){case"point-3d":return t.symbolLayers.some(e=>e.type==="object");case"line-3d":return t.symbolLayers.some(e=>e.type==="path");case"polygon-3d":return t.symbolLayers.some(e=>e.type==="object"||e.type==="extrude");default:return!1}}function LNe(t){return Sr(t.resource).href}function rv(t,e){if(!t)return null;let i=null;return rm(t)?i=DNe(t):XP(t)&&(i=t.color?new Se(t.color):null),i?UC(i,e):null}function DNe(t){const e=t.symbolLayers;if(!e)return null;let i=null;return e.forEach(n=>{var r;n.type==="object"&&((r=n.resource)==null?void 0:r.href)!=null||(i=n.type==="water"?n.color:A(n.material)?n.material.color:null)}),i?new Se(i):null}function UC(t,e){if(e==null||t==null)return t;const i=t.toRgba();return i[3]=i[3]*e,new Se(i)}function FNe(t,e,i){const n=t.symbolLayers;if(!n)return;const r=s=>{const o=A(s)?s:null;return UC(e=e??o??(i!=null?ONe:null),i)};n.forEach(s=>{var o;if(s.type!=="object"||((o=s.resource)==null?void 0:o.href)==null||e)if(s.type==="water")s.color=r(s.color);else{const a=A(s.material)?s.material.color:null,l=r(a);U(s.material)?s.material=new Ea({color:l}):s.material.color=l,i!=null&&"outline"in s&&A(s.outline)&&A(s.outline.color)&&(s.outline.color=UC(s.outline.color,i))}})}function NNe(t,e,i){(e=e??t.color)&&(t.color=UC(e,i)),i!=null&&"outline"in t&&t.outline&&t.outline.color&&(t.outline.color=UC(t.outline.color,i))}function SD(t,e,i){t&&(e||i!=null)&&(e&&(e=new Se(e)),rm(t)?FNe(t,e,i):XP(t)&&NNe(t,e,i))}async function zNe(t,e){const i=t.symbolLayers;i&&await A5e(i,async n=>jNe(n,e))}async function jNe(t,e){switch(t.type){case"extrude":UNe(t,e);break;case"icon":case"line":case"text":VNe(t,e);break;case"path":HNe(t,e);break;case"object":await BNe(t,e)}}function VNe(t,e){const i=Cde(e);A(i)&&(t.size=i)}function Cde(t){for(const e of t)if(typeof e=="number")return e;return null}function UNe(t,e){t.size=typeof e[2]=="number"?e[2]:0}async function BNe(t,e){const{resourceSize:i,symbolSize:n}=await GNe(t),r=Ide(e,i,n);t.width=wE(e[0],n[0],i[0],r),t.depth=wE(e[1],n[1],i[1],r),t.height=wE(e[2],n[2],i[2],r)}function HNe(t,e){const i=Ide(e,jae,[t.width,void 0,t.height]);t.width=wE(e[0],t.width,1,i),t.height=wE(e[2],t.height,1,i)}function Ide(t,e,i){for(let n=0;n<3;n++){const r=t[n];switch(r){case"symbol-value":{const s=i[n];return s!=null?s/e[n]:1}case"proportional":break;default:if(r&&e[n])return r/e[n]}}return 1}async function GNe(t){const e=await q(()=>import("./symbolLayerUtils-3b51b02c.js"),[]),i=await e.computeObjectLayerResourceSize(t,10),{width:n,height:r,depth:s}=t,o=[n,s,r];let a=1;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/i[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=i[l]*a);return{resourceSize:i,symbolSize:o}}function wE(t,e,i,n){switch(t){case"proportional":return i*n;case"symbol-value":return e??i;default:return t}}function qNe(t,e){const i=Cde(e);if(!U(i))switch(t.type){case"simple-marker":t.size=i;break;case"picture-marker":{const n=t.width/t.height;n>1?(t.width=i,t.height=i*n):(t.width=i*n,t.height=i);break}case"simple-line":t.width=i;break;case"text":t.font.size=i}}async function WNe(t,e){if(t&&e)return rm(t)?zNe(t,e):void(XP(t)&&qNe(t,e))}function JNe(t,e,i){if(t&&e!=null)if(rm(t)){const n=t.symbolLayers;n&&n.forEach(r=>{if(r&&r.type==="object")switch(i){case"tilt":r.tilt=e;break;case"roll":r.roll=e;break;default:r.heading=e}})}else XP(t)&&(t.type!=="simple-marker"&&t.type!=="picture-marker"&&t.type!=="text"||(t.angle=e))}function Tde(t){if(!t)return null;const e=t.effects.filter(i=>i.type!=="bloom").map(i=>i.toJSON());return q4(e)}function Fvt(t){return A(t)&&t.type==="polygon-3d"&&t.symbolLayers.some(e=>e.type==="extrude")}async function YNe(t,e){return await t.fetchSymbol(e)||t.fetchCIMSymbol(e)}const ZNe="<",KNe=">",XNe=Jw("short-date");function QNe(t,e,i,n){let r="";e===0?r=`${ZNe} `:e===i&&(r=`${KNe} `);let s=null;return s=n?Ai(t,XNe):k5e(t),r+s}const Nvt=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];async function eze(t){if(!("visualVariables"in t)||!t.visualVariables)return null;const e=t.visualVariables.find(o=>o.type==="color");if(!e)return null;let i=null,n=null;if(e.stops){if(e.stops.length===1)return e.stops[0].color;i=e.stops[0].value,n=e.stops[e.stops.length-1].value}const r=i!=null&&n!=null?i+(n-i)/2:0,{getColor:s}=await q(()=>Promise.resolve().then(()=>SR),void 0);return s(e,r)??null}async function zvt(t,e){const i=t.trailCap,n=t.trailWidth||1,r=e||await eze(t)||t.color;return new Is({cap:i,color:r,width:n})}const tze=new Se([64,64,64]);function kde(t,e){const i=[],n=t.length-1;return t.length===5?i.push(0,2,4):i.push(0,n),t.map((r,s)=>i.includes(s)?QNe(r,s,n,e):null)}async function ize(t,e,i){let n=!1,r=[],s=[];if(t.stops){const u=t.stops;r=u.map(h=>h.value),n=u.some(h=>!!h.label),n&&(s=u.map(h=>h.label))}const o=r[0],a=r[r.length-1];if(o==null&&a==null)return null;const l=n?null:kde(r,i??!1);return(await Promise.all(r.map(async(u,h)=>({value:u,color:t.type==="opacity"?await nze(u,t,e):(await q(()=>Promise.resolve().then(()=>SR),void 0)).getColor(t,u),label:n?s[h]:(l==null?void 0:l[h])??""})))).reverse()}async function nze(t,e,i=tze){const n=new Se(i),r=(await q(()=>Promise.resolve().then(()=>SR),void 0)).getOpacity(e,t);return r!=null&&(n.a=r),n}function jvt(t){let e=!1,i=[],n=[];i=t.map(a=>a.value),e=t.some(a=>!!a.label),e&&(n=t.map(a=>a.label??""));const r=i[0],s=i[i.length-1];if(r==null&&s==null)return null;const o=e?null:kde(i,!1);return i.map((a,l)=>({value:a,color:rze(a,t),label:e?n[l]:(o==null?void 0:o[l])??""})).reverse()}function rze(t,e){const{startIndex:i,endIndex:n,weight:r}=sze(t,e);if(i===n)return e[i].color;const s=Se.blendColors(e[i].color,e[n].color,r);return new Se(s)}function sze(t,e){let i=0,n=e.length-1;return e.some((r,s)=>t<r.value?(n=s,!0):(i=s,!1)),{startIndex:i,endIndex:n,weight:(t-e[i].value)/(e[n].value-e[i].value)}}function Vvt(t,e){let i=[];if(t&&t.type==="multipart")t.colorRamps.reverse().forEach((n,r)=>{r===0?i.push({value:e.max,color:new Se(n.toColor),label:"high"}):i.push({value:null,color:new Se(n.toColor),label:""}),r===t.colorRamps.length-1?i.push({value:e.min,color:new Se(n.fromColor),label:"low"}):i.push({value:null,color:new Se(n.fromColor),label:""})});else{let n,r;t&&t.type==="algorithmic"?(n=t.fromColor,r=t.toColor):(n=[0,0,0,1],r=[255,255,255,1]),i=[{value:e.max,color:new Se(r),label:"high"},{value:e.min,color:new Se(n),label:"low"}]}return i}var Z4;let gS=Z4=class extends Y{constructor(t){super(t),this.color=null,this.ratio=null}clone(){return new Z4({color:this.color,ratio:this.ratio})}};c([d({type:Se,json:{type:[Bt],default:null,write:!0}})],gS.prototype,"color",void 0),c([d({type:Number,json:{write:!0}})],gS.prototype,"ratio",void 0),gS=Z4=c([O("esri.renderers.support.HeatmapColorStop")],gS);const xE=gS;function oze(t){if(!t.colorStops)return[];const e=[...t.colorStops].filter(n=>{var r;return((r=n.color)==null?void 0:r.a)>0});let i=e.length-1;if(e&&e[0]){const n=e[i];n&&n.ratio!==1&&(e.push(new xE({ratio:1,color:n.color})),i++)}return e.map((n,r)=>{var o,a;let s="";return r===0?s=((o=t.legendOptions)==null?void 0:o.minLabel)||"low":r===i&&(s=((a=t.legendOptions)==null?void 0:a.maxLabel)||"high"),{color:n.color,label:s,ratio:n.ratio}}).reverse()}se.getLogger("esri.renderers.support.utils");async function Go(t,e,i){Tse(t,e,()=>[]).push(...i)}async function aze(t){var i,n;const e=new Map;if(!t)return e;if("visualVariables"in t&&t.visualVariables){const r=t.visualVariables.filter(s=>s.type==="color");for(const s of r){const o=(await ize(s)??[]).map(a=>a.color);await Go(e,s.field||s.valueExpression,o)}}if(t.type==="heatmap"){const r=oze(t).map(s=>s.color);await Go(e,t.field||t.valueExpression,r)}else if(t.type==="pie-chart"){for(const r of t.attributes)await Go(e,r.field||r.valueExpression,[r.color]);await Go(e,"default",[(i=t==null?void 0:t.othersCategory)==null?void 0:i.color,rv(t.backgroundFillSymbol,null)])}else if(t.type==="dot-density"){for(const r of t.attributes)await Go(e,r.field||r.valueExpression,[r.color]);await Go(e,"default",[t.backgroundColor])}else if(t.type==="unique-value")if(((n=t.authoringInfo)==null?void 0:n.type)==="predominance")for(const r of t.uniqueValueInfos??[])await Go(e,r.value.toString(),[rv(r.symbol,null)]);else{const r=(t.uniqueValueInfos??[]).map(u=>rv(u.symbol,null)),{field:s,field2:o,field3:a,valueExpression:l}=t;(s||l)&&await Go(e,s||l,r),o&&await Go(e,o,r),a&&await Go(e,a,r)}else if(t.type==="class-breaks"){const r=t.classBreakInfos.map(a=>rv(a.symbol,null)),{field:s,valueExpression:o}=t;await Go(e,s??o,r)}else t.type==="simple"&&await Go(e,"default",[rv(t.symbol,null)]);return"defaultSymbol"in t&&t.defaultSymbol&&await Go(e,"default",[rv(t.defaultSymbol,null)]),e.forEach((r,s)=>{const o=CIe(r.filter(Boolean),(a,l)=>JSON.stringify(a)===JSON.stringify(l));e.set(s,o)}),e}var K4;let s_=K4=class extends Y{constructor(t){super(t),this.name=null,this.code=null}clone(){return new K4({name:this.name,code:this.code})}};c([d({type:String,json:{write:!0}})],s_.prototype,"name",void 0),c([d({type:[String,Number],json:{write:!0}})],s_.prototype,"code",void 0),s_=K4=c([O("esri.layers.support.CodedValue")],s_);const lze=new Fe({inherited:"inherited",codedValue:"coded-value",range:"range"});let yS=class extends Y{constructor(e){super(e),this.name=null,this.type=null}};c([d({type:String,json:{write:!0}})],yS.prototype,"name",void 0),c([Ce(lze)],yS.prototype,"type",void 0),yS=c([O("esri.layers.support.Domain")],yS);const mR=yS;var X4;let vS=X4=class extends mR{constructor(t){super(t),this.codedValues=null,this.type="coded-value"}getName(t){let e=null;if(this.codedValues){const i=String(t);this.codedValues.some(n=>(String(n.code)===i&&(e=n.name),!!e))}return e}clone(){return new X4({codedValues:G(this.codedValues),name:this.name})}};c([d({type:[s_],json:{write:!0}})],vS.prototype,"codedValues",void 0),c([Ce({codedValue:"coded-value"})],vS.prototype,"type",void 0),vS=X4=c([O("esri.layers.support.CodedValueDomain")],vS);const gR=vS;var Q4;let R$=Q4=class extends mR{constructor(t){super(t),this.type="inherited"}clone(){return new Q4}};c([Ce({inherited:"inherited"})],R$.prototype,"type",void 0),R$=Q4=c([O("esri.layers.support.InheritedDomain")],R$);const $de=R$;var ej;let Jv=ej=class extends mR{constructor(t){super(t),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new ej({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};c([d({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(t,e,i){e[i]=[this.minValue||0,t]}}}})],Jv.prototype,"maxValue",void 0),c([d({type:Number,json:{type:[Number],read:{source:"range",reader:(t,e)=>e.range&&e.range[0]},write:{target:"range",writer(t,e,i){e[i]=[t,this.maxValue||0]}}}})],Jv.prototype,"minValue",void 0),c([Ce({range:"range"})],Jv.prototype,"type",void 0),Jv=ej=c([O("esri.layers.support.RangeDomain")],Jv);const Ade=Jv,_B={key:"type",base:mR,typeMap:{range:Ade,"coded-value":gR,inherited:$de}};function yR(t){if(!t||!t.type)return null;switch(t.type){case"range":return Ade.fromJSON(t);case"codedValue":return gR.fromJSON(t);case"inherited":return $de.fromJSON(t)}return null}const wB=new Fe({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var tj;const cze=new Fe({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let hs=tj=class extends Y{constructor(t){super(t),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null,this.visible=!0}readDescription(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return(i==null?void 0:i.value)??null}readValueType(t,{description:e}){let i=null;try{i=e?JSON.parse(e):null}catch{}return i?cze.fromJSON(i.fieldValueType):null}clone(){return new tj({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}};c([d({type:String,json:{write:!0}})],hs.prototype,"alias",void 0),c([d({type:[String,Number],json:{write:{allowNull:!0}}})],hs.prototype,"defaultValue",void 0),c([d()],hs.prototype,"description",void 0),c([de("description")],hs.prototype,"readDescription",null),c([d({types:_B,json:{read:{reader:yR},write:!0}})],hs.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],hs.prototype,"editable",void 0),c([d({type:Bt,json:{write:!0}})],hs.prototype,"length",void 0),c([d({type:String,json:{write:!0}})],hs.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0}})],hs.prototype,"nullable",void 0),c([Ce(wB)],hs.prototype,"type",void 0),c([d()],hs.prototype,"valueType",void 0),c([de("valueType",["description"])],hs.prototype,"readValueType",null),c([d({type:Boolean,json:{read:!1}})],hs.prototype,"visible",void 0),hs=tj=c([O("esri.layers.support.Field")],hs);const xB=hs;var ij;let Yv=ij=class extends Y{constructor(t){super(t),this.type="map-layer"}clone(){const{mapLayerId:t,gdbVersion:e}=this;return new ij({mapLayerId:t,gdbVersion:e})}};c([Ce({mapLayer:"map-layer"})],Yv.prototype,"type",void 0),c([d({type:Bt,json:{write:!0}})],Yv.prototype,"mapLayerId",void 0),c([d({type:String,json:{write:!0}})],Yv.prototype,"gdbVersion",void 0),Yv=ij=c([O("esri.layers.support.source.MapLayerSource")],Yv);var nj;let Id=nj=class extends Y{constructor(t){super(t),this.type="query-table"}clone(){const{workspaceId:t,query:e,oidFields:i,spatialReference:n,geometryType:r}=this,s={workspaceId:t,query:e,oidFields:i,spatialReference:(n==null?void 0:n.clone())??void 0,geometryType:r};return new nj(s)}};c([Ce({queryTable:"query-table"})],Id.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Id.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],Id.prototype,"query",void 0),c([d({type:String,json:{write:!0}})],Id.prototype,"oidFields",void 0),c([d({type:Ge,json:{write:!0}})],Id.prototype,"spatialReference",void 0),c([Ce(jke)],Id.prototype,"geometryType",void 0),Id=nj=c([O("esri.layers.support.source.QueryTableDataSource")],Id);var rj;let Zv=rj=class extends Y{constructor(t){super(t),this.type="raster"}clone(){const{workspaceId:t,dataSourceName:e}=this;return new rj({workspaceId:t,dataSourceName:e})}};c([Ce({raster:"raster"})],Zv.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Zv.prototype,"dataSourceName",void 0),c([d({type:String,json:{write:!0}})],Zv.prototype,"workspaceId",void 0),Zv=rj=c([O("esri.layers.support.source.RasterDataSource")],Zv);var sj;let Pg=sj=class extends Y{constructor(t){super(t),this.type="table"}clone(){const{workspaceId:t,gdbVersion:e,dataSourceName:i}=this;return new sj({workspaceId:t,gdbVersion:e,dataSourceName:i})}};c([Ce({table:"table"})],Pg.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Pg.prototype,"workspaceId",void 0),c([d({type:String,json:{write:!0}})],Pg.prototype,"gdbVersion",void 0),c([d({type:String,json:{write:!0}})],Pg.prototype,"dataSourceName",void 0),Pg=sj=c([O("esri.layers.support.source.TableDataSource")],Pg);var oj,aj;const uze=kr()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let Qo=oj=class extends Y{constructor(t){super(t),this.type="join-table"}readLeftTableSource(t,e,i){return fY()(t,e,i)}castLeftTableSource(t){return Nu(lj(),t)}readRightTableSource(t,e,i){return fY()(t,e,i)}castRightTableSource(t){return Nu(lj(),t)}clone(){const{leftTableKey:t,rightTableKey:e,leftTableSource:i,rightTableSource:n,joinType:r}=this,s={leftTableKey:t,rightTableKey:e,leftTableSource:(i==null?void 0:i.clone())??void 0,rightTableSource:(n==null?void 0:n.clone())??void 0,joinType:r};return new oj(s)}};c([Ce({joinTable:"join-table"})],Qo.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Qo.prototype,"leftTableKey",void 0),c([d({type:String,json:{write:!0}})],Qo.prototype,"rightTableKey",void 0),c([d({json:{write:!0}})],Qo.prototype,"leftTableSource",void 0),c([de("leftTableSource")],Qo.prototype,"readLeftTableSource",null),c([st("leftTableSource")],Qo.prototype,"castLeftTableSource",null),c([d({json:{write:!0}})],Qo.prototype,"rightTableSource",void 0),c([de("rightTableSource")],Qo.prototype,"readRightTableSource",null),c([st("rightTableSource")],Qo.prototype,"castRightTableSource",null),c([Ce(uze)],Qo.prototype,"joinType",void 0),Qo=oj=c([O("esri.layers.support.source.JoinTableDataSource")],Qo);let ED=null;function fY(){return ED||(ED=bm({types:lj()})),ED}let CD=null;function lj(){return CD||(CD={key:"type",base:null,typeMap:{"data-layer":gc,"map-layer":Yv}}),CD}const dze={key:"type",base:null,typeMap:{"join-table":Qo,"query-table":Id,raster:Zv,table:Pg}};let gc=aj=class extends Y{constructor(t){super(t),this.type="data-layer"}clone(){const{fields:t,dataSource:e}=this;return new aj({fields:t,dataSource:e})}};c([Ce({dataLayer:"data-layer"})],gc.prototype,"type",void 0),c([d({type:[xB],json:{write:!0}})],gc.prototype,"fields",void 0),c([d({types:dze,json:{write:!0}})],gc.prototype,"dataSource",void 0),gc=aj=c([O("esri.layers.support.source.DataLayerSource")],gc),gc.from=Ht(gc);function vR(t,e){return e?{...e,query:{...t??{},...e.query}}:{query:t}}function r1(t){return typeof t=="string"?_i(t):G(t)}function bR(t,e,i){const n={};for(const r in t){if(r==="declaredClass")continue;const s=t[r];if(s!=null&&typeof s!="function")if(Array.isArray(s)){n[r]=[];for(let o=0;o<s.length;o++)n[r][o]=bR(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(i&&i[r]);n[r]=e?o:JSON.stringify(o)}else n[r]=e?s:JSON.stringify(s);else n[r]=s}return n}function Bvt(t,e){var i;return M9(t)&&(e||lt.apiKey)?e||lt.apiKey:(i=Ne==null?void 0:Ne.findCredential(t))==null?void 0:i.token}const xT={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Gs({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ge.WebMercator}),minus180Line:new Gs({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Ge.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Gs({paths:[[[180,-180],[180,180]]],spatialReference:Ge.WGS84}),minus180Line:new Gs({paths:[[[-180,-180],[-180,180]]],spatialReference:Ge.WGS84})}};function By(t,e){return Math.ceil((t-e)/(2*e))}function Mde(t,e){const i=SE(t);for(const n of i)for(const r of n)r[0]+=e;return t}function SE(t){return ph(t)?t.rings:t.paths}async function hze(t,e,i,n){const r=r1(t),s=e[0].spatialReference,o={...n,query:{...r.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Ww(e[0]),geometries:e}),cutter:JSON.stringify(i)}},a=await rt(r.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(h=>{const p=Yr(h);return p.spatialReference=s,p})}}function pze(t){return{geometryType:Ww(t[0]),geometries:t.map(e=>e.toJSON())}}function Ode(t,e,i){const n=Uke(e);return t.map(r=>{const s=n.fromJSON(r);return s.spatialReference=i,s})}async function fze(t,e,i){const n=typeof t=="string"?_i(t):t,r=e[0].spatialReference,s=Ww(e[0]),o={...i,query:{...n.query,f:"json",sr:r.wkid?r.wkid:JSON.stringify(r),geometries:JSON.stringify(pze(e))}},{data:a}=await rt(n.path+"/simplify",o);return Ode(a.geometries,s,r)}const Pde=se.getLogger("esri.geometry.support.normalizeUtils");function mze(t){return t.type==="polygon"}function gze(t){return t[0].type==="polygon"}function yze(t){return t[0].type==="polyline"}function Rde(t,e){if(!(t instanceof Gs||t instanceof Ws)){const r="straightLineDensify: the input geometry is neither polyline nor polygon";throw Pde.error(r),new N(r)}const i=SE(t),n=[];for(const r of i){const s=[];n.push(s),s.push([r[0][0],r[0][1]]);for(let o=0;o<r.length-1;o++){const a=r[o][0],l=r[o][1],u=r[o+1][0],h=r[o+1][1],p=Math.sqrt((u-a)*(u-a)+(h-l)*(h-l)),f=(h-l)/p,g=(u-a)/p,v=p/e;if(v>1){for(let S=1;S<=v-1;S++){const C=S*e,$=g*C+a,M=f*C+l;s.push([$,M])}const b=(p+Math.floor(v-1)*e)/2,_=g*b+a,w=f*b+l;s.push([_,w])}s.push([u,h])}}return mze(t)?new Ws({rings:n,spatialReference:t.spatialReference}):new Gs({paths:n,spatialReference:t.spatialReference})}function mY(t,e,i){if(e){const n=Rde(t,1e6);t=sh(n,!0)}return i&&(t=Mde(t,i)),t}function gY(t,e,i){if(Array.isArray(t)){const n=t[0];if(n>e){const r=By(n,e);t[0]=n+r*(-2*e)}else if(n<i){const r=By(n,i);t[0]=n+r*(-2*i)}}else{const n=t.x;if(n>e){const r=By(n,e);t=t.clone().offset(r*(-2*e),0)}else if(n<i){const r=By(n,i);t=t.clone().offset(r*(-2*i),0)}}return t}function vze(t,e){let i=-1;for(let n=0;n<e.cutIndexes.length;n++){const r=e.cutIndexes[n],s=e.geometries[n],o=SE(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let h=0;for(let f=0;f<l.length;f++){const g=l[f][0];h=g>h?g:h}h=Number(h.toFixed(9));const p=-360*By(h,180);for(let f=0;f<l.length;f++){const g=s.getPoint(a,f);s.setPoint(a,f,g.clone().offset(p,0))}return!0}})}if(r===i){if(gze(t))for(const a of SE(s))t[r]=t[r].addRing(a);else if(yze(t))for(const a of SE(s))t[r]=t[r].addPath(a)}else i=r,t[r]=s}return t}async function SB(t,e,i){if(!Array.isArray(t))return SB([t],e);e&&typeof e!="string"&&Pde.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead");const n=typeof e=="string"?e:(e==null?void 0:e.url)??lt.geometryServiceUrl;let r,s,o,a,l,u,h,p,f=0;const g=[],v=[];for(const $ of t)if(U($))v.push($);else if(r||(r=$.spatialReference,s=xa(r),o=r.isWebMercator,u=o?102100:4326,a=xT[u].maxX,l=xT[u].minX,h=xT[u].plus180Line,p=xT[u].minus180Line),s)if($.type==="mesh")v.push($);else if($.type==="point")v.push(gY($.clone(),a,l));else if($.type==="multipoint"){const M=$.clone();M.points=M.points.map(P=>gY(P,a,l)),v.push(M)}else if($.type==="extent"){const M=$.clone()._normalize(!1,!1,s);v.push(M.rings?new Ws(M):M)}else if($.extent){const M=$.extent,P=By(M.xmin,l)*(2*a);let k=P===0?$.clone():Mde($.clone(),P);M.offset(P,0),M.intersects(h)&&M.xmax!==a?(f=M.xmax>f?M.xmax:f,k=mY(k,o),g.push(k),v.push("cut")):M.intersects(p)&&M.xmin!==l?(f=M.xmax*(2*a)>f?M.xmax*(2*a):f,k=mY(k,o,360),g.push(k),v.push("cut")):v.push(k)}else v.push($.clone());else v.push($);let b=By(f,a),_=-90;const w=b,S=new Gs;for(;b>0;){const $=360*b-180;S.addPath([[$,_],[$,-1*_]]),_*=-1,b--}if(g.length>0&&w>0){const $=vze(g,await hze(n,g,S,i)),M=[],P=[];for(let z=0;z<v.length;z++){const B=v[z];if(B!=="cut")P.push(B);else{const j=$.shift(),K=t[z];A(K)&&K.type==="polygon"&&K.rings&&K.rings.length>1&&j.rings.length>=K.rings.length?(M.push(j),P.push("simplify")):P.push(o?Tc(j):j)}}if(!M.length)return P;const k=await fze(n,M,i),D=[];for(let z=0;z<P.length;z++){const B=P[z];B!=="simplify"?D.push(B):D.push(o?Tc(k.shift()):k.shift())}return D}const C=[];for(let $=0;$<v.length;$++){const M=v[$];if(M!=="cut")C.push(M);else{const P=g.shift();C.push(o===!0?Tc(P):P)}}return C}function Hvt(t,e){const i=xa(e);if(i){const[n,r]=i.valid,s=r-n;if(t<n)for(;t<n;)t+=s;if(t>r)for(;t>r;)t-=s}return t}function Lde(t){const e={};for(const i in t){if(i==="declaredClass")continue;const n=t[i];if(n!=null&&typeof n!="function")if(Array.isArray(n)){e[i]=[];for(let r=0;r<n.length;r++)e[i][r]=Lde(n[r])}else typeof n=="object"?n.toJSON&&(e[i]=JSON.stringify(n)):e[i]=n}return e}var df;(function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"})(df||(df={}));const yY=4294967296,bze=new TextDecoder("utf-8"),_ze=ee("safari")||ee("ios")?6:ee("ff")?12:32;let cj=class L${constructor(e,i,n=0,r=e?e.byteLength:0){this._tag=0,this._dataType=df.unknown,this._init(e,i,n,r)}_init(e,i,n,r){this._data=e,this._dataView=i,this._pos=n,this._end=r}asUnsafe(){return this}clone(){return new L$(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(e){this._pos=e}nextTag(e){for(;;){if(this._pos===this._end)return!1;const i=this._decodeVarint();if(this._tag=i>>3,this._dataType=7&i,!e||e===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const e=this._decodeVarint();return this._tag=e>>3,this._dataType=7&e,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let e=4294967295;return e=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?e:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const e=this.getUInt32();if(e!==void 0)return e>>>1^-(1&e)|0}getSInt64(){return this._decodeSVarint()}getBool(){const e=this._data[this._pos]!==0;return this._skip(1),e}getEnum(){return this._decodeVarint()}getFixed64(){const e=this._dataView,i=this._pos,n=e.getUint32(i,!0)+e.getUint32(i+4,!0)*yY;return this._skip(8),n}getSFixed64(){const e=this._dataView,i=this._pos,n=e.getUint32(i,!0)+e.getInt32(i+4,!0)*yY;return this._skip(8),n}getDouble(){const e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e}getFixed32(){const e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e}getSFixed32(){const e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e}getFloat(){const e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e}getString(){const e=this._getLength(),i=this._pos,n=this._toString(this._data,i,i+e);return this._skip(e),n}getBytes(){const e=this._getLength(),i=this._pos,n=this._toBytes(this._data,i,i+e);return this._skip(e),n}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(e,i,n,r){const s=this.getMessage(),o=e(s,i,n,r);return s.release(),o}processMessage(e){const i=this.getMessage(),n=e(i);return i.release(),n}getMessage(){const e=this._getLength(),i=L$.pool.acquire();return i._init(this._data,this._dataView,this._pos,this._pos+e),this._skip(e),i}release(){L$.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case df.varint:this._decodeVarint();break;case df.fixed64:this._skip(8);break;case df.delimited:this._skip(this._getLength());break;case df.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(e){this._skip(e)}_skip(e){if(this._pos+e>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=e}_decodeVarint(){const e=this._data;let i=this._pos,n=0,r=0;if(this._end-i>=10)do{if(r=e[i++],n|=127&r,(128&r)==0||(r=e[i++],n|=(127&r)<<7,(128&r)==0)||(r=e[i++],n|=(127&r)<<14,(128&r)==0)||(r=e[i++],n|=(127&r)<<21,(128&r)==0)||(r=e[i++],n+=268435456*(127&r),(128&r)==0)||(r=e[i++],n+=34359738368*(127&r),(128&r)==0)||(r=e[i++],n+=4398046511104*(127&r),(128&r)==0)||(r=e[i++],n+=562949953421312*(127&r),(128&r)==0)||(r=e[i++],n+=72057594037927940*(127&r),(128&r)==0)||(r=e[i++],n+=9223372036854776e3*(127&r),(128&r)==0))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;i!==this._end&&(r=e[i],(128&r)!=0);)++i,n+=(127&r)*s,s*=128;if(i===this._end)throw new Error("Varint overrun!");++i,n+=r*s}return this._pos=i,n}_decodeSVarint(){const e=this._data;let i=this._pos,n=0,r=0;const s=1&e[i];if(this._end-i>=10)do{if(r=e[i++],n|=127&r,(128&r)==0||(r=e[i++],n|=(127&r)<<7,(128&r)==0)||(r=e[i++],n|=(127&r)<<14,(128&r)==0)||(r=e[i++],n|=(127&r)<<21,(128&r)==0)||(r=e[i++],n+=268435456*(127&r),(128&r)==0)||(r=e[i++],n+=34359738368*(127&r),(128&r)==0)||(r=e[i++],n+=4398046511104*(127&r),(128&r)==0)||(r=e[i++],n+=562949953421312*(127&r),(128&r)==0)||(r=e[i++],n+=72057594037927940*(127&r),(128&r)==0)||(r=e[i++],n+=9223372036854776e3*(127&r),(128&r)==0))break;throw new Error("Varint too long!")}while(0);else{let o=1;for(;i!==this._end&&(r=e[i],(128&r)!=0);)++i,n+=(127&r)*o,o*=128;if(i===this._end)throw new Error("Varint overrun!");++i,n+=r*o}return this._pos=i,s?-(n+1)/2:n/2}_getLength(){if(this._dataType!==df.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(e,i,n){if((n=Math.min(this._end,n))-i>_ze){const o=e.subarray(i,n);return bze.decode(o)}let r="",s="";for(let o=i;o<n;++o){const a=e[o];128&a?s+="%"+a.toString(16):(r+=decodeURIComponent(s)+String.fromCharCode(a),s="")}return s.length&&(r+=decodeURIComponent(s)),r}_toBytes(e,i,n){return n=Math.min(this._end,n),new Uint8Array(e.buffer,i,n-i)}};cj.pool=new _m(cj,void 0,t=>{t._data=null,t._dataView=null});let Vo=class D${constructor(e=[],i=[],n=!1){this.lengths=e??[],this.coords=i??[],this.hasIndeterminateRingOrder=n}static fromRect(e){const[i,n,r,s]=e,o=r-i,a=s-n;return new D$([5],[i,n,o,0,0,a,-o,0,0,-a])}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((e,i)=>e+i)}forEachVertex(e){let i=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];for(let s=0;s<r;s++)e(this.coords[2*(s+i)],this.coords[2*(s+i)+1]);i+=r}}clone(e){return e?(e.set(this.coords),new D$(this.lengths.slice(),e,this.hasIndeterminateRingOrder)):new D$(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}},cm=class Dde{constructor(e=null,i={},n,r){this.geometry=e,this.attributes=i,this.centroid=n,this.objectId=r,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const e=new Dde(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}};function wze(t){return!(U(t.geometry)||!t.geometry.coords||!t.geometry.coords.length)}let Gvt=class extends cm{},Fde=class Nde{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const e=new Nde;return e.objectIdFieldName=this.objectIdFieldName,e.globalIdFieldName=this.globalIdFieldName,e.geohashFieldName=this.geohashFieldName,e.geometryProperties=this.geometryProperties,e.geometryType=this.geometryType,e.spatialReference=this.spatialReference,e.hasZ=this.hasZ,e.hasM=this.hasM,e.features=this.features,e.fields=this.fields,e.transform=this.transform,e.exceededTransferLimit=this.exceededTransferLimit,e.uniqueIdField=this.uniqueIdField,e.queryGeometry=this.queryGeometry,e.queryGeometryType=this.queryGeometryType,e}};const zde=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];let Wvt=class{constructor(e){this._options=e,this.geometryTypes=zde,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new Fde}prepareFeatures(e){this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&this._vertexDimension++}finishFeatureResult(e){if(!e||!e.features||!e.hasZ||!this._options.sourceSpatialReference||!e.spatialReference||ui(e.spatialReference,this._options.sourceSpatialReference)||e.spatialReference.vcsWkid)return;const i=nw(this._options.sourceSpatialReference)/nw(e.spatialReference);if(i!==1)for(const n of e.features){if(!wze(n))continue;const r=n.geometry.coords;for(let s=2;s<r.length;s+=3)r[s]*=i}}addFeature(e,i){e.features.push(i)}createFeature(){return new cm}createSpatialReference(){return{wkid:0}}createGeometry(){return new Vo}addField(e,i){e.fields.push(i)}allocateCoordinates(e){e.coords.length=e.lengths.reduce((i,n)=>i+n,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(e,i){e.coords[this._coordinatePtr++]=i}addCoordinatePoint(e,i){e.coords.push(i)}addLength(e,i){e.lengths.push(i)}addQueryGeometry(e,i){e.queryGeometry=i.queryGeometry,e.queryGeometryType=i.queryGeometryType}createPointGeometry(){return new Vo}};const vY=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],bY=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],_Y=["upperLeft","lowerLeft"];function wY(t){return t>=vY.length?null:vY[t]}function xze(t){return t>=bY.length?null:bY[t]}function xY(t){return t>=_Y.length?null:_Y[t]}function SY(t,e){return e>=t.geometryTypes.length?null:t.geometryTypes[e]}function Sze(t,e,i){const r=t.asUnsafe(),s=e.createPointGeometry(i);for(;r.next();)switch(r.tag()){case 3:{const o=r.getUInt32(),a=r.pos()+o;let l=0;for(;r.pos()<a;)e.addCoordinatePoint(s,r.getSInt64(),l++);break}default:r.skip()}return s}function Eze(t,e,i){const s=t.asUnsafe(),o=e.createGeometry(i),a=2+(i.hasZ?1:0)+(i.hasM?1:0);for(;s.next();)switch(s.tag()){case 2:{const l=s.getUInt32(),u=s.pos()+l;let h=0;for(;s.pos()<u;)e.addLength(o,s.getUInt32(),h++);break}case 3:{const l=s.getUInt32(),u=s.pos()+l;let h=0;for(e.allocateCoordinates(o);s.pos()<u;)e.addCoordinate(o,s.getSInt64(),h),h++,h===a&&(h=0);break}default:s.skip()}return o}function Cze(t){const r=t.asUnsafe(),s=new Vo;let o="esriGeometryPoint";for(;r.next();)switch(r.tag()){case 2:{const a=r.getUInt32(),l=r.pos()+a;for(;r.pos()<l;)s.lengths.push(r.getUInt32());break}case 3:{const a=r.getUInt32(),l=r.pos()+a;for(;r.pos()<l;)s.coords.push(r.getSInt64());break}case 1:o=zde[r.getEnum()];break;default:r.skip()}return{queryGeometry:s,queryGeometryType:o}}function Ize(t){const h=t.asUnsafe();for(;h.next();)switch(h.tag()){case 1:return h.getString();case 2:return h.getFloat();case 3:return h.getDouble();case 4:return h.getSInt32();case 5:return h.getUInt32();case 6:return h.getInt64();case 7:return h.getUInt64();case 8:return h.getSInt64();case 9:return h.getBool();default:return h.skip(),null}return null}function Tze(t){const a=t.asUnsafe(),l={type:wY(0)};for(;a.next();)switch(a.tag()){case 1:l.name=a.getString();break;case 2:l.type=wY(a.getEnum());break;case 3:l.alias=a.getString();break;case 4:l.sqlType=xze(a.getEnum());break;case 5:a.skip();break;case 6:l.defaultValue=a.getString();break;default:a.skip()}return l}function kze(t){const n={},r=t.asUnsafe();for(;r.next();)switch(r.tag()){case 1:n.name=r.getString();break;case 2:n.isSystemMaintained=r.getBool();break;default:r.skip()}return n}function $ze(t,e,i,n){const a=e.createFeature(i);let l=0;for(;t.next();)switch(t.tag()){case 1:{const u=n[l++].name;a.attributes[u]=t.processMessage(Ize);break}case 2:a.geometry=t.processMessageWithArgs(Eze,e,i);break;case 4:a.centroid=t.processMessageWithArgs(Sze,e,i);break;default:t.skip()}return a}function Aze(t){const s=[1,1,1,1],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s[0]=o.getDouble();break;case 2:s[1]=o.getDouble();break;case 4:s[2]=o.getDouble();break;case 3:s[3]=o.getDouble();break;default:o.skip()}return s}function Mze(t){const s=[0,0,0,0],o=t.asUnsafe();for(;o.next();)switch(o.tag()){case 1:s[0]=o.getDouble();break;case 2:s[1]=o.getDouble();break;case 4:s[2]=o.getDouble();break;case 3:s[3]=o.getDouble();break;default:o.skip()}return s}function Oze(t){const r={originPosition:xY(0)},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:r.originPosition=xY(s.getEnum());break;case 2:r.scale=s.processMessage(Aze);break;case 3:r.translate=s.processMessage(Mze);break;default:s.skip()}return r}function Pze(t){const r={},s=t.asUnsafe();for(;s.next();)switch(s.tag()){case 1:r.shapeAreaFieldName=s.getString();break;case 2:r.shapeLengthFieldName=s.getString();break;case 3:r.units=s.getString();break;default:s.skip()}return r}function Rze(t,e){const a=e.createSpatialReference();for(;t.next();)switch(t.tag()){case 1:a.wkid=t.getUInt32();break;case 5:a.wkt=t.getString();break;case 2:a.latestWkid=t.getUInt32();break;case 3:a.vcsWkid=t.getUInt32();break;case 4:a.latestVcsWkid=t.getUInt32();break;default:t.skip()}return a}function Lze(t,e){const b=e.createFeatureResult(),_=t.asUnsafe();b.geometryType=SY(e,0);let w=!1;for(;_.next();)switch(_.tag()){case 1:b.objectIdFieldName=_.getString();break;case 3:b.globalIdFieldName=_.getString();break;case 4:b.geohashFieldName=_.getString();break;case 5:b.geometryProperties=_.processMessage(Pze);break;case 7:b.geometryType=SY(e,_.getEnum());break;case 8:b.spatialReference=_.processMessageWithArgs(Rze,e);break;case 10:b.hasZ=_.getBool();break;case 11:b.hasM=_.getBool();break;case 12:b.transform=_.processMessage(Oze);break;case 9:{const S=_.getBool();b.exceededTransferLimit=S;break}case 13:e.addField(b,_.processMessage(Tze));break;case 15:w||(e.prepareFeatures(b),w=!0),e.addFeature(b,_.processMessageWithArgs($ze,e,b,b.fields));break;case 2:b.uniqueIdField=_.processMessage(kze);break;default:_.skip()}return e.finishFeatureResult(b),b}function Dze(t,e){const r={};let s=null;for(;t.next();)switch(t.tag()){case 4:s=t.processMessageWithArgs(Cze);break;case 1:r.featureResult=t.processMessageWithArgs(Lze,e);break;default:t.skip()}return A(s)&&r.featureResult&&e.addQueryGeometry(r,s),r}function Fze(t,e){try{const n=new cj(new Uint8Array(t),new DataView(t)),r={};for(;n.next();)n.tag()===2?r.queryResult=n.processMessageWithArgs(Dze,e):n.skip();return r}catch(i){throw new N("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:i})}}function Nze(t,e){const i=Fze(t,e),n=i.queryResult.featureResult,r=i.queryResult.queryGeometry,s=i.queryResult.queryGeometryType;if(n&&n.features&&n.features.length&&n.objectIdFieldName){const o=n.objectIdFieldName;for(const a of n.features)a.attributes&&(a.objectId=a.attributes[o])}return n&&(n.queryGeometry=r,n.queryGeometryType=s),n}function uj(t,e,i){if(!i||!i.features||!i.hasZ)return;const n=vce(i.geometryType,e,t.outSpatialReference);if(!U(n))for(const r of i.features)n(r.geometry)}const EY="Layer does not support extent calculation.";function zze(t,e){if(e&&t.type==="extent")return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&t.type==="point")return`${t.x},${t.y}`;const i=t.toJSON();return delete i.spatialReference,JSON.stringify(i)}function jze(t,e){const i=t.geometry,n=t.toJSON();delete n.compactGeometryEnabled,delete n.defaultSpatialReferenceEnabled;const r=n;let s,o,a;if(A(i)&&(o=i.spatialReference,a=i.spatialReference.wkid||JSON.stringify(i.spatialReference),r.geometryType=Ww(i),r.geometry=zze(i,t.compactGeometryEnabled),r.inSR=a),n.groupByFieldsForStatistics&&(r.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(r.objectIds=n.objectIds.join(",")),n.orderByFields&&(r.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(e!=null&&e.returnCountOnly||e!=null&&e.returnExtentOnly||e!=null&&e.returnIdsOnly)?delete r.outFields:n.outFields.includes("*")?r.outFields="*":r.outFields=n.outFields.join(","),n.outSR?(r.outSR=n.outSR.wkid||JSON.stringify(n.outSR),s=t.outSpatialReference):i&&(n.returnGeometry||n.returnCentroid)&&(r.outSR=r.inSR,s=o),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(r.outStatistics=JSON.stringify(n.outStatistics)),n.fullText&&(r.fullText=JSON.stringify(n.fullText)),n.pixelSize&&(r.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&A(o)&&A(t.quantizationParameters)&&A(t.quantizationParameters.extent)&&o.equals(t.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,r.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(r.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(r.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(r.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const l=n.timeExtent,{start:u,end:h}=l;u==null&&h==null||(r.time=u===h?u:`${u??"null"},${h??"null"}`),delete n.timeExtent}return t.defaultSpatialReferenceEnabled&&A(o)&&A(s)&&o.equals(s)&&(r.defaultSR=r.inSR,delete r.inSR,delete r.outSR),r}async function Vze(t,e,i,n){const r=A(e.timeExtent)&&e.timeExtent.isEmpty?{data:{features:[]}}:await YI(t,e,"json",n);return uj(e,i,r.data),r}async function Yvt(t,e,i,n){if(A(e.timeExtent)&&e.timeExtent.isEmpty)return{data:i.createFeatureResult()};const r=await Uze(t,e,n),s=r;return s.data=Nze(r.data,i),s}function Uze(t,e,i){return YI(t,e,"pbf",i)}function Zvt(t,e,i){return A(e.timeExtent)&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):YI(t,e,"json",i,{returnIdsOnly:!0})}function Kvt(t,e,i){return A(e.timeExtent)&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):YI(t,e,"json",i,{returnIdsOnly:!0,returnCountOnly:!0})}function Xvt(t,e,i){return A(e.timeExtent)&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):YI(t,e,"json",i,{returnExtentOnly:!0,returnCountOnly:!0}).then(n=>{const r=n.data;if(r.hasOwnProperty("extent"))return n;if(r.features)throw new Error(EY);if(r.hasOwnProperty("count"))throw new Error(EY);return n})}function YI(t,e,i,n={},r={}){const s=typeof t=="string"?_i(t):t,o=e.geometry?[e.geometry]:[];return n.responseType=i==="pbf"?"array-buffer":"json",SB(o,null,n).then(a=>{const l=a&&a[0];A(l)&&((e=e.clone()).geometry=l);const u=Lde({...s.query,f:i,...r,...jze(e,r)});return rt(w0(s.path,"query"),{...n,query:{...u,...n.query}})})}var dj;const hj=new Fe({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let yr=dj=class extends Y{constructor(t){super(t),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(t,e){var r;const i=Ge.fromJSON(e.spatialReference),n=[];for(let s=0;s<t.length;s++){const o=t[s],a=en.fromJSON(o),l=o.geometry&&o.geometry.spatialReference;A(a.geometry)&&!l&&(a.geometry.spatialReference=i);const u=o.aggregateGeometries,h=a.aggregateGeometries;if(u&&A(h))for(const p in h){const f=h[p],g=(r=u[p])==null?void 0:r.spatialReference;A(f)&&!g&&(f.spatialReference=i)}n.push(a)}return n}writeGeometryType(t,e,i,n){if(t)return void hj.write(t,e,i,n);const{features:r}=this;if(r){for(const s of r)if(s&&A(s.geometry))return void hj.write(s.geometry.type,e,i,n)}}readQueryGeometry(t,e){if(!t)return null;const i=!!t.spatialReference,n=Yr(t);return n&&!i&&e.spatialReference&&(n.spatialReference=Ge.fromJSON(e.spatialReference)),n}writeSpatialReference(t,e){if(t)return void(e.spatialReference=t.toJSON());const{features:i}=this;if(i){for(const n of i)if(n&&A(n.geometry)&&n.geometry.spatialReference)return void(e.spatialReference=n.geometry.spatialReference.toJSON())}}clone(){return new dj(this.cloneProperties())}cloneProperties(){return G({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}toJSON(t){const e=this.write();if(e.features&&Array.isArray(t)&&t.length>0)for(let i=0;i<e.features.length;i++){const n=e.features[i];if(n.geometry){const r=t&&t[i];n.geometry=r&&r.toJSON()||n.geometry}}return e}quantize(t){const{scale:[e,i],translate:[n,r]}=t,s=u=>Math.round((u-n)/e),o=u=>Math.round((r-u)/i),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let u=0,h=a.length;u<h;u++)l!=null&&l(a[u].geometry)||(a.splice(u,1),u--,h--);return this.transform=t,this}unquantize(){const{geometryType:t,features:e,transform:i}=this;if(!i)return this;const{translate:[n,r],scale:[s,o]}=i,a=h=>h*s+n,l=h=>r-h*o,u=this._getHydrationFunction(t,a,l);for(const{geometry:h}of e)A(h)&&u&&u(h);return this.transform=null,this}_quantizePoints(t,e,i){let n,r;const s=[];for(let o=0,a=t.length;o<a;o++){const l=t[o];if(o>0){const u=e(l[0]),h=i(l[1]);u===n&&h===r||(s.push([u-n,h-r]),n=u,r=h)}else n=e(l[0]),r=i(l[1]),s.push([n,r])}return s.length>0?s:null}_getQuantizationFunction(t,e,i){return t==="point"?n=>(n.x=e(n.x),n.y=i(n.y),n):t==="polyline"||t==="polygon"?n=>{const r=ph(n)?n.rings:n.paths,s=[];for(let o=0,a=r.length;o<a;o++){const l=r[o],u=this._quantizePoints(l,e,i);u&&s.push(u)}return s.length>0?(ph(n)?n.rings=s:n.paths=s,n):null}:t==="multipoint"?n=>{const r=this._quantizePoints(n.points,e,i);return r&&r.length>0?(n.points=r,n):null}:t==="extent"?n=>n:null}_getHydrationFunction(t,e,i){return t==="point"?n=>{n.x=e(n.x),n.y=i(n.y)}:t==="polyline"||t==="polygon"?n=>{const r=ph(n)?n.rings:n.paths;let s,o;for(let a=0,l=r.length;a<l;a++){const u=r[a];for(let h=0,p=u.length;h<p;h++){const f=u[h];h>0?(s+=f[0],o+=f[1]):(s=f[0],o=f[1]),f[0]=e(s),f[1]=i(o)}}}:t==="extent"?n=>{n.xmin=e(n.xmin),n.ymin=i(n.ymin),n.xmax=e(n.xmax),n.ymax=i(n.ymax)}:t==="multipoint"?n=>{const r=n.points;let s,o;for(let a=0,l=r.length;a<l;a++){const u=r[a];a>0?(s+=u[0],o+=u[1]):(s=u[0],o=u[1]),u[0]=e(s),u[1]=i(o)}}:null}};c([d({type:String,json:{write:!0}})],yr.prototype,"displayFieldName",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],yr.prototype,"exceededTransferLimit",void 0),c([d({type:[en],json:{write:!0}})],yr.prototype,"features",void 0),c([de("features")],yr.prototype,"readFeatures",null),c([d({type:[xB],json:{write:!0}})],yr.prototype,"fields",void 0),c([d({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:hj.read}}})],yr.prototype,"geometryType",void 0),c([fe("geometryType")],yr.prototype,"writeGeometryType",null),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],yr.prototype,"hasM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],yr.prototype,"hasZ",void 0),c([d({types:xm,json:{write:!0}})],yr.prototype,"queryGeometry",void 0),c([de("queryGeometry")],yr.prototype,"readQueryGeometry",null),c([d({type:Ge,json:{write:!0}})],yr.prototype,"spatialReference",void 0),c([fe("spatialReference")],yr.prototype,"writeSpatialReference",null),c([d({json:{write:!0}})],yr.prototype,"transform",void 0),yr=dj=c([O("esri.rest.support.FeatureSet")],yr),yr.prototype.toJSON.isDefaultToJSON=!0;const ZI=yr,CY={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},Bze={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function Hze(t,e){const i=new Date(t,e+1,1);return i.setDate(0),i.getDate()}function i0(t,e,i){const n=new Date(t.getTime());if(e&&i){const r=Bze[i],{getter:s,setter:o,multiplier:a}=r;if(i==="months"){const l=Hze(n.getFullYear(),n.getMonth()+e);n.getDate()>l&&n.setDate(l)}n[o](n[s]()+e*a)}return n}function IY(t,e){switch(e){case"milliseconds":return new Date(t.getTime());case"seconds":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds());case"minutes":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes());case"hours":return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours());case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate());case"weeks":return new Date(t.getFullYear(),t.getMonth(),t.getDate()-t.getDay());case"months":return new Date(t.getFullYear(),t.getMonth(),1);case"years":return new Date(t.getFullYear(),0,1);case"decades":return new Date(t.getFullYear()-t.getFullYear()%10,0,1);case"centuries":return new Date(t.getFullYear()-t.getFullYear()%100,0,1);default:return new Date}}function Gze(t,e,i){return t===0?0:t*CY[e]/CY[i]}var Jl;let da=Jl=class extends Y{static get allTime(){return TY}static get empty(){return qze}constructor(t){super(t),this.end=null,this.start=null}readEnd(t,e){return e.end!=null?new Date(e.end):null}writeEnd(t,e){e.end=t?t.getTime():null}get isAllTime(){return this.equals(Jl.allTime)}get isEmpty(){return this.equals(Jl.empty)}readStart(t,e){return e.start!=null?new Date(e.start):null}writeStart(t,e){e.start=t?t.getTime():null}clone(){return new Jl({end:this.end,start:this.start})}equals(t){if(!t)return!1;const e=A(this.start)?this.start.getTime():this.start,i=A(this.end)?this.end.getTime():this.end,n=A(t.start)?t.start.getTime():t.start,r=A(t.end)?t.end.getTime():t.end;return e===n&&i===r}expandTo(t){if(this.isEmpty||this.isAllTime)return this.clone();const e=kf(this.start,n=>IY(n,t)),i=kf(this.end,n=>{const r=IY(n,t);return n.getTime()===r.getTime()?r:i0(r,1,t)});return new Jl({start:e,end:i})}intersection(t){if(!t)return this.clone();if(this.isEmpty||t.isEmpty)return Jl.empty;if(this.isAllTime)return t.clone();if(t.isAllTime)return this.clone();const e=Hx(this.start,-1/0,a=>a.getTime()),i=Hx(this.end,1/0,a=>a.getTime()),n=Hx(t.start,-1/0,a=>a.getTime()),r=Hx(t.end,1/0,a=>a.getTime());let s,o;if(n>=e&&n<=i?s=n:e>=n&&e<=r&&(s=e),i>=n&&i<=r?o=i:r>=e&&r<=i&&(o=r),s!=null&&o!=null&&!isNaN(s)&&!isNaN(o)){const a=new Jl;return a.start=s===-1/0?null:new Date(s),a.end=o===1/0?null:new Date(o),a}return Jl.empty}offset(t,e){if(this.isEmpty||this.isAllTime)return this.clone();const i=new Jl,{start:n,end:r}=this;return A(n)&&(i.start=i0(n,t,e)),A(r)&&(i.end=i0(r,t,e)),i}union(t){if(!t||t.isEmpty)return this.clone();if(this.isEmpty)return t.clone();if(this.isAllTime||t.isAllTime)return TY.clone();const e=A(this.start)&&A(t.start)?new Date(Math.min(this.start.getTime(),t.start.getTime())):null,i=A(this.end)&&A(t.end)?new Date(Math.max(this.end.getTime(),t.end.getTime())):null;return new Jl({start:e,end:i})}};c([d({type:Date,json:{write:{allowNull:!0}}})],da.prototype,"end",void 0),c([de("end")],da.prototype,"readEnd",null),c([fe("end")],da.prototype,"writeEnd",null),c([d({readOnly:!0,json:{read:!1}})],da.prototype,"isAllTime",null),c([d({readOnly:!0,json:{read:!1}})],da.prototype,"isEmpty",null),c([d({type:Date,json:{write:{allowNull:!0}}})],da.prototype,"start",void 0),c([de("start")],da.prototype,"readStart",null),c([fe("start")],da.prototype,"writeStart",null),da=Jl=c([O("esri.TimeExtent")],da);const TY=new da,qze=new da({start:void 0,end:void 0}),Zs=da;let Rg=class extends _t(Y){constructor(e){super(e),this.onFields=null,this.operator=null,this.searchTerm=null,this.searchType=null}};c([d({type:[String],json:{write:{enabled:!0,overridePolicy(){return{enabled:A(this.onFields)&&this.onFields.length>0}}}}})],Rg.prototype,"onFields",void 0),c([d({type:String,json:{write:!0}})],Rg.prototype,"operator",void 0),c([d({type:String,json:{write:!0}})],Rg.prototype,"searchTerm",void 0),c([d({type:String,json:{write:!0}})],Rg.prototype,"searchType",void 0),Rg=c([O("esri.rest.support.FullTextSearch")],Rg);const jde=Rg;var pj;const kY=new Fe({upperLeft:"upper-left",lowerLeft:"lower-left"});let Lg=pj=class extends Y{constructor(t){super(t),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new pj(G({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};c([d({type:Dt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Lg.prototype,"extent",void 0),c([d({type:["view","edit"],json:{write:!0}})],Lg.prototype,"mode",void 0),c([d({type:String,json:{read:kY.read,write:kY.write}})],Lg.prototype,"originPosition",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],Lg.prototype,"tolerance",void 0),Lg=pj=c([O("esri.rest.support.QuantizationParameters")],Lg);const Vde=Lg;var fj;const $Y=new Fe({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete",EnvelopeAggregate:"envelope-aggregate",CentroidAggregate:"centroid-aggregate",ConvexHullAggregate:"convex-hull-aggregate"});let Yl=fj=class extends Y{constructor(t){super(t),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(t,e){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(e.statisticParameters=G(t))}clone(){return new fj({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:G(this.statisticParameters)})}};c([d({type:Number,json:{write:!0}})],Yl.prototype,"maxPointCount",void 0),c([d({type:Number,json:{write:!0}})],Yl.prototype,"maxRecordCount",void 0),c([d({type:Number,json:{write:!0}})],Yl.prototype,"maxVertexCount",void 0),c([d({type:String,json:{write:!0}})],Yl.prototype,"onStatisticField",void 0),c([d({type:String,json:{write:!0}})],Yl.prototype,"outStatisticFieldName",void 0),c([d({type:String,json:{read:{source:"statisticType",reader:$Y.read},write:{target:"statisticType",writer:$Y.write}}})],Yl.prototype,"statisticType",void 0),c([d({type:Object})],Yl.prototype,"statisticParameters",void 0),c([fe("statisticParameters")],Yl.prototype,"writeStatisticParameters",null),Yl=fj=c([O("esri.rest.support.StatisticDefinition")],Yl);const Ude=Yl;var L_;const Wze=new Fe({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),Jze=new Fe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ue=L_=class extends Y{static from(t){return $8(L_,t)}constructor(t){super(t),this.aggregateIds=null,this.cacheHint=void 0,this.compactGeometryEnabled=!1,this.datumTransformation=null,this.defaultSpatialReferenceEnabled=!1,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.fullText=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}castDatumTransformation(t){return typeof t=="number"||typeof t=="object"?t:null}writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeParameterValues(t,e){if(t){const i={};for(const n in t){const r=t[n];Array.isArray(r)?i[n]=r.map(s=>s instanceof Date?s.getTime():s):r instanceof Date?i[n]=r.getTime():i[n]=r}e.parameterValues=i}}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,e.where="1=1"}writeWhere(t,e){e.where=t||"1=1"}clone(){return new L_(G({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,compactGeometryEnabled:this.compactGeometryEnabled,datumTransformation:this.datumTransformation,defaultSpatialReferenceEnabled:this.defaultSpatialReferenceEnabled,distance:this.distance,fullText:this.fullText,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:A(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};Ue.MAX_MAX_RECORD_COUNT_FACTOR=5,c([d({json:{write:!0}})],Ue.prototype,"aggregateIds",void 0),c([d({type:Boolean,json:{write:!0}})],Ue.prototype,"cacheHint",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"compactGeometryEnabled",void 0),c([d({json:{write:!0}})],Ue.prototype,"datumTransformation",void 0),c([st("datumTransformation")],Ue.prototype,"castDatumTransformation",null),c([d({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"defaultSpatialReferenceEnabled",void 0),c([d({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],Ue.prototype,"distance",void 0),c([d({type:gc,json:{write:!0}})],Ue.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],Ue.prototype,"formatOf3DObjects",void 0),c([d({type:[jde],json:{write:{enabled:!0,overridePolicy(){return{enabled:A(this.fullText)&&this.fullText.length>0}}}}})],Ue.prototype,"fullText",void 0),c([d({type:String,json:{write:!0}})],Ue.prototype,"gdbVersion",void 0),c([d({types:xm,json:{read:Yr,write:!0}})],Ue.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],Ue.prototype,"geometryPrecision",void 0),c([d({type:[String],json:{write:!0}})],Ue.prototype,"groupByFieldsForStatistics",void 0),c([d({type:String,json:{write:!0}})],Ue.prototype,"having",void 0),c([d({type:Date})],Ue.prototype,"historicMoment",void 0),c([fe("historicMoment")],Ue.prototype,"writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],Ue.prototype,"maxAllowableOffset",void 0),c([d({type:Number,cast:t=>t<1?1:t>L_.MAX_MAX_RECORD_COUNT_FACTOR?L_.MAX_MAX_RECORD_COUNT_FACTOR:t,json:{write:{overridePolicy:t=>({enabled:t>1})}}})],Ue.prototype,"maxRecordCountFactor",void 0),c([d({type:["xyFootprint"],json:{write:!0}})],Ue.prototype,"multipatchOption",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Ue.prototype,"num",void 0),c([d({json:{write:!0}})],Ue.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],Ue.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],Ue.prototype,"outFields",void 0),c([d({type:Ge,json:{name:"outSR",write:!0}})],Ue.prototype,"outSpatialReference",void 0),c([d({type:[Ude],json:{write:{enabled:!0,overridePolicy(){return{enabled:A(this.outStatistics)&&this.outStatistics.length>0}}}}})],Ue.prototype,"outStatistics",void 0),c([d({json:{write:!0}})],Ue.prototype,"parameterValues",void 0),c([fe("parameterValues")],Ue.prototype,"writeParameterValues",null),c([d({type:Ve,json:{write:!0}})],Ue.prototype,"pixelSize",void 0),c([d({type:Vde,json:{write:!0}})],Ue.prototype,"quantizationParameters",void 0),c([d({type:[Object],json:{write:!0}})],Ue.prototype,"rangeValues",void 0),c([d({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],Ue.prototype,"relationParameter",void 0),c([d({type:String,json:{write:!0}})],Ue.prototype,"resultType",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnCentroid",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnDistinctValues",void 0),c([d({type:Boolean,json:{default:!0,write:!0}})],Ue.prototype,"returnExceededLimitFeatures",void 0),c([d({type:Boolean,json:{write:!0}})],Ue.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnQueryGeometry",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Ue.prototype,"returnZ",void 0),c([d({type:Ge,json:{write:!0}})],Ue.prototype,"sourceSpatialReference",void 0),c([Ce(Wze,{ignoreUnknown:!1,name:"spatialRel"})],Ue.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],Ue.prototype,"start",void 0),c([fe("start"),fe("num")],Ue.prototype,"writeStart",null),c([d({type:String,json:{write:!0}})],Ue.prototype,"sqlFormat",void 0),c([d({type:String,json:{write:!0}})],Ue.prototype,"text",void 0),c([d({type:Zs,json:{write:!0}})],Ue.prototype,"timeExtent",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Ue.prototype,"timeReferenceUnknownClient",void 0),c([Ce(Jze,{ignoreUnknown:!1}),d({json:{write:{overridePolicy(t){return{enabled:!!t&&this.distance!=null&&this.distance>0}}}}})],Ue.prototype,"units",void 0),c([d({type:String,json:{write:{overridePolicy(t){return{enabled:t!=null||this.start!=null&&this.start>0}}}}})],Ue.prototype,"where",void 0),c([fe("where")],Ue.prototype,"writeWhere",null),Ue=L_=c([O("esri.rest.support.Query")],Ue);const pl=Ue;async function ID(t,e,i){const n=await Yze(t,e,i);return ZI.fromJSON(n)}async function Yze(t,e,i){const n=r1(t),r={...i},s=pl.from(e),{data:o}=await Vze(n,s,s.sourceSpatialReference,r);return o}function Xr(t,e){return t?e?4:3:e?3:2}const s1=se.getLogger("esri.layers.graphics.featureConversionUtils"),Bde={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},Zze=(t,e,i,n,r,s)=>{t[i]=r,t[i+1]=s},AY=(t,e,i,n,r,s)=>{t[i]=r,t[i+1]=s,t[i+2]=e[n+2]},Kze=(t,e,i,n,r,s)=>{t[i]=r,t[i+1]=s,t[i+2]=e[n+3]},Xze=(t,e,i,n,r,s)=>{t[i]=r,t[i+1]=s,t[i+2]=e[n+2],t[i+3]=e[n+3]};function EB(t,e,i,n){if(t){if(i)return e&&n?Xze:AY;if(e&&n)return Kze}else if(e&&n)return AY;return Zze}function TD({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function kD({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function $D({scale:t,translate:e},i,n){return i*t[n]+e[n]}function mj(t,e,i){return t?e?i?TB(t):CB(t):i?IB(t):_R(t):null}function _R(t){const e=t.coords;return{x:e[0],y:e[1]}}function Hde(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function CB(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function Qze(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function IB(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function e4e(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function TB(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function t4e(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function i4e(t,e,i,n){let r=_R;i&&n?r=TB:i?r=CB:n&&(r=IB);for(const s of e){const{geometry:o,attributes:a}=s,l=A(o)?r(o):null;t.push({attributes:a,geometry:l})}return t}function kB(t,e){return t&&e?t4e:t?Qze:e?e4e:Hde}function Gde(t,e,i,n,r){const s=kB(i,n);for(const{geometry:o,attributes:a}of e){const l=A(o)?s(new Vo,o):null;t.push(new cm(l,a,null,r?a[r]:void 0))}return t}function ebt(t,e,i=kB(e.z!=null,e.m!=null)){return i(t,e)}function n4e(t,e,i,n){for(const{geometry:r,attributes:s}of e)t.push({attributes:s,geometry:A(r)?$B(r,i,n):null});return t}function $B(t,e,i){if(U(t))return null;const n=Xr(e,i),r=[];for(let s=0;s<t.coords.length;s+=n){const o=[];for(let a=0;a<n;a++)o.push(t.coords[s+a]);r.push(o)}return e?i?{points:r,hasZ:e,hasM:i}:{points:r,hasZ:e}:i?{points:r,hasM:i}:{points:r}}function qde(t,e,i,n,r){const s=Xr(i,n);for(const{geometry:o,attributes:a}of e){const l=A(o)?Wde(new Vo,o,s):null;t.push(new cm(l,a,null,r?a[r]:void 0))}return t}function Wde(t,e,i=Xr(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const n=t.coords;let r=0;for(const s of e.points)for(let o=0;o<i;o++)n[r++]=s[o];return t}function r4e(t,e,i,n){for(const{geometry:r,attributes:s}of e)t.push({attributes:s,geometry:A(r)?AB(r,i,n):null});return t}function AB(t,e,i){if(!t)return null;const n=Xr(e,i),{coords:r,lengths:s}=t,o=[];let a=0;for(const l of s){const u=[];for(let h=0;h<l;h++){const p=[];for(let f=0;f<n;f++)p.push(r[a++]);u.push(p)}o.push(u)}return e?i?{paths:o,hasZ:e,hasM:i}:{paths:o,hasZ:e}:i?{paths:o,hasM:i}:{paths:o}}function Jde(t,e,i,n,r){const s=Xr(i,n);for(const{geometry:o,attributes:a}of e){const l=A(o)?Yde(new Vo,o,s):null;t.push(new cm(l,a,null,r?a[r]:void 0))}return t}function Yde(t,e,i=Xr(e.hasZ,e.hasM)){const{lengths:n,coords:r}=t;let s=0;for(const o of e.paths){for(const a of o)for(let l=0;l<i;l++)r[s++]=a[l];n.push(o.length)}return t}function s4e(t,e,i,n){for(const{geometry:r,attributes:s,centroid:o}of e){const a=A(r)?MB(r,i,n):null;if(A(o)){const l=_R(o);t.push({attributes:s,centroid:l,geometry:a})}else t.push({attributes:s,geometry:a})}return t}function MB(t,e,i){if(!t)return null;const n=Xr(e,i),{coords:r,lengths:s}=t,o=[];let a=0;for(const l of s){const u=[];for(let h=0;h<l;h++){const p=[];for(let f=0;f<n;f++)p.push(r[a++]);u.push(p)}o.push(u)}return e?i?{rings:o,hasZ:e,hasM:i}:{rings:o,hasZ:e}:i?{rings:o,hasM:i}:{rings:o}}function Zde(t,e,i,n,r){for(const{geometry:s,centroid:o,attributes:a}of e){const l=A(s)?Kde(new Vo,s,i,n):null,u=r?a[r]:void 0;A(o)?t.push(new cm(l,a,Hde(new Vo,o),u)):t.push(new cm(l,a,null,u))}return t}function Kde(t,e,i=e.hasZ,n=e.hasM){return o4e(t,e.rings,i,n),t}function o4e(t,e,i,n){const r=Xr(i,n),{lengths:s,coords:o}=t;let a=0;fh(t);for(const l of e){for(const u of l)for(let h=0;h<r;h++)o[a++]=u[h];s.push(l.length)}return t}const D_=[],EE=[];function tbt(t,e,i,n,r){D_[0]=t;const[s]=Xde(EE,D_,e,i,n,r);return Dc(D_),Dc(EE),s}function Xde(t,e,i,n,r,s){if(Dc(t),!i){for(const o of e){const a=s?o.attributes[s]:void 0;t.push(new cm(null,o.attributes,null,a))}return t}switch(i){case"esriGeometryPoint":return Gde(t,e,n,r,s);case"esriGeometryMultipoint":return qde(t,e,n,r,s);case"esriGeometryPolyline":return Jde(t,e,n,r,s);case"esriGeometryPolygon":return Zde(t,e,n,r,s);default:s1.error("convertToFeatureSet:unknown-geometry",new N(`Unable to parse unknown geometry type '${i}'`)),Dc(t)}return t}function ibt(t,e,i,n,r,s){const o=t.length;switch(i){case"esriGeometryPoint":Gde(t,e,n,r,s);break;case"esriGeometryMultipoint":qde(t,e,n,r,s);break;case"esriGeometryPolyline":Jde(t,e,n,r,s);break;case"esriGeometryPolygon":Zde(t,e,n,r,s);break;default:s1.error("convertToFeatureSet:unknown-geometry",new N(`Unable to parse unknown geometry type '${i}'`))}for(let a=0;a<e.length;a++)t[a+o].geometryType=i,t[a+o].insertAfter=e[a].insertAfter,t[a+o].groupId=e[a].groupId;return t}function nbt(t,e,i,n){EE[0]=t,Qde(D_,EE,e,i,n);const r=D_[0];return Dc(D_),Dc(EE),r}function rbt(t,e,i){if(U(t))return null;const n=new Vo;return"hasZ"in t&&e==null&&(e=t.hasZ),"hasM"in t&&i==null&&(i=t.hasM),NP(t)?kB(e??t.z!=null,i??t.m!=null)(n,t):ph(t)?Kde(n,t,e,i):MI(t)?Yde(n,t,Xr(e,i)):FP(t)?Wde(n,t,Xr(e,i)):void s1.error("convertFromGeometry:unknown-geometry",new N(`Unable to parse unknown geometry type '${t}'`))}function a4e(t,e,i,n){const r=t&&("coords"in t?t:t.geometry);if(U(r))return null;switch(e){case"esriGeometryPoint":{let s=_R;return i&&n?s=TB:i?s=CB:n&&(s=IB),s(r)}case"esriGeometryMultipoint":return $B(r,i,n);case"esriGeometryPolyline":return AB(r,i,n);case"esriGeometryPolygon":return MB(r,i,n);default:return s1.error("convertToGeometry:unknown-geometry",new N(`Unable to parse unknown geometry type '${e}'`)),null}}function l4e(t,e){for(const i of e)t.push({attributes:i.attributes});return t}function Qde(t,e,i,n,r){if(Dc(t),U(i))return l4e(t,e);switch(i){case"esriGeometryPoint":return i4e(t,e,n,r);case"esriGeometryMultipoint":return n4e(t,e,n,r);case"esriGeometryPolyline":return r4e(t,e,n,r);case"esriGeometryPolygon":return s4e(t,e,n,r);default:s1.error("convertToFeatureSet:unknown-geometry",new N(`Unable to parse unknown geometry type '${i}'`))}return t}function sbt(t){const{objectIdFieldName:e,spatialReference:i,transform:n,fields:r,hasM:s,hasZ:o,features:a,geometryType:l,exceededTransferLimit:u,uniqueIdField:h,queryGeometry:p,queryGeometryType:f}=t,g={features:Qde([],a,l,o,s),fields:r,geometryType:l,objectIdFieldName:e,spatialReference:i,uniqueIdField:h,queryGeometry:a4e(p,f,!1,!1)};return n&&(g.transform=n),u&&(g.exceededTransferLimit=u),s&&(g.hasM=s),o&&(g.hasZ=o),g}function obt(t,e){const i=new Fde,{hasM:n,hasZ:r,features:s,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:u,transform:h,fields:p}=t;return p&&(i.fields=p),i.geometryType=l??null,i.objectIdFieldName=o??e??null,i.spatialReference=a??null,i.objectIdFieldName?(s&&Xde(i.features,s,l,r,n,i.objectIdFieldName),u&&(i.exceededTransferLimit=u),n&&(i.hasM=n),r&&(i.hasZ=r),h&&(i.transform=h),i):(s1.error(new N("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),i)}function abt(t){const{transform:e,features:i,hasM:n,hasZ:r}=t;if(!e)return t;for(const s of i)A(s.geometry)&&MY(s.geometry,s.geometry,n,r,e),A(s.centroid)&&MY(s.centroid,s.centroid,n,r,e);return t.transform=null,t}function lbt(t,e){const{geometryType:i,features:n,hasM:r,hasZ:s}=e;if(!t)return e;for(let o=0;o<n.length;o++){const a=n[o],l=a.weakClone();l.geometry=new Vo,BC(l.geometry,a.geometry,r,s,i,t),a.centroid&&(l.centroid=new Vo,BC(l.centroid,a.centroid,r,s,"esriGeometryPoint",t)),n[o]=l}return e.transform=t,e}function BC(t,e,i,n,r,s,o=i,a=n){if(fh(t),U(e)||!e.coords.length)return null;const l=Bde[r],{coords:u,lengths:h}=e,p=Xr(i,n),f=Xr(i&&o,n&&a),g=EB(i,n,o,a);if(!h.length)return g(t.coords,u,0,0,TD(s,u[0]),kD(s,u[1])),fh(t,p,0),t;let v,b,_,w,S=0,C=0,$=C;for(const M of h){if(M<l)continue;let P=0;C=$,_=v=TD(s,u[S]),w=b=kD(s,u[S+1]),g(t.coords,u,C,S,_,w),P++,S+=p,C+=f;for(let k=1;k<M;k++,S+=p)_=TD(s,u[S]),w=kD(s,u[S+1]),_===v&&w===b||(g(t.coords,u,C,S,_-v,w-b),C+=f,P++,v=_,b=w);P>=l&&(t.lengths.push(P),$=C)}return Dc(t.coords,$),t.coords.length?t:null}function c4e(t,e,i,n,r,s,o=i,a=n){if(fh(t),!e||!e.coords.length)return null;const l=Bde[r],{coords:u,lengths:h}=e,p=Xr(i,n),f=Xr(i&&o,n&&a),g=EB(i,n,o,a);if(!h.length)return g(t.coords,u,0,0,u[0],u[1]),fh(t,p,0),t;let v=0;const b=s*s;for(const _ of h){if(_<l){v+=_*p;continue}const w=t.coords.length/f,S=v,C=v+(_-1)*p;g(t.coords,u,t.coords.length,S,u[S],u[S+1]),gj(t.coords,u,p,b,g,S,C),g(t.coords,u,t.coords.length,C,u[C],u[C+1]);const $=t.coords.length/f-w;$>=l?t.lengths.push($):Dc(t.coords,w*f),v+=_*p}return t.coords.length?t:null}function u4e(t,e,i,n){const r=t[e],s=t[e+1],o=t[i],a=t[i+1],l=t[n],u=t[n+1];let h=o,p=a,f=l-h,g=u-p;if(f!==0||g!==0){const v=((r-h)*f+(s-p)*g)/(f*f+g*g);v>1?(h=l,p=u):v>0&&(h+=f*v,p+=g*v)}return f=r-h,g=s-p,f*f+g*g}function gj(t,e,i,n,r,s,o){let a,l=n,u=0;for(let h=s+i;h<o;h+=i)a=u4e(e,h,s,o),a>l&&(u=h,l=a);l>n&&(u-s>i&&gj(t,e,i,n,r,s,u),r(t,e,t.length,u,e[u],e[u+1]),o-u>i&&gj(t,e,i,n,r,u,o))}function cbt(t,e,i,n){if(U(e)||!e.coords||!e.coords.length)return null;const r=Xr(i,n);let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(e&&e.coords){const u=e.coords;for(let h=0;h<u.length;h+=r){const p=u[h],f=u[h+1];s=Math.min(s,p),a=Math.max(a,p),o=Math.min(o,f),l=Math.max(l,f)}}return Nz(t)?PMe(t,s,o,a,l):EMe(s,o,a,l,t),t}function MY(t,e,i,n,r){const{coords:s,lengths:o}=e,a=Xr(i,n);if(!s.length)return t!==e&&fh(t),t;Du(r);const{originPosition:l,scale:u,translate:h}=r,p=p4e;p.originPosition=l;const f=p.scale;f[0]=u[0]??1,f[1]=-(u[1]??1),f[2]=u[2]??1,f[3]=u[3]??1;const g=p.translate;if(g[0]=h[0]??0,g[1]=h[1]??0,g[2]=h[2]??0,g[3]=h[3]??0,!o.length){for(let b=0;b<a;++b)t.coords[b]=$D(p,s[b],b);return t!==e&&fh(t,a,0),t}let v=0;for(let b=0;b<o.length;b++){const _=o[b];t.lengths[b]=_;for(let C=0;C<a;++C)t.coords[v+C]=$D(p,s[v+C],C);let w=t.coords[v],S=t.coords[v+1];v+=a;for(let C=1;C<_;C++,v+=a){w+=s[v]*f[0],S+=s[v+1]*f[1],t.coords[v]=w,t.coords[v+1]=S;for(let $=2;$<a;++$)t.coords[v+$]=$D(p,s[v+$],$)}}return t!==e&&fh(t,s.length,o.length),t}function d4e(t,e,i,n,r,s){if(fh(t),t.lengths.push(...e.lengths),i===r&&n===s)for(let o=0;o<e.coords.length;o++)t.coords.push(e.coords[o]);else{const o=Xr(i,n),a=EB(i,n,r,s),l=e.coords;for(let u=0;u<l.length;u+=o)a(t.coords,l,t.coords.length,u,l[u],l[u+1])}return t}function h4e(t,e,i,n){let r=0,s=t[n*e],o=t[n*(e+1)];for(let a=1;a<i;a++){const l=s+t[n*(e+a)],u=o+t[n*(e+a)+1],h=(l-s)*(u+o);s=l,o=u,r+=h}return .5*r}function ubt(t,e){const{coords:i,lengths:n}=t;let r=0,s=0;for(let o=0;o<n.length;o++){const a=n[o];s+=h4e(i,r,a,e),r+=a}return Math.abs(s)}function dbt(t,e){if(U(t))return null;const i=t.clone(),n=t.coords,r=t.lengths;let s=0;for(let o=0;o<r.length;o++){const a=r[o];let l=n[e*s],u=n[e*s+1];for(let h=1;h<a;h++){const p=l+n[e*(s+h)],f=u+n[e*(s+h)+1];i.coords[e*(s+h)]=p,i.coords[e*(s+h)+1]=f,l=p,u=f}s+=a}return i}function fh(t,e=0,i=0){Dc(t.lengths,i),Dc(t.coords,e)}function Dc(t,e=0){t.length!==e&&(t.length=e)}const p4e={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]};var yj;let Li=yj=class extends Y{constructor(t){super(t),this.cacheHint=void 0,this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(t,e){e.historicMoment=t&&t.getTime()}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(e.definitionExpression="1=1")}clone(){return new yj(G({cacheHint:this.cacheHint,dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};c([d({type:Boolean,json:{write:!0}})],Li.prototype,"cacheHint",void 0),c([d({type:gc,json:{write:!0}})],Li.prototype,"dynamicDataSource",void 0),c([d({type:String,json:{write:!0}})],Li.prototype,"gdbVersion",void 0),c([d({type:Number,json:{write:!0}})],Li.prototype,"geometryPrecision",void 0),c([d({type:Date})],Li.prototype,"historicMoment",void 0),c([fe("historicMoment")],Li.prototype,"_writeHistoricMoment",null),c([d({type:Number,json:{write:!0}})],Li.prototype,"maxAllowableOffset",void 0),c([d({type:[Number],json:{write:!0}})],Li.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],Li.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],Li.prototype,"outFields",void 0),c([d({type:Ge,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Li.prototype,"outSpatialReference",void 0),c([d({json:{write:!0}})],Li.prototype,"relationshipId",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],Li.prototype,"start",void 0),c([fe("start"),fe("num")],Li.prototype,"writeStart",null),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],Li.prototype,"num",void 0),c([d({json:{write:!0}})],Li.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Li.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],Li.prototype,"returnZ",void 0),c([d({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],Li.prototype,"where",void 0),Li=yj=c([O("esri.rest.support.RelationshipQuery")],Li),Li.from=Ht(Li);const gw=Li,hbt=Object.freeze(Object.defineProperty({__proto__:null,default:gw},Symbol.toStringTag,{value:"Module"}));var vj;let Kv=vj=class extends Y{constructor(t){super(t),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new vj({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};c([d({type:[String],json:{write:!0}})],Kv.prototype,"groupByFields",void 0),c([d({type:Number,json:{write:!0}})],Kv.prototype,"topCount",void 0),c([d({type:[String],json:{write:!0}})],Kv.prototype,"orderByFields",void 0),Kv=vj=c([O("esri.rest.support.TopFilter")],Kv);const f4e=Kv;var bj;const OY=new Fe({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),PY=new Fe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let pi=bj=class extends Y{constructor(t){super(t),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(t,e){e.resultOffset=this.start,e.resultRecordCount=this.num||10}clone(){return new bj(G({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};c([d({type:Boolean,json:{write:!0}})],pi.prototype,"cacheHint",void 0),c([d({type:Number,json:{write:{overridePolicy:t=>({enabled:t>0})}}})],pi.prototype,"distance",void 0),c([d({types:xm,json:{read:Yr,write:!0}})],pi.prototype,"geometry",void 0),c([d({type:Number,json:{write:!0}})],pi.prototype,"geometryPrecision",void 0),c([d({type:Number,json:{write:!0}})],pi.prototype,"maxAllowableOffset",void 0),c([d({type:Number,json:{read:{source:"resultRecordCount"}}})],pi.prototype,"num",void 0),c([d({json:{write:!0}})],pi.prototype,"objectIds",void 0),c([d({type:[String],json:{write:!0}})],pi.prototype,"orderByFields",void 0),c([d({type:[String],json:{write:!0}})],pi.prototype,"outFields",void 0),c([d({type:Ge,json:{read:{source:"outSR"},write:{target:"outSR"}}})],pi.prototype,"outSpatialReference",void 0),c([d({type:String,json:{write:!0}})],pi.prototype,"resultType",void 0),c([d({json:{write:!0}})],pi.prototype,"returnGeometry",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pi.prototype,"returnM",void 0),c([d({type:Boolean,json:{write:{overridePolicy:t=>({enabled:t})}}})],pi.prototype,"returnZ",void 0),c([d({type:Number,json:{read:{source:"resultOffset"}}})],pi.prototype,"start",void 0),c([fe("start"),fe("num")],pi.prototype,"writeStart",null),c([d({type:String,json:{read:{source:"spatialRel",reader:OY.read},write:{target:"spatialRel",writer:OY.write}}})],pi.prototype,"spatialRelationship",void 0),c([d({type:Zs,json:{write:!0}})],pi.prototype,"timeExtent",void 0),c([d({type:f4e,json:{write:!0}})],pi.prototype,"topFilter",void 0),c([d({type:String,json:{read:PY.read,write:{writer:PY.write,overridePolicy(t){return{enabled:A(t)&&A(this.distance)&&this.distance>0}}}}})],pi.prototype,"units",void 0),c([d({type:String,json:{write:!0}})],pi.prototype,"where",void 0),pi=bj=c([O("esri.rest.support.TopFeaturesQuery")],pi),pi.from=Ht(pi);const ST=pi,m4e="esri.widgets.Feature.support.relatedFeatureUtils",RY=se.getLogger(m4e),LY=new Map;function F$(t){if(!lh(t))return null;const[e,i]=t.split("/").slice(1);return{layerId:e,fieldName:i}}function g4e(t,e){if(!e.relationships)return null;let i=null;const{relationships:n}=e;return n.some(r=>r.id===parseInt(t,10)&&(i=r,!0)),i}function y4e({originRelationship:t,relationships:e,layerId:i}){let n=null;return e&&e.some(r=>(`${r.relatedTableId}`===i&&r.id===(t==null?void 0:t.id)&&(n=r),!!n)),n}function v4e(t,e){const i=e.toLowerCase();for(const n in t)if(n.toLowerCase()===i)return t[n];return null}function b4e(t,e){const i=g4e(t,e);if(i)return{url:`${e.url}/${i.relatedTableId}`,sourceSpatialReference:e.spatialReference,relation:i,relatedFields:[],outStatistics:[]}}function _4e(t,e){if(!e||!t)return;const{features:i,statsFeatures:n}=t,r=i&&i.value;e.relatedFeatures=r?r.features:[];const s=n&&n.value;e.relatedStatsFeatures=s?s.features:[]}function w4e(t,e,i,n){var s;const r=new gw;return r.outFields=["*"],r.relationshipId=typeof e.id=="number"?e.id:parseInt(e.id,10),r.objectIds=[t.attributes[i.objectIdField]],((s=i.queryRelatedFeatures)==null?void 0:s.call(i,r,n))??Promise.resolve({})}function x4e(t,e,i){let n=0;const r=[];for(;n<e.length;)r.push(`${t} IN (${e.slice(n,i+n)})`),n+=i;return r.join(" OR ")}async function S4e(t,e,i,n){const r=i.layerId.toString(),{layerInfo:s,relation:o,relatedFields:a,outStatistics:l,url:u,sourceSpatialReference:h}=e;if(!s||!o)return null;const p=y4e({originRelationship:o,relationships:s.relationships,layerId:r});if(p!=null&&p.relationshipTableId&&p.keyFieldInRelationshipTable){const g=(await w4e(t,p,i,n))[t.attributes[i.objectIdField]];if(!g)return null;const v=g.features.map(b=>b.attributes[s.objectIdField]);if(l!=null&&l.length&&s.supportsStatistics){const b=new pl;b.where=x4e(s.objectIdField,v,1e3),b.outFields=a,b.outStatistics=l,b.sourceSpatialReference=h;const _={features:Promise.resolve(g),statsFeatures:ID(u,b)};return Zi(_)}}const f=p==null?void 0:p.keyField;if(f){const g=_c(k4e(s.fields,f)),v=v4e(t.attributes,o.keyField),b=g?`${f}=${v}`:`${f}='${v}'`,_=ID(u,new pl({where:b,outFields:e.relatedFields,sourceSpatialReference:h}),n),w=e.outStatistics&&e.outStatistics.length>0&&s.supportsStatistics?ID(u,new pl({where:b,outFields:e.relatedFields,outStatistics:e.outStatistics,sourceSpatialReference:h}),n):null,S={features:_};return w&&(S.statsFeatures=w),Zi(S)}return null}function E4e(t,e){return rt(t,{query:{f:"json"},signal:e&&e.signal})}function C4e({relatedInfos:t,layer:e},i){const n={};return t.forEach((r,s)=>{const{relation:o}=r;if(!o){const p=new N("relation-required","A relation is required on a layer to retrieve related records.");throw RY.error(p),p}const{relatedTableId:a}=o;if(typeof a!="number"){const p=new N("A related table ID is required on a layer to retrieve related records.");throw RY.error(p),p}const l=`${e.url}/${a}`,u=LY.get(l),h=u||E4e(l);u||LY.set(l,h),n[s]=h}),D8(Zi(n),i)}function I4e({graphic:t,relatedInfos:e,layer:i},n){const r={};return e.forEach((s,o)=>{s.layerInfo&&(r[o]=S4e(t,s,i,n))}),Zi(r)}function T4e({relatedInfo:t,fieldName:e,fieldInfo:i}){var n,r;if((n=t.relatedFields)==null||n.push(e),i.statisticType){const s=new Ude({statisticType:i.statisticType,onStatisticField:e,outStatisticFieldName:e});(r=t.outStatistics)==null||r.push(s)}}function k4e(t,e){if(t!=null){e=e.toLowerCase();for(const i of t)if(i&&i.name.toLowerCase()===e)return i}return null}const DY={chartAnimation:!0};let $n=class extends _e{constructor(e){super(e),this.abilities={...DY},this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.isAggregate=!1,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}castAbilities(e){return{...DY,...e}}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:i}=this,n=(e+i)%i;this.activeMediaInfoIndex=n}_pageContentElementMedia(e){const{activeMediaInfoIndex:i}=this,n=i+e;this._setContentElementMedia(n)}_formatMediaInfos(){const{mediaInfos:e,layer:i}=this,n=this.attributes??{},r=this.formattedAttributes??{},s=this.expressionAttributes??{},o=this.fieldInfoMap??new Map;return(e==null?void 0:e.map(a=>{const l=a==null?void 0:a.clone();if(!l)return null;if(l.title=Uy({attributes:n,fieldInfoMap:o,globalAttributes:r,expressionAttributes:s,layer:i,text:l.title}),l.caption=Uy({attributes:n,fieldInfoMap:o,globalAttributes:r,expressionAttributes:s,layer:i,text:l.caption}),l.altText=Uy({attributes:n,fieldInfoMap:o,globalAttributes:r,expressionAttributes:s,layer:i,text:l.altText}),l.type==="image"){const{value:u}=l;return this._setImageValue({value:u,formattedAttributes:r,layer:i}),l.value.sourceURL?l:void 0}if(l.type==="pie-chart"||l.type==="line-chart"||l.type==="column-chart"||l.type==="bar-chart"){const{value:u}=l;return this._setChartValue({value:u,chartType:l.type,attributes:n,formattedAttributes:r,layer:i,expressionAttributes:s}),l}return null}).filter(A))??[]}_setImageValue(e){const i=this.fieldInfoMap??new Map,{value:n,formattedAttributes:r,layer:s}=e,{linkURL:o,sourceURL:a}=n;if(a){const l=U4(a,s);n.sourceURL=V4({formattedAttributes:r,template:l,fieldInfoMap:i})}if(o){const l=U4(o,s);n.linkURL=V4({formattedAttributes:r,template:l,fieldInfoMap:i})}}_setChartValue(e){const{value:i,attributes:n,formattedAttributes:r,chartType:s,layer:o,expressionAttributes:a}=e,{popupTemplate:l,relatedInfos:u}=this,{fields:h,normalizeField:p}=i,f=o;if(i.fields=jFe(h,f),p&&(i.normalizeField=jC(p,f)),!h.some(v=>!!(r[v]!=null||lh(v)&&(u!=null&&u.size))))return;const g=(l==null?void 0:l.fieldInfos)??[];h.forEach(v=>{if(lh(v))return void(i.series=[...i.series,...this._getRelatedChartInfos({fieldInfos:g,fieldName:v,formattedAttributes:r,chartType:s,value:i})]);const b=this._getChartOption({value:i,attributes:n,chartType:s,formattedAttributes:r,expressionAttributes:a,fieldName:v,fieldInfos:g});i.series.push(b)})}_getRelatedChartInfos(e){var g;const{fieldInfos:i,fieldName:n,formattedAttributes:r,chartType:s,value:o}=e,a=[],l=F$(n),u=l&&((g=this.relatedInfos)==null?void 0:g.get(l.layerId.toString()));if(!u)return a;const{relatedFeatures:h,relation:p}=u;if(!p||!h)return a;const{cardinality:f}=p;return h.forEach(v=>{const{attributes:b}=v;b&&Object.keys(b).forEach(_=>{_===l.fieldName&&a.push(this._getChartOption({value:o,attributes:b,formattedAttributes:r,fieldName:n,chartType:s,relatedFieldName:_,hasMultipleRelatedFeatures:(h==null?void 0:h.length)>1,fieldInfos:i}))})}),f==="one-to-many"||f==="many-to-many"?a:[a[0]]}_getTooltip({label:e,value:i,chartType:n}){return n==="pie-chart"?`${e}`:`${e}: ${i}`}_getChartOption(e){var P;const{value:i,attributes:n,formattedAttributes:r,expressionAttributes:s,fieldName:o,relatedFieldName:a,fieldInfos:l,chartType:u,hasMultipleRelatedFeatures:h}=e,p=this.layer,f=this.fieldInfoMap??new Map,{normalizeField:g,tooltipField:v}=i,b=g?lh(g)?n[F$(g).fieldName]:n[g]:null,_=sB(o)&&s&&s[o]!==void 0?s[o]:a&&n[a]!==void 0?n[a]:n[o]!==void 0?n[o]:r[o],w=new Sae({fieldName:o,value:_===void 0?null:_&&b?_/b:_});if(lh(o)){const k=f.get(o.toLowerCase()),D=v&&f.get(v.toLowerCase()),z=(k==null?void 0:k.fieldName)??o,B=h&&v?F$(v).fieldName:(D==null?void 0:D.fieldName)??v,j=h&&B?n[B]:r[B]??(k==null?void 0:k.label)??(k==null?void 0:k.fieldName)??a,K=h&&a?n[a]:r[z];return w.tooltip=this._getTooltip({label:j,value:K,chartType:u}),w}const S=Jue(l,o),C=jC(o,p),$=v&&r[v]!==void 0?r[v]:que(S||new Yw({fieldName:C}),(P=this.popupTemplate)==null?void 0:P.expressionInfos),M=r[C];return w.tooltip=this._getTooltip({label:$,value:M,chartType:u}),w}};c([d()],$n.prototype,"abilities",void 0),c([st("abilities")],$n.prototype,"castAbilities",null),c([d()],$n.prototype,"activeMediaInfoIndex",void 0),c([d({readOnly:!0})],$n.prototype,"activeMediaInfo",null),c([d()],$n.prototype,"attributes",void 0),c([d()],$n.prototype,"description",void 0),c([d()],$n.prototype,"fieldInfoMap",void 0),c([d()],$n.prototype,"formattedAttributes",void 0),c([d()],$n.prototype,"expressionAttributes",void 0),c([d({readOnly:!0})],$n.prototype,"formattedMediaInfos",null),c([d()],$n.prototype,"isAggregate",void 0),c([d()],$n.prototype,"layer",void 0),c([d({readOnly:!0})],$n.prototype,"formattedMediaInfoCount",null),c([d()],$n.prototype,"mediaInfos",void 0),c([d()],$n.prototype,"popupTemplate",void 0),c([d()],$n.prototype,"relatedInfos",void 0),c([d()],$n.prototype,"title",void 0),$n=c([O("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],$n);const Hy=$n;var FY=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],$4e=[].concat(FY.slice(30,39),FY.slice(28,30).reverse()),A4e=[{name:"default",colors:$4e},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const NY="en-us",OB=new Map([["ar",()=>q(()=>import("./ar-bb1fe5ab.js"),["assets/ar-bb1fe5ab.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.a)],["bg-bg",()=>q(()=>import("./bg_BG-184a2bfa.js"),["assets/bg_BG-184a2bfa.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.b)],["bs-ba",()=>q(()=>import("./bs_BA-f32cc344.js"),["assets/bs_BA-f32cc344.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.b)],["ca-es",()=>q(()=>import("./ca_ES-d17ee95b.js"),["assets/ca_ES-d17ee95b.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.c)],["cs-cz",()=>q(()=>import("./cs_CZ-bcd1e782.js"),["assets/cs_CZ-bcd1e782.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.c)],["da-dk",()=>q(()=>import("./da_DK-27b1b06e.js"),["assets/da_DK-27b1b06e.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.d)],["de-de",()=>q(()=>import("./de_DE-c0a1d8dd.js"),["assets/de_DE-c0a1d8dd.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.d)],["de-ch",()=>q(()=>import("./de_CH-be7b4255.js"),["assets/de_CH-be7b4255.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.d)],["el-gr",()=>q(()=>import("./el_GR-05fb9ec0.js"),["assets/el_GR-05fb9ec0.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.e)],["en-us",()=>q(()=>import("./en_US-170979d8.js"),["assets/en_US-170979d8.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.e)],["en-ca",()=>q(()=>import("./en_CA-170979d8.js"),["assets/en_CA-170979d8.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.e)],["es-es",()=>q(()=>import("./es_ES-d0b66640.js"),["assets/es_ES-d0b66640.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.e)],["et-ee",()=>q(()=>import("./et_EE-56dd74d3.js"),["assets/et_EE-56dd74d3.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.e)],["fi-fi",()=>q(()=>import("./fi_FI-91d58cb9.js"),["assets/fi_FI-91d58cb9.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.f)],["fr-fr",()=>q(()=>import("./fr_FR-a11503e0.js"),["assets/fr_FR-a11503e0.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.f)],["he-il",()=>q(()=>import("./he_IL-90db98c4.js"),["assets/he_IL-90db98c4.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.h)],["hr-hr",()=>q(()=>import("./hr_HR-fac8bb29.js"),["assets/hr_HR-fac8bb29.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.h)],["hu-hu",()=>q(()=>import("./hu_HU-e8803856.js"),["assets/hu_HU-e8803856.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.h)],["id-id",()=>q(()=>import("./id_ID-86e57d06.js"),["assets/id_ID-86e57d06.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.i)],["it-it",()=>q(()=>import("./it_IT-2d4485ba.js"),["assets/it_IT-2d4485ba.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.i)],["ja-jp",()=>q(()=>import("./ja_JP-77c6c16d.js"),["assets/ja_JP-77c6c16d.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.j)],["ko-kr",()=>q(()=>import("./ko_KR-e155b9ab.js"),["assets/ko_KR-e155b9ab.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.k)],["lt-lt",()=>q(()=>import("./lt_LT-fde47ae9.js"),["assets/lt_LT-fde47ae9.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.l)],["lv-lv",()=>q(()=>import("./lv_LV-359be050.js"),["assets/lv_LV-359be050.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.l)],["nb-no",()=>q(()=>import("./nb_NO-30d57c1a.js"),["assets/nb_NO-30d57c1a.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.n)],["nl-nl",()=>q(()=>import("./nl_NL-cb904b48.js"),["assets/nl_NL-cb904b48.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.n)],["pl-pl",()=>q(()=>import("./pl_PL-58c54c9f.js"),["assets/pl_PL-58c54c9f.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.p)],["pt-br",()=>q(()=>import("./pt_BR-d2e10248.js"),["assets/pt_BR-d2e10248.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.p)],["pt-pt",()=>q(()=>import("./pt_PT-65a41842.js"),["assets/pt_PT-65a41842.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.p)],["ro-ro",()=>q(()=>import("./ro_RO-15e90e9f.js"),["assets/ro_RO-15e90e9f.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.r)],["ru-ru",()=>q(()=>import("./ru_RU-a74d21e5.js"),["assets/ru_RU-a74d21e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.r)],["sk-sk",()=>q(()=>import("./sk_SK-a928dbd1.js"),["assets/sk_SK-a928dbd1.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.s)],["sl-sl",()=>q(()=>import("./sl_SL-1a3c3078.js"),["assets/sl_SL-1a3c3078.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.s)],["sr-rs",()=>q(()=>import("./sr_RS-0b18b911.js"),["assets/sr_RS-0b18b911.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.s)],["sv-se",()=>q(()=>import("./sv_SE-ce7e3f84.js"),["assets/sv_SE-ce7e3f84.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.s)],["th-th",()=>q(()=>import("./th_TH-1448f333.js"),["assets/th_TH-1448f333.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.t)],["tr-tr",()=>q(()=>import("./tr_TR-dd92f630.js"),["assets/tr_TR-dd92f630.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.t)],["uk-ua",()=>q(()=>import("./uk_UA-fe4434ed.js"),["assets/uk_UA-fe4434ed.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.u)],["vi-vn",()=>q(()=>import("./vi_VN-41938633.js"),["assets/vi_VN-41938633.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.v)],["zh-cn",()=>q(()=>import("./zh_Hans-524a1291.js"),["assets/zh_Hans-524a1291.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.z)],["zh-hk",()=>q(()=>import("./zh_Hant-0e1f08e5.js"),["assets/zh_Hant-0e1f08e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.z)],["zh-tw",()=>q(()=>import("./zh_Hant-0e1f08e5.js"),["assets/zh_Hant-0e1f08e5.js","assets/_commonjsHelpers-2f3e7994.js","assets/_commonjs-dynamic-modules-42bbacb3.js"]).then(t=>t.z)]]);function M4e(t){const e=t.split("-")[0].toLowerCase();let i=null;for(const n of OB.keys())if(n.startsWith(e)){i=n;break}return i}function O4e(t){return t?OB.has(t.toLowerCase())?t.toLowerCase():M4e(t)||NY:NY}let sv=null,rx=null;async function P4e(t=sr()){if(t=O4e(t),sv&&t===rx)return sv;sv=q(()=>import("./index-b94deac7.js"),["assets/index-b94deac7.js","assets/_commonjsHelpers-2f3e7994.js"]).then(e=>e.i),rx=t;try{const[e,i]=await Promise.all([sv,OB.get(rx)()]);rx===t&&(e.am4core.options.defaultLocale=i.default),e.am4core.options.suppressWarnings=!0,e.am4core.options.autoDispose=!0}catch{return sv=null,rx=null,null}return sv}function R4e(t,e="default"){const i=A4e.find(n=>n.name===e);return i?i.colors.map(n=>t.color(n)):null}const ks="esri-feature-media",Gi={base:ks,mediaContainer:`${ks}__container`,mediaItemContainer:`${ks}__item-container`,mediaItem:`${ks}__item`,mediaItemTitle:`${ks}__item-title`,mediaItemCaption:`${ks}__item-caption`,mediaPrevious:`${ks}__previous`,mediaPreviousIconLTR:`${ks}__previous-icon`,mediaPreviousIconRTL:`${ks}__previous-icon--rtl`,mediaNext:`${ks}__next`,mediaNextIconLTR:`${ks}__next-icon`,mediaNextIconRTL:`${ks}__next-icon--rtl`,mediaChart:`${ks}__chart`,mediaButton:`${ks}__button`,mediaIcon:`${ks}__icon`,iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},AD=.05,MD=.95,OD=15,ad="color",np="tooltip",sx="value",zY="default-line-value";let uo=class extends qt{constructor(e,i){super(e,i),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.viewModel=new Hy,this.messages=null,this._getChartDependencies=async n=>{const r=await P4e(),{destroyed:s,viewModel:o}=this;if(s||!o||!n)return;const{activeMediaInfo:a}=o,l=await this._getRendererColors(r);this._renderChart({chartDiv:n,mediaInfo:a,chartsModule:r,colorMap:l})}}initialize(){this._featureElementInfo=new lR,this.addHandles([X(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.activeMediaInfo,(i=this.viewModel)==null?void 0:i.activeMediaInfoIndex]},()=>this._setupMediaRefreshTimer(),ut),X(()=>{var e,i;return[(e=this.viewModel)==null?void 0:e.description,(i=this.viewModel)==null?void 0:i.title]},()=>this._setupFeatureElementInfo(),ut)])}destroy(){var e;this._clearMediaRefreshTimer(),(e=this._featureElementInfo)==null||e.destroy()}get attributes(){return this.viewModel.attributes}set attributes(e){this.viewModel.attributes=e}get activeMediaInfoIndex(){return this.viewModel.activeMediaInfoIndex}set activeMediaInfoIndex(e){this.viewModel.activeMediaInfoIndex=e}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get fieldInfoMap(){return this.viewModel.fieldInfoMap}set fieldInfoMap(e){this.viewModel.fieldInfoMap=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get mediaInfos(){return this.viewModel.mediaInfos}set mediaInfos(e){this.viewModel.mediaInfos=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get relatedInfos(){return this.viewModel.relatedInfos}set relatedInfos(e){this.viewModel.relatedInfos=e}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}render(){var e;return L("div",{bind:this,class:Gi.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?L("div",{key:"media-element-container",class:Gi.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:i}=this,{activeMediaInfoIndex:n,formattedMediaInfoCount:r}=this.viewModel,{value:s,refreshInterval:o,altText:a,title:l,type:u}=e,{sourceURL:h,linkURL:p}=s,f=Gue(p??void 0)?"_blank":"_self",g=f==="_blank"?"noreferrer":"",v=o?i:null,b=v?v.timestamp:0,_=v?v.sourceURL:h,w=L("img",{alt:a||l,key:`media-${u}-${n}-${r}-${b}`,src:_??void 0});return(p?L("a",{title:l,href:p,rel:g,target:f},w):null)||w}renderChartMediaInfo(e){const{activeMediaInfoIndex:i,formattedMediaInfoCount:n}=this.viewModel;return L("div",{key:`media-${e.type}-${i}-${n}`,bind:this,class:Gi.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.includes("chart")?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const i=e.title?L("div",{key:"media-title",class:Gi.mediaItemTitle,innerHTML:e.title}):null,n=e.caption?L("div",{key:"media-caption",class:Gi.mediaItemCaption,innerHTML:e.caption}):null;return L("div",{key:"media-container",class:Gi.mediaItemContainer},L("div",{key:"media-item-container",class:Gi.mediaItem},this.renderMediaInfoType()),i,n)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const i=e==="previous",n=i?this.messages.previous:this.messages.next,r=i?this.classes(Gi.mediaButton,Gi.mediaPrevious):this.classes(Gi.mediaButton,Gi.mediaNext),s=i?this.classes(Gi.mediaIcon,Gi.mediaPreviousIconLTR,Gi.iconLeftTriangleArrow):this.classes(Gi.mediaIcon,Gi.mediaNextIconLTR,Gi.iconRightTriangleArrow),o=i?this.classes(Gi.mediaIcon,Gi.mediaPreviousIconRTL,Gi.iconRightTriangleArrow):this.classes(Gi.mediaIcon,Gi.mediaNextIconRTL,Gi.iconLeftTriangleArrow),a=i?"media-previous":"media-next",l=i?this._previous:this._next;return L("button",{type:"button",key:a,title:n,"aria-label":n,tabIndex:0,class:r,bind:this,onclick:l},L("span",{"aria-hidden":"true",class:s}),L("span",{"aria-hidden":"true",class:o}))}_setupFeatureElementInfo(){var n;const{description:e,title:i}=this;(n=this._featureElementInfo)==null||n.set({description:e,title:i})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_getRenderer(){const{isAggregate:e,layer:i}=this.viewModel;return e&&(i!=null&&i.featureReduction)&&"renderer"in i.featureReduction?i.featureReduction.renderer:i==null?void 0:i.renderer}async _getRendererColors(e){const{am4core:i}=e,n=new Map,r=this._getRenderer(),s="default";if(!r)return n;const o=await aze(r);return o.delete(s),Array.from(o.values()).every(a=>(a==null?void 0:a.length)===1)&&(n.set(zY,i.color({r:50,g:50,b:50,a:1})),Array.from(o.keys()).forEach(a=>{var l;a&&n.set(a,i.color((l=o.get(a))==null?void 0:l[0].toCss(!0)))})),n}_handleMediaKeyup(e){const i=To(e);i==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{abilities:i}=this.viewModel,{chartsModule:n,chartDiv:r,mediaInfo:s,colorMap:o}=e,{value:a,type:l}=s,{am4core:u}=n,h=R4e(u);function p(v){v instanceof u.ColorSet&&h&&(v.list=h)}QM()&&u.useTheme(n.am4themes_dark);const f=window.matchMedia("(prefers-reduced-motion: reduce)");i.chartAnimation&&!f.matches?u.useTheme(n.am4themes_animated):u.unuseTheme(n.am4themes_animated),u.useTheme(p);const g=l==="pie-chart"?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",s.altText||s.title),g.data=a.series.map(v=>({[np]:v.tooltip,[sx]:v.value,[ad]:o.get(v.fieldName)})).filter(v=>l!=="pie-chart"||v.value!=null&&v.value>0)}_customizeChartTooltip(e,i){e&&(e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=i.color("#ffffff"),e.background.fill=i.color({r:0,g:0,b:0,a:.7}))}_createPieChart(e){const{chartDiv:i,chartsModule:n}=e,{am4core:r,am4charts:s}=n,o=r.create(i,s.PieChart);o.rtl=$o(this.container);const a=o.series.push(new s.PieSeries);return a.labels.template.disabled=!0,a.ticks.template.disabled=!0,a.dataFields.value=sx,a.dataFields.category=np,this._customizeChartTooltip(a.tooltip,r),a.slices.template.propertyFields.fill=ad,a.slices.template.propertyFields.stroke=ad,o}_getMinSeriesValue(e){let i=0;return e.forEach(n=>i=Math.min(n.value,i)),i}_createColumnChart(e,i){const{chartsModule:n,mediaInfo:r}=i,{value:s}=r,{am4core:o,am4charts:a}=n,l=e.xAxes.push(new a.CategoryAxis);l.dataFields.category=np,l.renderer.labels.template.disabled=!0;const u=l.tooltip;this._customizeChartTooltip(u,o),u.events.on("sizechanged",()=>{u.dy=-u.contentHeight});const h=e.yAxes.push(new a.ValueAxis),p=h.renderer.labels.template;h.renderer.minLabelPosition=AD,h.renderer.maxLabelPosition=MD,h.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(h.tooltip,o),p.wrap=!0;const f=e.series.push(new a.ColumnSeries);f.dataFields.valueY=sx,f.dataFields.categoryX=np,f.columns.template.propertyFields.fill=ad,f.columns.template.propertyFields.stroke=ad,e.cursor=new a.XYCursor,s.series.length>OD&&(e.scrollbarX=new o.Scrollbar)}_createBarChart(e,i){const{chartsModule:n,mediaInfo:r}=i,{value:s}=r,{am4core:o,am4charts:a}=n,l=e.yAxes.push(new a.CategoryAxis);l.dataFields.category=np,l.renderer.inversed=!0,l.renderer.labels.template.disabled=!0;const u=l.tooltip;this._customizeChartTooltip(u,o),u.events.on("sizechanged",()=>{u.dx=u.contentWidth});const h=e.xAxes.push(new a.ValueAxis),p=h.renderer.labels.template;h.renderer.minLabelPosition=AD,h.renderer.maxLabelPosition=MD,h.min=this._getMinSeriesValue(s.series),this._customizeChartTooltip(h.tooltip,o),p.wrap=!0;const f=e.series.push(new a.ColumnSeries);f.dataFields.valueX=sx,f.dataFields.categoryY=np,f.columns.template.propertyFields.fill=ad,f.columns.template.propertyFields.stroke=ad,e.cursor=new a.XYCursor,s.series.length>OD&&(e.scrollbarY=new o.Scrollbar)}_createLineChart(e,i){const{chartsModule:n,mediaInfo:r,colorMap:s}=i,{value:o}=r,{am4core:a,am4charts:l}=n,u=e.xAxes.push(new l.CategoryAxis);u.dataFields.category=np,u.renderer.labels.template.disabled=!0;const h=u.tooltip;this._customizeChartTooltip(h,a),h.events.on("sizechanged",()=>{h.dy=-h.contentHeight});const p=e.yAxes.push(new l.ValueAxis),f=p.renderer.labels.template;p.renderer.minLabelPosition=AD,p.renderer.maxLabelPosition=MD,p.min=this._getMinSeriesValue(o.series),this._customizeChartTooltip(p.tooltip,a),f.wrap=!0;const g=e.series.push(new l.LineSeries);g.dataFields.categoryX=np,g.dataFields.valueY=sx,g.strokeWidth=1;const v=s.get(zY);v&&(g.stroke=v);const b=g.bullets.push(new l.CircleBullet);b.propertyFields.fill=ad,b.propertyFields.stroke=ad,e.cursor=new l.XYCursor,o.series.length>OD&&(e.scrollbarX=new a.Scrollbar)}_createXYChart(e){const{chartDiv:i,chartsModule:n,mediaInfo:r}=e,{type:s}=r,{am4core:o,am4charts:a}=n,l=o.create(i,a.XYChart);return l.rtl=$o(this.container),s==="column-chart"&&this._createColumnChart(l,e),s==="bar-chart"&&this._createBarChart(l,e),s==="line-chart"&&this._createLineChart(l,e),l}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const i=Date.now();this._refreshIntervalInfo={timestamp:i,sourceURL:e&&this._getImageSource(e,i)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:i,value:n}=e;if(!i)return;const r=6e4*i;this._updateMediaInfoTimestamp(n.sourceURL);const s=setInterval(()=>{this._updateMediaInfoTimestamp(n.sourceURL)},r);this._refreshTimer=s}_getImageSource(e,i){const n=e.includes("?")?"&":"?",[r,s=""]=e.split("#");return`${r}${n}timestamp=${i}${s?"#":""}${s}`}};c([d()],uo.prototype,"attributes",null),c([d()],uo.prototype,"activeMediaInfoIndex",null),c([d()],uo.prototype,"description",null),c([d()],uo.prototype,"fieldInfoMap",null),c([d()],uo.prototype,"layer",null),c([d()],uo.prototype,"mediaInfos",null),c([d()],uo.prototype,"popupTemplate",null),c([d()],uo.prototype,"relatedInfos",null),c([d()],uo.prototype,"title",null),c([d({type:Hy})],uo.prototype,"viewModel",void 0),c([d(),bt("esri/widgets/Feature/t9n/Feature")],uo.prototype,"messages",void 0),uo=c([O("esri.widgets.Feature.FeatureMedia")],uo);const ehe=uo;var _j;let bS=_j=class extends Y{constructor(t){super(t),this.minValue=0,this.maxValue=0}clone(){return new _j({minValue:this.minValue,maxValue:this.maxValue})}};c([d({type:Number,json:{write:!0}})],bS.prototype,"minValue",void 0),c([d({type:Number,json:{write:!0}})],bS.prototype,"maxValue",void 0),bS=_j=c([O("esri.renderer.support.AuthoringInfoClassBreakInfo")],bS);var wj;let hf=wj=class extends Y{constructor(t){super(t),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new wj({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:G(this.classBreakInfos)})}};c([d({type:String,json:{write:!0}})],hf.prototype,"field",void 0),c([d({type:String,json:{write:!0}})],hf.prototype,"normalizationField",void 0),c([d({type:String,json:{write:!0}})],hf.prototype,"label",void 0),c([d({type:[bS],json:{write:!0}})],hf.prototype,"classBreakInfos",void 0),hf=wj=c([O("esri.renderers.support.AuthoringInfoFieldInfo")],hf);var xj;const ET=new Fe({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),CT=new Fe({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),jY={key:t=>typeof t=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},VY=["high-to-low","above-and-below","centered-on","extremes"],UY=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],BY=["seconds","minutes","hours","days","months","years"];let ho=xj=class extends Y{constructor(t){super(t),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(t){return typeof t=="string"||typeof t=="number"?t:null}castStartTime(t){return typeof t=="string"||typeof t=="number"?t:null}get style(){return this.type==="color"?this._get("style"):null}set style(t){this._set("style",t)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(t){this._set("theme",t)}clone(){return new xj({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};c([d({types:jY,json:{write:!0}})],ho.prototype,"endTime",void 0),c([st("endTime")],ho.prototype,"castEndTime",null),c([d({type:String,json:{write:!0}})],ho.prototype,"field",void 0),c([d({type:Number,json:{write:!0}})],ho.prototype,"maxSliderValue",void 0),c([d({type:Number,json:{write:!0}})],ho.prototype,"minSliderValue",void 0),c([d({types:jY,json:{write:!0}})],ho.prototype,"startTime",void 0),c([st("startTime")],ho.prototype,"castStartTime",null),c([d({type:ET.apiValues,value:null,json:{type:ET.jsonValues,read:ET.read,write:ET.write}})],ho.prototype,"style",null),c([d({type:UY,value:null,json:{type:UY,origins:{"web-scene":{type:VY,write:{writer:(t,e)=>{VY.includes(t)&&(e.theme=t)}}}},write:!0}})],ho.prototype,"theme",null),c([d({type:CT.apiValues,json:{type:CT.jsonValues,read:CT.read,write:CT.write}})],ho.prototype,"type",void 0),c([d({type:BY,json:{type:BY,write:!0}})],ho.prototype,"units",void 0),ho=xj=c([O("esri.renderers.support.AuthoringInfoVisualVariable")],ho);const L4e=ho;let N$=class extends Y{constructor(e){super(e),this.type=null}};c([d({readOnly:!0,json:{read:!1,write:!0}})],N$.prototype,"type",void 0),N$=c([O("esri.rest.support.ColorRamp")],N$);const PB=N$;var Sj;let Dg=Sj=class extends PB{constructor(t){super(t),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new Sj({fromColor:G(this.fromColor),toColor:G(this.toColor),algorithm:this.algorithm})}};c([Ce({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],Dg.prototype,"algorithm",void 0),c([d({type:Se,json:{type:[Bt],write:!0}})],Dg.prototype,"fromColor",void 0),c([d({type:Se,json:{type:[Bt],write:!0}})],Dg.prototype,"toColor",void 0),c([d({type:["algorithmic"]})],Dg.prototype,"type",void 0),Dg=Sj=c([O("esri.rest.support.AlgorithmicColorRamp")],Dg);const RB=Dg;var Ej;let _S=Ej=class extends PB{constructor(t){super(t),this.colorRamps=null,this.type="multipart"}clone(){return new Ej({colorRamps:G(this.colorRamps)})}};c([d({type:[RB],json:{write:!0}})],_S.prototype,"colorRamps",void 0),c([d({type:["multipart"]})],_S.prototype,"type",void 0),_S=Ej=c([O("esri.rest.support.MultipartColorRamp")],_S);const the=_S,D4e={key:"type",base:PB,typeMap:{algorithmic:RB,multipart:the}};function F4e(t){return t&&t.type?t.type==="algorithmic"?RB.fromJSON(t):t.type==="multipart"?the.fromJSON(t):null:null}var Cj;const Wm=new Fe({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),IT=new Fe({pieChart:"pie-chart",classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density",flow:"flow"}),HY=new Fe({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),GY=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],N4e=["high-to-low","above-and-below","above","below","90-10"],z4e=["flow-line","wave-front"],j4e=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let Wi=Cj=class extends Y{constructor(t){super(t),this.colorRamp=null,this.fadeRatio=null,this.isAutoGenerated=!1,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const t=this._get("classificationMethod"),e=this.type;return e&&e!=="relationship"?e==="class-breaks-size"||e==="class-breaks-color"?t||"manual":null:t}set classificationMethod(t){this._set("classificationMethod",t)}readColorRamp(t){return t?F4e(t):void 0}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(t){this._set("fields",t)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(t){this._set("field1",t)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(t){this._set("field2",t)}get flowTheme(){return this.type==="flow"?this._get("flowTheme"):null}set flowTheme(t){this._set("flowTheme",t)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(t){this._set("focus",t)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(t){this._set("numClasses",t)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(t){this._set("statistics",t)}get standardDeviationInterval(){const t=this.type;return t&&t!=="relationship"&&t!=="class-breaks-size"&&t!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(t){this._set("standardDeviationInterval",t)}get type(){return this._get("type")}set type(t){let e=t;t==="classed-size"?e="class-breaks-size":t==="classed-color"&&(e="class-breaks-color"),this._set("type",e)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(t){this._set("univariateSymbolStyle",t)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(t){this._set("univariateTheme",t)}clone(){return new Cj({classificationMethod:this.classificationMethod,colorRamp:G(this.colorRamp),fadeRatio:G(this.fadeRatio),fields:this.fields&&this.fields.slice(0),field1:G(this.field1),field2:G(this.field2),isAutoGenerated:this.isAutoGenerated,focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(t=>t.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme,flowTheme:this.flowTheme})}};c([d({type:Wm.apiValues,value:null,json:{type:Wm.jsonValues,read:Wm.read,write:Wm.write,origins:{"web-document":{default:"manual",type:Wm.jsonValues,read:Wm.read,write:Wm.write}}}})],Wi.prototype,"classificationMethod",null),c([d({types:D4e,json:{write:!0}})],Wi.prototype,"colorRamp",void 0),c([de("colorRamp")],Wi.prototype,"readColorRamp",null),c([d({json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wi.prototype,"fadeRatio",void 0),c([d({type:[String],value:null,json:{write:!0}})],Wi.prototype,"fields",null),c([d({type:hf,value:null,json:{write:!0}})],Wi.prototype,"field1",null),c([d({type:hf,value:null,json:{write:!0}})],Wi.prototype,"field2",null),c([d({type:z4e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Wi.prototype,"flowTheme",null),c([d({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],Wi.prototype,"focus",null),c([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],Wi.prototype,"isAutoGenerated",void 0),c([d({type:Number,value:null,json:{type:Bt,write:!0}})],Wi.prototype,"numClasses",null),c([d({type:GY,json:{type:GY,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],Wi.prototype,"lengthUnit",void 0),c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wi.prototype,"maxSliderValue",void 0),c([d({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wi.prototype,"minSliderValue",void 0),c([d({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Wi.prototype,"statistics",null),c([d({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],Wi.prototype,"standardDeviationInterval",null),c([d({type:IT.apiValues,value:null,json:{type:IT.jsonValues,read:IT.read,write:IT.write,origins:{"web-scene":{type:HY.jsonValues,write:{writer:HY.write,overridePolicy:t=>({enabled:t!=="flow"})}}}}})],Wi.prototype,"type",null),c([d({type:[L4e],json:{write:!0}})],Wi.prototype,"visualVariables",void 0),c([d({type:j4e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Wi.prototype,"univariateSymbolStyle",null),c([d({type:N4e,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Wi.prototype,"univariateTheme",null),Wi=Cj=c([O("esri.renderers.support.AuthoringInfo")],Wi);const LB=Wi,PD=new Fe({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0});let wS=class extends Y{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const i=new Set;return await this.collectRequiredFields(i,e),Array.from(i).sort()}getSymbol(e,i){}async getSymbolAsync(e,i){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};c([d({type:LB,json:{write:!0}})],wS.prototype,"authoringInfo",void 0),c([d({type:PD.apiValues,readOnly:!0,json:{type:PD.jsonValues,read:!1,write:{writer:PD.write,ignoreOrigin:!0}}})],wS.prototype,"type",void 0),wS=c([O("esri.renderers.Renderer")],wS);const Uh=wS;function V4e(t){var e,i;return((i=(e=t.match(U4e))==null?void 0:e[1])==null?void 0:i.replace(/\\'/g,"'"))??null}const U4e=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/;var Ij;let F_=Ij=class extends Y{constructor(){super(...arguments),this.title=null}clone(){return new Ij({title:this.title})}};c([d({type:String,json:{write:!0}})],F_.prototype,"title",void 0),F_=Ij=c([O("esri.renderers.support.LegendOptions")],F_);var Tj;let z$=Tj=class extends F_{constructor(){super(...arguments),this.showLegend=null}clone(){return new Tj({title:this.title,showLegend:this.showLegend})}};c([d({type:Boolean,json:{write:!0}})],z$.prototype,"showLegend",void 0),z$=Tj=c([O("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],z$);const ihe=z$,RD=new Fe({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Zl=class extends Y{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(se.getLogger(this.declaredClass).error(".field: field must be a string value"),null):CI(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};c([d()],Zl.prototype,"index",void 0),c([d({type:RD.apiValues,readOnly:!0,json:{read:RD.read,write:RD.write}})],Zl.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Zl.prototype,"field",void 0),c([st("field")],Zl.prototype,"castField",null),c([d({type:String,json:{write:!0}})],Zl.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],Zl.prototype,"valueExpressionTitle",void 0),c([d({readOnly:!0})],Zl.prototype,"arcadeRequired",null),c([d({type:ihe,json:{write:!0}})],Zl.prototype,"legendOptions",void 0),Zl=c([O("esri.renderers.visualVariables.VisualVariable")],Zl);const KI=Zl;var kj;let Fg=kj=class extends KI{constructor(t){super(t),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new kj({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};c([d({readOnly:!0})],Fg.prototype,"cache",null),c([d({type:["color"],json:{type:["colorInfo"]}})],Fg.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Fg.prototype,"normalizationField",void 0),c([d({type:[$5e],json:{write:!0}})],Fg.prototype,"stops",null),Fg=kj=c([O("esri.renderers.visualVariables.ColorVariable")],Fg);const nhe=Fg;var $j;let Ap=$j=class extends Y{constructor(t){super(t),this.label=null,this.opacity=null,this.value=null}readOpacity(t,e){return $C(e.transparency)}writeOpacity(t,e,i){e[i]=GP(t)}clone(){return new $j({label:this.label,opacity:this.opacity,value:this.value})}};c([d({type:String,json:{write:!0}})],Ap.prototype,"label",void 0),c([d({type:Number,json:{type:Bt,write:{target:"transparency"}}})],Ap.prototype,"opacity",void 0),c([de("opacity",["transparency"])],Ap.prototype,"readOpacity",null),c([fe("opacity")],Ap.prototype,"writeOpacity",null),c([d({type:Number,json:{write:!0}})],Ap.prototype,"value",void 0),Ap=$j=c([O("esri.renderers.visualVariables.support.OpacityStop")],Ap);const B4e=Ap;var Aj;let Ng=Aj=class extends KI{constructor(t){super(t),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(t){t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value),this._set("stops",t)}clone(){return new Aj({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(t=>t.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};c([d({readOnly:!0})],Ng.prototype,"cache",null),c([d({type:["opacity"],json:{type:["transparencyInfo"]}})],Ng.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Ng.prototype,"normalizationField",void 0),c([d({type:[B4e],json:{write:!0}})],Ng.prototype,"stops",null),Ng=Aj=c([O("esri.renderers.visualVariables.OpacityVariable")],Ng);const rhe=Ng;var Mj;let Td=Mj=class extends KI{constructor(t){super(t),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(t,e,i,n){if(n&&n.messages){const r=`visualVariables[${this.index}]`;n.messages.push(new N("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".valueExpressionTitle",context:n}))}}clone(){return new Mj({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};c([d({readOnly:!0})],Td.prototype,"cache",null),c([d({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],Td.prototype,"axis",void 0),c([d({type:["rotation"],json:{type:["rotationInfo"]}})],Td.prototype,"type",void 0),c([d({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],Td.prototype,"rotationType",void 0),c([d({type:String,json:{write:!0}})],Td.prototype,"valueExpressionTitle",void 0),c([fe("web-scene","valueExpressionTitle")],Td.prototype,"writeValueExpressionTitleWebScene",null),Td=Mj=c([O("esri.renderers.visualVariables.RotationVariable")],Td);const she=Td;var Oj;let Xv=Oj=class extends Y{constructor(t){super(t),this.label=null,this.size=null,this.value=null}clone(){return new Oj({label:this.label,size:this.size,value:this.value})}};c([d({type:String,json:{write:!0}})],Xv.prototype,"label",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Xv.prototype,"size",void 0),c([d({type:Number,json:{write:!0}})],Xv.prototype,"value",void 0),Xv=Oj=c([O("esri.renderers.visualVariables.support.SizeStop")],Xv);const Qv=Xv;var Pj;let j$=Pj=class extends ihe{constructor(){super(...arguments),this.customValues=null}clone(){return new Pj({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};c([d({type:[Number],json:{write:!0}})],j$.prototype,"customValues",void 0),j$=Pj=c([O("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],j$);const H4e=j$;var mh,ir;function Rf(t){return t&&t.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function HC(t){return t!=null&&!isNaN(t)&&isFinite(t)}function ohe(t){return t.valueExpression?mh.Expression:t.field&&typeof t.field=="string"?mh.Field:mh.Unknown}function G4e(t,e){const i=e||ohe(t),n=t.valueUnit||"unknown";return i===mh.Unknown?ir.Constant:t.stops?ir.Stops:t.minSize!=null&&t.maxSize!=null&&t.minDataValue!=null&&t.maxDataValue!=null?ir.ClampedLinear:n==="unknown"?t.minSize!=null&&t.minDataValue!=null?t.minSize&&t.minDataValue?ir.Proportional:ir.Additive:ir.Identity:ir.RealWorldSize}(function(t){t.Unknown="unknown",t.Expression="expression",t.Field="field"})(mh||(mh={})),function(t){t.Unknown="unknown",t.Stops="stops",t.ClampedLinear="clamped-linear",t.Proportional="proportional",t.Additive="additive",t.Constant="constant",t.Identity="identity",t.RealWorldSize="real-world-size"}(ir||(ir={}));function vbt(t){}function q4e(t){return()=>t}const wR={inches:kt(1,"meters","inches"),feet:kt(1,"meters","feet"),"us-feet":kt(1,"meters","us-feet"),yards:kt(1,"meters","yards"),miles:kt(1,"meters","miles"),"nautical-miles":kt(1,"meters","nautical-miles"),millimeters:kt(1,"meters","millimeters"),centimeters:kt(1,"meters","centimeters"),decimeters:kt(1,"meters","decimeters"),meters:kt(1,"meters","meters"),kilometers:kt(1,"meters","kilometers"),"decimal-degrees":1/Roe(1,"meters",ci.radius)},um=se.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),qY=new en,V$=Math.PI,ahe=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function lhe(t,e,i){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.find(v=>v.type==="color"):t;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void um.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const r=typeof e=="number",s=r?null:e,o=s&&s.attributes;let a=r?e:null;const l=n.field,{ipData:u,hasExpression:h}=n.cache;let p=n.cache.compiledFunc;if(!l&&!h){const v=n.stops;return v&&v[0]&&v[0].color}if(typeof a!="number")if(h){if(U(i)||U(i.arcade))return void um.error("Use of arcade expressions requires an arcade context");const v={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},b=i.arcade.arcadeUtils,_=b.getViewInfo(v),w=b.createExecContext(s,_);if(!p){const S=b.createSyntaxTree(n.valueExpression);p=b.createFunction(S),n.cache.compiledFunc=p}a=b.executeFunction(p,w)}else o&&(a=o[l]);const f=n.normalizationField,g=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||r||!isNaN(g)&&g!==0)){isNaN(g)||r||(a/=g);const v=DB(a,u);if(v){const b=v[0],_=v[1],w=b===_?n.stops[b].color:Se.blendColors(n.stops[b].color,n.stops[_].color,v[2],A(i)?i.color:void 0);return new Se(w)}}}function che(t,e,i){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.find(v=>v.type==="opacity"):t;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void um.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const r=typeof e=="number",s=r?null:e,o=s&&s.attributes;let a=r?e:null;const l=n.field,{ipData:u,hasExpression:h}=n.cache;let p=n.cache.compiledFunc;if(!l&&!h){const v=n.stops;return v&&v[0]&&v[0].opacity}if(typeof a!="number")if(h){if(U(i)||U(i.arcade))return void um.error("Use of arcade expressions requires an arcade context");const v={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},b=i.arcade.arcadeUtils,_=b.getViewInfo(v),w=b.createExecContext(s,_);if(!p){const S=b.createSyntaxTree(n.valueExpression);p=b.createFunction(S),n.cache.compiledFunc=p}a=b.executeFunction(p,w)}else o&&(a=o[l]);const f=n.normalizationField,g=o!=null&&f!=null?parseFloat(o[f]):void 0;if(a!=null&&(!f||r||!isNaN(g)&&g!==0)){isNaN(g)||r||(a/=g);const v=DB(a,u);if(v){const b=v[0],_=v[1];if(b===_)return n.stops[b].opacity;{const w=n.stops[b].opacity;return w+(n.stops[_].opacity-w)*v[2]}}}}function uhe(t,e,i){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.find(g=>g.type==="rotation"):t;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void um.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const r=n.axis||"heading",s=r==="heading"&&n.rotationType==="arithmetic"?90:0,o=r==="heading"&&n.rotationType==="arithmetic"?-1:1,a=typeof e=="number"?null:e,l=a&&a.attributes,u=n.field,{hasExpression:h}=n.cache;let p=n.cache.compiledFunc,f=0;if(!u&&!h)return f;if(h){if(U(i)||U(i.arcade))return void um.error("Use of arcade expressions requires an arcade context");const g={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},v=i.arcade.arcadeUtils,b=v.getViewInfo(g),_=v.createExecContext(a,b);if(!p){const w=v.createSyntaxTree(n.valueExpression);p=v.createFunction(w),n.cache.compiledFunc=p}f=v.executeFunction(p,_)}else l&&(f=l[u]||0);return f=typeof f!="number"||isNaN(f)?null:s+o*f,f}function W4e(t,e,i){const n=typeof e=="number",r=n?null:e,s=r&&r.attributes;let o=n?e:null;const{isScaleDriven:a}=t.cache;let l=t.cache.compiledFunc;if(a){const h=A(i)?i.scale:void 0,p=A(i)?i.view:void 0;o=h==null||p==="3d"?J4e(t):h}else if(!n)switch(t.inputValueType){case mh.Expression:{if(U(i)||U(i.arcade))return void um.error("Use of arcade expressions requires an arcade context");const h={viewingMode:i.viewingMode,scale:i.scale,spatialReference:i.spatialReference},p=i.arcade.arcadeUtils,f=p.getViewInfo(h),g=p.createExecContext(r,f);if(!l){const v=p.createSyntaxTree(t.valueExpression);l=p.createFunction(v),t.cache.compiledFunc=l}o=p.executeFunction(l,g);break}case mh.Field:s&&(o=s[t.field]);break;case mh.Unknown:o=null}if(!HC(o))return null;if(n||!t.normalizationField)return o;const u=s?parseFloat(s[t.normalizationField]):null;return HC(u)&&u!==0?o/u:null}function J4e(t){let e=null,i=null;const n=t.stops;return n?(e=n[0].value,i=n[n.length-1].value):(e=t.minDataValue||0,i=t.maxDataValue||0),(e+i)/2}function xR(t,e,i){const n="visualVariables"in t&&t.visualVariables?t.visualVariables.find(s=>s.type==="size"):t;if(!n)return;if(n.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void um.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const r=hhe(W4e(n,e,i),n,e,i,n.cache.ipData);return r==null||isNaN(r)?0:r}function Do(t,e,i){return t==null?null:Rf(t)?xR(t,e,i):HC(t)?t:null}function dhe(t,e,i){return HC(i)&&t>i?i:HC(e)&&t<e?e:t}function Y4e(t,e,i,n){return t+((Do(e.minSize,i,n)||e.minDataValue)??0)}function Z4e(t,e,i){const n=t.stops;let r=n&&n.length&&n[0].size;return r==null&&(r=t.minSize),Do(r,e,i)}function K4e(t,e,i,n){const r=(t-e.minDataValue)/(e.maxDataValue-e.minDataValue),s=Do(e.minSize,i,n),o=Do(e.maxSize,i,n),a=A(n)?n.shape:void 0;if(t<=e.minDataValue)return s;if(t>=e.maxDataValue)return o;if(s==null||o==null)return null;if(e.scaleBy==="area"&&a){const l=a==="circle",u=l?V$*(s/2)**2:s*s,h=u+r*((l?V$*(o/2)**2:o*o)-u);return l?2*Math.sqrt(h/V$):Math.sqrt(h)}return s+r*(o-s)}function X4e(t,e,i,n){const r=A(n)?n.shape:void 0,s=t/e.minDataValue,o=Do(e.minSize,i,n),a=Do(e.maxSize,i,n);let l=null;return l=r==="circle"?2*Math.sqrt(s*(o/2)**2):r==="square"||r==="diamond"||r==="image"?Math.sqrt(s*o**2):s*o,dhe(l,o,a)}function Q4e(t,e,i,n,r){var l,u,h;const[s,o,a]=DB(t,r);if(s===o)return Do((l=e.stops)==null?void 0:l[s].size,i,n);{const p=Do((u=e.stops)==null?void 0:u[s].size,i,n);return p+(Do((h=e.stops)==null?void 0:h[o].size,i,n)-p)*a}}function eje(t,e,i,n){const r=(A(n)&&n.resolution?n.resolution:1)*wR[e.valueUnit],s=Do(e.minSize,i,n),o=Do(e.maxSize,i,n),{valueRepresentation:a}=e;let l=null;return l=a==="area"?2*Math.sqrt(t/V$)/r:a==="radius"||a==="distance"?2*t/r:t/r,dhe(l,s,o)}function hhe(t,e,i,n,r){switch(e.transformationType){case ir.Additive:return Y4e(t,e,i,n);case ir.Constant:return Z4e(e,i,n);case ir.ClampedLinear:return K4e(t,e,i,n);case ir.Proportional:return X4e(t,e,i,n);case ir.Stops:return Q4e(t,e,i,n,r);case ir.RealWorldSize:return eje(t,e,i,n);case ir.Identity:return t;case ir.Unknown:return null}}function tje(t,e,i){const{isScaleDriven:n}=t.cache;if(!(n&&i==="3d"||e))return null;const r={scale:e,view:i};let s=Do(t.minSize,qY,r),o=Do(t.maxSize,qY,r);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function ije(t,e,i){if(!t.visualVariables)return;const n=[],r=[],s=[],o=[],a=[];for(const l of t.visualVariables)switch(l.type){case"color":r.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return r.forEach(l=>{const u=lhe(l,e,i);n.push({variable:l,value:u})}),s.forEach(l=>{const u=che(l,e,i);n.push({variable:l,value:u})}),a.forEach(l=>{const u=uhe(l,e,i);n.push({variable:l,value:u})}),o.forEach(l=>{const u=xR(l,e,i);n.push({variable:l,value:u})}),n.filter(l=>l.value!=null)}function DB(t,e){if(!e)return;let i=0,n=e.length-1;return e.some((r,s)=>t<r?(n=s,!0):(i=s,!1)),[i,n,(t-e[i])/(e[n]-e[i])]}function nje(t,e,i){const n=["proportional","proportional","proportional"];for(const r of t){const s=r.useSymbolValue?"symbol-value":xR(r,e,i);switch(r.axis){case"width":n[0]=s;break;case"depth":n[1]=s;break;case"height":n[2]=s;break;case"width-and-depth":n[0]=s,n[1]=s;break;case"all":case void 0:case null:n[0]=s,n[1]=s,n[2]=s;break;default:r.axis}}return n}const SR=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:nje,getColor:lhe,getOpacity:che,getRotationAngle:uhe,getSize:xR,getSizeForValue:hhe,getSizeFromNumberOrVariable:Do,getSizeRangeAtScale:tje,getVisualVariableValues:ije,viewScaleRE:ahe},Symbol.toStringTag,{value:"Module"}));var Rj;const TT=new Fe({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),Lj=new Fe({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function WY(t){if(t!=null)return typeof t=="string"||typeof t=="number"?vt(t):t.type==="size"?Rf(t)?t:(delete(t={...t}).type,new It(t)):void 0}function JY(t,e,i){if(typeof t!="object")return t;const n=new It;return n.read(t,i),n}let It=Rj=class extends KI{constructor(t){super(t),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:this.valueExpression!=null&&ahe.test(this.valueExpression)}}set expression(t){se.getLogger(this.declaredClass).warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),t==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",t)):this._set("expression",null)}set index(t){Rf(this.maxSize)&&(this.maxSize.index=`visualVariables[${t}].maxSize`),Rf(this.minSize)&&(this.minSize.index=`visualVariables[${t}].minSize`),this._set("index",t)}get inputValueType(){return ohe(this)}set maxDataValue(t){t&&this.stops&&(se.getLogger(this.declaredClass).warn("cannot set maxDataValue when stops is not null."),t=null),this._set("maxDataValue",t)}set maxSize(t){t&&this.stops&&(se.getLogger(this.declaredClass).warn("cannot set maxSize when stops is not null."),t=null),this._set("maxSize",t)}castMaxSize(t){return WY(t)}readMaxSize(t,e,i){return JY(t,e,i)}set minDataValue(t){t&&this.stops&&(se.getLogger(this.declaredClass).warn("cannot set minDataValue when stops is not null."),t=null),this._set("minDataValue",t)}set minSize(t){t&&this.stops&&(se.getLogger(this.declaredClass).warn("cannot set minSize when stops is not null."),t=null),this._set("minSize",t)}castMinSize(t){return WY(t)}readMinSize(t,e,i){return JY(t,e,i)}get arcadeRequired(){return!!this.valueExpression||this.minSize!=null&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize!=null&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(t){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?t&&Array.isArray(t)&&(t=t.filter(e=>!!e)).sort((e,i)=>e.value-i.value):t&&(se.getLogger(this.declaredClass).warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),t=null),this._set("stops",t)}get transformationType(){return G4e(this,this.inputValueType)}readValueExpression(t,e){return t||e.expression&&"$view.scale"}writeValueExpressionWebScene(t,e,i,n){if(t==="$view.scale"){if(n&&n.messages){const r=this.index,s=typeof r=="string"?r:`visualVariables[${r}]`;n.messages.push(new N("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:n}))}}else e[i]=t}readValueUnit(t){return t?Lj.read(t):null}clone(){return new Rj({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Rf(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Rf(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType===ir.ClampedLinear){const{minSize:t,maxSize:e}=this;return this.minSize=e,this.maxSize=t,this}if(this.transformationType===ir.Stops){const t=this.stops;if(!t)return this;const e=t.map(n=>n.size).reverse(),i=t.length;for(let n=0;n<i;n++)t[n].size=e[n];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(t=>t.value||0)}};c([d({readOnly:!0})],It.prototype,"cache",null),c([d({type:TT.apiValues,json:{type:TT.jsonValues,origins:{"web-map":{read:!1}},read:TT.read,write:TT.write}})],It.prototype,"axis",void 0),c([d({type:String,value:null,json:{read:!1}})],It.prototype,"expression",null),c([d()],It.prototype,"index",null),c([d({type:String,readOnly:!0})],It.prototype,"inputValueType",null),c([d({type:H4e,json:{write:!0}})],It.prototype,"legendOptions",void 0),c([d({type:Number,value:null,json:{write:!0}})],It.prototype,"maxDataValue",null),c([d({type:Number,value:null,json:{write:!0}})],It.prototype,"maxSize",null),c([st("maxSize")],It.prototype,"castMaxSize",null),c([de("maxSize")],It.prototype,"readMaxSize",null),c([d({type:Number,value:null,json:{write:!0}})],It.prototype,"minDataValue",null),c([d({type:Number,value:null,json:{write:!0}})],It.prototype,"minSize",null),c([st("minSize")],It.prototype,"castMinSize",null),c([de("minSize")],It.prototype,"readMinSize",null),c([d({type:String,json:{write:!0}})],It.prototype,"normalizationField",void 0),c([d({readOnly:!0})],It.prototype,"arcadeRequired",null),c([d({type:String})],It.prototype,"scaleBy",void 0),c([d({type:[Qv],value:null,json:{write:!0}})],It.prototype,"stops",null),c([d({type:["outline"],json:{write:!0}})],It.prototype,"target",void 0),c([d({type:String,readOnly:!0})],It.prototype,"transformationType",null),c([d({type:["size"],json:{type:["sizeInfo"]}})],It.prototype,"type",void 0),c([d({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],It.prototype,"useSymbolValue",void 0),c([d({type:String,json:{write:!0}})],It.prototype,"valueExpression",void 0),c([de("valueExpression",["valueExpression","expression"])],It.prototype,"readValueExpression",null),c([fe("web-scene","valueExpression")],It.prototype,"writeValueExpressionWebScene",null),c([d({type:["radius","diameter","area","width","distance"],json:{write:!0}})],It.prototype,"valueRepresentation",void 0),c([d({type:Lj.apiValues,json:{write:Lj.write,origins:{"web-map":{read:!1},"web-scene":{write:!0},"portal-item":{write:!0}}}})],It.prototype,"valueUnit",void 0),c([de("valueUnit")],It.prototype,"readValueUnit",null),It=Rj=c([O("esri.renderers.visualVariables.SizeVariable")],It);const ER=It,rje={color:nhe,size:ER,opacity:rhe,rotation:she},sje=new Fe({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),oje=/^\[([^\]]+)\]$/i;let U$=class extends _e{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(i=>!!i))&&e.length){for(const i of e)switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}this.sizeVariables.length&&this.sizeVariables.some(i=>!!i.target)&&e.sort((i,n)=>{let r=null;return r=i.target===n.target?0:i.target?1:-1,r});for(let i=0;i<e.length;i++)e[i].index=i;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,i,n){const{rotationExpression:r,rotationType:s}=i,o=r&&r.match(oje),a=o&&o[1];if(a&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:s,field:a})),e)return e.map(l=>{const u=sje.read(l.type),h=rje[u];h||(se.getLogger(this.declaredClass).warn(`Unknown variable type: ${u}`),n&&n.messages&&n.messages.push(new bl("visual-variable:unsupported",`visualVariable of type '${u}' is not supported`,{definition:l,context:n})));const p=new h;return p.read(l,n),p})}writeVariables(e,i){const n=[];for(const r of e){const s=r.toJSON(i);s&&n.push(s)}return n}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};c([d()],U$.prototype,"visualVariables",null),U$=c([O("esri.renderers.visualVariables.VisualVariableFactory")],U$);const aje=U$,lje={base:KI,key:"type",typeMap:{opacity:rhe,color:nhe,rotation:she,size:ER}},o1=t=>{let e=class extends t{constructor(){super(...arguments),this._vvFactory=new aje}set visualVariables(i){this._vvFactory.visualVariables=i,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(i,n,r){return this._vvFactory.readVariables(i,n,r)}writeVisualVariables(i,n,r,s){n[r]=this._vvFactory.writeVariables(i,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const i of this.visualVariables)if(i.arcadeRequired)return!0;return!1}hasVisualVariables(i,n){return i?this.getVisualVariablesForType(i,n).length>0:this.getVisualVariablesForType("size",n).length>0||this.getVisualVariablesForType("color",n).length>0||this.getVisualVariablesForType("opacity",n).length>0||this.getVisualVariablesForType("rotation",n).length>0}getVisualVariablesForType(i,n){const r=this.visualVariables;return r?r.filter(s=>s.type===i&&(typeof n=="string"?s.target===n:n!==!1||!s.target)):[]}async collectVVRequiredFields(i,n){let r=[];this.visualVariables&&(r=r.concat(this.visualVariables));for(const s of r)s&&(s.field&&Sa(i,n,s.field),s.normalizationField&&Sa(i,n,s.normalizationField),s.valueExpression&&(cje(s.valueExpression,i,n)||await Js(i,n,s.valueExpression)))}};return c([d({types:[lje],value:null,json:{write:!0}})],e.prototype,"visualVariables",null),c([de("visualVariables",["visualVariables","rotationType","rotationExpression"])],e.prototype,"readVisualVariables",null),c([fe("visualVariables")],e.prototype,"writeVisualVariables",null),e=c([O("esri.renderers.mixins.VisualVariablesMixin")],e),e};function cje(t,e,i){const n=V4e(t);return!!A(n)&&(Sa(e,i,n),!0)}const ox={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function uje(t,e=ox){var a,l;if(!t)return{symbol:null};const{retainId:i=ox.retainId,ignoreDrivers:n=ox.ignoreDrivers,hasLabelingContext:r=ox.hasLabelingContext,retainCIM:s=ox.retainCIM}=e;let o=null;if(rm(t)||t instanceof z0)o=t.clone();else if(t.type==="cim"){const u=(l=(a=t.data)==null?void 0:a.symbol)==null?void 0:l.type;if(u!=="CIMPointSymbol")return{error:new N("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${u||"unknown"}' is unsupported in 3D`,{symbol:t})};o=s?t.clone():Py.fromCIMSymbol(t)}else if(t instanceof Is)o=ZP.fromSimpleLineSymbol(t);else if(t instanceof $c)o=Py.fromSimpleMarkerSymbol(t);else if(t instanceof e1)o=Py.fromPictureMarkerSymbol(t);else if(t instanceof Lc)o=e.geometryType&&e.geometryType==="mesh"?KP.fromSimpleFillSymbol(t):VI.fromSimpleFillSymbol(t);else{if(!(t instanceof N0))return{error:new N("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${t.type||t.declaredClass}' is unsupported in 3D`,{symbol:t})};o=r?YP.fromTextSymbol(t):Py.fromTextSymbol(t)}if(i&&o&&o.type!=="cim"&&(o.id=t.id),n&&rm(o))for(let u=0;u<o.symbolLayers.length;++u)o.symbolLayers.getItemAt(u)._ignoreDrivers=!0;return{symbol:o}}function nO(t,e,i,n){const r=phe(t,{},{context:n,isLabelSymbol:!1});A(r)&&(e[i]=r)}function YY(t,e,i,n){const r=phe(t,{},{context:n,isLabelSymbol:!0});A(r)&&(e[i]=r)}function ZY(t){return t instanceof Qw||t instanceof z0}function phe(t,e,i){if(U(t))return null;const{context:n,isLabelSymbol:r}=i,s=n==null?void 0:n.origin,o=n==null?void 0:n.messages;if(s==="web-scene"&&!ZY(t)){const a=uje(t,{retainCIM:!0,hasLabelingContext:r});return A(a.symbol)?a.symbol.write(e,n):(o==null||o.push(new N("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:t,context:n,error:a.error})),null)}return(s==="web-map"||s==="portal-item"&&!jue(n==null?void 0:n.layer))&&ZY(t)?(o==null||o.push(new N("symbol:unsupported",`Symbols of type '${t.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:t,context:n})),null):t.write(e,n)}function fhe(t,e){return fPe(t,null,e)}const a1={types:QP,json:{write:{writer:nO},origins:{"web-scene":{types:JW,write:{writer:nO},read:{reader:bm({types:JW})}}}}},mhe={types:{base:Uo,key:"type",typeMap:{"simple-fill":_o.typeMap["simple-fill"],"picture-fill":_o.typeMap["picture-fill"],"polygon-3d":_o.typeMap["polygon-3d"]}},json:{write:{writer:nO},origins:{"web-scene":{type:VI,write:{writer:nO}}}}},B$={cast:t=>t==null||typeof t=="string"||typeof t=="number"?t:`${t}`,json:{type:String,write:{writer:(t,e)=>{e.value=t==null?void 0:t.toString()}}}};var Dj;let Mp=Dj=class extends Y{constructor(t){super(t),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new Dj({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${t}`}};c([d({type:String,json:{write:!0}})],Mp.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Mp.prototype,"label",void 0),c([d({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],Mp.prototype,"minValue",void 0),c([d({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],Mp.prototype,"maxValue",void 0),c([d(a1)],Mp.prototype,"symbol",void 0),Mp=Dj=c([O("esri.renderers.support.ClassBreakInfo")],Mp);const rO=Mp;var Fj;const ghe="log",H$="percent-of-total",G$="field",kT=new Fe({esriNormalizeByLog:ghe,esriNormalizeByPercentOfTotal:H$,esriNormalizeByField:G$}),dje=Ht(rO);let An=Fj=class extends o1(Uh){constructor(t){super(t),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(t,e,i){if(!Array.isArray(t))return;let n=e.minValue;return t.map(r=>{const s=new rO;return s.read(r,i),s.minValue==null&&(s.minValue=n),s.maxValue==null&&(s.maxValue=s.minValue),n=s.maxValue,s})}writeClassBreakInfos(t,e,i,n){const r=t.map(s=>s.write({},n));this._areClassBreaksConsecutive()&&r.forEach(s=>delete s.classMinValue),e[i]=r}castField(t){return t==null?t:typeof t=="function"?(se.getLogger(this.declaredClass).error(".field: field must be a string value"),null):CI(t)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let t=this._get("normalizationType");const e=!!this.normalizationField,i=this.normalizationTotal!=null;return e||i?(t=e&&G$||i&&H$||null,e&&i&&se.getLogger(this.declaredClass).warn("warning: both normalizationField and normalizationTotal are set!")):t!==G$&&t!==H$||(t=null),t}set normalizationType(t){this._set("normalizationType",t)}addClassBreakInfo(t,e,i){let n=null;n=typeof t=="number"?new rO({minValue:t,maxValue:e,symbol:ece(i)}):dje(G(t)),this.classBreakInfos.push(n),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(t,e){const i=this.classBreakInfos.length;for(let n=0;n<i;n++){const r=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(r[0]===t&&r[1]===e){this.classBreakInfos.splice(n,1);break}}}getBreakIndex(t,e){return this.valueExpression&&(U(e)||U(e.arcade))&&se.getLogger(this.declaredClass).warn(""),this.valueExpression?this._getBreakIndexForExpression(t,e):this._getBreakIndexForField(t)}async getClassBreakInfo(t,e){let i=e;this.valueExpression&&(U(e)||U(e.arcade))&&(i={...i,arcade:await Rc()});const n=this.getBreakIndex(t,i);return n!==-1?this.classBreakInfos[n]:null}getSymbol(t,e){if(this.valueExpression&&(U(e)||U(e.arcade)))return void se.getLogger(this.declaredClass).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this.getBreakIndex(t,e);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(U(e)||U(e.arcade))){const r=await Rc(),{arcadeUtils:s}=r;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:r}}const n=this.getBreakIndex(t,i);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}getSymbols(){const t=[];return this.classBreakInfos.forEach(e=>{e.symbol&&t.push(e.symbol)}),this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${t}.${e}.${this.classBreakInfos.reduce((n,r)=>n+r.getMeshHash(),"")}.${i}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new Fj({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:G(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:G(this.visualVariables),legendOptions:G(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(n=>n.collectRequiredFields(t,e)),Js(t,e,this.valueExpression)];Sa(t,e,this.field),Sa(t,e,this.normalizationField),await Promise.all(i)}_getBreakIndexForExpression(t,e){const{viewingMode:i,scale:n,spatialReference:r,arcade:s}=xs(e,{}),{valueExpression:o}=this;let a=this._compiledValueExpression.valueExpression===o?this._compiledValueExpression.compiledFunction:null;const l=s.arcadeUtils;if(!a){const h=l.createSyntaxTree(o);a=l.createFunction(h),this._compiledValueExpression.compiledFunction=a}this._compiledValueExpression.valueExpression=o;const u=l.executeFunction(a,l.createExecContext(t,l.getViewInfo({viewingMode:i,scale:n,spatialReference:r})));return this._getBreakIndexfromInfos(u)}_getBreakIndexForField(t){const e=this.field,i=t.attributes,n=this.normalizationType;let r=parseFloat(i[e]);if(n){const s=this.normalizationTotal,o=parseFloat(this.normalizationField?i[this.normalizationField]:void 0);if(n===ghe)r=Math.log(r)*Math.LOG10E;else if(n!==H$||s==null||isNaN(s)){if(n===G$&&!isNaN(o)){if(isNaN(r)||isNaN(o))return-1;r/=o}}else r=r/s*100}return this._getBreakIndexfromInfos(r)}_getBreakIndexfromInfos(t){const e=this.isMaxInclusive;if(t!=null&&typeof t=="number"&&!isNaN(t))for(let i=0;i<this.classBreakInfos.length;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]<=t&&(e?t<=n[1]:t<n[1]))return i}return-1}_areClassBreaksConsecutive(){const t=this.classBreakInfos,e=t.length;for(let i=1;i<e;i++)if(t[i-1].maxValue!==t[i].minValue)return!1;return!0}};c([d(mhe)],An.prototype,"backgroundFillSymbol",void 0),c([d({type:[rO]})],An.prototype,"classBreakInfos",void 0),c([de("classBreakInfos")],An.prototype,"readClassBreakInfos",null),c([fe("classBreakInfos")],An.prototype,"writeClassBreakInfos",null),c([d({type:String,json:{write:!0}})],An.prototype,"defaultLabel",void 0),c([d(a1)],An.prototype,"defaultSymbol",void 0),c([d({type:String,json:{write:!0}})],An.prototype,"field",void 0),c([st("field")],An.prototype,"castField",null),c([d({type:Boolean})],An.prototype,"isMaxInclusive",void 0),c([d({type:F_,json:{write:!0}})],An.prototype,"legendOptions",void 0),c([d({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],An.prototype,"minValue",null),c([d({type:String,json:{write:!0}})],An.prototype,"normalizationField",void 0),c([d({type:Number,cast:t=>sl(t),json:{write:!0}})],An.prototype,"normalizationTotal",void 0),c([d({type:kT.apiValues,value:null,json:{type:kT.jsonValues,read:kT.read,write:kT.write}})],An.prototype,"normalizationType",null),c([Ce({classBreaks:"class-breaks"})],An.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],An.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],An.prototype,"valueExpressionTitle",void 0),An=Fj=c([O("esri.renderers.ClassBreaksRenderer")],An);const yhe=An;let hje=class{constructor(e,i){this._storage=new bde,this._storage.maxSize=e,i&&this._storage.registerRemoveFunc("",i)}put(e,i,n){this._storage.put(e,i,n,1)}pop(e){return this._storage.pop(e)}get(e){return this._storage.get(e)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(e){this._storage.maxSize=e}};const KY="esri.renderers.support.DictionaryLoader",pje={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let FB=class{constructor(e,i,n){this.config=null,this.fieldMap=null,this.url=null,this._ongoingRequests=new Map,this._symbolCache=new hje(100),this._dictionaryPromise=null,this.url=e,this.config=i,this.fieldMap=n}getSymbolFields(){return this._symbolFields}async getSymbolAsync(e,i){let n;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(i));try{n=await this._dictionaryPromise}catch(g){if(Pa(g))return this._dictionaryPromise=null,null}const r={};if(this.fieldMap)for(const g of this._symbolFields){const v=this.fieldMap[g];if(v&&e.attributes[v]!=null){const b=""+e.attributes[v];r[g]=b}else r[g]=""}const s=n==null?void 0:n(r,i);if(!s||typeof s!="string")return null;const o=T8(s).toString(),a=this._symbolCache.get(o);if(a)return a.catch(()=>{this._symbolCache.pop(o)}),a;const l=s.split(";"),u=[],h=[];for(const g of l)if(g)if(g.includes("po:")){const v=g.substr(3).split("|");if(v.length===3){const b=v[0],_=v[1];let w=v[2];if(_==="DashTemplate")w=w.split(" ").map(S=>Number(S));else if(_==="Color"){const S=new Se(w).toRgba();w=[S[0],S[1],S[2],255*S[3]]}else w=Number(w);h.push({primitiveName:b,propertyName:_,value:w})}}else if(g.includes("|")){for(const v of g.split("|"))if(this._itemNames.has(v)){u.push(v);break}}else this._itemNames.has(g)&&u.push(g);const p=!A(e.geometry)||!e.geometry.hasZ&&e.geometry.type==="point",f=this._cimPartsToCIMSymbol(u,h,p,i);return this._symbolCache.put(o,f,1),f}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void se.getLogger(KY).error("no valid URL!");const i=rt(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},signal:A(e)?e.signal:null}),[{data:n}]=await Promise.all([i,Rc()]);if(!n)throw this._dictionaryPromise=null,new N("esri.renderers.DictionaryRenderer","Bad dictionary data!");const r=n.expression,s=n.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+n.cimRefTemplateUrl,this._itemNames=new Set(n.itemsNames),this._symbolFields=s.symbol;const o={};if(this.config){const u=this.config;for(const h in u)o[h]=u[h]}if(s.configuration)for(const u of s.configuration)o.hasOwnProperty(u.name)||(o[u.name]=u.value);const a=[];if(A(e)&&e.fields&&this.fieldMap)for(const u of this._symbolFields){const h=this.fieldMap[u],p=e.fields.filter(f=>f.name===h);p.length>0&&a.push({...p[0],name:u})}const l=Jke(r,A(e)?e.spatialReference:null,a,o).then(u=>{const h={scale:0};return(p,f)=>{if(U(u))return null;const g=u.repurposeFeature({geometry:null,attributes:p});return h.scale=A(f)?f.scale??void 0:void 0,u.evaluate({$feature:g,$view:h})}}).catch(u=>(se.getLogger(KY).error("Creating dictinoary expression failed:",u),null));return this._dictionaryPromise=l,l}async _cimPartsToCIMSymbol(e,i,n,r){const s=new Array(e.length);for(let l=0;l<e.length;l++)s[l]=this._getSymbolPart(e[l],r);const o=await Promise.all(s),a=this.fieldMap;if(a)for(const l of o)vhe(l,a);return new OI({data:this._combineSymbolParts(o,i,n)})}async _getSymbolPart(e,i){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(s=>s.data);const n=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),r=rt(n,{responseType:"json",query:{f:"json"},...i});this._ongoingRequests.set(e,r);try{return(await r).data}catch(s){throw this._ongoingRequests.delete(e),s}}_combineSymbolParts(e,i,n){if(!e||e.length===0)return null;const r={...e[0]};if(e.length>1){r.symbolLayers=[];for(const s of e){const o=s;r.symbolLayers.unshift(...o.symbolLayers)}}return n&&(r.callout=pje),{type:"CIMSymbolReference",symbol:r,primitiveOverrides:i}}};function vhe(t,e){if(!t)return;const i=t.symbolLayers;if(!i)return;let n=i.length;for(;n--;){const r=i[n];r&&r.enable!==!1&&r.type==="CIMVectorMarker"&&fje(r,e)}}function fje(t,e){const i=t.markerGraphics;if(i)for(const n of i){if(!n)continue;const r=n.symbol;if(r)switch(r.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":vhe(r,e);break;case"CIMTextSymbol":r.fieldMap=e}}}const xbt=Object.freeze(Object.defineProperty({__proto__:null,DictionaryLoader:FB},Symbol.toStringTag,{value:"Module"}));var Nj;let Kl=Nj=class extends o1(Uh){constructor(t){super(t),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}get _loader(){return new FB(this.url,this.config,this.fieldMap)}writeData(t,e){t&&(e.scalingExpressionInfo={expression:t,returnType:"number"})}writeVisualVariables(t,e,i,n){n!=null&&n.origin||super.writeVisualVariables(t,e,i,n)}clone(){return new Nj({config:G(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:G(this.fieldMap),url:G(this.url),visualVariables:G(this.visualVariables)})}async getSymbolAsync(t,e){return this._loader.getSymbolAsync(t,e)}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e),this.scaleExpression&&await Js(t,e,this.scaleExpression);for(const i in this.fieldMap){const n=this.fieldMap[i];e.has(n)&&t.add(n)}}get arcadeRequired(){return!0}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._loader.getSymbolFields()}};c([d({type:FB})],Kl.prototype,"_loader",null),c([d({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],Kl.prototype,"config",void 0),c([d({type:Object,json:{write:!0}})],Kl.prototype,"fieldMap",void 0),c([d({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],Kl.prototype,"scaleExpression",void 0),c([fe("scaleExpression")],Kl.prototype,"writeData",null),c([d({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(t){return{enabled:!!t&&!!this.scaleExpression}}}}})],Kl.prototype,"scaleExpressionTitle",void 0),c([d({type:String,json:{write:!0}})],Kl.prototype,"url",void 0),c([fe("visualVariables")],Kl.prototype,"writeVisualVariables",null),Kl=Nj=c([O("esri.renderers.DictionaryRenderer")],Kl);const mje=Kl;var zj;let kd=zj=class extends Y{constructor(t){super(t),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(t){return t==null?t:typeof t=="function"?(se.getLogger(this.declaredClass).error(".field: field must be a string value"),null):CI(t)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new zj({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([d({type:Se,json:{type:[Number],write:!0}})],kd.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],kd.prototype,"field",void 0),c([st("field")],kd.prototype,"castField",null),c([d({type:String,json:{write:!0}})],kd.prototype,"label",void 0),c([d({type:String,json:{write:!0}})],kd.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],kd.prototype,"valueExpressionTitle",void 0),kd=zj=c([O("esri.renderers.support.AttributeColorInfo")],kd);const bhe=kd;var jj;let q$=jj=class extends Y{constructor(){super(...arguments),this.unit=null}clone(){return new jj({unit:this.unit})}};c([d({type:String,json:{write:!0}})],q$.prototype,"unit",void 0),q$=jj=c([O("esri.renderers.support.DotDensityLegendOptions")],q$);const gje=q$;var Vj;let po=Vj=class extends o1(Uh){constructor(t){super(t),this.attributes=null,this.backgroundColor=new Se([0,0,0,0]),this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new Is,this.dotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(t){if(this.referenceScale==null)return this.dotValue;const e=t/this.referenceScale*this.dotValue;return e<1?1:e}getSymbol(){return new Lc({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){var t;return((t=this.attributes)==null?void 0:t.reduce((e,i)=>e+i.getAttributeHash(),""))??""}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new Vj({attributes:G(this.attributes),backgroundColor:G(this.backgroundColor),dotBlendingEnabled:G(this.dotBlendingEnabled),dotShape:G(this.dotShape),dotSize:G(this.dotSize),dotValue:G(this.dotValue),legendOptions:G(this.legendOptions),outline:G(this.outline),referenceScale:G(this.referenceScale),visualVariables:G(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){var e;return`${(e=this.attributes)==null?void 0:e.map(i=>i.field||i.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(t,e){await this.collectVVRequiredFields(t,e);for(const i of this.attributes??[])i.valueExpression&&await Js(t,e,i.valueExpression),i.field&&t.add(i.field)}};c([d({type:[bhe],json:{write:!0}})],po.prototype,"attributes",void 0),c([d({type:Se,json:{write:!0}})],po.prototype,"backgroundColor",void 0),c([d({type:Boolean,json:{write:!0}})],po.prototype,"dotBlendingEnabled",void 0),c([d({type:String,json:{write:!1}})],po.prototype,"dotShape",void 0),c([d({type:Number,json:{write:!0}})],po.prototype,"dotSize",void 0),c([d({type:gje,json:{write:!0}})],po.prototype,"legendOptions",void 0),c([d({type:Is,json:{default:null,write:!0}})],po.prototype,"outline",void 0),c([d({type:Number,json:{write:!0}})],po.prototype,"dotValue",void 0),c([d({type:Number,json:{write:!0}})],po.prototype,"referenceScale",void 0),c([d({type:Number,json:{write:!0}})],po.prototype,"seed",void 0),c([Ce({dotDensity:"dot-density"})],po.prototype,"type",void 0),po=Vj=c([O("esri.renderers.DotDensityRenderer")],po);const yje=po;let eb=class extends _t(Y){constructor(){super(...arguments),this.minLabel=null,this.maxLabel=null,this.title=null}};c([d({type:String,json:{write:!0}})],eb.prototype,"minLabel",void 0),c([d({type:String,json:{write:!0}})],eb.prototype,"maxLabel",void 0),c([d({type:String,json:{write:!0}})],eb.prototype,"title",void 0),eb=c([O("esri.renderers.support.HeatmapLegendOptions")],eb);function CR(){return[0,0,0,0]}function vje(t){return[t[0],t[1],t[2],t[3]]}function l1(t,e,i,n){return[t,e,i,n]}function bje(t){const e=CR(),i=Math.min(4,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function _je(t,e){return new Float64Array(t,e,4)}function _he(){return CR()}function whe(){return l1(1,1,1,1)}function xhe(){return l1(1,0,0,0)}function She(){return l1(0,1,0,0)}function Ehe(){return l1(0,0,1,0)}function Che(){return l1(0,0,0,1)}const wje=_he(),xje=whe(),Sje=xhe(),Eje=She(),Cje=Ehe(),Ije=Che();Object.freeze(Object.defineProperty({__proto__:null,ONES:xje,UNIT_W:Ije,UNIT_X:Sje,UNIT_Y:Eje,UNIT_Z:Cje,ZEROS:wje,clone:vje,create:CR,createView:_je,fromArray:bje,fromValues:l1,ones:whe,unitW:Che,unitX:xhe,unitY:She,unitZ:Ehe,zeros:_he},Symbol.toStringTag,{value:"Module"}));const NB=2.4;function Tje(t){return ju(t*NB)}function kje(t){return Br(t)/NB}function $je(t,e,i,n){let{color:r,ratio:s}=e,{color:o,ratio:a}=i;a===s&&(a===1?s-=1e-6:a+=1e-6);const l=zo((n-s)/(a-s),0,1);ele(t,r.toArray(),o.toArray(),l)}function Ebt(t){const i=new Uint8ClampedArray(2048);if(t=t.filter(({ratio:a})=>a>=0&&a<=1).sort((a,l)=>a.ratio-l.ratio).map(({color:a,ratio:l})=>({color:a,ratio:Math.max(l,.001)})),t.length<1)return i;let n=t[0],r=t[0],s=1;const o=CR();for(let a=0;a<512;a++){const l=(a+.5)/512;for(;l>r.ratio&&s<t.length;)n=r,r=t[s++];$je(o,n,r,l),i.set(o,4*a)}return i}function Cbt(t,e,i,n){const{radius:r,fieldOffset:s,field:o}=e,a=Math.round(Br(r)),l=new Float64Array(i*n);let u,h=Number.NEGATIVE_INFINITY;const p=Oje(o,s),f=new Set;for(const g of t){const v=g.getCursor();for(;v.next();){const b=v.getObjectId();if(f.has(b))continue;f.add(b);const _=v.readLegacyPointGeometry(),w=128;if(_.x<-w||_.x>=i+w||_.y<-w||_.y>n+w)continue;const S=+p(v),C=Math.max(0,Math.round(_.x)-a),$=Math.max(0,Math.round(_.y)-a),M=Math.min(n,Math.round(_.y)+a),P=Math.min(i,Math.round(_.x)+a);for(let k=$;k<M;k++)for(let D=C;D<P;D++){const z=k*i+D,B=Mje(_.x-D,_.y-k,a);u=l[z]+=B*S,u>h&&(h=u)}}}return{matrix:l.buffer,max:h}}function Ibt(t,e,i,n,r,s){t.canvas.width=t.canvas.height=e,t.clearRect(0,0,e,e);const o=t.getImageData(0,0,e,e);i&&n&&o.data.set(new Uint8ClampedArray(Aje(e,i,n,r,s))),t.putImageData(o,0,0)}function Aje(t,e,i,n,r){const s=new Uint32Array(t*t),o="buffer"in e?e:new Float64Array(e),a="buffer"in i?new Uint32Array(i.buffer):new Uint32Array(new Uint8Array(i).buffer),l=a.length/(r-n);for(let u=0;u<o.length;u++){const h=o[u],p=Math.floor((h-n)*l);s[u]=a[zo(p,0,a.length-1)]}return s.buffer}function Mje(t,e,i){const n=Math.sqrt(t**2+e**2)/i;return n>1?0:3/(Math.PI*i**2)*(1-n**2)**2}function Tbt(t,e){return typeof t=="function"?t:t?typeof e=="string"?i=>-1*+i[t]:i=>+i[t]+e:()=>1}function Oje(t,e){return t!=null?typeof e=="string"?i=>-1*+i.readAttribute(t):i=>+i.readAttribute(t)+e:i=>1}var Uj;const Ihe="esri.renderers.HeatmapRenderer",Pje=se.getLogger(Ihe);function XY(t){if(t!=null){const{maxDensity:e,minDensity:i,radius:n}=t;if(e!=null||i!=null||n!=null){const{blurRadius:r,maxPixelIntensity:s,minPixelIntensity:o,...a}=t;return a}}return t}let Yn=Uj=class extends Uh{constructor(t){super(t),this.authoringInfo=null,this.colorStops=[new xE({ratio:0,color:new Se("rgba(255, 140, 0, 0)")}),new xE({ratio:.75,color:new Se("rgba(255, 140, 0, 1)")}),new xE({ratio:.9,color:new Se("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.legendOptions=null,this.maxDensity=.04,this.minDensity=0,this.radius=18,this.referenceScale=0,this.type="heatmap",this.valueExpression=null,this.valueExpressionTitle=null,this._warnedProps={blurRadius:!1,maxPixelIntensity:!1,minPixelIntensity:!1}}normalizeCtorArgs(t){return XY(t)}get blurRadius(){return kje(this.radius)}set blurRadius(t){const e=this.maxPixelIntensity,i=this.minPixelIntensity;this._set("radius",Tje(t)),this._warnAboutDeprecatedGaussianBlurProp("blurRadius","radius"),this._set("maxDensity",e*this._pixelIntensityToDensity),this._set("minDensity",i*this._pixelIntensityToDensity)}get maxPixelIntensity(){return this.maxDensity/this._pixelIntensityToDensity}set maxPixelIntensity(t){this._set("maxDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("maxPixelIntensity","maxDensity")}get minPixelIntensity(){return this.minDensity/this._pixelIntensityToDensity}set minPixelIntensity(t){this._set("minDensity",t*this._pixelIntensityToDensity),this._warnAboutDeprecatedGaussianBlurProp("minPixelIntensity","minDensity")}get _pixelIntensityToDensity(){return 24/(NB**2*this.blurRadius**4)}_warnAboutDeprecatedGaussianBlurProp(t,e){this._warnedProps[t]||Cs(this).getDefaultOrigin()==="user"&&(this._warnedProps[t]=!0,Hw(()=>{Ay(Pje,t,{replacement:`${String(e)} (suggested value: ${this._get(e)})`,version:"4.24"})}))}read(t,e){t=XY(t),super.read(t,e)}getSymbol(){return new $c}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}async collectRequiredFields(t,e){const i=this.field,n=this.valueExpression;i&&typeof i=="string"&&await Sa(t,e,i),n&&typeof n=="string"&&await Js(t,e,n)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new Uj({authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),colorStops:G(this.colorStops),field:this.field,legendOptions:G(this.legendOptions),maxDensity:this.maxDensity,minDensity:this.minDensity,radius:this.radius,referenceScale:this.referenceScale,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([d({type:LB,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],Yn.prototype,"authoringInfo",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Yn.prototype,"blurRadius",null),c([d({type:[xE],json:{write:!0}})],Yn.prototype,"colorStops",void 0),c([d({type:String,json:{write:!0}})],Yn.prototype,"field",void 0),c([d({type:Number,json:{write:{overridePolicy:(t,e,i)=>({enabled:i==null})},origins:{"web-scene":{write:!1}}}})],Yn.prototype,"fieldOffset",void 0),c([d({type:eb,json:{write:!0}})],Yn.prototype,"legendOptions",void 0),c([d({type:Number,json:{write:!0}})],Yn.prototype,"maxDensity",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Yn.prototype,"maxPixelIntensity",null),c([d({type:Number,json:{write:!0}})],Yn.prototype,"minDensity",void 0),c([d({type:Number,json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Yn.prototype,"minPixelIntensity",null),c([d({type:Number,cast:vt,json:{write:!0}})],Yn.prototype,"radius",void 0),c([d({type:Number,range:{min:0},json:{default:0,write:!0}})],Yn.prototype,"referenceScale",void 0),c([Ce({heatmap:"heatmap"})],Yn.prototype,"type",void 0),c([d({type:String,json:{write:!0,origins:{"web-document":{write:!1},"portal-item":{write:!1}}}})],Yn.prototype,"valueExpression",void 0),c([d({type:String})],Yn.prototype,"valueExpressionTitle",void 0),c([d({readOnly:!0})],Yn.prototype,"_pixelIntensityToDensity",null),Yn=Uj=c([O(Ihe)],Yn);const The=Yn;let gy=class extends _t(Y){constructor(){super(...arguments),this.color=new Se([0,0,0,0]),this.label=null,this.threshold=0}};c([d({type:Se,json:{write:!0}})],gy.prototype,"color",void 0),c([d({type:String,json:{write:!0}})],gy.prototype,"label",void 0),c([d({type:Number,range:{min:0,max:1},json:{write:!0}})],gy.prototype,"threshold",void 0),gy=c([O("esri.renderers.support.OthersCategory")],gy);let W$=class extends _t(Y){constructor(){super(...arguments),this.title=null}};c([d({type:String,json:{write:!0}})],W$.prototype,"title",void 0),W$=c([O("esri.renderers.support.PieChartLegendOptions")],W$);let ea=class extends o1(_t(Uh)){constructor(e){super(e),this.attributes=null,this.backgroundFillSymbol=null,this.defaultColor=new Se([0,0,0,0]),this.defaultLabel=null,this.holePercentage=0,this.othersCategory=new gy,this.legendOptions=null,this.outline=null,this.size=12,this.type="pie-chart"}getSymbol(){var e;return new $c({size:this.size?this.size/2+(((e=this.outline)==null?void 0:e.width)||0):0})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol(),this.backgroundFillSymbol].filter(A)}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,i)=>e+i.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,i)=>e+JSON.stringify(i),"")}async collectRequiredFields(e,i){await this.collectVVRequiredFields(e,i);for(const n of this.attributes)n.valueExpression&&await Js(e,i,n.valueExpression),n.field&&e.add(n.field)}};c([d({type:[bhe],json:{write:!0}})],ea.prototype,"attributes",void 0),c([d({type:Lc,json:{default:null,write:!0}})],ea.prototype,"backgroundFillSymbol",void 0),c([d({type:Se,json:{write:!0}})],ea.prototype,"defaultColor",void 0),c([d({type:String,json:{write:!0}})],ea.prototype,"defaultLabel",void 0),c([d({type:Number,range:{min:0,max:1},json:{write:!0}})],ea.prototype,"holePercentage",void 0),c([d({type:gy,json:{write:!0}})],ea.prototype,"othersCategory",void 0),c([d({type:W$,json:{write:!0}})],ea.prototype,"legendOptions",void 0),c([d({type:Is,json:{default:null,write:!0}})],ea.prototype,"outline",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],ea.prototype,"size",void 0),c([Ce({pieChart:"pie-chart"})],ea.prototype,"type",void 0),ea=c([O("esri.renderers.PieChartRenderer")],ea);const Rje=ea;var Bj;let zg=Bj=class extends o1(Uh){constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(t,e){await Promise.all([this.collectSymbolFields(t,e),this.collectVVRequiredFields(t,e)])}async collectSymbolFields(t,e){await Promise.all(this.getSymbols().map(i=>i.collectRequiredFields(t,e)))}getSymbol(t,e){return this.symbol}async getSymbolAsync(t,e){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((t,e)=>t+JSON.stringify(e),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new Bj({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:G(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};c([d({type:String,json:{write:!0}})],zg.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],zg.prototype,"label",void 0),c([d(a1)],zg.prototype,"symbol",void 0),c([Ce({simple:"simple"})],zg.prototype,"type",void 0),zg=Bj=c([O("esri.renderers.SimpleRenderer")],zg);const yw=zg,Lje=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function Hj(t){return t instanceof _e}function QY(t){return t instanceof we?Object.keys(t.items):Hj(t)?Cs(t).keys():t?Object.keys(t):[]}function $T(t,e){return t instanceof we?t.items[e]:t[e]}function Dje(t,e){return!(!Array.isArray(t)||!Array.isArray(e))&&t.length!==e.length}function CE(t){return t?t.declaredClass:null}function khe(t,e){const i=t.diff;if(i&&typeof i=="function")return i(t,e);const n=QY(t),r=QY(e);if(n.length===0&&r.length===0)return;if(!n.length||!r.length||Dje(t,e))return{type:"complete",oldValue:t,newValue:e};const s=r.filter(p=>!n.includes(p)),o=n.filter(p=>!r.includes(p)),a=n.filter(p=>r.includes(p)&&$T(t,p)!==$T(e,p)).concat(s,o).sort(),l=CE(t);if(l&&Lje.includes(l)&&a.length)return{type:"complete",oldValue:t,newValue:e};let u;const h=Hj(t)&&Hj(e);for(const p of a){const f=$T(t,p),g=$T(e,p);let v;if((h||typeof f!="function"&&typeof g!="function")&&f!==g&&(f!=null||g!=null)){if(i&&i[p]&&typeof i[p]=="function")v=i[p](f,g);else if(f instanceof Date&&g instanceof Date){if(f.getTime()===g.getTime())continue;v={type:"complete",oldValue:f,newValue:g}}else v=typeof f=="object"&&typeof g=="object"&&CE(f)===CE(g)?khe(f,g):{type:"complete",oldValue:f,newValue:g};A(v)&&(A(u)?u.diff[p]=v:u={type:"partial",diff:{[p]:v}})}}return u}function Fje(t,e){if(U(t))return!1;const i=e.split(".");let n=t;for(const r of i){if(n.type==="complete")return!0;if(n.type!=="partial")return!1;{const s=n.diff[r];if(!s)return!1;n=s}}return!0}function Mbt(t,e){for(const i of e)if(Fje(t,i))return!0;return!1}function Nje(t,e){if(!(typeof t=="function"||typeof e=="function"||U(t)&&U(e)))return U(t)||U(e)||typeof t=="object"&&typeof e=="object"&&CE(t)!==CE(e)?{type:"complete",oldValue:t,newValue:e}:khe(t,e)}function AT(t){if(U(t))return!0;switch(t.type){case"complete":return!1;case"collection":{const e=t;for(const i of e.added)if(!AT(i))return!1;for(const i of e.removed)if(!AT(i))return!1;for(const i of e.changed)if(!AT(i))return!1;return!0}case"partial":for(const e in t.diff)if(!AT(t.diff[e]))return!1;return!0}}let tb=class extends _t(Y){constructor(e){super(e),this.value=null,this.value2=null,this.value3=null}};c([d(B$)],tb.prototype,"value",void 0),c([d(B$)],tb.prototype,"value2",void 0),c([d(B$)],tb.prototype,"value3",void 0),tb=c([O("esri.renderers.support.UniqueValue")],tb);const N_=tb;let Op=class extends _t(Y){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.values=null}castValues(e){if(e==null)return null;const i=typeof(e=Array.isArray(e)?e:[e])[0];return i==="string"||i==="number"?e.map(n=>new N_({value:n})):i==="object"?e[0]instanceof N_?e:e.map(n=>new N_(n)):null}};c([d({type:String,json:{write:!0}})],Op.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Op.prototype,"label",void 0),c([d(a1)],Op.prototype,"symbol",void 0),c([d({type:[N_],json:{type:[[String]],read:{reader:t=>t?t.map(e=>new N_({value:e[0],value2:e[1],value3:e[2]})):null},write:{writer:(t,e)=>{const i=[];for(const n of t){const r=[n.value,n.value2,n.value3].filter(A).map(s=>s.toString());i.push(r)}e.values=i}}}})],Op.prototype,"values",void 0),c([st("values")],Op.prototype,"castValues",null),Op=c([O("esri.renderers.support.UniqueValueClass")],Op);const $he=Op;let xS=class extends _t(Y){constructor(e){super(e),this.heading=null,this.classes=null}};c([d({type:String,json:{write:!0}})],xS.prototype,"heading",void 0),c([d({type:[$he],json:{write:!0}})],xS.prototype,"classes",void 0),xS=c([O("esri.renderers.support.UniqueValueGroup")],xS);const Gj=xS;var qj;let jg=qj=class extends Y{constructor(t){super(t),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new qj({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const t=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${t}`}};c([d({type:String,json:{write:!0}})],jg.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],jg.prototype,"label",void 0),c([d(a1)],jg.prototype,"symbol",void 0),c([d(B$)],jg.prototype,"value",void 0),jg=qj=c([O("esri.renderers.support.UniqueValueInfo")],jg);const IE=jg,zje=()=>!!ee("enable-feature:force-wosr"),Lbt=()=>!!ee("enable-feature:SceneLayer-editing");let LD={};async function jje(t,e){try{return{data:(await zB(t,e)).data,baseUrl:T9(t),styleUrl:t}}catch(i){return Tu(i),null}}function Vje(t,e,i){const n=A(e.portal)?e.portal:zi.getDefault();let r;const s=`${n.url} - ${n.user&&n.user.username} - ${t}`;return LD[s]||(LD[s]=Uje(t,n,i).then(o=>(r=o,o.fetchData())).then(o=>({data:o,baseUrl:r.itemUrl??"",styleName:t}))),LD[s]}function Uje(t,e,i){return e.load(i).then(()=>{const n=new eh({disableExtraQuery:!0,query:`owner:${eZ} AND type:${tZ} AND typekeywords:"${t}"`});return e.queryItems(n,i)}).then(({results:n})=>{var o;let r=null;const s=t.toLowerCase();if(n&&Array.isArray(n)){for(const a of n)if(((o=a.typeKeywords)==null?void 0:o.some(u=>u.toLowerCase()===s))&&a.type===tZ&&a.owner===eZ){r=a;break}}if(!r)throw new N("symbolstyleutils:style-not-found",`The style '${t}' could not be found`,{styleName:t});return r.load(i)})}function Ahe(t,e,i){return t&&A(t.styleUrl)?jje(t.styleUrl,i):t&&A(t.styleName)?Vje(t.styleName,e,i):Promise.reject(new N("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function Mhe(t){return t===null||t.type==="CIMSymbolReference"?t:{type:"CIMSymbolReference",symbol:t}}function Bje(t,e){if(e==="cimRef")return t.cimRef;if(t.formatInfos&&!zje()){for(const i of t.formatInfos)if(i.type==="gltf")return i.href}return t.webRef}function zB(t,e){const i={responseType:"json",query:{f:"json"},...e};return rt(Ca(t),i)}const eZ="esri_en",tZ="Style",Hje="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var SS;const Ohe="esri.renderers.UniqueValueRenderer",rp=se.getLogger(Ohe),iZ="uvInfos-watcher",nZ="uvGroups-watcher",Gje=",",qje=Ht(IE);function Wje(t){const{field1:e,field2:i,field3:n,fieldDelimiter:r,uniqueValueInfos:s,valueExpression:o}=t,a=!(!e||!i);return[{classes:(s??[]).map(l=>{var w;const{symbol:u,label:h,value:p,description:f}=l,[g,v,b]=a?((w=p==null?void 0:p.toString())==null?void 0:w.split(r||""))||[]:[p],_=[];return(e||o)&&_.push(g),i&&_.push(v),n&&_.push(b),{symbol:u,label:h,values:[_],description:f}})}]}let Ii=SS=class extends o1(Uh){constructor(t){super(t),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this._isInfosSource=null,this.type="unique-value",this.backgroundFillSymbol=null,this.orderByClassesEnabled=!1,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(e,i){if(!e&&!i)return;if(!e||!i)return{type:"complete",oldValue:e,newValue:i};let n=!1;const r={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<i.length;s++){const o=e.find(a=>a.value===i[s].value);o?Nje(o,i[s])?(r.changed.push({type:"complete",oldValue:o,newValue:i[s]}),n=!0):r.unchanged.push({oldValue:o,newValue:i[s]}):(r.added.push(i[s]),n=!0)}for(let s=0;s<e.length;s++)i.find(o=>o.value===e[s].value)||(r.removed.push(e[s]),n=!0);return n?r:void 0}},this._set("uniqueValueInfos",[]),this._set("uniqueValueGroups",[])}get _cache(){return{compiledFunc:null}}set field(t){this._set("field",t),this._updateFieldDelimiter(),this._updateUniqueValues()}castField(t){return t==null||typeof t=="function"?t:CI(t)}writeField(t,e,i,n){typeof t=="string"?e[i]=t:n&&n.messages?n.messages.push(new N("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):rp.error(".field: cannot write field to JSON since it's not a string value")}set field2(t){this._set("field2",t),this._updateFieldDelimiter(),this._updateUniqueValues()}set field3(t){this._set("field3",t),this._updateUniqueValues()}set valueExpression(t){this._set("valueExpression",t),this._updateUniqueValues()}set defaultSymbol(t){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",t)}set fieldDelimiter(t){this._set("fieldDelimiter",t),this._updateUniqueValues()}readPortal(t,e,i){return i.portal||zi.getDefault()}readStyleOrigin(t,e,i){if(e.styleName)return Object.freeze({styleName:e.styleName});if(e.styleUrl){const n=nm(e.styleUrl,i);return Object.freeze({styleUrl:n})}}writeStyleOrigin(t,e,i,n){t.styleName?e.styleName=t.styleName:t.styleUrl&&(e.styleUrl=NI(t.styleUrl,n))}set uniqueValueGroups(t){this.styleOrigin?rp.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",t),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}set uniqueValueInfos(t){this.styleOrigin?rp.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}addUniqueValueInfo(t,e){var n;if(this.styleOrigin)return void rp.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let i;i=typeof t=="object"?qje(t):new IE({value:t,symbol:ece(e)}),(n=this.uniqueValueInfos)==null||n.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}removeUniqueValueInfo(t){if(this.styleOrigin)return void rp.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");const e=this.uniqueValueInfos;if(e){for(let i=0;i<e.length;i++)if(e[i].value===t+""){delete this._valueInfoMap[t],e.splice(i,1);break}}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}async getUniqueValueInfo(t,e){let i=e;return this.valueExpression&&(U(e)||U(e.arcade))&&(i={...i,arcade:await Rc()}),this._getUniqueValueInfo(t,i)}getSymbol(t,e){if(this.valueExpression&&(U(e)||U(e.arcade)))return void rp.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const i=this._getUniqueValueInfo(t,e);return i&&i.symbol||this.defaultSymbol}async getSymbolAsync(t,e){let i=e;if(this.valueExpression&&(U(i)||U(i.arcade))){const r=await Rc(),{arcadeUtils:s}=r;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),i={...i,arcade:r}}const n=this._getUniqueValueInfo(t,i);return n&&n.symbol||this.defaultSymbol}getSymbols(){const t=[];for(const e of this.uniqueValueInfos??[])e.symbol&&t.push(e.symbol);return this.defaultSymbol&&t.push(this.defaultSymbol),t}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((t,e)=>t+e.getAttributeHash(),"")}getMeshHash(){var n;const t=JSON.stringify(this.backgroundFillSymbol),e=JSON.stringify(this.defaultSymbol),i=(n=this.uniqueValueInfos)==null?void 0:n.reduce((r,s)=>r+s.getMeshHash(),"");return`${t}.${e}.${i}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const t=new SS({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:G(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:G(this.visualVariables),legendOptions:G(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:G(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(t._isDefaultSymbolDerived=!0),t._set("portal",this.portal);const e=G(this.uniqueValueInfos),i=G(this.uniqueValueGroups);return this.styleOrigin&&(t._set("styleOrigin",Object.freeze(G(this.styleOrigin))),Object.freeze(e),Object.freeze(i)),t._set("uniqueValueInfos",e),t._updateValueInfoMap(),t._set("uniqueValueGroups",i),t._isInfosSource=this._isInfosSource,t._watchUniqueValueInfosAndGroups(),t}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(t,e){const i=[this.collectVVRequiredFields(t,e),this.collectSymbolFields(t,e)];await Promise.all(i)}async collectSymbolFields(t,e){const i=[...this.getSymbols().map(n=>n.collectRequiredFields(t,e)),Js(t,e,this.valueExpression)];Sa(t,e,this.field),Sa(t,e,this.field2),Sa(t,e,this.field3),await Promise.all(i)}populateFromStyle(){return Ahe(this.styleOrigin,{portal:this.portal}).then(t=>{var i;const e=[];return this._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(n=>{const r=new z0({styleUrl:t.styleUrl,styleName:t.styleName,portal:this.portal,name:n.name});this.defaultSymbol||n.name!==t.data.defaultItem||(this.defaultSymbol=r,this._isDefaultSymbolDerived=!0);const s=new IE({value:n.name,symbol:r});e.push(s),this._valueInfoMap[n.name]=s}),this._set("uniqueValueInfos",Object.freeze(e)),this._updateGroupsFromInfos(!0),this._isInfosSource=null,this._watchUniqueValueInfos(),!this.defaultSymbol&&((i=this.uniqueValueInfos)!=null&&i.length)&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateFieldDelimiter(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",Gje)}_updateUniqueValues(){this._isInfosSource!=null&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}_updateValueInfoMap(){this._valueInfoMap={};const{uniqueValueInfos:t}=this;if(t)for(const e of t)this._valueInfoMap[e.value+""]=e}_watchUniqueValueInfosAndGroups(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}_watchUniqueValueInfos(){this.removeHandles(iZ);const{uniqueValueInfos:t}=this;if(t){const e=[];for(const i of t)e.push(X(()=>({symbol:i.symbol,value:i.value,label:i.label,description:i.description}),(n,r)=>{n!==r&&(this._updateGroupsFromInfos(),this._isInfosSource=!0)},{sync:!0}));this.addHandles(e,iZ)}}_watchUniqueValueGroups(){this.removeHandles(nZ);const{uniqueValueGroups:t}=this;if(t){const e=[];for(const i of t){e.push(X(()=>({classes:i.classes}),(n,r)=>{n!==r&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}));for(const n of i.classes??[])e.push(X(()=>({symbol:n.symbol,values:n.values,label:n.label,description:n.description}),(r,s)=>{r!==s&&(this._updateInfosFromGroups(),this._isInfosSource=!1)},{sync:!0}))}this.addHandles(e,nZ)}}_updateInfosFromGroups(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const t=[],{field:e,field2:i,field3:n,fieldDelimiter:r,uniqueValueGroups:s,valueExpression:o}=this;if(!e&&!o)return this._set("uniqueValueInfos",t),this._updateValueInfoMap(),void this._watchUniqueValueInfos();const a=!(!e||!i);for(const l of s)for(const u of l.classes??[]){const{symbol:h,label:p,values:f,description:g}=u;for(const v of f??[]){const{value:b,value2:_,value3:w}=v,S=[b];i&&S.push(_),n&&S.push(w);const C=a?S.join(r||""):S[0];t.push(new IE({symbol:h,label:p,value:C,description:g}))}}this._set("uniqueValueInfos",t),this._updateValueInfoMap(),this._watchUniqueValueInfos()}_updateGroupsFromInfos(t=!1){if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();const{field:e,field2:i,valueExpression:n,fieldDelimiter:r,uniqueValueInfos:s}=this;if(!e&&!n||!s.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();const o=!(!e||!i),a=s.map(u=>{var w;const{symbol:h,label:p,value:f,description:g}=u,[v,b,_]=o?((w=f==null?void 0:f.toString())==null?void 0:w.split(r||""))||[]:[f];return new $he({symbol:h,label:p,description:g,values:[new N_({value:v,value2:b,value3:_})]})}),l=[new Gj({classes:a})];t&&Object.freeze(l),this._set("uniqueValueGroups",l),this._watchUniqueValueGroups()}_getUniqueValueInfo(t,e){return this.valueExpression?this._getUnqiueValueInfoForExpression(t,e):this._getUnqiueValueInfoForFields(t)}_getUnqiueValueInfoForExpression(t,e){const{viewingMode:i,scale:n,spatialReference:r,arcade:s}=xs(e,{});let o=this._cache.compiledFunc;const a=s.arcadeUtils;if(!o){const u=a.createSyntaxTree(this.valueExpression);o=a.createFunction(u),this._cache.compiledFunc=o}const l=a.executeFunction(o,a.createExecContext(t,a.getViewInfo({viewingMode:i,scale:n,spatialReference:r})));return this._valueInfoMap[l+""]}_getUnqiueValueInfoForFields(t){const e=this.field,i=t.attributes;let n;if(typeof e!="function"&&this.field2){const r=this.field2,s=this.field3,o=[];e&&o.push(i[e]),r&&o.push(i[r]),s&&o.push(i[s]),n=o.join(this.fieldDelimiter||"")}else typeof e=="function"?n=e(t):e&&(n=i[e]);return this._valueInfoMap[n+""]}static fromPortalStyle(t,e){const i=new SS(e&&e.properties);i._set("styleOrigin",Object.freeze({styleName:t})),i._set("portal",e&&e.portal||zi.getDefault());const n=i.populateFromStyle();return n.catch(r=>{rp.error(`#fromPortalStyle('${t}'[, ...])`,"Failed to create unique value renderer from style name",r)}),n}static fromStyleUrl(t,e){const i=new SS(e&&e.properties);i._set("styleOrigin",Object.freeze({styleUrl:t}));const n=i.populateFromStyle();return n.catch(r=>{rp.error(`#fromStyleUrl('${t}'[, ...])`,"Failed to create unique value renderer from style URL",r)}),n}};c([d({readOnly:!0})],Ii.prototype,"_cache",null),c([Ce({uniqueValue:"unique-value"})],Ii.prototype,"type",void 0),c([d(mhe)],Ii.prototype,"backgroundFillSymbol",void 0),c([d({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Ii.prototype,"field",null),c([st("field")],Ii.prototype,"castField",null),c([fe("field")],Ii.prototype,"writeField",null),c([d({type:String,value:null,json:{write:!0}})],Ii.prototype,"field2",null),c([d({type:String,value:null,json:{write:!0}})],Ii.prototype,"field3",null),c([d({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],Ii.prototype,"orderByClassesEnabled",void 0),c([d({type:String,value:null,json:{write:!0}})],Ii.prototype,"valueExpression",null),c([d({type:String,json:{write:!0}})],Ii.prototype,"valueExpressionTitle",void 0),c([d({type:F_,json:{write:!0}})],Ii.prototype,"legendOptions",void 0),c([d({type:String,json:{write:!0}})],Ii.prototype,"defaultLabel",void 0),c([d(Sse({...a1},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Ii.prototype,"defaultSymbol",null),c([d({type:String,value:null,json:{write:!0}})],Ii.prototype,"fieldDelimiter",null),c([d({type:zi,readOnly:!0})],Ii.prototype,"portal",void 0),c([de("portal",["styleName"])],Ii.prototype,"readPortal",null),c([d({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Ii.prototype,"styleOrigin",void 0),c([de("styleOrigin",["styleName","styleUrl"])],Ii.prototype,"readStyleOrigin",null),c([fe("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Ii.prototype,"writeStyleOrigin",null),c([d({type:[Gj],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:(t,e,i)=>(e.uniqueValueGroups||Wje(e)).map(n=>Gj.fromJSON(n,i))},write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Ii.prototype,"uniqueValueGroups",null),c([d({type:[IE],json:{read:!1,write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Ii.prototype,"uniqueValueInfos",null),Ii=SS=c([O(Ohe)],Ii);const XI=Ii,IR={key:"type",base:Uh,typeMap:{heatmap:The,simple:yw,"unique-value":XI,"class-breaks":yhe,"dot-density":yje,dictionary:mje,"pie-chart":Rje},errorContext:"renderer"},Jje={key:"type",base:Uh,typeMap:{simple:yw,"unique-value":XI,"class-breaks":yhe,heatmap:The},errorContext:"renderer"};function Dbt(t,e){return GC(t,null,e)}const Yje=bm({types:IR});function GC(t,e,i){return t?t&&(t.styleName||t.styleUrl)&&t.type!=="uniqueValue"?(i&&i.messages&&i.messages.push(new bl("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+t.type+"'",{definition:t,context:i})),null):Yje(t,e,i):null}let Zje=class Phe{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(NN),this._values=new Map,this.multipleOriginsSupported=!0}clone(e){const i=new Phe,n=this._originStores[ht.DEFAULTS];n&&n.forEach((r,s)=>{i.set(s,G(r),ht.DEFAULTS)});for(let r=ht.SERVICE;r<NN;r++){const s=this._originStores[r];s&&s.forEach((o,a)=>{e&&e.has(a)||i.set(a,G(o),r)})}return i}get(e,i){const n=i===void 0?this._values:this._originStores[i];return n?n.get(e):void 0}keys(e){const i=e==null?this._values:this._originStores[e];return i?[...i.keys()]:[]}set(e,i,n=ht.USER){let r=this._originStores[n];if(r||(r=new Map,this._originStores[n]=r),r.set(e,i),!this._values.has(e)||this._propertyOriginMap.get(e)<=n){const s=this._values.get(e);return this._values.set(e,i),this._propertyOriginMap.set(e,n),s!==i}return!1}delete(e,i=ht.USER){const n=this._originStores[i];if(!n)return;const r=n.get(e);if(n.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===i){this._values.delete(e);for(let s=i-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(e)){this._values.set(e,o.get(e)),this._propertyOriginMap.set(e,s);break}}}return r}has(e,i){const n=i===void 0?this._values:this._originStores[i];return!!n&&n.has(e)}revert(e,i){for(;i>0&&!this.has(e,i);)--i;const n=this._originStores[i],r=n&&n.get(e),s=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,i),s!==r}originOf(e){return this._propertyOriginMap.get(e)||ht.DEFAULTS}forEach(e){this._values.forEach(e)}};const Rhe=t=>{let e=class extends t{constructor(...i){super(...i);const n=Cs(this),r=n.store,s=new Zje;n.store=s,yoe(n,r,s)}read(i,n){boe(this,i,n)}getAtOrigin(i,n){const r=DD(this),s=$f(n);if(typeof i=="string")return r.get(i,s);const o={};return i.forEach(a=>{o[a]=r.get(a,s)}),o}originOf(i){return mM(this.originIdOf(i))}originIdOf(i){return DD(this).originOf(i)}revert(i,n){const r=DD(this),s=$f(n),o=Cs(this);let a;a=typeof i=="string"?i==="*"?r.keys(s):[i]:i,a.forEach(l=>{o.invalidate(l),r.revert(l,s),o.commit(l)})}};return e=c([O("esri.core.ReadOnlyMultiOriginJSONSupport")],e),e};function DD(t){return Cs(t).store}let rZ=class extends Rhe(_e){};rZ=c([O("esri.core.ReadOnlyMultiOriginJSONSupport")],rZ);const Kje=t=>{let e=class extends t{constructor(...i){super(...i)}clear(i,n="user"){return FD(this).delete(i,$f(n))}write(i={},n){return xoe(this,i=i||{},n),i}setAtOrigin(i,n,r){Cs(this).setAtOrigin(i,n,$f(r))}removeOrigin(i){const n=FD(this),r=$f(i),s=n.keys(r);for(const o of s)n.originOf(o)===r&&n.set(o,n.get(o,r),ht.USER)}updateOrigin(i,n){const r=FD(this),s=$f(n),o=this.get(i);for(let a=s+1;a<NN;++a)r.delete(i,a);r.set(i,o,s)}toJSON(i){return this.write({},i)}};return e=c([O("esri.core.WriteableMultiOriginJSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function FD(t){return Cs(t).store}const TR=t=>{let e=class extends Kje(Rhe(t)){constructor(...i){super(...i)}};return e=c([O("esri.core.MultiOriginJSONSupport")],e),e};let sO=class extends TR(_e){};sO=c([O("esri.core.MultiOriginJSONSupport")],sO);async function Xje(t,e){const{WhereClause:i}=await q(()=>Promise.resolve().then(()=>jve),void 0);return i.create(t,e)}function Qje(t,e){return A(t)?A(e)?`(${t}) AND (${e})`:t:e}var Wj;let Vg=Wj=class extends Y{constructor(t){super(t),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new Wj({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([d({type:String,json:{write:!0}})],Vg.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],Vg.prototype,"name",void 0),c([d({type:["boolean","date","number","string"],json:{write:!0}})],Vg.prototype,"returnType",void 0),c([d({type:String,json:{write:!0}})],Vg.prototype,"title",void 0),Vg=Wj=c([O("esri.form.ExpressionInfo")],Vg);const Lhe=Vg;let Ug=class extends Y{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};c([d({type:String,json:{write:!0}})],Ug.prototype,"description",void 0),c([d({type:String,json:{write:!0}})],Ug.prototype,"label",void 0),c([d()],Ug.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Ug.prototype,"visibilityExpression",void 0),Ug=c([O("esri.form.elements.Element")],Ug);const vw=Ug;var Jj;let J$=Jj=class extends Y{constructor(t){super(t),this.type=null}clone(){return new Jj({type:this.type})}};c([d({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],J$.prototype,"type",void 0),J$=Jj=c([O("esri.form.elements.inputs.AttachmentInput")],J$);const eVe=J$;var Yj;let Bg=Yj=class extends vw{constructor(t){super(t),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new Yj({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};c([d({type:String,json:{write:!0}})],Bg.prototype,"attachmentKeyword",void 0),c([d({type:Boolean,json:{write:!0}})],Bg.prototype,"editable",void 0),c([d({type:eVe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Bg.prototype,"input",void 0),c([d({type:["attachment"],json:{read:!1,write:!0}})],Bg.prototype,"type",void 0),Bg=Yj=c([O("esri.form.elements.AttachmentElement")],Bg);const sZ=Bg;let Y$=class extends Y{constructor(e){super(e),this.type=null}};c([d()],Y$.prototype,"type",void 0),Y$=c([O("esri.form.elements.inputs.Input")],Y$);const c1=Y$;let ES=class extends c1{constructor(e){super(e),this.maxLength=null,this.minLength=0}};c([d({type:Number,json:{write:!0}})],ES.prototype,"maxLength",void 0),c([d({type:Number,json:{write:!0}})],ES.prototype,"minLength",void 0),ES=c([O("esri.form.elements.inputs.TextInput")],ES);const jB=ES;var Zj;let Z$=Zj=class extends jB{constructor(t){super(t),this.type="barcode-scanner"}clone(){return new Zj({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["barcode-scanner"],json:{read:!1,write:!0}})],Z$.prototype,"type",void 0),Z$=Zj=c([O("esri.form.elements.inputs.BarcodeScannerInput")],Z$);const tVe=Z$;var Kj;let ib=Kj=class extends c1{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="combo-box"}clone(){return new Kj({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};c([d({type:String,json:{write:!0}})],ib.prototype,"noValueOptionLabel",void 0),c([d({type:Boolean,json:{write:!0}})],ib.prototype,"showNoValueOption",void 0),c([d({type:["combo-box"],json:{read:!1,write:!0}})],ib.prototype,"type",void 0),ib=Kj=c([O("esri.form.elements.inputs.ComboBoxInput")],ib);const iVe=ib;var Xj;function oZ(t){return t!=null?new Date(t):null}function aZ(t){return t?t.getTime():null}let Xl=Xj=class extends c1{constructor(t){super(t),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(t,e){return oZ(e.max)}writeMax(t,e){e.max=aZ(t)}readMin(t,e){return oZ(e.min)}writeMin(t,e){e.min=aZ(t)}clone(){return new Xj({includeTime:this.includeTime,max:this.max,min:this.min})}};c([d({type:Boolean,json:{write:!0}})],Xl.prototype,"includeTime",void 0),c([d({type:Date,json:{type:Number,write:!0}})],Xl.prototype,"max",void 0),c([de("max")],Xl.prototype,"readMax",null),c([fe("max")],Xl.prototype,"writeMax",null),c([d({type:Date,json:{type:Number,write:!0}})],Xl.prototype,"min",void 0),c([de("min")],Xl.prototype,"readMin",null),c([fe("min")],Xl.prototype,"writeMin",null),c([d({type:["datetime-picker"],json:{read:!1,write:!0}})],Xl.prototype,"type",void 0),Xl=Xj=c([O("esri.form.elements.inputs.DateTimePickerInput")],Xl);const nVe=Xl;var Qj;let nb=Qj=class extends c1{constructor(t){super(t),this.noValueOptionLabel=null,this.showNoValueOption=!0,this.type="radio-buttons"}clone(){return new Qj({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};c([d({type:String,json:{write:!0}})],nb.prototype,"noValueOptionLabel",void 0),c([d({type:Boolean,json:{write:!0}})],nb.prototype,"showNoValueOption",void 0),c([d({type:["radio-buttons"],json:{read:!1,write:!0}})],nb.prototype,"type",void 0),nb=Qj=c([O("esri.form.elements.inputs.RadioButtonsInput")],nb);const rVe=nb;var eV;let rb=eV=class extends c1{constructor(t){super(t),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new eV({offValue:this.offValue,onValue:this.onValue})}};c([d({type:[String,Number],json:{write:!0}})],rb.prototype,"offValue",void 0),c([d({type:[String,Number],json:{write:!0}})],rb.prototype,"onValue",void 0),c([d({type:["switch"],json:{read:!1,write:!0}})],rb.prototype,"type",void 0),rb=eV=c([O("esri.form.elements.inputs.SwitchInput")],rb);const sVe=rb;var tV;let K$=tV=class extends jB{constructor(t){super(t),this.type="text-area"}clone(){return new tV({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["text-area"],json:{read:!1,write:!0}})],K$.prototype,"type",void 0),K$=tV=c([O("esri.form.elements.inputs.TextAreaInput")],K$);const oVe=K$;var iV;let X$=iV=class extends jB{constructor(t){super(t),this.type="text-box"}clone(){return new iV({maxLength:this.maxLength,minLength:this.minLength})}};c([d({type:["text-box"],json:{read:!1,write:!0}})],X$.prototype,"type",void 0),X$=iV=c([O("esri.form.elements.inputs.TextBoxInput")],X$);const aVe=X$,Dhe={base:c1,key:"type",typeMap:{"barcode-scanner":tVe,"combo-box":iVe,"datetime-picker":nVe,"radio-buttons":rVe,switch:sVe,"text-area":oVe,"text-box":aVe}};var nV;const Fhe="esri.form.elements.FieldElement",lZ=se.getLogger(Fhe);let Ja=nV=class extends vw{constructor(t){super(t),this.domain=null,this.editableExpression=null,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field",this.valueExpression=null}get editable(){return Ay(lZ,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._get("editable")??!0}set editable(t){Ay(lZ,"editable",{replacement:"editableExpression",version:"4.26",warnOnce:!0}),this._set("editable",t)}clone(){return new nV({description:this.description,domain:this.domain,editable:this.editable,editableExpression:this.editableExpression,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,valueExpression:this.valueExpression,visibilityExpression:this.visibilityExpression})}};c([d({types:_B,json:{read:{reader:yR},write:!0}})],Ja.prototype,"domain",void 0),c([d({type:Boolean,json:{write:!0}})],Ja.prototype,"editable",null),c([d({type:String,json:{write:!0}})],Ja.prototype,"editableExpression",void 0),c([d({type:String,json:{write:!0}})],Ja.prototype,"fieldName",void 0),c([d({type:String,json:{write:!0}})],Ja.prototype,"hint",void 0),c([d({types:Dhe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],Ja.prototype,"input",void 0),c([d({type:String,json:{write:!0}})],Ja.prototype,"requiredExpression",void 0),c([d({type:String,json:{read:!1,write:!0}})],Ja.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],Ja.prototype,"valueExpression",void 0),Ja=nV=c([O(Fhe)],Ja);const cZ=Ja;var rV;let $d=rV=class extends vw{constructor(t){super(t),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new rV({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:G(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};c([d({type:Number,json:{write:!0}})],$d.prototype,"displayCount",void 0),c([d({type:["list"],json:{write:!0}})],$d.prototype,"displayType",void 0),c([d({type:Boolean,json:{write:!0}})],$d.prototype,"editable",void 0),c([d({type:[a9],json:{write:!0}})],$d.prototype,"orderByFields",void 0),c([d({type:Number,json:{write:!0}})],$d.prototype,"relationshipId",void 0),c([d({type:["relationship"],json:{read:!1,write:!0}})],$d.prototype,"type",void 0),$d=rV=c([O("esri.form.elements.RelationshipElement")],$d);const uZ=$d;function Nhe(t){return{typesWithGroup:{base:vw,key:"type",typeMap:{attachment:sZ,field:cZ,group:t,relationship:uZ}},typesWithoutGroup:{base:vw,key:"type",typeMap:{attachment:sZ,field:cZ,relationship:uZ}}}}function zhe(t,e,i=!0){if(!t)return null;const n=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(r=>n[r.type]).map(r=>n[r.type].fromJSON(r))}function jhe(t,e,i=!0){if(!t)return null;const n=i?e.typesWithGroup.typeMap:e.typesWithoutGroup.typeMap;return t.filter(r=>n[r.type]).map(r=>r.toJSON())}function Vhe(t,e,i=!0){return t?t.map(n=>Nu(i?e.typesWithGroup:e.typesWithoutGroup,n)):null}var sV;let Su=sV=class extends vw{constructor(t){super(t),this.elements=null,this.initialState="expanded",this.type="group"}castElements(t){return Vhe(t,ND,!1)}readElements(t,e){return zhe(e.formElements,ND,!1)}writeElements(t,e){e.formElements=jhe(t,ND,!1)}clone(){return new sV({description:this.description,elements:G(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};c([d({json:{write:!0}})],Su.prototype,"elements",void 0),c([st("elements")],Su.prototype,"castElements",null),c([de("elements",["formElements"])],Su.prototype,"readElements",null),c([fe("elements")],Su.prototype,"writeElements",null),c([d({type:["collapsed","expanded"],json:{write:!0}})],Su.prototype,"initialState",void 0),c([d({type:String,json:{read:!1,write:!0}})],Su.prototype,"type",void 0),Su=sV=c([O("esri.form.elements.GroupElement")],Su);const ND=Nhe(Su),lVe=Su;var oV;const zD=Nhe(lVe);let Ql=oV=class extends Y{constructor(t){super(t),this.description=null,this.elements=null,this.expressionInfos=null,this.preserveFieldValuesWhenHidden=!1,this.title=null}castElements(t){return Vhe(t,zD)}readElements(t,e){return zhe(e.formElements,zD)}writeElements(t,e){e.formElements=jhe(t,zD)}clone(){return new oV({description:this.description,expressionInfos:G(this.expressionInfos),elements:G(this.elements),title:this.title,preserveFieldValuesWhenHidden:this.preserveFieldValuesWhenHidden})}};c([d({type:String,json:{write:!0}})],Ql.prototype,"description",void 0),c([d({json:{write:!0}})],Ql.prototype,"elements",void 0),c([st("elements")],Ql.prototype,"castElements",null),c([de("elements",["formElements"])],Ql.prototype,"readElements",null),c([fe("elements")],Ql.prototype,"writeElements",null),c([d({type:[Lhe],json:{write:!0}})],Ql.prototype,"expressionInfos",void 0),c([d({type:Boolean,json:{default:!1,write:!0}})],Ql.prototype,"preserveFieldValuesWhenHidden",void 0),c([d({type:String,json:{write:!0}})],Ql.prototype,"title",void 0),Ql=oV=c([O("esri.form.FormTemplate")],Ql);const cVe=Ql;async function uVe(t){const e="portalItem"in t?t:{portalItem:t},i=await q(()=>import("./portalLayers-5d2ca38f.js"),["assets/portalLayers-5d2ca38f.js","assets/lazyLayerLoader-cee9c15c.js","assets/layersLoader-1fb962fe.js","assets/fetchService-52b55be4.js","assets/jsonContext-c42fadc4.js"]);try{return await i.fromItem(e)}catch(n){const r=e&&e.portalItem,s=r&&r.id||"unset",o=r&&r.portal&&r.portal.url||lt.portalUrl;throw se.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",n),n}}let dVe=0,Zn=class extends $r.EventedMixin(F0(_l)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new Dt(-180,-90,180,90,Ge.WGS84),this.id=Date.now().toString(16)+"-layer-"+dVe++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Ge.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const i=typeof e=="string"?{url:e}:e;return(await q(()=>import("./arcgisLayers-ebcfd73d.js"),["assets/arcgisLayers-ebcfd73d.js","assets/fetchService-52b55be4.js","assets/lazyLayerLoader-cee9c15c.js"])).fromUrl(i)}static fromPortalItem(e){return uVe(e)}initialize(){this.when().catch(e=>{Pa(e)||se.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,i=this.parent;"layers"in i&&i.layers.includes(e)?i.layers.remove(e):"tables"in i&&i.tables.includes(e)?i.tables.remove(e):"baseLayers"in i&&i.baseLayers.includes(e)?i.baseLayers.remove(e):"baseLayers"in i&&i.referenceLayers.includes(e)&&i.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return _i(this.url)}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await rt(e,{query:{f:"json"},responseType:"json"})).data;throw new N("layer:no-attribution-data","Layer does not have attribution data")}};c([d({type:String})],Zn.prototype,"attributionDataUrl",void 0),c([d({type:Dt})],Zn.prototype,"fullExtent",void 0),c([d({readOnly:!0})],Zn.prototype,"hasAttributionData",null),c([d({type:String,clonable:!1})],Zn.prototype,"id",void 0),c([d({type:Boolean,nonNullable:!0})],Zn.prototype,"legendEnabled",void 0),c([d({type:["show","hide","hide-children"]})],Zn.prototype,"listMode",void 0),c([d({type:Number,range:{min:0,max:1},nonNullable:!0})],Zn.prototype,"opacity",void 0),c([d({clonable:!1})],Zn.prototype,"parent",void 0),c([d({readOnly:!0})],Zn.prototype,"parsedUrl",null),c([d({type:Boolean})],Zn.prototype,"popupEnabled",void 0),c([d({type:Boolean})],Zn.prototype,"attributionVisible",void 0),c([d({type:Ge})],Zn.prototype,"spatialReference",void 0),c([d({type:String})],Zn.prototype,"title",void 0),c([d({readOnly:!0,json:{read:!1}})],Zn.prototype,"type",void 0),c([d()],Zn.prototype,"url",void 0),c([d({type:Boolean,nonNullable:!0})],Zn.prototype,"visible",void 0),Zn=c([O("esri.layers.Layer")],Zn);const qC=Zn;function dZ(t,e,i){if(t.hasM==null||t.hasZ)for(const n of e)for(const r of n)r.length>2&&(r[2]*=i)}function hVe(t,e,i){if(!t&&!e||!i)return;const n=nw(i);hZ(t,i,n),hZ(e,i,n)}function hZ(t,e,i){if(t)for(const n of t)pVe(n.geometry,e,i)}function pVe(t,e,i){if(U(t)||!t.spatialReference||ui(t.spatialReference,e))return;const n=nw(t.spatialReference)/i;if(n!==1){if("x"in t)t.z!=null&&(t.z*=n);else if("rings"in t)dZ(t,t.rings,n);else if("paths"in t)dZ(t,t.paths,n);else if("points"in t&&(t.hasM==null||t.hasZ))for(const r of t.points)r.length>2&&(r[2]*=n)}}let fVe=0;const Uhe="esri.layers.graphics.sources.MemorySource",jD=se.getLogger(Uhe);let Gd=class extends _l.LoadableMixin(zI(La(we))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const i=A(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(i)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get _workerGeometryType(){var i;const e=(i=this.layer)==null?void 0:i.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,i={}){await this.load(i);const n=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);uj(e,this.layer.spatialReference,n);const r=ZI.fromJSON(n);if(!this._requiresClientGraphicMapping())return r;const s=this.layer.objectIdField;for(const o of r.features){const a=o.attributes[s],l=this._idToClientGraphic.get(a);l&&(o.geometry=l.geometry)}return r.geometryType=this.layer.geometryType,r}async queryFeaturesJSON(e,i={}){if(this._requiresClientGraphicMapping())throw new N("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(i);const n=await this._connection.invoke("queryFeatures",e?e.toJSON():null,i);return uj(e,this.layer.spatialReference,n),n}queryFeatureCount(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,i))}queryObjectIds(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,i))}queryExtent(e,i={}){return this.load(i).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,i)).then(n=>({count:n.count,extent:Dt.fromJSON(n.extent)}))}querySnapping(e,i={}){return this.load(i).then(()=>this._connection.invoke("querySnapping",e,i))}async _applyEdits(e){if(!this._connection)throw new N("feature-layer-source:edit-failure","Memory source not loaded");const i=this.layer.objectIdField;let n=null;const r=[],s=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const o=h=>"objectId"in h&&h.objectId!=null?h.objectId:"attributes"in h&&h.attributes[i]!=null?h.attributes[i]:null;if(e.addFeatures&&(n=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const h of e.deleteFeatures){const p=o(h);p!=null&&r.push(p)}const a=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const h of e.updateFeatures)if(s.push(this._serializeFeature(h)),a){const p=o(h);p!=null&&a.set(p,h)}}hVe(n?n.features:null,s,this.layer.spatialReference);const{fullExtent:l,featureEditResults:u}=await this._connection.invoke("applyEdits",{adds:n?n.features:[],updates:s,deletes:r});return this.fullExtent=l,n&&n.finish(u.uidToObjectId),this._updateClientGraphicIds(a,u),this._createEditsResult(u)}async _prepareClientMapping(e,i){if(this._layerOrSourceGeometryType!=="mesh"||U(e))return;const n=[];for(const{geometry:r}of e)!A(r)||r.type!=="mesh"||r.hasExtent||r.loaded||n.push(r.load({signal:i}));n.length&&await Promise.all(n)}_updateClientGraphicIds(e,i){if(this._idToClientGraphic){if(e)for(const n of i.updateResults){if(!n.success)continue;const r=e.get(n.objectId);r!=null&&this._addIdToClientGraphic(r)}for(const n of i.deleteResults)n.success&&this._idToClientGraphic.delete(n.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const i=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:i?new N("feature-layer-source:edit-failure",i.description,{code:i.code}):null}}_prepareAddFeatures(e){const i=new Map,n=new Array(e.length);let r=null;for(let o=0;o<e.length;o++){const a=e[o],l=this._serializeFeature(a);!r&&A(a.geometry)&&(r=a.geometry.type),n[o]=l,i.set(`${l.uid}`,a)}const s=this;return{features:n,inferredGeometryType:r,finish(o){const a=s.sourceJSON.objectIdField;for(const l in o){const u=o[l],h=i.get(l);h&&(h.attributes||(h.attributes={}),u===-1?delete h.attributes[a]:h.attributes[a]=u,s._addIdToClientGraphic(h))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const i=this.sourceJSON.objectIdField,n=e.attributes&&e.attributes[i];n!=null&&this._idToClientGraphic.set(n,e)}get _layerOrSourceGeometryType(){var e,i;return((e=this.layer)==null?void 0:e.geometryType)??((i=this.sourceJSON)==null?void 0:i.geometryType)}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:i}=e,n=this._geometryForSerialization(e),r=(fVe++).toString();return n?{uid:r,geometry:n.toJSON(),attributes:i}:{uid:r,attributes:i}}_geometryForSerialization(e){const{geometry:i}=e;return U(i)?null:this._geometryRequiresClientGraphicMapping(i)?i.extent?Ws.fromExtent(i.extent):null:i}async _startWorker(e){this._connection=await tRe("MemorySourceWorker",{strategy:ee("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:i,spatialReference:n,objectIdField:r,hasM:s,hasZ:o,timeInfo:a}=this.layer,l=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const u=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",g=>{jD.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),g.preventDefault()}));const h={features:u.features,fields:i&&i.map(g=>g.toJSON()),geometryType:CW.toJSON(this._workerGeometryType),hasM:this._layerOrSourceGeometryType!=="mesh"&&s,hasZ:this._layerOrSourceGeometryType==="mesh"||o,objectIdField:r,spatialReference:l?null:n&&n.toJSON(),timeInfo:a?a.toJSON():null},p=await this._connection.invoke("load",h,{signal:e});for(const g of p.warnings)jD.warn(g.message,{layer:this.layer,warning:g});p.featureErrors.length&&jD.warn(`Encountered ${p.featureErrors.length} validation errors while loading features`,p.featureErrors);const f=p.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(u.inferredGeometryType)&&(f.geometryType=CW.toJSON(u.inferredGeometryType)),this.sourceJSON=f,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),u.finish(p.assignedObjectIds)}};c([Z8({Type:en,ensureType:Ht(en)})],Gd.prototype,"itemType",void 0),c([d()],Gd.prototype,"type",void 0),c([d({constructOnly:!0})],Gd.prototype,"layer",void 0),c([d({readOnly:!0})],Gd.prototype,"_workerGeometryType",null),c([d()],Gd.prototype,"sourceJSON",void 0),Gd=c([O(Uhe)],Gd);function mVe(t){return"portalItem"in t}const gVe=t=>{let e=class extends t{get apiKey(){var i;return this._isOverridden("apiKey")?this._get("apiKey"):mVe(this)?(i=this.portalItem)==null?void 0:i.apiKey:null}set apiKey(i){i!=null?this._override("apiKey",i):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return c([d({type:String})],e.prototype,"apiKey",null),e=c([O("esri.layers.mixins.APIKeyMixin")],e),e},Bhe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},Hhe=Object.values(Bhe),Ghe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Hhe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),yVe=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${Hhe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),vVe=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function Hbt(t){return!!Ghe.test(t)}function dm(t){if(U(t))return null;const e=_i(t),i=e.path.match(Ghe)||e.path.match(yVe);if(!i)return null;const[,n,r,s,o]=i,a=r.indexOf("/");return{title:VB(a!==-1?r.slice(a+1):r),serverType:Bhe[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:n}}}function bVe(t){const e=_i(t).path.match(vVe);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function VB(t){return(t=t.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+t.slice(1)}function _Ve(t,e){const i=[];if(t){const n=dm(t);A(n)&&n.title&&i.push(n.title)}if(e){const n=VB(e);i.push(n)}if(i.length===2){if(i[0].toLowerCase().includes(i[1].toLowerCase()))return i[0];if(i[1].toLowerCase().includes(i[0].toLowerCase()))return i[1]}return i.join(" - ")}function qhe(t){if(!t)return!1;const e=".arcgis.com/",i="//services",n="//tiles",r="//features",s=(t=t.toLowerCase()).includes(e),o=t.includes(i)||t.includes(n)||t.includes(r);return s&&o}function wVe(t,e){return t&&Cle(Ile(t,e))}function xVe(t){let{url:e}=t;if(!e)return{url:e};e=Ile(e,t.logger);const i=_i(e),n=dm(i.path);let r;if(A(n))n.sublayer!=null&&t.layer.layerId==null&&(r=n.sublayer),e=n.url.path;else if(t.nonStandardUrlAllowed){const s=bVe(i.path);A(s)&&(e=s.serviceUrl,r=s.sublayerId)}return{url:Cle(e),layerId:r}}function SVe(t,e,i,n,r){x0(e,n,"url",r),n.url&&t.layerId!=null&&(n.url=w0(n.url,i,t.layerId.toString()))}function Gbt(t){if(!t)return!1;const e=t.toLowerCase(),i=e.includes("/services/"),n=e.includes("/mapserver/wmsserver"),r=e.includes("/imageserver/wmsserver"),s=e.includes("/wmsserver");return i&&(n||r||s)}function EVe(t){var i;if(!t)return!1;const e=(i=new Hs(_s(t)).authority)==null?void 0:i.toLowerCase();return e==="server.arcgisonline.com"||e==="services.arcgisonline.com"}const CVe=t=>{let e=class extends t{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const i=dm(this.url);if(A(i)&&i.title)return i.title}return this._get("title")||""}set title(i){this._set("title",i)}set url(i){this._set("url",wVe(i,se.getLogger(this.declaredClass)))}};return c([d()],e.prototype,"title",null),c([d({type:String})],e.prototype,"url",null),e=c([O("esri.layers.mixins.ArcGISService")],e),e},pZ={read:{reader:mB},write:{allowNull:!0,writer:gB}},Whe=t=>{let e=class extends t{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return c([d({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0},"portal-item":{read:!0,write:!0}}}})],e.prototype,"blendMode",void 0),c([d({json:{read:!1,write:!1,origins:{"web-map":pZ,"portal-item":pZ}}})],e.prototype,"effect",void 0),e=c([O("esri.layers.mixins.BlendLayer")],e),e},IVe=t=>{let e=class extends t{constructor(){super(...arguments),this.customParameters=null}};return c([d({type:Object,json:{write:{overridePolicy:i=>({enabled:!!(i&&Object.keys(i).length>0)})}}})],e.prototype,"customParameters",void 0),e=c([O("esri.layers.mixins.CustomParametersMixin")],e),e},UB=new $r.EventEmitter,Jhe="esri.layers.mixins.EditBusLayer",Yhe=Symbol(Jhe);function qbt(t){return t!=null&&typeof t=="object"&&Yhe in t}const TVe=t=>{var e;let i=class extends t{constructor(...n){super(...n),this[e]=!0,this.when().then(()=>{this.own([UB.on("edits",r=>{var h,p,f;const s="layer"in r?r.layer:null,o="layer"in r?(h=r.layer)==null?void 0:h.url:r.serviceUrl,a="layer"in r?(p=r.layer)==null?void 0:p.layerId:r.layerId,l=r.event;if(s===this||o!==this.url)return;if(a!=null&&this.layerId!=null&&a===this.layerId)return void this.emit("edits",G(l));const u=(f=l.editedFeatures)==null?void 0:f.find(({layerId:g})=>g===this.layerId);if(u){const{adds:g,updates:v,deletes:b}=u.editedFeatures,_={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:g?g.map(({attributes:w})=>({objectId:this.objectIdField&&w[this.objectIdField],globalId:this.globalIdField&&w[this.globalIdField]})):[],deletedFeatures:b?b.map(({attributes:w})=>({objectId:this.objectIdField&&w[this.objectIdField],globalId:this.globalIdField&&w[this.globalIdField]})):[],updatedFeatures:v?v.map(({current:{attributes:w}})=>({objectId:this.objectIdField&&w[this.objectIdField],globalId:this.globalIdField&&w[this.globalIdField]})):[],editedFeatures:G(l.editedFeatures),exceededTransferLimit:!1};this.emit("edits",_)}})])},()=>{})}};return e=Yhe,i=c([O(Jhe)],i),i};var aV;const VD=new Fe({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),UD=new Fe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let au=aV=class extends Y{constructor(t){super(t),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(t={}){const{where:e,geometry:i,spatialRelationship:n,timeExtent:r,objectIds:s,units:o,distance:a}=this;return new pl({geometry:G(i),objectIds:G(s),spatialRelationship:n,timeExtent:G(r),where:e,units:o,distance:a,...t})}clone(){const{where:t,geometry:e,spatialRelationship:i,timeExtent:n,objectIds:r,units:s,distance:o}=this;return new aV({geometry:G(e),objectIds:G(r),spatialRelationship:i,timeExtent:G(n),where:t,units:s,distance:o})}};c([d({type:String,json:{write:!0}})],au.prototype,"where",void 0),c([d({types:xm,json:{write:!0}})],au.prototype,"geometry",void 0),c([d({type:VD.apiValues,json:{name:"spatialRel",read:{reader:VD.read},write:{allowNull:!1,writer:VD.write,overridePolicy(){return{enabled:A(this.geometry)}}}}})],au.prototype,"spatialRelationship",void 0),c([d({type:Number,json:{write:{overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],au.prototype,"distance",void 0),c([d({type:[Number],json:{write:!0}})],au.prototype,"objectIds",void 0),c([d({type:UD.apiValues,json:{read:UD.read,write:{writer:UD.write,overridePolicy(t){return{enabled:t!=null&&this.geometry!=null}}}}})],au.prototype,"units",void 0),c([d({type:Zs,json:{write:!0}})],au.prototype,"timeExtent",void 0),au=aV=c([O("esri.layers.support.FeatureFilter")],au);const kVe=au;var lV;const fZ={read:{reader:mB},write:{writer:gB,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}},mZ={read:{reader:mB},write:{writer:gB,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}},gZ={name:"showExcludedLabels",default:!0};let Hg=lV=class extends Y{constructor(t){super(t),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(t,e){var n,r;const i=super.write(t,e);if(e!=null&&e.origin){if(i.filter){const s=Object.keys(i.filter);if(s.length>1||s[0]!=="where")return(n=e.messages)==null||n.push(new N("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:e.layer,effect:this})),null}if("showExcludedLabels"in i)return(r=e.messages)==null||r.push(new N("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:e.layer,effect:this})),null}return i}clone(){return new lV({filter:A(this.filter)?this.filter.clone():null,includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};c([d({type:kVe,json:{write:{allowNull:!0,writer(t,e,i,n){const r=t==null?void 0:t.write({},n);r&&Object.keys(r).length!==0?rr(i,r,e):rr(i,null,e)}}}})],Hg.prototype,"filter",void 0),c([d({json:{write:!0,origins:{"web-map":fZ,"portal-item":fZ}}})],Hg.prototype,"includedEffect",void 0),c([d({json:{write:!0,origins:{"web-map":mZ,"portal-item":mZ}}})],Hg.prototype,"excludedEffect",void 0),c([d({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":gZ,"portal-item":gZ}}})],Hg.prototype,"excludedLabelsVisible",void 0),Hg=lV=c([O("esri.layers.support.FeatureEffect")],Hg);const $Ve=Hg,yZ={write:{allowNull:!0}},AVe=t=>{let e=class extends t{constructor(){super(...arguments),this.featureEffect=null}};return c([d({type:$Ve,json:{origins:{"web-map":yZ,"portal-item":yZ}}})],e.prototype,"featureEffect",void 0),e=c([O("esri.layers.mixins.FeatureEffectLayer")],e),e};var CS;const oO=kr()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),Zhe=oO.jsonValues.slice();TIe(Zhe,"orthometric");const TE=kr()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let ec=CS=class extends Y{constructor(t){super(t),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(t,e,i){return oO.write(t,e,i)}readHeightModel(t,e,i){return oO.read(t)||(i&&i.messages&&i.messages.push(MVe(t,{context:i})),null)}readHeightUnit(t,e,i){return TE.read(t)||(i&&i.messages&&i.messages.push(vZ(t,{context:i})),null)}readHeightUnitService(t,e,i){return Loe(t)||TE.read(t)||(i&&i.messages&&i.messages.push(vZ(t,{context:i})),null)}readVertCRS(t,e){return e.vertCRS||e.ellipsoid||e.geoid}clone(){return new CS({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(t){return!!t&&(this===t||this.heightModel===t.heightModel&&this.heightUnit===t.heightUnit&&this.vertCRS===t.vertCRS)}static deriveUnitFromSR(t,e){const i=Doe(e);return new CS({heightModel:t.heightModel,heightUnit:i,vertCRS:t.vertCRS})}write(t,e){return e={origin:"web-scene",...e},super.write(t,e)}static fromJSON(t){if(!t)return null;const e=new CS;return e.read(t,{origin:"web-scene"}),e}};function vZ(t,e){return new bl("height-unit:unsupported",`Height unit of value '${t}' is not supported`,e)}function MVe(t,e){return new bl("height-model:unsupported",`Height model of value '${t}' is not supported`,e)}c([d({type:oO.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:Zhe,default:"ellipsoidal"}}}})],ec.prototype,"heightModel",void 0),c([fe("web-scene","heightModel")],ec.prototype,"writeHeightModel",null),c([de(["web-scene","service"],"heightModel")],ec.prototype,"readHeightModel",null),c([d({type:TE.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:TE.jsonValues,write:TE.write}}}})],ec.prototype,"heightUnit",void 0),c([de("web-scene","heightUnit")],ec.prototype,"readHeightUnit",null),c([de("service","heightUnit")],ec.prototype,"readHeightUnitService",null),c([d({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],ec.prototype,"vertCRS",void 0),c([de("service","vertCRS",["vertCRS","ellipsoid","geoid"])],ec.prototype,"readVertCRS",null),ec=CS=c([O("esri.geometry.HeightModelInfo")],ec);const QI=ec;function OVe(t){if(!t)return t;const{start:e,end:i}=t;return new Zs({start:A(e)?i0(e,-e.getTimezoneOffset(),"minutes"):e,end:A(i)?i0(i,-i.getTimezoneOffset(),"minutes"):i})}function PVe(t){if(!t)return t;const{start:e,end:i}=t;return new Zs({start:A(e)?i0(e,e.getTimezoneOffset(),"minutes"):e,end:A(i)?i0(i,i.getTimezoneOffset(),"minutes"):i})}var cV;let IS=cV=class extends Y{constructor(t){super(t)}async collectRequiredFields(t,e){return Js(t,e,this.expression)}clone(){return new cV({expression:this.expression,title:this.title})}equals(t){return this.expression===t.expression&&this.title===t.title}};c([d({type:String,json:{write:!0}})],IS.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],IS.prototype,"title",void 0),IS=cV=c([O("esri.layers.support.FeatureExpressionInfo")],IS);const bZ=IS;function Wbt(t){return!!t&&wR[t]!=null}function RVe(t){return 1/(wR[t]||1)}function LVe(){const t=Object.keys(wR);return t.sort(),t}const DVe=LVe();var uV;const MT=kr()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),_Z=new Fe({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Ad=uV=class extends Y{constructor(t){super(t),this.offset=null}readFeatureExpressionInfo(t,e){return t??(e.featureExpression&&e.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(t,e,i,n){e[i]=t.write({},n),t.expression==="0"&&(e.featureExpression={value:0})}get mode(){const{offset:t,featureExpressionInfo:e}=this;return this._isOverridden("mode")?this._get("mode"):A(t)||e?"relative-to-ground":"on-the-ground"}set mode(t){this._override("mode",t)}set unit(t){this._set("unit",t)}write(t,e){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(t,e):null}clone(){return new uV({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}equals(t){return this.mode===t.mode&&this.offset===t.offset&&this.unit===t.unit&&SIe(this.featureExpressionInfo,t.featureExpressionInfo)}};c([d({type:bZ,json:{write:!0}})],Ad.prototype,"featureExpressionInfo",void 0),c([de("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Ad.prototype,"readFeatureExpressionInfo",null),c([fe("featureExpressionInfo",{featureExpressionInfo:{type:bZ},"featureExpression.value":{type:[0]}})],Ad.prototype,"writeFeatureExpressionInfo",null),c([d({type:MT.apiValues,nonNullable:!0,json:{type:MT.jsonValues,read:MT.read,write:{writer:MT.write,isRequired:!0}}})],Ad.prototype,"mode",null),c([d({type:Number,json:{write:!0}})],Ad.prototype,"offset",void 0),c([d({type:DVe,json:{type:String,read:_Z.read,write:_Z.write}})],Ad.prototype,"unit",null),Ad=uV=c([O("esri.layers.support.ElevationInfo")],Ad);const Khe=Ad,FVe={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},BB={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(t,e)=>!e.disablePopup},write:{enabled:!0,writer(t,e,i){e[i]=!t}}}},HB={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},NVe={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:x0}}},zVe={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},jVe={value:null,type:Khe,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function Jbt(t){return{type:t,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const Xhe={write:!0,read:!0},dV={type:Number,json:{origins:{"web-document":Xhe,"portal-item":{write:!0}}}},VVe={...dV,json:{...dV.json,origins:{"web-document":{...Xhe,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(t,e,i)=>i&&i.origin!=="service"||!e.drawingInfo||e.drawingInfo.transparency===void 0?e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.transparency!==void 0?$C(e.layerDefinition.drawingInfo.transparency):void 0:$C(e.drawingInfo.transparency)}}},Ybt={type:Zs,readOnly:!0,get(){var a,l;if(!((a=this.layer)!=null&&a.timeInfo))return null;const{datesInUnknownTimezone:t,timeOffset:e,useViewTime:i}=this.layer,n=(l=this.view)==null?void 0:l.timeExtent;let r=this.layer.timeExtent;t&&(r=PVe(r));let s=i?n&&r?n.intersection(r):n||r:r;if(!s||s.isEmpty||s.isAllTime)return s;e&&(s=s.offset(-e.value,e.unit)),t&&(s=OVe(s));const o=this._get("timeExtent");return s.equals(o)?o:s}},Zbt={type:Dt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(t,e)=>{const i=Dt.fromJSON(t);return e.spatialReference!=null&&typeof e.spatialReference=="object"&&(i.spatialReference=Ge.fromJSON(e.spatialReference)),i}}}},read:!1}},UVe={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},BVe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},HVe={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},Qhe={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}},wZ=new Map([["AUS Central Standard Time","Australia/Darwin"],["AUS Eastern Standard Time","Australia/Sydney"],["Afghanistan Standard Time","Asia/Kabul"],["Alaskan Standard Time","America/Anchorage"],["Aleutian Standard Time","America/Adak"],["Altai Standard Time","Asia/Barnaul"],["Arab Standard Time","Asia/Riyadh"],["Arabian Standard Time","Asia/Dubai"],["Arabic Standard Time","Asia/Baghdad"],["Argentina Standard Time","America/Buenos_Aires"],["Astrakhan Standard Time","Europe/Astrakhan"],["Atlantic Standard Time","America/Halifax"],["Aus Central W. Standard Time","Australia/Eucla"],["Azerbaijan Standard Time","Asia/Baku"],["Azores Standard Time","Atlantic/Azores"],["Bahia Standard Time","America/Bahia"],["Bangladesh Standard Time","Asia/Dhaka"],["Belarus Standard Time","Europe/Minsk"],["Bougainville Standard Time","Pacific/Bougainville"],["Canada Central Standard Time","America/Regina"],["Cape Verde Standard Time","Atlantic/Cape_Verde"],["Caucasus Standard Time","Asia/Yerevan"],["Cen. Australia Standard Time","Australia/Adelaide"],["Central America Standard Time","America/Guatemala"],["Central Asia Standard Time","Asia/Almaty"],["Central Brazilian Standard Time","America/Cuiaba"],["Central Europe Standard Time","Europe/Budapest"],["Central European Standard Time","Europe/Warsaw"],["Central Pacific Standard Time","Pacific/Guadalcanal"],["Central Standard Time","America/Chicago"],["Central Standard Time (Mexico)","America/Mexico_City"],["Chatham Islands Standard Time","Pacific/Chatham"],["China Standard Time","Asia/Shanghai"],["Cuba Standard Time","America/Havana"],["Dateline Standard Time","Etc/GMT+12"],["E. Africa Standard Time","Africa/Nairobi"],["E. Australia Standard Time","Australia/Brisbane"],["E. Europe Standard Time","Europe/Chisinau"],["E. South America Standard Time","America/Sao_Paulo"],["Easter Island Standard Time","Pacific/Easter"],["Eastern Standard Time","America/New_York"],["Eastern Standard Time (Mexico)","America/Cancun"],["Egypt Standard Time","Africa/Cairo"],["Ekaterinburg Standard Time","Asia/Yekaterinburg"],["FLE Standard Time","Europe/Kiev"],["Fiji Standard Time","Pacific/Fiji"],["GMT Standard Time","Europe/London"],["GTB Standard Time","Europe/Bucharest"],["Georgian Standard Time","Asia/Tbilisi"],["Greenland Standard Time","America/Godthab"],["Greenwich Standard Time","Atlantic/Reykjavik"],["Haiti Standard Time","America/Port-au-Prince"],["Hawaiian Standard Time","Pacific/Honolulu"],["India Standard Time","Asia/Calcutta"],["Iran Standard Time","Asia/Tehran"],["Israel Standard Time","Asia/Jerusalem"],["Jordan Standard Time","Asia/Amman"],["Kaliningrad Standard Time","Europe/Kaliningrad"],["Korea Standard Time","Asia/Seoul"],["Libya Standard Time","Africa/Tripoli"],["Line Islands Standard Time","Pacific/Kiritimati"],["Lord Howe Standard Time","Australia/Lord_Howe"],["Magadan Standard Time","Asia/Magadan"],["Magallanes Standard Time","America/Punta_Arenas"],["Marquesas Standard Time","Pacific/Marquesas"],["Mauritius Standard Time","Indian/Mauritius"],["Middle East Standard Time","Asia/Beirut"],["Montevideo Standard Time","America/Montevideo"],["Morocco Standard Time","Africa/Casablanca"],["Mountain Standard Time","America/Denver"],["Mountain Standard Time (Mexico)","America/Chihuahua"],["Myanmar Standard Time","Asia/Rangoon"],["N. Central Asia Standard Time","Asia/Novosibirsk"],["Namibia Standard Time","Africa/Windhoek"],["Nepal Standard Time","Asia/Katmandu"],["New Zealand Standard Time","Pacific/Auckland"],["Newfoundland Standard Time","America/St_Johns"],["Norfolk Standard Time","Pacific/Norfolk"],["North Asia East Standard Time","Asia/Irkutsk"],["North Asia Standard Time","Asia/Krasnoyarsk"],["North Korea Standard Time","Asia/Pyongyang"],["Omsk Standard Time","Asia/Omsk"],["Pacific SA Standard Time","America/Santiago"],["Pacific Standard Time","America/Los_Angeles"],["Pacific Standard Time (Mexico)","America/Tijuana"],["Pakistan Standard Time","Asia/Karachi"],["Paraguay Standard Time","America/Asuncion"],["Qyzylorda Standard Time","Asia/Qyzylorda"],["Romance Standard Time","Europe/Paris"],["Russia Time Zone 10","Asia/Srednekolymsk"],["Russia Time Zone 11","Asia/Kamchatka"],["Russia Time Zone 3","Europe/Samara"],["Russian Standard Time","Europe/Moscow"],["SA Eastern Standard Time","America/Cayenne"],["SA Pacific Standard Time","America/Bogota"],["SA Western Standard Time","America/La_Paz"],["SE Asia Standard Time","Asia/Bangkok"],["Saint Pierre Standard Time","America/Miquelon"],["Sakhalin Standard Time","Asia/Sakhalin"],["Samoa Standard Time","Pacific/Apia"],["Sao Tome Standard Time","Africa/Sao_Tome"],["Saratov Standard Time","Europe/Saratov"],["Singapore Standard Time","Asia/Singapore"],["South Africa Standard Time","Africa/Johannesburg"],["South Sudan Standard Time","Africa/Juba"],["Sri Lanka Standard Time","Asia/Colombo"],["Sudan Standard Time","Africa/Khartoum"],["Syria Standard Time","Asia/Damascus"],["Taipei Standard Time","Asia/Taipei"],["Tasmania Standard Time","Australia/Hobart"],["Tocantins Standard Time","America/Araguaina"],["Tokyo Standard Time","Asia/Tokyo"],["Tomsk Standard Time","Asia/Tomsk"],["Tonga Standard Time","Pacific/Tongatapu"],["Transbaikal Standard Time","Asia/Chita"],["Turkey Standard Time","Europe/Istanbul"],["Turks And Caicos Standard Time","America/Grand_Turk"],["US Eastern Standard Time","America/Indianapolis"],["US Mountain Standard Time","America/Phoenix"],["UTC","Etc/GMT"],["UTC+01","Etc/GMT-1"],["UTC+02","Etc/GMT-2"],["UTC+03","Etc/GMT-3"],["UTC+04","Etc/GMT-4"],["UTC+05","Etc/GMT-5"],["UTC+06","Etc/GMT-6"],["UTC+07","Etc/GMT-7"],["UTC+08","Etc/GMT-8"],["UTC+09","Etc/GMT-9"],["UTC+10","Etc/GMT-10"],["UTC+11","Etc/GMT-11"],["UTC+12","Etc/GMT-12"],["UTC+13","Etc/GMT-13"],["UTC+14","Etc/GMT-14"],["UTC-01","Etc/GMT+1"],["UTC-02","Etc/GMT+2"],["UTC-03","Etc/GMT+3"],["UTC-04","Etc/GMT+4"],["UTC-05","Etc/GMT+5"],["UTC-06","Etc/GMT+6"],["UTC-07","Etc/GMT+7"],["UTC-08","Etc/GMT+8"],["UTC-09","Etc/GMT+9"],["UTC-10","Etc/GMT+10"],["UTC-11","Etc/GMT+11"],["UTC-12","Etc/GMT+12"],["Ulaanbaatar Standard Time","Asia/Ulaanbaatar"],["Venezuela Standard Time","America/Caracas"],["Vladivostok Standard Time","Asia/Vladivostok"],["Volgograd Standard Time","Europe/Volgograd"],["W. Australia Standard Time","Australia/Perth"],["W. Central Africa Standard Time","Africa/Lagos"],["W. Europe Standard Time","Europe/Berlin"],["W. Mongolia Standard Time","Asia/Hovd"],["West Asia Standard Time","Asia/Tashkent"],["West Bank Standard Time","Asia/Hebron"],["West Pacific Standard Time","Pacific/Port_Moresby"],["Yakutsk Standard Time","Asia/Yakutsk"],["Yukon Standard Time","America/Whitehorse"]]);class V0 extends Error{}class GVe extends V0{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class qVe extends V0{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class WVe extends V0{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class TS extends V0{}class epe extends V0{constructor(e){super(`Invalid unit ${e}`)}}class ol extends V0{}class sp extends V0{constructor(){super("Zone is an abstract class")}}const Ee="numeric",Fc="short",Ta="long",aO={year:Ee,month:Ee,day:Ee},tpe={year:Ee,month:Fc,day:Ee},JVe={year:Ee,month:Fc,day:Ee,weekday:Fc},ipe={year:Ee,month:Ta,day:Ee},npe={year:Ee,month:Ta,day:Ee,weekday:Ta},rpe={hour:Ee,minute:Ee},spe={hour:Ee,minute:Ee,second:Ee},ope={hour:Ee,minute:Ee,second:Ee,timeZoneName:Fc},ape={hour:Ee,minute:Ee,second:Ee,timeZoneName:Ta},lpe={hour:Ee,minute:Ee,hourCycle:"h23"},cpe={hour:Ee,minute:Ee,second:Ee,hourCycle:"h23"},upe={hour:Ee,minute:Ee,second:Ee,hourCycle:"h23",timeZoneName:Fc},dpe={hour:Ee,minute:Ee,second:Ee,hourCycle:"h23",timeZoneName:Ta},hpe={year:Ee,month:Ee,day:Ee,hour:Ee,minute:Ee},ppe={year:Ee,month:Ee,day:Ee,hour:Ee,minute:Ee,second:Ee},fpe={year:Ee,month:Fc,day:Ee,hour:Ee,minute:Ee},mpe={year:Ee,month:Fc,day:Ee,hour:Ee,minute:Ee,second:Ee},YVe={year:Ee,month:Fc,day:Ee,weekday:Fc,hour:Ee,minute:Ee},gpe={year:Ee,month:Ta,day:Ee,hour:Ee,minute:Ee,timeZoneName:Fc},ype={year:Ee,month:Ta,day:Ee,hour:Ee,minute:Ee,second:Ee,timeZoneName:Fc},vpe={year:Ee,month:Ta,day:Ee,weekday:Ta,hour:Ee,minute:Ee,timeZoneName:Ta},bpe={year:Ee,month:Ta,day:Ee,weekday:Ta,hour:Ee,minute:Ee,second:Ee,timeZoneName:Ta};class u1{get type(){throw new sp}get name(){throw new sp}get ianaName(){return this.name}get isUniversal(){throw new sp}offsetName(e,i){throw new sp}formatOffset(e,i){throw new sp}offset(e){throw new sp}equals(e){throw new sp}get isValid(){throw new sp}}let BD=null;class kR extends u1{static get instance(){return BD===null&&(BD=new kR),BD}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:i,locale:n}){return wpe(e,i,n)}formatOffset(e,i){return $E(this.offset(e),i)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}}let Q$={};function ZVe(t){return Q$[t]||(Q$[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),Q$[t]}const KVe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function XVe(t,e){const i=t.format(e).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(i),[,r,s,o,a,l,u,h]=n;return[o,r,s,a,l,u,h]}function QVe(t,e){const i=t.formatToParts(e),n=[];for(let r=0;r<i.length;r++){const{type:s,value:o}=i[r],a=KVe[s];s==="era"?n[a]=o:St(a)||(n[a]=parseInt(o,10))}return n}let OT={};class Nc extends u1{static create(e){return OT[e]||(OT[e]=new Nc(e)),OT[e]}static resetCache(){OT={},Q$={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Nc.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:i,locale:n}){return wpe(e,i,n,this.name)}formatOffset(e,i){return $E(this.offset(e),i)}offset(e){const i=new Date(e);if(isNaN(i))return NaN;const n=ZVe(this.name);let[r,s,o,a,l,u,h]=n.formatToParts?QVe(n,i):XVe(n,i);a==="BC"&&(r=-Math.abs(r)+1);const f=WB({year:r,month:s,day:o,hour:l===24?0:l,minute:u,second:h,millisecond:0});let g=+i;const v=g%1e3;return g-=v>=0?v:1e3+v,(f-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}}let xZ={};function e6e(t,e={}){const i=JSON.stringify([t,e]);let n=xZ[i];return n||(n=new Intl.ListFormat(t,e),xZ[i]=n),n}let hV={};function pV(t,e={}){const i=JSON.stringify([t,e]);let n=hV[i];return n||(n=new Intl.DateTimeFormat(t,e),hV[i]=n),n}let fV={};function t6e(t,e={}){const i=JSON.stringify([t,e]);let n=fV[i];return n||(n=new Intl.NumberFormat(t,e),fV[i]=n),n}let mV={};function i6e(t,e={}){const{base:i,...n}=e,r=JSON.stringify([t,n]);let s=mV[r];return s||(s=new Intl.RelativeTimeFormat(t,e),mV[r]=s),s}let kS=null;function n6e(){return kS||(kS=new Intl.DateTimeFormat().resolvedOptions().locale,kS)}function r6e(t){const e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));const i=t.indexOf("-u-");if(i===-1)return[t];{let n,r;try{n=pV(t).resolvedOptions(),r=t}catch{const l=t.substring(0,i);n=pV(l).resolvedOptions(),r=l}const{numberingSystem:s,calendar:o}=n;return[r,s,o]}}function s6e(t,e,i){return(i||e)&&(t.includes("-u-")||(t+="-u"),i&&(t+=`-ca-${i}`),e&&(t+=`-nu-${e}`)),t}function o6e(t){const e=[];for(let i=1;i<=12;i++){const n=Oe.utc(2016,i,1);e.push(t(n))}return e}function a6e(t){const e=[];for(let i=1;i<=7;i++){const n=Oe.utc(2016,11,13+i);e.push(t(n))}return e}function PT(t,e,i,n,r){const s=t.listingMode(i);return s==="error"?null:s==="en"?n(e):r(e)}function l6e(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}class c6e{constructor(e,i,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:s,...o}=n;if(!i||Object.keys(o).length>0){const a={useGrouping:!1,...n};n.padTo>0&&(a.minimumIntegerDigits=n.padTo),this.inf=t6e(e,a)}}format(e){if(this.inf){const i=this.floor?Math.floor(e):e;return this.inf.format(i)}else{const i=this.floor?Math.floor(e):qB(e,3);return Rn(i,this.padTo)}}}class u6e{constructor(e,i,n){this.opts=n;let r;if(e.zone.isUniversal){const o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&Nc.create(a).valid?(r=a,this.dt=e):(r="UTC",n.timeZoneName?this.dt=e:this.dt=e.offset===0?e:Oe.fromMillis(e.ts+e.offset*60*1e3))}else e.zone.type==="system"?this.dt=e:(this.dt=e,r=e.zone.name);const s={...this.opts};s.timeZone=s.timeZone||r,this.dtf=pV(i,s)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class d6e{constructor(e,i,n){this.opts={style:"long",...n},!i&&_pe()&&(this.rtf=i6e(e,n))}format(e,i){return this.rtf?this.rtf.format(e,i):k6e(i,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,i){return this.rtf?this.rtf.formatToParts(e,i):[]}}class Mi{static fromOpts(e){return Mi.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,i,n,r=!1){const s=e||Pn.defaultLocale,o=s||(r?"en-US":n6e()),a=i||Pn.defaultNumberingSystem,l=n||Pn.defaultOutputCalendar;return new Mi(o,a,l,s)}static resetCache(){kS=null,hV={},fV={},mV={}}static fromObject({locale:e,numberingSystem:i,outputCalendar:n}={}){return Mi.create(e,i,n)}constructor(e,i,n,r){const[s,o,a]=r6e(e);this.locale=s,this.numberingSystem=i||o||null,this.outputCalendar=n||a||null,this.intl=s6e(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=l6e(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&i?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:Mi.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,i=!1,n=!0){return PT(this,e,n,Epe,()=>{const r=i?{month:e,day:"numeric"}:{month:e},s=i?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=o6e(o=>this.extract(o,r,"month"))),this.monthsCache[s][e]})}weekdays(e,i=!1,n=!0){return PT(this,e,n,Tpe,()=>{const r=i?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=i?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=a6e(o=>this.extract(o,r,"weekday"))),this.weekdaysCache[s][e]})}meridiems(e=!0){return PT(this,void 0,e,()=>kpe,()=>{if(!this.meridiemCache){const i={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Oe.utc(2016,11,13,9),Oe.utc(2016,11,13,19)].map(n=>this.extract(n,i,"dayperiod"))}return this.meridiemCache})}eras(e,i=!0){return PT(this,e,i,$pe,()=>{const n={era:e};return this.eraCache[e]||(this.eraCache[e]=[Oe.utc(-40,1,1),Oe.utc(2017,1,1)].map(r=>this.extract(r,n,"era"))),this.eraCache[e]})}extract(e,i,n){const r=this.dtFormatter(e,i),s=r.formatToParts(),o=s.find(a=>a.type.toLowerCase()===n);return o?o.value:null}numberFormatter(e={}){return new c6e(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,i={}){return new u6e(e,this.intl,i)}relFormatter(e={}){return new d6e(this.intl,this.isEnglish(),e)}listFormatter(e={}){return e6e(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}}let HD=null;class Gr extends u1{static get utcInstance(){return HD===null&&(HD=new Gr(0)),HD}static instance(e){return e===0?Gr.utcInstance:new Gr(e)}static parseSpecifier(e){if(e){const i=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(i)return new Gr(AR(i[1],i[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${$E(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${$E(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,i){return $E(this.fixed,i)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}}class h6e extends u1{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function _f(t,e){if(St(t)||t===null)return e;if(t instanceof u1)return t;if(p6e(t)){const i=t.toLowerCase();return i==="default"?e:i==="local"||i==="system"?kR.instance:i==="utc"||i==="gmt"?Gr.utcInstance:Gr.parseSpecifier(i)||Nc.create(t)}else return n0(t)?Gr.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new h6e(t)}let SZ=()=>Date.now(),EZ="system",CZ=null,IZ=null,TZ=null,kZ=60,$Z;class Pn{static get now(){return SZ}static set now(e){SZ=e}static set defaultZone(e){EZ=e}static get defaultZone(){return _f(EZ,kR.instance)}static get defaultLocale(){return CZ}static set defaultLocale(e){CZ=e}static get defaultNumberingSystem(){return IZ}static set defaultNumberingSystem(e){IZ=e}static get defaultOutputCalendar(){return TZ}static set defaultOutputCalendar(e){TZ=e}static get twoDigitCutoffYear(){return kZ}static set twoDigitCutoffYear(e){kZ=e%100}static get throwOnInvalid(){return $Z}static set throwOnInvalid(e){$Z=e}static resetCaches(){Mi.resetCache(),Nc.resetCache()}}function St(t){return typeof t>"u"}function n0(t){return typeof t=="number"}function $R(t){return typeof t=="number"&&t%1===0}function p6e(t){return typeof t=="string"}function f6e(t){return Object.prototype.toString.call(t)==="[object Date]"}function _pe(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function m6e(t){return Array.isArray(t)?t:[t]}function AZ(t,e,i){if(t.length!==0)return t.reduce((n,r)=>{const s=[e(r),r];return n&&i(n[0],s[0])===n[0]?n:s},null)[1]}function g6e(t,e){return e.reduce((i,n)=>(i[n]=t[n],i),{})}function bw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ch(t,e,i){return $R(t)&&t>=e&&t<=i}function y6e(t,e){return t-e*Math.floor(t/e)}function Rn(t,e=2){const i=t<0;let n;return i?n="-"+(""+-t).padStart(e,"0"):n=(""+t).padStart(e,"0"),n}function pf(t){if(!(St(t)||t===null||t===""))return parseInt(t,10)}function Jm(t){if(!(St(t)||t===null||t===""))return parseFloat(t)}function GB(t){if(!(St(t)||t===null||t==="")){const e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function qB(t,e,i=!1){const n=10**e;return(i?Math.trunc:Math.round)(t*n)/n}function e2(t){return t%4===0&&(t%100!==0||t%400===0)}function kE(t){return e2(t)?366:365}function lO(t,e){const i=y6e(e-1,12)+1,n=t+(e-i)/12;return i===2?e2(n)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][i-1]}function WB(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(e.getUTCFullYear()-1900)),+e}function cO(t){const e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,i=t-1,n=(i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400))%7;return e===4||n===3?53:52}function gV(t){return t>99?t:t>Pn.twoDigitCutoffYear?1900+t:2e3+t}function wpe(t,e,i,n=null){const r=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);const o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(i,o).formatToParts(r).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function AR(t,e){let i=parseInt(t,10);Number.isNaN(i)&&(i=0);const n=parseInt(e,10)||0,r=i<0||Object.is(i,-0)?-n:n;return i*60+r}function xpe(t){const e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ol(`Invalid unit value ${t}`);return e}function uO(t,e){const i={};for(const n in t)if(bw(t,n)){const r=t[n];if(r==null)continue;i[e(n)]=xpe(r)}return i}function $E(t,e){const i=Math.trunc(Math.abs(t/60)),n=Math.trunc(Math.abs(t%60)),r=t>=0?"+":"-";switch(e){case"short":return`${r}${Rn(i,2)}:${Rn(n,2)}`;case"narrow":return`${r}${i}${n>0?`:${n}`:""}`;case"techie":return`${r}${Rn(i,2)}${Rn(n,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function MR(t){return g6e(t,["hour","minute","second","millisecond"])}const v6e=["January","February","March","April","May","June","July","August","September","October","November","December"],Spe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],b6e=["J","F","M","A","M","J","J","A","S","O","N","D"];function Epe(t){switch(t){case"narrow":return[...b6e];case"short":return[...Spe];case"long":return[...v6e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Cpe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ipe=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],_6e=["M","T","W","T","F","S","S"];function Tpe(t){switch(t){case"narrow":return[..._6e];case"short":return[...Ipe];case"long":return[...Cpe];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const kpe=["AM","PM"],w6e=["Before Christ","Anno Domini"],x6e=["BC","AD"],S6e=["B","A"];function $pe(t){switch(t){case"narrow":return[...S6e];case"short":return[...x6e];case"long":return[...w6e];default:return null}}function E6e(t){return kpe[t.hour<12?0:1]}function C6e(t,e){return Tpe(e)[t.weekday-1]}function I6e(t,e){return Epe(e)[t.month-1]}function T6e(t,e){return $pe(e)[t.year<0?0:1]}function k6e(t,e,i="always",n=!1){const r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(i==="auto"&&s){const p=t==="days";switch(e){case 1:return p?"tomorrow":`next ${r[t][0]}`;case-1:return p?"yesterday":`last ${r[t][0]}`;case 0:return p?"today":`this ${r[t][0]}`}}const o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,u=r[t],h=n?l?u[1]:u[2]||u[1]:l?r[t][0]:t;return o?`${a} ${h} ago`:`in ${a} ${h}`}function MZ(t,e){let i="";for(const n of t)n.literal?i+=n.val:i+=e(n.val);return i}const $6e={D:aO,DD:tpe,DDD:ipe,DDDD:npe,t:rpe,tt:spe,ttt:ope,tttt:ape,T:lpe,TT:cpe,TTT:upe,TTTT:dpe,f:hpe,ff:fpe,fff:gpe,ffff:vpe,F:ppe,FF:mpe,FFF:ype,FFFF:bpe};class ws{static create(e,i={}){return new ws(e,i)}static parseFormat(e){let i=null,n="",r=!1;const s=[];for(let o=0;o<e.length;o++){const a=e.charAt(o);a==="'"?(n.length>0&&s.push({literal:r,val:n}),i=null,n="",r=!r):r||a===i?n+=a:(n.length>0&&s.push({literal:!1,val:n}),n=a,i=a)}return n.length>0&&s.push({literal:r,val:n}),s}static macroTokenToFormatOpts(e){return $6e[e]}constructor(e,i){this.opts=i,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,i){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTime(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).format()}formatDateTimeParts(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).formatToParts()}formatInterval(e,i={}){return this.loc.dtFormatter(e.start,{...this.opts,...i}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,i={}){return this.loc.dtFormatter(e,{...this.opts,...i}).resolvedOptions()}num(e,i=0){if(this.opts.forceSimple)return Rn(e,i);const n={...this.opts};return i>0&&(n.padTo=i),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,i){const n=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(g,v)=>this.loc.extract(e,g,v),o=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",a=()=>n?E6e(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(g,v)=>n?I6e(e,g):s(v?{month:g}:{month:g,day:"numeric"},"month"),u=(g,v)=>n?C6e(e,g):s(v?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),h=g=>{const v=ws.macroTokenToFormatOpts(g);return v?this.formatWithSystemDefault(e,v):g},p=g=>n?T6e(e,g):s({era:g},"era"),f=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return r?s({day:"numeric"},"day"):this.num(e.day);case"dd":return r?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return r?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return r?s({month:"numeric"},"month"):this.num(e.month);case"MM":return r?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return r?s({year:"numeric"},"year"):this.num(e.year);case"yy":return r?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return p("short");case"GG":return p("long");case"GGGGG":return p("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return h(g)}};return MZ(ws.parseFormat(i),f)}formatDurationFromString(e,i){const n=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=l=>u=>{const h=n(u);return h?this.num(l.get(h),u.length):u},s=ws.parseFormat(i),o=s.reduce((l,{literal:u,val:h})=>u?l:l.concat(h),[]),a=e.shiftTo(...o.map(n).filter(l=>l));return MZ(s,r(a))}}class xc{constructor(e,i){this.reason=e,this.explanation=i}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const Ape=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function d1(...t){const e=t.reduce((i,n)=>i+n.source,"");return RegExp(`^${e}$`)}function h1(...t){return e=>t.reduce(([i,n,r],s)=>{const[o,a,l]=s(e,r);return[{...i,...o},a||n,l]},[{},null,1]).slice(0,2)}function p1(t,...e){if(t==null)return[null,null];for(const[i,n]of e){const r=i.exec(t);if(r)return n(r)}return[null,null]}function Mpe(...t){return(e,i)=>{const n={};let r;for(r=0;r<t.length;r++)n[t[r]]=pf(e[i+r]);return[n,null,i+r]}}const Ope=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,A6e=`(?:${Ope.source}?(?:\\[(${Ape.source})\\])?)?`,JB=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Ppe=RegExp(`${JB.source}${A6e}`),YB=RegExp(`(?:T${Ppe.source})?`),M6e=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,O6e=/(\d{4})-?W(\d\d)(?:-?(\d))?/,P6e=/(\d{4})-?(\d{3})/,R6e=Mpe("weekYear","weekNumber","weekDay"),L6e=Mpe("year","ordinal"),D6e=/(\d{4})-(\d\d)-(\d\d)/,Rpe=RegExp(`${JB.source} ?(?:${Ope.source}|(${Ape.source}))?`),F6e=RegExp(`(?: ${Rpe.source})?`);function z_(t,e,i){const n=t[e];return St(n)?i:pf(n)}function N6e(t,e){return[{year:z_(t,e),month:z_(t,e+1,1),day:z_(t,e+2,1)},null,e+3]}function f1(t,e){return[{hours:z_(t,e,0),minutes:z_(t,e+1,0),seconds:z_(t,e+2,0),milliseconds:GB(t[e+3])},null,e+4]}function t2(t,e){const i=!t[e]&&!t[e+1],n=AR(t[e+1],t[e+2]),r=i?null:Gr.instance(n);return[{},r,e+3]}function i2(t,e){const i=t[e]?Nc.create(t[e]):null;return[{},i,e+1]}const z6e=RegExp(`^T?${JB.source}$`),j6e=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function V6e(t){const[e,i,n,r,s,o,a,l,u]=t,h=e[0]==="-",p=l&&l[0]==="-",f=(g,v=!1)=>g!==void 0&&(v||g&&h)?-g:g;return[{years:f(Jm(i)),months:f(Jm(n)),weeks:f(Jm(r)),days:f(Jm(s)),hours:f(Jm(o)),minutes:f(Jm(a)),seconds:f(Jm(l),l==="-0"),milliseconds:f(GB(u),p)}]}const U6e={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function ZB(t,e,i,n,r,s,o){const a={year:e.length===2?gV(pf(e)):pf(e),month:Spe.indexOf(i)+1,day:pf(n),hour:pf(r),minute:pf(s)};return o&&(a.second=pf(o)),t&&(a.weekday=t.length>3?Cpe.indexOf(t)+1:Ipe.indexOf(t)+1),a}const B6e=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function H6e(t){const[,e,i,n,r,s,o,a,l,u,h,p]=t,f=ZB(e,r,n,i,s,o,a);let g;return l?g=U6e[l]:u?g=0:g=AR(h,p),[f,new Gr(g)]}function G6e(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const q6e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,W6e=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,J6e=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function OZ(t){const[,e,i,n,r,s,o,a]=t;return[ZB(e,r,n,i,s,o,a),Gr.utcInstance]}function Y6e(t){const[,e,i,n,r,s,o,a]=t;return[ZB(e,a,i,n,r,s,o),Gr.utcInstance]}const Z6e=d1(M6e,YB),K6e=d1(O6e,YB),X6e=d1(P6e,YB),Q6e=d1(Ppe),Lpe=h1(N6e,f1,t2,i2),eUe=h1(R6e,f1,t2,i2),tUe=h1(L6e,f1,t2,i2),iUe=h1(f1,t2,i2);function nUe(t){return p1(t,[Z6e,Lpe],[K6e,eUe],[X6e,tUe],[Q6e,iUe])}function rUe(t){return p1(G6e(t),[B6e,H6e])}function sUe(t){return p1(t,[q6e,OZ],[W6e,OZ],[J6e,Y6e])}function oUe(t){return p1(t,[j6e,V6e])}const aUe=h1(f1);function lUe(t){return p1(t,[z6e,aUe])}const cUe=d1(D6e,F6e),uUe=d1(Rpe),dUe=h1(f1,t2,i2);function hUe(t){return p1(t,[cUe,Lpe],[uUe,dUe])}const pUe="Invalid Duration",Dpe={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},fUe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Dpe},Na=146097/400,ov=146097/4800,mUe={years:{quarters:4,months:12,weeks:Na/7,days:Na,hours:Na*24,minutes:Na*24*60,seconds:Na*24*60*60,milliseconds:Na*24*60*60*1e3},quarters:{months:3,weeks:Na/28,days:Na/4,hours:Na*24/4,minutes:Na*24*60/4,seconds:Na*24*60*60/4,milliseconds:Na*24*60*60*1e3/4},months:{weeks:ov/7,days:ov,hours:ov*24,minutes:ov*24*60,seconds:ov*24*60*60,milliseconds:ov*24*60*60*1e3},...Dpe},Gg=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],gUe=Gg.slice(0).reverse();function op(t,e,i=!1){const n={values:i?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new Tt(n)}function yUe(t){return t<0?Math.floor(t):Math.ceil(t)}function Fpe(t,e,i,n,r){const s=t[r][i],o=e[i]/s,a=Math.sign(o)===Math.sign(n[r]),l=!a&&n[r]!==0&&Math.abs(o)<=1?yUe(o):Math.trunc(o);n[r]+=l,e[i]-=l*s}function vUe(t,e){gUe.reduce((i,n)=>St(e[n])?i:(i&&Fpe(t,e,i,e,n),n),null)}function bUe(t){const e={};for(const[i,n]of Object.entries(t))n!==0&&(e[i]=n);return e}class Tt{constructor(e){const i=e.conversionAccuracy==="longterm"||!1;let n=i?mUe:fUe;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||Mi.create(),this.conversionAccuracy=i?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,i){return Tt.fromObject({milliseconds:e},i)}static fromObject(e,i={}){if(e==null||typeof e!="object")throw new ol(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new Tt({values:uO(e,Tt.normalizeUnit),loc:Mi.fromObject(i),conversionAccuracy:i.conversionAccuracy,matrix:i.matrix})}static fromDurationLike(e){if(n0(e))return Tt.fromMillis(e);if(Tt.isDuration(e))return e;if(typeof e=="object")return Tt.fromObject(e);throw new ol(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,i){const[n]=oUe(e);return n?Tt.fromObject(n,i):Tt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,i){const[n]=lUe(e);return n?Tt.fromObject(n,i):Tt.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,i=null){if(!e)throw new ol("need to specify a reason the Duration is invalid");const n=e instanceof xc?e:new xc(e,i);if(Pn.throwOnInvalid)throw new WVe(n);return new Tt({invalid:n})}static normalizeUnit(e){const i={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!i)throw new epe(e);return i}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,i={}){const n={...i,floor:i.round!==!1&&i.floor!==!1};return this.isValid?ws.create(this.loc,n).formatDurationFromString(this,e):pUe}toHuman(e={}){const i=Gg.map(n=>{const r=this.values[n];return St(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:n.slice(0,-1)}).format(r)}).filter(n=>n);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(i)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=qB(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const i=this.toMillis();if(i<0||i>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};const n=this.shiftTo("hours","minutes","seconds","milliseconds");let r=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||n.seconds!==0||n.milliseconds!==0)&&(r+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||n.milliseconds!==0)&&(r+=".SSS"));let s=n.toFormat(r);return e.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const i=Tt.fromDurationLike(e),n={};for(const r of Gg)(bw(i.values,r)||bw(this.values,r))&&(n[r]=i.get(r)+this.get(r));return op(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const i=Tt.fromDurationLike(e);return this.plus(i.negate())}mapUnits(e){if(!this.isValid)return this;const i={};for(const n of Object.keys(this.values))i[n]=xpe(e(this.values[n],n));return op(this,{values:i},!0)}get(e){return this[Tt.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const i={...this.values,...uO(e,Tt.normalizeUnit)};return op(this,{values:i})}reconfigure({locale:e,numberingSystem:i,conversionAccuracy:n,matrix:r}={}){const o={loc:this.loc.clone({locale:e,numberingSystem:i}),matrix:r,conversionAccuracy:n};return op(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return vUe(this.matrix,e),op(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=bUe(this.normalize().shiftToAll().toObject());return op(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>Tt.normalizeUnit(o));const i={},n={},r=this.toObject();let s;for(const o of Gg)if(e.indexOf(o)>=0){s=o;let a=0;for(const u in n)a+=this.matrix[u][o]*n[u],n[u]=0;n0(r[o])&&(a+=r[o]);const l=Math.trunc(a);i[o]=l,n[o]=(a*1e3-l*1e3)/1e3;for(const u in r)Gg.indexOf(u)>Gg.indexOf(o)&&Fpe(this.matrix,r,u,i,o)}else n0(r[o])&&(n[o]=r[o]);for(const o in n)n[o]!==0&&(i[s]+=o===s?n[o]:n[o]/this.matrix[s][o]);return op(this,{values:i},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const i of Object.keys(this.values))e[i]=this.values[i]===0?0:-this.values[i];return op(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function i(n,r){return n===void 0||n===0?r===void 0||r===0:n===r}for(const n of Gg)if(!i(this.values[n],e.values[n]))return!1;return!0}}const av="Invalid Interval";function _Ue(t,e){return!t||!t.isValid?Ji.invalid("missing or invalid start"):!e||!e.isValid?Ji.invalid("missing or invalid end"):e<t?Ji.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}class Ji{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,i=null){if(!e)throw new ol("need to specify a reason the Interval is invalid");const n=e instanceof xc?e:new xc(e,i);if(Pn.throwOnInvalid)throw new qVe(n);return new Ji({invalid:n})}static fromDateTimes(e,i){const n=cx(e),r=cx(i),s=_Ue(n,r);return s??new Ji({start:n,end:r})}static after(e,i){const n=Tt.fromDurationLike(i),r=cx(e);return Ji.fromDateTimes(r,r.plus(n))}static before(e,i){const n=Tt.fromDurationLike(i),r=cx(e);return Ji.fromDateTimes(r.minus(n),r)}static fromISO(e,i){const[n,r]=(e||"").split("/",2);if(n&&r){let s,o;try{s=Oe.fromISO(n,i),o=s.isValid}catch{o=!1}let a,l;try{a=Oe.fromISO(r,i),l=a.isValid}catch{l=!1}if(o&&l)return Ji.fromDateTimes(s,a);if(o){const u=Tt.fromISO(r,i);if(u.isValid)return Ji.after(s,u)}else if(l){const u=Tt.fromISO(n,i);if(u.isValid)return Ji.before(a,u)}}return Ji.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;const i=this.start.startOf(e),n=this.end.startOf(e);return Math.floor(n.diff(i,e).get(e))+1}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:i}={}){return this.isValid?Ji.fromDateTimes(e||this.s,i||this.e):this}splitAt(...e){if(!this.isValid)return[];const i=e.map(cx).filter(o=>this.contains(o)).sort(),n=[];let{s:r}=this,s=0;for(;r<this.e;){const o=i[s]||this.e,a=+o>+this.e?this.e:o;n.push(Ji.fromDateTimes(r,a)),r=a,s+=1}return n}splitBy(e){const i=Tt.fromDurationLike(e);if(!this.isValid||!i.isValid||i.as("milliseconds")===0)return[];let{s:n}=this,r=1,s;const o=[];for(;n<this.e;){const a=this.start.plus(i.mapUnits(l=>l*r));s=+a>+this.e?this.e:a,o.push(Ji.fromDateTimes(n,s)),n=s,r+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;const i=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return i>=n?null:Ji.fromDateTimes(i,n)}union(e){if(!this.isValid)return this;const i=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Ji.fromDateTimes(i,n)}static merge(e){const[i,n]=e.sort((r,s)=>r.s-s.s).reduce(([r,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[r,s.union(o)]:[r.concat([s]),o]:[r,o],[[],null]);return n&&i.push(n),i}static xor(e){let i=null,n=0;const r=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,u)=>l.time-u.time);for(const l of a)n+=l.type==="s"?1:-1,n===1?i=l.time:(i&&+i!=+l.time&&r.push(Ji.fromDateTimes(i,l.time)),i=null);return Ji.merge(r)}difference(...e){return Ji.xor([this].concat(e)).map(i=>this.intersection(i)).filter(i=>i&&!i.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:av}toLocaleString(e=aO,i={}){return this.isValid?ws.create(this.s.loc.clone(i),e).formatInterval(this):av}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:av}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:av}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:av}toFormat(e,{separator:i=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${i}${this.e.toFormat(e)}`:av}toDuration(e,i){return this.isValid?this.e.diff(this.s,e,i):Tt.invalid(this.invalidReason)}mapEndpoints(e){return Ji.fromDateTimes(e(this.s),e(this.e))}}class $S{static hasDST(e=Pn.defaultZone){const i=Oe.now().setZone(e).set({month:12});return!e.isUniversal&&i.offset!==i.set({month:6}).offset}static isValidIANAZone(e){return Nc.isValidZone(e)}static normalizeZone(e){return _f(e,Pn.defaultZone)}static months(e="long",{locale:i=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||Mi.create(i,n,s)).months(e)}static monthsFormat(e="long",{locale:i=null,numberingSystem:n=null,locObj:r=null,outputCalendar:s="gregory"}={}){return(r||Mi.create(i,n,s)).months(e,!0)}static weekdays(e="long",{locale:i=null,numberingSystem:n=null,locObj:r=null}={}){return(r||Mi.create(i,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:i=null,numberingSystem:n=null,locObj:r=null}={}){return(r||Mi.create(i,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Mi.create(e).meridiems()}static eras(e="short",{locale:i=null}={}){return Mi.create(i,null,"gregory").eras(e)}static features(){return{relative:_pe()}}}function PZ(t,e){const i=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),n=i(e)-i(t);return Math.floor(Tt.fromMillis(n).as("days"))}function wUe(t,e,i){const n=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{const h=PZ(l,u);return(h-h%7)/7}],["days",PZ]],r={},s=t;let o,a;for(const[l,u]of n)i.indexOf(l)>=0&&(o=l,r[l]=u(t,e),a=s.plus(r),a>e?(r[l]--,t=s.plus(r)):t=a);return[t,r,a,o]}function xUe(t,e,i,n){let[r,s,o,a]=wUe(t,e,i);const l=e-r,u=i.filter(p=>["hours","minutes","seconds","milliseconds"].indexOf(p)>=0);u.length===0&&(o<e&&(o=r.plus({[a]:1})),o!==r&&(s[a]=(s[a]||0)+l/(o-r)));const h=Tt.fromObject(s,n);return u.length>0?Tt.fromMillis(l,n).shiftTo(...u).plus(h):h}const KB={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},RZ={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},SUe=KB.hanidec.replace(/[\[|\]]/g,"").split("");function EUe(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let i=0;i<t.length;i++){const n=t.charCodeAt(i);if(t[i].search(KB.hanidec)!==-1)e+=SUe.indexOf(t[i]);else for(const r in RZ){const[s,o]=RZ[r];n>=s&&n<=o&&(e+=n-s)}}return parseInt(e,10)}else return e}function Rl({numberingSystem:t},e=""){return new RegExp(`${KB[t||"latn"]}${e}`)}const CUe="missing Intl.DateTimeFormat.formatToParts support";function Nt(t,e=i=>i){return{regex:t,deser:([i])=>e(EUe(i))}}const IUe=String.fromCharCode(160),Npe=`[ ${IUe}]`,zpe=new RegExp(Npe,"g");function TUe(t){return t.replace(/\./g,"\\.?").replace(zpe,Npe)}function LZ(t){return t.replace(/\./g,"").replace(zpe," ").toLowerCase()}function Ll(t,e){return t===null?null:{regex:RegExp(t.map(TUe).join("|")),deser:([i])=>t.findIndex(n=>LZ(i)===LZ(n))+e}}function DZ(t,e){return{regex:t,deser:([,i,n])=>AR(i,n),groups:e}}function GD(t){return{regex:t,deser:([e])=>e}}function kUe(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function $Ue(t,e){const i=Rl(e),n=Rl(e,"{2}"),r=Rl(e,"{3}"),s=Rl(e,"{4}"),o=Rl(e,"{6}"),a=Rl(e,"{1,2}"),l=Rl(e,"{1,3}"),u=Rl(e,"{1,6}"),h=Rl(e,"{1,9}"),p=Rl(e,"{2,4}"),f=Rl(e,"{4,6}"),g=_=>({regex:RegExp(kUe(_.val)),deser:([w])=>w,literal:!0}),b=(_=>{if(t.literal)return g(_);switch(_.val){case"G":return Ll(e.eras("short",!1),0);case"GG":return Ll(e.eras("long",!1),0);case"y":return Nt(u);case"yy":return Nt(p,gV);case"yyyy":return Nt(s);case"yyyyy":return Nt(f);case"yyyyyy":return Nt(o);case"M":return Nt(a);case"MM":return Nt(n);case"MMM":return Ll(e.months("short",!0,!1),1);case"MMMM":return Ll(e.months("long",!0,!1),1);case"L":return Nt(a);case"LL":return Nt(n);case"LLL":return Ll(e.months("short",!1,!1),1);case"LLLL":return Ll(e.months("long",!1,!1),1);case"d":return Nt(a);case"dd":return Nt(n);case"o":return Nt(l);case"ooo":return Nt(r);case"HH":return Nt(n);case"H":return Nt(a);case"hh":return Nt(n);case"h":return Nt(a);case"mm":return Nt(n);case"m":return Nt(a);case"q":return Nt(a);case"qq":return Nt(n);case"s":return Nt(a);case"ss":return Nt(n);case"S":return Nt(l);case"SSS":return Nt(r);case"u":return GD(h);case"uu":return GD(a);case"uuu":return Nt(i);case"a":return Ll(e.meridiems(),0);case"kkkk":return Nt(s);case"kk":return Nt(p,gV);case"W":return Nt(a);case"WW":return Nt(n);case"E":case"c":return Nt(i);case"EEE":return Ll(e.weekdays("short",!1,!1),1);case"EEEE":return Ll(e.weekdays("long",!1,!1),1);case"ccc":return Ll(e.weekdays("short",!0,!1),1);case"cccc":return Ll(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return DZ(new RegExp(`([+-]${a.source})(?::(${n.source}))?`),2);case"ZZZ":return DZ(new RegExp(`([+-]${a.source})(${n.source})?`),2);case"z":return GD(/[a-z_+-/]{1,256}?/i);default:return g(_)}})(t)||{invalidReason:CUe};return b.token=t,b}const AUe={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function MUe(t,e){const{type:i,value:n}=t;if(i==="literal")return{literal:!0,val:n};const r=e[i];let s=AUe[i];if(typeof s=="object"&&(s=s[r]),s)return{literal:!1,val:s}}function OUe(t){return[`^${t.map(i=>i.regex).reduce((i,n)=>`${i}(${n.source})`,"")}$`,t]}function PUe(t,e,i){const n=t.match(e);if(n){const r={};let s=1;for(const o in i)if(bw(i,o)){const a=i[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(r[a.token.val[0]]=a.deser(n.slice(s,s+l))),s+=l}return[n,r]}else return[n,{}]}function RUe(t){const e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let i=null,n;return St(t.z)||(i=Nc.create(t.z)),St(t.Z)||(i||(i=new Gr(t.Z)),n=t.Z),St(t.q)||(t.M=(t.q-1)*3+1),St(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),St(t.u)||(t.S=GB(t.u)),[Object.keys(t).reduce((s,o)=>{const a=e(o);return a&&(s[a]=t[o]),s},{}),i,n]}let qD=null;function LUe(){return qD||(qD=Oe.fromMillis(1555555555555)),qD}function DUe(t,e){if(t.literal)return t;const i=ws.macroTokenToFormatOpts(t.val),n=Upe(i,e);return n==null||n.includes(void 0)?t:n}function jpe(t,e){return Array.prototype.concat(...t.map(i=>DUe(i,e)))}function Vpe(t,e,i){const n=jpe(ws.parseFormat(i),t),r=n.map(o=>$Ue(o,t)),s=r.find(o=>o.invalidReason);if(s)return{input:e,tokens:n,invalidReason:s.invalidReason};{const[o,a]=OUe(r),l=RegExp(o,"i"),[u,h]=PUe(e,l,a),[p,f,g]=h?RUe(h):[null,null,void 0];if(bw(h,"a")&&bw(h,"H"))throw new TS("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:n,regex:l,rawMatches:u,matches:h,result:p,zone:f,specificOffset:g}}}function FUe(t,e,i){const{result:n,zone:r,specificOffset:s,invalidReason:o}=Vpe(t,e,i);return[n,r,s,o]}function Upe(t,e){return t?ws.create(e,t).formatDateTimeParts(LUe()).map(r=>MUe(r,t)):null}const Bpe=[0,31,59,90,120,151,181,212,243,273,304,334],Hpe=[0,31,60,91,121,152,182,213,244,274,305,335];function ul(t,e){return new xc("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function Gpe(t,e,i){const n=new Date(Date.UTC(t,e-1,i));t<100&&t>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);const r=n.getUTCDay();return r===0?7:r}function qpe(t,e,i){return i+(e2(t)?Hpe:Bpe)[e-1]}function Wpe(t,e){const i=e2(t)?Hpe:Bpe,n=i.findIndex(s=>s<e),r=e-i[n];return{month:n+1,day:r}}function yV(t){const{year:e,month:i,day:n}=t,r=qpe(e,i,n),s=Gpe(e,i,n);let o=Math.floor((r-s+10)/7),a;return o<1?(a=e-1,o=cO(a)):o>cO(e)?(a=e+1,o=1):a=e,{weekYear:a,weekNumber:o,weekday:s,...MR(t)}}function FZ(t){const{weekYear:e,weekNumber:i,weekday:n}=t,r=Gpe(e,1,4),s=kE(e);let o=i*7+n-r-3,a;o<1?(a=e-1,o+=kE(a)):o>s?(a=e+1,o-=kE(e)):a=e;const{month:l,day:u}=Wpe(a,o);return{year:a,month:l,day:u,...MR(t)}}function WD(t){const{year:e,month:i,day:n}=t,r=qpe(e,i,n);return{year:e,ordinal:r,...MR(t)}}function NZ(t){const{year:e,ordinal:i}=t,{month:n,day:r}=Wpe(e,i);return{year:e,month:n,day:r,...MR(t)}}function NUe(t){const e=$R(t.weekYear),i=ch(t.weekNumber,1,cO(t.weekYear)),n=ch(t.weekday,1,7);return e?i?n?!1:ul("weekday",t.weekday):ul("week",t.week):ul("weekYear",t.weekYear)}function zUe(t){const e=$R(t.year),i=ch(t.ordinal,1,kE(t.year));return e?i?!1:ul("ordinal",t.ordinal):ul("year",t.year)}function Jpe(t){const e=$R(t.year),i=ch(t.month,1,12),n=ch(t.day,1,lO(t.year,t.month));return e?i?n?!1:ul("day",t.day):ul("month",t.month):ul("year",t.year)}function Ype(t){const{hour:e,minute:i,second:n,millisecond:r}=t,s=ch(e,0,23)||e===24&&i===0&&n===0&&r===0,o=ch(i,0,59),a=ch(n,0,59),l=ch(r,0,999);return s?o?a?l?!1:ul("millisecond",r):ul("second",n):ul("minute",i):ul("hour",e)}const JD="Invalid DateTime",zZ=864e13;function RT(t){return new xc("unsupported zone",`the zone "${t.name}" is not supported`)}function YD(t){return t.weekData===null&&(t.weekData=yV(t.c)),t.weekData}function ax(t,e){const i={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new Oe({...i,...e,old:i})}function Zpe(t,e,i){let n=t-e*60*1e3;const r=i.offset(n);if(e===r)return[n,e];n-=(r-e)*60*1e3;const s=i.offset(n);return r===s?[n,r]:[t-Math.min(r,s)*60*1e3,Math.max(r,s)]}function jZ(t,e){t+=e*60*1e3;const i=new Date(t);return{year:i.getUTCFullYear(),month:i.getUTCMonth()+1,day:i.getUTCDate(),hour:i.getUTCHours(),minute:i.getUTCMinutes(),second:i.getUTCSeconds(),millisecond:i.getUTCMilliseconds()}}function eA(t,e,i){return Zpe(WB(t),e,i)}function VZ(t,e){const i=t.o,n=t.c.year+Math.trunc(e.years),r=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:n,month:r,day:Math.min(t.c.day,lO(n,r))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=Tt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=WB(s);let[l,u]=Zpe(a,i,t.zone);return o!==0&&(l+=o,u=t.zone.offset(l)),{ts:l,o:u}}function lx(t,e,i,n,r,s){const{setZone:o,zone:a}=i;if(t&&Object.keys(t).length!==0){const l=e||a,u=Oe.fromObject(t,{...i,zone:l,specificOffset:s});return o?u:u.setZone(a)}else return Oe.invalid(new xc("unparsable",`the input "${r}" can't be parsed as ${n}`))}function LT(t,e,i=!0){return t.isValid?ws.create(Mi.create("en-US"),{allowZ:i,forceSimple:!0}).formatDateTimeFromString(t,e):null}function ZD(t,e){const i=t.c.year>9999||t.c.year<0;let n="";return i&&t.c.year>=0&&(n+="+"),n+=Rn(t.c.year,i?6:4),e?(n+="-",n+=Rn(t.c.month),n+="-",n+=Rn(t.c.day)):(n+=Rn(t.c.month),n+=Rn(t.c.day)),n}function UZ(t,e,i,n,r,s){let o=Rn(t.c.hour);return e?(o+=":",o+=Rn(t.c.minute),(t.c.second!==0||!i)&&(o+=":")):o+=Rn(t.c.minute),(t.c.second!==0||!i)&&(o+=Rn(t.c.second),(t.c.millisecond!==0||!n)&&(o+=".",o+=Rn(t.c.millisecond,3))),r&&(t.isOffsetFixed&&t.offset===0&&!s?o+="Z":t.o<0?(o+="-",o+=Rn(Math.trunc(-t.o/60)),o+=":",o+=Rn(Math.trunc(-t.o%60))):(o+="+",o+=Rn(Math.trunc(t.o/60)),o+=":",o+=Rn(Math.trunc(t.o%60)))),s&&(o+="["+t.zone.ianaName+"]"),o}const Kpe={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},jUe={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},VUe={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Xpe=["year","month","day","hour","minute","second","millisecond"],UUe=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],BUe=["year","ordinal","hour","minute","second","millisecond"];function BZ(t){const e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new epe(t);return e}function HZ(t,e){const i=_f(e.zone,Pn.defaultZone),n=Mi.fromObject(e),r=Pn.now();let s,o;if(St(t.year))s=r;else{for(const u of Xpe)St(t[u])&&(t[u]=Kpe[u]);const a=Jpe(t)||Ype(t);if(a)return Oe.invalid(a);const l=i.offset(r);[s,o]=eA(t,l,i)}return new Oe({ts:s,zone:i,loc:n,o})}function GZ(t,e,i){const n=St(i.round)?!0:i.round,r=(o,a)=>(o=qB(o,n||i.calendary?0:2,!0),e.loc.clone(i).relFormatter(i).format(o,a)),s=o=>i.calendary?e.hasSame(t,o)?0:e.startOf(o).diff(t.startOf(o),o).get(o):e.diff(t,o).get(o);if(i.unit)return r(s(i.unit),i.unit);for(const o of i.units){const a=s(o);if(Math.abs(a)>=1)return r(a,o)}return r(t>e?-0:0,i.units[i.units.length-1])}function qZ(t){let e={},i;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],i=Array.from(t).slice(0,t.length-1)):i=Array.from(t),[e,i]}class Oe{constructor(e){const i=e.zone||Pn.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new xc("invalid input"):null)||(i.isValid?null:RT(i));this.ts=St(e.ts)?Pn.now():e.ts;let r=null,s=null;if(!n)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(i))[r,s]=[e.old.c,e.old.o];else{const a=i.offset(this.ts);r=jZ(this.ts,a),n=Number.isNaN(r.year)?new xc("invalid input"):null,r=n?null:r,s=n?null:a}this._zone=i,this.loc=e.loc||Mi.create(),this.invalid=n,this.weekData=null,this.c=r,this.o=s,this.isLuxonDateTime=!0}static now(){return new Oe({})}static local(){const[e,i]=qZ(arguments),[n,r,s,o,a,l,u]=i;return HZ({year:n,month:r,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static utc(){const[e,i]=qZ(arguments),[n,r,s,o,a,l,u]=i;return e.zone=Gr.utcInstance,HZ({year:n,month:r,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static fromJSDate(e,i={}){const n=f6e(e)?e.valueOf():NaN;if(Number.isNaN(n))return Oe.invalid("invalid input");const r=_f(i.zone,Pn.defaultZone);return r.isValid?new Oe({ts:n,zone:r,loc:Mi.fromObject(i)}):Oe.invalid(RT(r))}static fromMillis(e,i={}){if(n0(e))return e<-zZ||e>zZ?Oe.invalid("Timestamp out of range"):new Oe({ts:e,zone:_f(i.zone,Pn.defaultZone),loc:Mi.fromObject(i)});throw new ol(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,i={}){if(n0(e))return new Oe({ts:e*1e3,zone:_f(i.zone,Pn.defaultZone),loc:Mi.fromObject(i)});throw new ol("fromSeconds requires a numerical input")}static fromObject(e,i={}){e=e||{};const n=_f(i.zone,Pn.defaultZone);if(!n.isValid)return Oe.invalid(RT(n));const r=Pn.now(),s=St(i.specificOffset)?n.offset(r):i.specificOffset,o=uO(e,BZ),a=!St(o.ordinal),l=!St(o.year),u=!St(o.month)||!St(o.day),h=l||u,p=o.weekYear||o.weekNumber,f=Mi.fromObject(i);if((h||a)&&p)throw new TS("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&a)throw new TS("Can't mix ordinal dates with month/day");const g=p||o.weekday&&!h;let v,b,_=jZ(r,s);g?(v=UUe,b=jUe,_=yV(_)):a?(v=BUe,b=VUe,_=WD(_)):(v=Xpe,b=Kpe);let w=!1;for(const D of v){const z=o[D];St(z)?w?o[D]=b[D]:o[D]=_[D]:w=!0}const S=g?NUe(o):a?zUe(o):Jpe(o),C=S||Ype(o);if(C)return Oe.invalid(C);const $=g?FZ(o):a?NZ(o):o,[M,P]=eA($,s,n),k=new Oe({ts:M,zone:n,o:P,loc:f});return o.weekday&&h&&e.weekday!==k.weekday?Oe.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${k.toISO()}`):k}static fromISO(e,i={}){const[n,r]=nUe(e);return lx(n,r,i,"ISO 8601",e)}static fromRFC2822(e,i={}){const[n,r]=rUe(e);return lx(n,r,i,"RFC 2822",e)}static fromHTTP(e,i={}){const[n,r]=sUe(e);return lx(n,r,i,"HTTP",i)}static fromFormat(e,i,n={}){if(St(e)||St(i))throw new ol("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:s=null}=n,o=Mi.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0}),[a,l,u,h]=FUe(o,e,i);return h?Oe.invalid(h):lx(a,l,n,`format ${i}`,e,u)}static fromString(e,i,n={}){return Oe.fromFormat(e,i,n)}static fromSQL(e,i={}){const[n,r]=hUe(e);return lx(n,r,i,"SQL",e)}static invalid(e,i=null){if(!e)throw new ol("need to specify a reason the DateTime is invalid");const n=e instanceof xc?e:new xc(e,i);if(Pn.throwOnInvalid)throw new GVe(n);return new Oe({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,i={}){const n=Upe(e,Mi.fromObject(i));return n?n.map(r=>r?r.val:null).join(""):null}static expandFormat(e,i={}){return jpe(ws.parseFormat(e),Mi.fromObject(i)).map(r=>r.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?YD(this).weekYear:NaN}get weekNumber(){return this.isValid?YD(this).weekNumber:NaN}get weekday(){return this.isValid?YD(this).weekday:NaN}get ordinal(){return this.isValid?WD(this.c).ordinal:NaN}get monthShort(){return this.isValid?$S.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?$S.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?$S.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?$S.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return e2(this.year)}get daysInMonth(){return lO(this.year,this.month)}get daysInYear(){return this.isValid?kE(this.year):NaN}get weeksInWeekYear(){return this.isValid?cO(this.weekYear):NaN}resolvedLocaleOptions(e={}){const{locale:i,numberingSystem:n,calendar:r}=ws.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:i,numberingSystem:n,outputCalendar:r}}toUTC(e=0,i={}){return this.setZone(Gr.instance(e),i)}toLocal(){return this.setZone(Pn.defaultZone)}setZone(e,{keepLocalTime:i=!1,keepCalendarTime:n=!1}={}){if(e=_f(e,Pn.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(i||n){const s=e.offset(this.ts),o=this.toObject();[r]=eA(o,s,e)}return ax(this,{ts:r,zone:e})}else return Oe.invalid(RT(e))}reconfigure({locale:e,numberingSystem:i,outputCalendar:n}={}){const r=this.loc.clone({locale:e,numberingSystem:i,outputCalendar:n});return ax(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const i=uO(e,BZ),n=!St(i.weekYear)||!St(i.weekNumber)||!St(i.weekday),r=!St(i.ordinal),s=!St(i.year),o=!St(i.month)||!St(i.day),a=s||o,l=i.weekYear||i.weekNumber;if((a||r)&&l)throw new TS("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&r)throw new TS("Can't mix ordinal dates with month/day");let u;n?u=FZ({...yV(this.c),...i}):St(i.ordinal)?(u={...this.toObject(),...i},St(i.day)&&(u.day=Math.min(lO(u.year,u.month),u.day))):u=NZ({...WD(this.c),...i});const[h,p]=eA(u,this.o,this.zone);return ax(this,{ts:h,o:p})}plus(e){if(!this.isValid)return this;const i=Tt.fromDurationLike(e);return ax(this,VZ(this,i))}minus(e){if(!this.isValid)return this;const i=Tt.fromDurationLike(e).negate();return ax(this,VZ(this,i))}startOf(e){if(!this.isValid)return this;const i={},n=Tt.normalizeUnit(e);switch(n){case"years":i.month=1;case"quarters":case"months":i.day=1;case"weeks":case"days":i.hour=0;case"hours":i.minute=0;case"minutes":i.second=0;case"seconds":i.millisecond=0;break}if(n==="weeks"&&(i.weekday=1),n==="quarters"){const r=Math.ceil(this.month/3);i.month=(r-1)*3+1}return this.set(i)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,i={}){return this.isValid?ws.create(this.loc.redefaultToEN(i)).formatDateTimeFromString(this,e):JD}toLocaleString(e=aO,i={}){return this.isValid?ws.create(this.loc.clone(i),e).formatDateTime(this):JD}toLocaleParts(e={}){return this.isValid?ws.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:i=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;const o=e==="extended";let a=ZD(this,o);return a+="T",a+=UZ(this,o,i,n,r,s),a}toISODate({format:e="extended"}={}){return this.isValid?ZD(this,e==="extended"):null}toISOWeekDate(){return LT(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:i=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(r?"T":"")+UZ(this,o==="extended",i,e,n,s):null}toRFC2822(){return LT(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return LT(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?ZD(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:i=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(i||e)&&(n&&(r+=" "),i?r+="z":e&&(r+="ZZ")),LT(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():JD}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const i={...this.c};return e.includeConfig&&(i.outputCalendar=this.outputCalendar,i.numberingSystem=this.loc.numberingSystem,i.locale=this.loc.locale),i}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,i="milliseconds",n={}){if(!this.isValid||!e.isValid)return Tt.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},s=m6e(i).map(Tt.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,u=xUe(a,l,s,r);return o?u.negate():u}diffNow(e="milliseconds",i={}){return this.diff(Oe.now(),e,i)}until(e){return this.isValid?Ji.fromDateTimes(this,e):this}hasSame(e,i){if(!this.isValid)return!1;const n=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(i)<=n&&n<=r.endOf(i)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const i=e.base||Oe.fromObject({},{zone:this.zone}),n=e.padding?this<i?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(r=e.unit,s=void 0),GZ(i,this.plus(n),{...e,numeric:"always",units:r,unit:s})}toRelativeCalendar(e={}){return this.isValid?GZ(e.base||Oe.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Oe.isDateTime))throw new ol("min requires all arguments be DateTimes");return AZ(e,i=>i.valueOf(),Math.min)}static max(...e){if(!e.every(Oe.isDateTime))throw new ol("max requires all arguments be DateTimes");return AZ(e,i=>i.valueOf(),Math.max)}static fromFormatExplain(e,i,n={}){const{locale:r=null,numberingSystem:s=null}=n,o=Mi.fromOpts({locale:r,numberingSystem:s,defaultToEN:!0});return Vpe(o,e,i)}static fromStringExplain(e,i,n={}){return Oe.fromFormatExplain(e,i,n)}static get DATE_SHORT(){return aO}static get DATE_MED(){return tpe}static get DATE_MED_WITH_WEEKDAY(){return JVe}static get DATE_FULL(){return ipe}static get DATE_HUGE(){return npe}static get TIME_SIMPLE(){return rpe}static get TIME_WITH_SECONDS(){return spe}static get TIME_WITH_SHORT_OFFSET(){return ope}static get TIME_WITH_LONG_OFFSET(){return ape}static get TIME_24_SIMPLE(){return lpe}static get TIME_24_WITH_SECONDS(){return cpe}static get TIME_24_WITH_SHORT_OFFSET(){return upe}static get TIME_24_WITH_LONG_OFFSET(){return dpe}static get DATETIME_SHORT(){return hpe}static get DATETIME_SHORT_WITH_SECONDS(){return ppe}static get DATETIME_MED(){return fpe}static get DATETIME_MED_WITH_SECONDS(){return mpe}static get DATETIME_MED_WITH_WEEKDAY(){return YVe}static get DATETIME_FULL(){return gpe}static get DATETIME_FULL_WITH_SECONDS(){return ype}static get DATETIME_HUGE(){return vpe}static get DATETIME_HUGE_WITH_SECONDS(){return bpe}}function cx(t){if(Oe.isDateTime(t))return t;if(t&&t.valueOf&&n0(t.valueOf()))return Oe.fromJSDate(t);if(t&&typeof t=="object")return Oe.fromObject(t);throw new ol(`Unknown datetime argument: ${t}, of type ${typeof t}`)}function HUe(t,e="system"){if(!t||!wZ.has(t.timeZone))return e;const i=wZ.get(t.timeZone);return qUe(t.timeZone)||t.respectsDaylightSaving?i:GUe(i)}function GUe(t){const e=Oe.local().setZone(t),i=Math.min(e.set({month:1,day:1}).offset,e.set({month:5}).offset);return i===0?"Etc/UTC":`Etc/GMT${Gr.instance(-i).formatOffset(0,"narrow")}`}function qUe(t){return t.startsWith("UTC")}let Pp=class extends _t(Y){constructor(e){super(e),this.legacy=null,this.timeZone="system"}readLegacy(e,i){const{timeZone:n,respectsDaylightSaving:r}=i;return{timeZone:n,respectsDaylightSaving:r}}readTimeZone(e,i){return"timeZoneIANA"in i?i.timeZoneIANA:HUe(i)}writeTimeZone(e,i){i.timeZoneIANA=e}equals(e){return!(U(e)||U(this.timeZone)||U(e.timeZone))&&this.timeZone===e.timeZone}};c([d()],Pp.prototype,"legacy",void 0),c([de("legacy",["timeZone"])],Pp.prototype,"readLegacy",null),c([d({type:String,nonNullable:!0})],Pp.prototype,"timeZone",void 0),c([de("timeZone",["timeZone","timeZoneIANA","respectsDaylightSaving"])],Pp.prototype,"readTimeZone",null),c([fe("timeZone")],Pp.prototype,"writeTimeZone",null),Pp=c([O("esri.time.TimeReference")],Pp);const _w=Pp;let Md=class extends _t(Y){constructor(e){super(e),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.dateFieldsTimeReference=null}};c([d()],Md.prototype,"creatorField",void 0),c([d()],Md.prototype,"creationDateField",void 0),c([d()],Md.prototype,"editorField",void 0),c([d()],Md.prototype,"editDateField",void 0),c([d()],Md.prototype,"realm",void 0),c([d({type:_w})],Md.prototype,"dateFieldsTimeReference",void 0),Md=c([O("esri.layers.support.EditFieldsInfo")],Md);const WUe=Md;let Eu=class extends _t(Y){constructor(e){super(e)}};c([d({constructOnly:!0,json:{write:!0}})],Eu.prototype,"name",void 0),c([d({constructOnly:!0,json:{write:!0}})],Eu.prototype,"fields",void 0),c([d({constructOnly:!0,json:{write:!0}})],Eu.prototype,"isAscending",void 0),c([d({constructOnly:!0,json:{write:!0}})],Eu.prototype,"indexType",void 0),c([d({constructOnly:!0,json:{write:!0}})],Eu.prototype,"isUnique",void 0),c([d({constructOnly:!0,json:{write:!0}})],Eu.prototype,"description",void 0),Eu=c([O("esri.layers.support.FeatureIndex")],Eu);const vV=new Fe({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});async function JUe(t,e,i,n){const r=await Am(t);if(await XB(t,e,n),!r.addAttachment)throw new N(n,"Layer source does not support addAttachment capability");return r.addAttachment(e,i)}function XB(t,e,i){const{attributes:n}=e,{objectIdField:r}=t;return t.get("capabilities.data.supportsAttachment")?e?n?r&&n[r]?Promise.resolve():Promise.reject(new N(i,`feature is missing the identifying attribute ${r}`)):Promise.reject(new N(i,"'attributes' are required on a feature to query attachments")):Promise.reject(new N(i,"A feature is required to add/delete/update attachments")):Promise.reject(new N(i,"this layer doesn't support attachments"))}async function YUe(t,e,i,n,r){const s=await Am(t);if(await XB(t,e,r),!s.updateAttachment)throw new N(r,"Layer source does not support updateAttachment capability");return s.updateAttachment(e,i,n)}async function ZUe(t,e,i){const n=await q(()=>import("./editingSupport-c2cc2bb0.js"),["assets/editingSupport-c2cc2bb0.js","assets/assetEditingSupport-2cebf928.js"]),r=await t.load();return n.applyEdits(r,r.source,e,i)}async function KUe(t,e,i,n){const r=await Am(t);if(await XB(t,e,n),!r.deleteAttachments)throw new N(n,"Layer source does not support deleteAttachments capability");return r.deleteAttachments(e,i)}async function XUe(t,e,i){const n=(await t.load({signal:e==null?void 0:e.signal})).source;if(!n.fetchRecomputedExtents)throw new N(i,"Layer source does not support fetchUpdates capability");return n.fetchRecomputedExtents(e)}async function QUe(t,e,i,n){var g,v;e=ZM.from(e),await t.load();const r=t.source,s=t.capabilities;if(!((g=s==null?void 0:s.data)!=null&&g.supportsAttachment))throw new N(n,"this layer doesn't support attachments");const{attachmentTypes:o,objectIds:a,globalIds:l,num:u,size:h,start:p,where:f}=e;if(!((v=s==null?void 0:s.operations)!=null&&v.supportsQueryAttachments)&&((o==null?void 0:o.length)>0||(l==null?void 0:l.length)>0||(h==null?void 0:h.length)>0||u||p||f))throw new N(n,"when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",e);if(!(a!=null&&a.length||l!=null&&l.length||f))throw new N(n,"'objectIds', 'globalIds', or 'where' are required to perform attachment query",e);if(!r.queryAttachments)throw new N(n,"Layer source does not support queryAttachments capability",e);return r.queryAttachments(e)}async function e8e(t,e,i,n){const r=await Am(t);if(!r.queryObjectIds)throw new N(n,"Layer source does not support queryObjectIds capability");return r.queryObjectIds(pl.from(e)??t.createQuery(),i)}async function t8e(t,e,i,n){const r=await Am(t);if(!r.queryFeatureCount)throw new N(n,"Layer source does not support queryFeatureCount capability");return r.queryFeatureCount(pl.from(e)??t.createQuery(),i)}async function i8e(t,e,i,n){const r=await Am(t);if(!r.queryExtent)throw new N(n,"Layer source does not support queryExtent capability");return r.queryExtent(pl.from(e)??t.createQuery(),i)}async function n8e(t,e,i,n){const r=await Am(t);if(!r.queryRelatedFeatures)throw new N(n,"Layer source does not support queryRelatedFeatures capability");return r.queryRelatedFeatures(gw.from(e),i)}async function r8e(t,e,i,n){const r=await Am(t);if(!r.queryRelatedFeaturesCount)throw new N(n,"Layer source does not support queryRelatedFeaturesCount capability");return r.queryRelatedFeaturesCount(gw.from(e),i)}async function s8e(t){const e=t.source;if(e!=null&&e.refresh)try{const{dataChanged:i,updates:n}=await e.refresh();if(A(n)&&(t.sourceJSON={...t.sourceJSON,...n},t.read(n,{origin:"service",url:t.parsedUrl})),i)return!0}catch{}if(t.definitionExpression)try{return(await Xje(t.definitionExpression,t.fieldsIndex)).hasDateFunctions}catch{}return!1}function o8e(t){const e=new pl,i=t.get("capabilities.data"),n=t.get("capabilities.query");e.historicMoment=t.historicMoment,e.gdbVersion=t.gdbVersion,e.returnGeometry=!0,n&&(e.compactGeometryEnabled=n.supportsCompactGeometry,e.defaultSpatialReferenceEnabled=n.supportsDefaultSpatialReference),i&&(i.supportsZ&&t.returnZ!=null&&(e.returnZ=t.returnZ),i.supportsM&&t.returnM!=null&&(e.returnM=t.returnM)),e.outFields=["*"];const{timeOffset:r,timeExtent:s}=t;return e.timeExtent=r!=null&&s!=null?s.offset(-r.value,r.unit):s||null,e.multipatchOption=t.geometryType==="multipatch"?"xyFootprint":null,e}function Qpe(t){const{globalIdField:e,fields:i}=t;if(e)return e;if(i){for(const n of i)if(n.type==="esriFieldTypeGlobalID")return n.name}}function efe(t){const{objectIdField:e,fields:i}=t;if(e)return e;if(i){for(const n of i)if(n.type==="esriFieldTypeOID")return n.name}}function a8e(t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}async function Am(t){return(await t.load()).source}async function l8e(t,e){if(!Ne||Ne.findCredential(t))return;let i;try{const n=await Vue(t,e);n&&(i=await Ne.checkSignInStatus(`${n}/sharing`))}catch{}if(i)try{const n=A(e)?e.signal:null;await Ne.getCredential(t,{signal:n})}catch{}}async function c8e(t,e){var r;const i=(r=t.parsedUrl)==null?void 0:r.path;if(!i)return;const n=t.editFieldsInfo;(t.userHasUpdateItemPrivileges||t.userHasFullEditingPrivileges&&t.capabilities.operations.supportsEditing||n!=null&&n.creatorField||n!=null&&n.editorField)&&await l8e(i,e)}function u8e(t){var e;return!((e=t.sourceJSON)!=null&&e.isMultiServicesView)&&(t.userHasUpdateItemPrivileges||t.editingEnabled)}let sb=class extends _t(Y){constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};c([d({type:String,json:{read:{source:"shapeAreaFieldName"}}})],sb.prototype,"shapeAreaField",void 0),c([d({type:String,json:{read:{source:"shapeLengthFieldName"}}})],sb.prototype,"shapeLengthField",void 0),c([d({type:String,json:{read:t=>YTe.read(t)||ZTe.read(t)}})],sb.prototype,"units",void 0),sb=c([O("esri.layers.support.GeometryFieldsInfo")],sb);const d8e=sb;var bV;let ob=bV=class extends Y{constructor(t){super(t),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new we}clone(){return new bV({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};c([d({type:String,json:{write:!0}})],ob.prototype,"floorField",void 0),c([d({json:{read:!1,write:!1}})],ob.prototype,"viewAllMode",void 0),c([d({json:{read:!1,write:!1}})],ob.prototype,"viewAllLevelIds",void 0),ob=bV=c([O("esri.layers.support.LayerFloorInfo")],ob);const h8e=ob,WZ=new Fe({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),JZ=new Fe({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let Ya=class extends _t(Y){constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};c([d({json:{read:WZ.read,write:WZ.write}})],Ya.prototype,"cardinality",void 0),c([d({json:{read:!0,write:!0}})],Ya.prototype,"composite",void 0),c([d({json:{read:!0,write:!0}})],Ya.prototype,"id",void 0),c([d({json:{read:!0,write:!0}})],Ya.prototype,"keyField",void 0),c([d({json:{read:!0,write:!0}})],Ya.prototype,"keyFieldInRelationshipTable",void 0),c([d({json:{read:!0,write:!0}})],Ya.prototype,"name",void 0),c([d({json:{read:!0,write:!0}})],Ya.prototype,"relatedTableId",void 0),c([d({json:{read:!0,write:!0}})],Ya.prototype,"relationshipTableId",void 0),c([d({json:{read:JZ.read,write:JZ.write}})],Ya.prototype,"role",void 0),Ya=c([O("esri.layers.support.Relationship")],Ya);const p8e=Ya,f8e={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function We(t,e,i){return!!(t&&t.hasOwnProperty(e)?t[e]:i)}function DT(t,e,i){return t&&t.hasOwnProperty(e)?t[e]:i}function m8e(t){var i;const e=(i=t==null?void 0:t.supportedSpatialAggregationStatistics)==null?void 0:i.map(n=>n.toLowerCase());return{envelope:!!(e!=null&&e.includes("envelopeaggregate")),centroid:!!(e!=null&&e.includes("centroidaggregate")),convexHull:!!(e!=null&&e.includes("convexhullaggregate"))}}function n2(t,e){var n;const i=(n=t==null?void 0:t.supportedOperationsWithCacheHint)==null?void 0:n.map(r=>r.toLowerCase());return!!(i!=null&&i.includes(e.toLowerCase()))}function tfe(t,e){return{analytics:g8e(t),attachment:y8e(t),data:v8e(t),metadata:b8e(t),operations:_8e(t.capabilities,t,e),query:w8e(t,e),queryRelated:x8e(t),queryTopFeatures:S8e(t),editing:E8e(t)}}function g8e(t){return{supportsCacheHint:n2(t.advancedQueryCapabilities,"queryAnalytics")}}function y8e(t){const e=t.attachmentProperties,i={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:n2(t.advancedQueryCapabilities,"queryAttachments"),supportsResize:We(t,"supportsAttachmentsResizing",!1)};return e&&Array.isArray(e)&&e.forEach(n=>{const r=f8e[n.name];r&&(i[r]=!!n.isEnabled)}),i}function v8e(t){return{isVersioned:We(t,"isDataVersioned",!1),supportsAttachment:We(t,"hasAttachments",!1),supportsM:We(t,"hasM",!1),supportsZ:We(t,"hasZ",!1)}}function b8e(t){return{supportsAdvancedFieldProperties:We(t,"supportsFieldDescriptionProperty",!1)}}function _8e(t,e,i){const n=t?t.toLowerCase().split(",").map(f=>f.trim()):[],r=i?dm(i):null,s=n.includes(A(r)&&r.serverType==="MapServer"?"data":"query"),o=n.includes("editing")&&!e.datesInUnknownTimezone;let a=o&&n.includes("create"),l=o&&n.includes("delete"),u=o&&n.includes("update");const h=n.includes("changetracking"),p=e.advancedQueryCapabilities;return o&&!(a||l||u)&&(a=l=u=!0),{supportsCalculate:We(e,"supportsCalculate",!1),supportsTruncate:We(e,"supportsTruncate",!1),supportsValidateSql:We(e,"supportsValidateSql",!1),supportsAdd:a,supportsDelete:l,supportsEditing:o,supportsChangeTracking:h,supportsQuery:s,supportsQueryAnalytics:We(p,"supportsQueryAnalytic",!1),supportsQueryAttachments:We(p,"supportsQueryAttachments",!1),supportsQueryTopFeatures:We(p,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:We(e,"supportsAttachmentsResizing",!1),supportsSync:n.includes("sync"),supportsUpdate:u,supportsExceedsLimitStatistics:We(e,"supportsExceedsLimitStatistics",!1)}}function w8e(t,e){const i=t.advancedQueryCapabilities,n=t.ownershipBasedAccessControlForFeatures,r=t.archivingInfo,s=t.currentVersion,o=e==null?void 0:e.includes("MapServer"),a=!o||s>=ee("mapserver-pbf-version-support"),l=qhe(e),u=new Set((t.supportedQueryFormats??"").split(",").map(h=>h.toLowerCase().trim()));return{supportsStatistics:We(i,"supportsStatistics",t.supportsStatistics),supportsPercentileStatistics:We(i,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:We(i,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:m8e(i),supportsCentroid:We(i,"supportsReturningGeometryCentroid",!1),supportsDistance:We(i,"supportsQueryWithDistance",!1),supportsDistinct:We(i,"supportsDistinct",t.supportsAdvancedQueries),supportsExtent:We(i,"supportsReturningQueryExtent",!1),supportsGeometryProperties:We(i,"supportsReturningGeometryProperties",!1),supportsHavingClause:We(i,"supportsHavingClause",!1),supportsOrderBy:We(i,"supportsOrderBy",t.supportsAdvancedQueries),supportsPagination:We(i,"supportsPagination",!1),supportsQuantization:We(t,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:We(t,"supportsQuantizationEditMode",!1),supportsQueryGeometry:We(t,"supportsReturningQueryGeometry",!1),supportsResultType:We(i,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:We(i,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:We(i,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:We(t,"useStandardizedQueries",!1),supportsTopFeaturesQuery:We(i,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:We(n,"allowOthersToQuery",!0),supportsHistoricMoment:We(r,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:a&&u.has("pbf"),supportsDisjointSpatialRelationship:We(i,"supportsDisjointSpatialRel",!1),supportsCacheHint:We(i,"supportsQueryWithCacheHint",!1)||n2(i,"query"),supportsDefaultSpatialReference:We(i,"supportsDefaultSR",!1),supportsCompactGeometry:l,supportsFullTextSearch:We(i,"supportsFullTextSearch",!1),maxRecordCountFactor:DT(t,"maxRecordCountFactor",void 0),maxRecordCount:DT(t,"maxRecordCount",void 0),standardMaxRecordCount:DT(t,"standardMaxRecordCount",void 0),tileMaxRecordCount:DT(t,"tileMaxRecordCount",void 0)}}function x8e(t){const e=t.advancedQueryCapabilities,i=We(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:We(e,"supportsQueryRelatedPagination",!1),supportsCount:i,supportsOrderBy:i,supportsCacheHint:n2(e,"queryRelated")}}function S8e(t){return{supportsCacheHint:n2(t.advancedQueryCapabilities,"queryTopFilter")}}function E8e(t){const e=t.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:We(t,"allowGeometryUpdates",!0),supportsGlobalId:We(t,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:We(t,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:We(t,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:We(t,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:We(t,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:We(e,"allowAnonymousToDelete",!0),supportsDeleteByOthers:We(e,"allowOthersToDelete",!0),supportsUpdateByAnonymous:We(e,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:We(e,"allowOthersToUpdate",!0)}}const C8e=t=>{let e=class extends t{constructor(){super(...arguments),this.capabilities=null,this.copyright=null,this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.isTable=!1,this.layerId=void 0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.preferredTimeReference=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.spatialReference=Ge.WGS84,this.subtypeField=null,this.trackIdField=null,this.indexes=new(we.ofType(Eu)),this.version=void 0}readCapabilitiesFromService(i,n){return tfe(n,this.url)}get effectiveCapabilities(){var o;const i=this.capabilities;if(!i)return null;const n=G(i),{operations:r,editing:s}=n;return(o=this.sourceJSON)!=null&&o.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(r.supportsQuery=!0),n):this.userHasUpdateItemPrivileges?(r.supportsAdd=r.supportsDelete=r.supportsEditing=r.supportsQuery=r.supportsUpdate=s.supportsDeleteByOthers=s.supportsGeometryUpdate=s.supportsUpdateByOthers=!0,n):(this.userHasFullEditingPrivileges&&r.supportsEditing&&(r.supportsAdd=r.supportsDelete=r.supportsUpdate=s.supportsGeometryUpdate=!0),n)}readEditingInfo(i,n){const{editingInfo:r}=n;return r?{lastEditDate:r.lastEditDate!=null?new Date(r.lastEditDate):null}:null}readIsTableFromService(i,n){return n.type==="Table"}readMinScale(i,n){return n.effectiveMinScale||i||0}readMaxScale(i,n){return n.effectiveMaxScale||i||0}readGlobalIdFieldFromService(i,n){return Qpe(n)}readObjectIdFieldFromService(i,n){return efe(n)}readServiceDefinitionExpression(i,n){return n.definitionQuery||n.definitionExpression}set url(i){const n=xVe({layer:this,url:i,nonStandardUrlAllowed:!0,logger:se.getLogger(this.declaredClass)});this._set("url",n.url),n.layerId!=null&&this._set("layerId",n.layerId)}writeUrl(i,n,r,s){SVe(this,i,null,n,s)}readVersion(i,n){return a8e(n)}};return c([d({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],e.prototype,"capabilities",void 0),c([de("service","capabilities")],e.prototype,"readCapabilitiesFromService",null),c([d({readOnly:!0})],e.prototype,"effectiveCapabilities",null),c([d({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],e.prototype,"copyright",void 0),c([d({type:_w})],e.prototype,"dateFieldsTimeReference",void 0),c([d({type:Boolean})],e.prototype,"datesInUnknownTimezone",void 0),c([d({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],e.prototype,"displayField",void 0),c([d({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],e.prototype,"definitionExpression",void 0),c([d({readOnly:!0,type:WUe})],e.prototype,"editFieldsInfo",void 0),c([d({readOnly:!0})],e.prototype,"editingInfo",void 0),c([de("editingInfo")],e.prototype,"readEditingInfo",null),c([d((()=>{const i=G(jVe),n=i.json.origins;return n["web-map"]={read:!1,write:!1},n["portal-item"]={read:!1,write:!1},i})())],e.prototype,"elevationInfo",void 0),c([d({type:h8e,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],e.prototype,"floorInfo",void 0),c([d({type:Dt,json:{origins:{service:{read:{source:"extent"}}}}})],e.prototype,"fullExtent",void 0),c([d()],e.prototype,"gdbVersion",void 0),c([d({readOnly:!0,type:d8e,json:{read:{source:"geometryProperties"}}})],e.prototype,"geometryFieldsInfo",void 0),c([d({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:vV.read}}}})],e.prototype,"geometryType",void 0),c([d({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasM",void 0),c([d({type:Boolean,json:{origins:{service:{read:!0}}}})],e.prototype,"hasZ",void 0),c([d({readOnly:!0,type:QI})],e.prototype,"heightModelInfo",void 0),c([d({type:Date})],e.prototype,"historicMoment",void 0),c([d({readOnly:!0})],e.prototype,"isTable",void 0),c([de("service","isTable",["type"])],e.prototype,"readIsTableFromService",null),c([d({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],e.prototype,"layerId",void 0),c([d(BVe)],e.prototype,"minScale",void 0),c([de("service","minScale",["minScale","effectiveMinScale"])],e.prototype,"readMinScale",null),c([d(HVe)],e.prototype,"maxScale",void 0),c([de("service","maxScale",["maxScale","effectiveMaxScale"])],e.prototype,"readMaxScale",null),c([d({type:String})],e.prototype,"globalIdField",void 0),c([de("service","globalIdField",["globalIdField","fields"])],e.prototype,"readGlobalIdFieldFromService",null),c([d({type:String})],e.prototype,"objectIdField",void 0),c([de("service","objectIdField",["objectIdField","fields"])],e.prototype,"readObjectIdFieldFromService",null),c([d({type:_w})],e.prototype,"preferredTimeReference",void 0),c([d({type:[p8e],readOnly:!0})],e.prototype,"relationships",void 0),c([d()],e.prototype,"sourceJSON",void 0),c([d({type:Boolean})],e.prototype,"returnM",void 0),c([d({type:Boolean})],e.prototype,"returnZ",void 0),c([d({readOnly:!0})],e.prototype,"serviceDefinitionExpression",void 0),c([de("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],e.prototype,"readServiceDefinitionExpression",null),c([d({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],e.prototype,"serviceItemId",void 0),c([d({type:Ge,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],e.prototype,"spatialReference",void 0),c([d({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],e.prototype,"subtypeField",void 0),c([d({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],e.prototype,"trackIdField",void 0),c([d({readOnly:!0,json:{write:!1}})],e.prototype,"serverGens",void 0),c([d({type:we.ofType(Eu),readOnly:!0})],e.prototype,"indexes",void 0),c([d(NVe)],e.prototype,"url",null),c([fe("url")],e.prototype,"writeUrl",null),c([d({json:{origins:{service:{read:!0}},read:!1}})],e.prototype,"version",void 0),c([de("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],e.prototype,"readVersion",null),e=c([O("esri.layers.mixins.FeatureLayerBase")],e),e};let ab=class extends _t(Y){constructor(e){super(e),this.expression=null,this.title=null,this.returnType=null}};c([d({type:String,json:{write:!0}})],ab.prototype,"expression",void 0),c([d({type:String,json:{write:!0}})],ab.prototype,"title",void 0),c([d({type:String,json:{write:!0}})],ab.prototype,"returnType",void 0),ab=c([O("esri.layers.support.ExpressionInfo")],ab);const QB=ab;var _V;let Od=_V=class extends Y{constructor(t){super(t),this.isAutoGenerated=!1,this.name=null,this.alias=null,this.onStatisticField=null,this.onStatisticExpression=null,this.statisticType=null}clone(){return new _V({name:this.name,alias:this.alias,isAutoGenerated:this.isAutoGenerated,onStatisticExpression:G(this.onStatisticExpression),onStatisticField:this.onStatisticField,statisticType:this.statisticType})}};c([d({type:Boolean,json:{write:!0}})],Od.prototype,"isAutoGenerated",void 0),c([d({type:String,json:{write:!0}})],Od.prototype,"name",void 0),c([d({type:String,json:{write:!0}})],Od.prototype,"alias",void 0),c([d({type:String,json:{write:!0}})],Od.prototype,"onStatisticField",void 0),c([d({type:QB,json:{write:!0}})],Od.prototype,"onStatisticExpression",void 0),c([d({type:String,json:{write:!0}})],Od.prototype,"statisticType",void 0),Od=_V=c([O("esri.layers.support.AggregateField")],Od);const k0=Od;let Jf=class extends Y{constructor(){super(...arguments),this.type=null}};c([d({type:["selection","cluster","binning"],readOnly:!0,json:{read:!1,write:!0}})],Jf.prototype,"type",void 0),Jf=c([O("esri.layers.support.FeatureReduction")],Jf);const e7="__begin__",t7="__end__",I8e=new RegExp(e7,"ig"),T8e=new RegExp(t7,"ig"),YZ=new RegExp("^"+e7,"i"),ZZ=new RegExp(t7+"$","i"),dO='"',k8e=dO+" + ",$8e=" + "+dO;function A8e(t){return t.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function M8e(t){return t.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function i7(t){const e={expression:"",type:"none"};return t.labelExpressionInfo?t.labelExpressionInfo.value?(e.expression=t.labelExpressionInfo.value,e.type="conventional"):t.labelExpressionInfo.expression&&(e.expression=t.labelExpressionInfo.expression,e.type="arcade"):t.labelExpression!=null&&(e.expression=A8e(t.labelExpression),e.type="conventional"),e}function O8e(t){const e=i7(t);if(!e)return null;switch(e.type){case"conventional":return wV(e.expression);case"arcade":return e.expression}return null}function P8e(t){const e=i7(t);if(!e)return null;switch(e.type){case"conventional":return L8e(e.expression);case"arcade":return ife(e.expression)}return null}function wV(t){let e;return t?(e=Fu(t,i=>e7+'$feature["'+i+'"]'+t7),e=YZ.test(e)?e.replace(YZ,""):dO+e,e=ZZ.test(e)?e.replace(ZZ,""):e+dO,e=e.replace(I8e,k8e).replace(T8e,$8e)):e='""',e}const R8e=/^\s*\{([^}]+)\}\s*$/i;function L8e(t){const e=t==null?void 0:t.match(R8e);return e&&e[1].trim()||null}const D8e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,F8e=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,N8e=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function ife(t){if(!t)return null;let e=D8e.exec(t)||F8e.exec(t);return e?e[1]||e[3]:(e=N8e.exec(t),e?e[2]:null)}var xV;let Rp=xV=class extends Y{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(t,e){return e.value?wV(e.value):t}writeExpression(t,e,i){this.value!=null&&(t=wV(this.value)),t!=null&&(e[i]=t)}clone(){return new xV({expression:this.expression,title:this.title,value:this.value})}};c([d({type:String,json:{write:{writerEnsuresNonNull:!0}}})],Rp.prototype,"expression",void 0),c([de("expression",["expression","value"])],Rp.prototype,"readExpression",null),c([fe("expression")],Rp.prototype,"writeExpression",null),c([d({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],Rp.prototype,"title",void 0),c([d({json:{read:!1,write:!1}})],Rp.prototype,"value",void 0),Rp=xV=c([O("esri.layers.support.LabelExpressionInfo")],Rp);const nfe=Rp,rfe=[252,146,31,255],r_t=[153,153,153,255],z8e={type:"esriSMS",style:"esriSMSCircle",size:6,color:rfe,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},j8e={type:"esriSLS",style:"esriSLSSolid",width:.75,color:rfe},V8e={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},U8e={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},B8e={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},H8e={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},G8e={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null},q8e=$c.fromJSON(z8e),W8e=Is.fromJSON(j8e),J8e=Lc.fromJSON(V8e),Y8e=N0.fromJSON(U8e);function s_t(t){if(U(t))return null;switch(t.type){case"mesh":return null;case"point":case"multipoint":return q8e;case"polyline":return W8e;case"polygon":case"extent":return J8e}return null}const o_t=$c.fromJSON(B8e),a_t=Is.fromJSON(H8e),l_t=Lc.fromJSON(G8e);var SV;const FT=new Fe({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function NT(t,e,i){return{enabled:!jue(i==null?void 0:i.layer)}}function sfe(t){var e;return!t||t.origin!=="service"&&((e=t.layer)==null?void 0:e.type)!=="map-image"}function Z8e(t){return(t==null?void 0:t.type)==="map-image"}function ofe(t){var e,i;return!!Z8e(t)&&!!((i=(e=t.capabilities)==null?void 0:e.exportMap)!=null&&i.supportsArcadeExpressionForLabeling)}function K8e(t){return sfe(t)||ofe(t==null?void 0:t.layer)}let sn=SV=class extends Y{static evaluateWhere(t,e){const i=(n,r,s)=>{switch(r){case"=":return n==s;case"<>":return n!=s;case">":return n>s;case">=":return n>=s;case"<":return n<s;case"<=":return n<=s}return!1};try{if(t==null)return!0;const n=t.split(" ");if(n.length===3)return i(e[n[0]],n[1],n[2]);if(n.length===7){const r=i(e[n[0]],n[1],n[2]),s=n[3],o=i(e[n[4]],n[5],n[6]);switch(s){case"AND":return r&&o;case"OR":return r||o}}return!1}catch{console.log("Error.: can't parse = "+t)}}constructor(t){super(t),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=Y8e,this.useCodedValues=void 0,this.where=null}readLabelExpression(t,e){const i=e.labelExpressionInfo;if(!i||!i.value&&!i.expression)return t}writeLabelExpression(t,e,i){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)t=M8e(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const n=ife(this.labelExpressionInfo.expression);n&&(t="["+n+"]")}}t!=null&&(e[i]=t)}writeLabelExpressionInfo(t,e,i,n){if(t==null&&this.labelExpression!=null&&sfe(n))t=new nfe({expression:this.getLabelExpressionArcade()});else if(!t)return;const r=t.toJSON(n);r.expression&&(e[i]=r)}writeMaxScale(t,e){(t||this.minScale)&&(e.maxScale=t)}writeMinScale(t,e){(t||this.maxScale)&&(e.minScale=t)}getLabelExpression(){return i7(this)}getLabelExpressionArcade(){return O8e(this)}getLabelExpressionSingleField(){return P8e(this)}hash(){return JSON.stringify(this)}clone(){return new SV({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:G(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:G(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};c([d({type:String,json:{write:!0}})],sn.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1},"portal-item":{default:!1,write:{overridePolicy:NT}}}}})],sn.prototype,"allowOverrun",void 0),c([d({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1},"portal-item":{default:"static",write:{overridePolicy:NT}}}}})],sn.prototype,"deconflictionStrategy",void 0),c([d({type:String,json:{write:{overridePolicy(t,e,i){return this.labelExpressionInfo&&(i==null?void 0:i.origin)==="service"&&ofe(i.layer)?{enabled:!1}:{allowNull:!0}}}}})],sn.prototype,"labelExpression",void 0),c([de("labelExpression")],sn.prototype,"readLabelExpression",null),c([fe("labelExpression")],sn.prototype,"writeLabelExpression",null),c([d({type:nfe,json:{write:{overridePolicy:(t,e,i)=>K8e(i)?{allowNull:!0}:{enabled:!1}}}})],sn.prototype,"labelExpressionInfo",void 0),c([fe("labelExpressionInfo")],sn.prototype,"writeLabelExpressionInfo",null),c([d({type:FT.apiValues,json:{type:FT.jsonValues,read:FT.read,write:FT.write}})],sn.prototype,"labelPlacement",void 0),c([d({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],sn.prototype,"labelPosition",void 0),c([d({type:Number})],sn.prototype,"maxScale",void 0),c([fe("maxScale")],sn.prototype,"writeMaxScale",null),c([d({type:Number})],sn.prototype,"minScale",void 0),c([fe("minScale")],sn.prototype,"writeMinScale",null),c([d({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:NT}}}}})],sn.prototype,"repeatLabel",void 0),c([d({type:Number,cast:vt,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:{overridePolicy:NT}}}}})],sn.prototype,"repeatLabelDistance",void 0),c([d({types:mPe,json:{origins:{"web-scene":{types:gPe,write:YY,default:null}},write:YY,default:null}})],sn.prototype,"symbol",void 0),c([d({type:Boolean,json:{write:!0}})],sn.prototype,"useCodedValues",void 0),c([d({type:String,json:{write:!0}})],sn.prototype,"where",void 0),sn=SV=c([O("esri.layers.support.LabelClass")],sn);const OR=sn;var EV;const KD=bm({types:QP}),X8e="esri.layers.support.FeatureReductionBinning";let Ds=EV=class extends Jf{constructor(t){super(t),this.type="binning",this.binType="geohash",this.fixedBinLevel=3,this.labelingInfo=null,this.labelsVisible=!0,this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.fields=[],this.renderer=null}writeFields(t,e,i){const n=t.filter(r=>r.statisticType!=="avg_angle").map(r=>r.toJSON());rr(i,n,e)}readRenderer(t,e,i){var r;const n=(r=e.drawingInfo)==null?void 0:r.renderer;return n?GC(n,e,i)??void 0:e.defaultSymbol?e.types&&e.types.length?new XI({defaultSymbol:KD(e.defaultSymbol,e,i),field:e.typeIdField,uniqueValueInfos:e.types.map(s=>({id:s.id,symbol:KD(s.symbol,s,i)}))}):new yw({symbol:KD(e.defaultSymbol,e,i)}):null}clone(){return new EV({fields:G(this.fields),fixedBinLevel:this.fixedBinLevel,labelingInfo:G(this.labelingInfo),labelsVisible:this.labelsVisible,maxScale:this.maxScale,popupEnabled:this.popupEnabled,popupTemplate:G(this.popupTemplate),renderer:G(this.renderer)})}};c([Ce({binning:"binning"})],Ds.prototype,"type",void 0),c([Ce({geohash:"geohash"})],Ds.prototype,"binType",void 0),c([d({type:Number,range:{min:1,max:9},json:{write:!0}})],Ds.prototype,"fixedBinLevel",void 0),c([d({type:[OR],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Ds.prototype,"labelingInfo",void 0),c([d(HB)],Ds.prototype,"labelsVisible",void 0),c([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Ds.prototype,"maxScale",void 0),c([d(BB)],Ds.prototype,"popupEnabled",void 0),c([d({type:Cm,json:{name:"popupInfo",write:!0}})],Ds.prototype,"popupTemplate",void 0),c([d({type:[k0],json:{write:!0}})],Ds.prototype,"fields",void 0),c([fe("fields")],Ds.prototype,"writeFields",null),c([d({types:IR,json:{write:{target:"drawingInfo.renderer"}}})],Ds.prototype,"renderer",void 0),c([de("renderer",["drawingInfo.renderer"])],Ds.prototype,"readRenderer",null),Ds=EV=c([O(X8e)],Ds);const afe=Ds;var CV;const XD=bm({types:QP}),Q8e="esri.layers.support.FeatureReductionCluster";function KZ(t){var e;return t.type==="simple"&&!((e=t.visualVariables)!=null&&e.length)}let Mn=CV=class extends Y{constructor(t){super(t),this.type="cluster",this.clusterRadius=vt("80px"),this.clusterMinSize=vt("12px"),this.clusterMaxSize=vt("50px"),this.maxScale=0,this.popupEnabled=!0,this.popupTemplate=null,this.renderer=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}readRenderer(t,e,i){var r,s;const n=(r=e.drawingInfo)==null?void 0:r.renderer;return(s=n==null?void 0:n.authoringInfo)!=null&&s.isAutoGenerated?null:n?KZ(n)?null:GC(n,e,i)??void 0:e.defaultSymbol?e.types&&e.types.length?new XI({defaultSymbol:XD(e.defaultSymbol,e,i),field:e.typeIdField,uniqueValueInfos:e.types.map(o=>({id:o.id,symbol:XD(o.symbol,o,i)}))}):new yw({symbol:XD(e.defaultSymbol,e,i)}):null}readSymbol(t,e,i){var r,s,o;const n=(r=e.drawingInfo)==null?void 0:r.renderer;return(s=n==null?void 0:n.authoringInfo)!=null&&s.isAutoGenerated?null:n&&KZ(n)?(o=GC(n,e,i))==null?void 0:o.symbol:null}writeSymbol(t,e,i,n){var s,o;const r=(o=(s=this.renderer)==null?void 0:s.authoringInfo)==null?void 0:o.isAutoGenerated;if(!this.renderer||r){const a=new yw({symbol:t});e.drawingInfo={renderer:a.write({},n)}}}writeFields(t,e,i){const n=t.filter(r=>r.statisticType!=="avg_angle").map(r=>r.toJSON());rr(i,n,e)}readFields(t,e,i){return t.filter(n=>!n.isAutoGenerated).map(n=>k0.fromJSON(n))}clone(){return new CV({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:G(this.labelingInfo),labelsVisible:this.labelsVisible,fields:G(this.fields),maxScale:this.maxScale,renderer:G(this.renderer),symbol:G(this.symbol),popupEnabled:this.popupEnabled,popupTemplate:G(this.popupTemplate)})}};c([d({type:["cluster"],readOnly:!0,json:{write:!0}})],Mn.prototype,"type",void 0),c([d({type:Number,cast:t=>t==="auto"?t:vt(t),json:{write:!0}})],Mn.prototype,"clusterRadius",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Mn.prototype,"clusterMinSize",void 0),c([d({type:Number,cast:vt,json:{write:!0}})],Mn.prototype,"clusterMaxSize",void 0),c([d({type:Number,json:{default:0,name:"visibilityInfo.maxScale"}})],Mn.prototype,"maxScale",void 0),c([d(BB)],Mn.prototype,"popupEnabled",void 0),c([d({type:Cm,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],Mn.prototype,"popupTemplate",void 0),c([d({types:IR,json:{write:{target:"drawingInfo.renderer"}}})],Mn.prototype,"renderer",void 0),c([de("renderer",["drawingInfo.renderer"])],Mn.prototype,"readRenderer",null),c([d({types:pPe})],Mn.prototype,"symbol",void 0),c([de("symbol",["drawingInfo.renderer"])],Mn.prototype,"readSymbol",null),c([fe("symbol")],Mn.prototype,"writeSymbol",null),c([d({type:[OR],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],Mn.prototype,"labelingInfo",void 0),c([d(HB)],Mn.prototype,"labelsVisible",void 0),c([d({type:[k0],json:{write:!0}})],Mn.prototype,"fields",void 0),c([fe("fields")],Mn.prototype,"writeFields",null),c([de("fields")],Mn.prototype,"readFields",null),Mn=CV=c([O(Q8e)],Mn);const lfe=Mn;var IV;let tA=IV=class extends Jf{constructor(t){super(t),this.type="selection"}clone(){return new IV}};c([d({type:["selection"]})],tA.prototype,"type",void 0),tA=IV=c([O("esri.layers.support.FeatureReductionSelection")],tA);const XZ=tA,QZ={key:"type",base:Jf,typeMap:{cluster:lfe,binning:afe}},e9e={types:{key:"type",base:Jf,typeMap:{selection:XZ,cluster:lfe,binning:afe}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:QZ},"portal-item":{types:QZ},"web-scene":{types:{key:"type",base:Jf,typeMap:{selection:XZ}}}}}},lv={Base64:0,Hex:1,String:2,Raw:3},j_=8,cfe=(1<<j_)-1;function Lf(t,e){const i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}function t9e(t){const e=[];for(let i=0,n=t.length*j_;i<n;i+=j_)e[i>>5]|=(t.charCodeAt(i/j_)&cfe)<<i%32;return e}function i9e(t){const e=[];for(let i=0,n=32*t.length;i<n;i+=j_)e.push(String.fromCharCode(t[i>>5]>>>i%32&cfe));return e.join("")}function n9e(t){const e="0123456789abcdef",i=[];for(let n=0,r=4*t.length;n<r;n++)i.push(e.charAt(t[n>>2]>>n%4*8+4&15)+e.charAt(t[n>>2]>>n%4*8&15));return i.join("")}function r9e(t){const e="=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=[];for(let r=0,s=4*t.length;r<s;r+=3){const o=(t[r>>2]>>r%4*8&255)<<16|(t[r+1>>2]>>(r+1)%4*8&255)<<8|t[r+2>>2]>>(r+2)%4*8&255;for(let a=0;a<4;a++)8*r+6*a>32*t.length?n.push(e):n.push(i.charAt(o>>6*(3-a)&63))}return n.join("")}function s9e(t,e){return t<<e|t>>>32-e}function PR(t,e,i,n,r,s){return Lf(s9e(Lf(Lf(e,t),Lf(n,s)),r),i)}function ts(t,e,i,n,r,s,o){return PR(e&i|~e&n,t,e,r,s,o)}function is(t,e,i,n,r,s,o){return PR(e&n|i&~n,t,e,r,s,o)}function ns(t,e,i,n,r,s,o){return PR(e^i^n,t,e,r,s,o)}function rs(t,e,i,n,r,s,o){return PR(i^(e|~n),t,e,r,s,o)}function o9e(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;let i=1732584193,n=-271733879,r=-1732584194,s=271733878;for(let o=0;o<t.length;o+=16){const a=i,l=n,u=r,h=s;i=ts(i,n,r,s,t[o+0],7,-680876936),s=ts(s,i,n,r,t[o+1],12,-389564586),r=ts(r,s,i,n,t[o+2],17,606105819),n=ts(n,r,s,i,t[o+3],22,-1044525330),i=ts(i,n,r,s,t[o+4],7,-176418897),s=ts(s,i,n,r,t[o+5],12,1200080426),r=ts(r,s,i,n,t[o+6],17,-1473231341),n=ts(n,r,s,i,t[o+7],22,-45705983),i=ts(i,n,r,s,t[o+8],7,1770035416),s=ts(s,i,n,r,t[o+9],12,-1958414417),r=ts(r,s,i,n,t[o+10],17,-42063),n=ts(n,r,s,i,t[o+11],22,-1990404162),i=ts(i,n,r,s,t[o+12],7,1804603682),s=ts(s,i,n,r,t[o+13],12,-40341101),r=ts(r,s,i,n,t[o+14],17,-1502002290),n=ts(n,r,s,i,t[o+15],22,1236535329),i=is(i,n,r,s,t[o+1],5,-165796510),s=is(s,i,n,r,t[o+6],9,-1069501632),r=is(r,s,i,n,t[o+11],14,643717713),n=is(n,r,s,i,t[o+0],20,-373897302),i=is(i,n,r,s,t[o+5],5,-701558691),s=is(s,i,n,r,t[o+10],9,38016083),r=is(r,s,i,n,t[o+15],14,-660478335),n=is(n,r,s,i,t[o+4],20,-405537848),i=is(i,n,r,s,t[o+9],5,568446438),s=is(s,i,n,r,t[o+14],9,-1019803690),r=is(r,s,i,n,t[o+3],14,-187363961),n=is(n,r,s,i,t[o+8],20,1163531501),i=is(i,n,r,s,t[o+13],5,-1444681467),s=is(s,i,n,r,t[o+2],9,-51403784),r=is(r,s,i,n,t[o+7],14,1735328473),n=is(n,r,s,i,t[o+12],20,-1926607734),i=ns(i,n,r,s,t[o+5],4,-378558),s=ns(s,i,n,r,t[o+8],11,-2022574463),r=ns(r,s,i,n,t[o+11],16,1839030562),n=ns(n,r,s,i,t[o+14],23,-35309556),i=ns(i,n,r,s,t[o+1],4,-1530992060),s=ns(s,i,n,r,t[o+4],11,1272893353),r=ns(r,s,i,n,t[o+7],16,-155497632),n=ns(n,r,s,i,t[o+10],23,-1094730640),i=ns(i,n,r,s,t[o+13],4,681279174),s=ns(s,i,n,r,t[o+0],11,-358537222),r=ns(r,s,i,n,t[o+3],16,-722521979),n=ns(n,r,s,i,t[o+6],23,76029189),i=ns(i,n,r,s,t[o+9],4,-640364487),s=ns(s,i,n,r,t[o+12],11,-421815835),r=ns(r,s,i,n,t[o+15],16,530742520),n=ns(n,r,s,i,t[o+2],23,-995338651),i=rs(i,n,r,s,t[o+0],6,-198630844),s=rs(s,i,n,r,t[o+7],10,1126891415),r=rs(r,s,i,n,t[o+14],15,-1416354905),n=rs(n,r,s,i,t[o+5],21,-57434055),i=rs(i,n,r,s,t[o+12],6,1700485571),s=rs(s,i,n,r,t[o+3],10,-1894986606),r=rs(r,s,i,n,t[o+10],15,-1051523),n=rs(n,r,s,i,t[o+1],21,-2054922799),i=rs(i,n,r,s,t[o+8],6,1873313359),s=rs(s,i,n,r,t[o+15],10,-30611744),r=rs(r,s,i,n,t[o+6],15,-1560198380),n=rs(n,r,s,i,t[o+13],21,1309151649),i=rs(i,n,r,s,t[o+4],6,-145523070),s=rs(s,i,n,r,t[o+11],10,-1120210379),r=rs(r,s,i,n,t[o+2],15,718787259),n=rs(n,r,s,i,t[o+9],21,-343485551),i=Lf(i,a),n=Lf(n,l),r=Lf(r,u),s=Lf(s,h)}return[i,n,r,s]}function ufe(t,e=lv.Hex){const i=e||lv.Base64,n=o9e(t9e(t),t.length*j_);switch(i){case lv.Raw:return n;case lv.Hex:return n9e(n);case lv.String:return i9e(n);case lv.Base64:return r9e(n)}}var TV;let AS=TV=class extends ER{writeLevels(t,e,i){for(const n in t){const r=this.levels[n];return void(e.stops=r)}}clone(){return new TV({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Rf(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Rf(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(t=>t.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone(),levels:G(this.levels)})}};c([d()],AS.prototype,"levels",void 0),c([fe("levels")],AS.prototype,"writeLevels",null),AS=TV=c([O("esri.views.2d.engine.LevelDependentSizeVariable")],AS);const a9e=se.getLogger("esri.views.2d.layers.support.clusterUtils");ee.add("esri-cluster-arcade-enabled",!0);const l9e=ee("esri-cluster-arcade-enabled"),c9e=(t,e,i,n,r)=>{const s=e.clone();if(!d9e(s))return s;if(s.authoringInfo||(s.authoringInfo=new LB),s.authoringInfo.isAutoGenerated=!0,"visualVariables"in s){const o=(s.visualVariables||[]).filter(l=>l.valueExpression!=="$view.scale"),a=dfe(o);o.forEach(l=>{l.type==="rotation"?l.field?l.field=Ym(t,l.field,"avg_angle","number"):l.valueExpression&&(l.field=ux(t,l.valueExpression,"avg_angle","number"),l.valueExpression=null):l.normalizationField?(l.field=Ym(t,l.field,"avg_norm","number",l.normalizationField),l.normalizationField=null):l.field?l.field=Ym(t,l.field,"avg","number"):l.valueExpression&&(l.field=ux(t,l.valueExpression,"avg","number"),l.valueExpression=null)}),U(a)&&!u9e(o)&&r&&(o.push(hfe(i,n)),s.dynamicClusterSize=!0),s.visualVariables=o}switch(s.type){case"simple":break;case"pie-chart":for(const o of s.attributes)o.field?o.field=Ym(t,o.field,"sum","number"):o.valueExpression&&(o.field=ux(t,o.valueExpression,"sum","number"),o.valueExpression=null);break;case"unique-value":s.field?s.field=Ym(t,s.field,"mode","string"):s.valueExpression&&(s.field=ux(t,s.valueExpression,"mode","string"),s.valueExpression=null);break;case"class-breaks":s.normalizationField?(s.field=Ym(t,s.field,"avg_norm","number",s.normalizationField),s.normalizationField=null):s.field?s.field=Ym(t,s.field,"avg","number"):s.valueExpression&&(s.field=ux(t,s.valueExpression,"avg","number"),s.valueExpression=null)}return s},dfe=t=>{for(const e of t)if(e.type==="size")return e;return null};function c_t(t,e,i){const n=t.clone();let r=!1;if("visualVariables"in n){const s=(n.visualVariables||[]).filter(a=>a.valueExpression!=="$view.scale"),o=dfe(s);U(o)&&(n.visualVariables||(n.visualVariables=[]),n.visualVariables.push(hfe(e,i)),n.dynamicClusterSize=!0,r=!0)}return{renderer:n,didInject:r}}const u9e=t=>{for(const e of t)if(e.field==="cluster_count")return!0;return!1},hfe=(t,e)=>{const i=[new Qv({value:0,size:0}),new Qv({value:1})];if(U(e))return new ER({field:"cluster_count",stops:[...i,new Qv({value:2,size:0})]});const n=Object.keys(e).reduce((r,s)=>({...r,[s]:[...i,new Qv({value:Math.max(2,e[s].minValue),size:t.clusterMinSize}),new Qv({value:Math.max(3,e[s].maxValue),size:t.clusterMaxSize})]}),{});return new AS({field:"cluster_count",levels:n})},d9e=t=>{const e=i=>a9e.error(new N("Unsupported-renderer",i,{renderer:t}));switch(t.type){case"unique-value":if(t.field2||t.field3)return e("FeatureReductionCluster does not support multi-field UniqueValueRenderers"),!1;break;case"class-breaks":if(t.normalizationField){const i=t.normalizationType;if(i!=="field")return e(`FeatureReductionCluster does not support a normalizationType of ${i}`),!1}break;case"simple":case"pie-chart":break;default:return e(`FeatureReductionCluster does not support renderers of type ${t.type}`),!1}if(!l9e){if("valueExpression"in t&&t.valueExpression)return e("FeatureReductionCluster does not currently support renderer.valueExpression. Support will be added in a future release"),!1;if(("visualVariables"in t&&t.visualVariables||[]).some(i=>!(!("valueExpression"in i)||!i.valueExpression)))return e("FeatureReductionCluster does not currently support visualVariables with a valueExpression. Support will be added in a future release"),!1}return!0};function h9e(t,e,i){switch(t){case"sum":return`cluster_sum_${e}`;case"avg":case"avg_angle":return`cluster_avg_${e}`;case"mode":return`cluster_type_${e}`;case"avg_norm":{const n=i,r="field",s=e.toLowerCase()+",norm:"+r+","+n.toLowerCase();return"cluster_avg_"+ufe(s)}}}function ux(t,e,i,n){const r=ufe(e),s=i==="mode"?`cluster_type_${r}`:i==="sum"?`cluster_sum_${r}`:`cluster_avg_${r}`;return t.some(o=>o.name===s)||t.push(new k0({name:s,isAutoGenerated:!0,onStatisticExpression:new QB({expression:e,returnType:n}),statisticType:i})),s}function Ym(t,e,i,n,r){if(e==="cluster_count"||t.some(o=>o.name===e))return e;const s=h9e(i,e,r);return t.some(o=>o.name===s)||(i==="avg_norm"?t.push(new k0({name:s,isAutoGenerated:!0,onStatisticExpression:new QB({expression:`$feature.${e} / $feature.${r}`,returnType:n}),statisticType:"avg"})):t.push(new k0({name:s,isAutoGenerated:!0,onStatisticField:e,statisticType:i}))),s}const p9e=t=>{let e=class extends t{constructor(...i){super(...i),this.own(this.watch("renderer",()=>{if(this.featureReduction){const n=this._normalizeFeatureReduction(this.featureReduction);this._set("featureReduction",n)}},!0))}set featureReduction(i){const n=this._normalizeFeatureReduction(i);this._set("featureReduction",n)}set renderer(i){}_normalizeFeatureReduction(i){var a;if((i==null?void 0:i.type)!=="cluster")return i;const n=i.clone(),r=[new k0({name:"cluster_count",isAutoGenerated:!0,statisticType:"count"})],s=(n.fields??[]).filter(l=>!l.isAutoGenerated);if(i.renderer&&!((a=i.renderer.authoringInfo)!=null&&a.isAutoGenerated))return n.fields=[...r,...s],n;if(i.symbol)return n.fields=[...r,...s],n.renderer=null,n;if(!this.renderer)return i;const o=c9e(r,this.renderer,i,null,!1);return n.fields=[...r,...s],n.renderer=o,n}};return c([d(e9e)],e.prototype,"featureReduction",null),e=c([O("esri.layers.mixins.FeatureReductionLayer")],e),e},f9e={"web-scene/operational-layers":{ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!0,LineOfSightLayer:!0},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISAnnotationLayer:!0,ArcGISDimensionLayer:!0,ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,MediaLayer:!0,OGCFeatureLayer:!0,OrientedImageryLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISFeatureLayer:!0,ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0,OrientedImageryLayer:!0}},m9e=t=>{let e=class extends t{constructor(){super(...arguments),this.title=null}writeListMode(i,n,r,s){(s&&s.layerContainerType==="ground"||i&&STe(this,r,{},s))&&(n[r]=i)}writeOperationalLayerType(i,n,r,s){!i||s&&s.layerContainerType==="tables"||(n.layerType=i)}writeTitle(i,n){n.title=i??"Layer"}read(i,n){n&&(n.layer=this),_oe(this,i,r=>super.read(i,r),n)}write(i,n){var o,a;if(n!=null&&n.origin){const l=`${n.origin}/${n.layerContainerType||"operational-layers"}`,u=f9e[l];let h=u&&u[this.operationalLayerType];if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(h=!1),this.operationalLayerType==="ArcGISDimensionLayer"&&l==="web-map/operational-layers"&&(h=!1),!h)return(o=n.messages)==null||o.push(new N("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const r=super.write(i,{...n,layer:this}),s=!!n&&!!n.messages&&!!n.messages.filter(l=>l instanceof N&&l.name==="web-document-write:property-required").length;return WP(r==null?void 0:r.url)?((a=n==null?void 0:n.messages)==null||a.push(new N("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&s?null:r}beforeSave(){}};return c([d({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],e.prototype,"id",void 0),c([d(Qhe)],e.prototype,"listMode",void 0),c([fe("listMode")],e.prototype,"writeListMode",null),c([d({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],e.prototype,"operationalLayerType",void 0),c([fe("operationalLayerType")],e.prototype,"writeOperationalLayerType",null),c([d(dV)],e.prototype,"opacity",void 0),c([d({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],e.prototype,"title",void 0),c([fe("title"),fe(["web-scene"],"title")],e.prototype,"writeTitle",null),c([d({type:Boolean,json:{name:"visibility"}})],e.prototype,"visible",void 0),e=c([O("esri.layers.mixins.OperationalLayer")],e),e};var kV;const QD=new Fe({asc:"ascending",desc:"descending"});let lb=kV=class extends Y{constructor(t){super(t),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new kV({field:this.field,valueExpression:this.valueExpression,order:this.order})}};c([d({type:String,json:{write:!0}})],lb.prototype,"field",void 0),c([d({type:String,json:{write:!0}})],lb.prototype,"valueExpression",void 0),c([d({type:QD.apiValues,json:{read:QD.read,write:QD.write}})],lb.prototype,"order",void 0),lb=kV=c([O("esri.layers.support.OrderByInfo")],lb);const pfe=lb;function g9e(t,e,i){if(!t)return null;const n=t.find(s=>!!s.field);if(!n)return null;const r=new pfe;return r.read(n,i),[r]}function y9e(t,e,i,n){const r=t.find(s=>!!s.field);r&&rr(i,[r.toJSON()],e)}const v9e=t=>{let e=class extends t{constructor(){super(...arguments),this.orderBy=null}};return c([d({type:[pfe],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:g9e},write:{target:"layerDefinition.orderBy",writer:y9e}}})],e.prototype,"orderBy",void 0),e=c([O("esri.layers.mixins.OrderedLayer")],e),e};let Lp=class extends _e{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this._normalizePath(e.path,e.portalItem)}:e}set path(e){A(e)&&Ia(e)?se.getLogger(this.declaredClass).error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this._normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",i){const n=this.url;if(U(n))throw new N("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal.request(n,{responseType:e,query:{token:this.portalItem.apiKey},signal:tw(i,"signal")})}async update(e,i){return(await q(()=>import("./resourceUtils-ba3186a7.js"),[])).addOrUpdateResource(this,"update",e,i)}hasPath(){return A(this.path)}_normalizePath(e,i){return U(e)?e:(e=e.replace(/^\/+/,""),A(i)&&Ia(e)&&(e=E9(e,i.itemUrl)),e==null?void 0:e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};c([d()],Lp.prototype,"portalItem",void 0),c([d({type:String,value:null})],Lp.prototype,"path",null),c([st("path")],Lp.prototype,"_castPath",null),c([d({type:String,readOnly:!0})],Lp.prototype,"url",null),c([d({type:String,readOnly:!0})],Lp.prototype,"itemRelativeUrl",null),Lp=c([O("esri.portal.PortalItemResource")],Lp);const b9e=Lp;let MS=class extends _e{constructor(e){super(e),this.created=null,this.rating=null}};c([d()],MS.prototype,"created",void 0),c([d()],MS.prototype,"rating",void 0),MS=c([O("esri.portal.PortalRating")],MS);const eF=MS;var qg;const _9e=new Set(["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","GeoJson","CSV","KML","WFS","WMTS","WMS","Feed"]),w9e=new Set(["KML","GeoJson","CSV"]);let Ze=qg=class extends Gw(_l){static from(t){return $8(qg,t)}constructor(t){super(t),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.isOrgItem=!1,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.sourceUrl=null,this.spatialReference=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}destroy(){this.portal=null}get displayName(){const t=this.type,e=this.typeKeywords||[];let i=t;return t==="Feature Service"||t==="Feature Collection"?i=e.includes("Table")?"Table":e.includes("Route Layer")?"Route Layer":e.includes("Markup")?"Markup":"Feature Layer":t==="Image Service"?i=e.includes("Elevation 3D Layer")?"Elevation Layer":e.includes("Tiled Imagery")?"Tiled Imagery Layer":"Imagery Layer":t==="Scene Service"?i="Scene Layer":t==="Video Service"?i="Video Layer":t==="Scene Package"?i="Scene Layer Package":t==="Stream Service"?i="Feature Layer":t==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?i=e.includes("Web Tool")?"Tool":"Geoprocessing Service":t==="Geocoding Service"?i="Locator":t==="Geoenrichment Service"?i="GeoEnrichment Service":t==="Microsoft Powerpoint"?i="Microsoft PowerPoint":t==="GeoJson"?i="GeoJSON":t==="Globe Service"?i="Globe Layer":t==="Vector Tile Service"?i="Tile Layer":t==="netCDF"?i="NetCDF":t==="Map Service"?i=e.includes("Spatiotemporal")||!e.includes("Hosted Service")&&!e.includes("Tiled")||e.includes("Relational")?"Map Image Layer":"Tile Layer":t&&t.toLowerCase().includes("add in")?i=t.replace(/(add in)/gi,"Add-In"):t==="datastore catalog service"?i="Big Data File Share":t==="Compact Tile Package"?i="Tile Package (tpkx)":t==="OGCFeatureServer"?i="OGC Feature Layer":t==="web mapping application"&&e.includes("configurableApp")?i="Instant App":t==="Insights Page"&&(i="Insights Report"),i}readExtent(t){return t&&t.length?new Dt(t[0][0],t[0][1],t[1][0],t[1][1]):null}get iconUrl(){const t=this.type&&this.type.toLowerCase()||"",e=this.typeKeywords||[],i="esri/images/portal/",n="16";let r,s=!1,o=!1,a=!1,l=!1,u=!1,h=!1;return t.indexOf("service")>0||t==="feature collection"||t==="kml"||t==="wms"||t==="wmts"||t==="wfs"?(s=e.includes("Hosted Service"),t==="feature service"||t==="feature collection"||t==="kml"||t==="wfs"?(o=e.includes("Table"),a=e.includes("Route Layer"),l=e.includes("Markup"),u=e.includes("Spatiotemporal"),h=e.includes("UtilityNetwork"),r=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":s?"featureshosted":h?"utilitynetwork":"features"):r=t==="map service"||t==="wms"||t==="wmts"?s||e.includes("Tiled")||t==="wmts"?"maptiles":"mapimages":t==="scene service"?e.includes("Line")?"sceneweblayerline":e.includes("3DObject")?"sceneweblayermultipatch":e.includes("Point")?"sceneweblayerpoint":e.includes("IntegratedMesh")?"sceneweblayermesh":e.includes("PointCloud")?"sceneweblayerpointcloud":e.includes("Polygon")?"sceneweblayerpolygon":e.includes("Building")?"sceneweblayerbuilding":e.includes("Voxel")?"sceneweblayervoxel":"sceneweblayer":t==="image service"?e.includes("Elevation 3D Layer")?"elevationlayer":e.includes("Tiled Imagery")?"tiledimagerylayer":"imagery":t==="stream service"?"streamlayer":t==="video service"?"mediaservice":t==="vector tile service"?"vectortile":t==="datastore catalog service"?"datastorecollection":t==="geocoding service"?"geocodeservice":t==="geoprocessing service"?e.includes("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":t==="geodata service"?"geodataservice":"layers"):r=t==="web map"||t==="cityengine web scene"?"maps":t==="web scene"?e.includes("ViewingMode-Local")?"webscenelocal":"websceneglobal":t==="web mapping application"&&e.includes("configurableApp")?"instantapps":t==="web mapping application"||t==="mobile application"||t==="application"||t==="operation view"||t==="desktop application"?"apps":t==="map document"||t==="map package"||t==="published map"||t==="scene document"||t==="globe document"||t==="basemap package"||t==="mobile basemap package"||t==="mobile map package"||t==="project package"||t==="project template"||t==="pro map"||t==="layout"||t==="layer"&&e.includes("ArcGIS Pro")||t==="explorer map"&&e.indexOf("Explorer Document")?"mapsgray":t==="service definition"||t==="csv"||t==="shapefile"||t==="cad drawing"||t==="geojson"||t==="360 vr experience"||t==="netcdf"||t==="administrative report"?"datafiles":t==="explorer add in"||t==="desktop add in"||t==="windows viewer add in"||t==="windows viewer configuration"?"appsgray":t==="arcgis pro add in"||t==="arcgis pro configuration"?"addindesktop":t==="rule package"||t==="file geodatabase"||t==="sqlite geodatabase"||t==="csv collection"||t==="kml collection"||t==="windows mobile package"||t==="map template"||t==="desktop application template"||t==="gml"||t==="arcpad package"||t==="code sample"||t==="form"||t==="document link"||t==="earth configuration"||t==="operations dashboard add in"||t==="rules package"||t==="image"||t==="workflow manager package"||t==="explorer map"&&e.includes("Explorer Mapping Application")||e.includes("Document")?"datafilesgray":t==="network analysis service"||t==="geoprocessing service"||t==="geodata service"||t==="geometry service"||t==="geoprocessing package"||t==="locator package"||t==="geoprocessing sample"||t==="workflow manager service"?"toolsgray":t==="layer"||t==="layer package"||t==="explorer layer"?"layersgray":t==="scene package"?"scenepackage":t==="mobile scene package"?"mobilescenepackage":t==="tile package"||t==="compact tile package"?"tilepackage":t==="task file"?"taskfile":t==="report template"?"report-template":t==="statistical data collection"?"statisticaldatacollection":t==="insights workbook"?"workbook":t==="insights model"?"insightsmodel":t==="insights page"?"insightspage":t==="insights theme"?"insightstheme":t==="hub initiative"?"hubinitiative":t==="hubpage"?"hubpage":t==="hub event"?"hubevent":t==="hub site application"?"hubsite":t==="hub project"?"hubproject":t==="relational database connection"?"relationaldatabaseconnection":t==="big data file share"?"datastorecollection":t==="image collection"?"imagecollection":t==="style"?"style":t==="desktop style"?"desktopstyle":t==="dashboard"?"dashboard":t==="raster function template"?"rasterprocessingtemplate":t==="vector tile package"?"vectortilepackage":t==="ortho mapping project"?"orthomappingproject":t==="ortho mapping template"?"orthomappingtemplate":t==="solution"?"solutions":t==="geopackage"?"geopackage":t==="deep learning package"?"deeplearningpackage":t==="real time analytic"?"realtimeanalytics":t==="big data analytic"?"bigdataanalytics":t==="feed"?"feed":t==="excalibur imagery project"?"excaliburimageryproject":t==="notebook"?"notebook":t==="storymap"?"storymap":t==="survey123 add in"?"survey123addin":t==="mission"?"mission":t==="mission report"?"missionreport":t==="quickcapture project"?"quickcaptureproject":t==="pro report"?"proreport":t==="pro report template"?"proreporttemplate":t==="urban model"?"urbanmodel":t==="web experience"?"experiencebuilder":t==="web experience template"?"webexperiencetemplate":t==="experience builder widget"?"experiencebuilderwidget":t==="experience builder widget package"?"experiencebuilderwidgetpackage":t==="workflow"?"workflow":t==="insights script"?"insightsscript":t==="kernel gateway connection"?"kernelgatewayconnection":t==="hub initiative template"?"hubinitiativetemplate":t==="storymap theme"?"storymaptheme":t==="knowledge graph"?"knowledgegraph":t==="native application"?"nativeapp":t==="native application installer"?"nativeappinstaller":t==="link chart"?"linkchart":t==="investigation"?"investigation":t==="ogcfeatureserver"?"features":t==="pro project"?"proproject":t==="insights workbook package"?"insightsworkbookpackage":t==="apache parquet"?"apacheparquet":t==="notebook code snippets"||t==="notebook code snippet library"?"notebookcodesnippets":t==="suitability model"?"suitabilitymodel":t==="esri classifier definition"?"classifierdefinition":t==="esri classification schema"?"classificationschema":t==="insights data engineering workbook"?"dataengineeringworkbook":t==="insights data engineering model"?"dataengineeringmodel":t==="deep learning studio project"?"deeplearningproject":t==="discussion"?"discussion":t==="allsource project"?"allsourceproject":t==="api key"?"apikey":"maps",r?pt(i+r+n+".png"):null}get isLayer(){return this.type!=null&&_9e.has(this.type)}get itemPageUrl(){var e;const t=(e=this.portal)==null?void 0:e.itemPageUrl;return t&&this.id?`${t}?id=${this.id}`:null}get itemUrl(){var e;const t=(e=this.portal)==null?void 0:e.restUrl;return t&&this.id?`${t}/content/items/${this.id}`:null}get thumbnailUrl(){var i;const t=this.itemUrl,e=this.thumbnail;return t&&e?((i=this.portal)==null?void 0:i.normalizeUrl(`${t}/info/${e}?f=json`))??null:null}get userItemUrl(){const t=this.get("portal.restUrl");if(!t)return null;const e=this.owner||this.get("portal.user.username");return e?`${t}/content/users/${this.ownerFolder?`${e}/${this.ownerFolder}`:e}/items/${this.id}`:null}load(t){const e=this.portal??(this.portal=zi.getDefault()),i=e.load(t).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?e.request(this.itemUrl,{signal:A(t)?t.signal:null,query:{token:this.apiKey}}):{}).then(n=>{this.sourceJSON=n,this.read(n)});return this.addResolvingPromise(i),Promise.resolve(this)}async addRating(t){const e={method:"post",query:{}};return t instanceof eF&&(t=t.rating),t==null||isNaN(t)||typeof t!="number"||(e.query.rating=t),this.portal?(await this.portal.request(this.itemUrl+"/addRating",e),new eF({rating:t,created:new Date})):null}clone(){const t={access:this.access,accessInformation:this.accessInformation,applicationProxies:G(this.applicationProxies),avgRating:this.avgRating,categories:G(this.categories),created:G(this.created),culture:this.culture,description:this.description,extent:G(this.extent),groupCategories:G(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:G(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:G(this.screenshots),size:this.size,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:G(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:G(this.typeKeywords),url:this.url};this.loaded&&(t.loadStatus="loaded");const e=new qg({sourceJSON:this.sourceJSON}).set(t);return e._set("isOrgItem",this.isOrgItem),e}createPostQuery(){const t=this.toJSON();for(const i of["tags","typeKeywords","categories"])t[i]&&(t[i]=t[i].join(", "));const{extent:e}=t;return e&&(t.extent=JSON.stringify(e)),t}async deleteRating(){await Sr(this.portal).request(this.itemUrl+"/deleteRating",{method:"post"})}fetchData(t="json",e){return Sr(this.portal).request(this.itemUrl+"/data",{responseType:t,...e,query:{token:this.apiKey}})}async fetchRating(t){const e=await Sr(this.portal).request(this.itemUrl+"/rating",{query:{token:this.apiKey},...t});return e.rating!=null?(e.created=new Date(e.created),new eF(e)):null}fetchRelatedItems(t,e){return Sr(this.portal).requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...t,token:this.apiKey},...e},qg)}getThumbnailUrl(t){let e=this.thumbnailUrl;return e&&t&&(e+=`&w=${t}`),e}reload(){return Sr(this.portal).request(this.itemUrl??"",{cacheBust:!0,query:{token:this.apiKey}}).then(t=>(this.sourceJSON=t,this.read(t),this))}update(t){return this.id?this.load().then(()=>Sr(this.portal).signIn()).then(()=>{const e=t&&t.data,i={method:"post"};i.query=this.createPostQuery();for(const n in i.query)i.query[n]===null&&(i.query[n]="");return i.query.clearEmptyFields=!0,e!=null&&(typeof e=="string"?i.query.text=e:typeof e=="object"&&(i.query.text=JSON.stringify(e))),this.portal.request(`${this.userItemUrl}/update`,i).then(()=>this.reload())}):Promise.reject(new N("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async copy(t){if(!this.id)throw new N("portal:item-does-not-exist","The item does not exist yet");await this.load();const{portal:e,itemUrl:i}=this;await Sr(e).signIn();const{copyResources:n,folder:r,tags:s,title:o}=t||{},a={method:"post",query:{copyPrivateResources:n==="all",folder:typeof r=="string"?r:r==null?void 0:r.id,includeResources:!!n,tags:s==null?void 0:s.join(","),title:o}},{itemId:l}=await e.request(`${i}/copy`,a);return new qg({id:l,portal:e})}updateThumbnail(t){return this.id?this.load().then(()=>this.portal.signIn()).then(()=>{const e=t.thumbnail,i=t.filename,n={method:"post"};if(typeof e=="string")Tm(e)?n.query={data:e}:n.query={url:_s(e)},A(i)&&(n.query.filename=i);else{const r=new FormData;A(i)?r.append("file",e,i):r.append("file",e),n.body=r}return this.portal.request(`${this.userItemUrl}/updateThumbnail`,n).then(()=>this.reload())}):Promise.reject(new N("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(t={},e){return(await q(()=>import("./resourceUtils-ba3186a7.js"),[])).fetchResources(this,t,e)}async addResource(t,e,i){const n=await q(()=>import("./resourceUtils-ba3186a7.js"),[]);return t.portalItem=this,n.addOrUpdateResource(t,"add",e,i)}async removeResource(t,e){const i=await q(()=>import("./resourceUtils-ba3186a7.js"),[]);if(t.portalItem&&t.portalItem.itemUrl!==this.itemUrl)throw new N("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return i.removeResource(this,t,e)}async removeAllResources(t){return(await q(()=>import("./resourceUtils-ba3186a7.js"),[])).removeAllResources(this,t)}resourceFromPath(t){return new b9e({portalItem:this,path:t})}toJSON(){const t=this.extent,e={accessInformation:this.accessInformation,categories:G(this.categories),created:this.created&&this.created.getTime(),description:this.description,extent:t&&[[t.xmin,t.ymin],[t.xmax,t.ymax]],id:this.id,isOrgItem:this.isOrgItem,licenseInfo:this.licenseInfo,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,sourceUrl:this.sourceUrl,spatialReference:this.spatialReference,tags:G(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:G(this.typeKeywords),url:this.url};return IP(e)}static fromJSON(t){if(!t)return null;if(t.declaredClass)throw new Error("JSON object is already hydrated");return new qg({sourceJSON:t})}_getPostQuery(){const t=this.toJSON();for(const e in t)e==="tags"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="typeKeywords"&&t[e]!==null&&(t[e]=t[e].join(", ")),e==="extent"&&t[e]&&(t[e]=JSON.stringify(t[e]));return t}};c([d({type:["private","shared","org","public"]})],Ze.prototype,"access",void 0),c([d()],Ze.prototype,"accessInformation",void 0),c([d({type:String})],Ze.prototype,"apiKey",void 0),c([d({json:{read:{source:"appProxies"}}})],Ze.prototype,"applicationProxies",void 0),c([d()],Ze.prototype,"avgRating",void 0),c([d()],Ze.prototype,"categories",void 0),c([d({type:Date})],Ze.prototype,"created",void 0),c([d()],Ze.prototype,"culture",void 0),c([d()],Ze.prototype,"description",void 0),c([d({readOnly:!0})],Ze.prototype,"displayName",null),c([d({type:Dt})],Ze.prototype,"extent",void 0),c([de("extent")],Ze.prototype,"readExtent",null),c([d()],Ze.prototype,"groupCategories",void 0),c([d({readOnly:!0})],Ze.prototype,"iconUrl",null),c([d()],Ze.prototype,"id",void 0),c([d({readOnly:!0})],Ze.prototype,"isLayer",null),c([d({type:Boolean,readOnly:!0})],Ze.prototype,"isOrgItem",void 0),c([d()],Ze.prototype,"itemControl",void 0),c([d({readOnly:!0})],Ze.prototype,"itemPageUrl",null),c([d({readOnly:!0})],Ze.prototype,"itemUrl",null),c([d()],Ze.prototype,"licenseInfo",void 0),c([d({type:Date})],Ze.prototype,"modified",void 0),c([d()],Ze.prototype,"name",void 0),c([d()],Ze.prototype,"numComments",void 0),c([d()],Ze.prototype,"numRatings",void 0),c([d()],Ze.prototype,"numViews",void 0),c([d()],Ze.prototype,"owner",void 0),c([d()],Ze.prototype,"ownerFolder",void 0),c([d({type:zi})],Ze.prototype,"portal",void 0),c([d()],Ze.prototype,"screenshots",void 0),c([d()],Ze.prototype,"size",void 0),c([d()],Ze.prototype,"snippet",void 0),c([d()],Ze.prototype,"sourceJSON",void 0),c([d({type:String})],Ze.prototype,"sourceUrl",void 0),c([d({type:String})],Ze.prototype,"spatialReference",void 0),c([d()],Ze.prototype,"tags",void 0),c([d()],Ze.prototype,"thumbnail",void 0),c([d({readOnly:!0})],Ze.prototype,"thumbnailUrl",null),c([d()],Ze.prototype,"title",void 0),c([d()],Ze.prototype,"type",void 0),c([d()],Ze.prototype,"typeKeywords",void 0),c([d({type:String,json:{read(t,e){var i;if(w9e.has(e.type)){const n=(i=this.portal)==null?void 0:i.restUrl;t||(t=n&&this.id?`${n}/content/items/${this.id}/data`:null)}return t}}})],Ze.prototype,"url",void 0),c([d({readOnly:!0})],Ze.prototype,"userItemUrl",null),Ze=qg=c([O("esri.portal.PortalItem")],Ze);const gh=Ze,ffe=Object.freeze(Object.defineProperty({__proto__:null,default:gh},Symbol.toStringTag,{value:"Module"}));async function x9e(t){const e=t.spatialReference;if(e.isWGS84)return t.clone();if(e.isWebMercator)return sh(t);const i=Ge.WGS84;return await B9(e,i),Hu(t,i)}function cv(t,e){if(!cb(t,e)){const i=t.typeKeywords;i?i.push(e):t.typeKeywords=[e]}}function cb(t,e){var i;return!!((i=t.typeKeywords)!=null&&i.includes(e))}function qo(t,e){const i=t.typeKeywords;if(i){const n=i.indexOf(e);n>-1&&i.splice(n,1)}}async function h_t(t){const e=t.clone().normalize();let i;if(e.length>1)for(const n of e)i?n.width>i.width&&(i=n):i=n;else i=e[0];return x9e(i)}const n7={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"};function eK(t){var l;const{portal:e,isOrgItem:i,itemControl:n}=t,r=(l=e.user)==null?void 0:l.privileges;let s=!r||r.includes("features:user:edit"),o=!!i&&!!(r!=null&&r.includes("features:user:fullEdit"));const a=n==="update"||n==="admin";return a?o=s=!0:o&&(s=!0),{features:{edit:s,fullEdit:o},content:{updateItem:a}}}const S9e=t=>{let e=class extends t{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0,this.userHasFullEditingPrivileges=!1,this.userHasUpdateItemPrivileges=!1}destroy(){this.portalItem=si(this.portalItem)}set portalItem(i){i!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",i))}readPortalItem(i,n,r){if(n.itemId)return new gh({id:n.itemId,portal:r&&r.portal})}writePortalItem(i,n){i&&i.id&&(n.itemId=i.id)}async loadFromPortal(i,n){if(this.portalItem&&this.portalItem.id)try{const r=await q(()=>import("./layersLoader-1fb962fe.js"),["assets/layersLoader-1fb962fe.js","assets/fetchService-52b55be4.js","assets/jsonContext-c42fadc4.js"]);return Xi(n),await r.load({instance:this,supportedTypes:i.supportedTypes,validateItem:i.validateItem,supportsData:i.supportsData,layerModuleTypeMap:i.layerModuleTypeMap},n)}catch(r){throw Pa(r)||se.getLogger(this.declaredClass).warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${r}`),r}}async finishLoadEditablePortalLayer(i){this._set("userHasEditingPrivileges",await this._fetchUserHasEditingPrivileges(i).catch(n=>(Tu(n),!0)))}async _setUserPrivileges(i,n){if(!lt.userPrivilegesApplied)return this.finishLoadEditablePortalLayer(n);if(this.url)try{const{features:{edit:r,fullEdit:s},content:{updateItem:o}}=await this._fetchUserPrivileges(i,n);this._set("userHasEditingPrivileges",r),this._set("userHasFullEditingPrivileges",s),this._set("userHasUpdateItemPrivileges",o)}catch(r){Tu(r)}}async _fetchUserPrivileges(i,n){let r=this.portalItem;if(!i||!r||!r.loaded||r.sourceUrl)return this._fetchFallbackUserPrivileges(n);const s=i===r.id;if(s&&r.portal.user)return eK(r);let o,a;if(s)o=r.portal.url;else try{o=await Vue(this.url,n)}catch(p){Tu(p)}if(!o||!rOe(o,r.portal.url))return this._fetchFallbackUserPrivileges(n);try{const p=A(n)?n.signal:null;a=await(Ne==null?void 0:Ne.getCredential(`${o}/sharing`,{prompt:!1,signal:p}))}catch(p){Tu(p)}const l=!0,u=!1,h=!1;if(!a)return{features:{edit:l,fullEdit:u},content:{updateItem:h}};try{if(s?await r.reload():(r=new gh({id:i,portal:{url:o}}),await r.load(n)),r.portal.user)return eK(r)}catch(p){Tu(p)}return{features:{edit:l,fullEdit:u},content:{updateItem:h}}}async _fetchFallbackUserPrivileges(i){let n=!0;try{n=await this._fetchUserHasEditingPrivileges(i)}catch(r){Tu(r)}return{features:{edit:n,fullEdit:!1},content:{updateItem:!1}}}async _fetchUserHasEditingPrivileges(i){const n=this.url?Ne==null?void 0:Ne.findCredential(this.url):null;if(!n)return!0;const r=zT.credential===n?zT.user:await this._fetchEditingUser(i);return zT.credential=n,zT.user=r,U(r)||r.privileges==null||r.privileges.includes("features:user:edit")}async _fetchEditingUser(i){var h,p;const n=(p=(h=this.portalItem)==null?void 0:h.portal)==null?void 0:p.user;if(n)return n;const r=Ne.findServerInfo(this.url??"");if(!(r!=null&&r.owningSystemUrl))return null;const s=`${r.owningSystemUrl}/sharing/rest`,o=zi.getDefault();if(o&&o.loaded&&Ca(o.restUrl)===Ca(s))return o.user;const a=`${s}/community/self`,l=A(i)?i.signal:null,u=await dR(rt(a,{authMode:"no-prompt",query:{f:"json"},signal:l}));return u.ok?P9.fromJSON(u.value.data):null}read(i,n){n&&(n.layer=this),super.read(i,n)}write(i,n){const r=n&&n.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||zi.getDefault());return r&&s&&!xle(s.restUrl,r.restUrl)?(n.messages&&n.messages.push(new N("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save, set layer.portalItem to null or save to the same portal as the item associated with the layer`,{layer:this})),null):super.write(i,{...n,layer:this})}};return c([d({type:gh})],e.prototype,"portalItem",null),c([de("web-document","portalItem",["itemId"])],e.prototype,"readPortalItem",null),c([fe("web-document","portalItem",{itemId:{type:String}})],e.prototype,"writePortalItem",null),c([d({clonable:!1})],e.prototype,"resourceReferences",void 0),c([d({type:Boolean,readOnly:!0})],e.prototype,"userHasEditingPrivileges",void 0),c([d({type:Boolean,readOnly:!0})],e.prototype,"userHasFullEditingPrivileges",void 0),c([d({type:Boolean,readOnly:!0})],e.prototype,"userHasUpdateItemPrivileges",void 0),e=c([O("esri.layers.mixins.PortalLayer")],e),e},zT={credential:null,user:null};let OS=class extends _e{constructor(){super(...arguments),this.updating=!1,this.status="unknown"}};c([d()],OS.prototype,"updating",void 0),c([d()],OS.prototype,"status",void 0),OS=c([O("esri.layers.support.PublishingInfo")],OS);const E9e=OS,mfe="esri.layers.mixins.PublishableLayer",C9e=Symbol(mfe),I9e=t=>{var e;let i=class extends t{constructor(){super(...arguments),this[e]=!0}get publishingInfo(){if(this.destroyed)return null;const n=this._get("publishingInfo");if(n)return n;const r=new E9e;return this._checkPublishingStatus(r),r}_checkPublishingStatus(n){let o=0;const a=async u=>{let h;n.updating=!0;try{h=await this.fetchPublishingStatus()}catch{h="unavailable"}h!=="published"&&h!=="unavailable"||(n.status==="publishing"&&this.refresh(),l.remove()),n.status=h,n.updating=!1,l.removed||(o=setTimeout(a,u,u+125))},l={removed:!1,remove(){this.removed=!0,clearTimeout(o)}};this.when().catch(()=>l.remove()),a(250),this.own(l)}};return e=C9e,c([d({readOnly:!0,clonable:!1})],i.prototype,"publishingInfo",null),i=c([O(mfe)],i),i},WC=new we,AE=new WeakMap;function T9e(t){gfe(t)&&WC.push(t)}function k9e(t){gfe(t)&&WC.includes(t)&&WC.remove(t)}function gfe(t){return t!=null&&typeof t=="object"&&"refreshInterval"in t&&"refresh"in t}function yfe(t,e){return Number.isFinite(t)&&Number.isFinite(e)?e<=0?t:yfe(e,t%e):0}let tF=0,jT=0;function $9e(){const t=Date.now();for(const e of WC)e.refreshInterval&&t-(AE.get(e)??0)+5>=6e4*e.refreshInterval&&(AE.set(e,t),e.refresh(t))}uoe(()=>{const t=Date.now();let e=0;for(const i of WC)e=yfe(Math.round(6e4*i.refreshInterval),e),i.refreshInterval?AE.get(i)||AE.set(i,t):AE.delete(i);if(e!==jT){if(jT=e,clearInterval(tF),jT===0)return void(tF=0);tF=setInterval($9e,jT)}});const A9e=t=>{let e=class extends t{constructor(...i){super(...i),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=F8(()=>this.hasDataChanged()),this.when().then(()=>{T9e(this)},()=>{})}destroy(){k9e(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(i=Date.now()){Qy(this._debounceHasDataChanged()).then(n=>{n&&this._set("refreshTimestamp",i),this.emit("refresh",{dataChanged:n})},n=>{se.getLogger(this.declaredClass).error(n),this.emit("refresh",{dataChanged:!1,error:n})})}async hasDataChanged(){return!0}};return c([d({type:Number,cast:i=>i>=.1?i:i<=0?0:.1,json:{write:!0}})],e.prototype,"refreshInterval",void 0),c([d({readOnly:!0})],e.prototype,"refreshTimestamp",void 0),c([d()],e.prototype,"refreshParameters",null),e=c([O("esri.layers.mixins.RefreshableLayer")],e),e},vfe=t=>{let e=class extends t{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get effectiveScaleRange(){const i={minScale:this.minScale,maxScale:this.maxScale},n=this.parent;n&&"effectiveScaleRange"in n&&M9e(i,n.effectiveScaleRange);const r=this._get("effectiveScaleRange");return r&&r.minScale===i.minScale&&r.maxScale===i.maxScale?r:i}};return c([d({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"minScale",void 0),c([d({type:Number,nonNullable:!0,json:{write:!0}})],e.prototype,"maxScale",void 0),c([d({readOnly:!0})],e.prototype,"effectiveScaleRange",null),e=c([O("esri.layers.mixins.ScaleRangeLayer")],e),e};function M9e(t,e){return t.minScale=t.minScale>0?e.minScale>0?Math.min(t.minScale,e.minScale):t.minScale:e.minScale,t.maxScale=t.maxScale>0?e.maxScale>0?Math.max(t.maxScale,e.maxScale):t.maxScale:e.maxScale,t}const bfe=kr()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});let PS=class extends _t(Y){constructor(e){super(e),this.unit="milliseconds",this.value=0}toMilliseconds(){return Gze(this.value,this.unit,"milliseconds")}};c([Ce(bfe,{nonNullable:!0})],PS.prototype,"unit",void 0),c([d({type:Number,json:{write:!0},nonNullable:!0})],PS.prototype,"value",void 0),PS=c([O("esri.TimeInterval")],PS);const ww=PS;function tK(t,e){return ww.fromJSON({value:t,unit:e})}let ps=class extends _t(Y){constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,i){if(!i.timeExtent||!Array.isArray(i.timeExtent)||i.timeExtent.length!==2)return null;const n=new Date(i.timeExtent[0]),r=new Date(i.timeExtent[1]);return new Zs({start:n,end:r})}writeFullTimeExtent(e,i){e&&A(e.start)&&A(e.end)?i.timeExtent=[e.start.getTime(),e.end.getTime()]:i.timeExtent=null}readInterval(e,i){return i.timeInterval&&i.timeIntervalUnits?tK(i.timeInterval,i.timeIntervalUnits):i.defaultTimeInterval&&i.defaultTimeIntervalUnits?tK(i.defaultTimeInterval,i.defaultTimeIntervalUnits):null}writeInterval(e,i){i.timeInterval=(e==null?void 0:e.toJSON().value)??null,i.timeIntervalUnits=(e==null?void 0:e.toJSON().unit)??null}};c([d({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],ps.prototype,"cumulative",void 0),c([d({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],ps.prototype,"endField",void 0),c([d({type:Zs,json:{write:{enabled:!0,allowNull:!0}}})],ps.prototype,"fullTimeExtent",void 0),c([de("fullTimeExtent",["timeExtent"])],ps.prototype,"readFullTimeExtent",null),c([fe("fullTimeExtent")],ps.prototype,"writeFullTimeExtent",null),c([d({type:Boolean,json:{write:!0}})],ps.prototype,"hasLiveData",void 0),c([d({type:ww,json:{write:{enabled:!0,allowNull:!0}}})],ps.prototype,"interval",void 0),c([de("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],ps.prototype,"readInterval",null),c([fe("interval")],ps.prototype,"writeInterval",null),c([d({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],ps.prototype,"startField",void 0),c([d({type:_w,json:{write:{enabled:!0,allowNull:!0}}})],ps.prototype,"timeReference",void 0),c([d({type:String,json:{write:{enabled:!0,allowNull:!0}}})],ps.prototype,"trackIdField",void 0),c([d({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],ps.prototype,"useTime",void 0),ps=c([O("esri.layers.support.TimeInfo")],ps);const _fe=ps,O9e=t=>{let e=class extends t{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(i,n){const r=n.timeInfo.exportOptions;if(!r)return null;const s=r.timeOffset,o=bfe.fromJSON(r.timeOffsetUnits);return s&&o?new ww({value:s,unit:o}):null}set timeInfo(i){hae(i,this.fieldsIndex),this._set("timeInfo",i)}};return c([d({type:Zs,json:{write:!1}})],e.prototype,"timeExtent",void 0),c([d({type:ww})],e.prototype,"timeOffset",void 0),c([de("service","timeOffset",["timeInfo.exportOptions"])],e.prototype,"readOffset",null),c([d({value:null,type:_fe,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],e.prototype,"timeInfo",null),c([d({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],e.prototype,"useViewTime",void 0),e=c([O("esri.layers.mixins.TemporalLayer")],e),e},iK=new Fe({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let Dp=class extends _t(Y){constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};c([d({json:{write:!0}})],Dp.prototype,"name",void 0),c([d({json:{write:!0}})],Dp.prototype,"description",void 0),c([d({json:{read:iK.read,write:iK.write}})],Dp.prototype,"drawingTool",void 0),c([d({json:{write:!0}})],Dp.prototype,"prototype",void 0),c([d({json:{write:!0}})],Dp.prototype,"thumbnail",void 0),Dp=c([O("esri.layers.support.FeatureTemplate")],Dp);const r7=Dp;let Pd=class extends _t(Y){constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const i={};for(const n of Object.keys(e))i[n]=yR(e[n]);return i}writeDomains(e,i){var r;const n={};for(const s of Object.keys(e))e[s]&&(n[s]=(r=e[s])==null?void 0:r.toJSON());i.domains=n}};c([d({json:{write:!0}})],Pd.prototype,"id",void 0),c([d({json:{write:!0}})],Pd.prototype,"name",void 0),c([d({json:{write:!0}})],Pd.prototype,"domains",void 0),c([de("domains")],Pd.prototype,"readDomains",null),c([fe("domains")],Pd.prototype,"writeDomains",null),c([d({type:[r7],json:{write:!0}})],Pd.prototype,"templates",void 0),Pd=c([O("esri.layers.support.FeatureType")],Pd);const wfe=Pd;function P9e(t){return t.type==="date"||t.type==="esriFieldTypeDate"}function nK(t){return t.type==="oid"||t.type==="esriFieldTypeOID"}function rK(t){return t.type==="global-id"||t.type==="esriFieldTypeGlobalID"}let R9e=class{constructor(e=[]){if(this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;this.fields=e;const i=[];for(const n of e){const r=n==null?void 0:n.name,s=oK(n==null?void 0:n.name);if(r&&s){const o=sK(r);this._fieldsMap.set(r,n),this._fieldsMap.set(o,n),this._normalizedFieldsMap.set(s,n),i.push(o),P9e(n)?(this.dateFields.push(n),this._dateFieldsSet.add(n)):_c(n)&&(this._numericFieldsSet.add(n),this.numericFields.push(n)),nK(n)||rK(n)||(n.editable=n.editable==null||!!n.editable,n.nullable=n.nullable==null||!!n.nullable)}}i.sort(),this.uid=i.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)nK(e)||rK(e)||e.nullable||d$e(e)!==void 0||this._requiredFields.push(e)}return this._requiredFields}has(e){return this.get(e)!=null}get(e){if(!e)return;let i=this._fieldsMap.get(e);return i||(i=this._fieldsMap.get(sK(e))??this._normalizedFieldsMap.get(oK(e)),i&&this._fieldsMap.set(e,i),i)}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const i=this.get(e);if(i)return i.name??void 0}};function sK(t){return t.trim().toLowerCase()}function oK(t){var e;return((e=e$e(t))==null?void 0:e.toLowerCase())??""}function L9e(){return{fields:{type:[xB],value:null},fieldsIndex:{readOnly:!0,get(){return new R9e(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(t){this._userOutFields=t,this.notifyChange("outFields")},get:function(){var e;const t=this._userOutFields;if(!t||!t.length)return null;if(t.includes("*"))return["*"];if(!this.fields)return t;for(const i of t)((e=this.fieldsIndex)==null?void 0:e.has(i))||se.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field",`Invalid field ${i} found in outFields`,{layer:this,outFields:t});return Q8(this.fieldsIndex,t)}}}}const iF=se.getLogger("esri.layers.support.labelingInfo"),D9e=/\[([^\[\]]+)\]/gi;function aK(t,e,i){return t?t.map(n=>{const r=new OR;if(r.read(n,i),r.labelExpression){const s=e.fields||e.layerDefinition&&e.layerDefinition.fields||this.fields;r.labelExpression=r.labelExpression.replace(D9e,(o,a)=>`[${F9e(a,s)}]`)}return r}):null}function F9e(t,e){if(!e)return t;const i=t.toLowerCase();for(let n=0;n<e.length;n++){const r=e[n].name;if(r.toLowerCase()===i)return r}return t}const N9e={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function b_t(t,e){const i=G(t);return i.some(n=>z9e(n,e))?[]:i}function z9e(t,e){const i=t.labelPlacement,n=N9e[e];if(!t.symbol)return iF.warn("No ILabelClass symbol specified."),!0;if(!n)return iF.error(new N("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${e}' is not supported`)),!0;if(!n.includes(i)){const r=n[0];i&&iF.warn(`Found invalid label placement type ${i} for ${e}. Defaulting to ${r}`),t.labelPlacement=r}return!1}const tc=[];function j9e(t,e){if(qhe(t.url??""))return!0;const{wkid:i}=e;for(const n of tc){if((t.version??0)>=n[0])return!0;if(typeof n[1]=="function"&&(n[1]=n[1]()),n[1].has(i))return!1}return!0}tc.push([10.91,()=>{const t=new Set([9709,9716,9741,9761,9766]);for(let e=9712;e<=9713;e++)t.add(e);for(let e=9748;e<=9749;e++)t.add(e);for(let e=20904;e<=20932;e++)t.add(e);for(let e=21004;e<=21032;e++)t.add(e);for(let e=21207;e<=21264;e++)t.add(e);for(let e=21307;e<=21364;e++)t.add(e);for(let e=102759;e<=102760;e++)t.add(e);for(let e=102901;e<=102955;e++)t.add(e);return t}]),tc.push([10.9,()=>{const t=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let e=9356;e<=9360;e++)t.add(e);for(let e=9404;e<=9407;e++)t.add(e);for(let e=9476;e<=9482;e++)t.add(e);for(let e=9487;e<=9494;e++)t.add(e);for(let e=9697;e<=9699;e++)t.add(e);return t}]),tc.push([10.81,()=>{const t=new Set([9265,9333,103598,103699]);for(let e=9248;e<=9254;e++)t.add(e);for(let e=9271;e<=9273;e++)t.add(e);for(let e=9284;e<=9285;e++)t.add(e);for(let e=21453;e<=21463;e++)t.add(e);return t}]),tc.push([10.8,()=>{const t=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let e=8035;e<=8036;e++)t.add(e);for(let e=8455;e<=8456;e++)t.add(e);for(let e=8518;e<=8529;e++)t.add(e);for(let e=8533;e<=8536;e++)t.add(e);for(let e=8538;e<=8540;e++)t.add(e);for(let e=8677;e<=8679;e++)t.add(e);for(let e=8902;e<=8903;e++)t.add(e);for(let e=8907;e<=8910;e++)t.add(e);for(let e=8949;e<=8951;e++)t.add(e);for(let e=8972;e<=8987;e++)t.add(e);for(let e=9039;e<=9040;e++)t.add(e);for(let e=9068;e<=9069;e++)t.add(e);for(let e=9140;e<=9141;e++)t.add(e);for(let e=9148;e<=9150;e++)t.add(e);for(let e=9153;e<=9159;e++)t.add(e);for(let e=9205;e<=9218;e++)t.add(e);for(let e=9221;e<=9222;e++)t.add(e);for(let e=54098;e<=54101;e++)t.add(e);return t}]),tc.push([10.71,()=>{const t=new Set([6316]);for(let e=8351;e<=8353;e++)t.add(e);for(let e=9294;e<=9297;e++)t.add(e);for(let e=22619;e<=22621;e++)t.add(e);for(let e=103586;e<=103594;e++)t.add(e);return t}]),tc.push([10.7,()=>{const t=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let e=8065;e<=8068;e++)t.add(e);for(let e=8082;e<=8083;e++)t.add(e);for(let e=8379;e<=8385;e++)t.add(e);for(let e=8836;e<=8840;e++)t.add(e);for(let e=8857;e<=8860;e++)t.add(e);for(let e=53035;e<=53037;e++)t.add(e);for(let e=54090;e<=54091;e++)t.add(e);for(let e=102498;e<=102499;e++)t.add(e);return t}]),tc.push([10.61,()=>new Set([102497])]),tc.push([10.6,()=>{const t=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let e=7755;e<=7787;e++)t.add(e);for(let e=7791;e<=7795;e++)t.add(e);for(let e=7799;e<=7801;e++)t.add(e);for(let e=7825;e<=7831;e++)t.add(e);for(let e=7877;e<=7878;e++)t.add(e);for(let e=7882;e<=7883;e++)t.add(e);for(let e=7991;e<=7992;e++)t.add(e);for(let e=8042;e<=8043;e++)t.add(e);for(let e=8058;e<=8059;e++)t.add(e);for(let e=8311;e<=8348;e++)t.add(e);for(let e=9060;e<=9067;e++)t.add(e);for(let e=102562;e<=102568;e++)t.add(e);for(let e=102799;e<=102900;e++)t.add(e);return t}]),tc.push([10.51,()=>{const t=new Set([7683,7881,7886,7899,8888,9e3]);for(let e=8013;e<=8032;e++)t.add(e);for(let e=9053;e<=9057;e++)t.add(e);for(let e=104017;e<=104018;e++)t.add(e);for(let e=104971;e<=104974;e++)t.add(e);return t}]),tc.push([10.5,()=>{const t=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]);for(let e=4087;e<=4088;e++)t.add(e);for(let e=5896;e<=5899;e++)t.add(e);for(let e=7005;e<=7007;e++)t.add(e);for(let e=7057;e<=7070;e++)t.add(e);for(let e=7073;e<=7082;e++)t.add(e);for(let e=7109;e<=7128;e++)t.add(e);for(let e=7844;e<=7859;e++)t.add(e);return t}]);async function V9e(t,e,i){const n=t&&t.getAtOrigin&&t.getAtOrigin("renderer",e.origin);if(n&&n.type==="unique-value"&&n.styleOrigin){const r=await dR(n.populateFromStyle());if(Xi(i),r.ok===!1){const s=r.error;e&&e.messages&&e.messages.push(new bl("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:e})),t.clear("renderer",e==null?void 0:e.origin)}}}const U9e=["oid","global-id"],B9e=["oid","global-id","guid"];function H9e({displayField:t,editFieldsInfo:e,fields:i,objectIdField:n,title:r},s){if(!i)return null;const o=Z9e({editFieldsInfo:e,fields:i,objectIdField:n},s);if(!o.length)return null;const a=Q9e({titleBase:r,fields:i,displayField:t}),l=X9e();return new Cm({title:a,content:l,fieldInfos:o})}const G9e=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],q9e=(t,{editFieldsInfo:e,objectIdField:i,visibleFieldNames:n})=>n?n.has(t.name):!xfe(t.name,e)&&(!i||t.name!==i)&&!U9e.includes(t.type)&&!G9e.some(r=>r.test(t.name));function W9e(t,e){const i=t;return e&&(t=t.filter(n=>!e.includes(n.type))),t===i&&(t=t.slice()),t.sort(J9e),t}function J9e(t,e){return t.type==="oid"?-1:e.type==="oid"?1:lK(t)?-1:lK(e)?1:(t.alias||t.name).toLocaleLowerCase().localeCompare((e.alias||e.name).toLocaleLowerCase())}function xfe(t,e){if(!t||!e)return!1;const{creationDateField:i,creatorField:n,editDateField:r,editorField:s}=e;return[i&&i.toLowerCase(),n&&n.toLowerCase(),r&&r.toLowerCase(),s&&s.toLowerCase()].includes(t.toLowerCase())}function Y9e(t,e){return t.editable&&!B9e.includes(t.type)&&!xfe(t.name,e)}function Z9e({editFieldsInfo:t,fields:e,objectIdField:i},n){return W9e(e??[],(n==null?void 0:n.ignoreFieldTypes)||eBe).map(r=>new Yw({fieldName:r.name,isEditable:Y9e(r,t),label:r.alias,format:K9e(r),visible:q9e(r,{editFieldsInfo:t,objectIdField:i,visibleFieldNames:n==null?void 0:n.visibleFieldNames})}))}function K9e(t){switch(t.type){case"small-integer":case"integer":case"single":return new Qb({digitSeparator:!0,places:0});case"double":return new Qb({digitSeparator:!0,places:2});case"date":return new Qb({dateFormat:"long-month-day-year"});default:return t.type==="string"&&yae(t.name)?new Qb({digitSeparator:!0,places:0}):null}}function X9e(){return[new lw,new SC]}function Q9e(t){const e=n$e(t),{titleBase:i}=t;return e?`${i}: {${e.trim()}}`:i??""}function lK(t){return(t.name&&t.name.toLowerCase())==="name"?!0:(t.alias&&t.alias.toLowerCase())==="name"}const eBe=["geometry","blob","raster","guid","xml"],$s="FeatureLayer",Sfe="esri.layers.FeatureLayer",tBe=se.getLogger(Sfe);function VT(t,e){return new N("layer:unsupported",`Layer (${t.title}, ${t.id}) of type '${t.declaredClass}' ${e}`,{layer:t})}function cK(t){return t&&t instanceof we}const nF=L9e();function rF(t,e,i){const n=!!(i!=null&&i.writeLayerSchema);return{enabled:n,ignoreOrigin:n}}let ke=class extends C8e(p9e(AVe(I9e(TVe(Whe(v9e(O9e(vfe(A9e(CVe(m9e(S9e(TR(IVe(gVe(_t(qC))))))))))))))))){constructor(...e){super(...e),this._handles=new wn,this.charts=null,this.copyright=null,this.displayField=null,this.dynamicDataSource=null,this.fields=null,this.fieldsIndex=null,this.formTemplate=null,this.fullExtent=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.spatialReference=Ge.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.type="feature",this.typeIdField=null,this.types=null,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=si(this._handles)}normalizeCtorArgs(e,i){return typeof e=="string"?{url:e,...i}:e}load(e){var r;const i=A(e)?e.signal:null;if((r=this.portalItem)!=null&&r.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then(s=>this.initLayerProperties(s))),Promise.resolve(this);const n=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(Tu).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const s=await this._fetchFirstLayerId(i);s!=null&&(this.layerId=s)}if(!this.url&&!this._hasMemorySource())throw new N("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.initLayerProperties(await this.createGraphicsSource(i))}).then(()=>this._setUserPrivileges(this.serviceItemId,e)).then(()=>c8e(this,e));return this.addResolvingPromise(n),Promise.resolve(this)}readCapabilities(e,i){return i=i.layerDefinition||i,tfe(i,this.url)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")??0)+1}get editingEnabled(){var e;return!(this.loaded&&!((e=this.capabilities)!=null&&e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}readEditingEnabled(e,i){return this._readEditingEnabled(i,!1)}readEditingEnabledFromWebMap(e,i,n){return this._readEditingEnabled(i,!0,n)}writeEditingEnabled(e,i){this._writeEditingEnabled(e,i,!1)}writeEditingEnabledToWebMap(e,i,n,r){this._writeEditingEnabled(e,i,!0,r)}get effectiveEditingEnabled(){return u8e(this)}readIsTable(e,i){return(i=(i==null?void 0:i.layerDefinition)??i).type==="Table"||!i.geometryType}writeIsTable(e,i,n,r){r!=null&&r.writeLayerSchema&&rr(n,e?"Table":"Feature Layer",i)}readGlobalIdField(e,i){return Qpe(i.layerDefinition||i)}readObjectIdField(e,i){return efe(i.layerDefinition||i)}get parsedUrl(){const e=_i(this.url);return e!=null&&(this.dynamicDataSource!=null?e.path=w0(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=w0(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){TW(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,i,n){var s;const r=(s=(i=i.layerDefinition||i).drawingInfo)==null?void 0:s.renderer;if(r){const o=GC(r,i,n)??void 0;return o||tBe.error("Failed to create renderer",{rendererDefinition:i.drawingInfo.renderer,layer:this,context:n}),o}if(i.defaultSymbol)return i.types&&i.types.length?new XI({defaultSymbol:sF(i.defaultSymbol,i,n),field:i.typeIdField,uniqueValueInfos:i.types.map(o=>({id:o.id,symbol:sF(o.symbol,o,n)}))}):new yw({symbol:sF(i.defaultSymbol,i,n)})}set source(e){const i=this._get("source");i!==e&&(cK(i)&&this._resetMemorySource(i),cK(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof we?new Gd({layer:this,items:e}):e:null}readSource(e,i){const n=ZI.fromJSON(i.featureSet);return new Gd({layer:this,items:(n==null?void 0:n.features)??[]})}readTemplates(e,i){const n=i.editFieldsInfo,r=n&&n.creatorField,s=n&&n.editorField;return e=e&&e.map(o=>r7.fromJSON(o)),this._fixTemplates(e,r),this._fixTemplates(e,s),e}readTitle(e,i){var s;const n=((s=i.layerDefinition)==null?void 0:s.name)??i.name,r=i.title||i.layerDefinition&&i.layerDefinition.title;if(n){const o=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?_Ve(this.url,n):n;let a=n;if(!a&&this.url){const l=dm(this.url);A(l)&&(a=l.title)}return a?(this.sublayerTitleMode==="item-title-and-service-name"&&o&&o!==a&&(a=o+" - "+a),VB(a)):void 0}if(this.sublayerTitleMode==="item-title"&&r)return r}readTitleFromWebMap(e,i){return i.title||i.layerDefinition&&i.layerDefinition.name}readTypeIdField(e,i){let n=(i=i.layerDefinition||i).typeIdField;if(n&&i.fields){n=n.toLowerCase();const r=i.fields.find(s=>s.name.toLowerCase()===n);r&&(n=r.name)}return n}readTypes(e,i){e=(i=i.layerDefinition||i).types;const n=i.editFieldsInfo,r=n&&n.creatorField,s=n&&n.editorField;return e&&e.map(o=>(o=wfe.fromJSON(o),this._fixTemplates(o.templates,r),this._fixTemplates(o.templates,s),o))}readVisible(e,i){return i.layerDefinition&&i.layerDefinition.defaultVisibility!=null?!!i.layerDefinition.defaultVisibility:i.visibility!=null?!!i.visibility:void 0}async addAttachment(e,i){return JUe(this,e,i,$s)}async updateAttachment(e,i,n){return YUe(this,e,i,n,$s)}async applyEdits(e,i){return ZUe(this,e,i)}on(e,i){return super.on(e,i)}createPopupTemplate(e){return H9e(this,e)}async createGraphicsSource(e){if(this._hasMemorySource()&&this.source)return this.source.load({signal:e});const{default:i}=await D8(q(()=>import("./FeatureLayerSource-10f8929f.js"),["assets/FeatureLayerSource-10f8929f.js","assets/assetEditingSupport-2cebf928.js","assets/clientSideDefaults-041b6800.js","assets/QueryEngineCapabilities-42e44ded.js","assets/QueryTask-db764d68.js","assets/executeForIds-34d9b873.js"]),e);return new i({layer:this}).load({signal:e})}createQuery(){const e=o8e(this);e.dynamicDataSource=this.dynamicDataSource;const i=A(this.subtypeCode)?`${this.subtypeField} = ${this.subtypeCode}`:null,n=Qje(this.definitionExpression,i);return e.where=n||"1=1",e}async deleteAttachments(e,i){return KUe(this,e,i,$s)}async fetchRecomputedExtents(e){return XUe(this,e,$s)}getFeatureType(e){const{typeIdField:i,types:n}=this;if(!i||!e)return null;const r=e.attributes?e.attributes[i]:void 0;if(r==null)return null;let s=null;return n==null||n.some(o=>{const{id:a}=o;return a!=null&&(a.toString()===r.toString()&&(s=o),!!s)}),s}getFieldDomain(e,i){const n=i&&i.feature,r=this.getFeatureType(n);if(r){const s=r.domains&&r.domains[e];if(s&&s.type!=="inherited")return s}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}async queryAttachments(e,i){return QUe(this,e,i,$s)}async queryFeatures(e,i){const n=await this.load(),r=await n.source.queryFeatures(pl.from(e)??n.createQuery(),i);if(r!=null&&r.features)for(const s of r.features)s.layer=s.sourceLayer=n;return r}async queryObjectIds(e,i){return e8e(this,e,i,$s)}async queryFeatureCount(e,i){return t8e(this,e,i,$s)}async queryExtent(e,i){return i8e(this,e,i,$s)}async queryRelatedFeatures(e,i){return n8e(this,e,i,$s)}async queryRelatedFeaturesCount(e,i){return r8e(this,e,i,$s)}async queryTopFeatures(e,i){var o;const{source:n,capabilities:r}=await this.load();if(!n.queryTopFeatures||!((o=r==null?void 0:r.query)!=null&&o.supportsTopFeaturesQuery))throw new N($s,"Layer source does not support queryTopFeatures capability");const s=await n.queryTopFeatures(ST.from(e),i);if(s!=null&&s.features)for(const a of s.features)a.layer=a.sourceLayer=this;return s}async queryTopObjectIds(e,i){const{source:n,capabilities:r}=await this.load();if(!n.queryTopObjectIds||!(r!=null&&r.query.supportsTopFeaturesQuery))throw new N($s,"Layer source does not support queryTopObjectIds capability");return n.queryTopObjectIds(ST.from(e),i)}async queryTopFeaturesExtent(e,i){var s;const{source:n,capabilities:r}=await this.load();if(!n.queryTopExtents||!((s=r==null?void 0:r.query)!=null&&s.supportsTopFeaturesQuery))throw new N($s,"Layer source does not support queryTopExtents capability");return n.queryTopExtents(ST.from(e),i)}async queryTopFeatureCount(e,i){var s;const{source:n,capabilities:r}=await this.load();if(!n.queryTopCount||!((s=r==null?void 0:r.query)!=null&&s.supportsTopFeaturesQuery))throw new N($s,"Layer source does not support queryFeatureCount capability");return n.queryTopCount(ST.from(e),i)}read(e,i){const n=e.featureCollection;if(n){const r=n.layers;r&&r.length===1&&(super.read(r[0],i),n.showLegend!=null&&super.read({showLegend:n.showLegend},i))}super.read(e,i),i&&i.origin==="service"&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}write(e,i){i={...i,origin:(i==null?void 0:i.origin)??void 0,writeLayerSchema:(i==null?void 0:i.writeLayerSchema)??this._hasMemorySource()};const{origin:n,layerContainerType:r,messages:s}=i;if(this.dynamicDataSource)return s==null||s.push(VT(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if(n==="web-scene"||n==="web-map"&&r!=="tables")return s==null||s.push(VT(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return s==null||s.push(VT(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&n==="web-map"&&r==="tables")return s==null||s.push(VT(this,"using a non-table source cannot be written to tables in web maps")),null;return super.write(e,i)}clone(){if(this._hasMemorySource())throw new N($s,`FeatureLayer (title: ${this.title}, id: ${this.id}) created using in-memory source cannot be cloned`);return super.clone()}serviceSupportsSpatialReference(e){var i;return!!this.loaded&&(((i=this.source)==null?void 0:i.type)==="memory"||j9e(this,e))}async save(e){return(await q(()=>import("./featureLayerUtils-dff183dd.js"),["assets/featureLayerUtils-dff183dd.js","assets/fetchService-52b55be4.js","assets/jsonContext-c42fadc4.js"])).save(this,e)}async saveAs(e,i){return(await q(()=>import("./featureLayerUtils-dff183dd.js"),["assets/featureLayerUtils-dff183dd.js","assets/fetchService-52b55be4.js","assets/jsonContext-c42fadc4.js"])).saveAs(this,e,i)}_readEditingEnabled(e,i,n){var s;let r=(s=e.layerDefinition)==null?void 0:s.capabilities;return r?this._hasEditingCapability(r):(r=e.capabilities,i&&(n==null?void 0:n.origin)==="web-map"&&!this._hasMemorySource()&&r?this._hasEditingCapability(r):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(i=>i.trim()).includes("editing")}_writeEditingEnabled(e,i,n,r){var s,o;if(!e){const a=(o=(s=this.capabilities)==null?void 0:s.operations)!=null&&o.supportsSync?"Query,Sync":"Query";rr("layerDefinition.capabilities",a,i),n&&!(r!=null&&r.writeLayerSchema)&&(i.capabilities=a)}}_getLayerDomain(e){const i=this.fieldsIndex.get(e);return i?i.domain:null}_fetchFirstLayerId(e){return rt(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(i=>{const n=i.data;if(n)return Array.isArray(n.layers)&&n.layers.length>0?n.layers[0].id:Array.isArray(n.tables)&&n.tables.length>0?n.tables[0].id:void 0})}async initLayerProperties(e){var i;return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:(i=this.portalItem)==null?void 0:i.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),TW(this.renderer,this.fieldsIndex),hae(this.timeInfo,this.fieldsIndex),V9e(this,{origin:"service"})}async hasDataChanged(){return s8e(this)}async fetchPublishingStatus(){const e=this.source;return e!=null&&e.fetchPublishingStatus?e.fetchPublishingStatus():"unavailable"}_verifyFields(){var i,n;const e=((i=this.parsedUrl)==null?void 0:i.path)??"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||(n=this.fields)!=null&&n.some(r=>r.type==="geometry")||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,i){e&&e.forEach(n=>{const r=n.prototype&&n.prototype.attributes;r&&i&&delete r[i]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new N("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new N("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(i=>{i.layer=this,i.sourceLayer=this}),this._handles.add([e.on("after-add",i=>{i.item.layer=this,i.item.sourceLayer=this}),e.on("after-remove",i=>{i.item.layer=null,i.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(i=>{i.layer=null,i.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}};c([de("service","capabilities")],ke.prototype,"readCapabilities",null),c([d({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],ke.prototype,"charts",void 0),c([d({readOnly:!0})],ke.prototype,"createQueryVersion",null),c([d({json:{read:{source:"layerDefinition.copyrightText"}}})],ke.prototype,"copyright",void 0),c([d({json:{read:{source:"layerDefinition.displayField"}}})],ke.prototype,"displayField",void 0),c([d({types:_o,readOnly:!0})],ke.prototype,"defaultSymbol",void 0),c([d({type:gc})],ke.prototype,"dynamicDataSource",void 0),c([d({type:Boolean})],ke.prototype,"editingEnabled",null),c([de(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],ke.prototype,"readEditingEnabled",null),c([de("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],ke.prototype,"readEditingEnabledFromWebMap",null),c([fe(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],ke.prototype,"writeEditingEnabled",null),c([fe("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],ke.prototype,"writeEditingEnabledToWebMap",null),c([d({readOnly:!0})],ke.prototype,"effectiveEditingEnabled",null),c([d({...nF.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:rF}}}}})],ke.prototype,"fields",void 0),c([d(nF.fieldsIndex)],ke.prototype,"fieldsIndex",void 0),c([d({type:cVe,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],ke.prototype,"formTemplate",void 0),c([d({json:{read:{source:"layerDefinition.extent"}}})],ke.prototype,"fullExtent",void 0),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:rF,writer(t,e,i){const n=t?vV.toJSON(t):null;n&&rr(i,n,e)}}}},read:{source:"layerDefinition.geometryType",reader:vV.read}}})],ke.prototype,"geometryType",void 0),c([d({json:{read:{source:"layerDefinition.hasM"}}})],ke.prototype,"hasM",void 0),c([d({json:{read:{source:"layerDefinition.hasZ"}}})],ke.prototype,"hasZ",void 0),c([d(UVe)],ke.prototype,"id",void 0),c([d({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],ke.prototype,"infoFor3D",void 0),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],ke.prototype,"isTable",void 0),c([de("service","isTable",["type","geometryType"]),de("isTable",["layerDefinition.type","layerDefinition.geometryType"])],ke.prototype,"readIsTable",null),c([fe("web-map","isTable")],ke.prototype,"writeIsTable",null),c([d(HB)],ke.prototype,"labelsVisible",void 0),c([d({type:[OR],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:aK},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:aK},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],ke.prototype,"labelingInfo",void 0),c([d((()=>{const t=G(VVe);return t.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer(e,i,n){rr(n,GP(e),i)}}},t})())],ke.prototype,"opacity",void 0),c([d(zVe)],ke.prototype,"legendEnabled",void 0),c([d({type:["show","hide"],json:(()=>{const t=G(Qhe.json);return t.origins["portal-item"]={read:!1,write:!1},t})()})],ke.prototype,"listMode",void 0),c([de("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],ke.prototype,"readGlobalIdField",null),c([d({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:rF}}}}})],ke.prototype,"objectIdField",void 0),c([de("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],ke.prototype,"readObjectIdField",null),c([d({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],ke.prototype,"operationalLayerType",void 0),c([d(nF.outFields)],ke.prototype,"outFields",void 0),c([d({readOnly:!0})],ke.prototype,"parsedUrl",null),c([d({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ke.prototype,"path",void 0),c([d(BB)],ke.prototype,"popupEnabled",void 0),c([d({type:Cm,json:{name:"popupInfo",write:!0}})],ke.prototype,"popupTemplate",void 0),c([d({readOnly:!0})],ke.prototype,"defaultPopupTemplate",null),c([d({types:IR,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:Jje,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(t,e,i)=>({ignoreOrigin:i==null?void 0:i.writeLayerSchema})}}})],ke.prototype,"renderer",null),c([de("service","renderer",["drawingInfo.renderer","defaultSymbol"]),de("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],ke.prototype,"readRenderer",null),c([d((()=>{const t=G(FVe);return t.json.origins["portal-item"]={read:!1,write:!1},t})())],ke.prototype,"screenSizePerspectiveEnabled",void 0),c([d({clonable:!1})],ke.prototype,"source",null),c([st("source")],ke.prototype,"castSource",null),c([de("portal-item","source",["featureSet"]),de("web-map","source",["featureSet"])],ke.prototype,"readSource",null),c([d({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],ke.prototype,"spatialReference",void 0),c([d({type:Number})],ke.prototype,"subtypeCode",void 0),c([d({type:[r7]})],ke.prototype,"templates",void 0),c([de("templates",["editFieldsInfo","creatorField","editorField","templates"])],ke.prototype,"readTemplates",null),c([d({type:_fe})],ke.prototype,"timeInfo",void 0),c([d()],ke.prototype,"title",void 0),c([de("service","title",["name"]),de("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],ke.prototype,"readTitle",null),c([de("web-map","title",["layerDefinition.name","title"])],ke.prototype,"readTitleFromWebMap",null),c([d({type:String})],ke.prototype,"sublayerTitleMode",void 0),c([d({json:{read:!1}})],ke.prototype,"type",void 0),c([d({type:String})],ke.prototype,"typeIdField",void 0),c([de("service","typeIdField"),de("typeIdField",["layerDefinition.typeIdField"])],ke.prototype,"readTypeIdField",null),c([d({type:[wfe]})],ke.prototype,"types",void 0),c([de("service","types",["types"]),de("types",["layerDefinition.types"])],ke.prototype,"readTypes",null),c([d({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],ke.prototype,"visible",void 0),c([de("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],ke.prototype,"readVisible",null),ke=c([O(Sfe)],ke);const sF=bm({types:QP}),Ph=ke,w_t=Object.freeze(Object.defineProperty({__proto__:null,default:Ph},Symbol.toStringTag,{value:"Module"})),iBe=["$datastore","$map","$layer","$aggregatedfeatures"],nBe="esri.widgets.Feature.support.arcadeFeatureUtils",rBe=se.getLogger(nBe);function sBe(t){return typeof t=="string"?WI(aB(t)):Array.isArray(t)?oBe(t):(t==null?void 0:t.declaredClass)==="esri.arcade.Dictionary"?aBe(t):t}function oBe(t){return`<ul class="esri-widget__list">${t.map(e=>`<li>${typeof e=="string"?WI(aB(e)):e}</li>`).join("")}</ul>`}function aBe(t){return`<table class="esri-widget__table">${t.keys().map(e=>{const i=t.field(e);return`<tr><th>${e}</th><td>${typeof i=="string"?WI(aB(i)):i}</td></tr>`}).join("")}</table>`}function lBe({aggregatedFeatures:t,arcadeUtils:e,featureSetVars:i,context:n,viewInfo:r,map:s,graphic:o,interceptor:a}){i.forEach(l=>{const u=l.toLowerCase(),h=r.sr,p={map:s,spatialReference:h,interceptor:a};if(u==="$map"&&(n.vars[u]=e.convertMapToFeatureSetCollection(p)),u==="$layer"&&(n.vars[u]=e.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:h,interceptor:a})),u==="$datastore"&&(n.vars[u]=e.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:h,interceptor:a})),u==="$aggregatedfeatures"){const f=o.layer,{fields:g,objectIdField:v,geometryType:b,spatialReference:_,displayField:w}=f,S=new Ph({fields:g,objectIdField:v,geometryType:b,spatialReference:_,displayField:w,...f.type==="feature"?{templates:f.templates,typeIdField:f.typeIdField,types:f.types}:null,source:t});n.vars[u]=e.convertFeatureLayerToFeatureSet({layer:S,spatialReference:_,interceptor:a})}})}function Efe(){return q(()=>import("./arcadeUtils-293d89c6.js").then(t=>t.aw),["assets/arcadeUtils-293d89c6.js","assets/number-a7a9d67b.js","assets/arcadeTimeUtils-9cac350a.js"])}function cBe(t){return"createQuery"in t&&"queryFeatures"in t}async function uBe({graphic:t,view:e}){const{isAggregate:i,layer:n}=t;if(!i||!n||(e==null?void 0:e.type)!=="2d")return[];const r=await e.whenLayerView(n);if(!cBe(r))return[];const s=r.createQuery(),o=t.getObjectId();s.aggregateIds=o!=null?[o]:[];const{features:a}=await r.queryFeatures(s);return a}async function Cfe({expressionInfo:t,arcadeUtils:e,interceptor:i,spatialReference:n,map:r,graphic:s,view:o}){if(!t||!t.expression)return null;const a=e.createSyntaxTree(t.expression),l=iBe.filter(g=>e.hasVariable(a,g)),[u]=await Promise.all([uBe({graphic:s,view:o}),e.loadScriptDependencies(a,!0,l)]),h=e.getViewInfo({spatialReference:n}),p=e.createExecContext(s,h);p.interceptor=i,p.useAsync=!0,lBe({aggregatedFeatures:u,arcadeUtils:e,featureSetVars:l,context:p,viewInfo:h,map:r,graphic:s,interceptor:i});const f=e.createFunction(a,p);return e.executeAsyncFunction(f,p).catch(g=>rBe.error("arcade-execution-error",{error:g,graphic:s,expressionInfo:t}))}async function dBe({expressionInfos:t,spatialReference:e,graphic:i,interceptor:n,map:r,view:s}){if(!t||!t.length)return{};const o=await Efe(),a={};for(const h of t)a[`expression/${h.name}`]=Cfe({expressionInfo:h,arcadeUtils:o,interceptor:n,spatialReference:e,map:r,graphic:i,view:s});const l=await Zi(a),u={};for(const h in l)u[h]=sBe(l[h].value);return u}const hBe=1;let ta=class extends La(_e){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:i}=this;i&&i.abort(),this._abortController=null},this._createVM=()=>{var r,s;const i=(r=this.contentElement)==null?void 0:r.type;(s=this.contentElementViewModel)==null||s.destroy();const n=i==="fields"?new uR:i==="media"?new Hy:i==="text"?new XM:null;this._set("contentElementViewModel",n)},this._compile=async()=>{this._cancelQuery();const i=new AbortController;this._abortController=i,await this._compileExpression(),this._abortController===i&&(this._abortController=null)},this._compileThrottled=P_(this._compile,hBe,this),this._compileExpression=async()=>{const{expressionInfo:i,graphic:n,interceptor:r,spatialReference:s,map:o,view:a,_abortController:l}=this;if(!(i&&n&&s&&o))return void this._set("contentElement",null);const u=await Efe();if(l!==this._abortController)return;const h=await Cfe({arcadeUtils:u,expressionInfo:i,graphic:n,interceptor:r,map:o,spatialReference:s,view:a});if(!h||h.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const p=await h.castAsJsonAsync(l==null?void 0:l.signal),f=p==null?void 0:p.type,g=f==="media"?IC.fromJSON(p):f==="text"?cw.fromJSON(p):f==="fields"?lw.fromJSON(p):null;this._set("contentElement",g)},this.handles.add([X(()=>[this.expressionInfo,this.graphic,this.map,this.spatialReference,this.view],()=>this._compileThrottled(),ut),X(()=>[this.contentElement],()=>this._createVM(),ut)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)??null}set spatialReference(e){this._override("spatialReference",e)}get state(){const{_abortController:e,contentElement:i,contentElementViewModel:n}=this;return e?"loading":i||n?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)??null}set map(e){this._override("map",e)}};c([d()],ta.prototype,"_abortController",void 0),c([d({type:vae})],ta.prototype,"expressionInfo",void 0),c([d({type:en})],ta.prototype,"graphic",void 0),c([d({readOnly:!0})],ta.prototype,"contentElement",void 0),c([d({readOnly:!0})],ta.prototype,"contentElementViewModel",void 0),c([d()],ta.prototype,"interceptor",void 0),c([d()],ta.prototype,"spatialReference",null),c([d({readOnly:!0})],ta.prototype,"state",null),c([d()],ta.prototype,"map",null),c([d()],ta.prototype,"view",void 0),ta=c([O("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],ta);const s7=ta,UT={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let iA=class extends qt{constructor(e,i){super(e,i),this._contentWidget=null,this.viewModel=new s7}initialize(){this.addHandles(X(()=>{var e;return(e=this.viewModel)==null?void 0:e.contentElementViewModel},()=>this._setupExpressionWidget(),ut))}destroy(){this._destroyContentWidget()}renderLoading(){return L("div",{key:"loading-container",class:UT.loadingSpinnerContainer},L("span",{class:this.classes(UT.iconLoading,UT.spinner)}))}render(){var i;const{state:e}=this.viewModel;return L("div",{class:UT.base},e==="loading"?this.renderLoading():e==="disabled"?null:(i=this._contentWidget)==null?void 0:i.render())}_destroyContentWidget(){const{_contentWidget:e}=this;e&&(e.viewModel=null,e.destroy()),this._contentWidget=null}_setupExpressionWidget(){const{contentElementViewModel:e,contentElement:i}=this.viewModel,n=i==null?void 0:i.type;this._destroyContentWidget();const r=e?n==="fields"?new nde({viewModel:e}):n==="media"?new ehe({viewModel:e}):n==="text"?new O$({viewModel:e}):null:null;this._contentWidget=r,this.scheduleRender()}};c([d({type:s7})],iA.prototype,"viewModel",void 0),iA=c([O("esri.widgets.Feature.FeatureExpression")],iA);const pBe=iA,oF=100;let Yt=class extends _t(F0(La(_e))){constructor(e){super(e),this._queryAbortController=null,this._queryPageAbortController=null,this._queryFeatureCountAbortController=null,this.featuresPerPage=10,this.description=null,this.graphic=null,this.layer=null,this.map=null,this.orderByFields=null,this.featureCount=0,this.relationshipId=null,this.showAllEnabled=!1,this.title=null,this._cancelQuery=()=>{const{_queryAbortController:i}=this;i&&i.abort(),this._queryAbortController=null},this._cancelQueryFeatureCount=()=>{const{_queryFeatureCountAbortController:i}=this;i&&i.abort(),this._queryFeatureCountAbortController=null},this._cancelQueryPage=()=>{const{_queryPageAbortController:i}=this;i&&i.abort(),this._queryPageAbortController=null},this._queryController=async()=>{this._cancelQuery();const i=new AbortController;this._queryAbortController=i,await Qy(this._query()),this._queryAbortController===i&&(this._queryAbortController=null)},this._queryFeatureCountController=async()=>{this._cancelQueryFeatureCount();const i=new AbortController;this._queryFeatureCountAbortController=i,await Qy(this._queryFeatureCount()),this._queryFeatureCountAbortController===i&&(this._queryFeatureCountAbortController=null)},this._queryPageController=async()=>{const i=new AbortController;this._queryPageAbortController=i,await Qy(this._queryPage()),this._queryPageAbortController===i&&(this._queryPageAbortController=null)},this._queryThrottled=P_(this._queryController,oF,this),this._queryFeatureCountThrottled=P_(this._queryFeatureCountController,oF,this),this._queryPageThrottled=P_(this._queryPageController,oF,this),this._query=async()=>{const{_queryAbortController:i,relatedFeatures:n}=this;this._destroyRelatedFeatureViewModels(),this.featurePage=1,n.removeAll(),n.addMany(this._sliceFeatures(await this._queryRelatedFeatures({signal:i==null?void 0:i.signal})))},this.handles.add([X(()=>[this.displayCount,this.graphic,this.layer,this.map,this.orderByFieldsFixedCasing,this.relationshipId,this.featuresPerPage,this.showAllEnabled,this.canQuery,this.featureCount],()=>this._queryThrottled(),ut),X(()=>[this.featurePage,this.showAllEnabled],()=>this._queryPageThrottled()),X(()=>[this.layer,this.relationshipId,this.objectId,this.canQuery],()=>this._queryFeatureCountThrottled())])}destroy(){this._destroyRelatedFeatureViewModels(),this.relatedFeatures.removeAll(),this._cancelQuery(),this._cancelQueryFeatureCount(),this._cancelQueryPage()}set featurePage(e){const{featuresPerPage:i,featureCount:n}=this,r=1,s=Math.ceil(n/i)||1;this._set("featurePage",Math.min(Math.max(e,r),s))}get featurePage(){return this._get("featurePage")}get orderByFieldsFixedCasing(){const{orderByFields:e,relatedLayer:i}=this;return e&&(i!=null&&i.loaded)?e.map(n=>{const r=n.clone(),s=jC(n.field,i);return r.field=s,r}):e??[]}get supportsCacheHint(){var e,i,n;return!!((n=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.queryRelated)!=null&&n.supportsCacheHint)}get canQuery(){var i,n;const e=(n=(i=this.layer)==null?void 0:i.capabilities)==null?void 0:n.queryRelated;return!!(this.relatedLayer&&this.relationship&&typeof this.relationshipId=="number"&&typeof this.objectId=="number"&&(e!=null&&e.supportsCount)&&(e!=null&&e.supportsPagination))}get itemDescriptionFieldName(){var e,i;return((i=(e=this.orderByFieldsFixedCasing)==null?void 0:e[0])==null?void 0:i.field)||null}set displayCount(e){this._set("displayCount",Math.min(Math.max(e,0),10))}get displayCount(){return this._get("displayCount")}get objectId(){var e,i;return(this.objectIdField&&((i=(e=this.graphic)==null?void 0:e.attributes)==null?void 0:i[this.objectIdField]))??null}get objectIdField(){var e;return((e=this.layer)==null?void 0:e.objectIdField)||null}get relatedFeatures(){return this._get("relatedFeatures")||new we}get relatedLayer(){const{layer:e,map:i,relationship:n}=this;return e!=null&&e.loaded&&i&&n?s5e(i,e,n)??null:null}get relationship(){var n;const{relationshipId:e,layer:i}=this;return typeof e=="number"?((n=i==null?void 0:i.relationships)==null?void 0:n.find(({id:r})=>r===e))??null:null}get relatedFeatureViewModels(){return this._get("relatedFeatureViewModels")||new we}get state(){const{_queryAbortController:e,_queryFeatureCountAbortController:i,_queryPageAbortController:n,canQuery:r}=this;return i?"loading":e||n?"querying":r?"ready":"disabled"}_destroyRelatedFeatureViewModels(){var e;(e=this.relatedFeatureViewModels)==null||e.forEach(i=>!i.destroyed&&i.destroy()),this.relatedFeatureViewModels.removeAll()}async _queryFeatureCount(){const{layer:e,relatedLayer:i,relationshipId:n,objectId:r,_queryFeatureCountAbortController:s,canQuery:o,supportsCacheHint:a}=this;if(await(e==null?void 0:e.load()),await(i==null?void 0:i.load()),!o||!e||!i)return void this._set("featureCount",0);const l=i.createQuery(),u=new gw({cacheHint:a,relationshipId:n,returnGeometry:!1,objectIds:[r],where:Gq(l.where,void 0)}),h=await e.queryRelatedFeaturesCount(u,{signal:s==null?void 0:s.signal});this._set("featureCount",h[r]||0)}_sliceFeatures(e){const{showAllEnabled:i,displayCount:n}=this;return i?e:n?e.slice(0,n):[]}async _queryPage(){const{relatedFeatures:e,featurePage:i,showAllEnabled:n,_queryPageAbortController:r}=this;!n||i<2||e.addMany(await this._queryRelatedFeatures({signal:r==null?void 0:r.signal}))}async _queryRelatedFeatures(e){var P;const{orderByFieldsFixedCasing:i,showAllEnabled:n,featuresPerPage:r,displayCount:s,layer:o,relationshipId:a,featurePage:l,featureCount:u,relatedLayer:h,supportsCacheHint:p}=this,{canQuery:f,objectId:g}=this;if(!f||!o||!h)return[];const v=n?((l-1)*r+u)%u:0,b=n?r:s,_=h.objectIdField,w=[...i==null?void 0:i.map(k=>k.field),_].filter(A),S=i==null?void 0:i.map(k=>`${k.field} ${k.order}`),C=h.createQuery(),$=new gw({orderByFields:S,start:v,num:b,outFields:w,cacheHint:p,relationshipId:a,returnGeometry:!1,objectIds:[g],where:Gq(C.where,void 0)}),M=((P=(await o.queryRelatedFeatures($,{signal:e==null?void 0:e.signal}))[g])==null?void 0:P.features)||[];return M.forEach(k=>{k.sourceLayer=h,k.layer=h}),M}};c([d()],Yt.prototype,"_queryAbortController",void 0),c([d()],Yt.prototype,"_queryPageAbortController",void 0),c([d()],Yt.prototype,"_queryFeatureCountAbortController",void 0),c([d({value:1})],Yt.prototype,"featurePage",null),c([d()],Yt.prototype,"featuresPerPage",void 0),c([d({readOnly:!0})],Yt.prototype,"orderByFieldsFixedCasing",null),c([d({readOnly:!0})],Yt.prototype,"supportsCacheHint",null),c([d({readOnly:!0})],Yt.prototype,"canQuery",null),c([d()],Yt.prototype,"description",void 0),c([d({readOnly:!0})],Yt.prototype,"itemDescriptionFieldName",null),c([d({value:3})],Yt.prototype,"displayCount",null),c([d({type:en})],Yt.prototype,"graphic",void 0),c([d()],Yt.prototype,"layer",void 0),c([d()],Yt.prototype,"map",void 0),c([d({readOnly:!0})],Yt.prototype,"objectId",null),c([d({readOnly:!0})],Yt.prototype,"objectIdField",null),c([d()],Yt.prototype,"orderByFields",void 0),c([d({readOnly:!0})],Yt.prototype,"relatedFeatures",null),c([d({readOnly:!0})],Yt.prototype,"relatedLayer",null),c([d({readOnly:!0})],Yt.prototype,"relationship",null),c([d()],Yt.prototype,"featureCount",void 0),c([d({readOnly:!0})],Yt.prototype,"relatedFeatureViewModels",null),c([d()],Yt.prototype,"relationshipId",void 0),c([d()],Yt.prototype,"showAllEnabled",void 0),c([d()],Yt.prototype,"state",null),c([d()],Yt.prototype,"title",void 0),Yt=c([O("esri.widgets.Feature.FeatureRelationship.FeatureRelationshipViewModel")],Yt);const o7=Yt,RS="esri-feature",aF=`${RS}-relationship`,ld={base:aF,esriWidget:"esri-widget",listContainer:`${aF}__list`,listContainerQuerying:`${aF}__list--querying`,featureObserver:`${RS}__feature-observer`,stickySpinnerContainer:`${RS}__sticky-loading-container`,loadingSpinnerContainer:`${RS}__loading-container`,spinner:`${RS}__loading-spinner`,iconLoading:"esri-icon-loading-indicator esri-rotating"},uK={title:!0,description:!0};let Fs=class extends qt{constructor(e,i){super(e,i),this._featureElementInfo=null,this._relatedFeatureIntersectionObserverNode=null,this._relatedFeatureIntersectionObserver=new IntersectionObserver(([n])=>{n!=null&&n.isIntersecting&&this._increaseFeaturePage()},{root:window.document}),this.headingLevel=2,this.viewModel=new o7,this.messages=null,this.messagesCommon=null,this.visibleElements={...uK},this._increaseFeaturePage=()=>{const{state:n,showAllEnabled:r,relatedFeatures:s,featuresPerPage:o,featurePage:a}=this.viewModel;n==="ready"&&r&&s.length>=o*a&&this.viewModel.featurePage++}}initialize(){this._featureElementInfo=new lR,this.addHandles([X(()=>[this.viewModel.description,this.viewModel.title,this.headingLevel],()=>this._setupFeatureElementInfo(),ut),X(()=>[this.viewModel.state,this.viewModel.showAllEnabled,this._relatedFeatureIntersectionObserverNode],()=>this._handleRelatedFeatureObserverChange()),ji(()=>this.viewModel.relatedFeatureViewModels,"change",()=>this._setupRelatedFeatureViewModels())])}loadDependencies(){return Promise.all([q(()=>import("./calcite-list-28122a9e.js"),["assets/calcite-list-28122a9e.js","assets/utils3-1ce076c1.js"]),q(()=>import("./calcite-list-item-67488ab8.js"),["assets/calcite-list-item-67488ab8.js","assets/utils3-1ce076c1.js"]),q(()=>import("./calcite-icon-ee29cf49.js"),[]),q(()=>Promise.resolve().then(()=>A_e),void 0)])}destroy(){this._unobserveRelatedFeatureObserver(),this._featureElementInfo=si(this._featureElementInfo)}get displayShowAllButton(){const{showAllEnabled:e,featureCount:i,displayCount:n}=this.viewModel;return!e&&!!i&&(i>n||n===0)}get displayListItems(){return this.displayShowAllButton||this.viewModel.relatedFeatureViewModels.length>0}get description(){return this.viewModel.description}set description(e){this.viewModel.description=e}get featureCountDescription(){const{messages:e}=this,{featureCount:i}=this.viewModel;return Vr(i===1?e==null?void 0:e.numberRecord:e==null?void 0:e.numberRecords,{number:i})}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}castVisibleElements(e){return{...uK,...e}}renderStickyLoading(){return this.viewModel.state==="querying"?L("div",{key:"sticky-loader",class:ld.stickySpinnerContainer},this.renderLoadingIcon()):null}renderLoadingIcon(){return L("span",{class:this.classes(ld.iconLoading,ld.spinner)})}renderLoading(){return L("div",{key:"loading-container",class:ld.loadingSpinnerContainer},this.renderLoadingIcon())}renderShowAllIconNode(){return L("calcite-icon",{scale:"s",icon:"list",slot:"content-end"})}renderChevronIconNode(){const e=$o(this.container)?"chevron-left":"chevron-right";return L("calcite-icon",{scale:"s",icon:e,slot:"content-end"})}renderRelatedFeature(e){var s,o;const{itemDescriptionFieldName:i}=this.viewModel,n=e.title;e.description=i&&((s=e.formattedAttributes)==null?void 0:s.global[i]);const r=e.state==="loading";return L("calcite-list-item",{key:e.uid,label:r?`${(o=this.messagesCommon)==null?void 0:o.loading}…`:n,description:r?"…":e.description??"",onCalciteListItemSelect:()=>this.emit("select-record",{featureViewModel:e})},this.renderChevronIconNode())}renderShowAllListItem(){var e;return this.displayShowAllButton?L("calcite-list-item",{key:"show-all-item",label:(e=this.messages)==null?void 0:e.showAll,description:this.featureCountDescription,onCalciteListItemSelect:()=>this.emit("show-all-records")},this.renderShowAllIconNode()):null}renderNoRelatedFeaturesMessage(){var e;return L("calcite-notice",{key:"no-related-features-message",icon:"information",open:!0,kind:"brand",scale:"s",width:"full"},L("div",{slot:"message"},(e=this.messages)==null?void 0:e.noRelatedFeatures))}renderFeatureObserver(){return L("div",{key:"feature-observer",class:ld.featureObserver,bind:this,afterCreate:this._relatedFeatureIntersectionObserverCreated})}renderList(){const{relatedFeatureViewModels:e}=this.viewModel;return L("calcite-list",null,e.toArray().map(i=>this.renderRelatedFeature(i)),this.renderShowAllListItem())}renderRelatedFeatures(){const{displayListItems:e}=this,{state:i}=this.viewModel;return L("div",{key:"list-container",class:this.classes(ld.listContainer,{[ld.listContainerQuerying]:i==="querying"})},e?this.renderList():i==="ready"?this.renderNoRelatedFeaturesMessage():null,this.renderStickyLoading(),this.renderFeatureObserver())}renderRelationshipNotFound(){var e;return L("calcite-notice",{key:"relationship-not-found",icon:"exclamation-mark-triangle",open:!0,kind:"danger",scale:"s",width:"full"},L("div",{slot:"message"},(e=this.messages)==null?void 0:e.relationshipNotFound))}render(){var i;const{state:e}=this.viewModel;return L("div",{class:this.classes(ld.base,ld.esriWidget)},(i=this._featureElementInfo)==null?void 0:i.render(),e==="loading"?this.renderLoading():e==="disabled"?this.renderRelationshipNotFound():this.renderRelatedFeatures())}_setupRelatedFeatureViewModels(){const{relatedFeatureViewModels:e}=this.viewModel,i="related-feature-viewmodels";this.removeHandles(i),e==null||e.forEach(n=>{this.addHandles(X(()=>[n.title,n.state],()=>this.scheduleRender(),ut),i)}),this.scheduleRender()}_setupFeatureElementInfo(){var s;const{headingLevel:e,visibleElements:i}=this,n=i.description&&this.description,r=i.title&&this.title;(s=this._featureElementInfo)==null||s.set({description:n,title:r,headingLevel:e})}async _handleRelatedFeatureObserverChange(){this._unobserveRelatedFeatureObserver();const{state:e,showAllEnabled:i}=this.viewModel;await $I(0),this._relatedFeatureIntersectionObserverNode&&e==="ready"&&i&&this._relatedFeatureIntersectionObserver.observe(this._relatedFeatureIntersectionObserverNode)}_relatedFeatureIntersectionObserverCreated(e){this._relatedFeatureIntersectionObserverNode=e}_unobserveRelatedFeatureObserver(){this._relatedFeatureIntersectionObserverNode&&this._relatedFeatureIntersectionObserver.unobserve(this._relatedFeatureIntersectionObserverNode)}};c([d()],Fs.prototype,"_relatedFeatureIntersectionObserverNode",void 0),c([d({readOnly:!0})],Fs.prototype,"displayShowAllButton",null),c([d({readOnly:!0})],Fs.prototype,"displayListItems",null),c([d()],Fs.prototype,"description",null),c([d({readOnly:!0})],Fs.prototype,"featureCountDescription",null),c([d()],Fs.prototype,"headingLevel",void 0),c([d()],Fs.prototype,"title",null),c([d({type:o7})],Fs.prototype,"viewModel",void 0),c([d(),bt("esri/widgets/Feature/t9n/Feature")],Fs.prototype,"messages",void 0),c([d(),bt("esri/t9n/common")],Fs.prototype,"messagesCommon",void 0),c([d()],Fs.prototype,"visibleElements",void 0),c([st("visibleElements")],Fs.prototype,"castVisibleElements",null),Fs=c([O("esri.widgets.Feature.FeatureRelationship")],Fs);const dK=Fs;let fBe=class{constructor(e,i){this.preLayerQueryCallback=e,this.preRequestCallback=i,this.preLayerQueryCallback||(this.preLayerQueryCallback=n=>{}),this.preRequestCallback||(this.preLayerQueryCallback=n=>{})}};var LS;const mBe=1,hK="content-view-models",pK="relationship-view-models",fK={attachmentsContent:!0,chartAnimation:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0,relationshipContent:!0};let fi=LS=class extends F0(_e){constructor(t){super(t),this._handles=new wn,this._error=null,this._featureAbortController=null,this._graphicChangedThrottled=P_(this._graphicChanged,mBe,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...fK},this.content=null,this.contentViewModels=[],this.description=null,this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=e=>{const{abilities:i}=this;return e.type==="attachments"&&!!i.attachmentsContent||e.type==="custom"&&!!i.customContent||e.type==="fields"&&!!i.fieldsContent||e.type==="media"&&!!i.mediaContent||e.type==="text"&&!!i.textContent||e.type==="expression"&&!!i.expressionContent||e.type==="relationship"&&!!i.relationshipContent},this._handles.add(X(()=>[this.graphic,this._effectivePopupTemplate,this.abilities],()=>this._graphicChangedThrottled(),ut))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return A(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return XFe(QJ(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return Hue(this.graphic)}castAbilities(t){return{...fK,...t}}get isTable(){var t;return((t=this._sourceLayer)==null?void 0:t.isTable)||!1}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(t){this._set("graphic",t?t.clone():null)}get spatialReference(){var t;return((t=this.view)==null?void 0:t.spatialReference)??null}set spatialReference(t){this._override("spatialReference",t)}get map(){var t;return((t=this.view)==null?void 0:t.map)||null}set map(t){this._override("map",t)}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(t,e){const i=this.contentViewModels[t];i instanceof Hy&&i.setActiveMedia(e)}nextMedia(t){const e=this.contentViewModels[t];e instanceof Hy&&e.next()}previousMedia(t){const e=this.contentViewModels[t];e instanceof Hy&&e.previous()}async updateGeometry(){var o,a;const{graphic:t,spatialReference:e,_sourceLayer:i}=this;await(i==null?void 0:i.load());const n=i==null?void 0:i.objectIdField;if(!n||!t||!i)return;const r=(o=t==null?void 0:t.attributes)==null?void 0:o[n];if(r==null)return;const s=[r];if(!t.geometry){const l=(a=await Zue({layer:i,graphic:t,outFields:[],objectIds:s,returnGeometry:!0,spatialReference:e}))==null?void 0:a.geometry;l&&(t.geometry=l)}}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async _graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:t}=this;if(!t)return;const e=new AbortController;this._featureAbortController=e;try{await this._queryFeature({signal:e.signal})}catch(i){Pa(i)||(this._error=i,se.getLogger(this.declaredClass).error("error","The popupTemplate could not be displayed for this feature.",{error:i,graphic:t,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===e&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:t}=this;t&&t.abort(),this._featureAbortController=null}_compileContentElement(t,e){return t.type==="attachments"?this._compileAttachments(t,e):t.type==="custom"?this._compileCustom(t,e):t.type==="fields"?this._compileFields(t,e):t.type==="media"?this._compileMedia(t,e):t.type==="text"?this._compileText(t,e):t.type==="expression"?this._compileExpression(t,e):t.type==="relationship"?this._compileRelationship(t,e):void 0}_compileContent(t){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(t)?t.filter(this._isAllowedContentType).map((e,i)=>this._compileContentElement(e,i)).filter(A):typeof t=="string"?this._compileText(new cw({text:t}),0).text:t}_destroyContentViewModels(){var t,e;(t=this._handles)==null||t.remove(pK),(e=this._handles)==null||e.remove(hK),this.contentViewModels.forEach(i=>i&&!i.destroyed&&i.destroy()),this._set("contentViewModels",[])}_matchesFeature(t,e){var r;const i=(r=t==null?void 0:t.graphic)==null?void 0:r.getObjectId(),n=e==null?void 0:e.getObjectId();return A(i)&&A(n)&&i===n}_setRelatedFeaturesViewModels({relatedFeatureViewModels:t,relatedFeatures:e,map:i}){const{view:n,spatialReference:r}=this;e==null||e.filter(Boolean).forEach(s=>{t.find(o=>this._matchesFeature(o,s))||t.add(new LS({abilities:{relationshipContent:!1},map:i,view:n,spatialReference:r,graphic:s}))}),t.forEach(s=>{(e==null?void 0:e.find(a=>this._matchesFeature(s,a)))||t.remove(s)})}_setExpressionContentVM(t,e){const i=this.formattedAttributes,{contentElement:n,contentElementViewModel:r}=t,s=n==null?void 0:n.type;r&&s&&(s==="fields"&&(this._createFieldsFormattedAttributes({contentElement:n,contentElementIndex:e,formattedAttributes:i}),r.set(this._createFieldsVMParams(n,e))),s==="media"&&(this._createMediaFormattedAttributes({contentElement:n,contentElementIndex:e,formattedAttributes:i}),r.set(this._createMediaVMParams(n,e))),s==="text"&&r.set(this._createTextVMParams(n)))}_compileRelationship(t,e){const{displayCount:i,orderByFields:n,relationshipId:r,title:s,description:o}=t,{_sourceLayer:a,graphic:l,map:u}=this,h=new o7({displayCount:i,graphic:l,orderByFields:n,relationshipId:r,layer:a,map:u,...this._compileTitleAndDesc({title:s,description:o})});return this.contentViewModels[e]=h,this._handles.add(ji(()=>h.relatedFeatures,"change",()=>this._setRelatedFeaturesViewModels(h)),pK),t}_compileExpression(t,e){const{expressionInfo:i}=t,{graphic:n,map:r,spatialReference:s,view:o}=this,a=new s7({expressionInfo:i,graphic:n,interceptor:LS.interceptor,map:r,spatialReference:s,view:o});return this.contentViewModels[e]=a,this._handles.add(X(()=>a.contentElementViewModel,()=>this._setExpressionContentVM(a,e),ut),hK),t}_compileAttachments(t,e){const{graphic:i}=this,{description:n,title:r}=t;return this.contentViewModels[e]=new cB({graphic:i,...this._compileTitleAndDesc({title:r,description:n})}),t}_compileCustom(t,e){const{graphic:i}=this,{creator:n,destroyer:r}=t;return this.contentViewModels[e]=new XM({graphic:i,creator:n,destroyer:r}),t}_compileTitleAndDesc({title:t,description:e}){const{_fieldInfoMap:i,_sourceLayer:n,graphic:r,formattedAttributes:s}=this,o=r==null?void 0:r.attributes,a=this._expressionAttributes,l=s.global;return{title:Uy({attributes:o,fieldInfoMap:i,globalAttributes:l,expressionAttributes:a,layer:n,text:t}),description:Uy({attributes:o,fieldInfoMap:i,globalAttributes:l,expressionAttributes:a,layer:n,text:e})}}_createFieldsVMParams(t,e){var u;const i=this._effectivePopupTemplate,n=this.formattedAttributes,r={...n==null?void 0:n.global,...n==null?void 0:n.content[e]},s=(u=(t==null?void 0:t.fieldInfos)||(i==null?void 0:i.fieldInfos))==null?void 0:u.filter(({fieldName:h})=>sB(h)||lh(h)||r.hasOwnProperty(h)),o=i==null?void 0:i.expressionInfos,{description:a,title:l}=t;return{attributes:r,expressionInfos:o,fieldInfos:s,...this._compileTitleAndDesc({title:l,description:a})}}_compileFields(t,e){const i=t.clone(),n=new uR(this._createFieldsVMParams(t,e));return this.contentViewModels[e]=n,i.fieldInfos=n.formattedFieldInfos.slice(0),i}_createMediaVMParams(t,e){const{abilities:i,graphic:n,_fieldInfoMap:r,_effectivePopupTemplate:s,relatedInfos:o,_sourceLayer:a,_expressionAttributes:l}=this,u=this.formattedAttributes,h=(n==null?void 0:n.attributes)??{},{description:p,mediaInfos:f,title:g}=t;return{abilities:{chartAnimation:i.chartAnimation},activeMediaInfoIndex:t.activeMediaInfoIndex||0,attributes:h,isAggregate:n==null?void 0:n.isAggregate,layer:a,fieldInfoMap:r,formattedAttributes:{...u==null?void 0:u.global,...u==null?void 0:u.content[e]},expressionAttributes:l,mediaInfos:f,popupTemplate:s,relatedInfos:o,...this._compileTitleAndDesc({title:g,description:p})}}_compileMedia(t,e){const i=t.clone(),n=new Hy(this._createMediaVMParams(t,e));return i.mediaInfos=n.formattedMediaInfos.slice(0),this.contentViewModels[e]=n,i}_createTextVMParams(t){var s;const{graphic:e,_fieldInfoMap:i,_sourceLayer:n,_expressionAttributes:r}=this;if(t&&t.text){const o=(e==null?void 0:e.attributes)??{},a=((s=this.formattedAttributes)==null?void 0:s.global)??{};t.text=Uy({attributes:o,fieldInfoMap:i,globalAttributes:a,expressionAttributes:r,layer:n,text:t.text})}return{graphic:e,creator:t.text}}_compileText(t,e){const i=t.clone();return this.contentViewModels[e]=new XM(this._createTextVMParams(i)),i}_compileLastEditInfo(){const{_effectivePopupTemplate:t,_sourceLayer:e,graphic:i}=this;if(!t)return;const{lastEditInfoEnabled:n}=t,r=e==null?void 0:e.editFieldsInfo;return n&&r?KFe(r,i==null?void 0:i.attributes):void 0}_compileTitle(t){var a;const{_fieldInfoMap:e,_sourceLayer:i,graphic:n,_expressionAttributes:r}=this,s=(n==null?void 0:n.attributes)??{},o=((a=this.formattedAttributes)==null?void 0:a.global)??{};return Uy({attributes:s,fieldInfoMap:e,globalAttributes:o,expressionAttributes:r,layer:i,text:t})}async _getTitle(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t==null?void 0:t.title;return KM(i,{graphic:e})}async _getContent(){const{_effectivePopupTemplate:t,graphic:e}=this;if(!e)return null;const i=t==null?void 0:t.content;return KM(i,{graphic:e})}async _queryFeature(t){const{_featureAbortController:e,_sourceLayer:i,graphic:n,_effectivePopupTemplate:r}=this,s=this.map,o=this.view,a=this.spatialReference;if(e!==this._featureAbortController||!n)return;await e5e({graphic:n,popupTemplate:r,layer:i,spatialReference:a},t);const{content:{value:l},title:{value:u}}=await Zi({content:this._getContent(),title:this._getTitle()}),{expressionAttributes:{value:h}}=await Zi({checkForRelatedFeatures:this._checkForRelatedFeatures(t),expressionAttributes:dBe({expressionInfos:r==null?void 0:r.expressionInfos,spatialReference:a,graphic:n,map:s,interceptor:LS.interceptor,view:o})});e===this._featureAbortController&&n&&(this._expressionAttributes=h,this._graphicExpressionAttributes={...n.attributes,...h},this._set("formattedAttributes",this._createFormattedAttributes(l)),this._set("title",this._compileTitle(u)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(l)||null))}_createMediaFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){const{_effectivePopupTemplate:n,graphic:r,relatedInfos:s,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;i.content[e]=mD({fieldInfos:n==null?void 0:n.fieldInfos,graphic:r,attributes:{...l,...t.attributes},layer:o,fieldInfoMap:a,relatedInfos:s})}_createFieldsFormattedAttributes({contentElement:t,contentElementIndex:e,formattedAttributes:i}){if(t.fieldInfos){const{graphic:n,relatedInfos:r,_sourceLayer:s,_fieldInfoMap:o,_graphicExpressionAttributes:a}=this;i.content[e]=mD({fieldInfos:t.fieldInfos,graphic:n,attributes:{...a,...t.attributes},layer:s,fieldInfoMap:o,relatedInfos:r})}}_createFormattedAttributes(t){const{_effectivePopupTemplate:e,graphic:i,relatedInfos:n,_sourceLayer:r,_fieldInfoMap:s,_graphicExpressionAttributes:o}=this,a=e==null?void 0:e.fieldInfos,l={global:mD({fieldInfos:a,graphic:i,attributes:o,layer:r,fieldInfoMap:s,relatedInfos:n}),content:[]};return Array.isArray(t)&&t.forEach((u,h)=>{u.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:u,contentElementIndex:h,formattedAttributes:l}),u.type==="media"&&this._createMediaFormattedAttributes({contentElement:u,contentElementIndex:h,formattedAttributes:l})}),l}_checkForRelatedFeatures(t){const{graphic:e,_effectivePopupTemplate:i}=this;return this._queryRelatedInfos(e,QJ(i),t)}async _queryRelatedInfos(t,e,i){const{relatedInfos:n,_sourceLayer:r}=this;n.clear();const s=A(r==null?void 0:r.associatedLayer)?await(r==null?void 0:r.associatedLayer.load(i)):r;if(!s||!t)return;const o=e.filter(u=>u&&lh(u.fieldName));if(!o||!o.length)return;e.forEach(u=>this._configureRelatedInfo(u,s));const a=await C4e({relatedInfos:n,layer:s},i);Object.keys(a).forEach(u=>{var f;const h=n.get(u.toString()),p=(f=a[u])==null?void 0:f.value;h&&p&&(h.layerInfo=p.data)});const l=await I4e({graphic:t,relatedInfos:n,layer:s},i);Object.keys(l).forEach(u=>{var h;_4e((h=l[u])==null?void 0:h.value,n.get(u.toString()))})}_configureRelatedInfo(t,e){const{relatedInfos:i}=this,n=F$(t.fieldName);if(!n)return;const{layerId:r,fieldName:s}=n;if(!r)return;const o=i.get(r.toString())||b4e(r,e);o&&(T4e({relatedInfo:o,fieldName:s,fieldInfo:t}),this.relatedInfos.set(r,o))}};fi.interceptor=new fBe(n5e,r5e),c([d()],fi.prototype,"_error",void 0),c([d()],fi.prototype,"_featureAbortController",void 0),c([d({readOnly:!0})],fi.prototype,"_effectivePopupTemplate",null),c([d({readOnly:!0})],fi.prototype,"_fieldInfoMap",null),c([d({readOnly:!0})],fi.prototype,"_sourceLayer",null),c([d()],fi.prototype,"abilities",void 0),c([st("abilities")],fi.prototype,"castAbilities",null),c([d({readOnly:!0})],fi.prototype,"content",void 0),c([d({readOnly:!0})],fi.prototype,"contentViewModels",void 0),c([d()],fi.prototype,"description",void 0),c([d({type:Boolean})],fi.prototype,"defaultPopupTemplateEnabled",void 0),c([d({readOnly:!0})],fi.prototype,"isTable",null),c([d({readOnly:!0})],fi.prototype,"state",null),c([d({readOnly:!0})],fi.prototype,"formattedAttributes",void 0),c([d({type:en,value:null})],fi.prototype,"graphic",null),c([d({readOnly:!0})],fi.prototype,"lastEditInfo",void 0),c([d({readOnly:!0})],fi.prototype,"relatedInfos",void 0),c([d()],fi.prototype,"spatialReference",null),c([d({readOnly:!0})],fi.prototype,"title",void 0),c([d()],fi.prototype,"map",null),c([d({readOnly:!0})],fi.prototype,"waitingForContent",null),c([d()],fi.prototype,"view",void 0),fi=LS=c([O("esri.widgets.FeatureViewModel")],fi);const a7=fi,Pr="esri-feature",Di={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:Pr,container:`${Pr}__size-container`,title:`${Pr}__title`,main:`${Pr}__main-container`,btn:`${Pr}__button`,icon:`${Pr}__icon`,content:`${Pr}__content`,contentNode:`${Pr}__content-node`,contentElement:`${Pr}__content-element`,text:`${Pr}__text`,lastEditedInfo:`${Pr}__last-edited-info`,fields:`${Pr}__fields`,fieldHeader:`${Pr}__field-header`,fieldData:`${Pr}__field-data`,fieldDataDate:`${Pr}__field-data--date`,loadingSpinnerContainer:`${Pr}__loading-container`,spinner:`${Pr}__loading-spinner`},Ife=t=>{let e=class extends t{constructor(){super(...arguments),this.renderNodeContent=i=>VC(i)&&!i.destroyed?L("div",{class:Di.contentNode,key:i},i.render()):i instanceof HTMLElement?L("div",{class:Di.contentNode,key:i,bind:i,afterCreate:this._attachToNode}):ide(i)?L("div",{class:Di.contentNode,key:i,bind:i.domNode,afterCreate:this._attachToNode}):null}_attachToNode(i){const n=this;i.appendChild(n)}};return e=c([O("esri.widgets.Feature.ContentMixin")],e),e};var $V;const mK={title:!0,content:!0,lastEditedInfo:!0},gK="relationship-handles";let Kn=$V=class extends Ife(qt){constructor(t,e){super(t,e),this._contentWidgets=[],this.flowItems=null,this.headingLevel=2,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.visibleElements={...mK},this.viewModel=new a7}initialize(){this.addHandles(X(()=>{var t;return(t=this.viewModel)==null?void 0:t.contentViewModels},()=>this._setupContentWidgets(),ut))}loadDependencies(){return q(()=>Promise.resolve().then(()=>A_e),void 0)}destroy(){this._destroyContentWidgets()}get graphic(){return this.viewModel.graphic}set graphic(t){this.viewModel.graphic=t}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(t){this.viewModel.defaultPopupTemplateEnabled=t}get isTable(){return this.viewModel.isTable}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get spatialReference(){return this.viewModel.spatialReference}set spatialReference(t){this.viewModel.spatialReference=t}get title(){return this.viewModel.title}castVisibleElements(t){return{...mK,...t}}get map(){return this.viewModel.map}set map(t){this.viewModel.map=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){const{state:t}=this.viewModel,e=L("div",{class:Di.container,key:"container"},this.renderTitle(),t==="error"?this.renderError():t==="loading"?this.renderLoading():this.renderContentContainer());return L("div",{class:this.classes(Di.base,Di.esriWidget)},e)}setActiveMedia(t,e){return this.viewModel.setActiveMedia(t,e)}nextMedia(t){return this.viewModel.nextMedia(t)}previousMedia(t){return this.viewModel.previousMedia(t)}renderError(){const{messagesCommon:t,messages:e,visibleElements:i}=this;return L("calcite-notice",{open:!0,kind:"danger",icon:"exclamation-mark-circle",scale:"s"},i.title?L("div",{key:"error-title",slot:"title"},t.errorMessage):null,L("div",{key:"error-message",slot:"message"},e.loadingError))}renderLoading(){return L("div",{key:"loading-container",class:Di.loadingSpinnerContainer},L("span",{class:this.classes(Di.iconLoading,Di.spinner)}))}renderContentContainer(){const{visibleElements:t}=this;return t.content?L("div",{class:Di.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:t,title:e}=this;return t.title?L(aR,{level:this.headingLevel,class:Di.title,innerHTML:e}):null}renderContent(){const t=this.viewModel.content,e="content";if(!t)return null;if(Array.isArray(t))return t.length?L("div",{class:Di.contentNode,key:`${e}-content-elements`},t.map(this.renderContentElement,this)):null;if(typeof t=="string"){const i=this._contentWidgets[0];return!i||i.destroyed?null:L("div",{class:Di.contentNode,key:`${e}-content`},i.render())}return this.renderNodeContent(t)}renderContentElement(t,e){var n;const{visibleElements:i}=this;if(typeof i.content!="boolean"&&!((n=i.content)!=null&&n[t.type]))return null;switch(t.type){case"attachments":return this.renderAttachments(e);case"custom":return this.renderCustom(t,e);case"fields":return this.renderFields(e);case"media":return this.renderMedia(e);case"text":return this.renderText(t,e);case"expression":return this.renderExpression(e);case"relationship":return this.renderRelationship(e);default:return null}}renderAttachments(t){const e=this._contentWidgets[t];if(!e||e.destroyed)return null;const{state:i,attachmentInfos:n}=e.viewModel;return i==="loading"||n.length>0?L("div",{key:this._buildKey("attachments-element",t),class:this.classes(Di.contentElement)},e.render()):null}renderRelationship(t){const e=this._contentWidgets[t];return e&&!e.destroyed&&this.flowItems?L("div",{key:this._buildKey("relationship-element",t),class:Di.contentElement},e.render()):null}renderExpression(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:L("div",{key:this._buildKey("expression-element",t),class:Di.contentElement},e.render())}renderCustom(t,e){const{creator:i}=t,n=this._contentWidgets[e];return!n||n.destroyed?null:i?L("div",{key:this._buildKey("custom-element",e),class:Di.contentElement},n.render()):null}renderFields(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:L("div",{key:this._buildKey("fields-element",t),class:Di.contentElement},e.render())}renderMedia(t){const e=this._contentWidgets[t];return!e||e.destroyed?null:L("div",{key:this._buildKey("media-element",t),class:Di.contentElement},e.render())}renderLastEditInfo(){const{visibleElements:t,messages:e}=this,{lastEditInfo:i}=this.viewModel;if(!i||!t.lastEditedInfo)return null;const{date:n,user:r}=i,s=i.type==="edit"?r?e.lastEditedByUser:e.lastEdited:r?e.lastCreatedByUser:e.lastCreated,o=Vr(s,{date:n,user:r});return L("div",{key:"edit-info-element",class:this.classes(Di.lastEditedInfo,Di.contentElement)},o)}renderText(t,e){const i=t.text,n=this._contentWidgets[e];return!n||n.destroyed?null:i?L("div",{key:this._buildKey("text-element",e),class:this.classes(Di.contentElement,Di.text)},n.render()):null}_buildKey(t,...e){return`${t}__${this.get("viewModel.graphic.uid")||"0"}-${e.join("-")}`}_destroyContentWidget(t){t&&(t.viewModel=null,!t.destroyed&&t.destroy())}_destroyContentWidgets(){this.removeHandles(gK),this._contentWidgets.forEach(t=>this._destroyContentWidget(t)),this._contentWidgets=[]}_addFeatureRelationshipHandles(t){const{flowItems:e,visibleElements:i}=this;this.addHandles([ji(()=>t,"select-record",({featureViewModel:n})=>{e&&(n.abilities={relationshipContent:!0},e.push(new $V({flowItems:e,viewModel:n,visibleElements:i})))}),ji(()=>t,"show-all-records",()=>{if(!e)return;const{viewModel:n}=t;n.showAllEnabled=!0;const r=new dK({visibleElements:{title:!1,description:!1},viewModel:n});this._addFeatureRelationshipHandles(r),e.push(r)})],gK)}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:t,visibleElements:e}=this,i=this.get("viewModel.content"),{contentViewModels:n}=this.viewModel;if(Array.isArray(i))i.forEach((r,s)=>{if(r.type==="attachments"&&(this._contentWidgets[s]=new h5e({displayType:r.displayType,headingLevel:e.title?t+1:t,viewModel:n[s]})),r.type==="fields"&&(this._contentWidgets[s]=new nde({viewModel:n[s]})),r.type==="media"&&(this._contentWidgets[s]=new ehe({viewModel:n[s]})),r.type==="text"&&(this._contentWidgets[s]=new O$({viewModel:n[s]})),r.type==="custom"&&(this._contentWidgets[s]=new O$({viewModel:n[s]})),r.type==="expression"&&(this._contentWidgets[s]=new pBe({viewModel:n[s]})),r.type==="relationship"){const o=new dK({viewModel:n[s]});this._addFeatureRelationshipHandles(o),this._contentWidgets[s]=o}},this);else{const r=n[0];r&&!r.destroyed&&(this._contentWidgets[0]=new O$({viewModel:r}))}this.scheduleRender()}};c([d()],Kn.prototype,"graphic",null),c([d()],Kn.prototype,"defaultPopupTemplateEnabled",null),c([d()],Kn.prototype,"flowItems",void 0),c([d()],Kn.prototype,"headingLevel",void 0),c([d({readOnly:!0})],Kn.prototype,"isTable",null),c([d()],Kn.prototype,"label",null),c([d(),bt("esri/widgets/Feature/t9n/Feature")],Kn.prototype,"messages",void 0),c([d(),bt("esri/t9n/common")],Kn.prototype,"messagesCommon",void 0),c([d(),bt("esri/widgets/support/t9n/uriUtils")],Kn.prototype,"messagesURIUtils",void 0),c([d()],Kn.prototype,"spatialReference",null),c([d({readOnly:!0})],Kn.prototype,"title",null),c([d()],Kn.prototype,"visibleElements",void 0),c([st("visibleElements")],Kn.prototype,"castVisibleElements",null),c([d()],Kn.prototype,"map",null),c([d()],Kn.prototype,"view",null),c([d({type:a7})],Kn.prototype,"viewModel",void 0),Kn=$V=c([O("esri.widgets.Feature")],Kn);const Tfe=Kn;var kfe;const nA=Symbol("anchorHandles");let Wg=class extends $r.EventedAccessor{constructor(e){super(e),this[kfe]=new wn,this.location=null,this.screenLocationEnabled=!1,this.view=null,this[nA].add([Ys(()=>kf(this.screenLocationEnabled?this.view:null,i=>[i.size,i.type==="3d"?i.camera:i.viewpoint]),()=>this.notifyChange("screenLocation")),X(()=>this.screenLocation,(i,n)=>{A(i)&&A(n)&&this.emit("view-change")})])}destroy(){this.view=null,this[nA]=si(this[nA])}get screenLocation(){var r;const{location:e,view:i,screenLocationEnabled:n}=this;return n&&A(e)&&A(i)&&i.ready?(r=i.toScreen)==null?void 0:r.call(i,e):null}};kfe=nA,c([d()],Wg.prototype,"location",void 0),c([d()],Wg.prototype,"screenLocation",null),c([d()],Wg.prototype,"screenLocationEnabled",void 0),c([d()],Wg.prototype,"view",void 0),Wg=c([O("esri.widgets.support.AnchorElementViewModel")],Wg);const $fe=Wg,gBe="esri.widgets.CompassViewModel";let rA=class extends $fe{constructor(e){super(e),this.visible=!1}};c([d()],rA.prototype,"visible",void 0),rA=c([O(gBe)],rA);const Afe=rA,lF="esri-spinner",cF={base:lF,spinnerStart:`${lF}--start`,spinnerFinish:`${lF}--finish`};let Jg=class extends qt{constructor(e,i){super(e,i),this._animationDelay=500,this._animationPromise=null,this.viewModel=new Afe}initialize(){this.addHandles(X(()=>this.visible,e=>this._visibleChange(e)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}show(e){const{location:i,promise:n}=e??{};i&&(this.viewModel.location=i),this.visible=!0;const r=()=>this.hide();n&&n.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:i}=this.viewModel,n=!!i,r=e&&n,s=!e&&n,o={[cF.spinnerStart]:r,[cF.spinnerFinish]:s},a=this._getPositionStyles();return L("div",{class:this.classes(cF.base,o),styles:a})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const i=$I(this._animationDelay);this._animationPromise=i,i.catch(()=>{}).then(()=>{this._animationPromise===i&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:i}=this.viewModel;if(U(i)||U(e))return{};const{padding:n}=i;return{left:e.x-n.left+"px",top:e.y-n.top+"px"}}};c([d()],Jg.prototype,"location",null),c([d()],Jg.prototype,"view",null),c([d({type:Afe})],Jg.prototype,"viewModel",void 0),c([d()],Jg.prototype,"visible",null),Jg=c([O("esri.widgets.Spinner")],Jg);const yBe=Jg,RR={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},Gy=new Zw({id:"zoom-to-feature",title:"{messages.zoom}",className:RR.iconZoom}),yK=new Zw({id:"remove-selected-feature",title:"{messages.remove}",className:RR.iconTrash}),o_=new Zw({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:RR.iconZoom}),a_=new Zw({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:RR.iconBrowseClusteredFeatures}),vBe="esri.widgets.Popup.PopupViewModel",hO=se.getLogger(vBe),bBe=t=>{const{event:e,view:i}=t,{action:n}=e,r=i&&i.popup;if(!n)return Promise.reject(new N("trigger-action:missing-arguments","Event has no action"));if(!r)return Promise.reject(new N("trigger-action:missing-arguments","view.popup is missing"));const{disabled:s,id:o}=n;if(!o)return Promise.reject(new N("trigger-action:invalid-action","action.id is missing"));if(s)return Promise.reject(new N("trigger-action:invalid-action","Action is disabled"));if(o===Gy.id)return wBe(r.viewModel).catch(jN);if(o===o_.id)return xBe(r.viewModel);if(o===a_.id)return r.featureMenuOpen=!r.featureMenuOpen,r.viewModel.browseClusterEnabled=!r.viewModel.browseClusterEnabled,Promise.resolve();if(r.viewModel.browseClusterEnabled=!1,o===yK.id){r.close();const{selectedFeature:a}=r;if(!a)return Promise.reject(new N(`trigger-action:${yK.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:l}=a;return l?l.remove(a):i.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function Mfe(t){const{selectedFeature:e,location:i,view:n}=t;return n?n.type==="3d"?e??i??null:t.get("selectedFeature.geometry")||i:null}function yy(t){var e,i;return!!t&&t.isAggregate&&((i=(e=t.sourceLayer)==null?void 0:e.featureReduction)==null?void 0:i.type)==="cluster"}async function _Be(t,e){if((e==null?void 0:e.type)!=="3d"||!t||t.declaredClass!=="esri.Graphic")return!0;const i=e.getViewForGraphic(t);if(i&&"whenGraphicBounds"in i){let n;try{n=await i.whenGraphicBounds(t,{useViewElevation:!0})}catch{}return!n||!n.boundingBox||n.boundingBox[0]===n.boundingBox[3]&&n.boundingBox[1]===n.boundingBox[4]&&n.boundingBox[2]===n.boundingBox[5]}return!0}async function wBe(t){var h;const{location:e,selectedFeature:i,view:n,zoomFactor:r}=t,s=Mfe(t);if(!n||!s){const p=new N("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:s,view:n});throw hO.error(p),p}const o=n.scale/r,a=(h=t.selectedFeature)==null?void 0:h.geometry,l=a??e,u=A(l)&&l.type==="point"&&await _Be(i,n);Gy.active=!0,Gy.disabled=!0;try{await t.zoomTo({target:{target:s,scale:u?o:void 0}})}catch{const f=new N("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:i});hO.error(f)}finally{Gy.active=!1,Gy.disabled=!1,t.zoomToLocation=null,u&&(t.location=l)}}async function xBe(t){const{selectedFeature:e,view:i}=t;if((i==null?void 0:i.type)!=="2d"){const o=new N("zoomToCluster:invalid-view","View must be 2d MapView.",{view:i});throw hO.error(o),o}if(!e||!yy(e)){const o=new N("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:e});throw hO.error(o),o}const[n,r]=await l7(i,e);o_.active=!0,o_.disabled=!0;const{extent:s}=await n.queryExtent(r);await t.zoomTo({target:s}),o_.active=!1,o_.disabled=!1}async function SBe(t){const{view:e,selectedFeature:i}=t;if(!e||!i)return;const[n,r]=await l7(e,i),{extent:s}=await n.queryExtent(r);t.selectedClusterBoundaryFeature.geometry=s,e.graphics.add(t.selectedClusterBoundaryFeature)}async function EBe(t){var o;const{selectedFeature:e,view:i}=t;if(!i||!e)return;const[n,r]=await l7(i,e);a_.active=!0,a_.disabled=!0;const{features:s}=await n.queryFeatures(r);a_.active=!1,a_.disabled=!1,(o=i.popup)==null||o.open({features:[e].concat(s),featureMenuOpen:!0})}async function l7(t,e){const i=await t.whenLayerView(e.sourceLayer),n=i.createQuery(),r=e.getObjectId();return n.aggregateIds=r!=null?[r]:[],[i,n]}function CBe(t){const e=t.features.filter(i=>yy(i));e.length&&(t.features=e)}function Ofe(t){var e;if(U(t))return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return(e=t.extent)==null?void 0:e.center;default:return null}}const De="esri-popup",dx=`${De}__header`,Zm=`${De}--is-docked`,ae={calciteThemeLight:"calcite-mode-light",calciteThemeDark:"calcite-mode-dark",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:De,widget:"esri-widget",main:`${De}__main-container`,loadingContainer:`${De}__loading-container`,isCollapsible:`${De}--is-collapsible`,isCollapsed:`${De}--is-collapsed`,shadow:`${De}--shadow`,isDocked:Zm,isDockedTopLeft:`${Zm}-top-left`,isDockedTopCenter:`${Zm}-top-center`,isDockedTopRight:`${Zm}-top-right`,isDockedBottomLeft:`${Zm}-bottom-left`,isDockedBottomCenter:`${Zm}-bottom-center`,isDockedBottomRight:`${Zm}-bottom-right`,alignTopCenter:`${De}--aligned-top-center`,alignBottomCenter:`${De}--aligned-bottom-center`,alignTopLeft:`${De}--aligned-top-left`,alignBottomLeft:`${De}--aligned-bottom-left`,alignTopRight:`${De}--aligned-top-right`,alignBottomRight:`${De}--aligned-bottom-right`,isFeatureMenuOpen:`${De}--feature-menu-open`,isActionsMenuOpen:`${De}--actions-menu-open`,hasFeatureUpdated:`${De}--feature-updated`,header:dx,headerButtons:`${dx}-buttons`,headerContainer:`${dx}-container`,headerContainerButton:`${dx}-container--button`,headerTitle:`${dx}-title`,content:`${De}__content`,contentHasFlows:"esri-content--has-flows",contentFlowItem:"esri-content__flow-item",footer:`${De}__footer`,footerHasPagination:`${De}__footer--has-pagination`,footerHasActions:`${De}__footer--has-actions`,footerHasActionsMenu:`${De}__footer--has-actions-menu`,button:`${De}__button`,buttonDisabled:`${De}__button--disabled`,buttonDock:`${De}__button--dock`,icon:`${De}__icon`,iconDock:`${De}__icon--dock-icon`,inlineActionsContainer:`${De}__inline-actions-container`,actionsMenuButton:`${De}__actions-menu-button`,actions:`${De}__actions`,action:`${De}__action`,actionImage:`${De}__action-image`,actionText:`${De}__action-text`,actionToggle:`${De}__action-toggle`,actionToggleOn:`${De}__action-toggle--on`,actionExit:`${De}__action--exit`,actionSelectFeature:`${De}__action--select-feature`,pointer:`${De}__pointer`,pointerDirection:`${De}__pointer-direction`,navigation:`${De}__navigation`,paginationPrevious:`${De}__pagination-previous`,paginationNext:`${De}__pagination-next`,paginationPreviousIconLTR:`${De}__pagination-previous-icon`,paginationPreviousIconRTL:`${De}__pagination-previous-icon--rtl`,paginationNextIconLTR:`${De}__pagination-next-icon`,paginationNextIconRTL:`${De}__pagination-next-icon--rtl`,featureMenu:`${De}__feature-menu`,featureMenuList:`${De}__feature-menu-list`,featureMenuItem:`${De}__feature-menu-item`,featureMenuViewport:`${De}__feature-menu-viewport`,featureMenuHeader:`${De}__feature-menu-header`,featureMenuNote:`${De}__feature-menu-note`,featureMenuSelected:`${De}__feature-menu-item--selected`,featureMenuButton:`${De}__feature-menu-button`,featureMenuTitle:`${De}__feature-menu-title`,featureMenuObserver:`${De}__feature-menu-observer`,featureMenuLoader:`${De}__feature-menu-loader`,collapseButton:`${De}__collapse-button`,collapseIcon:`${De}__collapse-icon`},IBe="OBJECTID";var or;(function(t){t[t.size=22]="size",t[t.lineWidth=50]="lineWidth",t[t.maxSize=120]="maxSize",t[t.maxOutlineSize=80]="maxOutlineSize",t[t.tallSymbolWidth=20]="tallSymbolWidth"})(or||(or={}));const AV={fill:[{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"}],squareFill:[{type:"path",path:"M -10,-10 L 10,-10 L 10,10 L -10,10 L -10,-10 Z"}],pathSymbol3DLayer:[{type:"path",path:"M 3,12 L 12,0 L 11,-2 L -4,5 L -1,5 L 1,7 L 3,10 L 3,12 Z"},{type:"circle",cx:-2,cy:10,r:5}],extrudeSymbol3DLayer:[{type:"path",path:"M -7,-5 L -2,0 L -2,7 L -7,3 L -7,-5 Z"},{type:"path",path:"M -2,0 L -2,7 L 10,-3 L 10,-10 L -2,0 Z"},{type:"path",path:"M -7,-5 L -2,0 L 10,-10 L -2,-10 L -7,-5 Z"}],cone:[{type:"path",path:"M 0,-10 L -8,5 L -4,6.5 L 0,7 L 4,6.5 L 8,5 Z"}],tallCone:[{type:"path",path:"M 0,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 0,-9 Z"}],invertedCone:[{type:"path",path:"M 0,7 L -8,-8 L 8,-8 Z"},{type:"path",path:"M -8,-8 L -4,-9.5 L 0,-10 L 4,-9.5 L 8,-8 L 4,-6.5 L 0,-6 L -4,-6.5 Z"}],cube:[{type:"path",path:"M -10,-7 L 0,-12 L 10,-7 L 0,-2 L -10,-7 Z"},{type:"path",path:"M -10,-7 L 0,-2 L 0,12 L -10,7 L -10,-7 Z"},{type:"path",path:"M 0,-2 L 10,-7 L 10,7 L 0,12 L 0,-2 Z"}],tallCube:[{type:"path",path:"M -3.5,-8.5 L 0,-9.5 L 3.5,-8.5 L 0,-7.5 L -3.5,-8.5 Z"},{type:"path",path:"M -3.5,-8.5 L 0,-7.5 L 0,9 L -3.5,8 L -3.5,-8.5 Z"},{type:"path",path:"M 0,-7.5 L 3.5,-8.5 L 3.5,8 L 0,9 L 0,-7.5 Z"}],cylinder:[{type:"path",path:"M -8,-9 L -8,7 L -4,8.5 L 0,9 L 4,8.5 L 8,7 L 8,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:8,ry:2}],tallCylinder:[{type:"path",path:"M -3.5,-9 L -3.5,7 L -1.5,7.8 L 0,8 L 1.5,7.8 L 3.5,7 L 3.5,-9 Z"},{type:"ellipse",cx:0,cy:-9,rx:3.5,ry:1}],diamond:[{type:"path",path:"M 0,-10 L 10,-1 L -1,1 L 0,-10 Z"},{type:"path",path:"M 0,-10 L -1,1 L -8,-1 L 0,-10 Z"},{type:"path",path:"M -1,1 L 0,10 L -8,-1 L -1,1 Z"},{type:"path",path:"M -1,0 L 0,10 L 10,-1 L -1,1 Z"}],tetrahedron:[{type:"path",path:"M 0,-10 L 10,7 L 0,0 L 0,-10 Z"},{type:"path",path:"M 0,-10 L 0,0 L -8,7 L 0,-10 Z"},{type:"path",path:"M 10,7 L 0,0 L -8,7 L 10,7 Z"}]};function TBe(t,e,i){const n=or.size;let r=n,s=n;t<1?r*=.75:t>1&&(s*=1.25);const o=0,a=0;let l=n,u=n;return e&&i&&(r=s=l=u=0),[{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[i?l:.875*l,o]},{command:"L",values:[i?r-.5*l:a,s-.5*u]},{command:"L",values:[r-.5*l,s-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[l,o]},{command:"L",values:[l,e?o:.125*u]},{command:"L",values:[r-.5*l,e?s-.5*u:u]},{command:"L",values:[r-.5*l,s-.5*u]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[r-.5*l,s-.5*u]},{command:"L",values:[i?r-.5*l:a,s-.5*u]},{command:"L",values:[i?r-.5*l:a,e?s-.5*u:u]},{command:"L",values:[r-.5*l,e?s-.5*u:u]},{command:"Z",values:[]}]}]}function kBe(t){const e=or.size,i=.5*t,n=0,r=0;return[{type:"path",path:[{command:"M",values:[r,.7*e*.5]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[r,.7*e+i-.7*e*.5]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,.7*e]},{command:"L",values:[.3*e,.7*e+i]},{command:"L",values:[e,i]},{command:"L",values:[e,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.3*e,n]},{command:"L",values:[e,n]},{command:"L",values:[.3*e,.7*e]},{command:"L",values:[r,.7*e*.5]},{command:"Z",values:[]}]}]}function $Be(){return[{type:"path",path:"M80,80.2v-27c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4C8.3,59.3,5.7,58,3.9,56c-1.1-1.2-2.4-2.1-3.9-2.8v27"},{type:"path",path:"M11,59.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8v-24c-1.5,0.7-2.8,1.6-3.9,2.8c-1.8,2.1-4.4,3.3-7.1,3.5c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-2.2-2.3-4.7-3.6-7.4-3.6s-5.1,1.3-7.4,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.7-0.1-5.3-1.4-7.1-3.4c-1.1-1.2-2.4-2.1-3.9-2.8v24c1.5,0.7,2.8,1.6,3.9,2.8C5.7,58,8.3,59.3,11,59.4z"},{type:"path",path:"M11,35.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.4-3.6s5.1,1.3,7.4,3.6c1.8,2,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c2.2-2.3,4.7-3.6,7.3-3.6s5.1,1.3,7.4,3.6c1.8,2.1,4.4,3.3,7.2,3.4c2.7-0.1,5.3-1.4,7.1-3.4c1.1-1.2,2.4-2.1,3.9-2.8V3.6c-1.5,0.7-2.8,1.6-3.9,2.8c-2.2,2.1-4.6,3.4-7.1,3.4s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6S42.5,9.9,40,9.9s-5-1.3-7.1-3.4s-4.7-3.6-7.4-3.6s-5.1,1.3-7.3,3.6c-1.8,2.1-4.4,3.3-7.2,3.4c-2.5,0-5-1.3-7.1-3.4C2.8,5.3,1.4,4.3,0,3.6v25.6c1.5,0.7,2.8,1.6,3.9,2.8C5.7,34.1,8.3,35.3,11,35.4z"}]}function ABe(t,e){let i=e?or.tallSymbolWidth:t;const n=t,r=e?4:6;i<=or.size?i-=.5*r:i-=r;const s=0,o=0,a=e?.35*i:.5*i;return[{type:"path",path:[{command:"M",values:[.5*i,s]},{command:"L",values:[i,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[o,.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a]},{command:"L",values:[.5*i,a]},{command:"L",values:[.5*i,n]},{command:"L",values:[o,n-.5*a]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.5*i,a]},{command:"L",values:[.5*i,n]},{command:"L",values:[i,n-.5*a]},{command:"L",values:[i,.5*a]},{command:"Z",values:[]}]}]}function MBe(t,e){let i=e?or.tallSymbolWidth:t;const n=t,r=e?4:6;i<=or.size?i-=.5*r:i-=r;const s=.5*i,o=.15*i,a=0,l=n-o;return[{type:"ellipse",cx:.5*i,cy:l,rx:s,ry:o},{type:"path",path:[{command:"M",values:[a,o]},{command:"L",values:[a,l]},{command:"L",values:[i,l]},{command:"L",values:[i,o]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*i,cy:o,rx:s,ry:o}]}function OBe(t,e){let i=e?or.tallSymbolWidth:t;const n=t,r=e?4:6;i<=or.size?i-=.5*r:i-=r;const s=.15*i,o=n-s;return[{type:"ellipse",cx:.5*i,cy:o,rx:.5*i,ry:s},{type:"path",path:[{command:"M",values:[.5*i,0]},{command:"L",values:[i,o]},{command:"L",values:[0,o]},{command:"Z",values:[]}]}]}function PBe(t){let e=t;const i=t,n=6;e<or.size?e-=.5*n:e-=n;const r=.15*e,s=0;return[{type:"path",path:[{command:"M",values:[0,s]},{command:"L",values:[e,s]},{command:"L",values:[.5*e,i-r]},{command:"Z",values:[]}]},{type:"ellipse",cx:.5*e,cy:s,rx:.5*e,ry:r}]}function RBe(t){let e=t;const i=t,n=4;e<or.size?e-=.5*n:e-=n;const r=0,s=0,o=e,a=i,l=Math.floor(t/10)-1||1;return[{type:"path",path:[{command:"M",values:[.45*o,r]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,r]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[s,.5*a-l]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"L",values:[.45*o,i]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*o,i]},{command:"L",values:[o,.5*a-l]},{command:"L",values:[.45*o-l,.5*a+l]},{command:"Z",values:[]}]}]}function LBe(t){const e=t,i=2;let n=t;n<or.size?n-=.5*i:n-=i;const r=0,s=0;return[{type:"path",path:[{command:"M",values:[.45*e,r]},{command:"L",values:[e,n]},{command:"L",values:[.45*e,.6*n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[.45*e,r]},{command:"L",values:[.45*e,.6*n]},{command:"L",values:[s,n]},{command:"Z",values:[]}]},{type:"path",path:[{command:"M",values:[s,n]},{command:"L",values:[.45*e,.6*n]},{command:"L",values:[e,n]},{command:"Z",values:[]}]}]}function Yf(t,e){return Math.round(Math.min(Math.max(t+255*e*.75,0),255))}function A_t(t,e){if(t==null)return new Se;if("type"in t&&(t.type==="linear"||t.type==="pattern"))return t;const i=new Se(t);return new Se([Yf(i.r,e),Yf(i.g,e),Yf(i.b,e),i.a])}function DBe(t){return"r"in t&&"g"in t&&"b"in t}function Pfe(t){return"h"in t&&"s"in t&&"v"in t}function Rfe(t){return"l"in t&&"a"in t&&"b"in t}function Lfe(t){return"l"in t&&"c"in t&&"h"in t}function FBe(t){return"x"in t&&"y"in t&&"z"in t}const NBe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],zBe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function Dfe(t,e){const i=[];let n,r;if(t[0].length!==e.length)throw new Error("dimensions do not match");const s=t.length,o=t[0].length;let a=0;for(n=0;n<s;n++){for(a=0,r=0;r<o;r++)a+=t[n][r]*e[r];i.push(a)}return i}function Ffe(t){const e=[t.r/255,t.g/255,t.b/255].map(n=>n<=.04045?n/12.92:((n+.055)/1.055)**2.4),i=Dfe(NBe,e);return{x:100*i[0],y:100*i[1],z:100*i[2]}}function c7(t){const e=Dfe(zBe,[t.x/100,t.y/100,t.z/100]).map(i=>{const n=i<=.0031308?12.92*i:1.055*i**.4166666666666667-.055;return Math.min(1,Math.max(n,0))});return{r:Math.round(255*e[0]),g:Math.round(255*e[1]),b:Math.round(255*e[2])}}function Nfe(t){const e=[t.x/95.047,t.y/100,t.z/108.883].map(i=>i>.008856451679035631?i**.3333333333333333:7.787037037037035*i+.13793103448275862);return{l:116*e[1]-16,a:500*(e[0]-e[1]),b:200*(e[1]-e[2])}}function zfe(t){const e=t.l,i=[(e+16)/116+t.a/500,(e+16)/116,(e+16)/116-t.b/200].map(n=>n>6/29?n**3:3*(6/29)**2*(n-4/29));return{x:95.047*i[0],y:100*i[1],z:108.883*i[2]}}function jBe(t){const e=t.l,i=t.a,n=t.b,r=Math.sqrt(i*i+n*n);let s=Math.atan2(n,i);return s=s>0?s:s+2*Math.PI,{l:e,c:r,h:s}}function VBe(t){const e=t.l,i=t.c,n=t.h;return{l:e,a:i*Math.cos(n),b:i*Math.sin(n)}}function jfe(t){return Nfe(Ffe(t))}function Vfe(t){return c7(zfe(t))}function UBe(t){return jBe(Nfe(Ffe(t)))}function BBe(t){return c7(zfe(VBe(t)))}function HBe(t){const e=t.r,i=t.g,n=t.b,r=Math.max(e,i,n),s=r-Math.min(e,i,n);let o=r,a=s===0?0:r===e?(i-n)/s%6:r===i?(n-e)/s+2:(e-i)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function GBe(t){const e=(t.h+360)%360/60,i=t.s/100,n=t.v/100*255,r=n*i,s=r*(1-Math.abs(e%2-1));let o;switch(Math.floor(e)){case 0:o={r,g:s,b:0};break;case 1:o={r:s,g:r,b:0};break;case 2:o={r:0,g:r,b:s};break;case 3:o={r:0,g:s,b:r};break;case 4:o={r:s,g:0,b:r};break;case 5:case 6:o={r,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+n-r),o.g=Math.round(o.g+n-r),o.b=Math.round(o.b+n-r),o}function r2(t){return DBe(t)?t:Lfe(t)?BBe(t):Rfe(t)?Vfe(t):FBe(t)?c7(t):Pfe(t)?GBe(t):t}function u7(t){return Pfe(t)?t:HBe(r2(t))}function M_t(t){return Rfe(t)?t:jfe(r2(t))}function O_t(t){return Lfe(t)?t:UBe(r2(t))}function P_t(t,e){const i=jfe(t);return i.l*=1-e,Vfe(i)}function pO(){const t=new Float32Array(6);return t[0]=1,t[3]=1,t}function qBe(t){const e=new Float32Array(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function WBe(t,e,i,n,r,s){const o=new Float32Array(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o[4]=r,o[5]=s,o}function JBe(t,e){return new Float32Array(t,e,6)}function Ufe(t,e,i,n){const r=e[n],s=e[n+1];t[n]=i[0]*r+i[2]*s+i[4],t[n+1]=i[1]*r+i[3]*s+i[5]}function YBe(t,e,i,n=0,r=0,s=2){const o=r||e.length/s;for(let a=n;a<o;a++)Ufe(t,e,i,a*s)}Object.freeze(Object.defineProperty({__proto__:null,clone:qBe,create:pO,createView:JBe,fromValues:WBe,transform:Ufe,transformMany:YBe},Symbol.toStringTag,{value:"Module"}));function ZBe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function LR(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function KBe(t,e,i,n,r,s,o){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=s,t[5]=o,t}function d7(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5];let l=i*s-n*r;return l?(l=1/l,t[0]=s*l,t[1]=-n*l,t[2]=-r*l,t[3]=i*l,t[4]=(r*a-s*o)*l,t[5]=(n*o-i*a)*l,t):null}function XBe(t){return t[0]*t[3]-t[1]*t[2]}function vy(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],h=i[1],p=i[2],f=i[3],g=i[4],v=i[5];return t[0]=n*u+s*h,t[1]=r*u+o*h,t[2]=n*p+s*f,t[3]=r*p+o*f,t[4]=n*g+s*v+a,t[5]=r*g+o*v+l,t}function s2(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=Math.sin(i),h=Math.cos(i);return t[0]=n*h+s*u,t[1]=r*h+o*u,t[2]=n*-u+s*h,t[3]=r*-u+o*h,t[4]=a,t[5]=l,t}function DR(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],h=i[1];return t[0]=n*u,t[1]=r*u,t[2]=s*h,t[3]=o*h,t[4]=a,t[5]=l,t}function xw(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=i[0],h=i[1];return t[0]=n,t[1]=r,t[2]=s,t[3]=o,t[4]=n*u+s*h+a,t[5]=r*u+o*h+l,t}function Bfe(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t[4]=0,t[5]=0,t}function Hfe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function h7(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function QBe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function e7e(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+1)}function t7e(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function Gfe(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function i7e(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function n7e(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t}function r7e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function s7e(t,e){const i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=e[0],u=e[1],h=e[2],p=e[3],f=e[4],g=e[5],v=Ra();return Math.abs(i-l)<=v*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(n-u)<=v*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-h)<=v*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(s-p)<=v*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(o-f)<=v*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-g)<=v*Math.max(1,Math.abs(a),Math.abs(g))}const o7e=vy,a7e=Gfe;Object.freeze(Object.defineProperty({__proto__:null,add:t7e,copy:ZBe,determinant:XBe,equals:s7e,exactEquals:r7e,frob:e7e,fromRotation:Bfe,fromScaling:Hfe,fromTranslation:h7,identity:LR,invert:d7,mul:o7e,multiply:vy,multiplyScalar:i7e,multiplyScalarAndAdd:n7e,rotate:s2,scale:DR,set:KBe,str:QBe,sub:a7e,subtract:Gfe,translate:xw},Symbol.toStringTag,{value:"Module"}));const l7e="http://www.w3.org/2000/svg";let c7e=0,u7e=0;const vK=ee("android"),d7e=ee("chrome")||vK&&vK>=4?"auto":"optimizeLegibility",h7e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},p7e=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let Fi={},Mt={};const bK={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},f7e=Math.PI;let m7e=1;function l_(t,e){const i=t*(f7e/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function qfe(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function Wfe(t,e,i,n){if(t){if(t.type==="circle")return L("circle",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,r:t.r});if(t.type==="ellipse")return L("ellipse",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",cx:t.cx,cy:t.cy,rx:t.rx,ry:t.ry});if(t.type==="rect")return L("rect",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",x:t.x,y:t.y,width:t.width,height:t.height});if(t.type==="image")return L("image",{href:t.src,x:t.x,y:t.y,width:t.width,height:t.height,preserveAspectRatio:"none"});if(t.type==="path"){const r=typeof t.path!="string"?qfe(t.path):t.path;return L("path",{fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4",d:r})}if(t.type==="text")return Du(n),L("text",{"dominant-baseline":n.dominantBaseline,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-width":i.width,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-dasharray":i.dashArray,"stroke-miterlimit":"4","text-anchor":n.align,"text-decoration":n.decoration,kerning:n.kerning,rotate:n.rotate,"text-rendering":d7e,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,"font-size":n.font.size,"font-family":n.font.family,x:t.x,y:t.y},t.text)}return null}function Jfe(t){const e={fill:"none",pattern:null,linearGradient:null};if(t){if("type"in t&&t.type==="pattern"){const i="patternId-"+ ++c7e;e.fill=`url(#${i})`,e.pattern={id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}}}else if("type"in t&&t.type==="linear"){const i="linearGradientId-"+ ++u7e;e.fill=`url(#${i})`,e.linearGradient={id:i,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(n=>({offset:n.offset,color:n.color&&new Se(n.color).toString()}))}}else if(t){const i=new Se(t);e.fill=i.toString()}}return e}function Yfe(t){const e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};if(t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new Se(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashArray&&(e.dashOffset=t.dashoffset),t.style)){let i=null;if(t.style in bK&&(i=bK[t.style]),Array.isArray(i)){i=i.slice(0);const n=t.width??0;for(let r=0;r<i.length;++r)i[r]*=n;if(t.cap!=="butt"){for(let r=0;r<i.length;r+=2)i[r]-=n,i[r]<1&&(i[r]=1);for(let r=1;r<i.length;r+=2)i[r]+=n}i=i.join(",")}e.dashArray=i}return e}function Zfe(t,e){const i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){const n=t.alignBaseline,r=n==="baseline"?"auto":n==="top"?"text-top":n==="bottom"?"hanging":n;i.align=t.align,i.dominantBaseline=r,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",Du(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function g7e(t){const{pattern:e,linearGradient:i}=t;if(e)return L("pattern",{id:e.id,patternUnits:"userSpaceOnUse",x:e.x,y:e.y,width:e.width,height:e.height},L("image",{x:e.image.x,y:e.image.y,width:e.image.width,height:e.image.height,href:e.image.href}));if(i){const n=i.stops.map((r,s)=>L("stop",{key:`${s}-stop`,offset:r.offset,"stop-color":r.color}));return L("linearGradient",{id:i.id,gradientUnits:"userSpaceOnUse",x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n)}return null}function y7e(t,e){if(!t)return null;const i=[];for(const n of t){const{shape:r,fill:s,stroke:o,font:a}=n,l=Jfe(s),u=Yfe(o),h=r.type==="text"?Zfe(r,a):null,p=Wfe(r,l.fill,u,h);p&&i.push(p)}return L("mask",{id:e,maskUnits:"userSpaceOnUse"},L("g",null,i))}function _K(t,e,i){return xw(t,LR(t),[e,i])}function wK(t,e,i,n,r){return DR(t,LR(t),[e,i]),t[4]=t[4]*e-n*e+n,t[5]=t[5]*i-r*i+r,t}function v7e(t,e,i,n){const r=e%360*Math.PI/180;s2(t,LR(t),r);const s=Math.cos(r),o=Math.sin(r),a=t[4],l=t[5];return t[4]=a*s-l*o+n*o-i*s+i,t[5]=l*s+a*o-i*o-n*s+n,t}function As(t,e){Fi&&"left"in Fi?(Fi.left!=null&&Fi.left>t&&(Fi.left=t),(Fi.right==null||Fi.right<t)&&(Fi.right=t),(Fi.top==null||Fi.top>e)&&(Fi.top=e),(Fi.bottom==null||Fi.bottom<e)&&(Fi.bottom=e)):Fi={left:t,bottom:e,right:t,top:e}}function xK(t){const e=t.args,i=e.length;let n;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<i;n+=2)As(e[n],e[n+1]);Mt.x=e[i-2],Mt.y=e[i-1];break;case"H":for(n=0;n<i;++n)As(e[n],Mt.y);Mt.x=e[i-1];break;case"V":for(n=0;n<i;++n)As(Mt.x,e[n]);Mt.y=e[i-1];break;case"m":{let r=0;for(("x"in Mt)||(As(Mt.x=e[0],Mt.y=e[1]),r=2),n=r;n<i;n+=2)As(Mt.x+=e[n],Mt.y+=e[n+1]);break}case"l":case"t":for(n=0;n<i;n+=2)As(Mt.x+=e[n],Mt.y+=e[n+1]);break;case"h":for(n=0;n<i;++n)As(Mt.x+=e[n],Mt.y);break;case"v":for(n=0;n<i;++n)As(Mt.x,Mt.y+=e[n]);break;case"c":for(n=0;n<i;n+=6)As(Mt.x+e[n],Mt.y+e[n+1]),As(Mt.x+e[n+2],Mt.y+e[n+3]),As(Mt.x+=e[n+4],Mt.y+=e[n+5]);break;case"s":case"q":for(n=0;n<i;n+=4)As(Mt.x+e[n],Mt.y+e[n+1]),As(Mt.x+=e[n+2],Mt.y+=e[n+3]);break;case"A":for(n=0;n<i;n+=7)As(e[n+5],e[n+6]);Mt.x=e[i-2],Mt.y=e[i-1];break;case"a":for(n=0;n<i;n+=7)As(Mt.x+=e[n+5],Mt.y+=e[n+6])}}function SK(t,e,i){const n=h7e[t.toLowerCase()];let r;typeof n=="number"&&(n?e.length>=n&&(r={action:t,args:e.slice(0,e.length-e.length%n)},i.push(r),xK(r)):(r={action:t,args:[]},i.push(r),xK(r)))}function b7e(t){const e=(typeof t.path!="string"?qfe(t.path):t.path).match(p7e),i=[];if(Fi={},Mt={},!e)return null;let n="",r=[];const s=e.length;for(let a=0;a<s;++a){const l=e[a],u=parseFloat(l);isNaN(u)?(n&&SK(n,r,i),r=[],n=l):r.push(u)}SK(n,r,i);const o={x:0,y:0,width:0,height:0};return Fi&&"left"in Fi&&(o.x=Fi.left,o.y=Fi.top,o.width=Fi.right-Fi.left,o.height=Fi.bottom-Fi.top),o}function _7e(t){const e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){const i=Sr(b7e(t));e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function w7e(t){const e={x:0,y:0,width:0,height:0};let i=null,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(const s of t)i?(i.x=Math.min(i.x,s.x),i.y=Math.min(i.y,s.y),n=Math.max(n,s.x+s.width),r=Math.max(r,s.y+s.height)):(i=e,i.x=s.x,i.y=s.y,n=s.x+s.width,r=s.y+s.height);return i&&(i.width=n-i.x,i.height=r-i.y),i}function x7e(t,e,i,n,r,s,o,a,l){let u=(o&&s?l_(s,e):e)/2,h=(o&&s?l_(s,i):i)/2;if(l){const S=l[0],C=l[1];u=(o&&s?l_(s,S):S)/2,h=(o&&s?l_(s,C):C)/2}const p=t.width+n,f=t.height+n,g=pO(),v=pO();let b=!1;if(r&&p!==0&&f!==0){const S=e!==i?e/i:p/f,C=e>i?e:i;let $=1,M=1;isNaN(C)||(S>1?($=C/p,M=C/S/f):(M=C/f,$=C*S/p)),vy(v,v,wK(g,$,M,u,h)),b=!0}const _=t.x+(p-n)/2,w=t.y+(f-n)/2;if(vy(v,v,_K(g,u-_,h-w)),!b&&(p>e||f>i)){const S=p/e>f/i,C=(S?e:i)/(S?p:f);vy(v,v,wK(g,C,C,_,w))}return s&&vy(v,v,v7e(g,s,_,w)),a&&vy(v,v,_K(g,a[0],a[1])),`matrix(${v[0]},${v[1]},${v[2]},${v[3]},${v[4]},${v[5]})`}function S7e(t,e,i){const n=t==null?void 0:t.effects.find(u=>u.type==="bloom");if(!n)return null;const{strength:r,radius:s}=n,o=r>0?s:0,a=(r+o)*e,l=4*r+1;return L("filter",{id:`bloom${i}`,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},L("feMorphology",{operator:"dilate",radius:(r+.5*o)*(5**(e/100)*(.4+e/100)),in:"SourceGraphic",result:"dilate"}),L("feGaussianBlur",{in:"dilate",stdDeviation:a/25,result:"blur"}),L("feGaussianBlur",{in:"blur",stdDeviation:a/50,result:"intensityBlur"}),L("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},L("feFuncR",{type:"linear",slope:l}),L("feFuncG",{type:"linear",slope:l}),L("feFuncB",{type:"linear",slope:l})),L("feMerge",null,L("feMergeNode",{in:"intensityBlur"}),L("feMergeNode",{in:"intensityBrightness"}),L("feGaussianBlur",{stdDeviation:r/10})))}function E7e(t,e,i,n={}){var u;const r=[],s=[],o=++m7e,a=S7e(n.effectView,e,o);let l=null;if(a){const h=(u=n.effectView)==null?void 0:u.effects.find(v=>v.type==="bloom"),p=(h.strength?h.strength+h.radius/2:0)/3,f=e+e*p,g=i+i*p;l=[Math.max(f,10),Math.max(g,10)]}for(let h=0;h<t.length;h++){const p=t[h],f=[],g=[];let v=0,b=0,_=0;for(const C of p){const{shape:$,fill:M,stroke:P,font:k,offset:D}=C;n.ignoreStrokeWidth||(v+=P&&P.width||0);const z=Jfe(M),B=Yfe(P),j=$.type==="text"?Zfe($,k):null;r.push(g7e(z)),f.push(Wfe($,z.fill,B,j)),g.push(_7e($)),D&&(b+=D[0],_+=D[1])}const w=x7e(Sr(w7e(g)),e,i,v,n.scale??!1,n.rotation,n.useRotationSize??!1,[b,_],l);let S=null;if(n.masking){const C=`mask-${h}`,$=n.masking[h];r.push(y7e($,C)),S=`url(#${C})`}s.push(S?L("g",{mask:S},L("g",{transform:w},f)):L("g",{transform:w},f))}return n.useRotationSize&&n.rotation&&(e=l_(n.rotation,e),i=l_(n.rotation,i)),a&&(Du(l),e=l[0],i=l[1]),L("svg",{xmlns:l7e,width:e,height:i,style:"display: block;"},a,L("defs",null,r),a?L("g",{filter:`url(#bloom${o})`},s):s)}const EK=O4();function C7e(t,e){EK.append(t,e),EK.detach(e)}function FR(t,e,i){const n=Math.ceil(e[0]),r=Math.ceil(e[1]);if(!t.some(o=>!!o.length))return null;const s=i&&i.node||document.createElement("div");return i.opacity!=null&&(s.style.opacity=i.opacity.toString()),i.effectView!=null&&(s.style.filter=Tde(i.effectView)),C7e(s,()=>E7e(t,n,r,i)),s}function I7e(t,e){t=Math.ceil(t),e=Math.ceil(e);const i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";const n=i.getContext("2d");return n.clearRect(0,0,t,e),n}function T7e(t,e,i){return t?rt(t,{responseType:"image"}).then(n=>{const r=n.data,s=r.width,o=r.height,a=s/o;let l=e;if(i){const u=Math.max(s,o);l=Math.min(l,u)}return{image:r,width:a<=1?Math.ceil(l*a):l,height:a<=1?l:Math.ceil(l/a)}}):Promise.reject(new N("renderUtils: imageDataSize","href not provided."))}function k7e(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function $7e(t,e,i,n,r){switch(r){case"multiply":t[e+0]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{const s=u7({r:t[e+0],g:t[e+1],b:t[e+2]});s.h=n.h,s.s=n.s,s.v=s.v/100*n.v;const o=r2(s);t[e+0]=o.r,t[e+1]=o.g,t[e+2]=o.b,t[e+3]*=i[3];break}}}function A7e(t,e,i,n,r){return T7e(t,e,r).then(s=>{const o=s.width?s.width:e,a=s.height?s.height:e;if(s.image&&k7e(i,n)){let l=s.image.width,u=s.image.height;ee("edge")&&/\.svg$/i.test(t)&&(l-=1,u-=1);const h=I7e(o,a);h.drawImage(s.image,0,0,l,u,0,0,o,a);const p=h.getImageData(0,0,o,a),f=[i.r/255,i.g/255,i.b/255,i.a],g=u7(i);for(let v=0;v<p.data.length;v+=4)$7e(p.data,v,f,g,n);h.putImageData(p,0,0),t=h.canvas.toDataURL("image/png")}else{const l=Ne&&Ne.findCredential(t);if(l&&l.token){const u=t.includes("?")?"&":"?";t=`${t}${u}token=${l.token}`}}return{url:t,width:o,height:a}}).catch(()=>({url:t,width:e,height:e}))}function M7e(t){return t=t||globalThis.location.hostname,O7e.some(e=>(t==null?void 0:t.match(e))!=null)}function CK(t,e){return t&&(e=e||globalThis.location.hostname)?e.match(Kfe)!=null||e.match(Qfe)!=null?t.replace("static.arcgis.com","staticdev.arcgis.com"):e.match(Xfe)!=null||e.match(eme)!=null?t.replace("static.arcgis.com","staticqa.arcgis.com"):t:t}const Kfe=/^devext.arcgis.com$/,Xfe=/^qaext.arcgis.com$/,Qfe=/^[\w-]*\.mapsdevext.arcgis.com$/,eme=/^[\w-]*\.mapsqa.arcgis.com$/,O7e=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,Kfe,Xfe,/^jsapps.esri.com$/,Qfe,eme];function tme(t,e,i,n){return t.name?t.styleName&&t.styleName==="Esri2DPointSymbolsStyle"?P7e(t,e,n):Ahe(t,e,n).then(r=>ime(Sr(r),t.name,e,i,n)):Promise.reject(new N("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function ime(t,e,i,n,r){var g;const s=t.data,o=i&&A(i.portal)?i.portal:zi.getDefault(),a={portal:o,url:_i(t.baseUrl),origin:"portal-item"},l=s.items.find(v=>v.name===e);if(!l){const v=`The symbol name '${e}' could not be found`;return Promise.reject(new N("symbolstyleutils:symbol-name-not-found",v,{symbolName:e}))}let u=nm(Bje(l,n),a),h=((g=l.thumbnail)==null?void 0:g.href)??null;const p=l.thumbnail&&l.thumbnail.imageData;M7e()&&(u=CK(u)??"",h=CK(h));const f={portal:o,url:_i(T9(u)),origin:"portal-item"};return zB(u,r).then(v=>{const b=n==="cimRef"?Mhe(v.data):v.data,_=fhe(b,f);if(_&&rm(_)){if(h){const w=nm(h,a);_.thumbnail=new t0({url:w})}else p&&(_.thumbnail=new t0({url:`data:image/png;base64,${p}`}));t.styleUrl?_.styleOrigin=new MC({portal:i.portal,styleUrl:t.styleUrl,name:e}):t.styleName&&(_.styleOrigin=new MC({portal:i.portal,styleName:t.styleName,name:e}))}return _})}function P7e(t,e,i){const n=Hje.replace(/\{SymbolName\}/gi,t.name),r=A(e.portal)?e.portal:zi.getDefault();return zB(n,i).then(s=>{const o=Mhe(s.data);return fhe(o,{portal:r,url:_i(T9(n)),origin:"portal-item"})})}const R7e=Object.freeze(Object.defineProperty({__proto__:null,fetchSymbolFromStyle:ime,resolveWebStyleSymbol:tme},Symbol.toStringTag,{value:"Module"})),by=or.size,sA=or.maxSize,p7=or.maxOutlineSize,IK=or.lineWidth,MV=or.tallSymbolWidth;function c_(t){const e=t.outline,i=A(t.material)?t.material.color:null,n=A(i)?i.toHex():null;if(U(e)||"pattern"in e&&A(e.pattern)&&e.pattern.type==="style"&&e.pattern.style==="none")return t.type==="fill"&&n==="#ffffff"?{color:"#bdc3c7",width:.75}:null;const r=Br(e.size)||0;return{color:"rgba("+(A(e.color)?e.color.toRgba():"255,255,255,1")+")",width:Math.min(r,p7),style:"pattern"in e&&A(e.pattern)&&e.pattern.type==="style"?bB(e.pattern.style):null,join:"butt",cap:"patternCap"in e?e.patternCap:"butt"}}function L7e(t,e){const i=e&&e.resource,n=i&&i.href;if(t.thumbnail&&t.thumbnail.url)return Promise.resolve(t.thumbnail.url);if(n&&e.type!=="object")return Promise.resolve(LNe(e));const r=pt("esri/images/Legend/legend3dsymboldefault.png");return t.styleOrigin&&(t.styleOrigin.styleName||t.styleOrigin.styleUrl)?tme(t.styleOrigin,{portal:t.styleOrigin.portal},"webRef").catch(s=>s).then(s=>{var o;return((o=s==null?void 0:s.thumbnail)==null?void 0:o.url)||r}):Promise.resolve(r)}function uF(t,e=1){const i=t.a,n=u7(t),r=n.h,s=n.s/e,o=100-(100-n.v)/e,{r:a,g:l,b:u}=r2({h:r,s,v:o});return[a,l,u,i]}function fO(t){return t.type==="water"?U(t.color)?null:t.color:U(t.material)||U(t.material.color)?null:t.material.color}function ei(t,e=0){const i=fO(t);if(!i){if(t.type==="fill")return null;const r=MNe.r,s=Yf(r,e);return[s,s,s,100]}const n=i.toRgba();for(let r=0;r<3;r++)n[r]=Yf(n[r],e);return n}async function nme(t,e){const i=t.style;return i==="none"?null:{type:"pattern",x:0,y:0,src:await ANe(pt(`esri/symbols/patterns/${i}.png`),e.toCss(!0)),width:5,height:5}}function TK(t){return t.outline?c_(t):{color:"rgba(0, 0, 0, 1)",width:1.5}}function rme(t,e){const i=fO(t);if(!i)return null;let n="rgba(";return n+=Yf(i.r,e)+",",n+=Yf(i.g,e)+",",n+=Yf(i.b,e)+",",n+i.a+");"}function OV(t,e){const i=rme(t,e);return i?"pattern"in t&&A(t.pattern)&&t.pattern.type==="style"&&t.pattern.style==="none"?null:{color:i,width:Math.min(t.size?Br(t.size):.75,p7),style:"pattern"in t&&A(t.pattern)&&t.pattern.type==="style"?bB(t.pattern.style):null,cap:"cap"in t?t.cap:null,join:"join"in t?t.join==="miter"?Br(2):t.join:null}:{}}function BT(t,e,i){const n=i!=null?.75*i:0;return{type:"linear",x1:n?.25*n:0,y1:n?.5*n:0,x2:n||4,y2:n?.5*n:4,colors:[{color:t,offset:0},{color:e,offset:1}]}}function D7e(t){const e=t.depth,i=t.height,n=t.width;return n!==0&&e!==0&&i!==0&&n===e&&n!=null&&i!=null&&n<i}function F7e(t,e,i){const n=[];if(!t)return n;switch(t.type){case"icon":{const o=e,a=e;switch(t.resource&&t.resource.primitive||COe){case"circle":n.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:ei(t,0),stroke:c_(t)});break;case"square":n.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[0,0]},{command:"L",values:[o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:ei(t,0),stroke:c_(t)});break;case"triangle":n.push({shape:{type:"path",path:[{command:"M",values:[0,a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,a]},{command:"Z",values:[]}]},fill:ei(t,0),stroke:c_(t)});break;case"cross":n.push({shape:{type:"path",path:[{command:"M",values:[.5*o,0]},{command:"L",values:[.5*o,a]},{command:"M",values:[0,.5*a]},{command:"L",values:[o,.5*a]}]},stroke:TK(t)});break;case"x":n.push({shape:{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[o,a]},{command:"M",values:[o,0]},{command:"L",values:[0,a]}]},stroke:TK(t)});break;case"kite":n.push({shape:{type:"path",path:[{command:"M",values:[0,.5*a]},{command:"L",values:[.5*o,0]},{command:"L",values:[o,.5*a]},{command:"L",values:[.5*o,a]},{command:"Z",values:[]}]},fill:ei(t,0),stroke:c_(t)})}break}case"object":switch(t.resource&&t.resource.primitive||rPe){case"cone":{const r=BT(ei(t,0),ei(t,-.6),i?MV:e),s=OBe(e,i);n.push({shape:s[0],fill:r}),n.push({shape:s[1],fill:r});break}case"inverted-cone":{const r=ei(t,0),s=BT(r,ei(t,-.6),e),o=PBe(e);n.push({shape:o[0],fill:s}),n.push({shape:o[1],fill:r});break}case"cube":{const r=ABe(e,i);n.push({shape:r[0],fill:ei(t,0)}),n.push({shape:r[1],fill:ei(t,-.3)}),n.push({shape:r[2],fill:ei(t,-.5)});break}case"cylinder":{const r=BT(ei(t,0),ei(t,-.6),i?MV:e),s=MBe(e,i);n.push({shape:s[0],fill:r}),n.push({shape:s[1],fill:r}),n.push({shape:s[2],fill:ei(t,0)});break}case"diamond":{const r=RBe(e);n.push({shape:r[0],fill:ei(t,-.3)}),n.push({shape:r[1],fill:ei(t,0)}),n.push({shape:r[2],fill:ei(t,-.3)}),n.push({shape:r[3],fill:ei(t,-.7)});break}case"sphere":{const r=BT(ei(t,0),ei(t,-.6));r.x1=0,r.y1=0,r.x2=.25*e,r.y2=.25*e,n.push({shape:{type:"circle",cx:0,cy:0,r:.5*e},fill:r});break}case"tetrahedron":{const r=LBe(e);n.push({shape:r[0],fill:ei(t,-.3)}),n.push({shape:r[1],fill:ei(t,0)}),n.push({shape:r[2],fill:ei(t,-.6)});break}}break}return n}function NR(t){const e=typeof(t==null?void 0:t.size)=="number"?t==null?void 0:t.size:null;return e?Br(e):null}function N7e(t){return t.type==="icon"?"multiply":"tint"}function z7e(t,e){const i=NR(e),n=e!=null&&e.maxSize?Br(e.maxSize):null,r=(e==null?void 0:e.disableUpsampling)??!1,s=t.symbolLayers,o=[];let a=0,l=0;const u=s.getItemAt(s.length-1);let h;return u&&u.type==="icon"&&(h=u.size&&Br(u.size)),s.forEach(p=>{var v;if(p.type!=="icon"&&p.type!=="object")return;const f=p.type==="icon"?p.size&&Br(p.size):0,g=i||f?Math.ceil(Math.min(i||f,n||sA)):by;if(p&&p.resource&&p.resource.href){const b=L7e(t,p).then(_=>{const w=p.get("material.color"),S=N7e(p);return A7e(_,g,w,S,r)}).then(_=>{const w=_.width,S=_.height;return a=Math.max(a,w),l=Math.max(l,S),[{shape:{type:"image",x:0,y:0,width:w,height:S,src:_.url},fill:null,stroke:null}]});o.push(b)}else{let b=g;p.type==="icon"&&h&&i&&(b=g*(f/h));const _=(e==null?void 0:e.symbolConfig)==="tall"||((v=e==null?void 0:e.symbolConfig)==null?void 0:v.isTall)||p.type==="object"&&D7e(p);a=Math.max(a,_?MV:b),l=Math.max(l,b),o.push(Promise.resolve(F7e(p,b,_)))}}),Zi(o).then(p=>{const f=[];return p.forEach(g=>{g.value?f.push(g.value):g.error&&se.getLogger("esri.symbols.support.previewSymbol3D").warn("error while building swatchInfo!",g.error)}),FR(f,[a,l],{node:e&&e.node,scale:!1,opacity:e&&e.opacity})})}function j7e(t,e){const i=t.symbolLayers,n=[],r=RNe(t),s=NR(e),o=(e&&e.maxSize?Br(e.maxSize):null)||p7;let a,l=0,u=0;return i.forEach((h,p)=>{if(!h||h.type!=="line"&&h.type!=="path")return;const f=[];switch(h.type){case"line":{const g=OV(h,0);if(U(g))break;const v=g&&g.width||0;p===0&&(a=v);const b=Math.min(s||v,o),_=p===0?b:s?b*(v/a):b,w=_>IK/2?2*_:IK;u=Math.max(u,_),l=Math.max(l,w),g.width=_,f.push({shape:{type:"path",path:[{command:"M",values:[0,.5*u]},{command:"L",values:[l,.5*u]}]},stroke:g});break}case"path":{const g=Math.min(s||by,o),v=ei(h,0),b=ei(h,-.2),_=rme(h,-.4),w=_?{color:_,width:1}:{};if(h.profile==="quad"){const S=h.width,C=h.height,$=TBe(S&&C?S/C:1,C===0,S===0),M={...w,join:"bevel"};f.push({shape:$[0],fill:b,stroke:M}),f.push({shape:$[1],fill:b,stroke:M}),f.push({shape:$[2],fill:v,stroke:M})}else f.push({shape:AV.pathSymbol3DLayer[0],fill:b,stroke:w}),f.push({shape:AV.pathSymbol3DLayer[1],fill:v,stroke:w});u=Math.max(u,g),l=u}}n.push(f)}),Promise.resolve(FR(n,[l,u],{node:e&&e.node,scale:r,opacity:e&&e.opacity}))}async function V7e(t,e){const i=t.type==="mesh-3d",n=t.symbolLayers,r=NR(e),s=e&&e.maxSize?Br(e.maxSize):null,o=r||by,a=[];let l=0,u=0,h=!1;for(let p=0;p<n.length;p++){const f=n.getItemAt(p),g=[];if(i&&f.type!=="fill")continue;const v=AV.fill[0];switch(f.type){case"fill":{const b=c_(f),_=Math.min(o,s||sA);l=Math.max(l,_),u=Math.max(u,_),h=!0;let w=ei(f,0);const S="pattern"in f?f.pattern:null,C=fO(f);!i&&A(S)&&S.type==="style"&&S.style!=="solid"&&C&&(w=await nme(S,C)),g.push({shape:v,fill:w,stroke:b});break}case"line":{const b=OV(f,0);if(U(b))break;const _={stroke:b,shape:v};l=Math.max(l,by),u=Math.max(u,by),g.push(_);break}case"extrude":{const b={join:"round",width:1,...OV(f,-.4)},_=ei(f,0),w=ei(f,-.2),S=Math.min(o,s||sA),C=kBe(S);b.width=1,g.push({shape:C[0],fill:w,stroke:b}),g.push({shape:C[1],fill:w,stroke:b}),g.push({shape:C[2],fill:_,stroke:b});const $=by,M=.7*by+.5*S;l=Math.max(l,$),u=Math.max(u,M);break}case"water":{const b=Sr(fO(f)),_=uF(b),w=uF(b,2),S=uF(b,3),C=$Be();h=!0,g.push({shape:C[0],fill:_}),g.push({shape:C[1],fill:w}),g.push({shape:C[2],fill:S});const $=Math.min(o,s||sA);l=Math.max(l,$),u=Math.max(u,$);break}}a.push(g)}return FR(a,[l,u],{node:e&&e.node,scale:h,opacity:e&&e.opacity})}function U7e(t,e){if(t.symbolLayers.length===0)return Promise.reject(new N("symbolPreview: renderPreviewHTML3D","No symbolLayers in the symbol."));switch(t.type){case"point-3d":return z7e(t,e);case"line-3d":return j7e(t,e);case"polygon-3d":case"mesh-3d":return V7e(t,e)}return Promise.reject(new N("symbolPreview: swatchInfo3D","symbol not supported."))}const B7e=Object.freeze(Object.defineProperty({__proto__:null,getPatternDescriptor:nme,getSizeFromOptions:NR,getSymbolLayerFill:ei,previewSymbol3D:U7e},Symbol.toStringTag,{value:"Module"}));let uv=null;const kK=[255,255,255];function $K(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function R_t(t,e,i){const{backgroundColor:n,outline:r,dotSize:s}=t,o=i&&i.swatchSize||or.size,a=.8,l=Math.round(o*o/s**2*a),u=window.devicePixelRatio,h=document.createElement("canvas"),p=o*u;h.width=p,h.height=p,h.style.width=h.width/u+"px",h.style.height=h.height/u+"px";const f=h.getContext("2d");if(n&&(f.fillStyle=n.toCss(!0),f.fillRect(0,0,p,p),f.fill()),f.fillStyle=e.toCss(!0),uv&&uv.length/2===l)for(let v=0;v<2*l;v+=2){const b=uv[v],_=uv[v+1];f.fillRect(b,_,s*u,s*u),f.fill()}else{uv=[];for(let v=0;v<2*l;v+=2){const b=$K(0,p),_=$K(0,p);uv.push(b,_),f.fillRect(b,_,s*u,s*u),f.fill()}}r&&(r.color&&(f.strokeStyle=r.color.toCss(!0)),f.lineWidth=r.width,f.strokeRect(0,0,p,p));const g=new Image(o,o);return g.src=h.toDataURL(),g}function L_t(t,e={}){const i=e.radius||40,n=2*Math.PI*i,r=t.length,s=n/r,o=[],a=vB(e.outline);(a==null?void 0:a.width)!=null&&(a.width*=2),(a||e.backgroundColor)&&o.push({shape:{type:"circle",cx:i,cy:i,r:i},fill:e.backgroundColor,stroke:a,offset:[0,0]});const l=e.values,u=l&&l.length===r&&l.reduce((v,b)=>v+b,0)===100,h=[0];for(let v=0;v<r;v++){let b=null;u&&(b=l[v]*n/100,h.push(b+h[v])),o.push({shape:{type:"circle",cx:i,cy:i,r:i/2},fill:[0,0,0,0],stroke:{width:i,dashArray:`${(b??s)/2} ${n}`,dashoffset:"-"+(u?h[v]/2:v*(s/2)),color:t[v]},offset:[0,0]})}let p=null;const f=2*i+((a==null?void 0:a.width)||0),g=e.holePercentage;if(g){a&&o.push({shape:{type:"circle",cx:i,cy:i,r:i*g},fill:null,stroke:a,offset:[0,0]});const v=f/2;p=[[{shape:{type:"circle",cx:v,cy:v,r:v},fill:kK,stroke:a?{...a,color:kK}:null,offset:[0,0]},{shape:{type:"circle",cx:v,cy:v,r:i*g},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return FR([o],[f,f],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:p,rotation:-90})}function D_t(t,e={}){const r=e.align==="horizontal",s=r?75:24,o=r?24:75,{width:a=s,height:l=o,gradient:u=!0}=e,h=window.devicePixelRatio,p=a*h,f=l*h,g=document.createElement("canvas");g.width=p,g.height=f,g.style.width=`${a}px`,g.style.height=`${l}px`;const v=g.getContext("2d"),b=r?p:0,_=r?0:f;if(u){const S=v.createLinearGradient(0,0,b,_),C=t.length,$=C===1?0:1/(C-1);t.forEach((M,P)=>S.addColorStop(P*$,M.toString())),v.fillStyle=S,v.fillRect(0,0,p,f)}else{const S=r?p/t.length:p,C=r?f:f/t.length;let $=0,M=0;for(const P of t)v.fillStyle=P.toString(),v.fillRect($,M,S,C),$=r?$+S:0,M=r?0:M+C}const w=document.createElement("div");return w.style.width=`${a}px`,w.style.height=`${l}px`,H7e(w,e==null?void 0:e.effectList),w.appendChild(g),w}function H7e(t,e){if(!e)return;t.style.filter=Tde(e);const i=e.effects;if(i){for(const n of i)if((n==null?void 0:n.type)==="drop-shadow"){n.offsetX<0?t.style.marginLeft=`${Math.abs(n.offsetX)}px`:t.style.marginRight=`${n.offsetX}px`;break}}}async function G7e(t,e){switch(t.type){case"web-style":{const{previewWebStyleSymbol:i}=await q(()=>import("./previewWebStyleSymbol-5da8fada.js"),[]);return i(t,G7e,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{const{previewSymbol3D:i}=await q(()=>Promise.resolve().then(()=>B7e),void 0);return i(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{const{previewSymbol2D:i}=await q(()=>import("./previewSymbol2D-d40c1efb.js"),["assets/previewSymbol2D-d40c1efb.js","assets/fontUtils-4c5efd72.js","assets/colorUtils-14347c9c.js"]);return i(t,e)}case"cim":{const{previewCIMSymbol:i}=await q(()=>import("./previewCIMSymbol-c254fcb4.js"),["assets/previewCIMSymbol-c254fcb4.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/CIMSymbolRasterizer-8d4fc6ec.js","assets/CIMResourceManager-5dc78991.js","assets/Rasterizer-d5997801.js","assets/_commonjsHelpers-2f3e7994.js","assets/rasterizingUtils-38c26b41.js","assets/imageutils-8c52ebc2.js"]);return i(t,e)}default:return}}function sme(t){return t&&"opacity"in t?t.opacity*sme(t.parent):1}async function q7e(t,e){if(!t)return;const i=t.sourceLayer,n=(A(e)&&e.useSourceLayer?i:t.layer)??i,r=sme(n);if(A(t.symbol)&&(!A(e)||e.ignoreGraphicSymbol!==!0)){const _=t.symbol.type==="web-style"?await YNe(t.symbol,{...e,cache:A(e)?e.webStyleCache:null}):t.symbol.clone();return SD(_,null,r),_}const s=(A(e)?e.renderer:null)??(n&&"renderer"in n?n.renderer:null);let o=s&&"getSymbolAsync"in s?await s.getSymbolAsync(t,e):null;if(!o)return;if(o=o.type==="web-style"?await o.fetchSymbol({...e,cache:A(e)?e.webStyleCache:null}):o.clone(),!(s&&"visualVariables"in s&&s.visualVariables&&s.visualVariables.length))return SD(o,null,r),o;if("arcadeRequiredForVisualVariables"in s&&s.arcadeRequiredForVisualVariables&&(U(e)||U(e.arcade))){const _={...e};_.arcade=await Rc(),e=_}const a=await q(()=>Promise.resolve().then(()=>SR),void 0),l=[],u=[],h=[],p=[];for(const _ of s.visualVariables)switch(_.type){case"color":l.push(_);break;case"opacity":u.push(_);break;case"rotation":p.push(_);break;case"size":_.target||h.push(_)}const f=!!l.length&&l[l.length-1],g=f?a.getColor(f,t,e):null,v=!!u.length&&u[u.length-1];let b=v?a.getOpacity(v,t,e):null;if(r!=null&&(b=b!=null?b*r:r),SD(o,g,b),h.length){const _=a.getAllSizes(h,t,e);await WNe(o,_)}for(const _ of p)JNe(o,a.getRotationAngle(_,t,e),_.axis);return o}let W7e=class{constructor(e,i){this._owner=i,this._properties={},this._afterDispatchHandle=null;for(const n in e){const r=e[n],s=new ioe(r,void 0,void 0,2,2);this._properties[n]={pool:s,acquired:[]}}this._afterDispatchHandle=aTe(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(const e in this._properties){const i=this._properties[e];for(const n of i.acquired)fW(n)||i.pool.release(n);i.pool.destroy(),i.pool=null,i.acquired=null}this._properties=null,this._owner=null}get(e){const i=this._owner._get(e),n=this._properties[e];let r=n.pool.acquire();for(n.acquired.push(r);r===i;)n.acquired.push(r),r=n.pool.acquire();return r}_release(){for(const e in this._properties){const i=this._properties[e];let n=0;for(const r of i.acquired)fW(r)?i.acquired[n++]=r:i.pool.release(r);i.acquired.length=n}}};const J7e=ee("mac")?"Meta":"Ctrl",zR={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let t=48;t<58;t++)zR[t]=String.fromCharCode(t);for(let t=1;t<25;t++)zR[111+t]=`F${t}`;for(let t=65;t<91;t++)zR[t]=[String.fromCharCode(t+32),String.fromCharCode(t)];function Y7e(t){if(t.key!==void 0)return To(t);const e=zR[t.keyCode];return Array.isArray(e)?t.shiftKey?e[1]:e[0]:e}function Z7e(t){switch(t){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}let K7e=class{constructor(e,i=[]){this.eventType=e,this.keyModifiers=i}matches(e){if(e.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const i=e.modifiers;for(const n of this.keyModifiers)if(!i.has(n))return!1;return!0}};const AK=se.getLogger("esri.views.input.InputHandler");let ar=class{constructor(e){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=e}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const e in this._incoming){const i=this._incoming[e];for(const n of i)this._incomingEventMatches.push(n.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(e=>e.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(e){this._manager?AK.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(i=>this._handleEvent(i)),e.setUninstallCallback(()=>this._onUninstall()),this._manager=e)}onUninstall(){}registerIncoming(e,i,n){let r;typeof i=="function"?(n=i,r=[]):r=i||[];const s=typeof e=="string"?new K7e(e,r):e,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const p=this._incoming[h.match.eventType];if(p){const f=p.indexOf(h);p.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new X7e(s,n,{onPause:a,onRemove:a,onResume:h=>{const p=this._incoming[h.match.eventType];p&&!p.includes(h)&&(p.push(h),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[s.eventType];return u||(u=[],this._incoming[s.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(e){if(this._outgoing[e])throw new Error("There is already a callback registered for this outgoing InputEvent: "+e);const i=new Q7e(e,{onEmit:(n,r,s,o)=>{var a;(a=this._manager)==null||a.emit(n.eventType,r,s,o)},onRemove:n=>{var r;delete this._outgoing[n.eventType],(r=this._manager)==null||r.updateDependencies()}});return this._outgoing[e]=i,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),i}startCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!0)}stopCapturingPointer(e){var i;(i=this._manager)==null||i.setPointerCapture(e,!1)}refreshHasPendingInputs(){var e;(e=this._manager)==null||e.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):AK.error("This InputHandler is not registered with an InputManager")}_handleEvent(e){var n;const i=this._incoming[e.type];if(i){for(const r of i)if(r.match.matches(e)&&((n=r.callback)==null||n.call(r,e),e.shouldStopPropagation()))break}}},X7e=class{constructor(e,i,n){this.match=e,this._callback=i,this._handler=n}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}},Q7e=class{constructor(e,i){this.eventType=e,this._removed=!1,this._handler=i}emit(e,i,n){this._removed||this._handler.onEmit(this,e,i,n)}remove(){this._removed=!0,this._handler.onRemove(this)}},eHe=class extends ar{constructor(e){super(!0),this._onChange=e,this._value="mouse",this._x=null,this._y=null,this.registerIncoming("pointer-move",i=>{this._update(i.data)})}_update(e){const i=e.native.pointerType==="touch"?"touch":"mouse",{x:n,y:r}=e;i===this._value&&this._x===n&&this._y===r||(this._value=i,this._x=n,this._y=r,this._onChange(i,n,r))}},mO=class{constructor(e){this._observable=new K8,this._value=e}get(){return Ke(this._observable),this._value}set(e){e!==this._value&&(this._value=e,this._observable.notify())}},tHe=class extends ar{get multiTouchActive(){return this._multiTouchActive.get()}constructor(){super(!0),this._activeTouchPointerIds=new Set,this._multiTouchActive=new mO(!1),this._onPointerAdd=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.add(e.native.pointerId),this._update())},this._onPointerRemove=({data:e})=>{e.pointerType==="touch"&&(this._activeTouchPointerIds.delete(e.native.pointerId),this._update())},this.registerIncoming("pointer-down",this._onPointerAdd),this.registerIncoming("pointer-up",this._onPointerRemove),this.registerIncoming("pointer-capture-lost",this._onPointerRemove),this.registerIncoming("pointer-cancel",this._onPointerRemove)}_update(){this._multiTouchActive.set(this._activeTouchPointerIds.size>1)}},lu=class extends _e{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._handlersPriority=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=J7e,this._latestPointerType="mouse",this._propertiesPool=new W7e({latestPointerLocation:rHe},this),this.latestPointerLocation=null,this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const i of e)this.uninstallHandlers(i);this.eventSource.destroy(),this._currentPropagation=null,this._propertiesPool.destroy()}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}get latestPointerType(){return this._latestPointerType}get multiTouchActive(){return this._multiTouchHandler.multiTouchActive}installHandlers(e,i,n=ri.INTERNAL){if(this._nameToGroup[e])return void se.getLogger(this.declaredClass).error("There is already an InputHandler group registered under the name `"+e+"`");if(i.length===0)return void se.getLogger(this.declaredClass).error("Can't register a group of zero handlers");const r={name:e,handlers:i.map(s=>({handler:s,active:!0,removed:!1,priorityIndex:0,groupPriority:n,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=r;for(let s=r.handlers.length-1;s>=0;s--){const o=r.handlers[s];this._handlers.push(o),o.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(a,l,u,h,p)=>{this._emitInputEvent(o.priorityIndex+1,a,l,u,p,h)},setPointerCapture:(a,l)=>{this._setPointerCapture(r,o,a,l)},setEventCallback:a=>{o.eventCallback=a},setUninstallCallback:a=>{o.uninstallCallback=a},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const i=this._nameToGroup[e];i?(i.handlers.forEach(n=>{var r;n.removed=!0,(r=n.uninstallCallback)==null||r.call(n)}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):se.getLogger(this.declaredClass).error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,i=new Set;this._handlersPriority=[];for(let n=this._handlers.length-1;n>=0;n--){const r=this._handlers[n];r.priorityIndex=n,this._handlersPriority.push(r)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let n=this._handlersPriority.length-1;n>=0;n--){const r=this._handlersPriority[n];r.priorityIndex=n;let s=r.handler.hasSideEffects;if(!s){for(const o of r.handler.outgoingEventTypes)if(e.has(o)){s=!0;break}}if(s)for(const o of r.handler.incomingEventMatches){e.add(o.eventType);for(const a of o.keyModifiers)Z7e(a)||i.add(a)}r.active=s}this._sourceEvents=e,this._keyModifiers=i,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointer(e,i,n){this._latestPointerType=e;const r=this._get("latestPointerLocation");if(U(r)||r.x!==i||r.y!==n){const s=this._propertiesPool.get("latestPointerLocation");s.x=i,s.y=n,this._set("latestPointerLocation",s)}}_onEventReceived(e,i){if(e==="pointer-capture-lost"){const s=i;this._pointerCaptures.delete(s.native.pointerId)}this._updateKeyModifiers(e,i);const n=this.test.timestamp!=null?this.test.timestamp:i.native?i.native.timestamp:void 0,r=i.native?i.native.cancelable:void 0;this._emitInputEventFromSource(e,i,n,r)}_updateKeyModifiers(e,i){if(!i)return;let n=!1;const r=()=>{if(!n){const a=new Set;this._activeKeyModifiers.forEach(l=>{a.add(l)}),this._activeKeyModifiers=a,n=!0}},s=(a,l)=>{l&&!this._activeKeyModifiers.has(a)?(r(),this._activeKeyModifiers.add(a)):!l&&this._activeKeyModifiers.has(a)&&(r(),this._activeKeyModifiers.delete(a))};if(e==="key-down"||e==="key-up"){const a=i.key;this._keyModifiers.has(a)&&s(a,e==="key-down")}const o=i.native;s("Alt",!(!o||!o.altKey)),s("Ctrl",!(!o||!o.ctrlKey)),s("Shift",!(!o||!o.shiftKey)),s("Meta",!(!o||!o.metaKey)),s("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerHandler=new eHe((e,i,n)=>this._setLatestPointer(e,i,n)),this._multiTouchHandler=new tHe,this.installHandlers("input-manager-logic",[this._latestPointerHandler,this._multiTouchHandler],ri.ALWAYS),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,ri.INTERNAL)}_setPointerCapture(e,i,n,r){const s=e.name+"-"+i.priorityIndex,o=this._pointerCaptures.get(n.pointerId)||new Set;this._pointerCaptures.set(n.pointerId,o),r?(o.add(s),o.size===1&&this.eventSource&&this.eventSource.setPointerCapture(n,!0)):o.has(s)&&(o.delete(s),o.size===0&&(this._pointerCaptures.delete(n.pointerId),this.eventSource&&this.eventSource.setPointerCapture(n,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,i,n,r){this._emitInputEvent(0,e,i,n,r)}_emitInputEvent(e,i,n,r,s,o){const a=r!==void 0?r:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),l=s!==void 0&&s,u={event:new iHe(i,n,a,o||this._activeKeyModifiers,l),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(u):this._doNewPropagation(u)}_doNewPropagation(e){this._currentPropagation={events:new PM,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){var i,n;const e=Sr(this._currentPropagation);for(;e.events.length>0;){const{event:r,priorityIndex:s}=e.events.pop(),o=r.data&&r.data.eventId;if(!(o!=null&&this._stoppedPropagationEventIds.has(o)))for(e.currentHandler=this._handlersPriority[s];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!r.shouldStopPropagation()&&((n=(i=e.currentHandler).eventCallback)==null||n.call(i,r)),r.shouldStopPropagation()){o!=null&&this._stoppedPropagationEventIds.add(o);break}if(r.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:r,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}_pausePropagation(e){const i=new PM;i.push(e);const n=this._currentPropagation;if(n){for(;n.events.length;)i.push(n.events.pop());n.events=i,n.currentHandler=null}}_compareHandlerPriority(e,i){if(e.handler.hasSideEffects!==i.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==i.groupPriority)return e.groupPriority>i.groupPriority?-1:1;for(const n of e.handler.incomingEventMatches)for(const r of i.handler.incomingEventMatches){if(n.eventType!==r.eventType)continue;const s=n.keyModifiers.filter(o=>r.keyModifiers.includes(o));if(s.length===n.keyModifiers.length!=(s.length===r.keyModifiers.length))return n.keyModifiers.length>r.keyModifiers.length?-1:1}return e.priorityIndex>i.priorityIndex?-1:1}_sortHandlersPriority(e){const i=[];for(const n of e){let r=0;for(;r<i.length&&this._compareHandlerPriority(n,i[r])>=0;)r++;i.splice(r,0,n)}return i}get debug(){const e=i=>{const n=this._setPointerCapture;this._setPointerCapture=()=>{},i(),this._setPointerCapture=n};return{injectEvent:(i,n)=>{e(()=>{this._onEventReceived(i,n)})},disablePointerCapture:e}}};c([d({readOnly:!0})],lu.prototype,"hasPendingInputs",null),c([d({constructOnly:!0})],lu.prototype,"eventSource",void 0),c([d({constructOnly:!0})],lu.prototype,"recognizers",void 0),c([d()],lu.prototype,"_latestPointerType",void 0),c([d()],lu.prototype,"latestPointerType",null),c([d()],lu.prototype,"multiTouchActive",null),c([d({readOnly:!0})],lu.prototype,"latestPointerLocation",void 0),lu=c([O("esri.views.input.InputManager")],lu);let iHe=class{constructor(e,i,n,r,s){this.type=e,this.data=i,this.timestamp=n,this.modifiers=r,this.cancelable=s,this._propagationState=ff.NONE,this._resumeCallback=null}stopPropagation(){this._propagationState|=ff.STOPPED}shouldStopPropagation(){return(this._propagationState&ff.STOPPED)!=0}async(e){this._propagationState|=ff.PAUSED;const i=(n,r)=>{this._propagationState&=~ff.PAUSED;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),r)throw n;return n};return(typeof e=="function"?e():e).then(n=>i(n,!1),n=>i(n,!0))}shouldPausePropagation(e){return!!(this._propagationState&ff.PAUSED)&&(this._resumeCallback=e,!0)}preventDefault(){this.data.native.preventDefault()}};var ff;(function(t){t[t.NONE=0]="NONE",t[t.STOPPED=1]="STOPPED",t[t.PAUSED=2]="PAUSED"})(ff||(ff={}));const ri={ALWAYS:1,DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};let nHe=class{};const rHe=nHe;function gO(t){return t&&typeof t.highlight=="function"}function J_t(t,e,i){return U(t)||t>i&&(e===0||t<e)}const o2=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){const{view:n}=this;return Du(n),this.goToOverride?this.goToOverride(n,i):n.goTo(i.target,i.options)}};return c([d()],e.prototype,"goToOverride",void 0),c([d()],e.prototype,"view",void 0),e=c([O("esri.widgets.support.GoTo")],e),e},ME=we.ofType({key:"type",defaultKeyValue:"button",base:UP,typeMap:{button:Zw,toggle:Oae}}),sHe=()=>[Gy.clone()],oHe=()=>[o_.clone(),a_.clone()];let dt=class extends o2($fe){get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}constructor(e){super(e),this._handles=new wn,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._highlightSelectedFeaturePromise=null,this._highlightActiveFeaturePromise=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new ME,this.activeFeature=null,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new en({symbol:new Lc({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}initialize(){this._handles.add([X(()=>[this.autoOpenEnabled,this.view],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),X(()=>[this.highlightEnabled,this.selectedFeature,this.visible,this.view],()=>this._highlightSelectedFeature()),X(()=>[this.highlightEnabled,this.activeFeature,this.visible,this.view],()=>this._highlightActiveFeature()),X(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.animation)==null?void 0:i.state},e=>this._animationStateChange(e)),X(()=>this.location,e=>this._locationChange(e)),X(()=>this.selectedFeature,e=>this._selectedFeatureChange(e)),X(()=>[this.selectedFeatureIndex,this.featureCount,this.featuresPerPage],()=>this._selectedFeatureIndexChange()),X(()=>[this.featurePage,this.selectedFeatureIndex,this.featureCount,this.featuresPerPage,this.featureViewModels],()=>this._setGraphicOnFeatureViewModels()),X(()=>this.featureViewModels,()=>this._featureViewModelsChange()),this.on("trigger-action",e=>bBe({event:e,view:this.view})),Ys(()=>!this.waitingForResult,()=>this._waitingForResultChange(),Bu),X(()=>{var e,i;return[this.features,(e=this.view)==null?void 0:e.map,(i=this.view)==null?void 0:i.spatialReference]},()=>this._updateFeatureVMs()),X(()=>{var e;return(e=this.view)==null?void 0:e.scale},()=>this._viewScaleChange()),Ys(()=>!this.visible,()=>this.browseClusterEnabled=!1),X(()=>this.browseClusterEnabled,e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new ME;e.removeAll();const{actions:i,defaultActions:n,defaultPopupTemplateEnabled:r,includeDefaultActions:s,selectedFeature:o}=this,a=s?n.concat(i):i,l=o&&(typeof o.getEffectivePopupTemplate=="function"&&o.getEffectivePopupTemplate(r)||o.popupTemplate),u=l&&l.actions,h=l&&l.overwriteActions?u:u?u.concat(a):a;return h&&h.filter(Boolean).forEach(p=>e.add(p)),e}get defaultActions(){const e=this._get("defaultActions")||new ME;return e.removeAll(),e.addMany(yy(this.selectedFeature)?oHe():sHe()),e}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const i=e||[];this._set("features",i);const{pendingPromisesCount:n,promiseCount:r,selectedFeatureIndex:s}=this,o=r&&i.length;o&&n&&s===-1?this.selectedFeatureIndex=0:o&&s!==-1||(this.selectedFeatureIndex=i.length?0:-1)}get location(){return this._get("location")||null}set location(e){var r,s,o;let i=e;const n=(s=(r=this.view)==null?void 0:r.spatialReference)==null?void 0:s.isWebMercator;e&&((o=e==null?void 0:e.spatialReference)!=null&&o.isWGS84)&&n&&(i=Tc(e)),this._set("location",i)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(i=>{this._pendingPromises.add(i);const n=s=>{this._pendingPromises.has(i)&&this._updateFeatures(s),this._updatePendingPromises(i)},r=()=>this._updatePendingPromises(i);i.then(n,r)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:i}=this;return i===-1?null:e[i]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:i}=this;e=isNaN(e)||e<-1||!i?-1:(e+i)%i,this.activeFeature=null,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,i=Mfe(this);return i&&e?this.callGoTo({target:{target:i,scale:e.scale}}):Promise.reject(new N("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:i,view:e}))}zoomTo(e){return this.callGoTo(e)}clear(){this.set({promises:[],features:[],content:null,title:null,location:null,activeFeature:null})}fetchFeatures(e,i){const{view:n}=this;if(!n||!e)throw new N("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:n});return n.fetchPopupFeatures(e,{event:i&&i.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:i&&i.signal})}open(e){const i={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:n}=i;delete i.fetchFeatures,n&&this._setFetchFeaturesPromises(i.location);const r=["actionsMenuOpen","collapsed","featureMenuOpen"];for(const s of r)delete i[s];this.set(i)}triggerAction(e){const i=this.allActions.getItemAt(e);i&&!i.disabled&&this.emit("trigger-action",{action:i})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){CBe(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){const{view:e,selectedFeature:i}=this;(e==null?void 0:e.type)==="2d"?yy(i)?(await SBe(this),await EBe(this)):se.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-selectedFeature: Selected feature must represent an aggregate/cluster graphic.",i):se.getLogger(this.declaredClass).warn("enableClusterBrowsing:invalid-view: View must be 2d MapView.",i)}_animationStateChange(e){this.zoomToLocation||(Gy.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var i;const e=(i=this.view)==null?void 0:i.graphics;e&&(e.remove(this.selectedClusterBoundaryFeature),this._selectedClusterFeature&&e.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){if(yy(this.selectedFeature))return this.browseClusterEnabled=!1,this.visible=!1,void this.clear();this.browseClusterEnabled&&(this.features=this.selectedFeature?[this.selectedFeature]:[])}_locationChange(e){const{selectedFeature:i,updateLocationEnabled:n}=this;n&&e&&(!i||i.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:i,featurePage:n,featuresPerPage:r,featureViewModels:s}=this;if(n===null)return;const o=((n-1)*r+i)%i,a=o+r;s.slice(o,a).forEach((l,u)=>{l&&!l.graphic&&(l.graphic=e[o+u])})}async _selectedFeatureChange(e){const{location:i,updateLocationEnabled:n,view:r}=this;if(e&&r){if(this.browseClusterEnabled)return this._selectedClusterFeature&&(r.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),yy(e)?void 0:(e.symbol=await q7e(e),this._selectedClusterFeature=e,void r.graphics.add(this._selectedClusterFeature));!n&&i||!e.geometry?n&&!e.geometry&&this.centerAtLocation().then(()=>{var o;const s=(o=r.center)==null?void 0:o.clone();s&&(this.location=s)}):this.location=Ofe(e.geometry)}}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(i=>{const{clientOnlyGraphics:n,promisesPerLayerView:r}=i,s=Promise.resolve(n),o=r.map(a=>a.promise);this.promises=[s,...o]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:i,featureViewModels:n}=this;if(yy(e)||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!i||!i.length)return;const r=n.slice(0),s=[];i.forEach((o,a)=>{var u,h;if(!o)return;let l=null;if(r.some((p,f)=>(p&&p.graphic===o&&(l=p,r.splice(f,1)),!!l)),l)s[a]=l;else{const p=new a7({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(u=this.view)==null?void 0:u.spatialReference,graphic:o===e?o:null,map:(h=this.view)==null?void 0:h.map,view:this.view});s[a]=p}}),r.forEach(o=>o&&!o.destroyed&&o.destroy()),this._set("featureViewModels",s)}_getScreenPoint(e){const{view:i}=this;return i&&e&&typeof i.toScreen=="function"?i.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:i,autoOpenEnabled:n}=this;if(i.remove(e),n&&this.view){const r=this.view.on("click",s=>{s.pointerType==="mouse"&&s.button!==0||this._fetchFeaturesAndOpen(s)},ri.WIDGET);i.add(r,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,i){this._cancelFetchingFeatures();const n=new AbortController,{signal:r}=n;this._fetchFeaturesController=n,this.notifyChange("waitingForResult");const s=this.fetchFeatures(e,{signal:r,event:i});return s.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),s}_fetchFeaturesAndOpen(e){const{screenPoint:i,mapPoint:n}=e,{view:r}=this;this._fetchFeaturesWithController(i,e).then(s=>{var h;const{clientOnlyGraphics:o,promisesPerLayerView:a,location:l}=s,u=[Promise.resolve(o),...a.map(p=>p.promise)];return(h=r==null?void 0:r.popup)==null||h.open({location:l||n,promises:u}),s})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}async _getLayerView(e,i){return await e.when(),e.whenLayerView(i)}_getHighlightLayer(e){const{layer:i,sourceLayer:n}=e;return n&&"layer"in n&&n.layer?n.layer:(n==null?void 0:n.type)==="map-notes"||(n==null?void 0:n.type)==="subtype-group"?n:i}_getHighlightTarget(e,i){const n=i.type==="imagery"?void 0:"objectIdField"in i?i.objectIdField||IBe:null,r=e.attributes;return r&&n&&r[n]||e}async _highlightActiveFeature(){const e="highlight-active-feature";this._handles.remove(e);const{highlightEnabled:i,view:n,activeFeature:r,visible:s}=this;if(!(r&&n&&i&&s))return;const o=this._getHighlightLayer(r);if(!(o&&o instanceof qC))return;const a=this._getLayerView(n,o);this._highlightActiveFeaturePromise=a;const l=await a;if(!(l&&gO(l)&&this._highlightActiveFeaturePromise===a&&this.activeFeature&&this.highlightEnabled))return;const u=l.highlight(this._getHighlightTarget(r,o));this._handles.add(u,e)}async _highlightSelectedFeature(){const e="highlight-selected-feature";this._handles.remove(e);const{selectedFeature:i,highlightEnabled:n,view:r,visible:s}=this;if(!(i&&r&&n&&s))return;const o=this._getHighlightLayer(i);if(!(o&&o instanceof qC))return;const a=this._getLayerView(r,o);this._highlightSelectedFeaturePromise=a;const l=await a;if(!(l&&gO(l)&&this._highlightSelectedFeaturePromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u=l.highlight(this._getHighlightTarget(i,o));this._handles.add(u,e)}_updateFeatures(e){const{features:i}=this;if(!e||!e.length)return;if(!i.length)return void(this.features=e);const n=e.filter(r=>!i.includes(r));this.features=i.concat(n)}};c([d()],dt.prototype,"featurePage",void 0),c([d()],dt.prototype,"isLoadingFeature",null),c([d({type:ME})],dt.prototype,"actions",void 0),c([d({readOnly:!0})],dt.prototype,"active",null),c([d()],dt.prototype,"activeFeature",void 0),c([d({readOnly:!0})],dt.prototype,"allActions",null),c([d({type:Boolean})],dt.prototype,"defaultPopupTemplateEnabled",void 0),c([d()],dt.prototype,"autoCloseEnabled",void 0),c([d()],dt.prototype,"autoOpenEnabled",void 0),c([d()],dt.prototype,"browseClusterEnabled",void 0),c([d()],dt.prototype,"content",void 0),c([d({type:ME,readOnly:!0})],dt.prototype,"defaultActions",null),c([d({readOnly:!0})],dt.prototype,"featureCount",null),c([d()],dt.prototype,"features",null),c([d()],dt.prototype,"featuresPerPage",void 0),c([d()],dt.prototype,"featureViewModelAbilities",void 0),c([d({readOnly:!0})],dt.prototype,"featureViewModels",void 0),c([d()],dt.prototype,"highlightEnabled",void 0),c([d()],dt.prototype,"includeDefaultActions",void 0),c([d({type:Ve})],dt.prototype,"location",null),c([d({readOnly:!0})],dt.prototype,"pendingPromisesCount",null),c([d({readOnly:!0})],dt.prototype,"selectedClusterBoundaryFeature",void 0),c([d({readOnly:!0})],dt.prototype,"waitingForResult",null),c([d({readOnly:!0})],dt.prototype,"promiseCount",null),c([d()],dt.prototype,"promises",null),c([d({value:null,readOnly:!0})],dt.prototype,"selectedFeature",null),c([d({value:-1})],dt.prototype,"selectedFeatureIndex",null),c([d({readOnly:!0})],dt.prototype,"selectedFeatureViewModel",null),c([d({readOnly:!0})],dt.prototype,"state",null),c([d()],dt.prototype,"title",void 0),c([d()],dt.prototype,"updateLocationEnabled",void 0),c([d()],dt.prototype,"view",void 0),c([d()],dt.prototype,"visible",void 0),c([d()],dt.prototype,"zoomFactor",void 0),c([d()],dt.prototype,"zoomToLocation",void 0),c([d()],dt.prototype,"centerAtLocation",null),dt=c([O("esri.widgets.Popup.PopupViewModel")],dt);const ome=dt,MK="selected-index",aHe=0,OK="popup-spinner",PK={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},RK="esri-popup";function cd(t,e){return e===void 0?`${RK}__${t}`:`${RK}__${t}-${e}`}const LK={closeButton:!0,featureNavigation:!0};let Le=class extends Ife(qt){constructor(e,i){super(e,i),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new wn,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverNode=null,this._featureMenuViewportNode=null,this._rootFlowItemNode=null,this._featureMenuIntersectionObserverCallback=([n])=>{n!=null&&n.isIntersecting&&this.viewModel.featurePage!=null&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=P_(()=>this._displaySpinner(),aHe),this._exitRelatedRecordsActions=new WeakMap,this._featureSelectionActions=new WeakMap,this._flowItems=new we,this.alignment="auto",this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureMenuOpen=!1,this.headingLevel=2,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.spinnerEnabled=!0,this.viewModel=new ome,this.visibleElements={...LK},this._handleOpenRelatedFeature=n=>{this._openRelatedFeature(n)},this._addSelectedFeatureIndexHandle(),this.addHandles([X(()=>{var n;return(n=this.viewModel)==null?void 0:n.screenLocation},()=>this._positionContainer()),X(()=>{var n;return[(n=this.viewModel)==null?void 0:n.active,this.dockEnabled]},()=>this._toggleScreenLocationEnabled()),X(()=>{var n;return(n=this.viewModel)==null?void 0:n.screenLocation},(n,r)=>{!!n!=!!r&&this.reposition()}),X(()=>{var n,r,s,o,a,l;return[(r=(n=this.viewModel)==null?void 0:n.view)==null?void 0:r.padding,(o=(s=this.viewModel)==null?void 0:s.view)==null?void 0:o.size,(a=this.viewModel)==null?void 0:a.active,(l=this.viewModel)==null?void 0:l.location,this.alignment]},()=>this.reposition()),X(()=>this.spinnerEnabled,n=>this._spinnerEnabledChange(n)),X(()=>{var n,r;return(r=(n=this.viewModel)==null?void 0:n.view)==null?void 0:r.size},(n,r)=>this._updateDockEnabledForViewSize(n,r)),X(()=>{var n;return(n=this.viewModel)==null?void 0:n.view},(n,r)=>this._viewChange(n,r)),X(()=>{var n,r;return(r=(n=this.viewModel)==null?void 0:n.view)==null?void 0:r.ready},(n,r)=>this._viewReadyChange(n??!1,r??!1)),X(()=>{var n,r;return[(n=this.viewModel)==null?void 0:n.waitingForResult,(r=this.viewModel)==null?void 0:r.location]},()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),X(()=>this.selectedFeatureWidget,()=>this._destroyFlowItemWidgets()),X(()=>{var n,r,s,o;return[(r=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:r.title,(o=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:o.state]},()=>this._setTitleFromFeatureWidget()),X(()=>{var n,r,s,o;return[(r=(n=this.selectedFeatureWidget)==null?void 0:n.viewModel)==null?void 0:r.content,(o=(s=this.selectedFeatureWidget)==null?void 0:s.viewModel)==null?void 0:o.state]},()=>this._setContentFromFeatureWidget()),Ys(()=>!this.collapsed,()=>{var n,r;((r=(n=this.viewModel)==null?void 0:n.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),ji(()=>{var n;return(n=this.viewModel)==null?void 0:n.allActions},"change",()=>this._watchActions()),X(()=>{var n;return(n=this.viewModel)==null?void 0:n.allActions},()=>this._watchActions(),ut),X(()=>{var n;return(n=this.viewModel)==null?void 0:n.featureViewModels},()=>this._featureMenuViewportScrollTop()),ji(()=>this._flowItems,"change",()=>{this.notifyChange("_activeFlowItemWidget"),this.scheduleRender()}),X(()=>{var n,r,s,o;return[(r=(n=this._activeFlowItemWidget)==null?void 0:n.viewModel)==null?void 0:r.state,(o=(s=this._activeFlowItemWidget)==null?void 0:s.viewModel)==null?void 0:o.title]},()=>this.scheduleRender())])}loadDependencies(){return Promise.all([q(()=>Promise.resolve().then(()=>Wpt),void 0),q(()=>Promise.resolve().then(()=>Tft),void 0),q(()=>import("./calcite-action-308c3f1d.js"),[]),q(()=>import("./calcite-tooltip-66a0c4d1.js"),[]),q(()=>import("./calcite-icon-ee29cf49.js"),[])])}destroy(){var e,i;this._destroyFlowItemWidgets(),this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(i=this._featureMenuIntersectionObserver)==null||i.disconnect()}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){const{selectedFeatureWidget:e,viewModel:i}=this;if(!e)return!!(i!=null&&i.content);const n=e.viewModel;if(n!=null&&n.waitingForContent||(n==null?void 0:n.state)==="error")return!0;const r=n==null?void 0:n.content;return Array.isArray(r)?!!r.length:!!r}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation!=null}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}get _activeFlowItemWidget(){const{_flowItems:e}=this;return e.getItemAt(e.length-1)||null}get actions(){return this.viewModel.actions}set actions(e){this.viewModel.actions=e}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get autoCloseEnabled(){return this.viewModel.autoCloseEnabled}set autoCloseEnabled(e){this.viewModel.autoCloseEnabled=e}get autoOpenEnabled(){return this.viewModel.autoOpenEnabled}set autoOpenEnabled(e){this.viewModel.autoOpenEnabled=e}get defaultPopupTemplateEnabled(){return this.viewModel.defaultPopupTemplateEnabled}set defaultPopupTemplateEnabled(e){this.viewModel.defaultPopupTemplateEnabled=e}get content(){return this.viewModel.content}set content(e){this.viewModel.content=e}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||PK}set dockOptions(e){var l,u;const i={...PK},n=(u=(l=this.viewModel)==null?void 0:l.view)==null?void 0:u.breakpoints,r={};n&&(r.width=n.xsmall,r.height=n.xsmall);const s={...i,...e},o={...i.breakpoint,...r},{breakpoint:a}=s;typeof a=="object"?s.breakpoint={...o,...a}:a&&(s.breakpoint=o),this._set("dockOptions",s),this._setCurrentDockPosition(),this.reposition()}get featureCount(){return this.viewModel.featureCount}get features(){return this.viewModel.features}set features(e){this.viewModel.features=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get location(){return this.viewModel.location}set location(e){this.viewModel.location=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get promises(){return this.viewModel.promises}set promises(e){this.viewModel.promises=e}get selectedFeature(){return this.viewModel.selectedFeature}get selectedFeatureIndex(){return this.viewModel.selectedFeatureIndex}set selectedFeatureIndex(e){this.viewModel.selectedFeatureIndex=e}get selectedFeatureWidget(){const{_feature:e,visibleElements:i,headingLevel:n,_flowItems:r}=this,{selectedFeatureViewModel:s}=this.viewModel,o={...i,title:!1};return s?(e?(e.viewModel=s,e.visibleElements=o):this._feature=new Tfe({flowItems:r,headingLevel:n+1,viewModel:s,visibleElements:o}),this._feature):null}get title(){return this.viewModel.title}set title(e){this.viewModel.title=e}get updateLocationEnabled(){return this.viewModel.updateLocationEnabled}set updateLocationEnabled(e){this.viewModel.updateLocationEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get visible(){return this.viewModel.visible}set visible(e){this.viewModel.visible=e}castVisibleElements(e){return{...LK,...e}}blur(){const{active:e}=this.viewModel;e||se.getLogger(this.declaredClass).warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){return this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,i){return this.viewModel.fetchFeatures(e,i)}focus(){const{active:e}=this.viewModel;e||se.getLogger(this.declaredClass).warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var s,o;this._handles.remove(MK);const i=!!e&&!!e.featureMenuOpen,n=!!e&&!!e.actionsMenuOpen,r={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:n,featureMenuOpen:i};((o=(s=this.viewModel)==null?void 0:s.view)==null?void 0:o.widthBreakpoint)==="xsmall"&&(r.collapsed=!0),this.set(r),this.viewModel.open(e),this._shouldFocus(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){return this.viewModel.triggerAction(e)}render(){var b,_,w,S;const{actionsMenuOpen:e,dockEnabled:i,featureMenuVisible:n,dividedActions:r,currentAlignment:s,currentDockPosition:o}=this,{active:a}=this.viewModel,{menuActions:l}=r,u=a&&l.length>1&&e,h=a&&i,p=a&&!i,f=(_=(b=this.selectedFeature)==null?void 0:b.layer)==null?void 0:_.title,g=(S=(w=this.selectedFeature)==null?void 0:w.layer)==null?void 0:S.id,v={[ae.alignTopCenter]:s==="top-center",[ae.alignBottomCenter]:s==="bottom-center",[ae.alignTopLeft]:s==="top-left",[ae.alignBottomLeft]:s==="bottom-left",[ae.alignTopRight]:s==="top-right",[ae.alignBottomRight]:s==="bottom-right",[ae.isDocked]:h,[ae.shadow]:p,[ae.isDockedTopLeft]:o==="top-left",[ae.isDockedTopCenter]:o==="top-center",[ae.isDockedTopRight]:o==="top-right",[ae.isDockedBottomLeft]:o==="bottom-left",[ae.isDockedBottomCenter]:o==="bottom-center",[ae.isDockedBottomRight]:o==="bottom-right",[ae.isFeatureMenuOpen]:n,[ae.isActionsMenuOpen]:u};return L("div",{class:this.classes(ae.base,v),role:"presentation","data-layer-title":f,"data-layer-id":g,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},a?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return L("span",{"aria-hidden":"true",class:this.classes(ae.icon,ae.iconLoading,ae.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?L("div",{key:cd("loading-container"),role:"presentation",class:ae.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=$o(this.container),i={[ae.iconRightTriangleArrow]:e,[ae.paginationPreviousIconRTL]:e,[ae.iconLeftTriangleArrow]:!e,[ae.paginationPreviousIconLTR]:!e};return L("span",{"aria-hidden":"true",class:this.classes(ae.icon,i)})}renderPreviousButton(){const{messages:e}=this;return L("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes(ae.button,ae.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=$o(this.container),i={[ae.iconLeftTriangleArrow]:e,[ae.paginationNextIconRTL]:e,[ae.iconRightTriangleArrow]:!e,[ae.paginationNextIconLTR]:!e};return L("span",{"aria-hidden":"true",class:this.classes(ae.icon,i)})}renderNextButton(){const{messages:e}=this;return L("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes(ae.button,ae.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:i,messagesCommon:n}=this,{featureCount:r,selectedFeatureIndex:s}=this.viewModel;return L("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes(ae.button,ae.featureMenuButton),"aria-haspopup":"true","aria-controls":i,"aria-expanded":e.toString(),"aria-label":n.menu,title:n.menu},this._getPageText(r,s))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:[]}renderDockIcon(){const{dockEnabled:e}=this,i=this._wouldDockTo(),n={[ae.iconUndock]:e,[ae.iconDock]:!e,[ae.iconDockToRight]:!e&&(i==="top-right"||i==="bottom-right"),[ae.iconDockToLeft]:!e&&(i==="top-left"||i==="bottom-left"),[ae.iconDockToTop]:!e&&i==="top-center",[ae.iconDockToBottom]:!e&&i==="bottom-center"};return L("span",{"aria-hidden":"true",class:this.classes(n,ae.icon)})}renderDockButton(){var s,o,a;const{dockEnabled:e,messages:i}=this,n=(o=(s=this.viewModel)==null?void 0:s.view)==null?void 0:o.widthBreakpoint,r=e?i.undock:i.dock;return n!=="xsmall"&&((a=this.dockOptions)!=null&&a.buttonEnabled)?L("div",{role:"button","aria-label":r,title:r,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes(ae.button,ae.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:i,collapsible:n,contentCollapsed:r,messagesCommon:s}=this,o={[ae.headerContainerButton]:n},a=L(aR,{level:this.headingLevel,class:ae.headerTitle,innerHTML:e??""}),l=n?L("button",{key:`${e}--collapsible`,id:i,title:r?s.expand:s.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ae.headerContainer,o),"aria-expanded":r?"false":"true",onclick:this._toggleCollapsed,type:"button"},a,L("calcite-icon",{class:ae.collapseIcon,key:"collapse-icon",icon:r?"chevron-down":"chevron-up",scale:"m"})):L("div",{key:e??"title",id:i,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes(ae.headerContainer,o)},a);return e?l:null}renderCloseIcon(){return L("span",{"aria-hidden":"true",class:this.classes(ae.icon,ae.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:i}=this;return e.closeButton?L("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:ae.button,"aria-label":i.close,title:i.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return L("header",{class:ae.header},this.renderTitle(),L("div",{class:ae.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:i,contentCollapsed:n,_flowItems:r}=this,{content:s}=this.viewModel,o=r.toArray(),a={[ae.contentHasFlows]:!!o.length};return i&&!n?L("div",{key:s??"content",enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:this.classes(ae.content,a)},L("calcite-flow",{bind:this},L("calcite-flow-item",{bind:this,"data-node-ref":"_rootFlowItemNode",afterCreate:Ao,key:"root-flow-item",onCalciteFlowItemBack:this._handleBackClick},this.renderContent()),o.map(l=>this.renderFlowItem(l))),o.map(l=>this.renderFlowItemTooltips(l))):null}renderFlowItem(e){const{messages:i}=this,n=QM(),r="graphic"in e&&!e.isTable;return L("calcite-flow-item",{bind:this,class:this.classes({[ae.calciteThemeDark]:!n,[ae.calciteThemeLight]:n}),heading:e.title??"",description:this._getFlowItemDescription(e),onCalciteFlowItemBack:this._handleBackClick,key:`flow-item-${e.viewModel.uid}`},L("calcite-action",{class:ae.actionExit,icon:"move-up",label:i==null?void 0:i.exitRelatedRecords,text:i==null?void 0:i.exitRelatedRecords,slot:"header-actions-start",bind:this,afterCreate:s=>this._storeExitRelatedRecordsAction(e,s),onclick:this._destroyFlowItemWidgets}),r?L("calcite-action",{class:ae.actionSelectFeature,icon:"zoom-to-object",label:i==null?void 0:i.selectFeature,text:i==null?void 0:i.selectFeature,slot:"header-actions-end",bind:this,afterCreate:s=>this._storeFeatureSelectionAction(e,s),onclick:()=>this._handleOpenRelatedFeature(e)}):null,L("div",{class:this.classes(ae.contentFlowItem,{[ae.calciteThemeDark]:n,[ae.calciteThemeLight]:!n})},e.render()))}renderFlowItemTooltips(e){const{messages:i,_exitRelatedRecordsActions:n,_featureSelectionActions:r}=this,s=QM(),o=r.get(e);return[L("calcite-tooltip",{class:this.classes({[ae.calciteThemeDark]:!s,[ae.calciteThemeLight]:s}),key:`exit-related-records-tooltip-${e.viewModel.uid}`,label:i==null?void 0:i.exitRelatedRecords,overlayPositioning:"fixed",referenceElement:n.get(e),placement:"top"},i==null?void 0:i.exitRelatedRecords),o?L("calcite-tooltip",{class:this.classes({[ae.calciteThemeDark]:!s,[ae.calciteThemeLight]:s}),key:`select-related-record-tooltip-${e.viewModel.uid}`,label:i==null?void 0:i.selectFeature,overlayPositioning:"fixed",referenceElement:o,placement:"top"},i==null?void 0:i.selectFeature):null]}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:i,actionsMenuOpen:n,dividedActions:r,messagesCommon:s}=this,o=n?s.close:s.open,{menuActions:a}=r;return a.length?L("div",{key:cd("actions-menu-button"),class:this.classes(ae.button,ae.actionsMenuButton),role:"button",id:i,"aria-haspopup":"true","aria-controls":n?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":o,title:o},L("span",{"aria-hidden":"true",class:ae.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:i,actionsMenuOpen:n,dividedActions:r}=this,{menuActions:s}=r;return s.length&&n?L("ul",{id:e,role:"menu","aria-labelledby":i,key:cd("actions"),class:ae.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},s.toArray().map(o=>this.renderAction({action:o,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return e.length?e.toArray().map(i=>this.renderAction({action:i,type:"inline"})):[]}renderInlineActionsContainer(){const{inlineActions:e,menuActions:i}=this.dividedActions,n=!!e.length,r=!!i.length;return n||r?L("div",{key:"inline-actions-container","data-inline-actions":n.toString(),"data-menu-actions":r.toString(),class:ae.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?L("section",{key:cd("navigation"),class:this.classes(ae.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:i}=this,{inlineActions:n,menuActions:r}=i,s=!!n.length,o=!!r.length,a={[ae.footerHasPagination]:e,[ae.footerHasActions]:s,[ae.footerHasActionsMenu]:o};return e||s?L("div",{key:cd("feature-buttons"),class:this.classes(ae.footer,a)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:i,isLoadingFeature:n}=this.viewModel,r=Vr(e.selectedFeatures,{total:i.length});return L("section",{key:cd("menu"),class:ae.featureMenu},L("strong",{class:ae.featureMenuHeader},r),L("nav",{bind:this,class:ae.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:Ao},this.renderFeatureMenu(),L("div",{class:ae.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),n?L("div",{class:ae.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:L("div",{key:cd("pointer"),class:ae.pointer,role:"presentation"},L("div",{class:this.classes(ae.pointerDirection,ae.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:i,currentDockPosition:n,titleId:r,contentId:s,collapsible:o,hasContent:a,contentCollapsed:l,visibleElements:u}=this,{title:h}=this.viewModel,p=i==="bottom-left"||i==="bottom-center"||i==="bottom-right"||n==="top-left"||n==="top-center"||n==="top-right",f=i==="top-left"||i==="top-center"||i==="top-right"||n==="bottom-left"||n==="bottom-center"||n==="bottom-right",g={[ae.shadow]:e,[ae.isCollapsible]:o,[ae.isCollapsed]:l};return L("div",{class:this.classes(ae.main,ae.widget,g),tabIndex:u.closeButton?void 0:-1,role:"dialog","aria-labelledby":h?r:"","aria-describedby":a&&!l?s:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},p?this.renderFooter():null,p?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),f?this.renderFooter():null,f?this.renderFeatureMenuContainer():null)}renderContent(){var i;const e=(i=this.viewModel)==null?void 0:i.content;return e?typeof e=="string"?L("div",{class:Di.contentNode,key:e,innerHTML:e}):this.renderNodeContent(e):null}renderActionText(e){return L("span",{key:"text",class:ae.actionText},e)}renderActionIcon(e){const i=this._getActionClass(e),n=this._getActionImage(e),r={[ae.iconLoading]:e.active,[ae.rotating]:e.active,[ae.icon]:!!i,[ae.actionImage]:!e.active&&!!n};return i&&(r[i]=!e.active),L("span",{key:"icon","aria-hidden":"true",class:this.classes(ae.icon,r),styles:this._getIconStyles(n)})}renderAction(e){const{action:i,type:n}=e,r=this._getActionTitle(i),s={[ae.action]:i.type!=="toggle",[ae.actionToggle]:i.type==="toggle",[ae.actionToggleOn]:i.type==="toggle"&&i.value,[ae.buttonDisabled]:i.disabled},o=[this.renderActionIcon(i),this.renderActionText(r)],a=n==="menu-item"?L("li",{key:i.uid,role:"menuitem",tabIndex:0,title:r,"aria-label":r,class:this.classes(ae.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":i.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o):L("div",{key:i.uid,role:"button",tabIndex:0,title:r,"aria-label":r,class:this.classes(ae.button,s),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":i.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},o);return i.visible?a:null}renderFeatureMenuItem(e,i){const{messages:n,messagesCommon:r}=this,{selectedFeatureIndex:s,selectedFeatureViewModel:o}=this.viewModel,a=e===o,l={[ae.featureMenuSelected]:a},u=a?L("span",{key:cd(`feature-menu-selected-feature-${s}`),title:n.selectedFeature,"aria-label":n.selectedFeature,class:ae.iconCheckMark}):null,h=L("span",{innerHTML:e.title||r.untitled});return L("li",{role:"menuitem",tabIndex:-1,key:cd(`feature-menu-feature-${s}`),class:this.classes(l,ae.featureMenuItem),bind:this,"data-feature-index":i,onblur:this._removeActiveFeature,onfocus:this._setActiveFeature,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature,onmouseover:this._setActiveFeature,onmouseleave:this._removeActiveFeature},L("span",{class:ae.featureMenuTitle},h,u))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:i}=this.viewModel;return i.length>1?L("ol",{class:ae.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},i.filter(n=>!!n.graphic).map((n,r)=>this.renderFeatureMenuItem(n,r))):null}_storeFeatureSelectionAction(e,i){this._featureSelectionActions.set(e,i),this.scheduleRender()}_storeExitRelatedRecordsAction(e,i){this._exitRelatedRecordsActions.set(e,i),this.scheduleRender()}_getFlowItemDescription(e){return"featureCountDescription"in e?e.featureCountDescription:e.viewModel.description??""}async _openRelatedFeature(e){await e.viewModel.updateGeometry();const i=e.graphic,n=i==null?void 0:i.geometry;if(U(n)||U(i))return;this._destroyFlowItemWidgets(),await this.viewModel.zoomTo({target:n});const r=Ofe(n);this.open({features:[i],location:A(r)?r:void 0})}_destroyFlowItemWidgets(){this._flowItems.removeAll().forEach(e=>{"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e.viewModel=null,e.destroy()})}_handleBackClick(){const e=this._flowItems.pop();e&&(this._exitRelatedRecordsActions.delete(e),this._featureSelectionActions.delete(e),"showAllEnabled"in e.viewModel&&(e.viewModel.showAllEnabled=!1),e&&(e.viewModel=null,e.destroy()))}_getActionTitle(e){const{messages:i,selectedFeature:n,messagesCommon:r}=this,{id:s}=e,o=n==null?void 0:n.attributes,a=e.title??"",l=s==="zoom-to-feature"?Vr(a,{messages:i}):s==="remove-selected-feature"?Vr(a,{messages:r}):s==="zoom-to-clustered-features"||s==="browse-clustered-features"?Vr(a,{messages:i}):e.title;return l&&o?Vr(l,o):l??""}_getActionClass(e){const{selectedFeature:i}=this,n=i==null?void 0:i.attributes,{className:r,image:s}=e,o=s||r?r:ae.iconDefaultAction;return o&&n?Vr(o,n):o??""}_getActionImage(e){const{selectedFeature:i}=this,n=i==null?void 0:i.attributes,{image:r}=e;return r&&n?Vr(r,n):r??""}_createFeatureUpdatedAnimation(){return I3e("enter",ae.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:i}=this;if(typeof e!="number")return null;const n=Math.round(e);return Math.max(i?n-1:n,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const i="actions";this._handles.remove(i),e&&e.forEach(n=>{this._handles.add(X(()=>[n.uid,n.active,n.className,n.disabled,n.id,n.title,n.image,n.visible],()=>this.scheduleRender()),i)})}_divideActions(){const{allActions:e}=this.viewModel,i=e.filter(o=>o.visible),n=this._getInlineActionCount(),r=n===null,s=n===0;return{inlineActions:r?i.slice(0):s?new we:i.slice(0,n),menuActions:r?new we:s?i.slice(0):i.slice(n)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){var n,r;const{selectedFeatureWidget:e,messagesCommon:i}=this;e&&(this.viewModel.title=((n=e.viewModel)==null?void 0:n.state)==="error"?i.errorMessage:((r=e.viewModel)==null?void 0:r.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){To(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){To(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_setActiveFeature(e){const{viewModel:i}=this,n=e.currentTarget["data-feature-index"];i.activeFeature=i.features[n]||null}_removeActiveFeature(){this.viewModel.activeFeature=null}_handleFeatureMenuItemKeyup(e){const i=To(e),{_featureMenuNode:n}=this,r=e.currentTarget["data-feature-index"];if(!n)return;const s=n.querySelectorAll("li"),o=s.length;i!=="ArrowUp"?i!=="ArrowDown"?i!=="Home"?i!=="End"||(e.stopPropagation(),s[s.length-1].focus()):(e.stopPropagation(),s[0].focus()):(e.stopPropagation(),s[(r+1+o)%o].focus()):(e.stopPropagation(),s[(r-1+o)%o].focus())}_handleActionMenuItemKeyup(e){const i=To(e),{_actionsMenuNode:n}=this,r=e.currentTarget.dataset.actionUid,{menuActions:s}=this.dividedActions,o=s.findIndex(u=>u.uid===r);if(!n)return;const a=n.querySelectorAll("li"),l=a.length;i!=="ArrowUp"?i!=="ArrowDown"?i!=="Home"?i!=="End"||(e.stopPropagation(),a[a.length-1].focus()):(e.stopPropagation(),a[0].focus()):(e.stopPropagation(),a[(o+1+l)%l].focus()):(e.stopPropagation(),a[(o-1+l)%l].focus())}_handleMainKeyup(e){const i=To(e);i==="ArrowLeft"&&(e.stopPropagation(),this.previous()),i==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const i=this.get("viewModel.view");this._createSpinner(i)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:i,waitingForResult:n}=this.viewModel;n&&i?e.show({location:i}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}async _shouldFocus(e){e!=null&&e.shouldFocus&&(await jo(()=>{var i;return((i=this.viewModel)==null?void 0:i.active)===!0}),this.focus())}_addSelectedFeatureIndexHandle(){const e=X(()=>{var i;return(i=this.viewModel)==null?void 0:i.selectedFeatureIndex},(i,n)=>this._selectedFeatureIndexUpdated(i,n));this._handles.add(e,MK)}_selectedFeatureIndexUpdated(e,i){const{featureCount:n}=this;n&&e!==i&&e!==-1&&(this._destroyFlowItemWidgets(),this.actionsMenuOpen=!1,this.featureMenuOpen=!1,this._mainContainerNode&&(this._mainContainerNode.scrollTop=0),this._rootFlowItemNode&&this._rootFlowItemNode.scrollContentTo({top:0}))}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,i){return e.x>-1&&e.y>-1&&e.x<=i.width&&e.y<=i.height}_isOutsideView(e){const{popupHeight:i,popupWidth:n,screenLocation:r,side:s,view:o}=e;if(isNaN(n)||isNaN(i)||!o||!r)return!1;const a=o.padding;return s==="right"&&r.x+n/2>o.width-a.right||s==="left"&&r.x-n/2<a.left||s==="top"&&r.y-i<a.top||s==="bottom"&&r.y+i>o.height-a.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:i,_containerNode:n,_mainContainerNode:r,viewModel:s}=this,{screenLocation:o,view:a}=s;if(U(o)||!a||!n)return"top-center";if(!this._isScreenLocationWithinView(o,a))return this._get("currentAlignment")||"top-center";function l($){return parseInt($.replace(/[^-\d\.]/g,""),10)}const u=r?window.getComputedStyle(r,null):null,h=u?l(u.getPropertyValue("max-height")):0,p=u?l(u.getPropertyValue("height")):0,{height:f,width:g}=n.getBoundingClientRect(),v=g+i,b=Math.max(f,h,p)+i,_=this._isOutsideView({popupHeight:b,popupWidth:v,screenLocation:o,side:"right",view:a}),w=this._isOutsideView({popupHeight:b,popupWidth:v,screenLocation:o,side:"left",view:a}),S=this._isOutsideView({popupHeight:b,popupWidth:v,screenLocation:o,side:"top",view:a}),C=this._isOutsideView({popupHeight:b,popupWidth:v,screenLocation:o,side:"bottom",view:a});return w?S?"bottom-right":"top-right":_?S?"bottom-left":"top-left":S?C?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:i}=this;return i||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const i=["left","right"];return $o(this.container)&&i.reverse(),e.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var a;if(e!=="auto")return e;const i=(a=this.viewModel)==null?void 0:a.view,n=$o(this.container)?"top-left":"top-right";if(!i)return n;const r=i.padding||{left:0,right:0,top:0,bottom:0},s=i.width-r.left-r.right,{breakpoints:o}=i;return o&&s<=o.xsmall?"bottom-center":n}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!this._containerNode)return;const{screenLocation:i}=this.viewModel,{width:n}=this._containerNode.getBoundingClientRect(),r=this._calculatePositionStyle(i,n);r&&Object.assign(this._containerNode.style,r)}_calculateFullWidth(e){const{currentAlignment:i,_pointerOffsetInPx:n}=this;return i==="top-left"||i==="bottom-left"||i==="top-right"||i==="bottom-right"?e+n:e}_calculateAlignmentPosition(e,i,n,r){const{currentAlignment:s,_pointerOffsetInPx:o}=this;if(!n)return;const{padding:a}=n,l=r/2,u=n.height-i,h=n.width-e;return s==="bottom-center"?{top:i+o-a.top,left:e-l-a.left}:s==="top-left"?{bottom:u+o-a.bottom,right:h+o-a.right}:s==="bottom-left"?{top:i+o-a.top,right:h+o-a.right}:s==="top-right"?{bottom:u+o-a.bottom,left:e+o-a.left}:s==="bottom-right"?{top:i+o-a.top,left:e+o-a.left}:s==="top-center"?{bottom:u+o-a.bottom,left:e-l-a.left}:void 0}_calculatePositionStyle(e,i){const{dockEnabled:n,view:r}=this;if(!r)return;if(n)return{left:"",top:"",right:"",bottom:""};if(U(e)||!i)return;const s=this._calculateFullWidth(i),o=this._calculateAlignmentPosition(e.x,e.y,r,s);return o?{top:o.top!==void 0?`${o.top}px`:"auto",left:o.left!==void 0?`${o.left}px`:"auto",bottom:o.bottom!==void 0?`${o.bottom}px`:"auto",right:o.right!==void 0?`${o.right}px`:"auto"}:void 0}_viewChange(e,i){e&&i&&(this.close(),this.clear())}_viewReadyChange(e,i){if(e){const n=this.get("viewModel.view");this._wireUpView(n)}else i&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:i}=this;i&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,i,n){const[r,s]=e,[o,a]=i,{width:l=0,height:u=0}=n??{};return r<=l&&o>l||r>l&&o<=l||s<=u&&a>u||s>u&&a<=u}_updateDockEnabledForViewSize(e,i){if(!e||!i)return;const n=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},r=n.left+n.right,s=n.top+n.bottom,o=[],a=[];o[0]=e[0]-r,o[1]=e[1]-s,a[0]=i[0]-r,a[1]=i[1]-s;const{dockOptions:l}=this,u=l.breakpoint;this._dockingThresholdCrossed(o,a,u)&&this._setDockEnabledForViewSize(l),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const i=e.querySelectorAll("li");i.length&&i[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const i=e.querySelectorAll("li");i.length&&i[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:i}=this;if(!i)return;const n=i.active&&!e;i.screenLocationEnabled=n}_shouldDockAtCurrentViewSize(e){var l,u;const i=e.breakpoint,n=(u=(l=this.viewModel)==null?void 0:l.view)==null?void 0:u.ui;if(!n)return!1;const{width:r,height:s}=n;if(isNaN(r)||isNaN(s)||!i)return!1;const o=i.hasOwnProperty("width")&&r<=(i.width??0),a=i.hasOwnProperty("height")&&s<=(i.height??0);return o||a}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,i){return this.featureNavigationVisible?Vr(this.messages.pageText,{index:i+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:i}=this;e&&(i&&i.ui&&i.ui.remove(e,OK),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new yBe({view:e}),e.ui.add(this._spinner,{key:OK,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const i=e.currentTarget.dataset.actionUid,{allActions:n}=this.viewModel,r=n.findIndex(o=>o.uid===i),s=n.getItemAt(r);s&&s.type==="toggle"&&(s.value=!s.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(r)}_selectFeature(e){const i=e.currentTarget["data-feature-index"];isNaN(i)||(this.viewModel.selectedFeatureIndex=i),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};c([d({readOnly:!0})],Le.prototype,"actionsMenuId",null),c([d({readOnly:!0})],Le.prototype,"actionsMenuButtonId",null),c([d({readOnly:!0})],Le.prototype,"featureMenuId",null),c([d({readOnly:!0})],Le.prototype,"titleId",null),c([d({readOnly:!0})],Le.prototype,"contentId",null),c([d({readOnly:!0})],Le.prototype,"hasContent",null),c([d({readOnly:!0})],Le.prototype,"featureNavigationVisible",null),c([d({readOnly:!0})],Le.prototype,"collapsible",null),c([d({readOnly:!0})],Le.prototype,"featureMenuVisible",null),c([d({readOnly:!0})],Le.prototype,"contentCollapsed",null),c([d({readOnly:!0})],Le.prototype,"dividedActions",null),c([d({readOnly:!0,dependsOn:["_flowItems.length"]})],Le.prototype,"_activeFlowItemWidget",null),c([d()],Le.prototype,"actions",null),c([d()],Le.prototype,"actionsMenuOpen",null),c([d()],Le.prototype,"alignment",void 0),c([d()],Le.prototype,"autoCloseEnabled",null),c([d()],Le.prototype,"autoOpenEnabled",null),c([d()],Le.prototype,"defaultPopupTemplateEnabled",null),c([d()],Le.prototype,"content",null),c([d()],Le.prototype,"collapsed",void 0),c([d()],Le.prototype,"collapseEnabled",void 0),c([d({readOnly:!0})],Le.prototype,"currentAlignment",null),c([d({readOnly:!0})],Le.prototype,"currentDockPosition",null),c([d()],Le.prototype,"dockOptions",null),c([d()],Le.prototype,"dockEnabled",void 0),c([d({readOnly:!0})],Le.prototype,"featureCount",null),c([d()],Le.prototype,"featureMenuOpen",void 0),c([d()],Le.prototype,"features",null),c([d()],Le.prototype,"goToOverride",null),c([d()],Le.prototype,"headingLevel",void 0),c([d()],Le.prototype,"highlightEnabled",null),c([d()],Le.prototype,"location",null),c([d()],Le.prototype,"label",null),c([d()],Le.prototype,"maxInlineActions",void 0),c([d(),bt("esri/widgets/Popup/t9n/Popup")],Le.prototype,"messages",void 0),c([d(),bt("esri/t9n/common")],Le.prototype,"messagesCommon",void 0),c([d()],Le.prototype,"promises",null),c([d({readOnly:!0})],Le.prototype,"selectedFeature",null),c([d()],Le.prototype,"selectedFeatureIndex",null),c([d({readOnly:!0})],Le.prototype,"selectedFeatureWidget",null),c([d()],Le.prototype,"spinnerEnabled",void 0),c([d()],Le.prototype,"title",null),c([d()],Le.prototype,"updateLocationEnabled",null),c([d()],Le.prototype,"view",null),c([d({type:ome}),cR(["triggerAction","trigger-action"])],Le.prototype,"viewModel",void 0),c([d()],Le.prototype,"visible",null),c([d()],Le.prototype,"visibleElements",void 0),c([st("visibleElements")],Le.prototype,"castVisibleElements",null),c([Ln()],Le.prototype,"_close",null),c([Ln()],Le.prototype,"_toggleDockEnabled",null),c([Ln()],Le.prototype,"_toggleFeatureMenu",null),c([Ln()],Le.prototype,"_toggleActionsMenu",null),c([Ln()],Le.prototype,"_triggerAction",null),c([Ln()],Le.prototype,"_selectFeature",null),c([Ln()],Le.prototype,"_next",null),c([Ln()],Le.prototype,"_previous",null),Le=c([O("esri.widgets.Popup")],Le);const DK=Le,dF=[0,0];function lHe(t){const e=(t.ownerDocument||window.document).defaultView,i=t.getBoundingClientRect();return dF[0]=i.left+((e==null?void 0:e.pageXOffset)??0),dF[1]=i.top+((e==null?void 0:e.pageYOffset)??0),dF}function FK(t){t&&(Tce(t),t.parentNode&&t.parentNode.removeChild(t))}function cHe(t){const e=document.createElement("div");return t.appendChild(e),e}const hx=16,HT=750,uHe=512,dHe=2,hHe=t=>{let e=class extends t{constructor(...i){var n;super(...i),this._freqInfo={freq:hx,time:HT},this._overlayRenderTaskHandle=null,this.height=0,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,i.length!==0&&((n=i[0])==null?void 0:n.popup)!==void 0||(this.popup=new DK({view:this})),this.handles.add([X(()=>this.cursor,r=>{const{surface:s}=this;s&&s.setAttribute("data-cursor",r)}),X(()=>this.interacting,r=>{const{surface:s}=this;s&&s.setAttribute("data-interacting",r.toString())})])}initialize(){this.handles.add(X(()=>this.ui,(i,n)=>this._handleUIChange(i,n))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=si(this.ui),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(i){const n=this._get("container"),r=eR(i);if(r||typeof i!="string"||se.getLogger(this.declaredClass).error("#container",`element with id '${i}' not found`),n===r)return;const s="dom-size";if(this.handles.remove(s),this._stopMeasuring(),n&&(n.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(FK(this.root),this._set("root",null)),this.userContent&&(bJ(this.userContent,n),FK(this.userContent),this._set("userContent",null))),!r)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);r.classList.add("esri-view");const o=document.createElement("div");o.className="esri-view-user-storage",bJ(r,o),r.appendChild(o),this._set("userContent",o);const a=document.createElement("div");a.className="esri-view-root",r.insertBefore(a,r.firstChild),this._set("root",a);const l=document.createElement("div");l.className="esri-view-surface",l.setAttribute("role","application"),l.tabIndex=0,a.appendChild(l),this._set("surface",l);const u=new $J;a.appendChild(u.surface),this._set("overlay",u),X(()=>u.needsRender,h=>{h&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=iw({render:()=>{var p;return(p=this.overlay)==null?void 0:p.render()}}):this._overlayRenderTaskHandle=bn(this._overlayRenderTaskHandle)}),this.forceDOMReadyCycle(),this.handles.add(X(()=>this.size,h=>{const[p,f]=h,g="esri-view-surface--inset-outline";p>=document.body.clientWidth||f>=document.body.clientHeight?l.classList.add(g):l.classList.remove(g)},ut),s),this._set("container",r),this._startMeasuring()}get focused(){const i=document.activeElement===this.surface;return document.hasFocus()&&i}set popup(i){const n=this._get("popup");n&&n!==i&&n.destroy(),this._set("popup",i)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(i,n,r){const s=this.position;return i-=s?s[0]:0,n-=s?s[1]:0,r?(r[0]=i,r[1]=n):r=[i,n],r}containerToPage(i,n,r){const s=this.position;return i+=s?s[0]:0,n+=s?s[1]:0,r?(r[0]=i,r[1]=n):r=[i,n],r}_handleUIChange(i,n){n&&(this.handles.remove("ui"),n.destroy()),i&&this._wireUI(i),this._set("ui",i)}_wireUI(i){this.handles.remove("ui"),i&&(i.view=this,this.handles.add([X(()=>this.root,n=>{i.container=n?cHe(n):null},ut),X(()=>this.popup,(n,r)=>{const s="popup",o="manual";r&&i.remove(r,s),n&&(n.view=i.view,i.add(n,{key:s,position:o}))},ut)],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const i=this._freqInfo;i.freq=hx,i.time=HT,this.handles.add([(()=>{const n=()=>{i.freq=hx,i.time=HT};return window.addEventListener("resize",n),{remove(){window.removeEventListener("resize",n)}}})(),iw({prepare:n=>{const r=this._measure(),s=this._freqInfo;if(s.time+=n.deltaTime,r&&(s.freq=hx,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||r?hx:Math.min(HT,s.freq*dHe),!r&&s.freq>=uHe&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const i=this.container,n=i?i.clientWidth:0,r=i?i.clientHeight:0;if(n===0||r===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return n===s&&r===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",n),this._set("height",r),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:n,height:r}),!0)}_position(){const i=this.container,n=this.position,r=i&&lHe(i);return!!r&&(!n||r[0]!==n[0]||r[1]!==n[1])&&(this._set("position",[r[0],r[1]]),!0)}forceDOMReadyCycle(){}};return c([d()],e.prototype,"container",null),c([d({readOnly:!0})],e.prototype,"focused",null),c([d({readOnly:!0})],e.prototype,"height",void 0),c([d({type:DK})],e.prototype,"popup",null),c([d({type:$J})],e.prototype,"overlay",void 0),c([d({readOnly:!0})],e.prototype,"position",void 0),c([d({readOnly:!0})],e.prototype,"resizing",void 0),c([d({readOnly:!0})],e.prototype,"root",void 0),c([d({value:null,readOnly:!0})],e.prototype,"size",null),c([d({readOnly:!0})],e.prototype,"surface",void 0),c([d({readOnly:!0})],e.prototype,"suspended",void 0),c([d()],e.prototype,"ui",void 0),c([d({readOnly:!0})],e.prototype,"userContent",void 0),c([d({readOnly:!0})],e.prototype,"width",void 0),c([d()],e.prototype,"widthBreakpoint",void 0),e=c([O("esri.views.DOMContainer")],e),e},pHe=t=>{let e=class extends t{async fetchPopupFeatures(i,n){await this.when();const{location:r,queryArea:s,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(i,n),l=Promise.resolve(a),u=this._queryLayerPopupFeatures(s,o,n),h=u.map(p=>p.promise);return{location:r,clientOnlyGraphics:a,allGraphicsPromise:roe([l,...h]).then(p=>Array.from(new Set(p.flat()))),promisesPerLayerView:u}}_queryLayerPopupFeatures(i,n,r){return n.map(({layerView:s,graphics:o})=>{const a={clientGraphics:o,event:A(r)?r.event:void 0,signal:A(r)?r.signal:void 0,defaultPopupTemplateEnabled:!!A(r)&&!!r.defaultPopupTemplateEnabled},l=s.fetchPopupFeatures(i,a);return{layerView:s,promise:l}})}_isValidPopupGraphic(i,n){return i&&!!i.getEffectivePopupTemplate(A(n)&&n.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(i,n){const{clientGraphics:r,queryArea:s,location:o}=await this._popupHitTestGraphics(i,n),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:u}=this._graphicsPerFetchPopupLayerView(r,a);return{clientOnlyGraphics:u,layerViewsAndGraphics:l,queryArea:s,location:o}}async _popupHitTestGraphics(i,n){const r=await this.popupHitTest(i),s=r.results,o=r.mapPoint,a=s.filter(u=>u.type==="graphic"&&this._isValidPopupGraphic(u.graphic,n)),l=a.length?a[0].mapPoint:null;return{clientGraphics:a.map(u=>u.graphic),queryArea:o,location:o||l}}_getFetchPopupLayerViews(){const i=[];return this.allLayerViews.forEach(n=>{this._isValidPopupLayerView(n)&&i.push(n)}),A(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&i.push(this.graphicsView),i.reverse()}_isValidPopupLayerView(i){return A(i)&&(!("layer"in i)||!i.suspended)&&"fetchPopupFeatures"in i}_graphicsPerFetchPopupLayerView(i,n){const r=[],s=new Map,o=n.map(a=>{const l=[];return"layer"in a?s.set(a.layer,l):s.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of i){const l=s.get(a.layer)||s.get(a.sourceLayer)||null;l?l.push(a):r.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:r}}};return e=c([O("esri.views.PopupView")],e),e};async function f7(t,e){return await t.load(),fHe(t,e)}async function fHe(t,e){const i=[],n=(...s)=>{for(const o of s)U(o)||(Array.isArray(o)?n(...o):we.isCollection(o)?o.forEach(a=>n(a)):_l.isLoadable(o)&&i.push(o))};e(n);let r=null;if(await M5e(i,async s=>{const o=await dR(mHe(s)?s.loadAll():s.load());o.ok!==!1||r||(r=o)}),r)throw r.error;return t}function mHe(t){return"loadAll"in t&&typeof t.loadAll=="function"}async function gHe(t){if(!t)return;const e=t.includes("-vector")?t.slice(0,t.indexOf("-vector")):t,i=await A_("esri/t9n/basemaps");return i[t]||i[e]}const PV={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return pt("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/30d6b8271e1849cd9c3042060001f425/resources/styles/root.json",layerType:"VectorTileLayer",title:"Hybrid Reference Layer",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return pt("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return pt("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return pt("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return pt("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return pt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return pt("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return pt("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return pt("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return pt("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return pt("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return pt("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return pt("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return pt("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return pt("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return pt("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]},"arcgis-human-geography":{title:"Human Geography",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Base",title:"Human Geography Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Detail",title:"Human Geography Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeography:Label",title:"Human Geography Label",isReference:!0}]},"arcgis-human-geography-dark":{title:"Human Geography (Dark)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Base",title:"Human Geography Dark Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Detail",title:"Human Geography Dark Detail",isReference:!0},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:HumanGeographyDark:Label",title:"Human Geography Dark Label",isReference:!0}]}},yHe=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),vHe=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","media","ogc-feature","route","subtype-group","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function bHe(t){return t.layerContainerType==="basemap"?yHe:t.layerContainerType==="operational-layers"?vHe:null}function _He(t,e){if(e.restrictedWebMapWriting){const i=bHe(e);return!A(i)||i.has(t.type)&&!oR(t)}return!0}function wHe(t,e){if(e)if(oR(t)){const i=rh("featureCollection.layers",e),n=i&&i[0]&&i[0].layerDefinition;n&&hF(t,n)}else t.type==="stream"?hF(t,e.layerDefinition=e.layerDefinition||{}):t.type!=="group"&&hF(t,e)}function hF(t,e){"maxScale"in t&&(e.maxScale=pM(t.maxScale)??void 0),"minScale"in t&&(e.minScale=pM(t.minScale)??void 0)}function xHe(t,e){if(wHe(t,e),e&&("blendMode"in t&&(e.blendMode=t.blendMode,e.blendMode==="normal"&&delete e.blendMode),e.opacity=pM(t.opacity)??void 0,e.title=t.title||"Layer",e.visibility=t.visible,"legendEnabled"in t&&t.type!=="wmts"))if(oR(t)){const i=e.featureCollection;i&&(i.showLegend=t.legendEnabled)}else e.showLegend=t.legendEnabled}function RV(t,e,i){if(!("write"in t)||!t.write)return i&&i.messages&&i.messages.push(new N("layer:unsupported",`Layers (${t.title}, ${t.id}) of type '${t.declaredClass}' cannot be persisted`,{layer:t})),null;if(_He(t,i)){const n={};return t.write(n,i)?n:null}return A(e)&&xHe(t,e=G(e)),e}var oA;let SHe=0;const ame="esri.Basemap";let Za=oA=class extends Gw(_l){constructor(t){super(t),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+SHe++,this.baseLayers=new we,this.referenceLayers=new we;const e=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type==="elevation"&&se.getLogger(this.declaredClass).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a basemap layer and will therefore be ignored.`)},i=n=>{n.parent=null};this.baseLayers.on("after-add",n=>e(n.item)),this.referenceLayers.on("after-add",n=>e(n.item)),this.baseLayers.on("after-remove",n=>i(n.item)),this.referenceLayers.on("after-remove",n=>i(n.item))}initialize(){this.when().catch(t=>{se.getLogger(this.declaredClass).error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var i;const t=this.baseLayers.removeAll();for(const n of t)n.destroy();const e=this.referenceLayers.removeAll();for(const n of e)n.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(i=this.portalItem)==null||i.destroy(),this.portalItem=null}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set baseLayers(t){this._set("baseLayers",S0(t,this._get("baseLayers")))}_writeBaseLayers(t,e,i){const n=[];t&&(i={...i,layerContainerType:"basemap"},this.baseLayers.forEach(r=>{const s=RV(r,i.webmap?i.webmap.getLayerJSONFromResourceInfo(r):null,i);A(s)&&n.push(s)}),this.referenceLayers.forEach(r=>{const s=RV(r,i.webmap?i.webmap.getLayerJSONFromResourceInfo(r):null,i);A(s)&&(r.type!=="scene"&&(s.isReference=!0),n.push(s))})),e.baseMapLayers=n}set referenceLayers(t){this._set("referenceLayers",S0(t,this._get("referenceLayers")))}writeTitle(t,e){e.title=t||"Basemap"}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return f7(this,t=>{t(this.baseLayers,this.referenceLayers)})}clone(){const t={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(t.loadStatus="loaded"),new oA({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}write(t,e){return t=t||{},e&&e.origin||(e={origin:"web-map",...e}),super.write(t,e),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(t.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(i=>{const n=G(i);return n.url&&Uu(n.url)&&(n.url=`https:${n.url}`),n.templateUrl&&Uu(n.templateUrl)&&(n.templateUrl=`https:${n.templateUrl}`),n})),t}async _loadFromSource(t){const{resourceInfo:e,portalItem:i}=this;Xi(t);const n=[];if(e){const r=e.context?e.context.url:null;if(n.push(this._loadLayersFromJSON(e.data,r,t)),e.data.id&&!e.data.title){const s=e.data.id;n.push(gHe(s).then(o=>{o&&this.read({title:o},e.context)}))}}else i&&n.push(this._loadFromItem(i,t));await Promise.all(n)}async _loadLayersFromJSON(t,e,i){const n=this.resourceInfo&&this.resourceInfo.context,r=this.portalItem&&this.portalItem.portal||n&&n.portal||null,s=n&&n.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:o}=await q(()=>import("./layersCreator-c0362962.js"),["assets/layersCreator-c0362962.js","assets/lazyLayerLoader-cee9c15c.js","assets/portalLayers-5d2ca38f.js","assets/layersLoader-1fb962fe.js","assets/fetchService-52b55be4.js","assets/jsonContext-c42fadc4.js"]),a=[];if(Xi(i),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){const l={context:{origin:s,url:e,portal:r,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},u=f=>s==="web-scene"&&f.layerType==="ArcGISSceneServiceLayer"||f.isReference,h=o(this.baseLayers,t.baseMapLayers.filter(f=>!u(f)),l);a.push(h);const p=o(this.referenceLayers,t.baseMapLayers.filter(u),l);a.push(p)}await Zi(a)}async _loadFromItem(t,e){const i=await t.load(e),n=await i.fetchData("json",e),r=_i(t.itemUrl??"");return this._set("resourceInfo",{data:n.baseMap??{},context:{origin:t.type==="Web Scene"?"web-scene":"web-map",portal:t.portal||zi.getDefault(),url:r}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:n.spatialReference},this.resourceInfo.context),this.read({title:t.title,thumbnailUrl:t.thumbnailUrl},{origin:"portal-item",portal:t.portal||zi.getDefault(),url:r}),this._loadLayersFromJSON(this.resourceInfo.data,r,e)}static fromId(t){const e=PV[t];if(e){if(e.deprecated){let i=null;t==="dark-gray"?i="dark-gray-vector":t==="gray"?i="gray-vector":t==="streets"?i="streets-vector":t==="topo"&&(i="topo-vector"),R8(se.getLogger(ame),`The ${t} basemap has entered mature support and is no longer being updated.`,{replacement:i,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return oA.fromJSON(e)}return null}};c([d({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(t,e,i,n){this._writeBaseLayers(t,e,n)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:we}},writer(t,e,i,n){this._writeBaseLayers(t,e,n)}}}}}})],Za.prototype,"baseLayers",null),c([d({type:String,json:{origins:{"web-scene":{write:!0}}}})],Za.prototype,"id",void 0),c([d({type:gh})],Za.prototype,"portalItem",void 0),c([d()],Za.prototype,"referenceLayers",null),c([d({readOnly:!0})],Za.prototype,"resourceInfo",void 0),c([d({type:Ge})],Za.prototype,"spatialReference",void 0),c([d()],Za.prototype,"thumbnailUrl",void 0),c([d({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Za.prototype,"title",void 0),c([fe("title")],Za.prototype,"writeTitle",null),Za=oA=c([O(ame)],Za);const yO=Za,EHe=Object.freeze(Object.defineProperty({__proto__:null,default:yO},Symbol.toStringTag,{value:"Module"}));var LV;let aA=LV=class extends Y{constructor(t){super(t),this.type="none"}clone(){return new LV({type:this.type})}};c([Ce({none:"none",stayAbove:"stay-above"})],aA.prototype,"type",void 0),aA=LV=c([O("esri.ground.NavigationConstraint")],aA);let mi=class extends _e{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.TEXT_SHOW_BASELINE=!1,this.TEXT_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_OPTIMIZATIONS=!1,this.TESTS_DISABLE_FAST_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1,this.LINE_WIREFRAMES=!1,this.TERRAIN_USE_LEGACY_SHADING=!1}};c([d()],mi.prototype,"SCENEVIEW_HITTEST_RETURN_INTERSECTOR",void 0),c([d()],mi.prototype,"DECONFLICTOR_SHOW_VISIBLE",void 0),c([d()],mi.prototype,"DECONFLICTOR_SHOW_INVISIBLE",void 0),c([d()],mi.prototype,"DECONFLICTOR_SHOW_GRID",void 0),c([d()],mi.prototype,"LABELS_SHOW_BORDER",void 0),c([d()],mi.prototype,"TEXT_SHOW_BASELINE",void 0),c([d()],mi.prototype,"TEXT_SHOW_BORDER",void 0),c([d()],mi.prototype,"OVERLAY_DRAW_DEBUG_TEXTURE",void 0),c([d()],mi.prototype,"OVERLAY_SHOW_CENTER",void 0),c([d()],mi.prototype,"SHOW_POI",void 0),c([d()],mi.prototype,"TESTS_DISABLE_OPTIMIZATIONS",void 0),c([d()],mi.prototype,"TESTS_DISABLE_FAST_UPDATES",void 0),c([d()],mi.prototype,"DRAW_MESH_GEOMETRY_NORMALS",void 0),c([d()],mi.prototype,"FEATURE_TILE_FETCH_SHOW_TILES",void 0),c([d()],mi.prototype,"FEATURE_TILE_TREE_SHOW_TILES",void 0),c([d()],mi.prototype,"TERRAIN_TILE_TREE_SHOW_TILES",void 0),c([d()],mi.prototype,"I3S_TREE_SHOW_TILES",void 0),c([d()],mi.prototype,"I3S_SHOW_MODIFICATIONS",void 0),c([d()],mi.prototype,"LOD_INSTANCE_RENDERER_DISABLE_UPDATES",void 0),c([d()],mi.prototype,"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL",void 0),c([d()],mi.prototype,"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES",void 0),c([d()],mi.prototype,"LINE_WIREFRAMES",void 0),c([d()],mi.prototype,"TERRAIN_USE_LEGACY_SHADING",void 0),mi=c([O("esri.views.3d.support.DebugFlags")],mi);const CHe=new mi;var DV;let cu=DV=class extends Gw(_l){constructor(t){super(t),this.opacity=1,this.shading=!CHe.TERRAIN_USE_LEGACY_SHADING,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new we;const e=n=>{n.parent&&n.parent!==this&&"remove"in n.parent&&n.parent.remove(n),n.parent=this,n.type!=="elevation"&&n.type!=="base-elevation"&&se.getLogger(this.declaredClass).error(`Layer '${n.title}, id:${n.id}' of type '${n.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},i=n=>{n.parent=null};this.layers.on("after-add",n=>e(n.item)),this.layers.on("after-remove",n=>i(n.item))}initialize(){this.when().catch(t=>{se.getLogger(this.declaredClass).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const t=this.layers.removeAll();for(const e of t)e.destroy();this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t={...t}).resourceInfo),t}set layers(t){this._set("layers",S0(t,this._get("layers")))}writeLayers(t,e,i,n){const r=[];t&&(n={...n,layerContainerType:"ground"},t.forEach(s=>{if("write"in s){const o={};q4e(s)().write(o,n)&&r.push(o)}else n&&n.messages&&n.messages.push(new N("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=r}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return f7(this,t=>{t(this.layers)})}async queryElevation(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await q(()=>import("./ElevationQuery-01cf0110.js"),[]);Xi(e);const n=new i,r=this.layers.filter(NK).toArray();return n.queryAll(r,t,e)}async createElevationSampler(t,e){await this.load({signal:e==null?void 0:e.signal});const{ElevationQuery:i}=await q(()=>import("./ElevationQuery-01cf0110.js"),[]);Xi(e);const n=new i,r=this.layers.filter(NK).toArray();return n.createSamplerAll(r,t,e)}clone(){const t={opacity:this.opacity,surfaceColor:G(this.surfaceColor),navigationConstraint:G(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new DV({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){const e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,i){const n=e&&e.origin||"web-scene",r=e&&e.portal||null,s=e&&e.url||null;return q(()=>import("./layersCreator-c0362962.js"),["assets/layersCreator-c0362962.js","assets/lazyLayerLoader-cee9c15c.js","assets/portalLayers-5d2ca38f.js","assets/layersLoader-1fb962fe.js","assets/fetchService-52b55be4.js","assets/jsonContext-c42fadc4.js"]).then(({populateOperationalLayers:o})=>{Xi(i);const a=[];if(t.layers&&Array.isArray(t.layers)){const l={context:{origin:n,url:s,portal:r,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}return Zi(a)}).then(()=>{})}};function IHe(t){return t&&"createElevationSampler"in t}function NK(t){return t.type==="elevation"||IHe(t)}c([d({json:{read:!1}})],cu.prototype,"layers",null),c([fe("layers")],cu.prototype,"writeLayers",null),c([d({readOnly:!0})],cu.prototype,"resourceInfo",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Bt,read:{reader:$C,source:"transparency"},write:{writer:(t,e)=>{e.transparency=GP(t)},target:"transparency"}}})],cu.prototype,"opacity",void 0),c([d({type:Boolean,nonNullable:!0,json:{read:!1}})],cu.prototype,"shading",void 0),c([d({type:Se,json:{type:[Bt],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],cu.prototype,"surfaceColor",void 0),c([d({type:aA,json:{write:!0}})],cu.prototype,"navigationConstraint",void 0),cu=DV=c([O("esri.Ground")],cu);const vO=cu;function lme(t){var e,i;return!(!(t!=null&&t.loaded)||!((i=(e=Pf(t))==null?void 0:e.operations)!=null&&i.supportsEditing)||"editingEnabled"in t&&!kFe(t))}const zK=se.getLogger("esri.support.basemapUtils");function THe(){return{}}function kHe(t){for(const e in t){const i=t[e];(i==null?void 0:i.destroyed)===!1&&i.destroy(),delete t[e]}}function $He(t,e){let i;if(typeof t=="string"){if(!(t in PV)){const n=Object.entries(PV).filter(([r,s])=>lt.apiKey&&!s.classic||!lt.apiKey&&s.classic&&!s.deprecated).map(([r])=>`"${r}"`).join(", ");return zK.warn(`Unable to find basemap definition for: ${t}. Try one of these: ${n}`),null}e&&(i=e[t]),i||(i=yO.fromId(t),e&&(e[t]=i))}else i=Ht(yO,t);return i!=null&&i.destroyed&&(zK.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function X_t(t,e){return t===e?!0:DHe(VK(t),VK(e),{mustMatchReferences:!0})==="equal"}function AHe(t){return!!(t!=null&&t.baseLayers.concat(t.referenceLayers).some(cme))}function cme(t){var e;if(jK(t.url))return!0;if(t.type==="vector-tile"){for(const i in t.sourceNameToSource)if(jK((e=t.sourceNameToSource[i])==null?void 0:e.sourceUrl))return!0}return!1}function MHe(t,e){var s;if(U(e)||U(t))return{spatialReference:null,updating:!1};if(e.loadStatus==="not-loaded")return e.load(),{spatialReference:null,updating:!0};if(e.spatialReference)return{spatialReference:e.spatialReference,updating:!1};if(e.baseLayers.length===0)return{spatialReference:null,updating:!1};const i=e.baseLayers.getItemAt(0);switch(i.loadStatus){case"not-loaded":i.load();case"loading":return{spatialReference:null,updating:!0};case"failed":return{spatialReference:null,updating:!1}}const n=(("supportedSpatialReferences"in i?i.supportedSpatialReferences:null)||["tileInfo"in i?(s=i.tileInfo)==null?void 0:s.spatialReference:i.spatialReference]).filter(Boolean),r=t.spatialReference;return r?{spatialReference:n.find(o=>r.equals(o))??n[0]??null,updating:!1}:{spatialReference:n[0],updating:!1}}const OHe=/^(basemaps|ibasemaps).*-api\.arcgis\.com$/i;function jK(t){if(!t)return!1;const e=new Hs(_s(t));return!!e.authority&&OHe.test(e.authority)}function VK(t){return t?!t.loaded&&t.resourceInfo?RHe(t.resourceInfo.data):{baseLayers:UK(t.baseLayers),referenceLayers:UK(t.referenceLayers)}:null}function UK(t){return(we.isCollection(t)?t.toArray():t).map(PHe)}function PHe(t){var e,i;return{type:t.type,url:ume("urlTemplate"in t&&t.urlTemplate||t.url||"styleUrl"in t&&t.styleUrl||""),minScale:"minScale"in t&&t.minScale!=null?t.minScale:0,maxScale:"maxScale"in t&&t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visible==null||!!t.visible,sublayers:t.type!=="map-image"&&t.type!=="wms"||!A(t.sublayers)||(e=t.sublayers)==null?void 0:e.map(n=>({id:n.id,visible:n.visible})),activeLayerId:t.type==="wmts"?(i=t.activeLayer)==null?void 0:i.id:void 0}}function RHe(t){return t?{baseLayers:BK((t.baseMapLayers??[]).filter(e=>!e.isReference)),referenceLayers:BK((t.baseMapLayers??[]).filter(e=>e.isReference))}:null}function BK(t){return t.map(e=>LHe(e))}function LHe(t){let e;switch(t.layerType){case"VectorTileLayer":e="vector-tile";break;case"ArcGISTiledMapServiceLayer":e="tile";break;default:e="unknown"}return{type:e,url:ume(t.templateUrl||t.urlTemplate||t.styleUrl||t.url),minScale:t.minScale!=null?t.minScale:0,maxScale:t.maxScale!=null?t.maxScale:0,opacity:t.opacity!=null?t.opacity:1,visible:t.visibility==null||!!t.visibility,sublayers:void 0,activeLayerId:void 0}}function DHe(t,e,i){return t!=null!=(e!=null)?"not-equal":!t||!e?"equal":HK(t.baseLayers,e.baseLayers)?HK(t.referenceLayers,e.referenceLayers)?"equal":i.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal"}function HK(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!FHe(t[i],e[i]))return!1;return!0}function FHe(t,e){if(t.type!==e.type||t.type==="scene"||t.url!==e.url||t.minScale!==e.minScale||t.maxScale!==e.maxScale||t.visible!==e.visible||t.opacity!==e.opacity)return!1;if(A(t.activeLayerId)||A(e.activeLayerId))return t.activeLayerId===e.activeLayerId;if(A(t.sublayers)||A(e.sublayers)){if(U(t.sublayers)||U(e.sublayers)||t.sublayers.length!==e.sublayers.length)return!1;for(let i=0;i<t.sublayers.length;i++){const n=t.sublayers.at(i),r=e.sublayers.at(i);if((n==null?void 0:n.id)!==(r==null?void 0:r.id)||(n==null?void 0:n.visible)!==(r==null?void 0:r.visible))return!1}}return!0}function ume(t){return t?Ca(t).replace(/^\s*https?:/i,"").toLowerCase():""}function NHe(t){return new OC({getCollections:()=>[t.tables,t.layers],getChildrenFunction:e=>{const i=[];return"tables"in e&&i.push(e.tables),"layers"in e&&i.push(e.layers),i},itemFilterFunction:e=>{const i=e.parent;return!!i&&"tables"in i&&i.tables.includes(e)}})}const GK={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function zHe(t){let e=null;if(typeof t=="string")if(t in GK){const i=GK[t];e=new vO({resourceInfo:{data:{layers:[i]}}})}else se.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Ht(vO,t);return e}function FV(t,e,i){let n,r;if(t)for(let s=0,o=t.length;s<o;s++){if(n=t.getItemAt(s),n[e]===i)return n;if((n==null?void 0:n.type)==="group"&&(r=FV(n.layers,e,i),r))return r}}const jHe=t=>{let e=class extends t{constructor(...i){super(...i),this.layers=new we;const n=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},r=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||se.getLogger(this.declaredClass).error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.layers.on("before-add",o=>n(o.item)),this.layers.on("after-add",o=>r(o.item)),this.layers.on("after-remove",o=>s(o.item))}destroy(){const i=this.layers.removeAll();for(const n of i)this.layerRemoved(n),n.destroy();this.layers.destroy()}set layers(i){this._set("layers",S0(i,this._get("layers")))}add(i,n){const r=this.layers;if(n=r.getNextIndex(n),i instanceof qC){const s=i;s.parent===this?this.reorder(s,n):r.add(s,n)}else zh(i)?i.then(s=>{this.destroyed||this.add(s,n)}):se.getLogger(this.declaredClass).error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(i,n){const r=this.layers;let s=r.getNextIndex(n);i.slice().forEach(o=>{o.parent!==this?(r.add(o,s),s+=1):this.reorder(o,s)})}findLayerById(i){return FV(this.layers,"id",i)}findLayerByUid(i){return FV(this.layers,"uid",i)}remove(i){return this.layers.remove(i)}removeMany(i){return this.layers.removeMany(i)}removeAll(){return this.layers.removeAll()}reorder(i,n){return this.layers.reorder(i,n)}layerAdded(i){}layerRemoved(i){}};return c([d()],e.prototype,"layers",null),e=c([O("esri.support.LayersMixin")],e),e};function NV(t,e,i){if(t)for(let n=0,r=t.length;n<r;n++){const s=t.getItemAt(n);if(s[e]===i)return s;if((s==null?void 0:s.type)==="group"){const o=NV(s.tables,e,i);if(o)return o}}}const VHe=t=>{let e=class extends t{constructor(...i){super(...i),this.tables=new we,this.tables.on("after-add",n=>{const r=n.item;r.parent&&r.parent!==this&&"tables"in r.parent&&r.parent.tables.remove(r),r.parent=this,r.type!=="feature"&&se.getLogger(this.declaredClass).error(`Layer 'title:${r.title}, id:${r.id}' of type '${r.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",n=>{n.item.parent=null})}destroy(){const i=this.tables.removeAll();for(const n of i)n.destroy();this.tables.destroy()}set tables(i){this._set("tables",S0(i,this._get("tables")))}findTableById(i){return NV(this.tables,"id",i)}findTableByUid(i){return NV(this.tables,"uid",i)}};return c([d()],e.prototype,"tables",null),e=c([O("esri.support.TablesMixin")],e),e};let uu=class extends VHe(jHe($r.EventedMixin(_e))){constructor(e){super(e),this.allLayers=new OC({getCollections:()=>{var i,n,r;return[(i=this.basemap)==null?void 0:i.baseLayers,(n=this.ground)==null?void 0:n.layers,this.layers,(r=this.basemap)==null?void 0:r.referenceLayers]},getChildrenFunction:i=>"layers"in i?i.layers:null}),this.allTables=NHe(this),this.basemap=null,this.editableLayers=new OC({getCollections:()=>[this.allLayers],itemFilterFunction:lme}),this.ground=new vO,this._basemapCache=THe()}destroy(){var e,i;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(i=this.basemap)==null||i.destroy(),kHe(this._basemapCache),this._basemapCache=null}castBasemap(e){return $He(e,this._basemapCache)}castGround(e){const i=zHe(e);return U(i)?this._get("ground"):i}findLayerById(e){return this.allLayers.find(i=>i.id===e)}findTableById(e){return this.allTables.find(i=>i.id===e)}};c([d({readOnly:!0,dependsOn:[]})],uu.prototype,"allLayers",void 0),c([d({readOnly:!0})],uu.prototype,"allTables",void 0),c([d({type:yO})],uu.prototype,"basemap",void 0),c([st("basemap")],uu.prototype,"castBasemap",null),c([d({readOnly:!0})],uu.prototype,"editableLayers",void 0),c([d({type:vO,nonNullable:!0})],uu.prototype,"ground",void 0),c([st("ground")],uu.prototype,"castGround",null),uu=c([O("esri.Map")],uu);const dme=uu;let OE=class extends La(we){constructor(e){super(e),this.handles.add([this.on("before-add",i=>{U(i.item)&&i.preventDefault()}),this.on("after-add",i=>this._own(i.item)),this.on("after-remove",i=>this._release(i.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(we.ofType(this.itemType.Type))(e):new we(e)}};function zV(t,e){return{type:t,cast:Mle,set(i){const n=S0(i,this._get(e),t);n.owner=this,this._set(e,n)}}}c([d()],OE.prototype,"owner",null),OE=c([O("esri.core.support.OwningCollection")],OE);let bO=class extends OE{constructor(e){super(e),this.handles.add(this.on("before-add",i=>{U(i.item)||i.item.parent===this.owner&&(se.getLogger(this.declaredClass).warn("Analysis inside the collection must be unique. Not adding this element again."),i.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};bO=c([O("esri.support.AnalysesCollection")],bO);let r0=class extends OE{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};c([Z8({Type:en,ensureType:Ht(en)})],r0.prototype,"itemType",void 0),r0=c([O("esri.support.GraphicsCollection")],r0);let Fp=class extends _e{constructor(e){super(e),this.view=null,this.baseLayerViews=new we,this.referenceLayerViews=new we,this._loadingHandle=X(()=>{var i,n;return(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.basemap},i=>{i&&i.load().catch(()=>{})},ut)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){var i,n;if(this.view&&this.view.suspended)return!1;const e=(n=(i=this.view)==null?void 0:i.map)==null?void 0:n.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(r=>r.updating)||this.referenceLayerViews.some(r=>r.updating))}};c([d({constructOnly:!0})],Fp.prototype,"view",void 0),c([d({readOnly:!0})],Fp.prototype,"baseLayerViews",void 0),c([d({readOnly:!0})],Fp.prototype,"referenceLayerViews",void 0),c([d({readOnly:!0})],Fp.prototype,"suspended",null),c([d({type:Boolean,readOnly:!0})],Fp.prototype,"updating",null),Fp=c([O("esri.views.BasemapView")],Fp);function UHe(t){return"tryRecycleWith"in t}let BHe=class{constructor(e,i,n){this.layer=e,this.view=i,this.layerViewImporter=n,this._controller=new AbortController,this._deferred=kh(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Ur(this._controller.signal,()=>{const r=new N("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(r)})}tryRecycle(e){if(!this.done||!this.layerView||!UHe(this.layerView))return null;const i=this.layer.type,n=this._controller.signal;for(let r=0;r<e.length;r++){const s=e[r];if(s.type!==i)continue;const o=this.layerView.tryRecycleWith(s,{signal:n});if(o){e.splice(r,1),this.layer=s;const a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(Xi(this._controller.signal),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((u,h)=>Ur(this._controller.signal,()=>h(li())))]),this.promise}}return null}destroy(){this._controller.abort();const{layerView:e}=this;if(!e)return;const{layer:i,view:n}=this;i.emit("layerview-destroy",{view:n,layerView:e}),n.emit("layerview-destroy",{layer:i,layerView:e}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){var r,s,o;if(this._started)return;this._started=!0;const{_controller:{signal:e},layer:i,view:n}=this;this._map=n.map;try{let a,l;if(await i.load({signal:e}),"prefetchResources"in i&&await((r=i.prefetchResources)==null?void 0:r.call(i,{signal:e})),GHe(i))a=await i.createLayerView(n,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(i))throw new N("layer:view-not-supported","No layerview implementation was found");const p=await this.layerViewImporter.importLayerView(i);Xi(e),a="default"in p?new p.default({layer:i,view:n}):new p({layer:i,view:n})}const u=()=>{l=bn(l),a.destroyed||a.destroy(),a.layer=null,a.parent=null,a.view=null,this.done=!0};l=Ur(e,u),Xi(e);try{await a.when()}catch(p){throw u(),p}if(!((o=(s=this._map)==null?void 0:s.allLayers)==null?void 0:o.includes(i)))return u(),void this._deferred.reject(new N("view:no-layerview-for-layer","The layer has been removed from the map",{layer:i}));this.layerView=a,i.emit("layerview-create",{view:n,layerView:a}),n.emit("layerview-create",{layer:i,layerView:a}),this.done=!0,this._deferred.resolve(a)}catch(a){i.emit("layerview-create-error",{view:n,error:a}),n.emit("layerview-create-error",{layer:i,error:a}),this.done=!0,this._deferred.reject(new N("layerview:create-error","layerview creation failed",{layer:i,error:a}))}}},Ka=class extends _e{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new O_,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var n;const i=(n=this.view.map)==null?void 0:n.allLayers;if(i)for(const r of i)this.layerViewImporter.hasLayerViewModule(r)&&this.layerViewImporter.importLayerView(r)},this._reschedule=()=>(U(this._workPromise)&&(this._workPromise=kh(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Hw(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var l,u,h;const i=this.view.map;if(this._map!==i&&(this.clear(),this._map=i),U(this._workPromise))return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");const n=new Set,r=[],s=this.view.ready,o=p=>{if(!U(p)){for(const f of p)if(f){n.add(f);const g=this._layerLayerViewInfoMap.get(f);g&&s?g.start():g||this._recyclingInfoMap.has(f)||r.push(f),"layers"in f&&f.layers&&o(f.layers)}}};for(const p of this._rootCollectionNames)o(this.get(p));for(const[p,f]of this._layerLayerViewInfoMap)if(!n.has(p)){this._layerLayerViewInfoMap.delete(f.layer);const g=f.tryRecycle(r);g?(this._recyclingInfoMap.set(f.layer,f),g.then(()=>{this._recyclingInfoMap.delete(f.layer),this._layerLayerViewInfoMap.set(f.layer,f),this._reschedule()}).catch(()=>{this._recyclingInfoMap.delete(f.layer),f.destroy(),this._reschedule()})):f.destroy()}for(const[p,f]of this._recyclingInfoMap)n.has(p)||(this._recyclingInfoMap.delete(f.layer),f.destroy());for(const p of r)this._createLayerView(p);this._refreshCollections();const a=[(l=i==null?void 0:i.ground)==null?void 0:l.layers,(u=i==null?void 0:i.basemap)==null?void 0:u.baseLayers,(h=i==null?void 0:i.basemap)==null?void 0:h.referenceLayers,i==null?void 0:i.layers].filter(p=>!!p);n.forEach(p=>"layers"in p&&a.push(p.layers)),this.addHandles(a.map(p=>this._watchUpdatingTracking.addOnCollectionChange(()=>p,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.own([ji(()=>{var e,i;return(i=(e=this.view)==null?void 0:e.map)==null?void 0:i.allLayers},"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),X(()=>{const e=this.view,i=e==null?void 0:e.map;return[i==null?void 0:i.basemap,i==null?void 0:i.ground,i==null?void 0:i.layers,e==null?void 0:e.ready]},()=>this._reschedule(),Io)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null,A(this._workPromise)&&(this._workPromise.reject(li()),this._workPromise=null)}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return A(this._workPromise)||this._watchUpdatingTracking.updating||EI(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const i of this._layerLayerViewInfoMap.values())i.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new N("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,i]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(i),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,i,n){if(!e||!i)return void(i&&i.removeAll());let r=0;for(const s of e){const o=this._layerLayerViewInfoMap.get(s);if(!o||!o.layerView)continue;const a=o.layerView;a.layer=s,a.parent=n,i.getItemAt(r)!==a&&i.splice(r,0,a),s.layers&&this._populateLayerViewsOwners(s.layers,a.layerViews,a),r+=1}r<i.length&&i.splice(r,i.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const i=new BHe(e,this.view,this.layerViewImporter);i.promise.then(()=>this._refreshCollections(),n=>{n&&(Pa(n)||n.name==="cancelled:layerview-create")||se.getLogger(this.declaredClass).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:n}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,i),this.view.ready&&i.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([d()],Ka.prototype,"_workPromise",void 0),c([d({readOnly:!0})],Ka.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],Ka.prototype,"_layersToLayerViews",null),c([d({readOnly:!0})],Ka.prototype,"_rootCollectionNames",null),c([d()],Ka.prototype,"layerViewImporter",void 0),c([d()],Ka.prototype,"supportsGround",void 0),c([d({readOnly:!0})],Ka.prototype,"updating",null),c([d({readOnly:!0})],Ka.prototype,"updatingRemaining",null),c([d({constructOnly:!0})],Ka.prototype,"view",void 0),Ka=c([O("esri.views.LayerViewManager")],Ka);const HHe=Ka;function GHe(t){return"createLayerView"in t&&t.createLayerView!=null}let ia=class extends _e{constructor(e){super(e),this.factor=1.5,this.offset=Nn(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([d({type:Number})],ia.prototype,"factor",void 0),c([d({nonNullable:!0})],ia.prototype,"offset",void 0),c([d()],ia.prototype,"position",void 0),c([d({type:Number,range:{min:0}})],ia.prototype,"size",void 0),c([d()],ia.prototype,"maskUrl",void 0),c([d()],ia.prototype,"maskEnabled",void 0),c([d()],ia.prototype,"overlayUrl",void 0),c([d()],ia.prototype,"overlayEnabled",void 0),c([d({readOnly:!0})],ia.prototype,"version",null),c([d({type:Boolean})],ia.prototype,"visible",void 0),ia=c([O("esri.views.Magnifier")],ia);const hme=ia;let qHe=class{constructor(){this._tasks=new Array,this._running=new mO(!1)}get length(){return this._tasks.length}get running(){return this._running.get()}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,i,n){return this._running.set(!0),new Promise((r,s)=>this._tasks.push(new qK(r,s,e,i,n)))}unshift(e,i,n){return this._running.set(!0),new Promise((r,s)=>this._tasks.unshift(new qK(r,s,e,i,n)))}_process(e){var n;if(this._tasks.length===0)return!1;const i=this._tasks.shift();try{const r=$a(i.signal);if(r&&!i.abortCallback)i.reject(li());else{const s=r?(n=i.abortCallback)==null?void 0:n.call(i,li()):i.callback(e);zh(s)?s.then(i.resolve,i.reject):i.resolve(s)}}catch(r){i.reject(r)}return this._running.set(this._tasks.length>0),!0}cancelAll(){const e=li();for(const i of this._tasks)if(i.abortCallback){const n=i.abortCallback(e);i.resolve(n)}else i.reject(e);this._tasks.length=0,this._running.set(!1)}},qK=class{constructor(e,i,n,r,s){this.resolve=e,this.reject=i,this.callback=n,this.signal=r,this.abortCallback=s}},DS=class extends _e{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};c([d()],DS.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),c([d()],DS.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),DS=c([O("esri.views.support.DebugFlags")],DS);const WHe=new DS;var ca;(function(t){t[t.ANIMATING=0]="ANIMATING",t[t.INTERACTING=1]="INTERACTING",t[t.IDLE=2]="IDLE"})(ca||(ca={}));var jV,ct;(function(t){t[t.YIELD=1]="YIELD"})(jV||(jV={})),function(t){t.RESOURCE_CONTROLLER_IMMEDIATE="immediate",t.RESOURCE_CONTROLLER="schedule",t.SLIDE="slide",t.STREAM_DATA_LOADER="stream loader",t.ELEVATION_QUERY="elevation query",t.TERRAIN_SURFACE="terrain",t.SURFACE_GEOMETRY_UPDATES="surface geometry updates",t.LOD_RENDERER="LoD renderer",t.GRAPHICS_CORE="Graphics3D",t.I3S_CONTROLLER="I3S",t.POINT_CLOUD_LAYER="point cloud",t.FEATURE_TILE_FETCHER="feature fetcher",t.OVERLAY="overlay",t.STAGE="stage",t.GRAPHICS_DECONFLICTOR="graphics deconflictor",t.FILTER_VISIBILITY="Graphics3D filter visibility",t.SCALE_VISIBILITY="Graphics3D scale visibility",t.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",t.POINT_OF_INTEREST_FREQUENT="POI frequent",t.POINT_OF_INTEREST_INFREQUENT="POI infrequent",t.LABELER="labeler",t.FEATURE_QUERY_ENGINE="feature query",t.FEATURE_TILE_TREE="feature tile tree",t.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",t.ELEVATION_ALIGNMENT="elevation alignment",t.TEXT_TEXTURE_ATLAS="text texture atlas",t.TEXTURE_UNLOAD="texture unload",t.LINE_OF_SIGHT_TOOL="line of sight tool",t.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",t.ELEVATION_PROFILE="elevation profile",t.SNAPPING="snapping",t.SHADOW_ACCUMULATOR="shadow accumulator",t.CLOUDS_GENERATOR="clouds generator",t[t.TEST_PRIO=1]="TEST_PRIO"}(ct||(ct={}));const Cu=0,WK=new Map([[ct.RESOURCE_CONTROLLER_IMMEDIATE,Cu],[ct.RESOURCE_CONTROLLER,4],[ct.SLIDE,Cu],[ct.STREAM_DATA_LOADER,Cu],[ct.ELEVATION_QUERY,Cu],[ct.TERRAIN_SURFACE,1],[ct.SURFACE_GEOMETRY_UPDATES,1],[ct.LOD_RENDERER,2],[ct.GRAPHICS_CORE,2],[ct.I3S_CONTROLLER,2],[ct.POINT_CLOUD_LAYER,2],[ct.FEATURE_TILE_FETCHER,2],[ct.OVERLAY,4],[ct.STAGE,4],[ct.GRAPHICS_DECONFLICTOR,4],[ct.FILTER_VISIBILITY,4],[ct.SCALE_VISIBILITY,4],[ct.FRUSTUM_VISIBILITY,4],[ct.CLOUDS_GENERATOR,4],[ct.POINT_OF_INTEREST_FREQUENT,6],[ct.POINT_OF_INTEREST_INFREQUENT,30],[ct.LABELER,8],[ct.FEATURE_QUERY_ENGINE,8],[ct.FEATURE_TILE_TREE,16],[ct.FEATURE_TILE_TREE_ACTIVE,Cu],[ct.ELEVATION_ALIGNMENT,12],[ct.TEXT_TEXTURE_ATLAS,12],[ct.TEXTURE_UNLOAD,12],[ct.LINE_OF_SIGHT_TOOL,16],[ct.LINE_OF_SIGHT_TOOL_INTERACTIVE,Cu],[ct.SNAPPING,Cu],[ct.SHADOW_ACCUMULATOR,30]]);function JK(t){return WK.has(t)?WK.get(t):typeof t=="number"?t:1}const YK=6.5,ZK=1,JHe=30,KK=1e3/30,XK=100,QK=.9;var VV,Km;(function(t){class e{get updating(){return this._updating.get()}_updatingChanged(){this._updating.set(this._tasks.some(s=>s.needsUpdate))}constructor(){this._updating=new mO(!0),this._microTaskQueued=!1,this._frameNumber=0,this.performanceInfo={total:new pE("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=new n,this._state=ca.INTERACTING,this._tasks=new Xy,this._runQueue=new Xy,this._load=0,this._idleStateCallbacks=new Xy,this._idleUpdatesStartFired=!1,this._forceTask=!1,this._debug=!1,this._debugHandle=X(()=>WHe.SCHEDULER_LOG_SLOW_TASKS,o=>this._debug=o,ut);for(const o of Object.keys(ct))this.performanceInfo.tasks.set(ct[o],new pE(ct[o]));const s=this;this._test={FRAME_SAFETY_BUDGET:YK,INTERACTING_BUDGET:KK,IDLE_BUDGET:XK,get availableBudget(){return s._budget.budget},usedBudget:0,getBudget:()=>s._budget,setBudget:o=>s._budget=o,updateTask:o=>this._updateTask(o),getState:o=>this._getState(o),getRuntime:o=>this._getRuntime(o),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._tasks.toArray().forEach(s=>s.remove()),this._tasks.clear(),bn(this._debugHandle),this._microTaskQueued=!1,this._updatingChanged()}taskRunningChanged(s){this._updatingChanged(),s&&this._budget.remaining>0&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.remaining>0&&this._schedule()&&this.frame())}))}registerTask(s,o){const a=JK(s),l=new i(this,s,o,a);return this._tasks.push(l),this._updatingChanged(),this.performanceInfo.tasks.has(s)||this.performanceInfo.tasks.set(s,new pE(s)),l}registerIdleStateCallbacks(s,o){const a={idleBegin:s,idleEnd:o};this._idleStateCallbacks.push(a),this.state===ca.IDLE&&this._idleUpdatesStartFired&&a.idleBegin();const l=this;return{remove:()=>this._removeIdleStateCallbacks(a),set idleBegin(u){l._idleUpdatesStartFired&&(a.idleEnd(),l._state===ca.IDLE&&u()),a.idleBegin=u},set idleEnd(u){a.idleEnd=u}}}get load(){return this._load}set state(s){this._state!==s&&(this._state=s,this.state!==ca.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(o=>o.idleEnd())))}get state(){return this._state}updateBudget(s){this._test.usedBudget=0,++this._frameNumber;let o=YK,a=s.frameDuration,l=ZK;switch(this.state){case ca.IDLE:o=0,a=Math.max(XK,s.frameDuration),l=JHe;break;case ca.INTERACTING:a=Math.max(KK,s.frameDuration);case ca.ANIMATING:}return a=a-s.elapsedFrameTime-o,this.state!==ca.IDLE&&a<ZK&&!this._forceTask?(this._forceTask=!0,!1):(a=Math.max(a,l),this._budget.reset(a,this.state),this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case ca.IDLE:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(s=>s.idleBegin())),this._runIdle();break;case ca.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(s){this._idleUpdatesStartFired&&s.idleEnd(),this._idleStateCallbacks.removeUnordered(s)}removeTask(s){this._tasks.removeUnordered(s),this._runQueue.removeUnordered(s),this._updatingChanged()}_updateTask(s){this._tasks.forAll(o=>{o.name===s&&o.setPriority(s)})}_getState(s){if(this._runQueue.some(a=>a.name===s))return Km.SCHEDULED;let o=Km.IDLE;return this._tasks.forAll(a=>{a.name===s&&a.needsUpdate&&(a.schedulePriority<=1?o=Km.READY:o!==Km.READY&&(o=Km.WAITING))}),o}_getRuntime(s){let o=0;return this._tasks.forAll(a=>{a.name===s&&(o+=a.runtime)}),o}_resetRuntimes(){this._tasks.forAll(s=>s.runtime=0)}_getRunning(){const s=new Map;if(this._tasks.forAll(a=>{a.needsUpdate&&s.set(a.name,(s.get(a.name)||0)+1)}),s.size===0)return null;let o="";return s.forEach((a,l)=>{o+=a>1?` ${a}x ${l}`:` ${l}`}),o}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const s=this._tasks.reduce((o,a)=>a.needsUpdate?++o:o,0);this._load=this._load*QK+s*(1-QK)}_schedule(){for(this._runQueue.filterInPlace(s=>!!s.needsUpdate||(s.schedulePriority=s.basePriority,!1)),this._tasks.forAll(s=>{s.basePriority===Cu&&s.needsUpdate&&!this._runQueue.includes(s)&&s.blockFrame!==this._frameNumber&&this._runQueue.unshift(s)});this._runQueue.length===0;){let s=!1,o=0;if(this._tasks.forAll(a=>{a.needsUpdate&&a.schedulePriority!==0&&a.basePriority!==Cu&&a.blockFrame!==this._frameNumber&&(s=!0,o=Math.max(o,a.basePriority),a.schedulePriority===1?(a.schedulePriority=0,this._runQueue.push(a)):--a.schedulePriority)}),!s)return this._updatingChanged(),!1}return this._updatingChanged(),!0}_run(){const s=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const o=this._budget.now(),a=this._runQueue.pop();this._budget.resetProgress();try{a.task.runTask(this._budget)===jV.YIELD&&(a.blockFrame=this._frameNumber)}catch(u){se.getLogger("esri.views.support.Scheduler").error(`Exception in task "${a.name}"`,u)}!this._budget.hasProgressed&&a.blockFrame!==this._frameNumber&&a.needsUpdate&&(a.name,ct.I3S_CONTROLLER,a.blockFrame=this._frameNumber),a.schedulePriority=a.basePriority;const l=this._budget.now()-o;if(a.runtime+=l,this._frameTaskTimes.set(a.priority,this._frameTaskTimes.get(a.priority)+l),this._debug&&l>2*this._budget.budget&&console.log("Task",a.name,"used",l,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return this._updatingChanged(),void this._recordFrameTaskTimes(this._budget.now()-s)}while(this._schedule());this._updatingChanged(),this._recordFrameTaskTimes(this._budget.now()-s)}_startFrameTaskTimes(){for(const s of Object.keys(ct))this._frameTaskTimes.set(ct[s],0)}_recordFrameTaskTimes(s){this._frameTaskTimes.forEach((o,a)=>this.performanceInfo.tasks.get(a).record(o)),this.performanceInfo.total.record(s)}get test(){return this._test}}t.Scheduler=e;class i{get task(){return this._task.get()}get updating(){return this._queue.running}constructor(s,o,a,l){this._scheduler=s,this.name=o,this._basePriority=l,this.blockFrame=0,this.runtime=0,this._queue=new qHe,this._handles=new wn,this.schedulePriority=this._basePriority,this._task=new mO(A(a)?a:this._queue),this._handles.add(Ys(()=>this.task.running,u=>s.taskRunningChanged(u)))}remove(){this.processQueue(pme),this._scheduler.removeTask(this),this.schedule=UV.schedule,this.reschedule=UV.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(s){this.name=s;const o=JK(s);this._basePriority!==Cu&&this.schedulePriority===0||(this.schedulePriority=o),this._basePriority=o}get priority(){return this.name}set priority(s){this.setPriority(s)}get needsUpdate(){return this.updating||this.task.running}schedule(s,o,a){return this._queue.push(s,o,a)}reschedule(s,o,a){return this._queue.unshift(s,o,a)}processQueue(s){this._queue.runTask(s)}}class n{constructor(){this._begin=typeof performance<"u"?performance.now():0,this._budget=0,this._state=ca.IDLE,this._done=!1,this._progressed=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&this.madeProgress(),!0)}get done(){return this._done}get budget(){return this._budget}madeProgress(){return this._progressed=!0,this._done=this.elapsed>=this._budget&&this._enabled,this._done}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,0)}now(){return performance.now()}get elapsed(){return performance.now()-this._begin}resetProgress(){this._progressed=!1,this._done=!1}get hasProgressed(){return this._progressed}}t.Budget=n})(VV||(VV={})),function(t){t.SCHEDULED="s",t.READY="r",t.WAITING="w",t.IDLE="i"}(Km||(Km={}));const pme=(()=>{const t=new VV.Budget;return t.enabled=!1,t})();let YHe=class{remove(){}processQueue(){}schedule(e,i,n){try{if($a(i)){const r=li();return n?Promise.resolve(n(r)):Promise.reject(r)}return VN(e(pme))}catch(r){return Promise.reject(r)}}reschedule(e,i,n){return this.schedule(e,i,n)}};const UV=new YHe;let FS=class extends _e{constructor(e,i){super({}),this._stage=e,this._textureRequests=new Map,this._frameTask=(i==null?void 0:i.registerTask(ct.TEXTURE_UNLOAD))??UV}normalizeCtorArgs(){return{}}destroy(){super.destroy(),this._frameTask.remove(),this._textureRequests.forEach(e=>this._releaseTextureRequest(e)),this._textureRequests.clear()}get updating(){return this._frameTask.updating}fromData(e,i,n){const r=this.makeUid(e);let s=this._textureRequests.get(r);if(!s){const o=i();s={referenceCount:0,texture:o,textureAsync:null,abortController:null,onRemove:n},this._stage&&(this._stage.add(o),this._stage.loadImmediate(o)),this._textureRequests.set(r,s)}return s.referenceCount++,{uid:r,texture:s.texture,release:()=>this._release(r)}}_release(e){const i=this._textureRequests.get(e);i?(i.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+e),i.referenceCount--,i.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(e))):console.warn(`TextureCollection: texture doesn't exist: '${e}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(e){if(!this._textureRequests)return;const i=this._textureRequests.get(e);!i||i.referenceCount>0||(this._releaseTextureRequest(i),this._textureRequests.delete(e))}_releaseTextureRequest(e){var i;e.onRemove&&e.onRemove(),e.texture?(i=this._stage)==null||i.remove(e.texture):e.abortController&&(e.abortController.abort(),e.abortController=null)}makeUid(e,i=null){return A(i)?`${e}.${i}px`:e}};c([d()],FS.prototype,"_frameTask",void 0),c([d()],FS.prototype,"updating",null),FS=c([O("esri.views.3d.support.TextureCollection")],FS);var eX;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(eX||(eX={}));const fme=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],mme={};function gme(t){return!!mme[t]}function ZHe(t){for(const e of t)if(!gme(e))return!1;return!0}fme.forEach(t=>{mme[t]=!0});let KHe=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:i,priority:n},r)=>{var s;return(s=this.inputManager)==null?void 0:s.installHandlers(r,[i],n)})}disconnect(){this.inputManager&&this._handlers.forEach((e,i)=>{var n;return(n=this.inputManager)==null?void 0:n.uninstallHandlers(i)}),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,i,n,r){const s=Array.isArray(e)?e:e.split(",");if(!ZHe(s))return s.some(gme)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(i)?a=i:(o=i,a=[]),typeof n=="function"?o=n:r=n,r=r??ri.DEFAULT;const l=this._createUniqueGroupName(),u=new XHe(this.view,s,a,o);this._handlers.set(l,{handler:u,priority:r});for(const h of s){const p=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,p+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],r),{remove:()=>this._removeHandler(l,s)}}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,i){if(this._handlers.has(e)){this._handlers.delete(e);for(const n of i){const r=this._handlerCounts.get(n);r===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",n):r===1?this._handlerCounts.delete(n):this._handlerCounts.set(n,r-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},XHe=class extends ar{constructor(e,i,n,r){super(!0),this._latestDragStart=void 0,this.view=e;for(const s of i)switch(s){case"click":this.registerIncoming("click",n,o=>r(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",n,o=>r(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",n,o=>r(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",n,o=>r(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",n,o=>r(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",n,o=>{const a=this._wrapDrag(o);a&&r(a)});break;case"key-down":this.registerIncoming("key-down",n,o=>r(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",n,o=>r(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",n,o=>r(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",n,o=>r(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",n,o=>r(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",n,o=>r(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",n,o=>r(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",n,o=>r(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",n,o=>r(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",n,o=>{r(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",n,o=>{r(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",n,o=>{r(this._wrapBlur(o))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:i=>e.async(i),preventDefault:()=>e.preventDefault()}}_wrapClick(e){const{pointerType:i,button:n,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:h}=e;return{type:"click",pointerType:i,button:n,buttons:r,x:s,y:o,native:a,timestamp:h,screenPoint:Nn(s,o),mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){const{pointerType:i,button:n,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:u,timestamp:h}=e;return{type:"double-click",pointerType:i,button:n,buttons:r,x:s,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){const{pointerType:i,button:n,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-click",pointerId:u,pointerType:i,button:n,buttons:r,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){const{pointerType:i,button:n,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,u=a.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-double-click",pointerId:u,pointerType:i,button:n,buttons:r,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapHold(e){const{pointerType:i,button:n,buttons:r,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:u}=e;return{type:"hold",pointerType:i,button:n,buttons:r,x:s,y:o,native:a,timestamp:u,mapPoint:this._getMapPoint(s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,i){return this.view.toMap(Nn(e,i),{exclude:[]})}_wrapDrag(e){const i=e.data,{x:n,y:r}=i.center,{action:s,pointerType:o,button:a}=i;if(s==="start"&&(this._latestDragStart=i),!this._latestDragStart)return;const l=i.pointer.native,u=i.buttons,{cancelable:h,timestamp:p}=e,f={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:n,y:r,origin:f,pointerType:o,button:a,buttons:u,radius:i.radius,angle:tle(i.angle),native:l,timestamp:p,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){const{key:i,repeat:n,native:r}=e.data,{cancelable:s,timestamp:o}=e;return{type:"key-down",key:i,repeat:n,native:r,timestamp:o,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:a=>e.async(a),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){const{key:i,native:n}=e.data,{cancelable:r,timestamp:s}=e;return{type:"key-up",key:i,native:n,timestamp:s,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,i){const{x:n,y:r,button:s,buttons:o,native:a,eventId:l}=e.data,u=a.pointerId,h=a.pointerType,{cancelable:p,timestamp:f}=e;return{type:i,x:n,y:r,pointerId:u,pointerType:h,button:s,buttons:o,native:a,timestamp:f,eventId:l,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:g=>e.async(g),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){const{x:i,y:n,buttons:r,native:s,eventId:o}=e.data.currentEvent,{button:a}=e.data.startEvent,l=e.data.startEvent.native.pointerId,u=e.data.startEvent.native.pointerType,h=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:f,timestamp:g}=e;return{type:"pointer-drag",x:i,y:n,pointerId:l,pointerType:u,button:a,buttons:r,action:h,origin:p,native:s,timestamp:g,eventId:o,cancelable:f,stopPropagation:()=>e.stopPropagation(),async:v=>e.async(v),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){const{cancelable:i,data:n,timestamp:r}=e,{x:s,y:o,deltaY:a,native:l}=n;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:l,timestamp:r,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){const{action:i,state:n,device:r}=e.data,{cancelable:s,timestamp:o}=e,{buttons:a,axes:l}=n;return{type:"gamepad",device:r,timestamp:o,action:i,buttons:a,axes:l,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:u=>e.async(u),preventDefault:()=>e.preventDefault()}}};var JC,tX,iX;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(JC||(JC={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(tX||(tX={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(iX||(iX={}));function QHe(t){return[t.on("before-add",e=>{const i=e.item;if(i==null||t.includes(i))return se.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();i.onAdd()}),t.on("after-remove",e=>{const i=e.item;i.active&&(i.view.activeTool=null),i.destroy()})]}function BV(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(JC.USER)&&t.getEditableFlag(JC.MANAGER)}function el(t){return Nn(t.x,t.y)}function yme(t,e){var n;const i=(n=t instanceof HTMLElement?t:t.surface)==null?void 0:n.getBoundingClientRect();return i?Nn(e.clientX-i.left,e.clientY-i.top):Nn(0,0)}function nX(t,e){return e instanceof Event?yme(t,e):el(e)}function rX(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}let eGe=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(e,i){const n=()=>e.stopPropagation();switch(e.type){case"pointer-move":sX(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(n(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!oX(e))break;const r=el(e),s=this._intersect(r,e.pointerType,i.forEachTool);if(U(s))break;const o=s.manipulator,a=s.tool;!(A(o)&&A(a)&&o.interactive)||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._ungrabManipulatorBeforeDragging(o,e,i),A(o)&&A(a)&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:r,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&U(i.activeTool)&&(this._revertToNullActiveTool=!0,i.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:r}),n());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,i);break;case"pointer-drag":{if(!oX(e))break;const r=this._grabbedManipulators.get(e.pointerId),s=kf(r,({manipulator:h})=>h),o=kf(r,({tool:h})=>h);if(U(s)||U(o))break;const a=el(e);a.x=zo(a.x,0,i.view.width),a.y=zo(a.y,0,i.view.height);const l=r.start,u=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,u?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,u&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,i)}n();break}case"immediate-click":{const r=el(e),s=this._intersect(r,e.pointerType,i.forEachTool);if(tGe(e)||i.forEachTool(u=>{if((!A(s)||s.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let h=!1;u.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,h=!0)}),h&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),U(s))break;const{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());const l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:n});break}case"click":{const r=el(e),s=this._intersect(r,e.pointerType,i.forEachTool),o=A(s)?s.manipulator:null;if(U(o)||!o.interactive)break;const a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:a}),n();break}case"double-click":{const r=el(e),s=this._intersect(r,e.pointerType,i.forEachTool),o=A(s)?s.manipulator:null;if(U(o)||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:n});break}case"immediate-double-click":{const r=el(e),s=this._intersect(r,e.pointerType,i.forEachTool),o=A(s)?s.manipulator:null;if(U(o)||!o.interactive)break;const a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:n});break}}this._onFocusChange(i.forEachTool)}_ungrabManipulatorBeforeDragging(e,i,n){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:el(i)}),this._grabbedManipulators.forEach(({manipulator:r},s)=>{r===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorUngrab(n.setActiveTool)}_handlePointerEnd(e,i){const n=kf(this._grabbedManipulators.get(e.pointerId),({manipulator:r})=>r);U(n)||n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:el(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorUngrab(i.setActiveTool))}_cursorFromMap(e){let i=null;return EI(e,({manipulator:n})=>!(U(n)||!n.interactive)&&(n.grabbing&&n.grabCursor?(i=n.grabCursor,!0):!!n.cursor&&(i=n.cursor,!0))),i}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){const i=new Set,n=new Set;this._grabbedManipulators.forEach(({tool:r})=>{i.add(r)}),this._hoveredManipulators.forEach(({tool:r})=>{n.add(r)}),e(r=>{r.hasGrabbedManipulators=i.has(r),r.hasHoveredManipulators=n.has(r);const s=this._grabbedManipulators.values(),o=k2e(s,({tool:a})=>a===r);r.firstGrabbedManipulator=A(o)?o.manipulator:null})}clearPointers(e,{forEachTool:i,setActiveTool:n},r=!0,s){const o=(a,l)=>a===e&&(U(s)||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:u},h)=>{o(a,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._draggedManipulators.delete(u),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),r&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},u)=>{o(a,l)&&(this._hoveredManipulators.delete(u),l.hovering=!1)}),this._afterManipulatorUngrab(n),this._onFocusChange(i)}_intersect(e,i,n){let r=null;return n(s=>{if(s.manipulators==null||!BV(s))return!1;const o=s.manipulators.intersect(e,i);return!U(o)&&(r={tool:s,manipulator:o},!0)}),r}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((i,n)=>{this._updateHoveredStateForPointerAtScreenPosition(Nn(i.x,i.y),n,i.pointerType,e)})}handleHoverEvent(e,i){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!sX(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(el(e),e.pointerId,e.pointerType,i)}_updateHoveredStateForPointerAtScreenPosition(e,i,n,r){let s=this._intersect(e,n,r);const o=kf(this._hoveredManipulators.get(i),({manipulator:a})=>a);A(s)&&!s.manipulator.interactive&&(s=null),A(s)&&o===s.manipulator||(A(o)&&(o.hovering=!1),A(s)?(s.manipulator.hovering=!0,this._hoveredManipulators.set(i,s)):this._hoveredManipulators.delete(i),this._onFocusChange(r))}_afterManipulatorUngrab(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function sX(t){return t==="mouse"}function oX(t){return t.pointerType!=="mouse"||t.button===0}function tGe(t){return!!t.native.shiftKey}const aX="attached",pF="tools";let Rd=class extends mw{constructor(e){super(e),this._manipulatorState=new eGe,this.tools=new we,this.cursor=null,this._forEachTool=i=>{for(const n of this.tools.items)if(i(n))return}}initialize(){this.handles.add([this.view.on(fme,e=>{this._handleInputEvent(e)},ri.TOOL),...QHe(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.detach(),this.handles.removeAll()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(A(e)&&!this.view.ready)return void se.getLogger(this.declaredClass).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;const i=this.activeTool;this._set("activeTool",e),A(i)&&i.deactivate(),A(e)&&e.activate(),this._removeIncompleteTools(e);for(const n of this.tools){this._updateToolEditableFlag(n);const r=BV(n);!U(this.activeTool)&&r||this._manipulatorState.clearPointers(n,this._manipulatorStateEventArgs,!r)}this._updateCursor()}get updating(){var e;return this.updatingHandles.updating||this.tools.some(i=>i.updating)||(((e=this.textures)==null?void 0:e.updating)??!1)}attach(){var e;this.view.type==="3d"?(this._set("textures",new FS(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([X(()=>{const{state:i}=this.view;return"camera"in i&&i.camera},()=>this._forEachManipulator(i=>i.onViewChange())),(e=this.view.elevationProvider)==null?void 0:e.on("elevation-change",i=>this._forEachManipulator(n=>n.onElevationChange(i))),Nh(()=>this._set("textures",si(this.textures)))],aX)):this.handles.add(X(()=>this.view.extent,()=>this._forEachManipulator(i=>i.onViewChange())))}detach(){A(this.activeTool)&&(this.activeTool=null),this.tools.removeAll(),this.handles.remove(aX)}_forEachManipulator(e){this._forEachTool(i=>{i.manipulators&&i.manipulators.forEach(({manipulator:n})=>e(n,i))})}_handleInputEvent(e){let i=!1;const n={...e,stopPropagation:()=>{i=!0,e.stopPropagation()}};A(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool(r=>{!i&&r.visible&&r.handleInputEvent(n)}),!i&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),!i&&A(this.activeTool)&&this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(pF),this._forEachTool(e=>{if(e instanceof _e){const i=X(()=>[e.cursor,e.visible,e.editable],()=>{BV(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.handles.add(i,pF)}e.manipulators&&this.handles.add([e.manipulators.on("after-remove",i=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,i.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],pF)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){var i;(i=e.setEditableFlag)==null||i.call(e,JC.MANAGER,U(this.activeTool)||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;U(e)&&this._forEachTool(i=>!(!A(i.cursor)||!i.visible)&&(e=i.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(i=>(U(e)||i!==e)&&!i.created&&i.removeIncompleteOnCancel).forEach(i=>{this.tools.remove(i)})}};c([d({constructOnly:!0,nonNullable:!0})],Rd.prototype,"view",void 0),c([d({readOnly:!0,nonNullable:!0})],Rd.prototype,"textures",void 0),c([d({value:null})],Rd.prototype,"activeTool",null),c([d({readOnly:!0,type:we})],Rd.prototype,"tools",void 0),c([d({readOnly:!0})],Rd.prototype,"cursor",void 0),c([d({readOnly:!0})],Rd.prototype,"updating",null),Rd=c([O("esri.views.ToolViewManager")],Rd);const iGe=Rd;let ub=class extends _e{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":nGe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){const e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return rGe[this.deviceType]}};c([d({nonNullable:!0,readOnly:!0})],ub.prototype,"nativeIndex",void 0),c([d({type:String,readOnly:!0})],ub.prototype,"deviceType",null),c([d({type:Number,readOnly:!0})],ub.prototype,"axisThreshold",null),ub=c([O("esri.views.input.gamepad.GamepadInputDevice")],ub);const nGe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),rGe={standard:.15,spacemouse:.025,unknown:0},m7=ub;let NS=class extends _e{constructor(...e){super(...e),this.devices=new we,this.enabledFocusMode="document"}};c([d({type:we.ofType(m7),readOnly:!0})],NS.prototype,"devices",void 0),c([d({type:["document","view","none"]})],NS.prototype,"enabledFocusMode",void 0),NS=c([O("esri.views.input.gamepad.GamepadSettings")],NS);const sGe=NS;let lA=class extends _e{constructor(){super(...arguments),this.gamepad=new sGe}};c([d({readOnly:!0})],lA.prototype,"gamepad",void 0),lA=c([O("esri.views.input.Input")],lA);const oGe=lA;let Np=class extends _e{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([d({type:Boolean,nonNullable:!0})],Np.prototype,"enabled",void 0),c([d({type:m7})],Np.prototype,"device",void 0),c([d({type:["pan","zoom"],nonNullable:!0})],Np.prototype,"mode",void 0),c([d({type:["forward-down","forward-up"],nonNullable:!0})],Np.prototype,"tiltDirection",void 0),c([d({type:Number,nonNullable:!0})],Np.prototype,"velocityFactor",void 0),Np=c([O("esri.views.navigation.gamepad.GamepadSettings")],Np);const vme=Np;let Yg=class extends _e{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new vme,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};c([d({type:Boolean})],Yg.prototype,"browserTouchPanEnabled",void 0),c([d({type:vme,nonNullable:!0})],Yg.prototype,"gamepad",void 0),c([d({type:Boolean})],Yg.prototype,"momentumEnabled",void 0),c([d({type:Boolean})],Yg.prototype,"mouseWheelZoomEnabled",void 0),Yg=c([O("esri.views.navigation.Navigation")],Yg);const bme=Yg;function wwt(t,e,i){const n=_me(t),r=e,s=aGe(n,r,i);if(n){const o=QI.deriveUnitFromSR(n,t.spatialReference).heightUnit;if(!i&&o!==n.heightUnit){const a=new N("layerview:unmatched-height-unit",`The vertical units of the layer must match the horizontal units (${o})`,{horizontalUnit:o});return new N("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n,error:a})}}if(!lGe(t)||s===bo.Unsupported)return new N("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:n});switch(s){case bo.Units:{const o=(n==null?void 0:n.heightUnit)||"unknown",a=(r==null?void 0:r.heightUnit)||"unknown",l=new N("layerview:incompatible-height-unit",`The vertical units of the layer (${o}) must match the vertical units of the scene (${a})`,{layerUnit:o,sceneUnit:a});return new N("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:r,error:l})}case bo.HeightModel:{const o=(n==null?void 0:n.heightModel)||"unknown",a=(r==null?void 0:r.heightModel)||"unknown",l=new N("layerview:incompatible-height-model",`The height model of the layer (${o}) must match the height model of the scene (${a})`,{layerHeightModel:o,sceneHeightModel:a});return new N("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:r,error:l})}case bo.CRS:{const o=(n==null?void 0:n.vertCRS)||"unknown",a=(r==null?void 0:r.vertCRS)||"unknown",l=new N("layerview:incompatible-vertical-datum",`The vertical datum of the layer (${o}) must match the vertical datum of the scene (${a})`,{layerDatum:o,sceneDatum:a});return new N("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:n,sceneHeightModelInfo:r,error:l})}}return null}function aGe(t,e,i){if(!lX(t)||!lX(e))return bo.Unsupported;if(t==null||e==null)return bo.Ok;if(!i&&t.heightUnit!==e.heightUnit)return bo.Units;if(t.heightModel!==e.heightModel)return bo.HeightModel;switch(t.heightModel){case"gravity-related-height":return bo.Ok;case"ellipsoidal":return t.vertCRS===e.vertCRS?bo.Ok:bo.CRS;default:return bo.Unsupported}}var bo;function lX(t){return t==null||t.heightModel!=null&&t.heightUnit!=null}function lGe(t){return"heightModelInfo"in t&&t.heightModelInfo!=null||t.spatialReference!=null||!Sme(t)}function _me(t){var n;const e=t.url?dm(t.url):void 0;return!(((n=t.spatialReference)==null?void 0:n.vcsWkid)==null&&A(e)&&e.serverType==="ImageServer")&&wme(t)&&t.heightModelInfo?t.heightModelInfo:Sme(t)?QI.deriveUnitFromSR(uGe,t.spatialReference):null}function wme(t){return"heightModelInfo"in t}function xme(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function Sme(t){return xme(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):Eme(t)}function cGe(t){return t.layers!=null||Eme(t)||xme(t)||wme(t)}function Eme(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(bo||(bo={}));const uGe=new QI({heightModel:"gravity-related-height"});var YC;function xwt(t){return t===YC.Global?"global":"local"}(function(t){t[t.Global=1]="Global",t[t.Local=2]="Local"})(YC||(YC={}));let HV,fF=null;async function dGe(t){fF||(fF=q(()=>import("./geometryServiceUtils-92f77436.js"),[]).then(e=>HV=e)),await fF,Xi(t)}async function Cme(t,e,i,n){if(!t)return null;const r=t.spatialReference;return om()||Gu(r,e)?Hu(t,e):HV?HV.projectGeometry(t,e,i,n):(await Promise.race([dGe(n),am(n)]),Cme(t,e,i,n))}let Zt=class extends _e{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Ky(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return A(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return U(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var n,r,s,o;const e=(n=this.map)==null?void 0:n.call(this),i=[];return A(this.priorityCollection)&&i.push(this.priorityCollection),i.push({parent:e==null?void 0:e.basemap,layers:(r=e==null?void 0:e.basemap)==null?void 0:r.baseLayers},{layers:e==null?void 0:e.layers},{parent:e==null?void 0:e.ground,layers:(s=e==null?void 0:e.ground)==null?void 0:s.layers},{parent:e==null?void 0:e.basemap,layers:(o=e==null?void 0:e.basemap)==null?void 0:o.referenceLayers}),i}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;let n=null;for(const s of e){const o=this._getSupportedSpatialReferences(s);if(o.length>0){const a=this._narrowDownSpatialReferenceCandidates(n,o);A(a)&&(n=a)}if(A(n)&&n.length===1)break}if(i&&(U(n)||n.length!==1))return{updating:!0};const r=this._pickSpatialReferenceCandidate(n);return{spatialReference:A(r)?r.spatialReference:null,viewingMode:A(r)?r.viewingMode:null,updating:!1}}get _tileInfoTask(){var n,r,s,o,a,l,u;if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:e,updating:i}=this._collectLayers([{parent:(r=(n=this.map)==null?void 0:n.call(this))==null?void 0:r.basemap,layers:(a=(o=(s=this.map)==null?void 0:s.call(this))==null?void 0:o.basemap)==null?void 0:a.baseLayers},{layers:(u=(l=this.map)==null?void 0:l.call(this))==null?void 0:u.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){const h=e[0].tileInfo;return{tileInfo:h&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:i}}get _heightModelInfoTask(){var n,r,s;if(!this.required.heightModelInfo||this.suspended&&((n=this._get("_heightModelInfoTask"))!=null&&n.heightModelInfo))return this._get("_heightModelInfoTask")??{updating:!1};const{layers:e,updating:i}=this._allLayers;for(const o of e)if(cGe(o)){const a=_me(o);if(a)return{heightModelInfo:a,vcsWkid:(r=o.spatialReference)==null?void 0:r.vcsWkid,latestVcsWkid:(s=o.spatialReference)==null?void 0:s.latestVcsWkid,updating:!1}}return{updating:i}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const e=this._allLayers,i=e.updating,n=[];for(const r of e.layers){const s="fullExtents"in r&&r.fullExtents||(A(r.fullExtent)?[r.fullExtent]:[]),o=this.requiresExtentInSpatialReference?null:s[0],a=s.find(l=>l.spatialReference.equals(this.spatialReference))??o;if(a)return{candidates:[{extent:a,layer:r}],updating:!1};if(this._getSupportedSpatialReferences(r).length>0)for(const l of s)n.push({extent:l,layer:r})}return{candidates:n,updating:i}}get _extentTask(){const{candidates:e,updating:i}=this._extentCandidatesTask;if(i)return{updating:i};if(U(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const n=this._pickExtentCandidate(e),r=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&r.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:A(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished}:(A(this._projectExtentTask.task)&&(this._projectExtentTask.task=Ky(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:r.clone(),task:sde(async s=>{try{const o=await Cme(n.extent,r,n.layer.portalItem,s);this._projectExtentTask={...this._projectExtentTask,task:null,output:o}}catch{if($a(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,i){if(U(e))return i;const n=[],r=(s,o)=>A(s)?A(o)?s===o&&s:s:o;for(const s of e)for(const o of i){if(!s.spatialReference.equals(o.spatialReference))continue;const a=r(s.viewingMode,o.viewingMode);if(a!==!1){n.push({spatialReference:s.spatialReference,viewingMode:a});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(e){const i=this.defaultSpatialReference;return U(e)||e.length<1?A(i)?{spatialReference:i,viewingMode:null}:null:(A(i)&&e.length>1&&e.some(({spatialReference:n})=>n.equals(i))&&(e=e.filter(({spatialReference:n})=>n.equals(i))),e.length>1&&e.some(({viewingMode:n})=>n!==YC.Local)&&(e=e.filter(({viewingMode:n})=>n!==YC.Local)),e[0])}_getSupportedSpatialReferences(e){const i="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(i.length===0)return[];const n=[];for(const r of i){const s=this.getSpatialReferenceSupport({spatialReference:r,layer:e});if(A(s)){const o=A(s.constraints)?s.constraints:[{spatialReference:r,viewingMode:null}];for(const{spatialReference:a,viewingMode:l}of o)(!this.requiresExtentInSpatialReference||U(this.userSpatialReference)||a.equals(this.userSpatialReference))&&n.push({spatialReference:a,viewingMode:l})}}return n}_pickExtentCandidate(e){const i=this.spatialReference;return e.find(({extent:n})=>i.equals(n.spatialReference))||e[0]}_collectLayers(e){var n;if(this._loadMaybe((n=this.map)==null?void 0:n.call(this))!=="loaded")return{layers:[],updating:!0};const i={layers:[],preloading:-1,updating:!1};for(const r of e)if(this._collectCollection(r,i),i.preloading===this.sourcePreloadCount)break;return{layers:i.layers,updating:i.updating}}_collectCollection(e,i){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return i.updating=!0,void++i.preloading;case"failed":return}for(const n of e.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":i.updating=!0,++i.preloading;break;case"loaded":i.updating||i.layers.push(n),"layers"in n&&this._collectCollection({layers:n.layers},i)}if(i.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(()=>{}),"loading"):e.loadStatus:"loaded"}};c([d()],Zt.prototype,"required",void 0),c([d({constructOnly:!0})],Zt.prototype,"map",void 0),c([d({constructOnly:!0})],Zt.prototype,"getSpatialReferenceSupport",void 0),c([d()],Zt.prototype,"defaultSpatialReference",void 0),c([d()],Zt.prototype,"userSpatialReference",void 0),c([d()],Zt.prototype,"sourcePreloadCount",void 0),c([d()],Zt.prototype,"priorityCollection",void 0),c([d()],Zt.prototype,"requiresExtentInSpatialReference",void 0),c([d()],Zt.prototype,"suspended",void 0),c([d({readOnly:!0})],Zt.prototype,"ready",null),c([d({readOnly:!0})],Zt.prototype,"heightModelInfoReady",null),c([d({readOnly:!0})],Zt.prototype,"spatialReference",null),c([d({readOnly:!0})],Zt.prototype,"extent",null),c([d({readOnly:!0})],Zt.prototype,"heightModelInfo",null),c([d({readOnly:!0})],Zt.prototype,"vcsWkid",null),c([d({readOnly:!0})],Zt.prototype,"latestVcsWkid",null),c([d({readOnly:!0})],Zt.prototype,"viewingMode",null),c([d({readOnly:!0})],Zt.prototype,"tileInfo",null),c([d({readOnly:!0})],Zt.prototype,"mapCollections",null),c([d({readOnly:!0})],Zt.prototype,"_allLayers",null),c([d({readOnly:!0})],Zt.prototype,"_spatialReferenceTask",null),c([d({readOnly:!0})],Zt.prototype,"_tileInfoTask",null),c([d({readOnly:!0})],Zt.prototype,"_heightModelInfoTask",null),c([d({readOnly:!0})],Zt.prototype,"_extentCandidatesTask",null),c([d()],Zt.prototype,"_extentTask",null),c([d()],Zt.prototype,"_projectExtentTask",void 0),Zt=c([O("esri.views.support.DefaultsFromMap")],Zt);var cA;let je=cA=class extends La($r.EventedMixin(zI(_e))){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new OC({getCollections:()=>{var e,i,n;return[(e=this.basemapView)==null?void 0:e.baseLayerViews,(i=this.groundView)==null?void 0:i.layerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:e=>e.layerViews}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new r0,this.analyses=new bO,this.typeSpecificPreconditionsReady=!0,this.layerViews=new we,this.magnifier=new hme,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.timeReference=new _w,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new oGe,this.navigation=new bme,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new KHe(this),this.persistableViewModels=new we,this._isValid=!1,this._readyCycleForced=!1,this._currentSpatialReference=null,this.handles.add(X(()=>this.preconditionsReady,e=>{var i,n;e?(this._currentSpatialReference=this.spatialReference,cA.views.add(this)):(this._currentSpatialReference=null,cA.views.remove(this)),this.notifyChange("spatialReference"),!e&&this.ready?((i=this.toolViewManager)==null||i.detach(),A(this.analysisViewManager)&&this.analysisViewManager.detach(),(n=this.layerViewManager)==null||n.clear(),this._teardown()):e&&!this.ready&&(this._startup(),A(this.analysisViewManager)&&this.analysisViewManager.attach(),this.toolViewManager.attach())},Bu))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,jo(()=>this.ready)))),this.basemapView=new Fp({view:this}),this.layerViewManager=new HHe({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new iGe({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([X(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:t},{sync:!0,initial:!0}),X(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},{sync:!0}),X(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let t=null;this.handles.add([X(()=>{var e;return(e=this.defaultsFromMap)==null?void 0:e.ready},e=>{var n;const i=((n=this.map)==null?void 0:n.allLayers.length)>0;if(e&&!this.spatialReference&&i){if(A(t))return;const r=Nh(()=>t=Ky(t));t=sde(async s=>{try{await $I(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{t=null}se.getLogger(this.declaredClass).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(r,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=si(this.graphics),this.analyses=si(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),si(this.analysisViewManager),this.toolViewManager=si(this.toolViewManager),this.layerViewManager=si(this.layerViewManager),this.basemapView=si(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const t=this.map;this.map=null,t==null||t.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return se.getLogger(this.declaredClass).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){var t;return(t=this.toolViewManager)==null?void 0:t.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new Zt({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t),...this._defaultsFromMapSettings})}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){var t;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||_l.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._currentSpatialReference&&!((t=this.defaultsFromMap)!=null&&t.ready)||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t!=null&&t.destroyed&&(se.getLogger(this.declaredClass).warn("#map","The provided map is already destroyed",{map:t}),t=null),_l.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",t))}get spatialReference(){var e,i;let t=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return t&&((i=(e=this.defaultsFromMap)==null?void 0:e.required)!=null&&i.heightModelInfo)&&(t=t.clone(),t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),t}set spatialReference(t){const e=!ui(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get tools(){var t;return(t=this.toolViewManager)==null?void 0:t.tools}get initialExtent(){var t;return(t=this.defaultsFromMap)==null?void 0:t.extent}get cursor(){const t=this.toolViewManager?this.toolViewManager.cursor:null;return A(t)?t:this._cursor||"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(t){return this.layerViewManager.whenLayerView(t)}getDefaultSpatialReference(){var t;return(t=this.defaultsFromMap)==null?void 0:t.spatialReference}getDefaultHeightModelInfo(){var t;return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??((t=this.defaultsFromMap)==null?void 0:t.heightModelInfo)??null}importLayerView(t){throw new N("importLayerView() not implemented")}hasLayerViewModule(t){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return A(this.getSpatialReferenceSupport({spatialReference:t}))}when(t,e){return this.isResolved()&&!this.ready&&se.getLogger(this.declaredClass).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(Ys(()=>this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};je.views=new we,c([d()],je.prototype,"_userSpatialReference",void 0),c([d()],je.prototype,"activeTool",null),c([d({readOnly:!0})],je.prototype,"allLayerViews",void 0),c([d()],je.prototype,"groundView",void 0),c([d()],je.prototype,"animation",null),c([d()],je.prototype,"basemapView",void 0),c([d()],je.prototype,"center",null),c([d({readOnly:!0})],je.prototype,"_defaultsFromMapSettings",null),c([d()],je.prototype,"defaultsFromMap",null),c([d()],je.prototype,"fatalError",void 0),c([d({type:Dt})],je.prototype,"extent",null),c([d(zV(r0,"graphics"))],je.prototype,"graphics",void 0),c([d(zV(bO,"analyses"))],je.prototype,"analyses",void 0),c([d({readOnly:!0,type:QI})],je.prototype,"heightModelInfo",null),c([d({readOnly:!0})],je.prototype,"interacting",null),c([d({readOnly:!0})],je.prototype,"navigating",null),c([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],je.prototype,"preconditionsReady",null),c([d({readOnly:!0})],je.prototype,"typeSpecificPreconditionsReady",void 0),c([d({type:we,readOnly:!0})],je.prototype,"layerViews",void 0),c([d()],je.prototype,"resolution",null),c([d({type:hme})],je.prototype,"magnifier",void 0),c([d({value:null,type:dme})],je.prototype,"map",null),c([d()],je.prototype,"padding",void 0),c([d({readOnly:!0})],je.prototype,"ready",void 0),c([d({type:Ge})],je.prototype,"spatialReference",null),c([d()],je.prototype,"spatialReferenceWarningDelay",void 0),c([d()],je.prototype,"stationary",null),c([d({readOnly:!0})],je.prototype,"supportsGround",void 0),c([d({type:Zs})],je.prototype,"timeExtent",void 0),c([d({type:_w,nonNullable:!0})],je.prototype,"timeReference",void 0),c([d()],je.prototype,"tools",null),c([d()],je.prototype,"toolViewManager",void 0),c([d({readOnly:!0})],je.prototype,"type",void 0),c([d({type:Number})],je.prototype,"scale",void 0),c([d({readOnly:!0})],je.prototype,"updating",void 0),c([d({readOnly:!0})],je.prototype,"initialExtentRequired",void 0),c([d({readOnly:!0})],je.prototype,"initialExtent",null),c([d()],je.prototype,"cursor",null),c([d({readOnly:!0})],je.prototype,"input",void 0),c([d({type:bme,nonNullable:!0})],je.prototype,"navigation",void 0),c([d()],je.prototype,"layerViewManager",void 0),c([d()],je.prototype,"analysisViewManager",void 0),c([d()],je.prototype,"width",void 0),c([d()],je.prototype,"height",void 0),c([d({readOnly:!0})],je.prototype,"resizing",void 0),c([d({value:null,readOnly:!0})],je.prototype,"size",null),c([d({readOnly:!0})],je.prototype,"suspended",void 0),c([d({readOnly:!0})],je.prototype,"viewEvents",void 0),c([d({readOnly:!0})],je.prototype,"persistableViewModels",void 0),c([d()],je.prototype,"_isValid",void 0),c([d()],je.prototype,"_readyCycleForced",void 0),c([d()],je.prototype,"_currentSpatialReference",void 0),je=cA=c([O("esri.views.View")],je);const hGe=je;let zp=class extends OM{constructor(e){super(e),this.state="running",this.target=null,this._dfd=null}initialize(){this.addResolvingPromise(new Promise((e,i)=>this._dfd={resolve:e,reject:i}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),(e=this._dfd)==null||e.reject(new N("ViewAnimation stopped")))}finish(){var e;this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),(e=this._dfd)==null||e.resolve())}update(e,i){i||(i=zh(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",i)}};c([d({readOnly:!0})],zp.prototype,"done",null),c([d({readOnly:!0,type:String})],zp.prototype,"state",void 0),c([d()],zp.prototype,"target",void 0),zp=c([O("esri.views.ViewAnimation")],zp),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(zp||(zp={}));const GV=zp;function _y(t,e,i,n){const r=3*t,s=3*(i-t)-r,o=1-r-s,a=3*e,l=3*(n-e)-a,u=1-a-l;function h(v){return((o*v+s)*v+r)*v}function p(v){return((u*v+l)*v+a)*v}function f(v){return(3*o*v+2*s)*v+r}function g(v,b){let _,w,S,C,$,M;for(S=v,M=0;M<8;M++){if(C=h(S)-v,Math.abs(C)<b)return S;if($=f(S),Math.abs($)<1e-6)break;S-=C/$}if(_=0,w=1,S=v,S<_)return _;if(S>w)return w;for(;_<w;){if(C=h(S),Math.abs(C-v)<b)return S;v>C?_=S:w=S,S=.5*(w-_)+_}return S}return function(v,b=1e-6){return p(g(v,b))}}const pGe=/^cubic-bezier\((.*)\)/,tl={};function fGe(t){let e=tl[t]||null;if(!e){const i=pGe.exec(t);if(i){const n=i[1].split(",").map(r=>parseFloat(r.trim()));n.length!==4||n.some(r=>isNaN(r))||(e=_y.apply(_y,n))}}return e}tl.ease=_y(.25,.1,.25,1),tl.linear=_y(0,0,1,1),tl.easeIn=tl["ease-in"]=_y(.42,0,1,1),tl.easeOut=tl["ease-out"]=_y(0,0,.58,1),tl.easeInOut=tl["ease-in-out"]=_y(.42,0,.58,1);function Zf(){return[1,0,0,1,0,0]}function mGe(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function gGe(t,e,i,n,r,s){return[t,e,i,n,r,s]}function yGe(t,e){return new Float64Array(t,e,6)}Object.freeze(Object.defineProperty({__proto__:null,clone:mGe,create:Zf,createView:yGe,fromValues:gGe},Symbol.toStringTag,{value:"Module"}));function ZC(t,e){return t[0]=e[0],t[1]=e[1],t}function br(t,e,i){return t[0]=e,t[1]=i,t}function g7(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function zn(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function Ime(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function Tme(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function vGe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function bGe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function _Ge(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function wGe(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function xGe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function m1(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function yh(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t}function U0(t,e){const i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)}function zc(t,e){const i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function Sw(t){const e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function hm(t){const e=t[0],i=t[1];return e*e+i*i}function kme(t,e){return t[0]=-e[0],t[1]=-e[1],t}function SGe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function qV(t,e){const i=e[0],n=e[1];let r=i*i+n*n;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t}function Mm(t,e){return t[0]*e[0]+t[1]*e[1]}function $me(t,e,i){const n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t}function Ame(t,e,i,n){const r=e[0],s=e[1];return t[0]=r+n*(i[0]-r),t[1]=s+n*(i[1]-s),t}function EGe(t,e){e=e||1;const i=2*BP()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function CGe(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r,t[1]=i[1]*n+i[3]*r,t}function ku(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[2]*r+i[4],t[1]=i[1]*n+i[3]*r+i[5],t}function IGe(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[3]*r+i[6],t[1]=i[1]*n+i[4]*r+i[7],t}function TGe(t,e,i){const n=e[0],r=e[1];return t[0]=i[0]*n+i[4]*r+i[12],t[1]=i[1]*n+i[5]*r+i[13],t}function kGe(t,e,i,n){const r=e[0]-i[0],s=e[1]-i[1],o=Math.sin(n),a=Math.cos(n);return t[0]=r*a-s*o+i[0],t[1]=r*o+s*a+i[1],t}function $Ge(t,e){const i=t[0],n=t[1],r=e[0],s=e[1];let o=i*i+n*n;o>0&&(o=1/Math.sqrt(o));let a=r*r+s*s;a>0&&(a=1/Math.sqrt(a));const l=(i*r+n*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function AGe(t){return"vec2("+t[0]+", "+t[1]+")"}function MGe(t,e){return t[0]===e[0]&&t[1]===e[1]}function OGe(t,e){const i=t[0],n=t[1],r=e[0],s=e[1],o=Ra();return Math.abs(i-r)<=o*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(n-s)<=o*Math.max(1,Math.abs(n),Math.abs(s))}function PGe(t,e,i,n,r){let s=e[0]-i[0],o=e[1]-i[1];const a=(n[0]*s+n[1]*o)*(r-1);return s=n[0]*a,o=n[1]*a,t[0]=e[0]+s,t[1]=e[1]+o,t}const RGe=Sw,jR=zn,LGe=Ime,DGe=Tme,FGe=U0,NGe=zc,zGe=hm;Object.freeze(Object.defineProperty({__proto__:null,add:g7,angle:$Ge,ceil:vGe,copy:ZC,cross:$me,dist:FGe,distance:U0,div:DGe,divide:Tme,dot:Mm,equals:OGe,exactEquals:MGe,floor:bGe,inverse:SGe,len:RGe,length:Sw,lerp:Ame,max:wGe,min:_Ge,mul:LGe,multiply:Ime,negate:kme,normalize:qV,projectAndScale:PGe,random:EGe,rotate:kGe,round:xGe,scale:m1,scaleAndAdd:yh,set:br,sqrDist:NGe,sqrLen:zGe,squaredDistance:zc,squaredLength:hm,str:AGe,sub:jR,subtract:zn,transformMat2:CGe,transformMat2d:ku,transformMat3:IGe,transformMat4:TGe},Symbol.toStringTag,{value:"Module"}));function Ct(){return[0,0]}function Mme(t){return[t[0],t[1]]}function a2(t,e){return[t,e]}function jGe(t){const e=Ct(),i=Math.min(2,t.length);for(let n=0;n<i;++n)e[n]=t[n];return e}function VGe(t,e){return new Float64Array(t,e,2)}function Ome(){return Ct()}function Pme(){return a2(1,1)}function Rme(){return a2(1,0)}function Lme(){return a2(0,1)}const UGe=Ome(),BGe=Pme(),HGe=Rme(),GGe=Lme();Object.freeze(Object.defineProperty({__proto__:null,ONES:BGe,UNIT_X:HGe,UNIT_Y:GGe,ZEROS:UGe,clone:Mme,create:Ct,createView:VGe,fromArray:jGe,fromValues:a2,ones:Pme,unitX:Rme,unitY:Lme,zeros:Ome},Symbol.toStringTag,{value:"Module"}));const Dme=96,Fme=39.37,qGe=180/Math.PI;function Nme(t){return t.wkid?t:t.spatialReference||Ge.WGS84}function y7(t,e){return e.type?br(t,e.x,e.y):ZC(t,e)}function zme(t){return jh(t)}function PE(t,e){const i=Math.max(1,e[0]),n=Math.max(1,e[1]);return Math.max(t.width/i,t.height/n)*tqe(t.spatialReference)}async function zS(t,e,i,n){let r,s;if(!t||Array.isArray(t)&&!t.length)return null;if(we.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){const a=t.every(h=>"attributes"in h),l=t.some(h=>!h.geometry);let u=t;if(a&&l&&e&&e.allLayerViews){const h=new Map;for(const v of t){const b=v.layer,_=h.get(b)||[],w=v.attributes[b.objectIdField];w!=null&&_.push(w),h.set(b,_)}const p=[];h.forEach((v,b)=>{const _=e.allLayerViews.find(w=>w.layer.id===b.id);if(_&&"queryFeatures"in _){const w=b.createQuery();w.objectIds=v,w.returnGeometry=!0,p.push(_.queryFeatures(w))}});const f=await Promise.all(p),g=[];for(const v of f)if(v&&v.features&&v.features.length)for(const b of v.features)A(b.geometry)&&g.push(b.geometry);u=g}for(const h of u)n=await zS(h,e,i,n);return n}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")r=new Ve(t);else if(t instanceof wm)r=t;else if("geometry"in t){if(t.geometry)r=t.geometry;else if(t.layer){const a=t.layer,l=e.allLayerViews.find(u=>u.layer.id===a.id);if(l&&"queryFeatures"in l){const u=a.createQuery();u.objectIds=[t.attributes[a.objectIdField]],u.returnGeometry=!0;const h=await l.queryFeatures(u);r=tw(h,"features",0,"geometry")}}}if(U(r)||(s=r.type==="point"?new Dt({xmin:r.x,ymin:r.y,xmax:r.x,ymax:r.y,spatialReference:r.spatialReference}):r.extent,!s))return null;om()||Gu(s.spatialReference,i)||await am();const o=Hu(s,i);return o?n=n?n.union(o):o:null}function WGe(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer&&t.layer.minScale&&t.layer.maxScale){const e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,i=0;for(const n of t){const r=n.layer;r&&r.minScale&&r.maxScale&&(e=r.minScale<e?r.minScale:e,i=r.maxScale>i?r.maxScale:i)}return e&&i?{min:e,max:i}:null}}}function mF(t,e){return ui(Nme(t),e)?t:Hu(t,e)}async function JGe(t,e){if(!t||!e)return new Tr({targetGeometry:new Ve,scale:0,rotation:0});let i=e.spatialReference;const{constraints:n,padding:r,viewpoint:s,size:o}=e,a=[r?o[0]-r.left-r.right:o[0],r?o[1]-r.top-r.bottom:o[1]];let l=null;t instanceof Tr?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let u=null;l&&l.targetGeometry?u=l.targetGeometry:t instanceof Dt?u=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(u=await zS(t.center,e,i)||await zS(t.extent,e,i)||await zS(t.target,e,i)||await zS(t,e,i)),!u&&s&&s.targetGeometry?u=s.targetGeometry:!u&&e.extent&&(u=e.extent),i||(i=Nme(e.spatialReference||e.extent||u)),om()||ui(u.spatialReference,i)||Gu(u,i)||await am();const h=mF(u.center?u.center:u,i);let p=0;if(l&&A(l.targetGeometry)&&l.targetGeometry.type==="point")p=l.scale;else if("scale"in t&&t.scale)p=t.scale;else if("zoom"in t&&t.zoom!==-1&&n&&n.effectiveLODs)p=n.zoomToScale(t.zoom);else if(Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0){const b=mF(e.extent,i);p=A(b)?PE(b,a):e.extent?PE(e.extent,a):s.scale}else p=PE(mF(u.extent,i),a);const f=WGe(t);f&&(f.min&&f.min>p?p=f.min:f.max&&f.max<p&&(p=f.max));let g=0;l?g=l.rotation:t.hasOwnProperty("rotation")?g=t.rotation:s&&(g=s.rotation);let v=new Tr({targetGeometry:h,scale:p,rotation:g});return n&&(v=n.fit(v),n.constrainByGeometry(v),n.rotationEnabled||(v.rotation=g)),v}function Uc(t,e){const i=t.targetGeometry,n=e.targetGeometry;return i.x=n.x,i.y=n.y,i.spatialReference=n.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function YGe(t,e,i){return i?br(t,.5*(e[0]-i.right+i.left),.5*(e[1]-i.bottom+i.top)):m1(t,e,.5)}const ZGe=function(){const t=Ct();return function(e,i,n){const r=i.targetGeometry;y7(t,r);const s=.5*g1(i);return e.xmin=t[0]-s*n[0],e.ymin=t[1]-s*n[1],e.xmax=t[0]+s*n[0],e.ymax=t[1]+s*n[1],e.spatialReference=r.spatialReference,e}}();function KGe(t,e,i,n,r){return WV(t,e,i.center),t.scale=PE(i,n),r&&r.constraints&&r.constraints.constrain(t),t}function XGe(t,e,i,n){return _7(t,e,i,n),d7(t,t)}const jme=function(){const t=Ct();return function(e,i,n){return jR(e,iqe(e,i),YGe(t,i,n))}}(),QGe=function(){const t=Zf(),e=Ct();return function(i,n,r,s){const o=g1(n),a=v7(n);return br(e,o,o),Hfe(t,e),s2(t,t,a),xw(t,t,jme(e,r,s)),xw(t,t,[0,s.top-s.bottom]),br(i,t[4],t[5])}}();function g1(t){return t.scale*eqe(t.targetGeometry)}function eqe(t){return A(t)&&vn(t.spatialReference)?1/(zme(t.spatialReference)*Fme*Dme):1}function v7(t){return d9(t.rotation)||0}function tqe(t){return vn(t)?zme(t)*Fme*Dme:1}function iqe(t,e){return m1(t,e,.5)}const b7=function(){const t=Ct(),e=Ct(),i=Ct();return function(n,r,s,o,a,l){return kme(t,r),m1(e,s,.5*l),br(i,1/o*l,-1/o*l),h7(n,e),a&&s2(n,n,a),DR(n,n,i),xw(n,n,t),n}}(),_7=function(){const t=Ct();return function(e,i,n,r){const s=g1(i),o=v7(i);return y7(t,i.targetGeometry),b7(e,t,n,s,o,r)}}(),nqe=function(){const t=Ct();return function(e,i,n,r){const s=g1(i);return y7(t,i.targetGeometry),b7(e,t,n,s,0,r)}}();function rqe(t){const e=xa(t);return e?e.valid[1]-e.valid[0]:0}function sqe(t,e){return Math.round(rqe(t)/e)}const oqe=function(){const t=Ct(),e=Ct(),i=[0,0,0];return function(n,r,s){zn(t,n,r),qV(t,t),zn(e,n,s),qV(e,e),$me(i,t,e);let o=Math.acos(Mm(t,e)/(Sw(t)*Sw(e)))*qGe;return i[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),aqe=function(){const t=Ct();return function(e,i,n,r){const s=e.targetGeometry;return Uc(e,i),QGe(t,i,n,r),s.x+=t[0],s.y+=t[1],e}}(),WV=function(t,e,i){Uc(t,e);const n=t.targetGeometry;return n.x=i.x,n.y=i.y,n.spatialReference=i.spatialReference,t},lqe=function(){const t=Ct();return function(e,i,n,r,s){s||(s="center"),jR(t,n,r),m1(t,t,.5);const o=t[0],a=t[1];switch(s){case"center":br(t,0,0);break;case"left":br(t,-o,0);break;case"top":br(t,0,a);break;case"right":br(t,o,0);break;case"bottom":br(t,0,-a);break;case"top-left":br(t,-o,a);break;case"bottom-left":br(t,-o,-a);break;case"top-right":br(t,o,a);break;case"bottom-right":br(t,o,-a)}return VR(e,i,t),e}}();function Cwt(t,e,i){return Uc(t,e),t.rotation+=i,t}function cqe(t,e,i){return Uc(t,e),t.rotation=i,t}const uqe=function(){const t=Ct();return function(e,i,n,r,s){return Uc(e,i),isNaN(n)||n===0||(Ume(t,r,i,s),e.scale=i.scale*n,Bme(t,t,e,s),VR(e,e,br(t,t[0]-r[0],r[1]-t[1]))),e}}();function cX(t,e,i){return Uc(t,e),t.scale=i,t}const Vme=function(){const t=Ct();return function(e,i,n,r,s,o){return Uc(e,i),isNaN(n)||n===0||(Ume(t,s,i,o),e.scale=i.scale*n,e.rotation+=r,Bme(t,t,e,o),VR(e,e,br(t,t[0]-s[0],s[1]-t[1]))),e}}(),Iwt=function(){const t=Ct(),e=Ct();return function(i,n,r,s,o,a,l){return jme(e,a,l),g7(t,o,e),s?Vme(i,n,r,s,t,a):uqe(i,n,r,t,a)}}(),Ume=function(){const t=Zf();return function(e,i,n,r){return ku(e,i,XGe(t,n,r,1))}}(),Bme=function(){const t=Zf();return function(e,i,n,r){return ku(e,i,_7(t,n,r,1))}}(),VR=function(){const t=Ct(),e=Zf();return function(i,n,r){Uc(i,n);const s=g1(n),o=i.targetGeometry;return Bfe(e,v7(n)),DR(e,e,a2(s,s)),ku(t,r,e),o.x+=t[0],o.y+=t[1],i}}();let dqe=class{constructor(e,i,n,r){const s=e.targetGeometry,o=i.targetGeometry;r?typeof r=="string"&&(r=fGe(r)||tl.ease):r=tl.ease,this.easing=r,this.duration=n,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=i.scale,this.tRotation=i.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,i){const n=this.easing(i);let r,s,o,a;i>=1?(r=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(r=this.sCenterX+n*this.dCenterX,s=this.sCenterY+n*this.dCenterY,o=this.sRotation+n*this.dRotation,a=this.sScale+n*this.dScale),e.targetGeometry.x=r,e.targetGeometry.y=s,e.scale=a,e.rotation=o}},Ld=class extends _e{constructor(e){super(e),this.updateFunction=null,this.animation=null,this.duration=200,this.transition=null,this.easing=tl.ease,this.view=null,this.viewpoint=new Tr({targetGeometry:new Ve,scale:0,rotation:0}),this._updateTask=iw({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=bn(this._updateTask)}animate(e,i,n){this.stop();const r=this.viewpoint;Uc(r,i),this.transition=new dqe(this.viewpoint,e.target,n&&n.duration||this.duration,n&&n.easing||this.easing);const s=()=>{var o,a;this.animation===e&&this._updateTask&&(e.state==="finished"&&((o=this.transition)==null||o.applyRatio(this.viewpoint,1),(a=this.view)!=null&&a.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,i){this.stop(),this.updateFunction=i,this.viewpoint=e;const n=new GV({target:e.clone()}),r=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){var n,r;const i=this.animation;if(i&&i.state!==GV.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const s=this.transition,o=(performance.now()-this._startTime)/s.duration,a=o>=1;s.applyRatio(this.viewpoint,o),a&&((n=this.animation)==null||n.finish())}(r=this.view)!=null&&r.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};c([d()],Ld.prototype,"animation",void 0),c([d()],Ld.prototype,"duration",void 0),c([d()],Ld.prototype,"transition",void 0),c([d()],Ld.prototype,"easing",void 0),c([d()],Ld.prototype,"view",void 0),c([d()],Ld.prototype,"viewpoint",void 0),Ld=c([O("esri.views.2d.AnimationManager")],Ld);const hqe=Ld;let pqe=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{var a;this._updateRequested=!1;const{basemapView:i,graphicsView:n,labelManager:r,layerViews:s,state:{id:o}}=this.view;i==null||i.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),i==null||i.referenceLayerViews.forEach(this._updateLayerView,this),A(r)&&(r.lastUpdateId!==o&&(r.viewChange(),r.lastUpdateId=o),r.updateRequested&&r.processUpdate(this._updateParameters)),A(n)&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||((a=this._frameTaskHandle)==null||a.pause())}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;const e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=X(()=>e.stationary,i=>{this.stationary=i,this.requestFrame()}),this._frameTaskHandle=iw(this),this.requestUpdate()}stop(){var e;this._frameTaskHandle&&(this._updateRequested=!1,(e=this._stationaryHandle)==null||e.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();const i=this.view.state,n=e.lastUpdateId;n!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),n!==i.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=i.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews.forEach(this._updateLayerView,this)}};function cn(){return Promise.all([q(()=>import("./webglDeps-2b3de3f9.js"),["assets/webglDeps-2b3de3f9.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/enums-64ab819c.js","assets/ProgramTemplate-122fdc23.js","assets/programUtils-27355458.js","assets/NestedMap-1b5db22e.js"]),q(()=>import("./mapViewDeps-94ad2cdb.js"),["assets/mapViewDeps-94ad2cdb.js","assets/CIMResourceManager-5dc78991.js","assets/Rasterizer-d5997801.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/rasterizingUtils-38c26b41.js","assets/imageutils-8c52ebc2.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/BufferPool-a5303daf.js","assets/color-6785f00e.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-e90e6675.js","assets/VertexArrayObject-867c589c.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/enums-fb086c25.js","assets/programUtils-27355458.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-081d2733.js","assets/Matcher-88b8ac0b.js","assets/visualVariablesUtils-ca43c24b.js","assets/visualVariablesUtils-d2906eec.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-54758822.js","assets/ExpandedCIM-747cf648.js","assets/CircularArray-7c7c2321.js","assets/webgl-debug-b1f7a2c5.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/RenderingContext-62cb6742.js","assets/OrderIndependentTransparency-92d1201d.js","assets/basicInterfaces-04e01328.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-4525aca6.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/AttributeStoreView-0bb29017.js","assets/TiledDisplayObject-26b1cc81.js","assets/schemaUtils-46db8c2a.js","assets/util-2b8216a2.js","assets/GraphicContainer-b70adb47.js","assets/BaseGraphicContainer-b6e394f6.js","assets/FeatureContainer-fdbfc140.js","assets/TileContainer-8b8c2da9.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-1d4d3276.js"])])}const px=()=>cn().then(()=>q(()=>import("./TileLayerView2D-50381ef3.js"),["assets/TileLayerView2D-50381ef3.js","assets/Rasterizer-d5997801.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/rasterizingUtils-38c26b41.js","assets/EffectView-529d0ac5.js","assets/Container-d7f99152.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/BufferPool-a5303daf.js","assets/color-6785f00e.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-e90e6675.js","assets/VertexArrayObject-867c589c.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-081d2733.js","assets/imageutils-8c52ebc2.js","assets/Matcher-88b8ac0b.js","assets/visualVariablesUtils-ca43c24b.js","assets/visualVariablesUtils-d2906eec.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-54758822.js","assets/ExpandedCIM-747cf648.js","assets/CircularArray-7c7c2321.js","assets/webgl-debug-b1f7a2c5.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/OrderIndependentTransparency-92d1201d.js","assets/basicInterfaces-04e01328.js","assets/GraphicsView2D-4525aca6.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/AttributeStoreView-0bb29017.js","assets/TiledDisplayObject-26b1cc81.js","assets/schemaUtils-46db8c2a.js","assets/util-2b8216a2.js","assets/vec3f32-ad1dc57f.js","assets/imageUtils-e4367a08.js","assets/BitmapTileContainer-7aa7d9b0.js","assets/Bitmap-e3f97eba.js","assets/TileContainer-8b8c2da9.js","assets/LayerView2D-787b9454.js","assets/HighlightGraphicContainer-50f9843f.js","assets/BaseGraphicContainer-b6e394f6.js","assets/FeatureContainer-fdbfc140.js","assets/LayerView-4221c2d8.js","assets/RefreshableLayerView-68c78c99.js","assets/MapServiceLayerViewHelper-7946d5c4.js","assets/floorFilterUtils-080a7cd2.js","assets/drapedUtils-476a1deb.js","assets/sublayerUtils-01d185f7.js","assets/popupUtils-3c058107.js"])),dv=()=>cn().then(()=>q(()=>import("./FeatureLayerView2D-411f844e.js"),["assets/FeatureLayerView2D-411f844e.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/LayerView2D-787b9454.js","assets/Container-d7f99152.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/schemaUtils-46db8c2a.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-bea86d3d.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-d2906eec.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/ExpandedCIM-747cf648.js","assets/util-2b8216a2.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-3c058107.js","assets/LayerView-4221c2d8.js","assets/RefreshableLayerView-68c78c99.js"])),uX={"base-dynamic":()=>cn().then(()=>q(()=>import("./BaseDynamicLayerView2D-e678b67d.js"),["assets/BaseDynamicLayerView2D-e678b67d.js","assets/BitmapContainer-4e82b81c.js","assets/WGLContainer-e90e6675.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/earcut-61f7b102.js","assets/LayerView2D-787b9454.js","assets/ExportStrategy-c09f46a8.js","assets/Bitmap-e3f97eba.js","assets/LayerView-4221c2d8.js","assets/RefreshableLayerView-68c78c99.js"])),"base-tile":px,"bing-maps":px,csv:dv,"geo-rss":()=>cn().then(()=>q(()=>import("./GeoRSSLayerView2D-13f81923.js"),["assets/GeoRSSLayerView2D-13f81923.js","assets/LayerView2D-787b9454.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/GraphicContainer-b70adb47.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/BaseGraphicContainer-b6e394f6.js","assets/FeatureContainer-fdbfc140.js","assets/AttributeStoreView-0bb29017.js","assets/TiledDisplayObject-26b1cc81.js","assets/visualVariablesUtils-ca43c24b.js","assets/visualVariablesUtils-d2906eec.js","assets/VertexArrayObject-867c589c.js","assets/TileContainer-8b8c2da9.js","assets/WGLContainer-e90e6675.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-4525aca6.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/Matcher-88b8ac0b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-54758822.js","assets/ExpandedCIM-747cf648.js","assets/schemaUtils-46db8c2a.js","assets/util-2b8216a2.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/LayerView-4221c2d8.js"])),feature:dv,geojson:dv,graphics:()=>cn().then(()=>q(()=>import("./GraphicsLayerView2D-4256f5aa.js"),["assets/GraphicsLayerView2D-4256f5aa.js","assets/LayerView2D-787b9454.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/GraphicContainer-b70adb47.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/BaseGraphicContainer-b6e394f6.js","assets/FeatureContainer-fdbfc140.js","assets/AttributeStoreView-0bb29017.js","assets/TiledDisplayObject-26b1cc81.js","assets/visualVariablesUtils-ca43c24b.js","assets/visualVariablesUtils-d2906eec.js","assets/VertexArrayObject-867c589c.js","assets/TileContainer-8b8c2da9.js","assets/WGLContainer-e90e6675.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-4525aca6.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/Matcher-88b8ac0b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-54758822.js","assets/ExpandedCIM-747cf648.js","assets/schemaUtils-46db8c2a.js","assets/util-2b8216a2.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/LayerView-4221c2d8.js"])),group:()=>cn().then(()=>q(()=>import("./GroupLayerView2D-fde19488.js"),["assets/GroupLayerView2D-fde19488.js","assets/GroupContainer-ca7f6207.js","assets/WGLContainer-e90e6675.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/earcut-61f7b102.js","assets/LayerView2D-787b9454.js","assets/LayerView-4221c2d8.js"])),imagery:()=>cn().then(()=>q(()=>import("./ImageryLayerView2D-33764bc2.js"),["assets/ImageryLayerView2D-33764bc2.js","assets/RasterVFDisplayObject-336edfa5.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-40d36dc7.js","assets/pixelRangeUtils-03719dd8.js","assets/WGLContainer-e90e6675.js","assets/definitions-19bfb61c.js","assets/vec4f32-0d1b2306.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/earcut-61f7b102.js","assets/LayerView2D-787b9454.js","assets/GraphicsView2D-4525aca6.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/AttributeStoreView-0bb29017.js","assets/TiledDisplayObject-26b1cc81.js","assets/visualVariablesUtils-ca43c24b.js","assets/visualVariablesUtils-d2906eec.js","assets/Matcher-88b8ac0b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-54758822.js","assets/ExpandedCIM-747cf648.js","assets/schemaUtils-46db8c2a.js","assets/util-2b8216a2.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/HighlightGraphicContainer-50f9843f.js","assets/BaseGraphicContainer-b6e394f6.js","assets/FeatureContainer-fdbfc140.js","assets/TileContainer-8b8c2da9.js","assets/vec3f32-ad1dc57f.js","assets/BitmapContainer-4e82b81c.js","assets/Bitmap-e3f97eba.js","assets/ExportStrategy-c09f46a8.js","assets/rasterProjectionHelper-1604863e.js","assets/popupUtils-3c058107.js","assets/LayerView-4221c2d8.js","assets/RefreshableLayerView-68c78c99.js"])),"imagery-tile":()=>cn().then(()=>q(()=>import("./ImageryTileLayerView2D-d32b806b.js"),["assets/ImageryTileLayerView2D-d32b806b.js","assets/multidimensionalUtils-f533527a.js","assets/RasterVFDisplayObject-336edfa5.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-40d36dc7.js","assets/pixelRangeUtils-03719dd8.js","assets/WGLContainer-e90e6675.js","assets/definitions-19bfb61c.js","assets/vec4f32-0d1b2306.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/earcut-61f7b102.js","assets/LayerView2D-787b9454.js","assets/rasterUtils-419b3d78.js","assets/TiledDisplayObject-26b1cc81.js","assets/TileContainer-8b8c2da9.js","assets/RawBlockCache-172936cc.js","assets/rasterProjectionHelper-1604863e.js","assets/util-2b8216a2.js","assets/popupUtils-3c058107.js","assets/LayerView-4221c2d8.js","assets/RefreshableLayerView-68c78c99.js"])),kml:()=>cn().then(()=>q(()=>import("./KMLLayerView2D-5759146b.js"),["assets/KMLLayerView2D-5759146b.js","assets/kmlUtils-f3718430.js","assets/Bitmap-e3f97eba.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/BitmapContainer-4e82b81c.js","assets/WGLContainer-e90e6675.js","assets/VertexArrayObject-867c589c.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/LayerView2D-787b9454.js","assets/GraphicContainer-b70adb47.js","assets/BaseGraphicContainer-b6e394f6.js","assets/FeatureContainer-fdbfc140.js","assets/AttributeStoreView-0bb29017.js","assets/TiledDisplayObject-26b1cc81.js","assets/visualVariablesUtils-ca43c24b.js","assets/visualVariablesUtils-d2906eec.js","assets/TileContainer-8b8c2da9.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-4525aca6.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/Matcher-88b8ac0b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-54758822.js","assets/ExpandedCIM-747cf648.js","assets/schemaUtils-46db8c2a.js","assets/util-2b8216a2.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/LayerView-4221c2d8.js","assets/rasterProjectionHelper-1604863e.js","assets/RenderingContext-62cb6742.js","assets/programUtils-27355458.js","assets/NestedMap-1b5db22e.js","assets/OrderIndependentTransparency-92d1201d.js","assets/basicInterfaces-04e01328.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/webgl-debug-b1f7a2c5.js","assets/rasterUtils-419b3d78.js"])),"knowledge-graph":()=>cn().then(()=>q(()=>import("./KnowledgeGraphLayerView2D-ef63aa41.js"),["assets/KnowledgeGraphLayerView2D-ef63aa41.js","assets/LayerView2D-787b9454.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/LayerView-4221c2d8.js"])),"link-chart":()=>cn().then(()=>q(()=>import("./KnowledgeGraphLayerView2D-ef63aa41.js"),["assets/KnowledgeGraphLayerView2D-ef63aa41.js","assets/LayerView2D-787b9454.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/LayerView-4221c2d8.js"])),"knowledge-graph-sublayer":dv,"map-image":()=>cn().then(()=>q(()=>import("./MapImageLayerView2D-32a8f539.js"),["assets/MapImageLayerView2D-32a8f539.js","assets/BitmapContainer-4e82b81c.js","assets/WGLContainer-e90e6675.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/earcut-61f7b102.js","assets/LayerView2D-787b9454.js","assets/GraphicsView2D-4525aca6.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/AttributeStoreView-0bb29017.js","assets/TiledDisplayObject-26b1cc81.js","assets/visualVariablesUtils-ca43c24b.js","assets/visualVariablesUtils-d2906eec.js","assets/Matcher-88b8ac0b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-54758822.js","assets/ExpandedCIM-747cf648.js","assets/schemaUtils-46db8c2a.js","assets/util-2b8216a2.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/HighlightGraphicContainer-50f9843f.js","assets/BaseGraphicContainer-b6e394f6.js","assets/FeatureContainer-fdbfc140.js","assets/TileContainer-8b8c2da9.js","assets/vec3f32-ad1dc57f.js","assets/ExportStrategy-c09f46a8.js","assets/Bitmap-e3f97eba.js","assets/LayerView-4221c2d8.js","assets/ExportImageParameters-1aee1bfb.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-01d185f7.js","assets/RefreshableLayerView-68c78c99.js","assets/MapServiceLayerViewHelper-7946d5c4.js","assets/drapedUtils-476a1deb.js","assets/popupUtils-3c058107.js"])),"map-notes":()=>cn().then(()=>q(()=>import("./MapNotesLayerView2D-7e65bc3a.js"),["assets/MapNotesLayerView2D-7e65bc3a.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/GroupContainer-ca7f6207.js","assets/WGLContainer-e90e6675.js","assets/VertexArrayObject-867c589c.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/LayerView2D-787b9454.js","assets/GraphicContainer-b70adb47.js","assets/BaseGraphicContainer-b6e394f6.js","assets/FeatureContainer-fdbfc140.js","assets/AttributeStoreView-0bb29017.js","assets/TiledDisplayObject-26b1cc81.js","assets/visualVariablesUtils-ca43c24b.js","assets/visualVariablesUtils-d2906eec.js","assets/TileContainer-8b8c2da9.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-4525aca6.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/Matcher-88b8ac0b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-54758822.js","assets/ExpandedCIM-747cf648.js","assets/schemaUtils-46db8c2a.js","assets/util-2b8216a2.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/LayerView-4221c2d8.js"])),media:()=>cn().then(()=>q(()=>import("./MediaLayerView2D-f8c838cb.js"),["assets/MediaLayerView2D-f8c838cb.js","assets/perspectiveUtils-efd32b96.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/mat3f64-221ce671.js","assets/Rasterizer-d5997801.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/rasterizingUtils-38c26b41.js","assets/EffectView-529d0ac5.js","assets/Container-d7f99152.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/BufferPool-a5303daf.js","assets/color-6785f00e.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-e90e6675.js","assets/VertexArrayObject-867c589c.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/enums-fb086c25.js","assets/MagnifierPrograms-081d2733.js","assets/imageutils-8c52ebc2.js","assets/Matcher-88b8ac0b.js","assets/visualVariablesUtils-ca43c24b.js","assets/visualVariablesUtils-d2906eec.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-54758822.js","assets/ExpandedCIM-747cf648.js","assets/CircularArray-7c7c2321.js","assets/webgl-debug-b1f7a2c5.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/OrderIndependentTransparency-92d1201d.js","assets/basicInterfaces-04e01328.js","assets/GraphicsView2D-4525aca6.js","assets/AttributeStoreView-0bb29017.js","assets/TiledDisplayObject-26b1cc81.js","assets/schemaUtils-46db8c2a.js","assets/util-2b8216a2.js","assets/vec3f32-ad1dc57f.js","assets/LayerView2D-787b9454.js","assets/LayerView-4221c2d8.js"])),"ogc-feature":()=>cn().then(()=>q(()=>import("./OGCFeatureLayerView2D-592e7fe6.js"),["assets/OGCFeatureLayerView2D-592e7fe6.js","assets/FeatureLayerView2D-411f844e.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/LayerView2D-787b9454.js","assets/Container-d7f99152.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/schemaUtils-46db8c2a.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-bea86d3d.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-d2906eec.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/ExpandedCIM-747cf648.js","assets/util-2b8216a2.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-3c058107.js","assets/LayerView-4221c2d8.js","assets/RefreshableLayerView-68c78c99.js"])),"open-street-map":px,"oriented-imagery":dv,route:()=>cn().then(()=>q(()=>import("./RouteLayerView2D-4dc1a2ea.js"),["assets/RouteLayerView2D-4dc1a2ea.js","assets/Stop-696f290a.js","assets/LayerView2D-787b9454.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/GraphicContainer-b70adb47.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/BaseGraphicContainer-b6e394f6.js","assets/FeatureContainer-fdbfc140.js","assets/AttributeStoreView-0bb29017.js","assets/TiledDisplayObject-26b1cc81.js","assets/visualVariablesUtils-ca43c24b.js","assets/visualVariablesUtils-d2906eec.js","assets/VertexArrayObject-867c589c.js","assets/TileContainer-8b8c2da9.js","assets/WGLContainer-e90e6675.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/vec3f32-ad1dc57f.js","assets/GraphicsView2D-4525aca6.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/Matcher-88b8ac0b.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-54758822.js","assets/ExpandedCIM-747cf648.js","assets/schemaUtils-46db8c2a.js","assets/util-2b8216a2.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/LayerView-4221c2d8.js"])),stream:()=>cn().then(()=>q(()=>import("./StreamLayerView2D-d6ea0cec.js"),["assets/StreamLayerView2D-d6ea0cec.js","assets/FeatureLayerView2D-411f844e.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/LayerView2D-787b9454.js","assets/Container-d7f99152.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/schemaUtils-46db8c2a.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-bea86d3d.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-d2906eec.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/ExpandedCIM-747cf648.js","assets/util-2b8216a2.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-3c058107.js","assets/LayerView-4221c2d8.js","assets/RefreshableLayerView-68c78c99.js"])),"subtype-group":()=>cn().then(()=>q(()=>import("./SubtypeGroupLayerView2D-0f809467.js"),["assets/SubtypeGroupLayerView2D-0f809467.js","assets/FeatureLayerView2D-411f844e.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/LayerView2D-787b9454.js","assets/Container-d7f99152.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/schemaUtils-46db8c2a.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/utils-bea86d3d.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/visualVariablesUtils-d2906eec.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/ExpandedCIM-747cf648.js","assets/util-2b8216a2.js","assets/floorFilterUtils-080a7cd2.js","assets/popupUtils-3c058107.js","assets/LayerView-4221c2d8.js","assets/RefreshableLayerView-68c78c99.js"])),tile:px,"vector-tile":()=>cn().then(()=>q(()=>import("./VectorTileLayerView2D-be0769e6.js"),["assets/VectorTileLayerView2D-be0769e6.js","assets/enums-fb086c25.js","assets/Rect-ea14f53a.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/rasterizingUtils-38c26b41.js","assets/floatRGBA-42e02ec2.js","assets/VertexArrayObject-867c589c.js","assets/config-1337d16e.js","assets/TiledDisplayObject-26b1cc81.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/color-6785f00e.js","assets/VertexElementDescriptor-2925c6af.js","assets/number-b10bd8f5.js","assets/TileContainer-8b8c2da9.js","assets/WGLContainer-e90e6675.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/StyleRepository-3b0d9deb.js","assets/GeometryUtils-53652037.js","assets/LayerView2D-787b9454.js","assets/LayerView-4221c2d8.js"])),wcs:()=>cn().then(()=>q(()=>import("./ImageryTileLayerView2D-d32b806b.js"),["assets/ImageryTileLayerView2D-d32b806b.js","assets/multidimensionalUtils-f533527a.js","assets/RasterVFDisplayObject-336edfa5.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/dataUtils-40d36dc7.js","assets/pixelRangeUtils-03719dd8.js","assets/WGLContainer-e90e6675.js","assets/definitions-19bfb61c.js","assets/vec4f32-0d1b2306.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/earcut-61f7b102.js","assets/LayerView2D-787b9454.js","assets/rasterUtils-419b3d78.js","assets/TiledDisplayObject-26b1cc81.js","assets/TileContainer-8b8c2da9.js","assets/RawBlockCache-172936cc.js","assets/rasterProjectionHelper-1604863e.js","assets/util-2b8216a2.js","assets/popupUtils-3c058107.js","assets/LayerView-4221c2d8.js","assets/RefreshableLayerView-68c78c99.js"])),"web-tile":px,wfs:dv,wms:()=>cn().then(()=>q(()=>import("./WMSLayerView2D-88c7b484.js"),["assets/WMSLayerView2D-88c7b484.js","assets/BitmapContainer-4e82b81c.js","assets/WGLContainer-e90e6675.js","assets/definitions-19bfb61c.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/earcut-61f7b102.js","assets/LayerView2D-787b9454.js","assets/ExportStrategy-c09f46a8.js","assets/Bitmap-e3f97eba.js","assets/LayerView-4221c2d8.js","assets/RefreshableLayerView-68c78c99.js","assets/ExportWMSImageParameters-c8390671.js"])),wmts:()=>cn().then(()=>q(()=>import("./WMTSLayerView2D-7fed5616.js"),["assets/WMTSLayerView2D-7fed5616.js","assets/imageUtils-e4367a08.js","assets/BitmapTileContainer-7aa7d9b0.js","assets/Bitmap-e3f97eba.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/definitions-19bfb61c.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/TiledDisplayObject-26b1cc81.js","assets/WGLContainer-e90e6675.js","assets/VertexArrayObject-867c589c.js","assets/VertexElementDescriptor-2925c6af.js","assets/vec4f32-0d1b2306.js","assets/color-6785f00e.js","assets/enums-55085e26.js","assets/number-b10bd8f5.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/alignmentUtils-ae955d28.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/TileContainer-8b8c2da9.js","assets/LayerView2D-787b9454.js","assets/LayerView-4221c2d8.js","assets/RefreshableLayerView-68c78c99.js"])),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function fqe(t){const e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new N(`${i}:view-not-supported`,`${e} is not supported in 2D`)}const dX={hasLayerViewModule:t=>A(uX[t.type]),importLayerView:t=>{const e=uX[t.type];if(U(e))throw fqe(t);return e(t)}};function mqe(t,e){const{spatialReference:i}=e,n=[e.x,e.y];let r=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(const u of l)for(let h=0;h<u.length-1;h++){bke(a,n,u,h);const p=U0(n,a);p<r&&(r=p,s=a[0],o=a[1])}return{coordinate:new Ve({x:s,y:o,spatialReference:i}),distance:r}}var JV;let wy=JV=class extends l9(_e){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(U(this.geometry)||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Hu(this.geometry,this.spatialReference)}catch(t){return se.getLogger(this.declaredClass).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(U(this.normalizedGeometry))return t;const i=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?LP(this.normalizedGeometry,i):joe(this.normalizedGeometry,i))return t;const{coordinate:n}=mqe(this.normalizedGeometry,i);return n&&(t.targetGeometry=n),t}clone(){var t,e;return new JV({geometry:(t=this.geometry)==null?void 0:t.clone(),spatialReference:(e=this.spatialReference)==null?void 0:e.clone()})}};c([d({constructOnly:!0})],wy.prototype,"geometry",void 0),c([d({readOnly:!0})],wy.prototype,"normalizedGeometry",null),c([d({constructOnly:!0})],wy.prototype,"spatialReference",void 0),wy=JV=c([O("esri.views.2d.constraints.GeometryConstraint")],wy);var YV;let jS=YV=class extends l9(_e){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new YV({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([d()],jS.prototype,"enabled",void 0),c([d()],jS.prototype,"rotationEnabled",void 0),jS=YV=c([O("esri.views.2d.constraints.RotationConstraint")],jS);const Hme=jS;var ZV;let fo=ZV=class extends l9(_e){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:i,maxScale:n,minZoom:r,maxZoom:s}=this,o=-1,a=-1,l=!1,u=!1;if(i!==0&&n!==0&&i<n&&([i,n]=[n,i]),!e||!e.length)return this._set("effectiveMinScale",i),void this._set("effectiveMaxScale",n);e=e.map(h=>h.clone()),e.sort((h,p)=>p.scale-h.scale),e.forEach((h,p)=>h.level=p);for(const h of e)!l&&i>0&&i>=h.scale&&(o=h.level,l=!0),!u&&n>0&&n>=h.scale&&(a=t?t.level:-1,u=!0),t=h;r===-1&&(r=i===0?0:o),s===-1&&(s=n===0?e.length-1:a),r=Math.max(r,0),r=Math.min(r,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),r>s&&([r,s]=[s,r]),i=e[r].scale,n=e[s].scale,e.splice(0,r),e.splice(s-r+1,e.length),e.forEach((h,p)=>{this._lodByScale[h.scale]=h,this._scales[p]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",r),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",i),this._set("effectiveMaxScale",n)}constrain(t,e){if(e&&t.scale===e.scale)return t;const i=this.effectiveMinScale,n=this.effectiveMaxScale,r=t.targetGeometry,s=e&&e.targetGeometry,o=n!==0&&t.scale<n,a=i!==0&&t.scale>i;if(o||a){const l=a?i:n;if(e&&s){const u=(l-e.scale)/(t.scale-e.scale);r.x=s.x+(r.x-s.x)*u,r.y=s.y+(r.y-s.y)*u}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);const e=this.scaleToZoom(t.scale),i=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(i>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);const e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];const i=Math.round(t-.5),n=Math.round(t);return e[n]+(n-t)*(e[i]-e[n])}scaleToZoom(t){if(!this.effectiveLODs)return-1;const e=this._scales;let i,n;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let r=0;r<e.length-1;r++){if(i=e[r],n=e[r+1],n===t)return r+this.effectiveMinZoom+1;if(i>t&&n<t)return r+this.effectiveMinZoom+1-(t-n)/(i-n)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;const e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;const i=Math.round(this.scaleToZoom(t));return this.zoomToScale(i-1)}clone(){return new ZV({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,i)=>Math.abs(i-t)<=Math.abs(e-t)?i:e,this._scales[0])),this._lodByScale[t].scale}};c([d({readOnly:!0})],fo.prototype,"effectiveLODs",void 0),c([d({readOnly:!0})],fo.prototype,"effectiveMinZoom",void 0),c([d({readOnly:!0})],fo.prototype,"effectiveMaxZoom",void 0),c([d({readOnly:!0})],fo.prototype,"effectiveMinScale",void 0),c([d({readOnly:!0})],fo.prototype,"effectiveMaxScale",void 0),c([d()],fo.prototype,"lods",void 0),c([d()],fo.prototype,"minZoom",void 0),c([d()],fo.prototype,"maxZoom",void 0),c([d()],fo.prototype,"minScale",void 0),c([d()],fo.prototype,"maxScale",void 0),c([d()],fo.prototype,"snapToZoom",void 0),fo=ZV=c([O("esri.views.2d.constraints.ZoomConstraint")],fo);const Gme=fo,gqe={base:null,key:"type",typeMap:{extent:Dt,polygon:Ws}};let on=class extends _e{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){var e,i,n;return`${(e=this._zoom)==null?void 0:e.uid}/${(i=this._rotation)==null?void 0:i.uid}/${(n=this._geometry)==null?void 0:n.uid}`}get _defaultLODs(){var n,r,s;const e=(r=(n=this.view)==null?void 0:n.defaultsFromMap)==null?void 0:r.tileInfo,i=(s=this.view)==null?void 0:s.spatialReference;return e&&i&&e.spatialReference.equals(i)?e.lods:null}get _geometry(){var e;return new wy({geometry:this.geometry,spatialReference:(e=this.view)==null?void 0:e.spatialReference})}get _rotation(){return new Hme({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),i=this.lods||this._defaultLODs,n=this.minZoom,r=this.maxZoom,s=this.minScale,o=this.maxScale,a=this.snapToZoom;return e&&e.lods===i&&e.minZoom===n&&e.maxZoom===r&&e.minScale===s&&e.maxScale===o&&e.snapToZoom===a?e:new Gme({lods:i,minZoom:n,maxZoom:r,minScale:s,maxScale:o,snapToZoom:a})}canZoomInTo(e){const i=this.effectiveMaxScale;return i===0||e>=i}canZoomOutTo(e){const i=this.effectiveMinScale;return i===0||e<=i}constrain(e,i){return this._zoom.constrain(e,i),this._rotation.constrain(e,i),this._geometry.constrain(e,i),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};c([d({readOnly:!0})],on.prototype,"effectiveLODs",null),c([d({readOnly:!0})],on.prototype,"effectiveMinScale",null),c([d({readOnly:!0})],on.prototype,"effectiveMaxScale",null),c([d({readOnly:!0})],on.prototype,"effectiveMinZoom",null),c([d({readOnly:!0})],on.prototype,"effectiveMaxZoom",null),c([d({types:gqe,value:null})],on.prototype,"geometry",null),c([d({type:[lf]})],on.prototype,"lods",void 0),c([d()],on.prototype,"minScale",void 0),c([d()],on.prototype,"maxScale",void 0),c([d()],on.prototype,"minZoom",void 0),c([d()],on.prototype,"maxZoom",void 0),c([d()],on.prototype,"rotationEnabled",void 0),c([d()],on.prototype,"snapToZoom",void 0),c([d()],on.prototype,"view",void 0),c([d({readOnly:!0})],on.prototype,"version",null),c([d()],on.prototype,"_defaultLODs",null),c([d({type:wy})],on.prototype,"_geometry",null),c([d({type:Hme})],on.prototype,"_rotation",null),c([d({readOnly:!0,type:Gme})],on.prototype,"_zoom",null),on=c([O("esri.views.2d.MapViewConstraints")],on);const qme=on;function yqe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function vqe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Wme(t,e,i,n,r,s,o,a,l,u){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=s,t[5]=o,t[6]=a,t[7]=l,t[8]=u,t}function Jme(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function bqe(t,e){if(t===e){const i=e[1],n=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=i,t[5]=e[7],t[6]=n,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function _qe(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=h*o-a*u,f=-h*s+a*l,g=u*s-o*l;let v=i*p+n*f+r*g;return v?(v=1/v,t[0]=p*v,t[1]=(-h*n+r*u)*v,t[2]=(a*n-r*o)*v,t[3]=f*v,t[4]=(h*i-r*l)*v,t[5]=(-a*i+r*s)*v,t[6]=g*v,t[7]=(-u*i+n*l)*v,t[8]=(o*i-n*s)*v,t):null}function wqe(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return t[0]=o*h-a*u,t[1]=r*u-n*h,t[2]=n*a-r*o,t[3]=a*l-s*h,t[4]=i*h-r*l,t[5]=r*s-i*a,t[6]=s*u-o*l,t[7]=n*l-i*u,t[8]=i*o-n*s,t}function xqe(t){const e=t[0],i=t[1],n=t[2],r=t[3],s=t[4],o=t[5],a=t[6],l=t[7],u=t[8];return e*(u*s-o*l)+i*(-u*r+o*a)+n*(l*r-s*a)}function w7(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=e[8],f=i[0],g=i[1],v=i[2],b=i[3],_=i[4],w=i[5],S=i[6],C=i[7],$=i[8];return t[0]=f*n+g*o+v*u,t[1]=f*r+g*a+v*h,t[2]=f*s+g*l+v*p,t[3]=b*n+_*o+w*u,t[4]=b*r+_*a+w*h,t[5]=b*s+_*l+w*p,t[6]=S*n+C*o+$*u,t[7]=S*r+C*a+$*h,t[8]=S*s+C*l+$*p,t}function KV(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=e[8],f=i[0],g=i[1];return t[0]=n,t[1]=r,t[2]=s,t[3]=o,t[4]=a,t[5]=l,t[6]=f*n+g*o+u,t[7]=f*r+g*a+h,t[8]=f*s+g*l+p,t}function Yme(t,e,i){const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5],u=e[6],h=e[7],p=e[8],f=Math.sin(i),g=Math.cos(i);return t[0]=g*n+f*o,t[1]=g*r+f*a,t[2]=g*s+f*l,t[3]=g*o-f*n,t[4]=g*a-f*r,t[5]=g*l-f*s,t[6]=u,t[7]=h,t[8]=p,t}function Sqe(t,e,i){const n=i[0],r=i[1],s=i[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=s*e[6],t[7]=s*e[7],t[8]=s*e[8],t}function Eqe(t,e,i){const n=i[0],r=i[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t}function Cqe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Iqe(t,e){const i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=-i,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Tqe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function kqe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function $qe(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=i+i,a=n+n,l=r+r,u=i*o,h=n*o,p=n*a,f=r*o,g=r*a,v=r*l,b=s*o,_=s*a,w=s*l;return t[0]=1-p-v,t[3]=h-w,t[6]=f+_,t[1]=h+w,t[4]=1-u-v,t[7]=g-b,t[2]=f-_,t[5]=g+b,t[8]=1-u-p,t}function Aqe(t,e){const i=e[0],n=e[1],r=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],h=e[10],p=h*o-a*u,f=-h*s+a*l,g=u*s-o*l,v=i*p+n*f+r*g;if(!v)return null;const b=1/v;return t[0]=p*b,t[1]=(-h*n+r*u)*b,t[2]=(a*n-r*o)*b,t[3]=f*b,t[4]=(h*i-r*l)*b,t[5]=(-a*i+r*s)*b,t[6]=g*b,t[7]=(-u*i+n*l)*b,t[8]=(o*i-n*s)*b,t}function Mqe(t,e){const i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],p=e[9],f=e[10],g=e[11],v=e[12],b=e[13],_=e[14],w=e[15],S=i*a-n*o,C=i*l-r*o,$=i*u-s*o,M=n*l-r*a,P=n*u-s*a,k=r*u-s*l,D=h*b-p*v,z=h*_-f*v,B=h*w-g*v,j=p*_-f*b,K=p*w-g*b,ie=f*w-g*_;let te=S*ie-C*K+$*j+M*B-P*z+k*D;return te?(te=1/te,t[0]=(a*ie-l*K+u*j)*te,t[1]=(l*B-o*ie-u*z)*te,t[2]=(o*K-a*B+u*D)*te,t[3]=(r*K-n*ie-s*j)*te,t[4]=(i*ie-r*B+s*z)*te,t[5]=(n*B-i*K-s*D)*te,t[6]=(b*k-_*P+w*M)*te,t[7]=(_*$-v*k-w*C)*te,t[8]=(v*P-b*$+w*S)*te,t):null}function Oqe(t,e,i){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Pqe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Rqe(t){return Math.sqrt(t[0]**2+t[1]**2+t[2]**2+t[3]**2+t[4]**2+t[5]**2+t[6]**2+t[7]**2+t[8]**2)}function Lqe(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t}function Zme(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t}function Dqe(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t}function Fqe(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t}function Nqe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function zqe(t,e){const i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],p=e[0],f=e[1],g=e[2],v=e[3],b=e[4],_=e[5],w=e[6],S=e[7],C=e[8],$=Ra();return Math.abs(i-p)<=$*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(n-f)<=$*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-g)<=$*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(s-v)<=$*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(o-b)<=$*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-_)<=$*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(l-w)<=$*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-S)<=$*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(h-C)<=$*Math.max(1,Math.abs(h),Math.abs(C))}function jqe(t){const e=Ra(),i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8];return Math.abs(1-(i*i+s*s+l*l))<=e&&Math.abs(1-(n*n+o*o+u*u))<=e&&Math.abs(1-(r*r+a*a+h*h))<=e}const Vqe=w7,Uqe=Zme;Object.freeze(Object.defineProperty({__proto__:null,add:Lqe,adjoint:wqe,copy:vqe,determinant:xqe,equals:zqe,exactEquals:Nqe,frob:Rqe,fromMat2d:kqe,fromMat4:yqe,fromQuat:$qe,fromRotation:Iqe,fromScaling:Tqe,fromTranslation:Cqe,identity:Jme,invert:_qe,isOrthoNormal:jqe,mul:Vqe,multiply:w7,multiplyScalar:Dqe,multiplyScalarAndAdd:Fqe,normalFromMat4:Mqe,normalFromMat4Legacy:Aqe,projection:Oqe,rotate:Yme,scale:Sqe,scaleByVec2:Eqe,set:Wme,str:Pqe,sub:Uqe,subtract:Zme,translate:KV,transpose:bqe},Symbol.toStringTag,{value:"Module"}));function uA(){const t=new Float32Array(9);return t[0]=1,t[4]=1,t[8]=1,t}function Bqe(t){const e=new Float32Array(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Hqe(t,e,i,n,r,s,o,a,l){const u=new Float32Array(9);return u[0]=t,u[1]=e,u[2]=i,u[3]=n,u[4]=r,u[5]=s,u[6]=o,u[7]=a,u[8]=l,u}function Gqe(t,e){return new Float32Array(t,e,9)}Object.freeze(Object.defineProperty({__proto__:null,clone:Bqe,create:uA,createView:Gqe,fromValues:Hqe},Symbol.toStringTag,{value:"Module"}));function Kme(){return new Float32Array(2)}function qqe(t){const e=new Float32Array(2);return e[0]=t[0],e[1]=t[1],e}function Ew(t,e){const i=new Float32Array(2);return i[0]=t,i[1]=e,i}function Wqe(t,e){return new Float32Array(t,e,2)}function Xme(){return Kme()}function Qme(){return Ew(1,1)}function ege(){return Ew(1,0)}function tge(){return Ew(0,1)}const Jqe=Xme(),Yqe=Qme(),Zqe=ege(),Kqe=tge();Object.freeze(Object.defineProperty({__proto__:null,ONES:Yqe,UNIT_X:Zqe,UNIT_Y:Kqe,ZEROS:Jqe,clone:qqe,create:Kme,createView:Wqe,fromValues:Ew,ones:Qme,unitX:ege,unitY:tge,zeros:Xme},Symbol.toStringTag,{value:"Module"}));function Xqe(t){return t instanceof Float32Array&&t.length>=2}function Qqe(t){return Array.isArray(t)&&t.length>=2}function gF(t){return Xqe(t)||Qqe(t)}var XV;const ud=[0,0];let jp=XV=class extends Y{constructor(t){super(t),this._viewpoint2D={center:Ct(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Dt,this.id=0,this.inverseTransform=Zf(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Zf(),this.transformNoRotation=Zf(),this.displayMat3=uA(),this.displayViewMat3=uA(),this.viewMat3=uA(),this.viewMat2d=pO(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){const e=this._viewpoint2D,i=t.targetGeometry;e.center[0]=i.x,e.center[1]=i.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=i.spatialReference}this._update()}copy(t){const e=this.size,i=this.viewpoint;return i&&e?(this.viewpoint=Uc(i,t.viewpoint),this._set("size",ZC(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new XV({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,i){return gF(e)?ku(t,e,this.inverseTransform):(ud[0]=e,ud[1]=i,ku(t,ud,this.inverseTransform))}toScreen(t,e,i){return gF(e)?ku(t,e,this.transform):(ud[0]=e,ud[1]=i,ku(t,ud,this.transform))}toScreenNoRotation(t,e,i){return gF(e)?ku(t,e,this.transformNoRotation):(ud[0]=e,ud[1]=i,ku(t,ud,this.transformNoRotation))}getScreenTransform(t,e){const{center:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,r=this._get("size");return b7(t,i,r,e,0,n),t}_update(){const{center:t,spatialReference:e,scale:i,rotation:n}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size"),o=new Tr({targetGeometry:new Ve(t[0],t[1],e),scale:i,rotation:n});if(this._set("viewpoint",o),!s||!e||!i)return;this.resolution=g1(o),this.rotation=n,this.scale=i,this.spatialReference=e,ZC(this.center,t);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;Wme(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=Jme(this.viewMat3),h=Ew(s[0]/2,s[1]/2),p=Ew(-s[0]/2,-s[1]/2),f=d9(n);KV(u,u,h),Yme(u,u,f),KV(u,u,p),w7(this.displayViewMat3,this.displayMat3,u);const g=h7(this.viewMat2d,h);return s2(g,g,f),xw(g,g,p),ZGe(this.extent,o,s),_7(this.transform,o,s,r),d7(this.inverseTransform,this.transform),nqe(this.transformNoRotation,o,s,r),this.worldScreenWidth=sqe(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};c([d({readOnly:!0})],jp.prototype,"id",void 0),c([d({value:1,json:{write:!0}})],jp.prototype,"pixelRatio",null),c([d({json:{write:!0}})],jp.prototype,"size",null),c([d()],jp.prototype,"spatialReference",void 0),c([d({type:Tr,json:{write:!0}})],jp.prototype,"viewpoint",null),jp=XV=c([O("esri.views.2d.ViewState")],jp);const hX=jp;var QV,e6;let Zd=QV=class extends _e{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new QV({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([d()],Zd.prototype,"left",void 0),c([d()],Zd.prototype,"top",void 0),c([d()],Zd.prototype,"right",void 0),c([d()],Zd.prototype,"bottom",void 0),Zd=QV=c([O("esri.views.2d.PaddedViewState.Padding")],Zd);let db=e6=class extends hX{constructor(...t){super(...t),this.paddedViewState=new hX,this._updateContent=(()=>{const e=Ct();return()=>{const i=this._get("size"),n=this._get("padding");if(!i||!n)return;const r=this.paddedViewState;br(e,n.left+n.right,n.top+n.bottom),zn(e,i,e),ZC(r.size,e);const s=r.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(X(()=>[this.size,this.padding],()=>this._updateContent(),Bu)),this.padding=new Zd,this.size=[0,0]}set padding(t){this._set("padding",t||new Zd)}set viewpoint(t){if(t){const e=t.clone();this.paddedViewState.viewpoint=t,aqe(e,t,this._get("size"),this._get("padding"));const i=this._viewpoint2D,n=e.targetGeometry;i.center[0]=n.x,i.center[1]=n.y,i.rotation=e.rotation,i.scale=e.scale,i.spatialReference=n.spatialReference,this._update()}}clone(){return new e6({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([d()],db.prototype,"paddedViewState",void 0),c([d({type:Zd})],db.prototype,"padding",null),c([d()],db.prototype,"viewpoint",null),db=e6=c([O("esri.views.2d.PaddedViewState")],db);const eWe=db;let tWe=class{constructor(e,i){this.item=e,this.controller=i,this.promise=null}},ige=class{constructor(e){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,e.concurrency&&(this.concurrency=e.concurrency),this._queue=new PM(e.peeker),this.process=e.process;const i=e.scheduler;e.priority&&A(i)&&(this._task=i.registerTask(e.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(e){const i=this._controllers.get(e);i&&i.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(i=>e.push(i)),this._controllers.clear(),e.forEach(i=>i.abort()),this._processingItems.clear(),this._cancelNext()}forEach(e){this._deferreds.forEach((i,n)=>e(n))}get(e){const i=this._deferreds.get(e);return i?i.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(e,i){const n=this.get(e);if(n)return n;const r=new AbortController;let s=null;i&&(s=Ur(i,()=>r.abort()));const o=()=>{const h=this._processingItems.get(e);h&&h.controller.abort(),a(),u.reject(li())},a=()=>{l.remove(),A(s)&&s.remove(),this._deferreds.delete(e),this._controllers.delete(e),this._queue.remove(e),this._processingItems.delete(e),this._scheduleNext()},l=L8(r.signal,o),u=kh();return this._deferreds.set(e,u),this._controllers.set(e,r),u.promise.then(a,a),this._queue.push(e),this._scheduleNext(),u.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const e=[];this._processingItems.forEach(i=>e.push(i)),this._processingItems.clear();for(const i of e)this._queue.push(i.item),i.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());return this.clear(),e}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=Hw(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(i))}_processError(e,i){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(i))}_canProcessFulfillment(e){return!!this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e}_process(e){if(U(e))return;let i;const n=new AbortController,r=new tWe(e,n);this._processingItems.set(e,r);try{i=this.process(e,n.signal)}catch(s){this._processError(r,s)}zh(i)?(r.promise=i,i.then(s=>this._processResult(r,s),s=>this._processError(r,s))):this._processResult(r,i)}get test(){return{update:e=>this.runTask(e)}}};function iWe(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const yF=new Set,GT=[],hv=new Map,pX=[0,0];let ap=class extends _e{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i}=this;this._queue=new ige({concurrency:e,process:(n,r)=>{const s=this._keyToItem.get(n);return i(s,{signal:r})},peeker:n=>n.values().next().value})}destroy(){this.clear(),this._queue=si(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e,i){const n=e.key.id+"-"+i;if(this.has(n))return this.get(n);const r=this._queue.push(n),s=()=>{this._keyToItem.delete(n),this.notifyChange("updating")};return this._keyToItem.set(n,e),r.then(s,s),this.notifyChange("updating"),r}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(h=>{const p=this._keyToItem.get(h),f=this.tileInfoView.getTileScale(p.key);hv.has(f)||(hv.set(f,[]),n=Math.max(f,n),r=Math.min(f,r)),hv.get(f).push(p.key),yF.add(f)});let s=this.state.scale;hv.has(s)||(iWe(GT,yF),GT.sort((h,p)=>h-p),s=GT.reduce((h,p)=>Math.abs(p-s)<Math.abs(h-s)?p:h,GT[0])),s=Math.min(s,n),s=Math.max(s,r);const o=hv.get(s),a=i.getClosestInfoForScale(s),l=a.getColumnForX(this.state.center[0]),u=a.getRowForY(this.state.center[1]);return o.sort((h,p)=>{const f=a.denormalizeCol(h.col,h.world),g=a.denormalizeCol(p.col,p.world);return Math.sqrt((l-f)*(l-f)+(u-h.row)*(u-h.row))-Math.sqrt((l-g)*(l-g)+(u-p.row)*(u-p.row))}),yF.clear(),hv.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,n=this.state.center;let r,s=Number.POSITIVE_INFINITY;return e.forEach(o=>{const a=this._keyToItem.get(o);i.getTileCoords(pX,a.key);const l=U0(pX,n);l<s&&(s=l,r=a.key)}),r.id}};c([d({constructOnly:!0})],ap.prototype,"concurrency",void 0),c([d({constructOnly:!0})],ap.prototype,"process",void 0),c([d()],ap.prototype,"state",void 0),c([d({constructOnly:!0})],ap.prototype,"strategy",void 0),c([d({constructOnly:!0})],ap.prototype,"tileInfoView",void 0),c([d({readOnly:!0})],ap.prototype,"updating",null),ap=c([O("esri.views.2d.tiling.PagedTileQueue")],ap);let $0=class Zg{static getId(e,i,n,r){return typeof e=="object"?`${e.level}/${e.row}/${e.col}/${e.world}`:`${e}/${i}/${n}/${r}`}constructor(e,i,n,r){this.set(e,i,n,r)}get key(){return this}get id(){return this.toString()}set id(e){this.set(e)}get hash(){const e=4095&this.row,i=4095&this.col,n=63&this.level;return(3&this.world)<<30|i<<22|e<<8|n}acquire(e,i,n,r){this.set(e,i,n,r)}contains(e){const i=e.level-this.level;return i>=0&&this.row===e.row>>i&&this.col===e.col>>i&&this.world===e.world}equals(e){return this.level===e.level&&this.row===e.row&&this.col===e.col&&this.world===e.world}clone(){return new Zg(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(e,i,n,r){if(e==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof e=="object")this.level=e.level||0,this.row=e.row||0,this.col=e.col||0,this.world=e.world||0;else if(typeof e=="string"){const[s,o,a,l]=e.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+e,this.row=+i,this.col=+n,this.world=+r||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Zg(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const e=this.level+1,i=this.row<<1,n=this.col<<1,r=this.world;return[new Zg(e,i,n,r),new Zg(e,i,n+1,r),new Zg(e,i+1,n,r),new Zg(e,i+1,n+1,r)]}compareRowMajor(e){return this.row<e.row?-1:this.row>e.row?1:this.col<e.col?-1:this.col>e.col?1:0}};$0.pool=new _m($0,null,null,25,50);function lp(t,e){return[t,e]}function Xm(t,e,i){return t[0]=e,t[1]=i,t}function nWe(t,e,i,n,r){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t}const Dl=new $0("0/0/0/0");let rWe=class nge{static create(e,i,n=null){const r=xa(e.spatialReference),s=i.origin||lp(e.origin.x,e.origin.y),o=lp(e.size[0]*i.resolution,e.size[1]*i.resolution),a=lp(-1/0,-1/0),l=lp(1/0,1/0),u=lp(1/0,1/0);A(n)&&(Xm(a,Math.max(0,Math.floor((n.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-n.ymax)/o[1]))),Xm(l,Math.max(0,Math.floor((n.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-n.ymin)/o[1]))),Xm(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:p}=i;let f,g,v,b;return!n&&h&&p&&(Xm(a,h[0],p[0]),Xm(l,h[1],p[1]),Xm(u,h[1]-h[0]+1,p[1]-p[0]+1)),e.isWrappable?(f=lp(Math.ceil(Math.round((r.valid[1]-r.valid[0])/i.resolution)/e.size[0]),u[1]),g=lp(Math.floor((r.origin[0]-s[0])/o[0]),a[1]),v=lp(f[0]+g[0]-1,l[1]),b=!0):(g=a,v=l,f=u,b=!1),new nge(i.level,i.resolution,i.scale,s,a,l,u,o,g,v,f,b)}constructor(e,i,n,r,s,o,a,l,u,h,p,f){this.level=e,this.resolution=i,this.scale=n,this.origin=r,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldStart=u,this.worldEnd=h,this.worldSize=p,this.wrap=f}normalizeCol(e){if(!this.wrap)return e;const i=this.worldSize[0];return e<0?i-1-Math.abs((e+1)%i):e%i}denormalizeCol(e,i){return this.wrap?this.worldSize[0]*i+e:e}getWorldForColumn(e){return this.wrap?Math.floor(e/this.worldSize[0]):0}getFirstColumnForWorld(e){return e*this.worldSize[0]+this.first[0]}getLastColumnForWorld(e){return e*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(e){return(e-this.origin[0])/this.norm[0]}getXForColumn(e){return this.origin[0]+e*this.norm[0]}getRowForY(e){return(this.origin[1]-e)/this.norm[1]}getYForRow(e){return this.origin[1]-e*this.norm[1]}getTileBounds(e,i,n=!1){Dl.set(i);const r=n?Dl.col:this.denormalizeCol(Dl.col,Dl.world),s=Dl.row;return nWe(e,this.getXForColumn(r),this.getYForRow(s+1),this.getXForColumn(r+1),this.getYForRow(s)),e}getTileCoords(e,i,n=!1){Dl.set(i);const r=n?Dl.col:this.denormalizeCol(Dl.col,Dl.world);return Array.isArray(e)?Xm(e,this.getXForColumn(r),this.getYForRow(Dl.row)):(e.x=this.getXForColumn(r),e.y=this.getYForRow(Dl.row)),e}},Cw=class{constructor(){this.spans=[]}acquire(e){this.lodInfo=e}release(){this.lodInfo=null,this.spans.length=0}forEach(e,i){const{spans:n,lodInfo:r}=this,{level:s}=r;if(n.length!==0)for(const{row:o,colFrom:a,colTo:l}of n)for(let u=a;u<=l;u++)e.call(i,s,o,r.normalizeCol(u),r.getWorldForColumn(u))}};Cw.pool=new _m(Cw);let vF=class{constructor(e,i,n){this.row=e,this.colFrom=i,this.colTo=n}};const xi=new $0("0/0/0/0");let sWe=class rge{static create(e,i){e[1]>i[1]&&([e,i]=[i,e]);const[n,r]=e,[s,o]=i,a=s-n,l=o-r,u=l!==0?a/l:0,h=(Math.ceil(r)-r)*u,p=(Math.floor(r)-r)*u;return new rge(n,Math.floor(r),Math.ceil(o),u,a<0?h:p,a<0?p:h,a<0?s:n,a<0?n:s)}constructor(e,i,n,r,s,o,a,l){this.x=e,this.ymin=i,this.ymax=n,this.invM=r,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}};const Wo=[[0,0],[0,0],[0,0],[0,0]],oWe=1e-6;let aWe=class{constructor(e,i=null){this.tileInfo=e,this.fullExtent=i,this.scales=[],this._infoByScale={},this._infoByLevel={};const n=e.lods.slice();n.sort((s,o)=>o.scale-s.scale);const r=this._lodInfos=n.map(s=>rWe.create(e,s,i));n.forEach((s,o)=>{this._infoByLevel[s.level]=r[o],this._infoByScale[s.scale]=r[o],this.scales[o]=s.scale},this),this._wrap=e.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(e){return this._infoByLevel[typeof e=="number"?e:e.level]}getTileBounds(e,i,n=!1){xi.set(i);const r=this._infoByLevel[xi.level];return r?r.getTileBounds(e,xi,n):e}getTileCoords(e,i,n=!1){xi.set(i);const r=this._infoByLevel[xi.level];return r?r.getTileCoords(e,xi,n):e}getTileCoverage(e,i=192,n="closest"){const r=n==="closest"?this.getClosestInfoForScale(e.scale):this.getSmallestInfoForScale(e.scale),s=Cw.pool.acquire(r),o=this._wrap;let a,l,u,h=1/0,p=-1/0;const f=s.spans;Wo[0][0]=Wo[0][1]=Wo[1][1]=Wo[3][0]=-i,Wo[1][0]=Wo[2][0]=e.size[0]+i,Wo[2][1]=Wo[3][1]=e.size[1]+i;for(const _ of Wo)e.toMap(_,_),_[0]=r.getColumnForX(_[0]),_[1]=r.getRowForY(_[1]);const g=[];let v=3;for(let _=0;_<4;_++){if(Wo[_][1]===Wo[v][1]){v=_;continue}const w=sWe.create(Wo[_],Wo[v]);h=Math.min(w.ymin,h),p=Math.max(w.ymax,p),g[w.ymin]===void 0&&(g[w.ymin]=[]),g[w.ymin].push(w),v=_}if(h==null||p==null||p-h>100)return null;let b=[];for(a=h;a<p;){g[a]!=null&&(b=b.concat(g[a])),l=1/0,u=-1/0;for(let _=b.length-1;_>=0;_--){const w=b[_];l=Math.min(l,w.getLeftCol()),u=Math.max(u,w.getRightCol())}if(l=Math.floor(l),u=Math.floor(u),a>=r.first[1]&&a<=r.last[1])if(o)if(r.size[0]<r.worldSize[0]){const _=Math.floor(u/r.worldSize[0]);for(let w=Math.floor(l/r.worldSize[0]);w<=_;w++)f.push(new vF(a,Math.max(r.getFirstColumnForWorld(w),l),Math.min(r.getLastColumnForWorld(w),u)))}else f.push(new vF(a,l,u));else l>r.last[0]||u<r.first[0]||(l=Math.max(l,r.first[0]),u=Math.min(u,r.last[0]),f.push(new vF(a,l,u)));a+=1;for(let _=b.length-1;_>=0;_--){const w=b[_];w.ymax>=a?w.incrRow():b.splice(_,1)}}return s}getTileParentId(e){xi.set(e);const i=this._infoByLevel[xi.level],n=this._lodInfos.indexOf(i)-1;return n<0?null:(this._getTileIdAtLOD(xi,this._lodInfos[n],xi),xi.id)}getTileResolution(e){const i=this._infoByLevel[typeof e=="object"?e.level:e];return i?i.resolution:-1}getTileScale(e){const i=this._infoByLevel[e.level];return i?i.scale:-1}intersects(e,i){xi.set(i);const n=this._infoByLevel[xi.level],r=e.lodInfo;if(r.resolution>n.resolution){this._getTileIdAtLOD(xi,r,xi);const o=r.denormalizeCol(xi.col,xi.world);for(const a of e.spans)if(a.row===xi.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(r.resolution<n.resolution){const[o,a,l,u]=e.spans.reduce((b,_)=>(b[0]=Math.min(b[0],_.row),b[1]=Math.max(b[1],_.row),b[2]=Math.min(b[2],_.colFrom),b[3]=Math.max(b[3],_.colTo),b),[1/0,-1/0,1/0,-1/0]),h=n.denormalizeCol(xi.col,xi.world),p=r.getColumnForX(n.getXForColumn(h)),f=r.getRowForY(n.getYForRow(xi.row)),g=r.getColumnForX(n.getXForColumn(h+1))-1,v=r.getRowForY(n.getYForRow(xi.row+1))-1;return!(p>u||g<l||f>a||v<o)}const s=r.denormalizeCol(xi.col,xi.world);return e.spans.some(o=>o.row===xi.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(e,i,n){if(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],this._wrap){const r=xa(this.tileInfo.spatialReference),s=-n*(r.valid[1]-r.valid[0]);e[0]+=s,e[2]+=s}return e}getSmallestInfoForScale(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e];if(e>i[0])return this._infoByScale[i[0]];for(let n=1;n<i.length-1;n++)if(e>i[n]+oWe)return this._infoByScale[i[n-1]];return this._infoByScale[i[i.length-1]]}getClosestInfoForScale(e){const i=this.scales;return this._infoByScale[e]||(e=i.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n,i[0])),this._infoByScale[e]}scaleToLevel(e){const i=this.scales;if(this._infoByScale[e])return this._infoByScale[e].level;for(let n=i.length-1;n>=0;n--)if(e<i[n])return n===i.length-1?this._infoByScale[i[i.length-1]].level:this._infoByScale[i[n]].level+(i[n]-e)/(i[n]-i[n+1]);return this._infoByScale[i[0]].level}scaleToZoom(e){return this.tileInfo.scaleToZoom(e)}_getTileIdAtLOD(e,i,n){const r=this._infoByLevel[n.level];return e.set(n),i.resolution<r.resolution?null:(i.resolution===r.resolution||(e.level=i.level,e.col=Math.floor(n.col*r.resolution/i.resolution+.01),e.row=Math.floor(n.row*r.resolution/i.resolution+.01)),e)}};function lWe(t,e){return t.length=0,e.forEach(i=>t.push(i)),t}const bF=new Set,qT=[],pv=new Map,fX=[0,0];let Dd=class extends _e{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:i,strategy:n}=this;this._queue=new ige({concurrency:e,process:(r,s)=>{const o=this._keyToItem.get(r);return i(o,{signal:s})},peeker:n==="scale-first"?r=>this._peekByScaleFirst(r):r=>this._peekByCenterFirst(r)})}destroy(){this.clear(),this._queue=si(this._queue)}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const i=typeof e=="string"?e:e.id;this._queue.abort(i)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const i=typeof e=="string"?e:e.id;return this.has(i)&&this._queue.isOngoing(i)}pause(){this._queue.pause()}push(e){const i=e.key.id;if(this._queue.has(i))return this._queue.get(i);const n=this._queue.push(i),r=()=>{this._keyToItem.delete(i),this.notifyChange("updating")};return this._keyToItem.set(i,e),n.then(r,r),this.notifyChange("updating"),n}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView;let n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;e.forEach(h=>{const p=this._keyToItem.get(h),f=this.tileInfoView.getTileScale(p.key);pv.has(f)||(pv.set(f,[]),n=Math.max(f,n),r=Math.min(f,r)),pv.get(f).push(p.key),bF.add(f)});let s=this.state.scale;pv.has(s)||(lWe(qT,bF),qT.sort((h,p)=>h-p),s=qT.reduce((h,p)=>Math.abs(p-s)<Math.abs(h-s)?p:h,qT[0])),s=Math.min(s,n),s=Math.max(s,r);const o=pv.get(s),a=i.getClosestInfoForScale(s),l=a.getColumnForX(this.state.center[0]),u=a.getRowForY(this.state.center[1]);return o.sort((h,p)=>{const f=a.denormalizeCol(h.col,h.world),g=a.denormalizeCol(p.col,p.world);return Math.sqrt((l-f)*(l-f)+(u-h.row)*(u-h.row))-Math.sqrt((l-g)*(l-g)+(u-p.row)*(u-p.row))}),bF.clear(),pv.clear(),o[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const i=this.tileInfoView,n=this.state.center;let r,s=Number.POSITIVE_INFINITY;return e.forEach(o=>{const a=this._keyToItem.get(o);i.getTileCoords(fX,a.key);const l=U0(fX,n);l<s&&(s=l,r=a.key)}),r.id}};c([d({constructOnly:!0})],Dd.prototype,"concurrency",void 0),c([d({constructOnly:!0})],Dd.prototype,"process",void 0),c([d()],Dd.prototype,"state",void 0),c([d({constructOnly:!0})],Dd.prototype,"strategy",void 0),c([d({constructOnly:!0})],Dd.prototype,"tileInfoView",void 0),c([d({readOnly:!0})],Dd.prototype,"updating",null),Dd=c([O("esri.views.2d.tiling.TileQueue")],Dd);const Nwt=Dd;let cWe=class{constructor(e,i,n){this.maxSize=e,this._tileInfoView=i,this._removedFunc=n,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(e){return this._tilePerId.has(e)}get(e){return this._tilePerId.get(e)}pop(e){const i=this._tilePerId.get(e);if(!i)return;const n=i.key.level,r=this._tileKeysPerLevel[n];mX(this._tilePerId,e);for(let s=0;s<r.length;s++)if(r[s].id===e){r.splice(s,1);break}return i.visible=!0,i}add(e){e.visible=!1;const i=e.key,n=i.id;if(this._tilePerId.has(n))return;this._tilePerId.set(n,e);const r=i.level;this._tileKeysPerLevel[r]||(this._tileKeysPerLevel[r]=[]),this._tileKeysPerLevel[r].push(i)}prune(e,i,n){let r=this._tilePerId.size;if(r<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;r>this.maxSize&&s>=0;)s!==e&&(r=this._pruneAroundCenterTile(r,i,n,s)),s--;r>this.maxSize&&(r=this._pruneAroundCenterTile(r,i,n,e))}_pruneAroundCenterTile(e,i,n,r){const s=this._tileKeysPerLevel[r];if(!s||s.length===0)return e;const{size:o,origin:a}=this._tileInfoView.tileInfo,l=n*o[0],u=n*o[1],h=[0,0],p=[0,0];for(s.sort((f,g)=>(h[0]=a.x+l*(f.col+.5),h[1]=a.y-u*(f.row+.5),p[0]=a.x+l*(g.col+.5),p[1]=a.y-u*(g.row+.5),zc(h,i)-zc(p,i)));s.length>0;){const f=s.pop();if(this._removeTile(f.id),--e===this.maxSize)break}return e}_removeTile(e){const i=this._tilePerId.get(e);this._removedFunc&&i&&this._removedFunc(i),mX(this._tilePerId,e)}};function mX(t,e){t.delete(e)}const Qm=new $0(0,0,0,0),za=new Map,fv=[],WT=[];let jwt=class{constructor(e){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.resampling=e.resampling==null||!!e.resampling,e.cachePolicy&&(this.cachePolicy=e.cachePolicy),e.coveragePolicy&&(this.coveragePolicy=e.coveragePolicy),e.buffer!=null&&(this.buffer=e.buffer),e.cacheSize&&(this._tileCache=new cWe(e.cacheSize,this.tileInfoView,i=>{this.releaseTile(i)}))}destroy(){this.tileIndex.clear()}update(e){const{resampling:i,tileIndex:n}=this,r=this.tileInfoView.getTileCoverage(e.state,this.buffer,this.coveragePolicy);if(WT.length=0,fv.length=0,za.clear(),!r)return;const{minScale:s,maxScale:o}=this.tileInfoView.tileInfo,{spans:a,lodInfo:l}=r,{level:u}=l,{scale:h,center:p,resolution:f}=e.state,g=!e.stationary&&h>this._previousScale;if(this._previousScale=h,this.tiles.length=0,!i&&(h>s||h<o))return this.tiles.length=0,za.clear(),n.forEach(w=>{this.releaseTile(w)}),n.clear(),WT.length=0,fv.length=0,za.clear(),Cw.pool.release(r),!0;n.forEach(w=>w.visible=!0);let v=0,b=0;if(a.length>0)for(const{row:w,colFrom:S,colTo:C}of a)for(let $=S;$<=C;$++){v++;const M=Qm.set(u,w,l.normalizeCol($),l.getWorldForColumn($)).id;if(n.has(M)){const P=n.get(M);P.isReady?(za.set(M,P),b++):g||this._addParentTile(M,za)}else{let P;if(this._tileCache&&this._tileCache.has(M)){if(P=this._tileCache.pop(M),this.tileIndex.set(M,P),P.isReady){za.set(M,P),b++;continue}}else P=this.acquireTile(Qm),this.tileIndex.set(M,P);g||this._addParentTile(M,za)}}const _=b===v;n.forEach((w,S)=>{if(Qm.set(S),za.has(S))return;const C=this.tileInfoView.intersects(r,Qm),$=this.cachePolicy==="purge"?Qm.level!==u:Qm.level>u;!C||!g&&_?!$&&C||fv.push(S):w.isReady?$&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Qm,u)?fv.push(S):WT.push(S):$&&fv.push(S)});for(const w of WT){const S=n.get(w);S&&S.isReady&&za.set(w,S)}for(const w of fv){const S=n.get(w);this._tileCache?this._tileCache.add(S):this.releaseTile(S),n.delete(w)}return za.forEach(w=>this.tiles.push(w)),n.forEach(w=>{za.has(w.key.id)||(w.visible=!1)}),this._tileCache&&this._tileCache.prune(u,p,f),Cw.pool.release(r),za.clear(),_}clear(e=!0){const{tileIndex:i}=this;e&&i.forEach(n=>{this.releaseTile(n)}),i.clear()}updateCacheSize(e){this._tileCache&&(this._tileCache.maxSize=e)}_addParentTile(e,i){let n=e,r=null;for(;n=this.tileInfoView.getTileParentId(n),n;)if(this.tileIndex.has(n)){if(r=this.tileIndex.get(n),r&&r.isReady){i.has(r.key.id)||i.set(r.key.id,r);break}}else if(this._tileCache&&this._tileCache.has(n)&&(r=this._tileCache.pop(n),this.tileIndex.set(n,r),r&&r.isReady)){i.has(r.key.id)||i.set(r.key.id,r);break}}_hasReadyAncestor(e,i){const n=Mh();this.tileInfoView.getTileBounds(n,e,!0);for(const r of this.tileIndex.values())if(r.isReady&&r.key.level>=i&&r.key.level<e.level){const s=Mh();if(this.tileInfoView.getTileBounds(s,r.key,!0),TMe(s,n))return!0}return!1}};function x7(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}let gX=class extends ar{constructor(e,i){super(!0),this._view=e,this.registerIncoming("double-click",i,n=>this._handleDoubleClick(n,i))}_handleDoubleClick(e,i){x7(e.data,"primary")&&(e.stopPropagation(),i?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}},uWe=class extends ar{constructor(e,i,n){super(!0),this.view=e,this.pointerType=i,this.registerIncoming("double-tap-drag",n,r=>this._handleDoubleTapDrag(r))}_handleDoubleTapDrag(e){const{data:i}=e,{pointerType:n}=i;if(n!==this.pointerType)return;e.stopPropagation();const{action:r,delta:s}=i,{view:o}=this,{mapViewNavigation:a}=o;switch(r){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,u=this._startScale*l,h=u/this._currentScale;a.setViewpointImmediate(h),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:h}=l;if(!h||!u)return void a.end();const p=l.snapScale(this._currentScale),f=(s.y>0?Math.max(p,l.snapToPreviousScale(this._startScale)):Math.min(p,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f);break}}}},UR=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){const i=e.data,n=i.pointers.size;switch(i.action){case"start":this._currentCount=n,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=n,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){var i,n;this._startEvent=e,(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){var i,n;(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){var i,n;(n=(i=this._callbacks).condition)!=null&&n.call(i,this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}},dWe=class extends ar{constructor(e,i,n){super(!0),this.view=e,this.pointerAction=i,this.registerIncoming("drag",n,r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new UR({start:(i,n)=>{this.view.mapViewNavigation.pan.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{this.view.mapViewNavigation.pan.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{this.view.mapViewNavigation.pan.end(this.view,n.data),n.stopPropagation()},condition:(i,n)=>i===1&&x7(n.data,this.pointerAction)})}_handleDrag(e){const i=this.view.mapViewNavigation;i.pinch.zoomMomentum||i.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}},hWe=class extends ar{constructor(e,i,n){super(!0),this._view=e,this.pointerAction=i;const r=this._view.mapViewNavigation;this._dragEventSeparator=new UR({start:(s,o)=>{r.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{r.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{r.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&x7(o.data,this.pointerAction)}),this.registerIncoming("drag",n,s=>this._dragEventSeparator.handle(s))}};function Fl(t){let e=t*t;return t<0&&(e*=-1),e}function pWe(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function fWe(t,e,i){const n=i,r=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(n.translation[0]=Fl(r.axes[0]),n.translation[1]=Fl(r.axes[1]),n.translation[2]=Fl(r.buttons[7])-Fl(r.buttons[6]),n.heading=Fl(r.axes[2]),n.tilt=Fl(r.axes[3])):s.deviceType==="spacemouse"&&(n.translation[0]=1.2*Fl(r.axes[0]),n.translation[1]=1.2*Fl(r.axes[1]),n.translation[2]=2*-Fl(r.axes[2]),n.heading=1.2*Fl(r.axes[5]),n.tilt=1.2*Fl(r.axes[3])),n.tilt*=o,Hae(n.translation,n.translation,a),n}function mWe(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}let gWe=class extends ar{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new wn,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",i=>this._handleGamePadEvent(i)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([X(()=>{var i;return(i=this._view.navigation.gamepad)==null?void 0:i.enabled},i=>{i?(this._handle.resume(),this._frameTask||(this._frameTask=iw({update:n=>this._frameUpdate(n.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},ut)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){const i=this._view.navigation.gamepad.device;i&&e.data.device!==i||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,pWe(this._transformation)):(this._currentDevice=e.data.device,fWe(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){const i=this._transformation;if(mWe(i))return;const n=this._view.viewpoint.clone(),r=this._view.navigation.gamepad.velocityFactor,s=vWe*r*e;VR(n,n,[i.translation[0]*s,-i.translation[1]*s]);const o=1+i.translation[2]*bWe*e,a=this._view.constraints.rotationEnabled?-i.heading*yWe*e:0,l=this._view.size,u=[l[0]/2,l[1]];Vme(n,n,o,a,u,l);const h=this._view.constraints.constrain(n,this._view.viewpoint);this._view.viewpoint=h}};const yWe=.06,vWe=.7,bWe=6e-4;let _We=class extends ar{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyMap={[i.left]:"left",[i.right]:"right",[i.up]:"up",[i.down]:"down"},this.registerIncoming("key-down",n,r=>this._handleKeyDown(r)),this.registerIncoming("key-up",n,r=>this._handleKeyUp(r)),this.registerIncoming("blur",n,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const n=this._keyMap[e.data.key];if(this._pressed=n!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),n){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}},wWe=class extends ar{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._pressed=!1,this._keyToDirection={[i.clockwiseOption1]:"clockwise",[i.clockwiseOption2]:"clockwise",[i.counterClockwiseOption1]:"counterClockwise",[i.counterClockwiseOption2]:"counterClockwise",[i.resetOption1]:"reset",[i.resetOption2]:"reset"},this.registerIncoming("key-down",n,r=>this._handleKeyDown(r)),this.registerIncoming("key-up",n,r=>this._handleKeyUp(r)),this.registerIncoming("blur",n,()=>this._handleBlur())}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,i){const n=e.modifiers;if(n.size>0&&!n.has("Shift")||!this.view.constraints.rotationEnabled)return;const r=this._keyToDirection[e.data.key];if(this._pressed=r!=null,this._pressed){if(i)switch(this.view.mapViewNavigation.begin(),r){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var u_;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(u_||(u_={}));let xWe=class extends ar{constructor(e,i,n){super(!0),this.view=e,this.keys=i,this._keysToZoomAction={},this.registerIncoming("key-down",n,r=>this._handleKeyDown(r)),i.zoomIn.forEach(r=>this._keysToZoomAction[r]=u_.IN),i.zoomOut.forEach(r=>this._keysToZoomAction[r]=u_.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){const i=e.modifiers;if(i.size>0&&!i.has("Shift"))return;const{key:n}=e.data;if(!(n in this._keysToZoomAction))return;const r=this._keysToZoomAction[n],{mapViewNavigation:s}=this.view;let o=null;switch(r){case u_.IN:o=s.zoomIn();break;case u_.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};const SWe=.6;let EWe=class extends ar{constructor(e,i){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",i,n=>this._handleMouseWheel(n))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;const i=this._view.mapViewNavigation,{x:n,y:r,deltaY:s}=e.data,o=1/SWe**(1/60*s),a=i.zoom(o,[n,r]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,i.end()}))}},CWe=class extends ar{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",n=>this._handleDrag(n)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const i=this.view.mapViewNavigation;this._dragEventSeparator=new UR({start:(n,r)=>{i.pinch.begin(this.view,r.data),r.stopPropagation()},update:(n,r)=>{i.pinch.update(this.view,r.data),r.stopPropagation()},end:(n,r)=>{i.pinch.end(this.view),r.stopPropagation()},condition:n=>n>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function yX(t){const e=t.native;return e?{buttons:e.buttons.map(i=>i.pressed?i.value?i.value:1:0),axes:e.axes.map(i=>kWe(i,t.axisThreshold))}:{buttons:[],axes:[]}}function IWe(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let i=0;i<t.axes.length;i++)if(t.axes[i]!==e.axes[i])return!1;for(let i=0;i<t.buttons.length;i++)if(t.buttons[i]!==e.buttons[i])return!1;return!0}function TWe(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function kWe(t,e){const i=Math.abs(t);return i<e?0:Math.sign(t)*(i-e)/(1-e)}let $We=class{constructor(e,i){this._element=e,this._input=i,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,yX(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;const n="getGamepads"in window.navigator,r=window.isSecureContext;this.supported=n&&r,this.supported&&(this._forEachGamepad(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){const i=new m7(e);i.deviceType!=="unknown"&&(this._inputDevices[e.index]=i,this._input.gamepad.devices.add(i)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=iw({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){const e=document.hasFocus(),i=this._element.contains(document.activeElement),n=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!i;this._forEachGamepad(r=>{const s=this._inputDevices[r.index];if(!s)return;const o=this._latestUpdate[r.index],a=yX(s),l=n||TWe(a);o&&(o.timestamp===r.timestamp||!o.active&&l||IWe(o.state,a))||this._emitGamepadEvent(r,a,!l)})}_forEachGamepad(e){const i=window.navigator.getGamepads();for(let n=0;n<i.length;n++){const r=i[n];this._validate(r)&&e(r)}}_emitGamepadEvent(e,i,n){const r=this._latestUpdate[e.index],s=r&&r.active;if(!s&&!n)return;const o=!s&&n?"start":s&&n?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:i,active:n},this._callback&&this._callback({device:this._inputDevices[e.index],state:i,action:o})}_validate(e){if(!e||!e.connected)return!1;for(let i=0;i<e.axes.length;i++)if(isNaN(e.axes[i]))return!1;return!0}};const vX=ee("edge"),AWe=ee("chrome"),MWe=ee("ff"),OWe=ee("safari"),bX="esri-view-surface",mv={touchNone:`${bX}--touch-none`,touchPan:`${bX}--touch-pan`};let sge=class oge{constructor(e,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=e,e.getAttribute("tabindex")||e.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new $We(e,this._input),this._gamepadSource.onEvent=n=>this._callback("gamepad",n)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(e=>{this._releasePointerCaptureSafe(e)}),this._gamepadSource=si(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(e){this._browserTouchPanningEnabled=e,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(e){this._callback=e}set activeEvents(e){for(const i in this._active)if(!e||!e.has(i)){const n=this._active[i];this._element.removeEventListener(_F[i],n),delete this._active[i]}e&&e.forEach(i=>{if(!this._active[i]&&_F[i]){const n=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(_F[i],n),this._active[i]=n}}),this._gamepadSource.hasEventListeners=(e==null?void 0:e.has("gamepad"))??!1}setPointerCapture(e,i){i?(this._element.setPointerCapture(e.pointerId),this._activePointerCaptures.add(e.pointerId)):(this._releasePointerCaptureSafe(e.pointerId),this._activePointerCaptures.delete(e.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?mv.touchNone:mv.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?mv.touchPan:mv.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(mv.touchNone),this._element.classList.remove(mv.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(e){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(e))return;this._element.releasePointerCapture(e)}catch{}}_updateNormalizedPointerLikeEvent(e,i){const n=yme(this._element,e);return oge.test.disableSubpixelCoordinates&&(n.x=Math.round(n.x),n.y=Math.round(n.y)),i.x=n.x,i.y=n.y,i}_handleKey(e,i){const n=Y7e(i);n&&e==="key-up"&&this._keyDownState.delete(n);const r={native:i,key:n,repeat:!!n&&this._keyDownState.has(n)};n&&e==="key-down"&&this._keyDownState.add(r.key),this._callback(e,r)}_handlePointer(e,i){const n=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(e,n)}_handlePointerPreventDefault(e,i){const n=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(e,n)}_handleMouseWheel(e,i){let n=i.deltaY;switch(i.deltaMode){case 0:vX&&(n=n/document.documentElement.clientHeight*600);break;case 1:n*=30;break;case 2:n*=900}vX?n*=.7:AWe||OWe?n*=.6:MWe&&(n*=1.375);const r=100,s=Math.abs(n);s>r&&(n=n/s*200/(1+Math.exp(-.02*(s-r))));const o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:n});this._callback(e,o)}_handlePointerCaptureLost(e,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(e,i)}_handleDefault(e,i){const n={native:i};i.preventDefault(),this._callback(e,n)}_preventAltKeyDefault(e){e.key==="Alt"&&e.preventDefault()}_preventMultiTouchPanning(e){e.touches.length>1&&e.preventDefault()}};sge.test={disableSubpixelCoordinates:!1};const _F={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};let PWe=class extends ar{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};function S7(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function RWe(t,e){const i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}function LWe(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Nn()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){const[C,$]=t,[M,P]=[$.x-C.x,$.y-C.y];return e.radius=Math.sqrt(M*M+P*P)/2,e.center.x=(C.x+$.x)/2,e.center.y=(C.y+$.y)/2,e}let i=0,n=0;for(let C=0;C<t.length;C++)i+=t[C].x,n+=t[C].y;i/=t.length,n/=t.length;const r=t.map(C=>C.x-i),s=t.map(C=>C.y-n);let o=0,a=0,l=0,u=0,h=0,p=0,f=0;for(let C=0;C<r.length;C++){const $=r[C],M=s[C],P=$*$,k=M*M;o+=P,a+=k,l+=$*M,u+=P*$,h+=k*M,p+=$*k,f+=M*P}const g=.5*(u+p),v=.5*(h+f),b=o*a-l*l,_=(g*a-v*l)/b,w=(o*v-l*g)/b,S=Nn(_+i,w+n);return{radius:Math.sqrt(_*_+w*w+(o+a)/t.length),center:S}}function s0(t){const{native:e}=t,{pointerId:i,button:n,pointerType:r}=e;return r==="mouse"?`${i}:${n}`:`${r}`}const dl={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};let DWe=class extends ar{constructor(e=dl.maximumDoubleClickDelay,i=dl.maximumDoubleClickDistance,n=dl.maximumDoubleTouchDelay,r=dl.maximumDoubleTouchDistance,s=kI){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=r,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=bn(e.doubleClickTimer))}get hasPendingInputs(){return EI(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,i){const n=this._pointerState.get(e);n&&(n.doubleClickTimer=bn(n.doubleClickTimer),i&&this._click.emit(n.event.data,void 0,n.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){const i=this._pointerState.get(e);i.pointerDownCount===1&&this._click.emit(i.event.data,void 0,i.event.modifiers),i.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){const{pointerId:i,pointerType:n,button:r}=e.native;return n==="mouse"?`${i}:${r}`:`${n}`}_handleImmediateClick(e){const i=e.data,{pointerType:n}=i.native,r=this._getPointerId(i);if(!this._pointerState.has(r))return void this._startClick(e);const s=this._pointerState.get(r),{data:o,modifiers:a}=s.event,l=n==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;S7(o,i)>l?(this._clearDoubleClickTimer(r,!0),this._startClick(e)):(this._clearDoubleClickTimer(r,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){const i=s0(e.data),n=this._pointerState.get(i);n&&(n.pointerDownCount+=1)}_startClick(e){const{data:i}=e,{native:{pointerType:n}}=i,r=s0(i),s=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(r),s),a=1;this._pointerState.set(r,{event:e,doubleClickTimer:o,pointerDownCount:a}),this.refreshHasPendingInputs()}},FWe=class extends ar{constructor(e=dl.maximumDoubleClickDelay,i=dl.maximumDoubleClickDistance,n=dl.maximumDoubleTouchDelay,r=dl.maximumDoubleTouchDistance,s=kI){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=r,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Nn(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new UR({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=bn(e.doubleTapTimeout)})}get hasPendingInputs(){return EI(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){const i=this._pointerState.get(e);i&&(i.doubleTapTimeout=bn(i.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,i,n){const{button:r,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}=n;return{action:e,delta:i,button:r,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}}_dragStart(e,i){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:n,modifiers:r}=i,{center:s}=n;this._dragStartCenter=s;const o=this._createDoubleTapDragData("begin",Nn(0,0),n);this._doubleTapDrag.emit(o,void 0,r),i.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:n}=e,{center:r}=i,s=Nn(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,i);this._doubleTapDrag.emit(o,void 0,n),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;const{data:i,modifiers:n}=e,{center:r}=i,s=Nn(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,i);this._doubleTapDrag.emit(o,void 0,n),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){const{data:i}=e,n=s0(i),r=this._pointerState.get(n),{pointerType:s}=i.native;if(r){const o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(n),S7(r.event.data,i)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){const{data:i}=e,{pointerType:n}=i.native,r=s0(i),s=n==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(r),s);this._pointerState.set(r,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}},NWe=class extends ar{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,i,n,r){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:i.buttons,timestamp:r,pointers:zWe(this._activePointerMap),pointer:i,angle:n.angle,radius:n.radius,center:n.center}}_addPointer(e){const i=e.native.pointerId,n=JT(this._activePointerMap).angle,r={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(i,r);const s=dA(r,age(this._activePointerMap));r.initialAngle=s,r.lastAngle=s,this._updatePointerAngles(n)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;const i=e.native.pointerId,n=this._activePointerMap.get(i);n?n.event=e:this._addPointer(e)}_removePointer(e){const i=JT(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(i)}_updatePointerAngles(e){const i=JT(this._activePointerMap);this._activePointerMap.forEach(n=>{n.initialAngle=dA(n,i)-e,n.lastAngle=dA(n,i)-e})}_emitEvent(e,i,n){const r=JT(this._activePointerMap);this._drag.emit(this._createPayload(e,i,r,n),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const i=e.data.native.pointerId,n=e.timestamp;this._activePointerMap.get(i)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,n),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(i)):(this._removePointer(i),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){const i=e.data,n=i.currentEvent,r=e.timestamp;switch(i.action){case"start":case"update":this._isDragging?this._activePointerMap.has(n.native.pointerId)?(this._updatePointer(n),!this._isCurrentDragSuppressed&&this._emitEvent("update",n,r)):(this._addPointer(n),this._emitEvent("added",n,r),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(n),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",n,r))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function age(t){const e=[];return t.forEach(i=>{e.push(Nn(i.event.x,i.event.y))}),LWe(e)}function JT(t){const e=age(t);let i=0;return t.forEach(n=>{let r=dA(n,e),s=r-n.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;r=n.lastAngle+s,n.lastAngle=r;const o=r-n.initialAngle;i+=o}),i/=t.size||1,{angle:i,radius:e.radius,center:e.center}}function zWe(t){const e=new Map;return t.forEach((i,n)=>e.set(n,i.event)),e}function dA(t,e){const i=t.event,n=i.x-e.center.x,r=i.y-e.center.y;return Math.atan2(r,n)}var _X;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(_X||(_X={}));let jWe=class extends ar{constructor(e=dl.maximumDoubleClickDelay,i=dl.maximumDoubleClickDistance,n=dl.maximumDoubleTouchDelay,r=dl.maximumDoubleTouchDistance,s=kI){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=i,this._maximumDoubleTouchDelay=n,this._maximumDoubleTouchDistance=r,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){const i=e.data,n=s0(i);if(!this._pointerState.has(n)){const r={downButton:i.native.button,immediateDoubleClick:null};this._pointerState.set(n,r),this.startCapturingPointer(i.native)}}_handlePointerUp(e){const i=e.data,n=s0(i),r=this._pointerState.get(n);if(r&&r.downButton===i.native.button){const s=r.immediateDoubleClick;if(s){s.timeoutHandle.remove();const o=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;S7(s,e.data)>o?this._startImmediateDoubleClick(e,r):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(e,r)}}_startImmediateDoubleClick(e,i){const n=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;i.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),n)}}_removeState(e){const i=s0(e);this._pointerState.delete(i),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};const fx={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};let VWe=class extends ar{constructor(e=fx.maximumClickDelay,i=fx.movementUntilMouseDrag,n=fx.movementUntilPenDrag,r=fx.movementUntilTouchDrag,s=fx.holdDelay,o=kI){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=i,this._movementUntilPenDrag=n,this._movementUntilTouchDrag=r,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=bn(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){const i=e.data,n=i.native.pointerId;let r=null;this._pointerState.size===0&&(r=this._clock.setTimeout(()=>{const o=this._pointerState.get(n);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));const s={startEvent:i,previousEvent:i,startTimestamp:e.timestamp,isDragging:!1,downButton:i.native.button,holdTimeout:r,modifiers:new Set};this._pointerState.set(n,s),this.startCapturingPointer(i.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,i,n){return{action:e,startEvent:i.startEvent,previousEvent:i.previousEvent,currentEvent:n}}_handlePointerMove(e){const i=e.data,n=i.native.pointerId,r=this._pointerState.get(n);r&&(r.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",r,i),void 0,r.modifiers):RWe(i,r.startEvent)>this._getDragThreshold(i.native.pointerType)&&this._startDragging(e),r.previousEvent=i)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){const i=e.data,n=i.native.pointerId;this._pointerState.forEach(r=>{r.holdTimeout!=null&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging||(r.modifiers=e.modifiers,r.isDragging=!0,n===r.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",r,i)):this._pointerDrag.emit(this._createPointerDragData("start",r,r.previousEvent),e.timestamp))})}_handlePointerLoss(e,i){const n=e.data,r=n.native.pointerId,s=this._pointerState.get(r);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,i==="pointer-up"?n:s.previousEvent),void 0,s.modifiers):i==="pointer-up"&&s.downButton===n.native.button&&e.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(n),this._pointerState.delete(r),this.stopCapturingPointer(n.native),this._pointerState.size===0&&this._moveHandle.pause())}};const YT={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let Kg=class extends _e{constructor(){super(...arguments),this._handles=new wn}initialize(){const e=()=>{var i;return(i=this.view)==null?void 0:i.ready};this._handles.add([Ys(()=>!e(),()=>this._disconnect()),Ys(e,()=>this._connect())])}destroy(){this._handles=si(this._handles),this._disconnect()}get latestPointerType(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerType}get latestPointerLocation(){var e;return(e=this._inputManager)==null?void 0:e.latestPointerLocation}get multiTouchActive(){var e;return((e=this._inputManager)==null?void 0:e.multiTouchActive)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=si(this._inputManager)}_connect(){const e=this.view.surface,i=new sge(e,this.view.input),n=[new jWe,new VWe,new DWe,new NWe(this.view.navigation),new FWe],r=new lu({eventSource:i,recognizers:n});r.installHandlers("prevent-context-menu",[new PWe],ri.INTERNAL),r.installHandlers("navigation",[new CWe(this.view),new gWe(this.view),new EWe(this.view),new gX(this.view),new gX(this.view,[YT.counter]),new dWe(this.view,"primary"),new _We(this.view,YT.pan),new xWe(this.view,YT.zoom),new wWe(this.view,YT.rotate),new hWe(this.view,"secondary"),new uWe(this.view,"touch")],ri.INTERNAL),this.view.viewEvents.connect(r),this._source=i,this._inputManager=r,X(()=>{var s,o;return(o=(s=this.view)==null?void 0:s.navigation)==null?void 0:o.browserTouchPanEnabled},s=>{this._source&&(this._source.browserTouchPanningEnabled=!s)},ut)}get test(){return{inputManager:this._inputManager}}};c([d()],Kg.prototype,"view",void 0),c([d()],Kg.prototype,"latestPointerType",null),c([d()],Kg.prototype,"latestPointerLocation",null),c([d()],Kg.prototype,"multiTouchActive",null),Kg=c([O("esri.views.2d.input.MapViewInputManager")],Kg);const UWe=Kg;var wX,xX,SX,t6={},BWe={get exports(){return t6},set exports(t){t6=t}};wX=BWe,xX=function(){function t(r,s,o,a,l){e(r,s,o||0,a||r.length-1,l||n)}function e(r,s,o,a,l){for(;a>o;){if(a-o>600){var u=a-o+1,h=s-o+1,p=Math.log(u),f=.5*Math.exp(2*p/3),g=.5*Math.sqrt(p*f*(u-f)/u)*(h-u/2<0?-1:1);e(r,s,Math.max(o,Math.floor(s-h*f/u+g)),Math.min(a,Math.floor(s+(u-h)*f/u+g)),l)}var v=r[s],b=o,_=a;for(i(r,o,s),l(r[a],v)>0&&i(r,o,a);b<_;){for(i(r,b,_),b++,_--;l(r[b],v)<0;)b++;for(;l(r[_],v)>0;)_--}l(r[o],v)===0?i(r,o,_):i(r,++_,a),_<=s&&(o=_+1),s<=_&&(a=_-1)}}function i(r,s,o){var a=r[s];r[s]=r[o],r[o]=a}function n(r,s){return r<s?-1:r>s?1:0}return t},(SX=xX())!==void 0&&(wX.exports=SX);const HWe=t6;function _O(t,e){if(!(this instanceof _O))return new _O(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&(typeof e=="function"?this.toBBox=e:this._initFormat(e)),this.clear()}function GWe(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function gv(t,e){VS(t,0,t.children.length,e,t)}function VS(t,e,i,n,r){r||(r=hb(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var s,o=e;o<i;o++)s=t.children[o],US(r,t.leaf?n(s):s);return r}function US(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function EX(t,e){return t.minX-e.minX}function CX(t,e){return t.minY-e.minY}function wF(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function ZT(t){return t.maxX-t.minX+(t.maxY-t.minY)}function qWe(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function WWe(t,e){var i=Math.max(t.minX,e.minX),n=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,r-i)*Math.max(0,s-n)}function xF(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function KT(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function hb(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function IX(t,e,i,n,r){for(var s,o=[e,i];o.length;)(i=o.pop())-(e=o.pop())<=n||(s=e+Math.ceil((i-e)/n/2)*n,HWe(t,s,e,i,r),o.push(e,s,s,i))}_O.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!KT(t,e))return i;for(var r,s,o,a,l=[];e;){for(r=0,s=e.children.length;r<s;r++)o=e.children[r],KT(t,a=e.leaf?n(o):o)&&(e.leaf?i.push(o):xF(t,a)?this._all(o,i):l.push(o));e=l.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!KT(t,e))return!1;for(var n,r,s,o,a=[];e;){for(n=0,r=e.children.length;n<r;n++)if(s=e.children[n],KT(t,o=e.leaf?i(s):s)){if(e.leaf||xF(t,o))return!0;a.push(s)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=hb([]),this},remove:function(t,e){if(!t)return this;for(var i,n,r,s,o=this.data,a=this.toBBox(t),l=[],u=[];o||l.length;){if(o||(o=l.pop(),n=l[l.length-1],i=u.pop(),s=!0),o.leaf&&(r=GWe(t,o.children,e))!==-1)return o.children.splice(r,1),l.push(o),this._condense(l),this;s||o.leaf||!xF(o,a)?n?(i++,o=n.children[i],s=!1):o=null:(l.push(o),u.push(i),i=0,n=o,o=o.children[0])}return this},toBBox:function(t){return t},compareMinX:EX,compareMinY:CX,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var r,s=i-e+1,o=this._maxEntries;if(s<=o)return gv(r=hb(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,n-1))),(r=hb([])).leaf=!1,r.height=n;var a,l,u,h,p=Math.ceil(s/o),f=p*Math.ceil(Math.sqrt(o));for(IX(t,e,i,f,this.compareMinX),a=e;a<=i;a+=f)for(IX(t,a,u=Math.min(a+f-1,i),p,this.compareMinY),l=a;l<=u;l+=p)h=Math.min(l+p-1,u),r.children.push(this._build(t,l,h,n-1));return gv(r,this.toBBox),r},_chooseSubtree:function(t,e,i,n){for(var r,s,o,a,l,u,h,p;n.push(e),!e.leaf&&n.length-1!==i;){for(h=p=1/0,r=0,s=e.children.length;r<s;r++)l=wF(o=e.children[r]),(u=qWe(t,o)-l)<p?(p=u,h=l<h?l:h,a=o):u===p&&l<h&&(h=l,a=o);e=a||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,r=i?t:n(t),s=[],o=this._chooseSubtree(r,this.data,e,s);for(o.children.push(t),US(o,r);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(r,s,e)},_split:function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var s=this._chooseSplitIndex(i,r,n),o=hb(i.children.splice(s,i.children.length-s));o.height=i.height,o.leaf=i.leaf,gv(i,this.toBBox),gv(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(i,o)},_splitRoot:function(t,e){this.data=hb([t,e]),this.data.height=t.height+1,this.data.leaf=!1,gv(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,r,s,o,a,l,u,h;for(l=u=1/0,n=e;n<=i-e;n++)o=WWe(r=VS(t,0,n,this.toBBox),s=VS(t,n,i,this.toBBox)),a=wF(r)+wF(s),o<l?(l=o,h=n,u=a<u?a:u):o===l&&a<u&&(u=a,h=n);return h},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:EX,r=t.leaf?this.compareMinY:CX;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var r,s,o=this.toBBox,a=VS(t,0,e,o),l=VS(t,i-e,i,o),u=ZT(a)+ZT(l);for(r=e;r<i-e;r++)s=t.children[r],US(a,t.leaf?o(s):s),u+=ZT(a);for(r=i-e-1;r>=e;r--)s=t.children[r],US(l,t.leaf?o(s):s),u+=ZT(l);return u},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)US(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)t[i].children.length===0?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():gv(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}};let TX=class lge{constructor(e,i){this.key=new $0(0,0,0,0),this.bounds=Mh(),this.objectIds=new Set,this.key.set(i);const n=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=n.resolution,this.scale=n.scale,this.level=n.level}get id(){return this.key.id}get extent(){return Dt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const e=this.key.getChildKeys(),i=Bs.acquire();for(let n=0;n<e.length;n++)i[n]=new lge(this.tileInfoView,e[n]);return i}getQuantizationParameters(){return Vde.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};const eg={added:[],removed:[]},SF=new Set,JWe=new $0(0,0,0,0);let YWe=class extends $r{constructor(e){super(),this._tiles=new Map,this._index=_O(9,ee("esri-csp-restrictions")?i=>({minX:i.bounds[0],minY:i.bounds[1],maxX:i.bounds[2],maxY:i.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){const i={added:[],removed:[]};for(const n of e.added)if(!this.has(n)){const r=new TX(this.tileScheme,n);this._tiles.set(n,r),this._index.insert(r),i.added.push(r)}for(const n of e.removed)if(this.has(n)){const r=this.get(n);this._tiles.delete(n),this._index.remove(r),i.removed.push(r)}this.tiles.length=0,this._tiles.forEach(n=>this.tiles.push(n)),(i.added.length||i.removed.length)&&this.emit("update",i)}setViewState(e){const i=this.tileScheme.getTileCoverage(e,0);if(!i)return;const{spans:n,lodInfo:r}=i,{level:s}=r;if(n.length>0)for(const{row:o,colFrom:a,colTo:l}of n)for(let u=a;u<=l;u++){const h=JWe.set(s,o,r.normalizeCol(u),r.getWorldForColumn(u)).id;if(SF.add(h),!this.has(h)){const p=new TX(this.tileScheme,h);this._tiles.set(h,p),this._index.insert(p),this.tiles.push(p),eg.added.push(p)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];SF.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),eg.removed.push(a))}(eg.added.length||eg.removed.length)&&this.emit("update",eg),Cw.pool.release(i),SF.clear(),eg.added.length=0,eg.removed.length=0}},Xg=class extends _e{constructor(){super(...arguments),this.color=new Se([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}equals(e){return this.color.equals(e.color)&&(this.haloColor||this.color).equals(e.haloColor||e.color)&&this.haloOpacity===e.haloOpacity&&this.fillOpacity===e.fillOpacity}};c([d({type:Se})],Xg.prototype,"color",void 0),c([d({type:Se})],Xg.prototype,"haloColor",void 0),c([d()],Xg.prototype,"haloOpacity",void 0),c([d()],Xg.prototype,"fillOpacity",void 0),Xg=c([O("esri.views.2d.support.HighlightOptions")],Xg);const cge=Xg,ZWe=t=>t.includes("Brush");let uge=class{constructor(){this._names=new Map}begin(e){this._names.has(e)||(this._names.set(e,!1),ZWe(e)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${e}.Start`))}end(e){this._names.has(e)&&!this._names.get(e)&&(this._names.set(e,!0),performance.mark(`Esri.${e}.End`))}record(e){this._names.has(e)||(this._names.set(e,!0),performance.mark(`Esri.${e}`))}};function KWe(t,e,i,n,r,s,o,a){t.ignorePadding&&(n={left:0,right:0,top:0,bottom:0});let l=null;t.width!=null&&t.height!=null?l=[t.width,t.height]:t.width==null&&t.height!=null?l=[t.height,t.height]:t.width!=null&&t.height==null?l=[t.width,t.width]:t.width==null&&t.height==null&&(l=null);const u=i[0]-(n.left+n.right),h=i[1]-(n.top+n.bottom);let p,f,g=t.area||{x:0,y:0,width:u,height:h};if(l){const v=u/h,b=l[0]/l[1];if(b>v){const _=g.width/b;g={x:g.x,y:Math.round(g.y+(g.height-_)/2),width:g.width,height:Math.round(_)}}else{const _=g.height*b;g={x:Math.round(g.x+(g.width-_)/2),y:g.y,width:Math.round(_),height:g.height}}}else l=[g.width,g.height];return l[0]>g.width?(p=Math.min(l[0]/g.width,e),f=l[0]/g.width/p):(p=1,f=l[0]/g.width),{resolutionScale:p,cropArea:{x:Math.round((g.x+n.left)*p),y:Math.round((g.y+n.top)*p),width:Math.round(g.width*p),height:Math.round(g.height*p)},outputScale:f,format:r,quality:s,children:o,rotation:a}}function XWe(t,e,i){const{ctx:n,canvas:r}=dge(t,i),s=n.getImageData(0,0,t.width,t.height),o=tJe(r,e);return hge(r),{dataUrl:o,data:s}}function QWe(t,e){const{ctx:i,canvas:n}=dge(t,e),r=i.getImageData(0,0,t.width,t.height);return hge(n),r}function dge(t,e){const i=eJe();e.premultipliedAlpha&&oJe(t),i.width=t.width,i.height=t.height;const n=i.getContext("2d",{willReadFrequently:!0});return n.putImageData(t,0,0),e.flipY&&sJe(n),{ctx:n,canvas:i}}function hge(t){t.width=0,t.height=0}function eJe(){return U(EF)&&(EF=document.createElement("canvas")),EF}let EF=null;function tJe(t,e){const i=aJe[e.format],n=e.quality/100;return t.toDataURL(i,n)}function iJe(t,e){const i=rJe(t),n=cJe[i];return{format:i,quality:zo(e??n,0,100)}}function nJe(t,e){return e/Math.max(t[0],t[1])}function u1t(t,e,i,n=0,r=0,s=t.width-n,o=t.height-r,a=!1){const{data:l}=t,{width:u,height:h,data:p}=e,f=s/u,g=o/h,v=Math.ceil(f/2),b=Math.ceil(g/2),_=t.width;for(let w=0;w<h;w++)for(let S=0;S<u;S++){const C=4*(S+(a?h-w-1:w)*u);let $=0,M=0,P=0,k=0,D=0,z=0;const B=(w+.5)*g;for(let j=Math.floor(w*g);j<(w+1)*g;j++){const K=Math.abs(B-(j+.5))/b,ie=(S+.5)*f,te=K*K;for(let me=Math.floor(S*f);me<(S+1)*f;me++){const Ie=Math.abs(ie-(me+.5))/v,Me=Math.sqrt(te+Ie*Ie);if(Me>=1)continue;let oe=2*Me*Me*Me-3*Me*Me+1;const ge=4*(n+me+(r+j)*_);z+=oe*l[ge+3],M+=oe,!i&&l[ge+3]<255&&(oe=oe*l[ge+3]/255),P+=oe*l[ge],k+=oe*l[ge+1],D+=oe*l[ge+2],$+=oe}}p[C]=P/$,p[C+1]=k/$,p[C+2]=D/$,p[C+3]=z/M}return e}function rJe(t){switch(t){case"png":case"jpg":case"jpeg":return t;default:return lJe}}function sJe(t){t.save(),t.globalCompositeOperation="copy",t.scale(1,-1),t.translate(0,-t.canvas.height),t.drawImage(t.canvas,0,0),t.restore()}function oJe(t){const e=t.data,i=e.length;for(let n=0;n<i;n+=4){const r=e[n+3];if(r!==255&&r>0){const s=255/r;e[n+0]=e[n+0]*s,e[n+1]=e[n+1]*s,e[n+2]=e[n+2]*s}}}const aJe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},kX=98,lJe="png",cJe={png:100,jpg:kX,jpeg:kX};var gn;function d1t(t,e,i={}){const n=pge(t);for(;n.length>1;){const r=wO(e,n.shift(),i);if(A(r))return r}return uJe(e,n.shift(),i)}function pge(t){const e=ee("esri-force-webgl");if(e===gn.WEBGL1||e===gn.WEBGL2)return[e];switch(t){case"2d":return ee("mac")&&ee("chrome")?[gn.WEBGL1,gn.WEBGL2]:[gn.WEBGL2,gn.WEBGL1];case"3d":return[gn.WEBGL2,gn.WEBGL1]}}function uJe(t,e,i={}){if(!window.WebGLRenderingContext)return $X(t,dJe),null;const n=wO(t,e,i);return U(n)&&$X(t,hJe),n}function wO(t,e,i={}){const n=e===gn.WEBGL1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let r=null;for(const s of n){try{r=t.getContext(s,i)}catch{}if(r)break}return r}function $X(t,e){const i=t.parentNode;i&&(i.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+e+"</div></div></td></tr></table>")}(function(t){t[t.WEBGL1=1]="WEBGL1",t[t.WEBGL2=2]="WEBGL2"})(gn||(gn={}));const dJe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',hJe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let CF,IF;function pJe(t){const e=pge(t);for(;e.length>1;){const i=AX(e.shift());if(i.available)return i}return AX(e.shift())}function AX(t){switch(t){case gn.WEBGL1:return fJe();case gn.WEBGL2:return mJe()}}function fJe(){return CF||(CF=vJe()),CF}function mJe(){return IF||(IF=bJe()),IF}let fge=class{constructor(){this.available=!1,this.majorPerformanceCaveat=!1,this.maxTextureSize=0,this.supportsVertexShaderSamplers=!1,this.supportsHighPrecisionFragment=!1,this.supportsElementIndexUint=!1,this.supportsStandardDerivatives=!1,this.supportsInstancedArrays=!1,this.supportsTextureFloat=!1,this.supportsTextureHalfFloat=!1,this.supportsColorBufferFloat=!1,this.supportsColorBufferFloatBlend=!1,this.supportsColorBufferHalfFloat=!1}},gJe=class extends fge{constructor(){super(...arguments),this.type=gn.WEBGL1}},yJe=class extends fge{constructor(){super(...arguments),this.type=gn.WEBGL2,this.supportsElementIndexUint=!0,this.supportsStandardDerivatives=!0,this.supportsInstancedArrays=!0,this.supportsTextureFloat=!0,this.supportsTextureHalfFloat=!0}};function mge(t,e){var s;if(t===gn.WEBGL1&&typeof WebGLRenderingContext>"u"||t===gn.WEBGL2&&typeof WebGL2RenderingContext>"u")return null;const i=document.createElement("canvas");if(!i)return null;let n=wO(i,t,{failIfMajorPerformanceCaveat:!0});if(U(n)&&(n=wO(i,t),A(n)&&(e.majorPerformanceCaveat=!0)),U(n))return n;if(t===gn.WEBGL1){const o=(s=n.getParameter(n.VERSION))==null?void 0:s.match(/^WebGL\s+([\d.]*)/);if(o){const a=parseFloat(o[1]);e.available=a>=.94}}else e.available=!0;e.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),e.supportsVertexShaderSamplers=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0;const r=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);return r&&(e.supportsHighPrecisionFragment=r.precision>0),n}function vJe(){const t=new gJe,e=mge(gn.WEBGL1,t);return U(e)||(t.supportsElementIndexUint=e.getExtension("OES_element_index_uint")!==null,t.supportsStandardDerivatives=e.getExtension("OES_standard_derivatives")!==null,t.supportsInstancedArrays=e.getExtension("ANGLE_instanced_arrays")!==null,t.supportsTextureFloat=e.getExtension("OES_texture_float")!==null,t.supportsTextureHalfFloat=e.getExtension("OES_texture_half_float")!==null,t.supportsColorBufferFloat=e.getExtension("WEBGL_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=e.getExtension("EXT_color_buffer_half_float")!==null),t}function bJe(){const t=new yJe,e=mge(gn.WEBGL2,t);return U(e)||(t.supportsColorBufferFloat=e.getExtension("EXT_color_buffer_float")!==null,t.supportsColorBufferFloatBlend=e.getExtension("EXT_float_blend")!==null,t.supportsColorBufferHalfFloat=t.supportsColorBufferFloat||e.getExtension("EXT_color_buffer_half_float")!==null),t}function _Je(t){const e=pJe(t);if(!e.available)return new N("webgl:required","WebGL is required but not supported.");if(t==="3d"&&e.majorPerformanceCaveat)return new N("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.");if(!e.supportsHighPrecisionFragment)return new N("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported.");if(!e.supportsVertexShaderSamplers)return new N("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported.");if(e.type===gn.WEBGL1){if(!e.supportsElementIndexUint)return new N("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported.");if(!e.supportsStandardDerivatives)return new N("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported.");if(!e.supportsInstancedArrays)return new N("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported.")}return null}function wJe(t){return t&&"nodeType"in t}function xJe(t){return t&&typeof t.render=="function"}const MX={component:"esri-component"};let Qg=class extends _e{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const i=this._get("node");e!==i&&(e&&e.classList.add(MX.component),i&&i.classList.remove(MX.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||wJe(e)?(this._set("widget",null),eR(e)):(xJe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};c([d({dependsOn:[]})],Qg.prototype,"id",null),c([d()],Qg.prototype,"node",null),c([st("node")],Qg.prototype,"castNode",null),c([d({readOnly:!0})],Qg.prototype,"widget",void 0),Qg=c([O("esri.views.ui.Component")],Qg);const hA=Qg,SJe={left:0,top:0,bottom:0,right:0},gge={bottom:30,top:15,right:15,left:15},TF="manual",dd="esri-ui",Ms={ui:dd,corner:`${dd}-corner`,innerContainer:`${dd}-inner-container`,manualContainer:`${dd}-manual-container`,cornerContainer:`${dd}-corner-container`,topLeft:`${dd}-top-left`,topRight:`${dd}-top-right`,bottomLeft:`${dd}-bottom-left`,bottomRight:`${dd}-bottom-right`};function EJe(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function kF(t){const e=t,i=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(i===null||i===Object.prototype)&&("component"in e||"index"in e||"position"in e)?t:null}function $F(t,{top:e,bottom:i,left:n,right:r}){t.style.top=e,t.style.bottom=i,t.style.left=n,t.style.right=r}let du=class extends $r.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._locale=sr(),this.view=null,this._applyViewPadding=()=>{const i=this.container;i&&$F(i,this._toPxPosition(this._getViewPadding()))},this._applyUIPadding=()=>{const i=this._innerContainer;i&&$F(i,this._toPxPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([X(()=>{var e;return[(e=this.view)==null?void 0:e.padding,this.container]},this._applyViewPadding,ut),X(()=>this.padding,this._applyUIPadding,ut),X(()=>[this.container,this._locale],([e,i])=>{e&&e.setAttribute("lang",i)},ut),zP(e=>{this._locale=e})])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._componentToKey.clear()}set container(e){const i=this._get("container");e!==i&&(e&&(e.classList.add(Ms.ui),v5e(e),this._attachContainers(e)),i&&(i.classList.remove(Ms.ui),$F(i,{top:"",bottom:"",left:"",right:""}),Tce(i)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const i=this._getViewPadding(),n=i.top+i.bottom;return Math.max(e-n,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...gge,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const i=this._getViewPadding(),n=i.left+i.right;return Math.max(e-n,0)}add(e,i){let n,r;if(Array.isArray(e))return void e.forEach(o=>this.add(o,i));const s=kF(e);s&&({index:n,position:i,component:e,key:r}=s),i&&typeof i=="object"&&({index:n,key:r,position:i}=i),!e||i&&!this._isValidPosition(i)||this._add(e,i,n,r)}remove(e,i){if(!e)return;if(Array.isArray(e))return e.map(r=>this.remove(r,i));const n=this._find(e);if(n){const r=this._componentToKey;if(r.has(e)&&r.get(e)!==i)return;const s=this._components.indexOf(n);return n.node.parentNode&&n.node.parentNode.removeChild(n.node),this._componentToKey.delete(e),this._components.splice(s,1)[0]}}empty(e){return Array.isArray(e)?e.map(i=>this.empty(i)).reduce((i,n)=>i.concat(n)):(e=e||TF)===TF?Array.prototype.slice.call(this._manualContainer.children).filter(i=>!i.classList.contains(Ms.corner)).map(i=>this.remove(i)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,i){if(Array.isArray(e)&&e.forEach(o=>this.move(o,i)),!e)return;let n;const r=kF(e)||kF(i);if(r&&(n=r.index,i=r.position,e=r.component||e),i&&!this._isValidPosition(i))return;const s=this.remove(e);s&&this.add(s,{position:i,index:n})}find(e){if(!e)return null;const i=this._findById(e);return i&&(i.widget||i.node)}getPosition(e){for(const i in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[i].contains(e))return i;return null}_add(e,i,n,r){e instanceof hA||(e=new hA({node:e})),this._place({component:e,position:i,index:n}),this._components.push(e),r&&this._componentToKey.set(e,r)}_find(e){return e?e instanceof hA?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||SJe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Ms.innerContainer),e.classList.add(Ms.cornerContainer);const i=document.createElement("div");i.classList.add(Ms.innerContainer),i.classList.add(Ms.manualContainer);const n=document.createElement("div");n.classList.add(Ms.topLeft),n.classList.add(Ms.corner),e.appendChild(n);const r=document.createElement("div");r.classList.add(Ms.topRight),r.classList.add(Ms.corner),e.appendChild(r);const s=document.createElement("div");s.classList.add(Ms.bottomLeft),s.classList.add(Ms.corner),e.appendChild(s);const o=document.createElement("div");o.classList.add(Ms.bottomRight),o.classList.add(Ms.corner),e.appendChild(o),this._innerContainer=e,this._manualContainer=i;const a=$o();this._cornerNameToContainerLookup={"top-left":n,"top-right":r,"bottom-left":s,"bottom-right":o,"top-leading":a?r:n,"top-trailing":a?n:r,"bottom-leading":a?o:s,"bottom-trailing":a?s:o},this._positionNameToContainerLookup={manual:i,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const i=e.component,n=e.position||TF,r=e.index,s=this._positionNameToContainerLookup[n],o=r!=null&&r>-1;if(EJe(i.widget)&&i.widget.startup(),!o)return void s.appendChild(i.node);const a=Array.prototype.slice.call(s.children);if(r===0)return void(s.firstChild?vJ(i.node,s.firstChild):s.appendChild(i.node));r>=a.length?s.appendChild(i.node):vJ(i.node,a[r])}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let i,n=null;return this._components.some(r=>(i=r===e,i&&(n=r),i)),n}_findById(e){let i,n=null;return this._components.some(r=>(i=r.id===e,i&&(n=r),i)),n}_findByNode(e){let i,n=null;return this._components.some(r=>(i=r.node===e,i&&(n=r),i)),n}};c([d()],du.prototype,"_locale",void 0),c([d()],du.prototype,"container",null),c([d()],du.prototype,"height",null),c([d({value:gge})],du.prototype,"padding",null),c([st("padding")],du.prototype,"castPadding",null),c([d()],du.prototype,"view",void 0),c([d()],du.prototype,"width",null),du=c([O("esri.views.ui.UI")],du);const CJe=du;function OX(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function IJe(t,e){return t.length!==e.length||t.some((i,n)=>i.text!==e[n].text)}function XT(t,e,i){!i||!e||t.find(n=>n.layerView===e&&n.text===i)||t.push({text:i,layerView:e})}function TJe(t){return t.type==="bing-maps"}const cp=[];let pb=class extends mw{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new we,this.view=null,this._allLayerViewsChange=i=>{this.handles.remove("suspension");const n=this.get("view.allLayerViews");n&&this.handles.add(n.map(r=>X(()=>{var s;return[r.suspended,(s=r.layer)==null?void 0:s.attributionVisible]},()=>this._updateAttributionItems())),"suspension"),i&&i.removed&&i.removed.forEach(r=>{this._pendingAttributions.delete(r),this._fetchedAttributionData.delete(r)}),this._updateAttributionItems()},this.handles.add([ji(()=>{var i;return(i=this.view)==null?void 0:i.allLayerViews},"change",i=>this._allLayerViewsChange(i),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),Ys(()=>{var i;return((i=this.view)==null?void 0:i.stationary)===!0},()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){const e=this.view,i=e==null?void 0:e.allLayerViews;cp.length=0,e&&i?(i.forEach(n=>{var o;if(n.suspended||!((o=n.layer)!=null&&o.attributionVisible))return;const r=n.layer;if(OX(r,"user"))return void XT(cp,n,r.copyright);if(r.hasAttributionData){if(this._fetchedAttributionData.has(n)){const a=this._fetchedAttributionData.get(n);return void(a?XT(cp,n,this._getDynamicAttribution(a,e,r)):OX(r)&&XT(cp,n,r.copyright))}return void this._fetchAttributionData(n)}const s=r.get("portalItem.accessInformation");XT(cp,n,s||r.copyright)}),IJe(this.items,cp)&&(this.items.removeAll(),this.items.addMany(cp)),cp.length=0,this.notifyChange("state")):this._clear()}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const i=await dR(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const n=i.ok?this._createContributionIndex(i.value,TJe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,n)}this._updateAttributionItems()}_createContributionIndex(e,i){const n=e.contributors,r={};if(!n)return r;for(let s=0;s<n.length;s++){const o=n[s],a=o.coverageAreas;if(!a)return;for(const l of a){const u=l.bbox,h=l.zoomMin-(i&&l.zoomMin?1:0),p=l.zoomMax-(i&&l.zoomMax?1:0),f={xmin:u[1],ymin:u[0],xmax:u[3],ymax:u[2],spatialReference:Ge.WGS84},g={extent:Tc(f),attribution:o.attribution||"",score:l.score!=null?l.score:100,id:s};for(let v=h;v<=p;v++)r[v]=r[v]||[],r[v].push(g)}}return r.maxKey=Math.max.apply(null,Object.keys(r)),r}_getDynamicAttribution(e,i,n){var h;const{extent:r,scale:s}=i;let o=((h=n.tileInfo)==null?void 0:h.scaleToZoom(s))??0;if(o=Math.min(e.maxKey??0,Math.round(o)),!r||o==null||o<=-1)return"";const a=e[o],l=RP(r.center.clone().normalize(),i.spatialReference),u={};return a?a.filter(p=>{const f=p.id,g=!u[f]&&l&&p.extent&&LP(p.extent,l);return g&&(u[f]=!0),g}).sort((p,f)=>f.score-p.score||p.objectId-f.objectId).map(p=>p.attribution).join(", "):""}};c([d({readOnly:!0,type:we})],pb.prototype,"items",void 0),c([d({readOnly:!0})],pb.prototype,"state",null),c([d()],pb.prototype,"view",void 0),pb=c([O("esri.widgets.Attribution.AttributionViewModel")],pb);const yge=pb,yv="esri-attribution",up={base:`${yv} esri-widget`,poweredBy:`${yv}__powered-by`,sources:`${yv}__sources`,open:`${yv}--open`,sourcesOpen:`${yv}__sources--open`,link:`${yv}__link`,widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Ns=class extends qt{constructor(e,i){super(e,i),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(n=>n.forEach(({target:r})=>this._checkSourceTextOverflow(r))),this.iconClass=up.widgetIcon,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new yge}initialize(){this.addHandles(ji(()=>{var e;return(e=this.viewModel)==null?void 0:e.items},"change",()=>this.scheduleRender()))}destroy(){var e;(e=this._resizeObserver)==null||e.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,i)=>(e.includes(i.text)||e.push(i.text),e),[]).join(this.itemDelimiter)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e={[up.open]:this._isOpen};return L("div",{bind:this,class:this.classes(up.base,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return L("div",{class:up.poweredBy},"Powered by"," ",L("a",{class:up.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,i=this._isInteractive,n=i?"0":"",{attributionText:r}=this,s={[up.sourcesOpen]:e,[up.interactive]:i};return L("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(up.sources,s),innerHTML:r,tabindex:n})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let i=!1;const{clientHeight:n,clientWidth:r,scrollWidth:s}=e,o=s>r,a=this._attributionTextOverflowed!==o;if(this._attributionTextOverflowed=o,a&&(i=!0),this._isOpen){const l=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,l&&(this._isOpen=!1,i=!0)}i&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([d()],Ns.prototype,"_isOpen",void 0),c([d()],Ns.prototype,"_isInteractive",null),c([d()],Ns.prototype,"_attributionTextOverflowed",void 0),c([d()],Ns.prototype,"_prevSourceNodeHeight",void 0),c([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ns.prototype,"attributionText",null),c([d()],Ns.prototype,"iconClass",void 0),c([d()],Ns.prototype,"itemDelimiter",void 0),c([d()],Ns.prototype,"label",null),c([d(),bt("esri/widgets/Attribution/t9n/Attribution")],Ns.prototype,"messages",void 0),c([d()],Ns.prototype,"view",null),c([d({type:yge})],Ns.prototype,"viewModel",void 0),c([Ln()],Ns.prototype,"_toggleState",null),Ns=c([O("esri.widgets.Attribution")],Ns);const kJe=Ns,$Je="esri.widgets.CompassViewModel";let ey=class extends o2(_e){constructor(e){super(e),this._handles=new wn,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(X(()=>this.view,this._updateRotationWatcher,ut))}destroy(){bn(this._handles),this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){var i;if(!this.get("view.ready"))return;const e={};((i=this.view)==null?void 0:i.type)==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const i=-e.heading;this.orientation={x:0,y:0,z:i}}_updateRotationWatcher(e){this._handles.removeAll(),e&&this._handles.add(e.type==="2d"?X(()=>e==null?void 0:e.rotation,this._updateForRotation,ut):X(()=>e==null?void 0:e.camera,this._updateForCamera,ut))}};c([d({readOnly:!0})],ey.prototype,"canShowNorth",null),c([d()],ey.prototype,"orientation",void 0),c([d({readOnly:!0})],ey.prototype,"state",null),c([d()],ey.prototype,"view",void 0),ey=c([O($Je)],ey);const vge=ey,dp={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let hu=class extends qt{constructor(e,i){super(e,i),this.iconClass=dp.widgetIcon,this.messages=null,this.viewModel=new vge}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:i}=this.viewModel,n=i==="disabled",r=(i==="rotation"?"rotation":"compass")=="compass",s=n?-1:0,o={[dp.disabled]:n,[dp.interactive]:!n},a={[dp.northIcon]:r,[dp.rotationIcon]:!r},{messages:l}=this;return L("div",{bind:this,class:this.classes(dp.base,o),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:s,"aria-label":l.reset,title:l.reset},L("span",{"aria-hidden":"true",class:this.classes(dp.icon,a),styles:this._toRotationTransform(e)}),L("span",{class:dp.text},l.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};c([d()],hu.prototype,"goToOverride",null),c([d()],hu.prototype,"iconClass",void 0),c([d()],hu.prototype,"label",null),c([d(),bt("esri/widgets/Compass/t9n/Compass")],hu.prototype,"messages",void 0),c([d()],hu.prototype,"view",null),c([d({type:vge})],hu.prototype,"viewModel",void 0),c([Ln()],hu.prototype,"_reset",null),hu=c([O("esri.widgets.Compass")],hu);const bge=hu,vv="esri-navigation-toggle",ja={base:`${vv} esri-widget`,button:`${vv}__button esri-widget--button`,activeButton:`${vv}__button--active`,panButton:`${vv}__button--pan`,rotateButton:`${vv}__button--rotate`,isLayoutHorizontal:`${vv}--horizontal`,rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let fb=class extends _e{constructor(e){super(e),this.navigationMode="pan",this.view=null}initialize(){this.own(Ys(()=>{var e;return(e=this.view)==null?void 0:e.inputManager},()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){var e;return this.get("view.ready")&&((e=this.view)==null?void 0:e.type)==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};c([d({readOnly:!0})],fb.prototype,"state",null),c([d()],fb.prototype,"navigationMode",void 0),c([d()],fb.prototype,"view",void 0),fb=c([O("esri.widgets.NavigationToggleViewModel")],fb);const _ge=fb;let pu=class extends qt{constructor(e,i){super(e,i),this.iconClass=ja.widgetIcon,this.messages=null,this.viewModel=new _ge}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",i=this.get("viewModel.navigationMode")==="pan",n={[ja.disabled]:e,[ja.isLayoutHorizontal]:this.layout==="horizontal"},r={[ja.activeButton]:i},s={[ja.activeButton]:!i},o=e?-1:0,a=this.messages.toggle;return L("div",{bind:this,class:this.classes(ja.base,n),onclick:this._toggle,onkeydown:this._toggle,tabIndex:o,"aria-label":a,title:a},L("div",{class:this.classes(ja.button,ja.panButton,r)},L("span",{class:ja.panIcon})),L("div",{class:this.classes(ja.button,ja.rotateButton,s)},L("span",{class:ja.rotationIcon})))}_toggle(){this.toggle()}};c([d()],pu.prototype,"iconClass",void 0),c([d()],pu.prototype,"label",null),c([d({value:"vertical"})],pu.prototype,"layout",null),c([d(),bt("esri/widgets/NavigationToggle/t9n/NavigationToggle")],pu.prototype,"messages",void 0),c([d()],pu.prototype,"view",null),c([d({type:_ge})],pu.prototype,"viewModel",void 0),c([Ln()],pu.prototype,"_toggle",null),pu=c([O("esri.widgets.NavigationToggle")],pu);const AJe=pu,mx={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Vp=class extends qt{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,i={[mx.disabled]:!this.enabled,[mx.interactive]:this.enabled},n={[this.iconClass]:!!this.iconClass};return L("div",{bind:this,class:this.classes(mx.button,i),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},L("span",{"aria-hidden":"true",role:"presentation",class:this.classes(mx.icon,n)}),L("span",{class:mx.iconText},this.title))}_triggerAction(){this.action.call(this)}};c([d()],Vp.prototype,"action",void 0),c([d()],Vp.prototype,"enabled",void 0),c([d()],Vp.prototype,"iconClass",void 0),c([d()],Vp.prototype,"title",void 0),c([Ln()],Vp.prototype,"_triggerAction",null),Vp=c([O("esri.widgets.IconButton")],Vp);const PX=Vp;let mb=class extends _e{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMaxScale");return i===0||e>i}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),i=this.get("view.constraints.effectiveMinScale");return i===0||e<i}};c([d({readOnly:!0})],mb.prototype,"canZoomIn",null),c([d({readOnly:!0})],mb.prototype,"canZoomOut",null),c([d()],mb.prototype,"view",void 0),mb=c([O("esri.widgets.Zoom.ZoomConditions2D")],mb);const MJe=mb;let gb=class extends _e{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c([d({readOnly:!0})],gb.prototype,"canZoomIn",null),c([d({readOnly:!0})],gb.prototype,"canZoomOut",null),c([d()],gb.prototype,"view",void 0),gb=c([O("esri.widgets.Zoom.ZoomConditions3D")],gb);const OJe=gb;let Up=class extends _e{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return A(this._zoomConditions)&&this._zoomConditions.canZoomIn}get canZoomOut(){var e;return A(this._zoomConditions)&&((e=this._zoomConditions)==null?void 0:e.canZoomOut)}get state(){var e;return(e=this.view)!=null&&e.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new MJe({view:e}):e.type==="3d"&&(this._zoomConditions=new OJe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Qy(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Qy(e.goTo({zoomFactor:.5}))}};c([d()],Up.prototype,"_zoomConditions",void 0),c([d()],Up.prototype,"canZoomIn",null),c([d()],Up.prototype,"canZoomOut",null),c([d({readOnly:!0})],Up.prototype,"state",null),c([d()],Up.prototype,"view",null),Up=c([O("esri.widgets.Zoom.ZoomViewModel")],Up);const wge=Up,gx={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Fd=class extends qt{constructor(e,i){super(e,i),this.iconClass=gx.widgetIcon,this.messages=null,this.viewModel=new wge}initialize(){this._zoomInButton=new PX({action:this.zoomIn.bind(this),iconClass:gx.zoomInIcon}),this._zoomOutButton=new PX({action:this.zoomOut.bind(this),iconClass:gx.zoomOutIcon})}destroy(){this._zoomInButton=si(this._zoomInButton),this._zoomOutButton=si(this._zoomOutButton)}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){const e=this.viewModel,i={[gx.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:n,canZoomOut:r}=e;this._zoomInButton.enabled=n,this._zoomOutButton.enabled=r;const{zoomIn:s,zoomOut:o}=this.messages;return this._zoomInButton.title=s,this._zoomOutButton.title=o,L("div",{class:this.classes(gx.base,i)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};c([d()],Fd.prototype,"iconClass",void 0),c([d()],Fd.prototype,"label",null),c([d({value:"vertical"})],Fd.prototype,"layout",null),c([d(),bt("esri/widgets/Zoom/t9n/Zoom")],Fd.prototype,"messages",void 0),c([d()],Fd.prototype,"view",null),c([d({type:wge})],Fd.prototype,"viewModel",void 0),Fd=c([O("esri.widgets.Zoom")],Fd);const PJe=Fd;function RJe(t){return t&&t.view!==void 0}let pA=class extends CJe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[]}initialize(){this.addHandles([X(()=>this.components,this._componentsWatcher.bind(this),ut),X(()=>this.view,this._updateViewAwareWidgets.bind(this),ut)])}_add(e,i,n,r){let s=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;s=this._createComponent(e)}super._add(s,i,n,r)}_removeComponents(e){e.forEach(i=>{const n=this._find(i);n&&(this.remove(n),n.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(i=>{const n=this._find(i),r=n&&n.widget;RJe(r)&&(r.view=e)})}_componentsWatcher(e,i){this._removeComponents(i),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){const{top:i}=this.padding;this.padding=i}}_addComponents(e){this.constructed&&e.forEach(i=>this.add(this._createComponent(i),this._defaultPositionLookup[i]))}_createComponent(e){const i=this._createWidget(e);if(i)return new hA({id:e,node:i})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new kJe({view:this.view})}_createCompass(){return new bge({view:this.view})}_createNavigationToggle(){return new AJe({view:this.view})}_createZoom(){return new PJe({view:this.view})}};c([d()],pA.prototype,"components",void 0),pA=c([O("esri.views.ui.DefaultUI")],pA);const LJe=pA;let fA=class extends LJe{constructor(e){super(e),this.components=["attribution","zoom"]}};c([d()],fA.prototype,"components",void 0),fA=c([O("esri.views.ui.2d.DefaultUI2D")],fA);const xge=fA;var i6;let mA=i6=class extends Y{constructor(t){super(t),this.color=new Se([0,0,0,1])}clone(){return new i6(G({color:this.color}))}};c([d({type:Se,json:{write:!0}})],mA.prototype,"color",void 0),mA=i6=c([O("esri.webmap.background.ColorBackground")],mA);const BR=mA;let Sge,Ege,Cge,Ige,Tge,kge;async function DJe(){const[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:i,MapViewNavigation:n,MagnifierView2D:r,Stage:s}]=await Promise.all([q(()=>import("./webglDeps-2b3de3f9.js"),["assets/webglDeps-2b3de3f9.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/enums-64ab819c.js","assets/ProgramTemplate-122fdc23.js","assets/programUtils-27355458.js","assets/NestedMap-1b5db22e.js"]),q(()=>import("./mapViewDeps-94ad2cdb.js"),["assets/mapViewDeps-94ad2cdb.js","assets/CIMResourceManager-5dc78991.js","assets/Rasterizer-d5997801.js","assets/_commonjsHelpers-2f3e7994.js","assets/cimAnalyzer-bde3e5aa.js","assets/fontUtils-4c5efd72.js","assets/BidiEngine-836b7ef6.js","assets/GeometryUtils-53652037.js","assets/enums-55085e26.js","assets/alignmentUtils-ae955d28.js","assets/definitions-19bfb61c.js","assets/number-b10bd8f5.js","assets/Rect-ea14f53a.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/floatRGBA-42e02ec2.js","assets/rasterizingUtils-38c26b41.js","assets/imageutils-8c52ebc2.js","assets/Container-d7f99152.js","assets/EffectView-529d0ac5.js","assets/enums-64ab819c.js","assets/Texture-8a965b0b.js","assets/BufferPool-a5303daf.js","assets/color-6785f00e.js","assets/VertexElementDescriptor-2925c6af.js","assets/WGLContainer-e90e6675.js","assets/VertexArrayObject-867c589c.js","assets/vec4f32-0d1b2306.js","assets/ProgramTemplate-122fdc23.js","assets/MaterialKey-fa5b1ad7.js","assets/utils-bea86d3d.js","assets/StyleDefinition-fbc907c2.js","assets/config-1337d16e.js","assets/GeometryUtils-dd03fc25.js","assets/earcut-61f7b102.js","assets/enums-fb086c25.js","assets/programUtils-27355458.js","assets/NestedMap-1b5db22e.js","assets/MagnifierPrograms-081d2733.js","assets/Matcher-88b8ac0b.js","assets/visualVariablesUtils-ca43c24b.js","assets/visualVariablesUtils-d2906eec.js","assets/tileUtils-c2f19f52.js","assets/TurboLine-54758822.js","assets/ExpandedCIM-747cf648.js","assets/CircularArray-7c7c2321.js","assets/webgl-debug-b1f7a2c5.js","assets/ComputedAttributeStorage-088e07c8.js","assets/arcadeTimeUtils-9cac350a.js","assets/centroid-9716b441.js","assets/RenderingContext-62cb6742.js","assets/OrderIndependentTransparency-92d1201d.js","assets/basicInterfaces-04e01328.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/imageUtils-c2d0d1ae.js","assets/GraphicsView2D-4525aca6.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/AttributeStoreView-0bb29017.js","assets/TiledDisplayObject-26b1cc81.js","assets/schemaUtils-46db8c2a.js","assets/util-2b8216a2.js","assets/GraphicContainer-b70adb47.js","assets/BaseGraphicContainer-b6e394f6.js","assets/FeatureContainer-fdbfc140.js","assets/TileContainer-8b8c2da9.js","assets/vec3f32-ad1dc57f.js","assets/requestImageUtils-1d4d3276.js"])]);Ege=t,Cge=e,Ige=i,Tge=n,kge=r,Sge=s}const RX=160;function FJe(t){return t&&t.declaredClass==="esri.Viewpoint"}let Je=class extends CLe(hHe(pHe(hGe))){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new OC({getCollections:()=>{var i,n;return[(i=this.basemapView)==null?void 0:i.baseLayerViews,this.layerViews,(n=this.basemapView)==null?void 0:n.referenceLayerViews]},getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.rendering=!1,this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this._stationaryTimer=null,this._gotoTask=null,this.frameTask=new pqe(this),this._pePromise=null,this.floors=new we,this.highlightOptions=new cge,this.inputManager=new UWe({view:this}),this.map=null,this.resizeAlign="center",this.spatialReferenceLocked=!1,this.timeline=new uge,this.type="2d",this.ui=new xge,this._pixelFormat={flipY:!0,premultipliedAlpha:!0},this.constraints=new qme,this.padding={top:0,right:0,bottom:0,left:0},this.handles.add([X(()=>this.viewpoint,()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(RX)},Bu),this.on("resize",i=>this._resizeHandler(i)),X(()=>{var i;return(i=this.animationManager)==null?void 0:i.animation},i=>{this.animation=i})]),eRe()}destroy(){this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null,this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new YWe(this.featuresTilingScheme)}get initialExtentRequired(){var a;const{scale:e,constraints:i,center:n,viewpoint:r,extent:s}=this;let o=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&((a=this.map.initialViewProperties)!=null&&a.viewpoint))&&!s&&(i!=null&&i.effectiveLODs||(o=-1),(!n||e===0&&o===-1)&&(!r||!A(r.targetGeometry)||r.targetGeometry.type!=="extent"&&!r.scale))}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get _projectionEngineLoaded(){return!!om()||(this._pePromise||(this._pePromise=am().finally(()=>{this._pePromise=null})),!1)}get typeSpecificPreconditionsReady(){const e=this._getDefaultViewpoint();if(!e)return!1;const i=this.spatialReference,n=e.targetGeometry;return!!Gu(n.spatialReference,i)||this._projectionEngineLoaded}set animation(e){const i=this._get("animation");if(e===i)return;if(i&&i.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const n=()=>{var r;e===this._get("animation")&&(this._set("animation",null),(r=this.frameTask)==null||r.requestFrame()),this.frameTask&&(this.frameTask.animationInProgress=!1)};e.when(n,n)}get background(){return zJe(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:i}=this.state.paddedViewState;return new Ve({x:e[0],y:e[1],spatialReference:i})}set center(e){if(e==null)return;if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");let i;try{i=this._project(e,this.spatialReference)}catch(r){return void se.getLogger(this.declaredClass).error(new N("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:r}))}const n=this.viewpoint;WV(n,n,i),this.viewpoint=n}set constraints(e){const i=this._get("constraints");i&&(this.handles.remove("map-view-constraints"),i.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(X(()=>e.version,()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))},Bu),"map-view-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void se.getLogger(this.declaredClass).error(new N("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");let i;try{i=this._project(e,this.spatialReference)}catch(r){return void se.getLogger(this.declaredClass).error(new N("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:r}))}const n=this.viewpoint;KGe(n,n,i,this.size,{constraints:this.constraints}),this.viewpoint=n}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const i=this.viewpoint;cqe(i,i,e),this.viewpoint=i}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const n=this._get("extent");return n&&(this._set("extent",null),this._set("center",n.center)),void this.notifyChange("initialExtentRequired")}const i=this.viewpoint;cX(i,i,e),this.viewpoint=i}get stationary(){return!(this.animation||this.navigating||this.resizing||this._stationaryTimer)}get updating(){var i,n,r;const e=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(s=>!s.destroyed&&!("layerViews"in s)&&s.updating===!0));if(ee("esri-2d-log-updating")){const s=this.allLayerViews.reduce((o,a)=>({...o,[a.layer.id]:!a.destroyed&&!("layerViews"in a)&&a.updating}),{});console.log(`Updating MapView: ${e}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${(i=this.layerViewManager)==null?void 0:i.updating}
-> labelManager.updating: ${(n=this.labelManager)==null?void 0:n.updating}
-> graphicsView.updating: ${(r=this.graphicsView)==null?void 0:r.updating}
-> allLayerViews: ${JSON.stringify(s)}
`)}return e}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");let i,n;try{i=this._project(e,this.spatialReference),!e.scale||isNaN(e.scale)?n=new N("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):U(e.targetGeometry)&&(n=new N("mapview:invalid-viewpoint","geometry not defined"))}catch(s){n=new N("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:s})}if(n)return void se.getLogger(this.declaredClass).error(n);this._scaleBeforeChangingSpatialReference=null;const r=new Tr({targetGeometry:new Ve,scale:0,rotation:0});Uc(r,i),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this._set("zoom",e),this._set("scale",0);const n=this._get("extent");return n&&(this._set("extent",null),this._set("center",n.center)),void this.notifyChange("initialExtentRequired")}if(!this.constraints.effectiveLODs)return void this._set("zoom",-1);const i=this.viewpoint;cX(i,i,this.constraints.zoomToScale(e)),this.viewpoint=i,this._set("zoom",this.constraints.scaleToZoom(this.scale))}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}goTo(e,i){if(e)return this.animation&&(this.animation=null),this._createAnimation(),jo(()=>this.ready,i).then(()=>{var s;const n={animate:!0,...i},r=JGe(e,this);return(s=this.animation)==null||s.update(r),this._gotoTask={},n.animate?this._gotoAnimated(r,n):this._gotoImmediate(r,n)});se.getLogger(this.declaredClass).error("#goTo()","target cannot be null or undefined")}async hitTest(e,i){const n=rX(e)?nX(this,e):e;if(!this.ready||isNaN(n.x)||isNaN(n.y))return{screenPoint:n,results:[]};let r=new Set,s=!1,o=null,a=null;i!=null&&i.include?DX(i.include,LX(this,p=>r.add(p),p=>{o||(o=new Set),o.add(p)},p=>r.add(p),()=>s=!0)):(s=!0,r=new Set(this.allLayerViews)),i!=null&&i.exclude&&DX(i.exclude,LX(this,p=>r.delete(p),p=>{a||(a=new Set),a.add(p)}));const l=this.allLayerViews.filter(p=>!p.suspended&&r.has(p)).reverse(),u=this.toMap(n);let h=[...s?this.graphicsView.hitTest(u).map(p=>({type:"graphic",graphic:p,layer:null,mapPoint:u})):[],...await Promise.all(l.map(p=>p.hitTest(u,n)).toArray())].filter(A).flat().filter(A);return o&&(h=h.filter(p=>!("graphic"in p)||!p.graphic||(o==null?void 0:o.has(n6(p.graphic))))),a&&(h=h.filter(p=>!("graphic"in p)||!p.graphic||(a==null?void 0:a.has(n6(p.graphic))))),{screenPoint:n,results:h}}async takeScreenshot(e){const i=this._createScreenshotPlan(e),n=await this._stage.takeScreenshot(i);return XWe(n,{format:i.format,quality:i.quality,rotation:0,disableDecorations:!1},this._pixelFormat)}async _takeScreenshot(e){const i=this._createScreenshotPlan(e),n=await this._stage.takeScreenshot(i);return QWe(n,this._pixelFormat)}_createScreenshotPlan(e){e=e??{};const i=this.supersampleScreenshotsEnabled?Math.min(4,nJe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let n;e.layers?(n=[],e.layers.forEach(o=>{const a=this.allLayerViews.find(l=>l.layer.id===o.id);a&&"container"in a&&a.container&&n.push(a.container)})):n=this._stage.children;const{format:r,quality:s}=iJe(e.format,e.quality);return KWe(e,i,this.size,this.padding,r,s,n,e.rotation)}get test(){return{takeScreenshot:e=>this._takeScreenshot(e)}}toMap(e){if(!this.ready)return null;const i=rX(e)?nX(this,e):e,n=[0,0],[r,s]=this.state.toMap(n,[i.x,i.y]),o=this.spatialReference;return new Ve({x:r,y:s,spatialReference:o})}toScreen(e){if(!this.ready)return null;const i=this._project(e,this.spatialReference),n=[i.x,i.y];return this.state.toScreen(n,n),Nn(n[0],n[1])}on(e,i,n,r){return this.inputManager&&this.viewEvents.on(e,i,n,r)||super.on(e,i)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){var e,i,n;return this.map&&"initialViewProperties"in this.map&&((i=(e=this.map)==null?void 0:e.initialViewProperties)==null?void 0:i.spatialReference)||((n=this.defaultsFromMap)==null?void 0:n.spatialReference)||null}hasLayerViewModule(e){return dX.hasLayerViewModule(e)}importLayerView(e){return dX.importLayerView(e)}pixelSizeAt(){return this.ready?this.state.resolution:(se.getLogger(this.declaredClass).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return this.hitTest(e).then(i=>({...i,mapPoint:this.toMap(e)}))}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){let e=_Je(this.type);return ee("safari")&&ee("safari")<9&&(e=new N("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ee("safari")})),A(e)?(se.getLogger(this.declaredClass).warn("#validate()",e.message),Promise.reject(e)):DJe()}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new GV),this.animation}_cancellableGoTo(e,i,n){const r=()=>e===this._gotoTask,s=n.then(()=>{r()&&(this.animation=null)}).catch(a=>{throw r()&&(i&&!i.done&&(i.stop(),this.frameTask.animationInProgress=!1),this.animation=null),a}),o=new Promise(a=>a(s));return i.when().catch(()=>{r()&&o.cancel&&o.cancel()}),o}_gotoImmediate(e,i){const n=this._gotoTask,r=this.animation,s=e.then(o=>{if(Xi(i),n!==this._gotoTask)throw new N("view:goto-interrupted","Goto was interrupted");this.viewpoint=r.target=o,r.finish()});return this._cancellableGoTo(n,r,s)}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const i=performance.now()-this._lastStationaryEventTimestamp;i<RX&&(this._stationaryTimer=this._flipStationary(i))},e)),this._stationaryTimer}_getDefaultViewpoint(){var w,S,C,$;const{constraints:e,initialExtent:i,map:n,padding:r,size:s}=this;if(!e)return null;const o=n&&"initialViewProperties"in n?n.initialViewProperties:void 0,a={zoom:this._get("zoom"),scale:this._get("scale"),center:this._get("center"),extent:this._get("extent"),rotation:this._get("rotation"),viewpoint:this._get("viewpoint"),spatialReference:this._userSpatialReference};e.effectiveLODs?a.zoom!==-1&&(a.scale=e.zoomToScale(a.zoom)):a.zoom=-1;let l=null,u=null,h=0;const p=a.viewpoint&&a.viewpoint.rotation,f=a.viewpoint&&a.viewpoint.targetGeometry;A(f)&&(f.type==="extent"?l=f:f.type==="point"&&(u=f,h=a.viewpoint.scale));const g=a.extent||l||((S=(w=o==null?void 0:o.viewpoint)==null?void 0:w.targetGeometry)==null?void 0:S.extent)||i,v=a.center||u||(g==null?void 0:g.center),b=a.scale||h||((C=o==null?void 0:o.viewpoint)==null?void 0:C.scale)||g&&PE(g,[s[0]-r.left-r.right,s[1]-r.top-r.bottom]),_=a.rotation||p||(($=o==null?void 0:o.viewpoint)==null?void 0:$.rotation)||0;return v&&b?new Tr({targetGeometry:v,scale:b,rotation:_}):null}_gotoAnimated(e,i){const n=this._gotoTask,r=this.animation;if(!r)return Promise.resolve();const s=e.then(o=>{if(Xi(i),n!==this._gotoTask)throw new N("view:goto-interrupted","Goto was interrupted");return r.update(o),this.animationManager.animate(r,this.viewpoint,i),r.when().then(()=>{},()=>{})});return this._cancellableGoTo(n,r,s)}_project(e,i){var s;const n=e&&e.targetGeometry||e;if(!i)return e;if(!n)return null;if(i.imageCoordinateSystem||(s=n.spatialReference)!=null&&s.imageCoordinateSystem||ui(i,n.spatialReference))return e;const r=Hu(n,i);if(!r)throw new N("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:n,spatialReference:i});return FJe(e)?(e.targetGeometry=r,e):r}_resizeHandler(e){if(!this.ready)return;const i=this.state;let n=this.state.paddedViewState.viewpoint;const r=this.state.paddedViewState.size.concat();i.size=[e.width,e.height],lqe(n,n,r,this.state.paddedViewState.size,this.resizeAlign),n=this.constraints.constrain(n,void 0),this.state.viewpoint=n}_startup(){var l,u;this.timeline.begin("MapView Startup");const e=this._getDefaultViewpoint(),i=e.targetGeometry;try{this._project(e,this.spatialReference)}catch(h){se.getLogger(this.declaredClass).warn(new bl("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:i.toJSON(),spatialReference:this.spatialReference,error:h})),e.targetGeometry=((l=this.defaultsFromMap.extent)==null?void 0:l.center)||new Ve({x:0,y:0,spatialReference:this.spatialReference})}(u=this.constraints)==null||u.fit(e),this._set("state",new eWe({padding:this._get("padding"),size:this.size,viewpoint:e})),this.graphics.owner=this;const n=new Sge(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this._stage=n,this._magnifierView=new kge,this._magnifierView.magnifier=this.magnifier;const r=new Ige({view:this});this._set("labelManager",r);const s=new hqe({view:this});this._set("animationManager",s);const o=new Tge({view:this,animationManager:s});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),n.on("post-render",()=>this._set("rendering",n.renderRequested)),n.on("will-render",()=>this._set("rendering",n.renderRequested)),n.on("webgl-error",h=>this.fatalError=h.error),X(()=>this.stationary,h=>n.stationary=h,Io),X(()=>this.background,h=>{n.background=h,this._magnifierView.background=h},Io),X(()=>this.magnifier,h=>this._magnifierView.magnifier=h,Io),X(()=>this.renderingOptions,h=>n.renderingOptions=h,Io),X(()=>this.highlightOptions,h=>n.highlightOptions=h,Io),X(()=>this.state.id,()=>n.state=this.state,Io)],"map-view"),this._updateStageChildren();const a=this._resolveWhenReady;this._resolveWhenReady=[],a.forEach(h=>h(this)),this.timeline.end("MapView Startup"),this.frameTask&&this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.handles.remove("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask&&this.frameTask.stop(),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null),this._set("ready",!1);const{center:[e,i],spatialReference:n,rotation:r,scale:s}=this.state.paddedViewState,o=new Ve({x:e,y:i,spatialReference:n});this._set("viewpoint",null),this._set("extent",null),this._set("center",o),this._set("zoom",-1),this._set("rotation",r),this._set("scale",s),this._set("spatialReference",n),this._set("state",null),this.animation=null}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(i=>{this._stage.addChild(i.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){const e=new aWe(Ice.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);const i=new Ege({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Cge(e)});this.frameTask.graphicsView=i,this._set("graphicsView",i)}_destroySpatialReferenceDependentProperties(){const e=this.graphicsView;this._set("graphicsView",null),this.frameTask.graphicsView=null,e.destroy(),this._set("featuresTilingScheme",null)}_spatialReferenceChanged(e){if(!this.ready)return;this.frameTask.stop();for(const l of this.allLayerViews)l.processDetach();this._destroySpatialReferenceDependentProperties();const i=this.state.paddedViewState.clone();if(U(this._scaleBeforeChangingSpatialReference))this._scaleBeforeChangingSpatialReference=i.scale;else{const l=i.viewpoint.clone();l.scale=this._scaleBeforeChangingSpatialReference,i.viewpoint=l}const n=i.clone(),[r,s]=i.center;let o=null;try{o=this._project(new Ve({x:r,y:s,spatialReference:i.spatialReference}),e)}catch(l){om()||se.getLogger(this.declaredClass).warn(new bl("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:o==null?void 0:o.toJSON(),spatialReference:e,error:l}))}o||(o=new Ve({x:0,y:0,spatialReference:e}));const a=WV(new Tr({targetGeometry:new Ve,scale:0,rotation:0}),i.viewpoint,o);n.viewpoint=a;try{const u=[i.size[0]/2,i.size[1]/2],h=[u[0]+20,u[1]],p=i.toMap([0,0],h),{x:f,y:g}=this._project(new Ve({x:p[0],y:p[1],spatialReference:i.spatialReference}),e);p[0]=f,p[1]=g,n.toScreen(p,p);const v=oqe(u,p,h),b=Math.hypot(p[0]-u[0],p[1]-u[1])/20;!Number.isFinite(b)||Math.abs(b)>4?(a.rotation=0,a.targetGeometry=new Ve({x:0,y:0,spatialReference:e})):(a.scale*=b,a.scale>ee("mapview-srswitch-adjust-rotation-scale-threshold")?a.rotation=0:a.rotation+=Number.isFinite(v)?v:0)}catch{}this._get("constraints").constrain(a,void 0),this._get("state").viewpoint=a,this._stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(const l of this.allLayerViews)l.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}};Je.type="2d",c([d({readOnly:!0})],Je.prototype,"animationManager",void 0),c([d({constructOnly:!0})],Je.prototype,"deactivatedWebGLExtensions",void 0),c([d({constructOnly:!0})],Je.prototype,"debugWebGLExtensions",void 0),c([d({readOnly:!0})],Je.prototype,"featuresTilingScheme",void 0),c([d({readOnly:!0})],Je.prototype,"fullOpacity",void 0),c([d({readOnly:!0})],Je.prototype,"graphicsTileStore",null),c([d()],Je.prototype,"graphicsView",void 0),c([d({readOnly:!0})],Je.prototype,"state",void 0),c([d()],Je.prototype,"initialExtentRequired",null),c([d()],Je.prototype,"labelManager",void 0),c([d({readOnly:!0})],Je.prototype,"resourceManager",null),c([d({readOnly:!0})],Je.prototype,"textureManager",null),c([d({readOnly:!0})],Je.prototype,"mapViewNavigation",void 0),c([d({constructOnly:!0})],Je.prototype,"renderCanvas",void 0),c([d()],Je.prototype,"renderingOptions",void 0),c([d({readOnly:!0})],Je.prototype,"rendering",void 0),c([d({constructOnly:!0})],Je.prototype,"supersampleScreenshotsEnabled",void 0),c([d({readOnly:!0})],Je.prototype,"supportsGround",void 0),c([d()],Je.prototype,"_stationaryTimer",void 0),c([d()],Je.prototype,"_defaultsFromMapSettings",null),c([d()],Je.prototype,"_pePromise",void 0),c([d({readOnly:!0})],Je.prototype,"typeSpecificPreconditionsReady",null),c([d()],Je.prototype,"animation",null),c([d({type:BR})],Je.prototype,"background",null),c([d({value:null,type:Ve,dependsOn:["state.id","ready"]})],Je.prototype,"center",null),c([d({type:qme})],Je.prototype,"constraints",null),c([d({value:null,type:Dt,dependsOn:["state.id","ready"]})],Je.prototype,"extent",null),c([d()],Je.prototype,"floors",void 0),c([d({type:cge})],Je.prototype,"highlightOptions",void 0),c([d({readOnly:!0})],Je.prototype,"inputManager",void 0),c([d()],Je.prototype,"map",void 0),c([d({value:{top:0,right:0,bottom:0,left:0},cast:t=>({top:0,right:0,bottom:0,left:0,...t})})],Je.prototype,"padding",null),c([d()],Je.prototype,"resizeAlign",void 0),c([d({readOnly:!0,dependsOn:["state.id"]})],Je.prototype,"resolution",null),c([d({value:0,type:Number,dependsOn:["state.id","ready"]})],Je.prototype,"rotation",null),c([d({value:0,type:Number,dependsOn:["state.id","ready"]})],Je.prototype,"scale",null),c([d({constructOnly:!0})],Je.prototype,"spatialReferenceLocked",void 0),c([d()],Je.prototype,"stationary",null),c([d({type:uge,readOnly:!0})],Je.prototype,"timeline",void 0),c([d({readOnly:!0})],Je.prototype,"type",void 0),c([d({readOnly:!0})],Je.prototype,"updating",null),c([d({value:null,type:Tr,dependsOn:["state.id","ready"]})],Je.prototype,"viewpoint",null),c([d({value:-1,dependsOn:["state.id","ready"]})],Je.prototype,"zoom",null),c([d({readOnly:!0})],Je.prototype,"navigating",null),c([d({type:xge})],Je.prototype,"ui",void 0),Je=c([O("esri.views.MapView")],Je);const NJe=Je;function n6(t){var i,n;const e=t.getObjectId();return e?`${((i=t.layer)==null?void 0:i.uid)??((n=t.sourceLayer)==null?void 0:n.uid)??"MapView"}/${e}`:`"MapView/${t.uid}`}function LX(t,e,i,n,r){return s=>{if(s instanceof en){if(s.layer===t)r==null||r();else{const o=t.allLayerViews.find(a=>a.layer===s.layer);o&&(n==null||n(o))}i(n6(s))}else{const o=t.allLayerViews.find(a=>a.layer===s);o&&e(o)}}}function DX(t,e){if(t)if(fM(t))for(const i of t)if(fM(i))for(const n of i)e(n);else e(i);else e(t)}function zJe(t){return(t==null?void 0:t.declaredClass)==="esri.WebMap"}function jJe(t){return t&&"getAtOrigin"in t&&"originOf"in t}function VJe(t){t&&t.writtenProperties&&t.writtenProperties.forEach(({target:e,propName:i,newOrigin:n})=>{jJe(e)&&n&&e.originOf(i)!==n&&e.updateOrigin(i,n)})}async function UJe(t,e,i){e=e.clone(),t.capabilities.query.supportsMaxRecordCountFactor&&(e.maxRecordCountFactor=$ge(t));const n=BJe(t),r=t.capabilities.query.supportsPagination;e.start=0,e.num=n;let s=null;for(;;){const o=await t.source.queryFeaturesJSON(e,i);if(U(s)?s=o:s.features=s.features.concat(o.features),s.exceededTransferLimit=o.exceededTransferLimit,!r||!o.exceededTransferLimit)break;e.start+=n}return s}function BJe(t){return $ge(t)*HJe(t)}function HJe(t){return t.capabilities.query.maxRecordCount||2e3}function $ge(t){return t.capabilities.query.supportsMaxRecordCountFactor?pl.MAX_MAX_RECORD_COUNT_FACTOR:1}let Nd=class extends Y{constructor(e){super(e),this.moment=null,this.fullUpdate=!1,this.validateErrorsCreated=!1,this.dirtyAreaCount=null,this.exceededTransferLimit=null,this.serviceEdits=null}};c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.moment=t?t.getTime():null}}}})],Nd.prototype,"moment",void 0),c([d({type:Boolean,json:{write:!0}})],Nd.prototype,"fullUpdate",void 0),c([d({type:Boolean,json:{write:!0}})],Nd.prototype,"validateErrorsCreated",void 0),c([d({type:Number,json:{write:!0}})],Nd.prototype,"dirtyAreaCount",void 0),c([d({type:Boolean,json:{write:!0}})],Nd.prototype,"exceededTransferLimit",void 0),c([d({type:[Object],json:{write:!0}})],Nd.prototype,"serviceEdits",void 0),Nd=c([O("esri.rest.networks.support.ValidateNetworkTopologyResult")],Nd);const GJe=Nd,qJe=kr()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});let Bp=class extends GJe{constructor(e){super(e),this.featureServiceUrl=null,this.statusUrl=null,this.status=null,this.submissionTime=null,this.lastUpdatedTime=null,this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(e){const i={...e,query:{f:"json"}},{data:n}=await rt(this.statusUrl,i);if(this.read(n),(this.serviceEdits||this.exceededTransferLimit)&&this.featureServiceUrl){const r={edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0};UB.emit("edits",{serviceUrl:this.featureServiceUrl??"",layerId:null,event:r})}return this}async waitForJobCompletion(e={}){const{interval:i=1e3,statusCallback:n}=e;return new Promise((r,s)=>{this._clearTimer();const o=setInterval(()=>{this._timer||s(li()),this.checkJobStatus().then(a=>{const{status:l}=a;switch(this.status=l,l){case"job-succeeded":this._clearTimer(),r(this);break;case"job-waiting":case"job-executing":n&&n(this)}},a=>{this._clearTimer(),s(a)})},i);this._timer=o})}_clearTimer(){clearInterval(this._timer),this._timer=void 0}};c([d()],Bp.prototype,"featureServiceUrl",void 0),c([d({type:String,json:{write:!0}})],Bp.prototype,"statusUrl",void 0),c([Ce(qJe)],Bp.prototype,"status",void 0),c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.submissionTime=t?t.getTime():null}}}})],Bp.prototype,"submissionTime",void 0),c([d({type:Date,json:{type:Number,write:{writer:(t,e)=>{e.lastUpdatedTime=t?t.getTime():null}}}})],Bp.prototype,"lastUpdatedTime",void 0),Bp=c([O("esri.networks.support.TopologyValidationJobInfo")],Bp);const WJe=Bp;async function FX(t,e){if(t==="Utility Network Layer"){const{default:i}=await q(()=>Promise.resolve().then(()=>nYe),void 0);return new i({layerUrl:e})}return null}async function JJe(t){let e="portalItem"in t?t:{portalItem:t};!e.portalItem||e.portalItem instanceof gh||(e={...e,portalItem:new gh(e.portalItem)});const i=e.portalItem;if(await i.load(),i.type!=="Feature Service")throw new N("portal:unknown-item-type","Unknown item type '${type}'",{type:i.type});const n=i.url,r=await rt(n,{responseType:"json",query:{f:"json"}}),s="Network Layer";if(r.data.type&&r.data.type.includes(s))return FX(r.data.type,n);if(r.data.layers){const o=r.data.layers.find(a=>a.type.includes(s));if(o){const a=`${n}/${o.id}`;return FX(o.type,a)}}return null}let ty=class extends Y{constructor(e){super(e),this.globalIds=[],this.creators=[],this.tags=[],this.names=[]}};c([d({type:[String],json:{write:!0}})],ty.prototype,"globalIds",void 0),c([d({type:[String],json:{write:!0}})],ty.prototype,"creators",void 0),c([d({type:[String],json:{write:!0}})],ty.prototype,"tags",void 0),c([d({type:[String],json:{write:!0}})],ty.prototype,"names",void 0),ty=c([O("esri.rest.networks.support.QueryNamedTraceConfigurationsParameters")],ty);const YJe=ty;let Xn=class extends TR(_l){static fromPortalItem(e){return JJe(e)}constructor(e){super(e),this.id=null,this.title=null,this.layerUrl=null,this.dataElement=null,this.fullExtent=null,this.spatialReference=null,this.type=null,this.sourceJSON=null}initialize(){this.when().catch(e=>{Pa(e)||se.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:e})})}get datasetName(){var e;return((e=this.dataElement)==null?void 0:e.name)??null}get owner(){var e;return((e=this.dataElement)==null?void 0:e.userIdentity)??null}get schemaGeneration(){var e;return((e=this.dataElement)==null?void 0:e.schemaGeneration)??null}get parsedUrl(){return _i(this.layerUrl)}get featureServiceUrl(){const e=this.parsedUrl&&dm(this.parsedUrl.path);return A(e)?e.url.path:null}get networkServiceUrl(){return this.featureServiceUrl?this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer"):null}get layerId(){const e=this.parsedUrl&&dm(this.parsedUrl.path);return A(e)?e.sublayer:null}get networkSystemLayers(){return null}async load(e){return this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),e)),this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,e)),this}getLayerIdBySourceId(e){if(this.dataElement){const i=this.dataElement.domainNetworks;for(const n of i){for(const r of n.edgeSources?n.edgeSources:[])if(r.sourceId===e)return r.layerId;for(const r of n.junctionSources?n.junctionSources:[])if(r.sourceId===e)return r.layerId}return null}return null}async queryNamedTraceConfigurations(e,i){var o;const{queryNamedTraceConfigurations:n}=await q(()=>import("./queryNamedTraceConfigurations-de867d36.js"),[]),r=this.networkServiceUrl,s=new YJe({...e});return((o=await n(r,s,{...i}))==null?void 0:o.namedTraceConfigurations)??null}async validateTopology(e,i){if(!e.validateArea)throw new N("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const{validateNetworkTopology:n}=await q(()=>import("./validateNetworkTopology-896e44b7.js"),[]),r=this.networkServiceUrl,s=await n(r,e,{...i});if(s!=null&&s.serviceEdits){const o={edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:s.serviceEdits,exceededTransferLimit:!1};UB.emit("edits",{serviceUrl:this.featureServiceUrl??"",layerId:null,event:o})}return s}async submitTopologyValidationJob(e,i){if(!e.validateArea)throw new N("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");if(!e.gdbVersion)throw new N("network:undefined-gdb-version","version must be defined");const{submitValidateNetworkTopologyJob:n}=await q(()=>import("./validateNetworkTopology-896e44b7.js"),[]),r=this.networkServiceUrl,s=await n(r,e,{...i});return new WJe({statusUrl:s,featureServiceUrl:this.featureServiceUrl})}async _fetchLayerMetaData(e,i){const n=await rt(e,{responseType:"json",query:{f:"json"},...i});this.sourceJSON=n.data,this.read(n.data,{origin:"service"})}async _fetchDataElement(e,i,n){if(this.dataElement)return;const r=await rt(`${e}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([i]),f:"json"},...n}).then(s=>{var o;return(o=s.data.layerDataElements)==null?void 0:o[0]});r&&this.read(r,{origin:"service"})}};c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],Xn.prototype,"id",void 0),c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],Xn.prototype,"title",void 0),c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],Xn.prototype,"layerUrl",void 0),c([d({type:Object,json:{origins:{service:{read:!0}},read:!1}})],Xn.prototype,"dataElement",void 0),c([d({type:Dt,json:{origins:{service:{read:{source:"extent"}}},read:!1}})],Xn.prototype,"fullExtent",void 0),c([d({type:Ge,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],Xn.prototype,"spatialReference",void 0),c([d({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],Xn.prototype,"type",void 0),c([d({readOnly:!0})],Xn.prototype,"datasetName",null),c([d({readOnly:!0})],Xn.prototype,"owner",null),c([d({readOnly:!0})],Xn.prototype,"schemaGeneration",null),c([d({readOnly:!0})],Xn.prototype,"parsedUrl",null),c([d({readOnly:!0})],Xn.prototype,"featureServiceUrl",null),c([d({readOnly:!0})],Xn.prototype,"networkServiceUrl",null),c([d({readOnly:!0})],Xn.prototype,"layerId",null),c([d()],Xn.prototype,"sourceJSON",void 0),c([d({readOnly:!0})],Xn.prototype,"networkSystemLayers",null),Xn=c([O("esri.networks.Network")],Xn);const ZJe=Xn;var ma;(function(t){t[t.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity",t[t.RTContainment=2]="RTContainment",t[t.RTAttachment=3]="RTAttachment",t[t.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity",t[t.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity"})(ma||(ma={}));const QT=new Fe({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});new Fe({connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",junctionMidspanConnectivity:"junction-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"});new Fe({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});let iy=class extends Gw(_l){constructor(e){super(e),this.request=rt}initialize(){}async load(e){const i=this.layer.load(e).then(()=>this._initializeRulesTable());return this.addResolvingPromise(i),this}getFeatureSQL(e,i){var u,h;const n=e.layerId.toString(),r=(u=e.fieldsIndex)==null?void 0:u.normalizeFieldName("assetGroup"),s=(h=e.fieldsIndex)==null?void 0:h.normalizeFieldName("assetType"),o=r?i.attributes[r]:null,a=s?i.attributes[s]:null,l=this.rulesHash[n];if(l){const p=l.assetGroupHash[o];if(p)return p.assetTypeHash[a]||null}return null}async _initializeRulesTable(){var r,s,o,a,l,u,h,p,f,g;const e={};let i;(function(v){v[v.from=0]="from",v[v.to=1]="to",v[v.via=2]="via"})(i||(i={}));const n=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];for(const v of this.rules){if(v.ruleType!==ma.RTJunctionJunctionConnectivity&&v.ruleType!==ma.RTJunctionEdgeConnectivity&&v.ruleType!==ma.RTEdgeJunctionEdgeConnectivity)continue;let b=[[i.from,i.to],[i.to,i.from]];v.ruleType===ma.RTEdgeJunctionEdgeConnectivity&&(b=[[i.from,i.via],[i.via,i.from],[i.to,i.via],[i.via,i.to]]);for(const _ of b){const w=_.shift(),S=_.shift();let C=!1;switch(v.ruleType){case ma.RTEdgeJunctionEdgeConnectivity:C=w===i.from||w===i.to;break;case ma.RTJunctionEdgeConnectivity:C=w===i.to}const $=n[w],M=v[$.networkSourceId].layerId.toString(),P=(s=(r=v[$.assetGroupId])==null?void 0:r.assetGroupCode)==null?void 0:s.toString(),k=(a=(o=v[$.assetTypeId])==null?void 0:o.assetTypeCode)==null?void 0:a.toString(),D=n[S],z=v[D.networkSourceId].layerId.toString(),B=(u=(l=v[D.assetGroupId])==null?void 0:l.assetGroupCode)==null?void 0:u.toString(),j=v[D.assetTypeId],K=(h=j==null?void 0:j.assetTypeCode)==null?void 0:h.toString(),ie=e[M]?e[M]:{assetGroupHash:{}};if(!(P&&k&&B&&K))continue;const te=ie.assetGroupHash[P]?ie.assetGroupHash[P]:{assetTypeHash:{}},me=te.assetTypeHash[k]?te.assetTypeHash[k]:{};if(me[z]=me[z]?me[z]:{},C){me[M]=me[M]?me[M]:{};const Me=`(assetgroup = ${P} AND assettype = ${k})`;me[M].anyVertex=me[M].anyVertex?`${me[M].anyVertex}`:`${Me}`,j.connectivityPolicy==="esriNECPEndVertex"&&(me[M].endVertex=(p=me[M])!=null&&p.endVertex?`${me[M].endVertex}`:`${Me}`)}const Ie=`(assetgroup = ${B} AND assettype = ${K})`;me[z].anyVertex=(f=me[z])!=null&&f.anyVertex?`${me[z].anyVertex} OR ${Ie}`:`${Ie}`,j.connectivityPolicy==="esriNECPEndVertex"&&(me[z].endVertex=(g=me[z])!=null&&g.endVertex?`${me[z].endVertex} OR ${Ie}`:`${Ie}`),te.assetTypeHash[k]=me,ie.assetGroupHash[P]=te,e[M]=ie}}this.rulesHash=e}};c([d({constructOnly:!0})],iy.prototype,"layer",void 0),c([d({constructOnly:!0})],iy.prototype,"rules",void 0),c([d()],iy.prototype,"rulesHash",void 0),c([d({constructOnly:!0})],iy.prototype,"request",void 0),iy=c([O("esri.networks.RulesTable")],iy);const KJe=iy;let Xa=class extends Y{constructor(e){super(e),this.conditionBarriers=[],this.outputConditions=[],this.functions=[],this.functionBarriers=[],this.traversabilityScope=null,this.shortestPathNetworkAttributeName=null,this.includeBarriers=null,this.validateConsistency=null,this.ignoreBarriersAtStartingPoints=null}};c([d({type:[Object],json:{write:!0}})],Xa.prototype,"conditionBarriers",void 0),c([d({type:[Object],json:{write:!0}})],Xa.prototype,"outputConditions",void 0),c([d({type:[Object],json:{write:!0}})],Xa.prototype,"functions",void 0),c([d({type:[Object],json:{write:!0}})],Xa.prototype,"functionBarriers",void 0),c([d({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],Xa.prototype,"traversabilityScope",void 0),c([d({type:String,json:{write:!0}})],Xa.prototype,"shortestPathNetworkAttributeName",void 0),c([d({type:Boolean,json:{write:!0}})],Xa.prototype,"includeBarriers",void 0),c([d({type:Boolean,json:{write:!0}})],Xa.prototype,"validateConsistency",void 0),c([d({type:Boolean,json:{write:!0}})],Xa.prototype,"ignoreBarriersAtStartingPoints",void 0),Xa=c([O("esri.networks.support.TraceConfiguration")],Xa);const E7=Xa;let fn=class extends E7{constructor(e){super(e),this.filterBarriers=[],this.domainNetworkName=null,this.filterBitsetNetworkAttributeName=null,this.filterFunctionBarriers=[],this.filterScope=null,this.includeContainers=null,this.includeContent=null,this.includeIsolated=null,this.includeStructures=null,this.includeUpToFirstSpatialContainer=null,this.nearestNeighbor=null,this.outputFilterCategories=[],this.outputFilters=[],this.propagators=[],this.subnetworkName=null,this.targetTierName=null,this.tierName=null,this.validateLocatability=null}};c([d({type:[Object],json:{write:!0}})],fn.prototype,"filterBarriers",void 0),c([d({type:String,json:{write:!0}})],fn.prototype,"domainNetworkName",void 0),c([d({type:String,json:{write:!0}})],fn.prototype,"filterBitsetNetworkAttributeName",void 0),c([d({type:[Object],json:{write:!0}})],fn.prototype,"filterFunctionBarriers",void 0),c([d({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],fn.prototype,"filterScope",void 0),c([d({type:Boolean,json:{write:!0}})],fn.prototype,"includeContainers",void 0),c([d({type:Boolean,json:{write:!0}})],fn.prototype,"includeContent",void 0),c([d({type:Boolean,json:{write:!0}})],fn.prototype,"includeIsolated",void 0),c([d({type:Boolean,json:{write:!0}})],fn.prototype,"includeStructures",void 0),c([d({type:Boolean,json:{write:!0}})],fn.prototype,"includeUpToFirstSpatialContainer",void 0),c([d({type:Object,json:{write:!0}})],fn.prototype,"nearestNeighbor",void 0),c([d({type:[Object],json:{write:!0}})],fn.prototype,"outputFilterCategories",void 0),c([d({type:[Object],json:{write:!0}})],fn.prototype,"outputFilters",void 0),c([d({type:[Object],json:{write:!0}})],fn.prototype,"propagators",void 0),c([d({type:String,json:{write:!0}})],fn.prototype,"subnetworkName",void 0),c([d({type:String,json:{write:!0}})],fn.prototype,"targetTierName",void 0),c([d({type:String,json:{write:!0}})],fn.prototype,"tierName",void 0),c([d({type:Boolean,json:{write:!0}})],fn.prototype,"validateLocatability",void 0),fn=c([O("esri.networks.support.UNTraceConfiguration")],fn);const XJe=fn;let mo=class extends sO{constructor(e){super(e),this.globalId=null,this.title=null,this.traceConfiguration=null,this.creationDate=null,this.creator=null,this.description=null,this.minStartingPoints=null,this.resultTypes=[],this.tags=[],this.traceType=null}readTraceConfiguration(e,i){return e.tierName!==void 0?XJe.fromJSON(e):E7.fromJSON(e)}};c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],mo.prototype,"globalId",void 0),c([d({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],mo.prototype,"title",void 0),c([d({type:E7,json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"traceConfiguration",void 0),c([de("service","traceConfiguration")],mo.prototype,"readTraceConfiguration",null),c([d({type:Date,json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"creationDate",void 0),c([d({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"creator",void 0),c([d({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"description",void 0),c([d({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],mo.prototype,"minStartingPoints",void 0),c([d({type:[Object],json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"resultTypes",void 0),c([d({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],mo.prototype,"tags",void 0),c([d({type:QT.apiValues,json:{type:QT.jsonValues,origins:{service:{read:QT.read,write:QT.write}},read:!1}})],mo.prototype,"traceType",void 0),mo=c([O("esri.networks.support.NamedTraceConfiguration")],mo);const QJe=mo;let zd=class extends _e{constructor(e){super(e),this.rulesTableId=null,this.rulesTableUrl=null,this.subnetworksTableId=null,this.subnetworksTableUrl=null,this.dirtyAreasLayerId=null,this.dirtyAreasLayerUrl=null}};c([d({constructOnly:!0})],zd.prototype,"rulesTableId",void 0),c([d({constructOnly:!0})],zd.prototype,"rulesTableUrl",void 0),c([d({constructOnly:!0})],zd.prototype,"subnetworksTableId",void 0),c([d({constructOnly:!0})],zd.prototype,"subnetworksTableUrl",void 0),c([d({constructOnly:!0})],zd.prototype,"dirtyAreasLayerId",void 0),c([d({constructOnly:!0})],zd.prototype,"dirtyAreasLayerUrl",void 0),zd=c([O("esri.networks.support.NetworkSystemLayers")],zd);const eYe=zd;let yb=class extends Y{constructor(e){super(e),this.id=null,this.name=null}};c([d({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],yb.prototype,"id",void 0),c([d({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],yb.prototype,"name",void 0),c([d({type:Boolean,json:{write:!0}})],yb.prototype,"isUpstreamTerminal",void 0),yb=c([O("esri.networks.support.Terminal")],yb);const tYe=yb,ek=new Fe({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});let Hp=class extends Y{constructor(e){super(e),this.defaultConfiguration=null,this.id=null,this.name=null,this.terminals=[],this.traversabilityModel=null}};c([d({type:String,json:{write:!0}})],Hp.prototype,"defaultConfiguration",void 0),c([d({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],Hp.prototype,"id",void 0),c([d({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],Hp.prototype,"name",void 0),c([d({type:[tYe],json:{write:!0}})],Hp.prototype,"terminals",void 0),c([d({type:ek.apiValues,json:{type:ek.jsonValues,read:ek.read,write:ek.write}})],Hp.prototype,"traversabilityModel",void 0),Hp=c([O("esri.networks.support.TerminalConfiguration")],Hp);const NX=Hp,iYe="esri.networks.UtilityNetwork",tk=se.getLogger(iYe);let na=class extends ZJe{constructor(e){super(e),this.sharedNamedTraceConfigurations=[],this.type="utility"}get serviceTerritoryFeatureLayerId(){var e;return((e=this.dataElement)==null?void 0:e.serviceTerritoryFeatureLayerId)??null}get networkSystemLayers(){var e,i,n,r,s,o;return new eYe({rulesTableId:(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId,rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(i=this.sourceJSON)==null?void 0:i.systemLayers.rulesTableId}`:null,subnetworksTableId:(n=this.sourceJSON)==null?void 0:n.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${(r=this.sourceJSON)==null?void 0:r.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:(s=this.sourceJSON)==null?void 0:s.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${(o=this.sourceJSON)==null?void 0:o.systemLayers.dirtyAreasLayerId}`:null})}get rulesTableId(){var e;return Ay(tk,"rulesTableId",{replacement:"networkSystemLayers.rulesTableId",version:"4.25"}),(e=this.sourceJSON)==null?void 0:e.systemLayers.rulesTableId}get rulesTableUrl(){return Ay(tk,"rulesTableUrl",{replacement:"networkSystemLayers.rulesTableUrl",version:"4.25"}),this.sourceJSON?`${this.featureServiceUrl}/${this.networkSystemLayers.rulesTableId}`:null}get subnetworksTableId(){var e;return Ay(tk,"subnetworksTableId",{replacement:"networkSystemLayers.subnetworksTableId",version:"4.25"}),(e=this.sourceJSON)==null?void 0:e.systemLayers.subnetworksTableId}get subnetworksTableUrl(){return Ay(tk,"subnetworksTableUrl",{replacement:"networkSystemLayers.subnetworksTableUrl",version:"4.25"}),this.sourceJSON?`${this.featureServiceUrl}/${this.networkSystemLayers.subnetworksTableId}`:null}get terminalConfigurations(){var e;return((e=this.dataElement)==null?void 0:e.terminalConfigurations.map(i=>NX.fromJSON(i)))||[]}get domainNetworkNames(){var e;return((e=this.dataElement)==null?void 0:e.domainNetworks.map(i=>i.domainNetworkName))||[]}get _utilityLayerList(){var i,n;const e=new Set;return(n=(i=this.dataElement)==null?void 0:i.domainNetworks)==null||n.map(r=>{r.edgeSources.map(s=>{e.add(s.layerId)}),r.junctionSources.map(s=>{e.add(s.layerId)})}),e}async load(e){return this.addResolvingPromise(super.load(e)),this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(e)),this}getTerminalConfiguration(e){var u,h,p,f;let i=null,n=null;const r=e.layer;let s=null;if((r==null?void 0:r.type)!=="feature"||(s=r.layerId,s===null))return null;const o=e.attributes;if(o==null)return null;for(const g of Object.keys(o))g.toUpperCase()==="ASSETGROUP"&&(i=e.getAttribute(g)),g.toUpperCase()==="ASSETTYPE"&&(n=e.getAttribute(g));if(!this.dataElement)return null;let a=null;const l=this.dataElement.domainNetworks;for(const g of l){const v=(u=g.junctionSources)==null?void 0:u.find(b=>b.layerId===s);if(v){const b=(h=v.assetGroups)==null?void 0:h.find(_=>_.assetGroupCode===i);if(b){const _=(p=b.assetTypes)==null?void 0:p.find(w=>w.assetTypeCode===n);if(_){a=_.terminalConfigurationId;break}}}}if(a!=null){const g=(f=this.dataElement.terminalConfigurations)==null?void 0:f.find(v=>v.terminalConfigurationId===a);return g?NX.fromJSON(g):null}return null}getTierNames(e){var n;const i=(n=this.dataElement)==null?void 0:n.domainNetworks.find(r=>r.domainNetworkName===e);return(i==null?void 0:i.tiers.map(r=>r.name))||[]}async getRulesTable(){return this._createRulesTable()}isUtilityLayer(e){return this._utilityLayerList.has(e.layerId)}async _loadNamedTraceConfigurationsFromNetwork(e){var r;if(((r=this.sharedNamedTraceConfigurations)==null?void 0:r.length)===0)return;const i=this.sharedNamedTraceConfigurations.map(s=>s.globalId),n=await this.queryNamedTraceConfigurations({globalIds:i},e);for(const s of this.sharedNamedTraceConfigurations){const o=n==null?void 0:n.find(a=>a.globalId===s.globalId);if(o){const a=o.write({},{origin:"service"});s.read(a,{origin:"service"})}}}async _createRulesTable(){var s;const e=new Ph({url:this.rulesTableUrl});await e.load();const i=(s=this.dataElement)==null?void 0:s.domainNetworks;if(!i)return null;const n=i.flatMap(o=>[...o.edgeSources,...o.junctionSources]),r=(await this._queryRulesTable(e)).map(o=>this._hydrateRuleInfo(e,n,o));return new KJe({layer:e,rules:r})}async _queryRulesTable(e){const i=new pl({where:"1=1",outFields:["*"]});return(await UJe(e,i)).features}_hydrateRuleInfo(e,i,n){const r=e.fieldsIndex,s=r.get("RULETYPE"),o=r.get("CREATIONDATE"),a=r.get("FROMNETWORKSOURCEID"),l=r.get("FROMASSETGROUP"),u=r.get("FROMASSETTYPE"),h=r.get("FROMTERMINALID"),p=r.get("TONETWORKSOURCEID"),f=r.get("TOASSETGROUP"),g=r.get("TOASSETTYPE"),v=r.get("TOTERMINALID"),b=r.get("VIANETWORKSOURCEID"),_=r.get("VIAASSETGROUP"),w=r.get("VIAASSETTYPE"),S=r.get("VIATERMINALID"),C=n.attributes[s.name],$=new Date(n.attributes[o.name]),M=[{networkSourceId:n.attributes[a.name],assetGroupId:n.attributes[l.name],assetTypeId:n.attributes[u.name],terminalId:n.attributes[h.name]},{networkSourceId:n.attributes[p.name],assetGroupId:n.attributes[f.name],assetTypeId:n.attributes[g.name],terminalId:n.attributes[v.name]},{networkSourceId:n.attributes[b.name],assetGroupId:n.attributes[_.name],assetTypeId:n.attributes[w.name],terminalId:n.attributes[S.name]}];let P;(function(D){D[D.from=0]="from",D[D.to=1]="to",D[D.via=2]="via"})(P||(P={}));const k={ruleType:C,creationDate:$};for(const D of[P.from,P.to,P.via]){if(C!==ma.RTEdgeJunctionEdgeConnectivity&&D===P.via)continue;const z=M[D],B=i.find(me=>me.sourceId===z.networkSourceId),j=B==null?void 0:B.assetGroups.find(me=>me.assetGroupCode===z.assetGroupId),K=j==null?void 0:j.assetTypes.find(me=>me.assetTypeCode===z.assetTypeId);let ie=this._getTerminal(C,K,z);C!==ma.RTContainment&&C!==ma.RTAttachment||(ie=null);let te="";switch(D){case P.from:te="from";break;case P.to:te="to";break;case P.via:te="via"}k[`${te}NetworkSource`]=B,k[`${te}AssetGroup`]=j,k[`${te}AssetType`]=K,k[`${te}Terminal`]=ie}return k}_getTerminal(e,i,n){var o,a;if(e===ma.RTAttachment||e===ma.RTContainment)return null;const r=i==null?void 0:i.terminalConfigurationId,s=(o=this.terminalConfigurations)==null?void 0:o.find(l=>l.id===r);return((a=s==null?void 0:s.terminals)==null?void 0:a.find(l=>l.id===n.terminalId))??null}};c([d({type:[QJe],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],na.prototype,"sharedNamedTraceConfigurations",void 0),c([d({type:["utility"],readOnly:!0,json:{read:!1,write:!1}})],na.prototype,"type",void 0),c([d({readOnly:!0})],na.prototype,"serviceTerritoryFeatureLayerId",null),c([d({readOnly:!0})],na.prototype,"networkSystemLayers",null),c([d({readOnly:!0})],na.prototype,"rulesTableId",null),c([d({readOnly:!0})],na.prototype,"rulesTableUrl",null),c([d({readOnly:!0})],na.prototype,"subnetworksTableId",null),c([d({readOnly:!0})],na.prototype,"subnetworksTableUrl",null),c([d({readOnly:!0})],na.prototype,"terminalConfigurations",null),c([d({readOnly:!0})],na.prototype,"domainNetworkNames",null),na=c([O("esri.networks.UtilityNetwork")],na);const Age=na,nYe=Object.freeze(Object.defineProperty({__proto__:null,default:Age},Symbol.toStringTag,{value:"Module"}));let ny=class extends Y{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(r=>r.toJSON()),i=this.geometries[0],n={};return n.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),n.inSR=i.spatialReference.wkid||JSON.stringify(i.spatialReference.toJSON()),n.geometries=JSON.stringify({geometryType:Ww(i),geometries:e}),this.transformation&&(n.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(n.transformForward=this.transformForward),n}};c([d()],ny.prototype,"geometries",void 0),c([d({json:{read:{source:"outSR"}}})],ny.prototype,"outSpatialReference",void 0),c([d()],ny.prototype,"transformation",void 0),c([d()],ny.prototype,"transformForward",void 0),ny=c([O("esri.rest.support.ProjectParameters")],ny);const xO=ny,rYe=Ht(xO);async function r6(t,e,i){e=rYe(e);const n=r1(t),r={...n.query,f:"json",...e.toJSON()},s=e.outSpatialReference,o=Ww(e.geometries[0]),a=vR(r,i);return rt(n.path+"/project",a).then(({data:{geometries:l}})=>Ode(l,o,s))}let Gp=class extends Y{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};c([d({type:String,json:{write:!0}})],Gp.prototype,"facilityIdField",void 0),c([d({type:String,json:{write:!0}})],Gp.prototype,"layerId",void 0),c([d({type:String,json:{write:!0}})],Gp.prototype,"nameField",void 0),c([d({type:String,json:{write:!0}})],Gp.prototype,"siteIdField",void 0),c([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],Gp.prototype,"sublayerId",void 0),Gp=c([O("esri.layers.support.FacilityLayerInfo")],Gp);const sYe=Gp;let ic=class extends Y{constructor(e){super(e),this.facilityIdField=null,this.layerId=null,this.levelIdField=null,this.levelNumberField=null,this.longNameField=null,this.shortNameField=null,this.sublayerId=null,this.verticalOrderField=null}};c([d({type:String,json:{write:!0}})],ic.prototype,"facilityIdField",void 0),c([d({type:String,json:{write:!0}})],ic.prototype,"layerId",void 0),c([d({type:String,json:{write:!0}})],ic.prototype,"levelIdField",void 0),c([d({type:String,json:{write:!0}})],ic.prototype,"levelNumberField",void 0),c([d({type:String,json:{write:!0}})],ic.prototype,"longNameField",void 0),c([d({type:String,json:{write:!0}})],ic.prototype,"shortNameField",void 0),c([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ic.prototype,"sublayerId",void 0),c([d({type:String,json:{write:!0}})],ic.prototype,"verticalOrderField",void 0),ic=c([O("esri.layers.support.LevelLayerInfo")],ic);const oYe=ic;let ry=class extends Y{constructor(e){super(e),this.layerId=null,this.nameField=null,this.siteIdField=null,this.sublayerId=null}};c([d({type:String,json:{write:!0}})],ry.prototype,"layerId",void 0),c([d({type:String,json:{write:!0}})],ry.prototype,"nameField",void 0),c([d({type:String,json:{write:!0}})],ry.prototype,"siteIdField",void 0),c([d({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],ry.prototype,"sublayerId",void 0),ry=c([O("esri.layers.support.SiteLayerInfo")],ry);const aYe=ry;let vb=class extends Y{constructor(e){super(e),this.levelLayer=null,this.facilityLayer=null,this.siteLayer=null}};c([d({type:oYe,json:{write:!0}})],vb.prototype,"levelLayer",void 0),c([d({type:sYe,json:{write:!0}})],vb.prototype,"facilityLayer",void 0),c([d({type:aYe,json:{write:!0}})],vb.prototype,"siteLayer",void 0),vb=c([O("esri.support.MapFloorInfo")],vb);const lYe=vb;let bb=class extends _t(Y){constructor(e){super(e),this.expression=null,this.returnType="string",this.title=null}};c([d({type:String,json:{write:{isRequired:!0}}})],bb.prototype,"expression",void 0),c([d({type:["number","string"],json:{write:!0}})],bb.prototype,"returnType",void 0),c([d({type:String,json:{write:!0}})],bb.prototype,"title",void 0),bb=c([O("esri.webdoc.geotriggersInfo.ExpressionInfo")],bb);const Mge=bb,ik=new Fe({deviceLocation:"device-location"});let BS=class extends _t(Y){constructor(e){super(e),this.filterExpression=null,this.type="device-location"}};c([d({type:Mge,json:{write:!0}})],BS.prototype,"filterExpression",void 0),c([d({type:ik.apiValues,readOnly:!0,json:{type:ik.jsonValues,read:ik.read,write:ik.write}})],BS.prototype,"type",void 0),BS=c([O("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],BS);const cYe=BS;let HS=class extends _t(Y){constructor(e){super(e),this.geometry=null,this.where=null}};c([d({types:xm,json:{read:Yr,write:!0}})],HS.prototype,"geometry",void 0),c([d({type:String,json:{write:!0}})],HS.prototype,"where",void 0),HS=c([O("esri.webdoc.geotriggersInfo.FeatureFilter")],HS);const uYe=HS;let _b=class extends _t(Y){constructor(e){super(e),this.layerId=null,this.layerUrl=null,this.type="feature-layer"}};c([d({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerUrl===null}}}}})],_b.prototype,"layerId",void 0),c([d({type:String,json:{write:{overridePolicy(){return{isRequired:this.layerId===null}}}}})],_b.prototype,"layerUrl",void 0),c([Ce({featureLayer:"feature-layer"},{readOnly:!0})],_b.prototype,"type",void 0),_b=c([O("esri.webdoc.geotriggersInfo.FeatureLayerSource")],_b);const dYe=_b;let sy=class extends _t(Y){constructor(e){super(e),this.fenceSource=null,this.filter=null,this.bufferDistance=null,this.type="features"}};c([d({type:dYe,json:{write:{isRequired:!0}}})],sy.prototype,"fenceSource",void 0),c([d({type:uYe,json:{write:!0}})],sy.prototype,"filter",void 0),c([d({type:Number,json:{write:!0}})],sy.prototype,"bufferDistance",void 0),c([Ce({features:"features"},{readOnly:!0})],sy.prototype,"type",void 0),sy=c([O("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],sy);const hYe=sy;let gA=class extends _t(Y){constructor(e){super(e),this.type="fence"}};c([Ce({fence:"fence"},{readOnly:!0})],gA.prototype,"type",void 0),gA=c([O("esri.webdoc.geotriggersInfo.Geotrigger")],gA);const Oge=gA;let GS=class extends _t(Y){constructor(e){super(e),this.expressionInfo=null,this.requestedActions=null}};c([d({type:Mge,json:{write:!0}})],GS.prototype,"expressionInfo",void 0),c([d({type:[String],json:{write:!0}})],GS.prototype,"requestedActions",void 0),GS=c([O("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],GS);const pYe=GS,fYe=new Fe({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),mYe=new Fe({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"}),nk=new Fe({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});let nc=class extends Oge{constructor(e){super(e),this.enterExitRule="enter-contains-and-exit-does-not-intersect",this.feed=null,this.feedAccuracyMode="use-geometry",this.fenceNotificationRule=null,this.fenceParameters=null,this.name=null,this.notificationOptions=null,this.type="fence"}};c([Ce(fYe)],nc.prototype,"enterExitRule",void 0),c([d({type:cYe,json:{write:{isRequired:!0}}})],nc.prototype,"feed",void 0),c([Ce(mYe)],nc.prototype,"feedAccuracyMode",void 0),c([d({type:nk.apiValues,json:{type:nk.jsonValues,read:nk.read,write:{writer:nk.write,isRequired:!0}}})],nc.prototype,"fenceNotificationRule",void 0),c([d({type:hYe,json:{write:{isRequired:!0}}})],nc.prototype,"fenceParameters",void 0),c([d({type:String,json:{write:!0}})],nc.prototype,"name",void 0),c([d({type:pYe,json:{write:!0}})],nc.prototype,"notificationOptions",void 0),c([Ce({fence:"fence"},{readOnly:!0})],nc.prototype,"type",void 0),nc=c([O("esri.webdoc.geotriggersInfo.FenceGeotrigger")],nc);const gYe=nc,yYe={base:Oge,key:"type",typeMap:{fence:gYe}};let yA=class extends _t(Y){constructor(e){super(e),this.geotriggers=null}};c([d({types:[yYe],json:{write:{isRequired:!0}}})],yA.prototype,"geotriggers",void 0),yA=c([O("esri.webdoc.GeotriggersInfo")],yA);const vYe=yA;var s6;let wb=s6=class extends Y{constructor(t){super(t),this.activeRange=null,this.currentRangeExtent=null,this.fullRangeExtent=null}clone(){return new s6(G({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};c([d({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],wb.prototype,"activeRange",void 0),c([d({type:[Number],json:{write:!0}})],wb.prototype,"currentRangeExtent",void 0),c([d({type:[Number],json:{write:!0}})],wb.prototype,"fullRangeExtent",void 0),wb=s6=c([O("esri.webdoc.RangeInfo")],wb);const C7=wb;var o6;let fu=o6=class extends Y{constructor(t){super(t),this.enabled=!1,this.longNames=!1,this.minimized=!1,this.pinnedLevels=!1,this.site=null,this.facility=null,this.level=null}clone(){return new o6(G({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};c([d({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],fu.prototype,"enabled",void 0),c([d({type:Boolean,json:{read:{source:"longNames"},write:{target:"longNames"}}})],fu.prototype,"longNames",void 0),c([d({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],fu.prototype,"minimized",void 0),c([d({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],fu.prototype,"pinnedLevels",void 0),c([d({type:String,json:{read:{source:"site"},write:{target:"site"}}})],fu.prototype,"site",void 0),c([d({type:String,json:{read:{source:"facility"},write:{target:"facility"}}})],fu.prototype,"facility",void 0),c([d({type:String,json:{read:{source:"level"},write:{target:"level"}}})],fu.prototype,"level",void 0),fu=o6=c([O("esri.webdoc.widgets.FloorFilter")],fu);const bYe=fu;var a6;const rk=new Fe({slider:"slider",picker:"picker"});let xb=a6=class extends Y{constructor(t){super(t),this.interactionMode=null,this.numStops=null,this.stopInterval=null}clone(){return new a6({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};c([d({type:rk.apiValues,nonNullable:!0,json:{type:rk.jsonValues,default:null,read:{reader:rk.read},write:{isRequired:!0,writer:rk.write}}})],xb.prototype,"interactionMode",void 0),c([d({type:Number,json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const t=this.stopInterval!=null;return{enabled:!t,isRequired:!t}}}}})],xb.prototype,"numStops",void 0),c([d({type:Number,json:{write:{overridePolicy(){return{isRequired:this.numStops==null}}}}})],xb.prototype,"stopInterval",void 0),xb=a6=c([O("esri.webdoc.widgets.Range")],xb);const _Ye=xb;var l6;let Qn=l6=class extends Y{constructor(t){super(t),this.currentTimeExtent=null,this.fullTimeExtent=null,this.loop=!1,this.numStops=null,this.numThumbs=null,this.stopDelay=null,this.stopInterval=null,this.stops=null}readCurrentTimeExtent(t){if(!t)return;const e=t[0]!=null?new Date(t[0]):null,i=t[1]!=null?new Date(t[1]):null;return new Zs({start:e,end:i})}writeCurrentTimeExtent(t,e,i){t&&rr(i,[A(t.start)?t.start.getTime():null,A(t.end)?t.end.getTime():null],e)}readFullTimeExtent(t,e){const i=e.properties;if(!i)return;const n=i.endTime!=null?new Date(i.endTime):null,r=i.startTime!=null?new Date(i.startTime):null;return new Zs({start:r,end:n})}writeFullTimeExtent(t,e){if(!t)return;const i=e.properties=e.properties||{},n=t.end,r=t.start;n&&(i.endTime=A(n)?n.getTime():null),r&&(i.startTime=A(r)?r.getTime():null)}readStopInterval(t,e,i){return t?ww.fromJSON({value:t.interval,unit:t.units},i):null}writeStopInterval(t,e,i,n){if(!t)return;const r=t.toJSON(n);rr(i,{interval:r.value,units:r.unit},e)}readStops(t){return t&&t.length?t.map(e=>new Date(e)):null}writeStops(t,e,i){t&&t.length&&rr(i,t.map(n=>n.getTime()),e)}clone(){return new l6(G({currentTimeExtent:this.currentTimeExtent,fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};c([d({type:Zs,json:{read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],Qn.prototype,"currentTimeExtent",void 0),c([de("currentTimeExtent")],Qn.prototype,"readCurrentTimeExtent",null),c([fe("currentTimeExtent")],Qn.prototype,"writeCurrentTimeExtent",null),c([d({type:Zs,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],Qn.prototype,"fullTimeExtent",void 0),c([de("fullTimeExtent")],Qn.prototype,"readFullTimeExtent",null),c([fe("fullTimeExtent")],Qn.prototype,"writeFullTimeExtent",null),c([d({type:Boolean,nonNullable:!0,json:{default:!1,read:{source:"properties.loop"},write:{target:"properties.loop"}}})],Qn.prototype,"loop",void 0),c([d({type:Number,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var n;const t=!!this.stopInterval,e=!!((n=this.stops)!=null&&n.length),i=!(t||e);return{enabled:i,isRequired:i}}}}})],Qn.prototype,"numStops",void 0),c([d({type:[1,2],nonNullable:!0,json:{read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",isRequired:!0}}})],Qn.prototype,"numThumbs",void 0),c([d({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],Qn.prototype,"stopDelay",void 0),c([d({type:ww,json:{read:{source:"properties.timeStopInterval"},write:{target:"properties.timeStopInterval",overridePolicy(){var i;const t=this.numStops!=null,e=!!((i=this.stops)!=null&&i.length);return{enabled:!e,isRequired:!(t||e)}}}}})],Qn.prototype,"stopInterval",void 0),c([de("stopInterval")],Qn.prototype,"readStopInterval",null),c([fe("stopInterval")],Qn.prototype,"writeStopInterval",null),c([d({type:[Date],json:{read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:this.numStops==null&&!this.stopInterval}}}}})],Qn.prototype,"stops",void 0),c([de("stops")],Qn.prototype,"readStops",null),c([fe("stops")],Qn.prototype,"writeStops",null),Qn=l6=c([O("esri.webdoc.widgets.TimeSlider")],Qn);const wYe=Qn;var c6;let Sb=c6=class extends Y{constructor(t){super(t),this.range=null,this.timeSlider=null,this.floorFilter=null}clone(){return new c6(G({range:this.range,timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};c([d({type:_Ye,json:{write:!0}})],Sb.prototype,"range",void 0),c([d({type:wYe,json:{write:!0}})],Sb.prototype,"timeSlider",void 0),c([d({type:bYe,json:{write:!0}})],Sb.prototype,"floorFilter",void 0),Sb=c6=c([O("esri.webdoc.Widgets")],Sb);const xYe=Sb,SYe={width:600,height:400},sk=1.5;function EYe(t,e){e=e||SYe;let{width:i,height:n}=e;const r=i/n;return r<sk?n=i/sk:r>sk&&(i=n*sk),i>t.width&&(n*=t.width/i,i=t.width),n>t.height&&(i*=t.height/n,n=t.height),{width:Math.round(i),height:Math.round(n)}}function zX(t){return{enabled:!!(t!=null&&t.length)}}var u6;let Eb=u6=class extends Y{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new u6({exactMatch:this.exactMatch,type:this.type,name:this.name})}};c([d({type:Boolean,json:{write:!0}})],Eb.prototype,"exactMatch",void 0),c([d({type:String,json:{write:!0}})],Eb.prototype,"name",void 0),c([Ce(wB)],Eb.prototype,"type",void 0),Eb=u6=c([O("esri.webdoc.applicationProperties.SearchLayerField")],Eb);const CYe=Eb;var d6;let Cb=d6=class extends Y{constructor(t){super(t),this.field=null,this.id=null,this.subLayer=null}clone(){return new d6(G({field:this.field,id:this.id,subLayer:this.subLayer}))}};c([d({type:CYe,json:{write:{isRequired:!0}}})],Cb.prototype,"field",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],Cb.prototype,"id",void 0),c([d({type:Bt,json:{write:!0}})],Cb.prototype,"subLayer",void 0),Cb=d6=c([O("esri.webdoc.applicationProperties.SearchLayer")],Cb);const IYe=Cb;var h6;let Ib=h6=class extends Y{constructor(t){super(t),this.exactMatch=!1,this.name=null,this.type=null}clone(){return new h6({exactMatch:this.exactMatch,type:this.type,name:this.name})}};c([d({type:Boolean,json:{write:!0}})],Ib.prototype,"exactMatch",void 0),c([d({type:String,json:{write:!0}})],Ib.prototype,"name",void 0),c([Ce(wB)],Ib.prototype,"type",void 0),Ib=h6=c([O("esri.webdoc.applicationProperties.SearchTableField")],Ib);const TYe=Ib;var p6;let qS=p6=class extends Y{constructor(t){super(t),this.field=null,this.id=null}clone(){return new p6(G({field:this.field,id:this.id}))}};c([d({type:TYe,json:{write:{isRequired:!0}}})],qS.prototype,"field",void 0),c([d({type:String,json:{write:{isRequired:!0}}})],qS.prototype,"id",void 0),qS=p6=c([O("esri.webdoc.applicationProperties.SearchTable")],qS);const kYe=qS;var f6;const Pge=we.ofType(IYe),Rge=we.ofType(kYe);let mu=f6=class extends Y{constructor(t){super(t),this.addressSearchEnabled=!0,this.enabled=!0,this.hintText=null,this.layers=new Pge,this.tables=new Rge}readAddressSearchEnabled(t){return!t}writeAddressSearchEnabled(t,e,i){e[i]=!t}clone(){return new f6(G({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};c([d({type:Boolean,nonNullable:!0,json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],mu.prototype,"addressSearchEnabled",void 0),c([de("addressSearchEnabled")],mu.prototype,"readAddressSearchEnabled",null),c([fe("addressSearchEnabled")],mu.prototype,"writeAddressSearchEnabled",null),c([d({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,write:!0}}}})],mu.prototype,"enabled",void 0),c([d({type:String,json:{write:!0}})],mu.prototype,"hintText",void 0),c([d({type:Pge,json:{write:{overridePolicy:zX},origins:{"web-scene":{write:{isRequired:!0}}}}})],mu.prototype,"layers",void 0),c([d({type:Rge,json:{read:!0,write:{overridePolicy:zX}}})],mu.prototype,"tables",void 0),mu=f6=c([O("esri.webdoc.applicationProperties.Search")],mu);const $Ye=mu;var m6;let vA=m6=class extends Y{constructor(t){super(t),this.search=null}clone(){return new m6(G({search:this.search}))}};c([d({type:$Ye,json:{write:!0}})],vA.prototype,"search",void 0),vA=m6=c([O("esri.webdoc.applicationProperties.Viewing")],vA);const AYe=vA;var g6;let Tb=g6=class extends Y{constructor(t){super(t),this.editing=null,this.offline=null,this.viewing=null}clone(){return new g6(G({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};c([d({json:{write:!0}})],Tb.prototype,"editing",void 0),c([d({json:{write:!0}})],Tb.prototype,"offline",void 0),c([d({type:AYe,json:{write:!0}})],Tb.prototype,"viewing",void 0),Tb=g6=c([O("esri.webmap.ApplicationProperties")],Tb);const MYe=Tb;var y6;let o0=y6=class extends Y{constructor(){super(...arguments),this.url=""}destroy(){this.url=""}clone(){return new y6({url:this.url})}};c([d({type:String,json:{write:{isRequired:!0}}})],o0.prototype,"url",void 0),o0=y6=c([O("esri.webdoc.support.SlideThumbnail")],o0);var v6;let gu=v6=class extends F0(Y){constructor(t){super(t),this.name=null,this.thumbnail=new o0,this.timeExtent=null}castThumbnail(t){return typeof t=="string"?new o0({url:t}):Ht(o0,t)}set viewpoint(t){const{targetGeometry:e,scale:i}=t;A(e)&&e.type==="point"&&U(i)&&se.getLogger(this.declaredClass).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",t),this._set("viewpoint",t)}readViewpoint(t,e){const{extent:i,viewpoint:n}=e;return Tr.fromJSON(n||{targetGeometry:i})}writeViewpoint(t,e,i,n){if(!t)return;const{targetGeometry:r}=t;if(A(r)&&r.type!=="extent"){const s="Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.";n!=null&&n.messages?n.messages.push(new N("property:unsupported",s)):se.getLogger(this.declaredClass).error(s)}else A(r)&&(e.extent=r.toJSON()),e[i]=t.toJSON()}clone(){return new v6(G({name:this.name,thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};c([d({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],gu.prototype,"name",void 0),c([d({type:o0,json:{write:{overridePolicy:t=>({enabled:!(!t||!t.url)})}}})],gu.prototype,"thumbnail",void 0),c([st("thumbnail")],gu.prototype,"castThumbnail",null),c([d({type:Zs,json:{write:!0}})],gu.prototype,"timeExtent",void 0),c([d({type:Tr,nonNullable:!0,json:{write:!0}})],gu.prototype,"viewpoint",null),c([de("viewpoint",["extent","viewpoint"])],gu.prototype,"readViewpoint",null),c([fe("viewpoint")],gu.prototype,"writeViewpoint",null),gu=v6=c([O("esri.webmap.Bookmark")],gu);const OYe=gu;var b6;let oy=b6=class extends _e{constructor(t){super(t),this.background=null,this.rangeInfo=null,this.spatialReference=null,this.viewpoint=null}clone(){return new b6(G({background:this.background,rangeInfo:this.rangeInfo,spatialReference:this.spatialReference,viewpoint:this.viewpoint}))}};c([d({type:BR})],oy.prototype,"background",void 0),c([d({type:C7})],oy.prototype,"rangeInfo",void 0),c([d({type:Ge})],oy.prototype,"spatialReference",void 0),c([d({type:Tr})],oy.prototype,"viewpoint",void 0),oy=b6=c([O("esri.webmap.InitialViewProperties")],oy);const bA=oy;let _6=class{constructor(e,i,n=""){this.major=e,this.minor=i,this._context=n}lessThan(e,i){return this.major<e||e===this.major&&this.minor<i}since(e,i){return!this.lessThan(e,i)}validate(e){if(this.major!==e.major){const i=this._context&&this._context+":",n=this._context&&this._context+" ";throw new N(i+"unsupported-version",`Required major ${n}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:e})}}clone(){return new _6(this.major,this.minor,this._context)}static parse(e,i=""){const[n,r]=e.split("."),s=/^\s*\d+\s*$/;if(!n||!n.match||!n.match(s))throw new N((i&&i+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:e});if(!r||!r.match||!r.match(s))throw new N((i&&i+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:e});const o=parseInt(n,10),a=parseInt(r,10);return new _6(o,a,i)}},RE=class extends _6{constructor(e,i){super(e,i,"webmap")}};const _A=new RE(2,27),AF="Web Map",Lge=we.ofType(OYe),PYe=we.ofType(Age),WS=new Map;WS.set("image/jpeg","jpeg"),WS.set("image/jpg","jpg"),WS.set("image/png","png"),WS.set("image/gif","gif");const RYe="ArcGIS Pro",jX=n7.JSAPI,VX="CollectorDisabled",UX="Collector",BX="Data Editing",HX="OfflineDisabled",GX="Offline",qX="Workforce Project",WX="Workforce Worker",JX="Workforce Dispatcher",LYe="Offline Map Areas",DYe="FieldMapsDisabled",YX=n7.DEVELOPER_BASEMAP,ZX="UtilityNetwork",FYe=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map(t=>t.toLowerCase());let Kt=class extends TR(_l.LoadableMixin(zI(dme))){constructor(e){super(e),this._isAuthoringAppSetByUser=!1,this._isAuthoringAppVersionSetByUser=!1,this._thumbnailFilename=null,this._updateFromPromise=null,this._resourceReferences={portalItem:null,paths:[]},this.applicationProperties=null,this.bookmarks=new Lge,this.floorInfo=null,this.geotriggersInfo=null,this.initialViewProperties=new bA,this.portalItem=null,this.presentation=null,this.sourceVersion=null,this.widgets=null,this.utilityNetworks=null,this.authoringApp=this.authoringAppVersion=null,this._isAuthoringAppSetByUser=this._isAuthoringAppVersionSetByUser=!1}destroy(){const e=this.portalItem;this.portalItem=null,e==null||e.destroy()}initialize(){if(this.when().catch(e=>{se.getLogger(this.declaredClass).error("#load()","Failed to load web map",e)}),this.resourceInfo){let e;try{e=this._validateJSON(this.resourceInfo)}catch(i){return void this.addResolvingPromise(Promise.reject(i))}this.read(e)}}set authoringApp(e){this._isAuthoringAppSetByUser=!0,this._set("authoringApp",e)}writeAuthoringApp(e,i){e&&this._isAuthoringAppSetByUser?i.authoringApp=e:i.authoringApp=jX}set authoringAppVersion(e){this._isAuthoringAppVersionSetByUser=!0,this._set("authoringAppVersion",e)}writeAuthoringAppVersion(e,i){e&&this._isAuthoringAppVersionSetByUser?i.authoringAppVersion=e:i.authoringAppVersion=A9}readInitialViewProperties(e,i){var s;const n=new bA;i.background&&(n.background=BR.fromJSON(i.background));const r=(s=i.initialState)==null?void 0:s.viewpoint;return r&&(r.rotation&&RE.parse(i.version||"","webmap").lessThan(2,20)&&i.authoringApp===RYe&&(r.rotation*=-1),n.viewpoint=Tr.fromJSON(r)),i.mapRangeInfo&&(n.rangeInfo=C7.fromJSON(i.mapRangeInfo)),i.spatialReference&&(n.spatialReference=Ge.fromJSON(i.spatialReference)),n}writeInitialViewProperties(e,i,n,r){if(!e)return;const s=e.background;s&&s.color&&(i.background=s.write({},r)),e.viewpoint&&(i.initialState={viewpoint:e.viewpoint.write({},r)}),e.rangeInfo&&(i.mapRangeInfo=e.rangeInfo.toJSON(r)),e.spatialReference&&(i.spatialReference=e.spatialReference.write({},r))}writeLayers(e,i,n,r){i[n]=this._writeLayers(e,r,"operational-layers")}readSourceVersion(e,i){const[n,r]=i.version.split(".");return new RE(parseInt(n,10),parseInt(r,10))}writeSourceVersion(e,i,n){i[n]=`${_A.major}.${_A.minor}`}writeTables(e,i,n,r){const s=this._writeLayers(e,r,"tables");s.length&&(i[n]=s)}get thumbnailUrl(){return this.portalItem&&this.portalItem.thumbnailUrl||null}set thumbnailUrl(e){e?(this._override("thumbnailUrl",e),this._thumbnailFilename=this._generateCustomThumbnailFilename(e)):this._clearThumbnailOverride()}load(e){return this.addResolvingPromise(this._loadFromSource()),Promise.resolve(this)}loadAll(){return f7(this,e=>{e(this.ground,this.basemap,this.layers,this.tables)})}read(e,i){i={...i,origin:"web-map"};const n=this._getAuthoringPropsState();_oe(this,e,r=>super.read(e,r),i),this._restoreAuthoringPropsFromState(n)}write(e,i){if(this.loadStatus!=="loaded"){const n=new N("webmap:not-loaded","Web map must be loaded before it can be serialized");throw se.getLogger(this.declaredClass).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),n}return this._removeDanglingLayerRefs(),i={...i,origin:"web-map",restrictedWebMapWriting:!0,webmap:this},super.write(e,i)}async save(e){e=e||{},this._validateItem();const i=q(()=>import("./saveUtils-89317582.js"),["assets/saveUtils-89317582.js","assets/resourceUtils-ba3186a7.js"]);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),await this._validateMap();const n=this.portalItem,r=_i(n.itemUrl),s={origin:"web-map",messages:[],writtenProperties:[],url:r,portal:n.portal||zi.getDefault(),portalItem:n,verifyItemRelativeUrls:r?{rootPath:r.path,writtenUrls:[]}:null,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},o=this.write({},s);return await Promise.all(s.resources.pendingOperations),this._validateJSONForWriting(s,e),await this._updateItemProperties(n),await this._updateItem(n,o,s),await Promise.all([this._updateItemThumbnail(),i.then(({saveResources:a})=>a(this._resourceReferences,s,null))]),n}async saveAs(e,i){i=i||{};const n=this._getPortalItem(e),r=q(()=>import("./saveUtils-89317582.js"),["assets/saveUtils-89317582.js","assets/resourceUtils-ba3186a7.js"]);await this._updateFromPromise,await this.load(),await this._loadLayerContainers(),await this._beforeSave(),await this._validateMap();const s={origin:"web-map",messages:[],writtenProperties:[],url:null,portal:n.portal,portalItem:n,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}},o=this.write({},s);await Promise.all(s.resources.pendingOperations),this._validateJSONForWriting(s,i),await this._updateItemPropertiesForSaveAs(n);const a=this._getThumbnailState();return await this._createItem(n,o,s,i)&&(this._resourceReferences.portalItem=n),this._restoreThumbnailFromState(a),await Promise.all([this._updateItemThumbnail(),r.then(({saveResources:l})=>l(this._resourceReferences,s,null))]),n}async updateFrom(e,i){const n=this._updateFromInternal(e,i);this._updateFromPromise=n,await n,n===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(e){var n,r,s,o;const i=this.resourceInfo;return this._collectAllLayersJSON([...((n=i==null?void 0:i.baseMap)==null?void 0:n.baseMapLayers)||[],...(i==null?void 0:i.operationalLayers)||[],...((o=(s=(r=this.basemap)==null?void 0:r.resourceInfo)==null?void 0:s.data)==null?void 0:o.baseMapLayers)||[]]).find(a=>a.id===e.id)}_collectAllLayersJSON(e){return e.reduce((i,n)=>(i.push(n),n.layerType==="GroupLayer"&&(i=i.concat(this._collectAllLayersJSON(n.layers||[]))),i),[])}_writeLayers(e,i,n){return i={...i,layerContainerType:n},e.map(r=>RV(r,n==="tables"?null:this.getLayerJSONFromResourceInfo(r),i)).filter(Boolean).toArray()}_loadFromSource(){return this.resourceInfo?this._loadFromJSON(this.resourceInfo,{origin:"web-map"}):this.portalItem&&this.portalItem.id?this._loadFromItem(this.portalItem):Promise.resolve()}async _loadFromItem(e){if(await e.load().catch(r=>{throw new N("webmap:load-portal-item","Failed to load portal item",{error:r})}),e.type!=="Web Map")throw new N("webmap:invalid-portal-item",`Invalid portal item type '${e.type}', expected 'Web Map'`,{type:e.type});const i=await e.fetchData();this.resourceInfo=i;const n={origin:"web-map",url:_i(e.itemUrl),portal:e.portal||zi.getDefault(),portalItem:e,readResourcePaths:[]};return await this._readAndLoadFromJSON(i,n),this._resourceReferences={portalItem:e,paths:n.readResourcePaths??[]},this._computeInitialViewpoint()}_readAndLoadFromJSON(e,i){const n=this._validateJSON(e);return this.read(n,i),this._loadFromJSON(n,i)}_validateJSON(e){const i=RE.parse(e.version||"","webmap");return _A.validate(i),e.version=`${i.major}.${i.minor}`,e}_loadFromJSON(e,i){const n={context:{...i,layerContainerType:"operational-layers"}};return this.portalItem&&(n.context.portal=this.portalItem.portal||zi.getDefault()),q(()=>import("./layersCreator-c0362962.js"),["assets/layersCreator-c0362962.js","assets/lazyLayerLoader-cee9c15c.js","assets/portalLayers-5d2ca38f.js","assets/layersLoader-1fb962fe.js","assets/fetchService-52b55be4.js","assets/jsonContext-c42fadc4.js"]).then(({populateOperationalLayers:r})=>{const s=[],o=e.operationalLayers;o&&o.length&&s.push(r(this.layers,o,n));const a={...n,context:{...n.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"},l=e.tables;return l&&l.length&&s.push(r(this.tables,l,a)),Zi(s).then(()=>{})})}async _computeInitialViewpoint(){var r;let e=this.initialViewProperties;if((r=e==null?void 0:e.viewpoint)==null?void 0:r.targetGeometry)return;const n=await this._getExtentFromItem();n&&(e=e?e.clone():new bA,e.viewpoint=new Tr,e.viewpoint.targetGeometry=n,this.initialViewProperties=e)}async _getExtentFromItem(){var n,r;const e=(n=this.initialViewProperties)==null?void 0:n.spatialReference,i=(r=this.portalItem)==null?void 0:r.extent;return e&&i?e.isWGS84?i.clone():e.isWebMercator?Tc(i):(await q(()=>import("./geometryServiceUtils-92f77436.js"),[])).getGeometryServiceURL(this.portalItem).then(s=>{const o=new xO;return o.geometries=[i],o.outSpatialReference=e,r6(s,o)}).then(s=>s[0]).catch(s=>(se.getLogger(this.declaredClass).error("Error projecting item's extent:",s),null)):null}_removeDanglingLayerRefs(){const e=this.applicationProperties,i=e&&e.viewing&&e.viewing.search,n=o=>this.allLayers.some(a=>a.id===o);i&&i.layers&&(i.layers=i.layers.filter(o=>n(o.id))),i&&i.tables&&(i.tables=i.tables.filter(o=>this.tables.some(a=>a.id===o.id)));const r=e&&e.editing&&e.editing.locationTracking;r&&r.info&&!n(r.info.layerId)&&(e.editing=null);const s=this.presentation&&this.presentation.slides;s&&s.forEach(o=>{o.visibleLayers&&(o.visibleLayers=o.visibleLayers.filter(a=>n(a.id)))})}async _validateMap(){var i;if(!((i=this.basemap)!=null&&i.baseLayers.length))throw new N("webmap:save","Map does not have a valid basemap with a base layer.");let e=null;if(await jo(()=>{const n=MHe(this.initialViewProperties,this.basemap);return e=n.spatialReference,!n.updating}),!ui(e,this.initialViewProperties.spatialReference))throw new N("webmap:save","The spatial reference of the basemap is not compatible with the one from the map.",{expected:this.initialViewProperties.spatialReference,actual:e})}_validateItem(){if(!this.portalItem)throw se.getLogger(this.declaredClass).error("save: requires the portalItem property to be set"),new N("webmap:portal-item-not-set","Portal item to save to has not been set on the WebMap");this._validateItemType(this.portalItem)}_validateItemType(e){if(e.type!==AF)throw new N("webmap:portal-item-wrong-type",`Portal item needs to have type "${AF}"`)}_loadLayerContainers(){const e=[];return this.basemap&&e.push(this.basemap.load()),this.ground&&e.push(this.ground.load()),Zi(e).then(()=>{})}async _beforeSave(){const e=[];for(const i of this.allLayers)if("beforeSave"in i&&typeof i.beforeSave=="function"){const n=i.beforeSave();n&&e.push(n)}await Zi(e)}_loadAllLayers(){const e=this._getAllLayersAndTables().map(i=>i.load());return Zi(e).then(()=>{})}_getAllLayersAndTables(){return this.allLayers.concat(this.allTables)}_validateJSONForWriting(e,i){let n=(e.messages?e.messages:[]).filter(r=>r.type==="error").map(r=>new N(r.name,r.message,r.details));if(e.blockedRelativeUrls&&(n=n.concat(e.blockedRelativeUrls.map(r=>new N("url:unsupported",`Relative url '${r}' is not supported in Web Map`)))),i.ignoreUnsupported&&(n=n.filter(r=>r.name!=="layer:unsupported"&&r.name!=="symbol:unsupported"&&r.name!=="symbol-layer:unsupported"&&r.name!=="property:unsupported"&&r.name!=="url:unsupported")),n.length>0)throw new N("webmap:save","Failed to save webmap due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:n})}async _updateItemProperties(e){e.extent=await this._getWGS84Extent(this.initialViewProperties.viewpoint.targetGeometry),await this._updateTypeKeywords(e)}async _updateItemPropertiesForSaveAs(e){qo(e,VX),qo(e,DYe),qo(e,n7.METADATA),qo(e,HX),qo(e,LYe),qo(e,JX),qo(e,qX),qo(e,WX),await this._updateItemProperties(e)}async _getWGS84Extent(e){const i=e.clone().normalize();let n;if(i.length>1)for(const r of i)n?r.width>n.width&&(n=r):n=r;else n=i[0];return this._projectToWGS84(n)}async _projectToWGS84(e){const i=e.spatialReference;if(i.isWGS84)return e.clone();if(i.isWebMercator)return sh(e);const n=await q(()=>import("./geometryServiceUtils-92f77436.js"),[]),r=await n.getGeometryServiceURL(this.portalItem),s=new xO;return s.geometries=[e],s.outSpatialReference=Ge.WGS84,(await r6(r,s))[0]}async _updateTypeKeywords(e){cv(e,jX),await this._loadAllLayers(),this._evalCollectorKeyword(e),this._evalDataEditingKeyword(e),this._evalOfflineKeyword(e),this._evalDeveloperBasemapKeyword(e),this._evalUtilityNetworkKeyword(e),e.typeKeywords&&(e.typeKeywords=e.typeKeywords.filter((i,n,r)=>r.indexOf(i)===n))}_evalCollectorKeyword(e){cb(e,VX)||cb(e,qX)||cb(e,WX)||cb(e,JX)||!this._hasEditableFeatureLayer()?qo(e,UX):cv(e,UX)}_evalDataEditingKeyword(e){this._hasEditableFeatureLayer()?cv(e,BX):qo(e,BX)}_evalOfflineKeyword(e){!cb(e,HX)&&this._isOfflineCapableMap()?cv(e,GX):qo(e,GX)}_evalDeveloperBasemapKeyword(e){AHe(this.basemap)?cv(e,YX):qo(e,YX)}_evalUtilityNetworkKeyword(e){var i;(i=this.utilityNetworks)!=null&&i.length?cv(e,ZX):qo(e,ZX)}_hasEditableFeatureLayer(){return this._getAllLayersAndTables().some(e=>e.loaded&&ZJ(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled)}_isOfflineCapableMap(){return this._getAllLayersAndTables().filter(e=>e.type!=="group").every(e=>e.loaded&&this._isOfflineCapableLayer(e))}_isFeatureCollectionLike(e){return oR(e)||e.type==="map-notes"||e.type==="route"}_isOfflineCapableLayer(e){return ZJ(e)&&e.capabilities.operations.supportsSync||this._isFeatureCollectionLike(e)&&!e.portalItem||(e.type==="tile"||e.type==="vector-tile")&&(e.capabilities.operations.supportsExportTiles||this._isExportableAGOLTileLayer(e)||cme(e))&&e.spatialReference.equals(this.initialViewProperties.spatialReference)}_isExportableAGOLTileLayer(e){return e.type==="tile"&&EVe(e.url)&&FYe.some(i=>{var n;return(n=e.url)==null?void 0:n.toLowerCase().includes("/"+i+"/")})}async _updateItem(e,i,n){await e.update({data:i}),this._syncUpInstanceWithItem(e,i,n)}async _createItem(e,i,n,r){const s=this.portalItem,o={item:s,authenticated:!(!(s!=null&&s.id)||!s.portal.user)},a=e.portal;await a.signIn();const{copyAllowed:l,itemReloaded:u}=await this._isCopyAllowed(o,a);if(o.authenticated||(o.authenticated=u),!l)throw new N("webmap:save-as-copy-not-allowed","Owner of this map does not allow others to save a copy");const h=await this._initializeNewItem(e,o,i,r);return this.portalItem=e,this._syncUpInstanceWithItem(e,i,n),h}async _isCopyAllowed(e,i){var s;const{item:n,authenticated:r}=e;return n!=null&&n.id&&((s=n.typeKeywords)!=null&&s.includes("useOnly"))?n.portal.portalHostname!==i.portalHostname?{copyAllowed:!1,itemReloaded:!1}:(r||await n.reload(),{copyAllowed:n.itemControl==="admin"||n.itemControl==="update",itemReloaded:!0}):{copyAllowed:!0,itemReloaded:!1}}async _initializeNewItem(e,i,n,r){var p;const s=e.portal,{item:o,authenticated:a}=i,{folder:l,copyAllResources:u}=r;let h=!1;if(u&&(o!=null&&o.id)&&sOe(o.portal.url,s.url)&&(a||await o.reload(),o.isOrgItem)){const{total:f}=await o.fetchResources();h=!!f}if(h){const f=await o.copy({copyResources:"all",folder:l});e.id=f.id,e.portal=f.portal;const g=e.toJSON();await e.load(),e.read(g),await e.update({data:n})}else await((p=s.user)==null?void 0:p.addItem({item:e,folder:l,data:n}));return h}_syncUpInstanceWithItem(e,i,n){sO.prototype.read.call(this,{version:i.version,authoringApp:i.authoringApp,authoringAppVersion:i.authoringAppVersion},{origin:"web-map",ignoreDefaults:!0,url:e.itemUrl&&_i(e.itemUrl)}),VJe(n),this.resourceInfo=i}async _updateItemThumbnail(){var e;this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await((e=this.portalItem)==null?void 0:e.updateThumbnail({thumbnail:this.thumbnailUrl,filename:this._thumbnailFilename})),this._clearThumbnailOverride())}_getPortalItem(e){let i=gh.from(e);return i.id&&(i=i.clone(),i.id=null),i.type||(i.type=AF),i.portal||(i.portal=zi.getDefault()),this._validateItemType(i),i}async _updateFromInternal(e,i){if(i=i||{},await jo(()=>e.ready),this._updateInitialViewProperties(e,i),e.map===this)for(const n of e.allLayerViews)for(const r of["visible","featureEffect"])r in n&&r in n.layer&&n._isOverridden(r)&&(n.layer[r]=n[r]);await this._updateThumbnailUrl(e,i)}_updateInitialViewProperties(e,i){var n,r;if(i.backgroundExcluded||(this.initialViewProperties.background=(n=e.background)==null?void 0:n.clone()),this.initialViewProperties.spatialReference=(r=e.spatialReference)==null?void 0:r.clone(),i.viewpointExcluded||(this.initialViewProperties.viewpoint=new Tr({rotation:e.rotation,scale:i.scalePreserved?e.scale:null,targetGeometry:this._getViewExtent(e)})),!i.widgetsExcluded)for(const s of e.persistableViewModels)s.updateWebDocument(this)}_getViewExtent(e){const i=e.center.clone().normalize(),n=e.extent.clone(),r=n.width/2;return n.xmin=i.x-r,n.xmax=i.x+r,n}async _updateThumbnailUrl(e,i){if(i.thumbnailExcluded)return;const n=EYe(e,i.thumbnailSize),r=await e.takeScreenshot({format:"png",width:n.width,height:n.height});this._setAutoGeneratedThumbnail(r.dataUrl)}_setAutoGeneratedThumbnail(e){this.thumbnailUrl=e,this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl"),this.clear("thumbnailUrl","user"),this._thumbnailFilename=null}_generateCustomThumbnailFilename(e){if(Tm(e)){const i=JP(e),n=i&&i.mediaType,r=n&&WS.get(n.toLowerCase())||null,s=`thumbnail${Date.now()}`;return r?`${s}.${r}`:s}return null}_getThumbnailState(){let e=this.thumbnailUrl;return e&&(e=this._isOverridden("thumbnailUrl")?e:k9(e,"w","8192")),{thumbnailUrl:e,filename:this._thumbnailFilename}}_restoreThumbnailFromState(e){this.thumbnailUrl=e.thumbnailUrl,this._thumbnailFilename=e.filename}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(e){e.isAuthoringAppSetByUser?this.authoringApp=e.authoringApp:this._isAuthoringAppSetByUser=!1,e.isAuthoringAppVersionSetByUser?this.authoringAppVersion=e.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}static fromJSON(e){const i=e;if(!i)throw new N("webmap:empty-resource","Expected a JSON resource but got nothing");return new this({resourceInfo:i})}};Kt.VERSION=_A,c([d({type:MYe,json:{write:!0}})],Kt.prototype,"applicationProperties",void 0),c([d({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Kt.prototype,"authoringApp",null),c([fe("authoringApp")],Kt.prototype,"writeAuthoringApp",null),c([d({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],Kt.prototype,"authoringAppVersion",null),c([fe("authoringAppVersion")],Kt.prototype,"writeAuthoringAppVersion",null),c([d({json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Kt.prototype,"basemap",void 0),c([d({type:Lge,json:{write:{overridePolicy:t=>({enabled:!!(t&&t.length>0),ignoreOrigin:!0})}}})],Kt.prototype,"bookmarks",void 0),c([d({type:lYe,json:{read:{source:"mapFloorInfo"},write:{target:"mapFloorInfo"}}})],Kt.prototype,"floorInfo",void 0),c([d({type:vYe,json:{write:!0}})],Kt.prototype,"geotriggersInfo",void 0),c([d({type:bA,nonNullable:!0,json:{read:{source:["background","initialState.viewpoint","mapRangeInfo","spatialReference"]},write:{ignoreOrigin:!0,target:{background:{type:BR},"initialState.viewpoint":{type:Tr},mapRangeInfo:{type:C7},spatialReference:{type:Ge}}}}})],Kt.prototype,"initialViewProperties",void 0),c([de("initialViewProperties")],Kt.prototype,"readInitialViewProperties",null),c([fe("initialViewProperties")],Kt.prototype,"writeInitialViewProperties",null),c([d({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],Kt.prototype,"layers",void 0),c([fe("layers")],Kt.prototype,"writeLayers",null),c([d({type:gh})],Kt.prototype,"portalItem",void 0),c([d({json:{write:!0}})],Kt.prototype,"presentation",void 0),c([d()],Kt.prototype,"resourceInfo",void 0),c([d({readOnly:!0,type:RE,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],Kt.prototype,"sourceVersion",void 0),c([de("sourceVersion")],Kt.prototype,"readSourceVersion",null),c([fe("sourceVersion")],Kt.prototype,"writeSourceVersion",null),c([d({json:{read:!1,write:{ignoreOrigin:!0}}})],Kt.prototype,"tables",void 0),c([fe("tables")],Kt.prototype,"writeTables",null),c([d()],Kt.prototype,"thumbnailUrl",null),c([d({type:xYe,json:{write:!0}})],Kt.prototype,"widgets",void 0),c([d({type:PYe,json:{read:!0,write:!0}})],Kt.prototype,"utilityNetworks",void 0),Kt=c([O("esri.WebMap")],Kt);const MF=Kt,NYe={minZoom:9,lods:Ice.create().lods,geometry:{type:"polygon",rings:[[[-78.75745863699996,36.07002718000007],[-78.70607066199995,36.08235327400007],[-78.49934382399994,36.01263877200006],[-78.41242341499998,35.97099564700005],[-78.39138092199994,35.94414115500007],[-78.34901264499996,35.93119994500006],[-78.33915947999998,35.91373151400006],[-78.28787057699998,35.89119995200008],[-78.24532674699998,35.82017932400004],[-78.46565083499996,35.70069565700004],[-78.70889932799997,35.519481978000044],[-78.75843785699999,35.53222101800003],[-78.99507250999994,35.61017849700005],[-78.94938517999998,35.753017484000054],[-78.94926766099996,35.795162885000025],[-78.93436763399995,35.83411397700007],[-78.90607903799997,35.868106451000074],[-78.83252015399995,35.86833376000004],[-78.81153242799996,35.92940419300004],[-78.76548003999994,35.921115857000075],[-78.75440329099996,35.93625837800005],[-78.72001086699998,35.962579521000066],[-78.70055074099997,36.00774804200006],[-78.75636187099997,36.02728012400007],[-78.75745863699996,36.07002718000007]]]}};let qp=class extends _e{constructor(e){super(e),this._viewpointHandle=null,this._handles=new wn,this.group=null}initialize(){this._handles.add(ji(()=>{var e;return(e=this.view)==null?void 0:e.ui},"expand",e=>{const{target:i}=e;i&&i!==this&&i.expanded&&i.group&&i.group===this.group&&this._collapse()}))}destroy(){this._viewpointHandle=null,this.view=null,this._handles.destroy(),this._handles=null}set autoCollapse(e){this._set("autoCollapse",e),this._watchViewpoint()}set expanded(e){const i=!!e;this._set("expanded",i);const n=this.get("view.ui");n&&n.emit("expand",{target:this}),this._viewpointHandleChange(i)}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){this._get("view")!==e&&(this._set("view",e),e&&Ys(()=>e.ready,()=>{this.view===e&&this._watchViewpoint()},{once:!0,initial:!0}))}_viewpointHandleChange(e){this._viewpointHandle&&(e?Ys(()=>this.view.stationary,()=>this._viewpointHandle.resume(),{once:!0,initial:!0}):this._viewpointHandle.pause())}_watchViewpoint(){const e="viewpoint";this._handles.remove(e),this._viewpointHandle=null;const{autoCollapse:i,view:n}=this;if(n&&i){const r=wPe(()=>n.type==="3d"?n.camera:n.viewpoint,()=>this._collapse());this._handles.add(r,e),this._viewpointHandle=r}}_collapse(){this.expanded=!1}};c([d({value:!1})],qp.prototype,"autoCollapse",null),c([d({value:!1})],qp.prototype,"expanded",null),c([d()],qp.prototype,"group",void 0),c([d({readOnly:!0})],qp.prototype,"state",null),c([d({value:null})],qp.prototype,"view",null),qp=c([O("esri.widgets.Expand.ExpandViewModel")],qp);const Dge=qp,no="esri-expand",Cn={base:`${no} esri-widget`,modeAuto:`${no}--auto`,modeDrawer:`${no}--drawer`,modeFloating:`${no}--floating`,container:`${no}__container`,containerExpanded:`${no}__container--expanded`,panel:`${no}__panel`,button:"esri-widget--button",text:"esri-icon-font-fallback-text",icon:"esri-collapse__icon",iconExpanded:`${no}__icon--expanded`,iconNumber:`${no}__icon-number`,iconNumberExpanded:`${no}__icon-number--expanded`,expandIcon:"esri-icon-expand",collapseIcon:"esri-icon-collapse",content:`${no}__content`,contentExpanded:`${no}__content--expanded`,expandMask:`${no}__mask`,expandMaskExpanded:`${no}__mask--expanded`};let an=class extends qt{constructor(e,i){super(e,i),this.closeOnEsc=!0,this.collapseTooltip="",this.content="",this.expandTooltip="",this.iconNumber=0,this.messages=null,this.messagesCommon=null,this.mode="auto",this.viewModel=new Dge,this._handleKeyDown=n=>{const{closeOnEsc:r,_toggleButtonEl:s,expanded:o}=this;!o||!r||n.target===s||n.key!=="Escape"||(typeof r=="function"?r(n):r)&&(this.expanded=!1,s==null||s.focus())}}get contentId(){return`${this.id}_controls_content`}get expandTitle(){const{expanded:e,messagesCommon:i,collapseTooltip:n,expandTooltip:r}=this;return e?n||i.collapse:r||i.expand}get autoCollapse(){return this.viewModel.autoCollapse}set autoCollapse(e){this.viewModel.autoCollapse=e}get collapseIconClass(){return Cn.collapseIcon}set collapseIconClass(e){this._overrideIfSome("collapseIconClass",e)}get expanded(){return this.viewModel.expanded}set expanded(e){this.viewModel.expanded=e}get expandIconClass(){return VC(this.content)?this.content.iconClass:Cn.expandIcon}set expandIconClass(e){this._overrideIfSome("expandIconClass",e)}get group(){return this.viewModel.group}set group(e){this.viewModel.group=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}expand(){this.viewModel.expanded=!0}collapse(){this.viewModel.expanded=!1}toggle(){this.viewModel.expanded=!this.viewModel.expanded}render(){const{mode:e}=this,i={[Cn.modeAuto]:e==="auto",[Cn.modeDrawer]:e==="drawer",[Cn.modeFloating]:e==="floating"};return L("div",{class:this.classes(Cn.base,i),onkeydown:this._handleKeyDown},this.renderMask(),this.renderContainer())}renderContainer(){const{expanded:e}=this,i={[Cn.containerExpanded]:e};return L("div",{class:this.classes(Cn.container,i)},this.renderPanel(),this.renderContent())}renderMask(){const{expanded:e}=this,i={[Cn.expandMaskExpanded]:e};return L("div",{bind:this,onclick:this._toggle,class:this.classes(Cn.expandMask,i)})}renderBadgeNumber(){const{expanded:e,iconNumber:i}=this;return i&&!e?L("span",{key:"expand__icon-number",class:Cn.iconNumber},i):null}renderPanelNumber(){const{iconNumber:e,expanded:i}=this;return e&&i?L("span",{key:"expand__expand-icon-number",class:this.classes(Cn.iconNumber,Cn.iconNumberExpanded)},e):null}renderIcon(){const{collapseIconClass:e,expandIconClass:i,expanded:n}=this,r={[Cn.iconExpanded]:n,[e]:n,[i]:!n};return e===i&&(r[e]=!0),L("span",{"aria-hidden":"true",class:this.classes(Cn.icon,r)})}renderTitle(){return L("span",{class:Cn.text},this.expandTitle)}renderExpandButton(){const{expanded:e,expandTitle:i,contentId:n}=this;return L("div",{afterCreate:this._storeToggleButtonEl,"aria-controls":n,"aria-expanded":e?"true":"false",bind:this,class:Cn.button,onclick:this._toggle,onkeydown:this._toggle,role:"button",tabindex:"0",title:i},this.renderBadgeNumber(),this.renderIcon(),this.renderTitle())}renderPanel(){return L("div",{class:Cn.panel},this.renderExpandButton(),this.renderPanelNumber())}renderContent(){const{expanded:e,contentId:i,content:n}=this,r={[Cn.contentExpanded]:e},s={id:i,role:"region",class:this.classes(Cn.content,r)};return typeof n=="string"?L("div",{key:"content__string",innerHTML:n,...s}):VC(n)?L("div",{key:"content__widget",...s},n.render()):n instanceof HTMLElement?L("div",{key:"content__html-element",bind:n,afterCreate:this._attachToNode,...s}):ide(n)?L("div",{key:"content__node",bind:n.domNode,afterCreate:this._attachToNode,...s}):null}_toggle(){this.toggle()}_attachToNode(e){const i=this;e.appendChild(i)}_storeToggleButtonEl(e){this._toggleButtonEl=e}};c([d({readOnly:!0})],an.prototype,"contentId",null),c([d({readOnly:!0})],an.prototype,"expandTitle",null),c([d()],an.prototype,"autoCollapse",null),c([d()],an.prototype,"closeOnEsc",void 0),c([d()],an.prototype,"collapseIconClass",null),c([d()],an.prototype,"collapseTooltip",void 0),c([d()],an.prototype,"content",void 0),c([d()],an.prototype,"expanded",null),c([d()],an.prototype,"expandIconClass",null),c([d()],an.prototype,"expandTooltip",void 0),c([d()],an.prototype,"group",null),c([d()],an.prototype,"iconNumber",void 0),c([d()],an.prototype,"label",null),c([d(),bt("esri/widgets/Expand/t9n/Expand")],an.prototype,"messages",void 0),c([d(),bt("esri/t9n/common")],an.prototype,"messagesCommon",void 0),c([d()],an.prototype,"mode",void 0),c([d()],an.prototype,"view",null),c([d({type:Dge})],an.prototype,"viewModel",void 0),c([Ln()],an.prototype,"_toggle",null),an=c([O("esri.widgets.Expand")],an);const Fge=an;let jd=class extends o2($r.EventedAccessor){constructor(e){super(e),this._initialViewpoint=null,this._goingHomeController=null,this.go=this.go.bind(this)}destroy(){this._cancelGo(),this.view=null}get state(){return this.get("view.ready")?this._goingHomeController?"going-home":"ready":"disabled"}set view(e){this._initialViewpoint=null,this._set("view",e),e&&e.when().then(()=>{this.view===e&&(this._initialViewpoint=e.viewpoint.clone(),this.notifyChange("viewpoint"))})}get viewpoint(){return this._get("viewpoint")||this._initialViewpoint}set viewpoint(e){this._set("viewpoint",e)}async go(){var i;if(!this.get("view.ready"))throw new N("home:disabled-state","Cannot go when disabled.");this._cancelGo(),this.emit("go");const e=new AbortController;this._goingHomeController=e;try{await((i=this.view)==null?void 0:i.when()),await this.callGoTo({target:this.viewpoint,options:{signal:e.signal}})}catch{}this._goingHomeController=null}cancelGo(){this._cancelGo()}_cancelGo(){const{_goingHomeController:e}=this;e&&e.abort(),this._goingHomeController=null}};c([d()],jd.prototype,"_goingHomeController",void 0),c([d({readOnly:!0})],jd.prototype,"state",null),c([d()],jd.prototype,"view",null),c([d({type:Tr})],jd.prototype,"viewpoint",null),c([d()],jd.prototype,"go",null),c([d()],jd.prototype,"cancelGo",null),jd=c([O("esri.widgets.Home.HomeViewModel")],jd);const Nge=jd,bv={base:"esri-home esri-widget--button esri-widget",esriIcon:"esri-icon",loadingIcon:"esri-icon-loading-indicator",rotatingIcon:"esri-rotating",widgetIcon:"esri-icon-home",disabled:"esri-disabled"};let ra=class extends qt{constructor(e,i){super(e,i),this.iconClass=bv.widgetIcon,this.messages=null,this.messagesCommon=null,this.viewModel=new Nge}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}get viewpoint(){return this.viewModel.viewpoint}set viewpoint(e){this.viewModel.viewpoint=e}cancelGo(){this.viewModel.cancelGo()}go(){return this.viewModel.go()}render(){var s;const e=(s=this.viewModel)==null?void 0:s.state,{messagesCommon:i,messages:n}=this,r={[bv.disabled]:e==="disabled"};return L("div",{bind:this,class:this.classes(bv.base,r),role:"button",tabIndex:0,onclick:this._go,onkeydown:this._go,"aria-label":n.widgetLabel,title:e==="going-home"?i.cancel:n.title},this.renderIcon())}renderIcon(){var n;const e=(n=this.viewModel)==null?void 0:n.state,i={[bv.esriIcon]:!0,[this.iconClass]:e!=="going-home",[bv.loadingIcon]:e==="going-home",[bv.rotatingIcon]:e==="going-home"};return L("span",{"aria-hidden":"true",class:this.classes(i)})}_go(){const{viewModel:e}=this;e.state==="going-home"?e.cancelGo():e.go()}};c([d()],ra.prototype,"goToOverride",null),c([d()],ra.prototype,"iconClass",void 0),c([d()],ra.prototype,"label",null),c([d(),bt("esri/widgets/Home/t9n/Home")],ra.prototype,"messages",void 0),c([d(),bt("esri/t9n/common")],ra.prototype,"messagesCommon",void 0),c([d()],ra.prototype,"uiStrings",void 0),c([d()],ra.prototype,"view",null),c([d({type:Nge}),cR("go")],ra.prototype,"viewModel",void 0),c([d()],ra.prototype,"viewpoint",null),c([Ln()],ra.prototype,"_go",null),ra=c([O("esri.widgets.Home")],ra);const zYe=ra,Os="esri-scale-bar",qi={base:`${Os} esri-widget`,labelContainer:`${Os}__label-container`,rulerLabelContainer:`${Os}__label-container--ruler`,lineLabelContainer:`${Os}__label-container--line`,topLabelContainer:`${Os}__label-container--top`,bottomLabelContainer:`${Os}__label-container--bottom`,label:`${Os}__label`,line:`${Os}__line`,topLine:`${Os}__line--top`,bottomLine:`${Os}__line--bottom`,ruler:`${Os}__ruler`,rulerBlock:`${Os}__ruler-block`,barContainer:`${Os}__bar-container`,rulerBarContainer:`${Os}__bar-container--ruler`,lineBarContainer:`${Os}__bar-container--line`,disabled:"esri-disabled"};function zge(t){if(!t)return null;if(PP(t)&&t.wkid){const e=qRe[t.wkid];if(e)return e}if(t.wkt){const e=jYe(t.wkt);if(e)return e}return null}function jYe(t){const e=HRe.exec(t);if(!e||e.length!==2)return null;const i=e[1].split(",");if(!i||i.length<3)return null;const n=parseFloat(i[1]),r=parseFloat(i[2]);return isNaN(n)||isNaN(r)?null:{a:n,f:r===0?0:1/r}}function HR(t){const e=zge(t??Ge.WGS84);if(VYe(e))return e;const i=e.a*(1-e.f);return Object.assign(e,{b:i,eSq:1-(i/e.a)**2,radius:(2*e.a+i)/3,densificationRatio:1e4/((2*e.a+i)/3)})}function VYe(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function ok(t,e,i){const{a:n,eSq:r}=HR(i),s=Math.sqrt(r),o=Math.sin(e[1]*wo),a=n*e[0]*wo;let l;return r>0?l=n*((1-r)*(o/(1-r*(o*o))-1/(2*s)*Math.log((1-s*o)/(1+s*o))))*.5:l=n*o,t[0]=a,t[1]=l,t}function GR(t){return zge(t)!==null}function uxt(t,e="square-meters"){if(t.some(o=>!GR(o.spatialReference)))throw new N("geodesic-areas:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let o=0;o<t.length;o++){const a=t[o],l=a.spatialReference,{radius:u,densificationRatio:h}=HR(l),p=u*h;i.push(BYe(a,p))}const n=[],r=[0,0],s=[0,0];for(let o=0;o<i.length;o++){const{rings:a,spatialReference:l}=i[o];let u=0;for(let h=0;h<a.length;h++){const p=a[h];ok(r,p[0],l),ok(s,p[p.length-1],l);let f=s[0]*r[1]-r[0]*s[1];for(let g=0;g<p.length-1;g++)ok(r,p[g+1],l),ok(s,p[g],l),f+=s[0]*r[1]-r[0]*s[1];u+=f}u=kt(u,"square-meters",e),n.push(u/-2)}return n}function UYe(t,e="meters"){if(!t)throw new N("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(n=>!GR(n.spatialReference)))throw new N("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const i=[];for(let n=0;n<t.length;n++){const r=t[n],{spatialReference:s}=r,o=r.type==="polyline"?r.paths:r.rings;let a=0;for(let l=0;l<o.length;l++){const u=o[l];let h=0;for(let p=1;p<u.length;p++){const f=u[p-1][0],g=u[p][0],v=u[p-1][1],b=u[p][1];if(v!==b||f!==g){const _=new jge;Vge(_,[f,v],[g,b],s),h+=_.distance}}a+=h}a=kt(a,"meters",e),i.push(a)}return i}function BYe(t,e){if(t.type!=="polyline"&&t.type!=="polygon")throw new N("geodesic-densify:invalid-geometry","the input geometry is neither polyline nor polygon");const{spatialReference:i}=t;if(!GR(i))throw new N("geodesic-densify:invalid-spatial-reference","the input geometry spatial reference is not supported");const n=t.type==="polyline"?t.paths:t.rings,r=[],s=[0,0],o=new jge;for(const a of n){const l=[];r.push(l),l.push([a[0][0],a[0][1]]);let u,h,p=a[0][0],f=a[0][1];for(let g=0;g<a.length-1;g++){if(u=a[g+1][0],h=a[g+1][1],p===u&&f===h)continue;const v=[p,f];Vge(o,[p,f],[u,h],i);const{azimuth:b,distance:_}=o,w=_/e;if(w>1){for(let S=1;S<=w-1;S++)wA(s,v,b,S*e,i),l.push(s.slice(0));wA(s,v,b,(_+Math.floor(w-1)*e)/2,i),l.push(s.slice(0))}wA(s,v,b,_,i),l.push(s.slice(0)),p=s[0],f=s[1]}}return t.type==="polyline"?new Gs({paths:r,spatialReference:i}):new Ws({rings:r,spatialReference:i})}let jge=class{constructor(e=0,i,n){this.distance=e,this.azimuth=i,this.reverseAzimuth=n}};function wA(t,e,i,n,r){const s=e[0],o=e[1],a=s*wo,l=o*wo,u=(i??0)*wo,{a:h,b:p,f}=HR(r),g=Math.sin(u),v=Math.cos(u),b=(1-f)*Math.tan(l),_=1/Math.sqrt(1+b*b),w=b*_,S=Math.atan2(b,v),C=_*g,$=C*C,M=1-$,P=M*(h*h-p*p)/(p*p),k=1+P/16384*(4096+P*(P*(320-175*P)-768)),D=P/1024*(256+P*(P*(74-47*P)-128));let z,B,j,K,ie=n/(p*k),te=2*Math.PI;for(;Math.abs(ie-te)>1e-12;)j=Math.cos(2*S+ie),z=Math.sin(ie),B=Math.cos(ie),K=D*z*(j+D/4*(B*(2*j*j-1)-D/6*j*(4*z*z-3)*(4*j*j-3))),te=ie,ie=n/(p*k)+K;const me=w*z-_*B*v,Ie=Math.atan2(w*B+_*z*v,(1-f)*Math.sqrt($+me*me)),Me=Math.atan2(z*g,_*B-w*z*v),oe=f/16*M*(4+f*(4-3*M)),ge=Ie/wo,he=(a+(Me-(1-oe)*f*C*(ie+oe*z*(j+oe*B*(2*j*j-1)))))/wo;return t[0]=he,t[1]=ge,t}function Vge(t,e,i,n){const r=e[0]*wo,s=e[1]*wo,o=i[0]*wo,a=i[1]*wo,{a:l,b:u,f:h,radius:p}=HR(n),f=o-r,g=Math.atan((1-h)*Math.tan(s)),v=Math.atan((1-h)*Math.tan(a)),b=Math.sin(g),_=Math.cos(g),w=Math.sin(v),S=Math.cos(v);let C,$,M,P,k,D,z,B,j,K,ie=1e3,te=f;do{if(z=Math.sin(te),B=Math.cos(te),M=Math.sqrt(S*z*(S*z)+(_*w-b*S*B)*(_*w-b*S*B)),M===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;k=b*w+_*S*B,D=Math.atan2(M,k),j=_*S*z/M,$=1-j*j,P=k-2*b*w/$,isNaN(P)&&(P=0),K=h/16*$*(4+h*(4-3*$)),C=te,te=f+(1-K)*h*j*(D+K*M*(P+K*k*(2*P*P-1)))}while(Math.abs(te-C)>1e-12&&--ie>0);if(ie===0){const he=p,et=Math.acos(Math.sin(s)*Math.sin(a)+Math.cos(s)*Math.cos(a)*Math.cos(o-r))*he,wt=o-r,pr=Math.sin(wt)*Math.cos(a),xn=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(wt),fr=Math.atan2(pr,xn);return t.azimuth=fr/wo,t.distance=et,t.reverseAzimuth=void 0,t}const me=$*(l*l-u*u)/(u*u),Ie=me/1024*(256+me*(me*(74-47*me)-128)),Me=u*(1+me/16384*(4096+me*(me*(320-175*me)-768)))*(D-Ie*M*(P+Ie/4*(k*(2*P*P-1)-Ie/6*P*(4*M*M-3)*(4*P*P-3)))),oe=Math.atan2(S*Math.sin(te),_*w-b*S*Math.cos(te)),ge=Math.atan2(_*Math.sin(te),_*w*Math.cos(te)-b*S);return t.azimuth=oe/wo,t.distance=Me,t.reverseAzimuth=ge/wo,t}function HYe(t){const{wkid:e}=t;if(R[e]!=null)return R.values[R[e]];const{wkt:i}=t,n=i.lastIndexOf(",")+1,r=i.lastIndexOf("]]");return parseFloat(i.substring(n,r))}function KX(t,e){return t&&t.includes(e)}function XX(t,e){const{x:i,y:n}=t==="decimal-degrees"?sh(e,!0):e;return[i,n]}function QX({state:{paddedViewState:t},spatialReference:e,width:i}){return e.isWrappable&&t.worldScreenWidth<i}let kb=class extends _e{constructor(e){super(e),this.scaleComputedFrom=Nn(),this.view=null}get state(){return this.get("view.ready")&&this.get("view.type")==="2d"?"ready":"disabled"}getScaleBarProperties(e,i){if(this.state==="disabled"||isNaN(e)||!i)return null;const n=this._getDistanceInKm(this.view,this.scaleComputedFrom);if(U(n))return null;if(i==="metric")return this._getScaleBarProps(e,n,"metric");const r=n/1.609;return this._getScaleBarProps(e,r,"non-metric")}_getLocationUnit(){const e=this.get("view.spatialReference"),{isWebMercator:i,wkid:n,wkt:r}=e;return i||KX(r,"WGS_1984_Web_Mercator")?"decimal-degrees":R[n]!=null||KX(r,"PROJCS")?"linear-unit":"unknown"}_getDistanceInKm(e,i){const{state:n,spatialReference:r}=e,s=this._getLocationUnit();if(s==="linear-unit")return n.extent.width*HYe(r)/1e3;const[o,a]=this._getScaleMeasuringPoints(e,i),l=s==="decimal-degrees"||r.isGeographic&&!GR(r)?Ge.WGS84:r,u=new Gs({paths:[[XX(s,o),XX(s,a)]],spatialReference:l}),h=Rde(u,10);let p;try{[p]=UYe([h],"kilometers")}catch{return null}return p}_getScaleMeasuringPoints(e,i){const{width:n,height:r,position:s,spatialReference:o}=e;if(QX(e)){const{valid:h}=xa(o);return[new Ve(h[0],0,o),new Ve(h[1],0,o)]}let a=i.y-s[1];a>r?a=r:a<0&&(a=0);const l=Nn(0,a),u=Nn(n,a);return[e.toMap(l),e.toMap(u)]}_getScaleBarProps(e,i,n){const{view:r}=this;let s=e*i/(QX(r)?r.state.paddedViewState.worldScreenWidth:r.width),o=n==="metric"?"km":"mi";s<.1&&(o==="mi"?(s*=5280,o="ft"):o==="km"&&(s*=1e3,o="m"));let a=0;for(;s>=1;)s/=10,a++;const l=this._getConstraints(s);if(!l)return null;const{min:u,max:h}=l,p=h/s>=s/u?u:h;return{length:e*(p/s),value:10**a*p,unit:o}}_getConstraints(e){return e>.5?{min:.5,max:1}:e>.3?{min:.3,max:.5}:e>.2?{min:.2,max:.3}:e>.15?{min:.15,max:.2}:e>=.1?{min:.15,max:.1}:void 0}};c([d()],kb.prototype,"scaleComputedFrom",void 0),c([d({readOnly:!0})],kb.prototype,"state",null),c([d()],kb.prototype,"view",void 0),kb=c([O("esri.widgets.Scalebar.ScaleBarViewModel")],kb);const GYe=kb;function ak(t){return 2*t}let rc=class extends qt{constructor(e,i){super(e,i),this.messages=null,this.unit="non-metric",this.viewModel=new GYe}initialize(){this.addHandles([X(()=>{const{view:e}=this;return[e==null?void 0:e.stationary,e==null?void 0:e.center,e==null?void 0:e.scale,e==null?void 0:e.zoom]},([e])=>{e&&this.scheduleRender()})])}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}set style(e){const i=this.unit==="dual"?"line":e;this._set("style",i)}castStyle(e){return e==="line"?e:"ruler"}castUnit(e){return e==="metric"||e==="dual"?e:"non-metric"}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){const e=this.get("viewModel.state")==="disabled",i={[qi.disabled]:e};let n,r;if(!e){const{unit:s,style:o}=this,a=s==="metric"||s==="dual",l=50;if(s==="non-metric"||s==="dual"){const u=this.viewModel.getScaleBarProperties(l,"non-metric");u&&(r=o==="ruler"?this._renderRuler(u):this._renderLine(u,"bottom"))}if(a){const u=this.viewModel.getScaleBarProperties(l,"metric");u&&(n=o==="ruler"?this._renderRuler(u):this._renderLine(u,"top"))}}return L("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(qi.base,i)},n,r)}_renderRuler(e){const i=ak(Math.round(e.length)),{messages:n}=this,r=n[e.unit]||n.unknownUnit,s=`${ak(e.value)} ${r}`;return L("div",{class:this.classes(qi.barContainer,qi.rulerBarContainer),key:"esri-scale-bar__ruler"},L("div",{class:qi.ruler,styles:{width:`${i}px`}},L("div",{class:qi.rulerBlock}),L("div",{class:qi.rulerBlock}),L("div",{class:qi.rulerBlock}),L("div",{class:qi.rulerBlock})),L("div",{class:this.classes(qi.labelContainer,qi.rulerLabelContainer)},L("div",{class:qi.label},"0"),L("div",{class:qi.label},s)))}_renderLine(e,i){const{messages:n}=this,r=n[e.unit]||n.unknownUnit,s=`${ak(e.value)} ${r}`,o={[qi.topLabelContainer]:i==="top",[qi.bottomLabelContainer]:i==="bottom"},a=L("div",{class:this.classes(qi.labelContainer,qi.lineLabelContainer,o),key:"esri-scale-bar__label"},L("div",{class:qi.label},s)),l={[qi.topLine]:i==="top",[qi.bottomLine]:i==="bottom"},u=ak(Math.round(e.length)),h=L("div",{class:this.classes(qi.line,l),key:"esri-scale-bar__line",styles:{width:`${u}px`}});return L("div",{class:this.classes(qi.barContainer,qi.lineBarContainer),key:"esri-scale-bar__line-container"},[h,a])}_handleRootCreateOrUpdate(e){const i=this.viewModel;if(!i)return;const n=e.getBoundingClientRect(),r=n.left+window.pageXOffset,s=n.top+window.pageYOffset,o=Nn(r,s);(o.x!==i.scaleComputedFrom.x||o.y!==i.scaleComputedFrom.y)&&(i.scaleComputedFrom=o)}};c([d()],rc.prototype,"label",null),c([d(),bt("esri/widgets/ScaleBar/t9n/ScaleBar")],rc.prototype,"messages",void 0),c([d()],rc.prototype,"style",null),c([st("style")],rc.prototype,"castStyle",null),c([d()],rc.prototype,"unit",void 0),c([st("unit")],rc.prototype,"castUnit",null),c([d()],rc.prototype,"view",null),c([d()],rc.prototype,"viewModel",void 0),rc=c([O("esri.widgets.ScaleBar")],rc);const qYe=rc;new Fe({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});new Fe({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});let tg=class extends Y{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};c([d({type:String,json:{write:!0}})],tg.prototype,"deviationUnit",void 0),c([d({json:{read:{reader:t=>t?t.map(e=>Yr(e)).filter(A):null},write:{writer:(t,e)=>{e.geometries=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],tg.prototype,"geometries",void 0),c([d({type:Number,json:{write:!0}})],tg.prototype,"maxDeviation",void 0),tg=c([O("esri.rest.support.GeneralizeParameters")],tg),tg.from=Ht(tg);new Fe({preserveShape:"preserve-shape"});let hp=class extends Y{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};c([d({type:String,json:{write:!0}})],hp.prototype,"calculationType",void 0),c([d({type:Boolean,json:{write:!0}})],hp.prototype,"geodesic",void 0),c([d({json:{write:!0}})],hp.prototype,"lengthUnit",void 0),c([d({type:[Gs],json:{read:{reader:t=>t?t.map(e=>Yr(e)):null},write:{writer:(t,e)=>{e.polylines=t.map(i=>i.toJSON())}}}})],hp.prototype,"polylines",void 0),hp=c([O("esri.rest.support.LengthsParameters")],hp),hp.from=Ht(hp);new Fe({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"});new Fe({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});let hd=class extends Y{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};c([d({type:Number,json:{write:!0}})],hd.prototype,"bevelRatio",void 0),c([d({json:{read:{reader:t=>t?t.map(e=>Yr(e)).filter(A):null},write:{writer:(t,e)=>{e.geometries=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],hd.prototype,"geometries",void 0),c([d({type:Number,json:{write:!0}})],hd.prototype,"offsetDistance",void 0),c([d({type:String,json:{write:!0}})],hd.prototype,"offsetHow",void 0),c([d({type:String,json:{write:!0}})],hd.prototype,"offsetUnit",void 0),hd=c([O("esri.rest.support.OffsetParameters")],hd),hd.from=Ht(hd);new Fe({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});let pp=class extends Y{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};c([d({json:{read:{reader:t=>t?t.map(e=>Yr(e)).filter(A):null},write:{writer:(t,e)=>{e.geometries1=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],pp.prototype,"geometries1",void 0),c([d({json:{read:{reader:t=>t?t.map(e=>Yr(e)).filter(A):null},write:{writer:(t,e)=>{e.geometries2=(t==null?void 0:t.map(i=>i.toJSON()))??null}}}})],pp.prototype,"geometries2",void 0),c([d({type:String,json:{write:!0}})],pp.prototype,"relation",void 0),c([d({type:String,json:{write:!0}})],pp.prototype,"relationParameter",void 0),pp=c([O("esri.rest.support.RelationParameters")],pp),pp.from=Ht(pp);new Fe({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});let ig=class extends Y{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};c([d({type:String,json:{write:!0}})],ig.prototype,"extendHow",void 0),c([d({type:[Gs],json:{read:{reader:t=>t?t.map(e=>Yr(e)):null},write:{writer:(t,e)=>{e.polylines=t.map(i=>i.toJSON())}}}})],ig.prototype,"polylines",void 0),c([d({json:{read:{reader:t=>t?Yr(t):null},write:{writer:(t,e)=>{e.trimExtendTo=t.toJSON()}}}})],ig.prototype,"trimExtendTo",void 0),ig=c([O("esri.rest.support.TrimExtendParameters")],ig),ig.from=Ht(ig);const Uge=se.getLogger("esri.widgets.support.geolocationUtils"),WYe={maximumAge:0,timeout:15e3,enableHighAccuracy:!0};function JYe(){const t=ee("esri-geolocation");return t||Uge.warn("geolocation-unsupported","Geolocation unsupported."),t}function YYe(){const t=window.isSecureContext;return t||Uge.warn("insecure-context","Geolocation requires a secure origin."),t}function w6(){return JYe()&&YYe()}function ZYe(t){return t||(t=WYe),new Promise((i,n)=>{setTimeout(()=>n(new N("geolocation:timeout","getting the current geolocation position timed out")),15e3),navigator.geolocation.getCurrentPosition(i,n,t)})}function Bge(t,e){var s;const{position:i,view:n}=t,r=(s=KYe(i))==null?void 0:s.coords;if(!r)throw new N("geometry-service:no-coords","Geolocation has no coordinates");return QYe(XYe(r),n,e)}function KYe(t){const e=t&&t.coords||{},i={accuracy:e.accuracy,altitude:e.altitude,altitudeAccuracy:e.altitudeAccuracy,heading:e.heading,latitude:e.latitude,longitude:e.longitude,speed:e.speed};return t&&{coords:i,timestamp:t.timestamp}}function XYe({longitude:t,latitude:e,altitude:i}){return new Ve({longitude:t,latitude:e,z:i||void 0,spatialReference:{wkid:4326}})}function QYe(t,e,i){if(!e)return Promise.resolve(t);const n=e.spatialReference;return n.isWGS84?Promise.resolve(t):n.isWebMercator?Promise.resolve(Tc(t)):eZe(i).then(r=>{if(!r)throw new N("geometry-service:missing-url","Geometry service URL is missing");const s=new xO({geometries:[t],outSpatialReference:n});return r6(r,s,i).then(o=>o[0])})}function eZe(t){if(lt.geometryServiceUrl)return Promise.resolve(lt.geometryServiceUrl);const e=zi.getDefault();return e.load(t).catch(()=>{}).then(()=>e.get("helperServices.geometry.url"))}const tZe=2500;let yu=class extends o2($r.EventedMixin(_e)){constructor(){super(...arguments),this._geolocationUsable=!0,this._iconPath=pt("esri/images/support/sdk_gps_location.png"),this.geolocationOptions=null,this.goToLocationEnabled=!0,this.graphic=new en({symbol:new e1({url:this._iconPath,width:21,height:21})}),this.scale=null,this.useHeadingEnabled=!0,this.view=null}initialize(){w6()||(this._geolocationUsable=!1)}destroy(){this._clear(),this.view=null}_clear(){this.view&&this.view.graphics.remove(this.graphic)}_getScaleWithinConstraints(e,i){if(!i)return e;if(i.type==="2d"){const{effectiveMaxScale:n,effectiveMinScale:r}=i.constraints;return Math.min(r,Math.max(n,e))}return e}_getScale(e){const{scale:i}=this,n=typeof i=="number"?i:tZe;return this._getScaleWithinConstraints(n,e)}_getHeading(e,i){var o;const n=i==null?void 0:i.spatialReference,r=(n==null?void 0:n.isWebMercator)||(n==null?void 0:n.isGeographic),s=(o=e.coords)==null?void 0:o.heading;if(!(!r||typeof s!="number"||isNaN(s)||s<0||s>360))return s}_addHeading(e){const{heading:i,target:n,view:r}=e;r&&typeof i=="number"&&!isNaN(i)&&(r.type!=="3d"?r.type==="2d"&&(n.rotation=360-i):n.heading=i)}_animatePoint(e,i,n,r){const{view:s}=this;if(!this.goToLocationEnabled||!s)return Promise.resolve(i);const o=this.useHeadingEnabled?this._getHeading(i,s):void 0,a={target:e,scale:n};return this._addHeading({heading:o,target:a,view:s}),this.callGoTo({target:a,options:r}).then(()=>i)}async _setPosition(e,i){try{const n=this.view,r=await Bge({position:e,view:n},i),{graphic:s}=this,{timestamp:o,coords:a}=e,{accuracy:l,altitude:u,altitudeAccuracy:h,heading:p,latitude:f,longitude:g,speed:v}=a,b={timestamp:o,accuracy:l,altitude:u,altitudeAccuracy:h,heading:p,latitude:f,longitude:g,speed:v};s&&(s.geometry=r,s.attributes=b);const _=this._getScale(n);return this._animatePoint(r,e,_,i)}catch(n){throw new N("positioning:invalid-point","Cannot position invalid point",{error:n})}}};c([d()],yu.prototype,"_geolocationUsable",void 0),c([d()],yu.prototype,"geolocationOptions",void 0),c([d()],yu.prototype,"goToLocationEnabled",void 0),c([d({type:en,nonNullable:!0})],yu.prototype,"graphic",void 0),c([d()],yu.prototype,"scale",void 0),c([d()],yu.prototype,"useHeadingEnabled",void 0),c([d()],yu.prototype,"view",void 0),yu=c([O("esri.widgets.support.GeolocationPositioning")],yu);const iZe=yu,nZe=15e3;let vu=class extends iZe{constructor(e){super(e),this._watchId=null,this._trackStartingTimeoutId=null,this._settingPosition=null}destroy(){this._stopTracking()}get state(){return this._geolocationUsable?this.view&&!this.view.ready?"disabled":this._settingPosition||this._trackStartingTimeoutId!==null?"waiting":this.tracking?"tracking":"ready":"feature-unsupported"}get tracking(){return this._watchId!==null}start(){this.state!=="disabled"&&this.state!=="feature-unsupported"&&this._startTracking()}stop(){this.state!=="disabled"&&this.state!=="feature-unsupported"&&this._stopTracking()}_stopWatchingPosition(){this._watchId!==null&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=null)}_stopTracking(){this._clearWaitingTimer(),this._stopWatchingPosition(),this._clear()}_startTracking(){this._stopTracking();const e=navigator.geolocation.watchPosition(i=>{this._watchId=e,this._settingPosition=this._setPosition(i).then(n=>{this._clearWaitingTimer();const{view:r,graphic:s}=this;if(r&&r.graphics.remove(s),s){const o=s.clone();this.graphic=o,r&&r.graphics.push(o)}this.emit("track",{position:n})}).catch(n=>{throw this._emitError(n),this._clearWaitingTimer(),n})},this._handleWatchPositionError.bind(this),this.geolocationOptions);this._trackStartingTimeoutId=setTimeout(()=>{this._trackStartingTimeoutId=null},nZe)}_handleWatchPositionError(e){this._emitError(e),this._stopTracking()}_clearWaitingTimer(){clearTimeout(this._trackStartingTimeoutId),this._trackStartingTimeoutId=null,this._settingPosition=null}_emitError(e){this.emit("track-error",{error:e})}};c([d()],vu.prototype,"_watchId",void 0),c([d()],vu.prototype,"_trackStartingTimeoutId",void 0),c([d()],vu.prototype,"_settingPosition",void 0),c([d({readOnly:!0})],vu.prototype,"state",null),c([d({readOnly:!0})],vu.prototype,"tracking",null),c([d()],vu.prototype,"start",null),c([d()],vu.prototype,"stop",null),vu=c([O("esri.widgets.Track.TrackViewModel")],vu);const Hge=vu,Wc={base:"esri-track esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-icon",loading:"esri-icon-loading-indicator",rotating:"esri-rotating",startTrackingIcon:"esri-icon-tracking",stopTrackingIcon:"esri-icon-pause",widgetIcon:"esri-icon-tracking",disabled:"esri-disabled",hidden:"esri-hidden"};let fs=class extends qt{constructor(e,i){super(e,i),this.iconClass=Wc.widgetIcon,this.messages=null,this.viewModel=new Hge}get geolocationOptions(){return this.viewModel.geolocationOptions}set geolocationOptions(e){this.viewModel.geolocationOptions=e}get goToLocationEnabled(){return this.viewModel.goToLocationEnabled}set goToLocationEnabled(e){this.viewModel.goToLocationEnabled=e}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get graphic(){return this.viewModel.graphic}set graphic(e){this.viewModel.graphic=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get scale(){return this.viewModel.scale}set scale(e){this.viewModel.scale=e}get tracking(){return this.viewModel.tracking}get useHeadingEnabled(){return this.viewModel.useHeadingEnabled}set useHeadingEnabled(e){this.viewModel.useHeadingEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}start(){this.viewModel.start()}stop(){this.viewModel.stop()}render(){const e=this.get("viewModel.state"),i={[Wc.disabled]:e==="disabled",[Wc.hidden]:e==="feature-unsupported"},n=e==="tracking",r={[Wc.startTrackingIcon]:!n&&e!=="waiting",[Wc.stopTrackingIcon]:n,[Wc.rotating]:e==="waiting",[Wc.loading]:e==="waiting"},{messages:s}=this,o=n?s.stopTracking:s.startTracking;return L("div",{bind:this,class:this.classes(Wc.base,i),hidden:e==="feature-unsupported",onclick:this._toggleTracking,onkeydown:this._toggleTracking,role:"button",tabIndex:0,"aria-label":o,title:o},L("span",{"aria-hidden":"true",class:this.classes(Wc.icon,r)}),L("span",{class:Wc.text},o))}_toggleTracking(){const e=this.viewModel;e&&e.state!=="feature-unsupported"&&e.state!=="disabled"&&(e.state!=="tracking"&&e.state!=="waiting"?this.viewModel.start():this.viewModel.stop())}};c([d()],fs.prototype,"geolocationOptions",null),c([d()],fs.prototype,"goToLocationEnabled",null),c([d()],fs.prototype,"goToOverride",null),c([d()],fs.prototype,"graphic",null),c([d()],fs.prototype,"iconClass",void 0),c([d()],fs.prototype,"label",null),c([d(),bt("esri/widgets/Track/t9n/Track")],fs.prototype,"messages",void 0),c([d()],fs.prototype,"scale",null),c([d({readOnly:!0})],fs.prototype,"tracking",null),c([d()],fs.prototype,"useHeadingEnabled",null),c([d()],fs.prototype,"view",null),c([d({type:Hge}),cR(["track","track-error"])],fs.prototype,"viewModel",void 0),c([Ln()],fs.prototype,"_toggleTracking",null),fs=c([O("esri.widgets.Track")],fs);const rZe=fs,sZe=le.lazy(()=>q(()=>import("./Overview-55316c49.js"),["assets/Overview-55316c49.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/Overview-6095fb33.css"])),oZe=le.lazy(()=>q(()=>import("./Coodinates-b63ef176.js"),["assets/Coodinates-b63ef176.js","assets/Coodinates-2723736a.css"]));let fa=null;const aZe=(t,e)=>{t.ui.add(new zYe({view:t,goToOverride:(s,o)=>{s.goTo(s.constraints)}}),"top-left"),t.ui.add(new bge({view:t}),"top-left");const i=new rZe({view:t});t.ui.add(i,"top-left"),cZe(t,e),t.ui.add(new qYe({view:t}),"bottom-left");const n=uZe(t,e),r=dZe(t,e);t.ui.add(r,"top-left"),t.ui.add(n,"top-left"),lZe(t),t.watch("activeTool",s=>{var o,a,l;s?(t.popup.autoOpenEnabled=!1,fa==null||fa.remove(),(o=document.querySelector(".identify-widget"))==null||o.classList.remove("active"),(a=document.querySelector(".streetview-widget"))==null||a.classList.remove("active")):(t.popup.autoOpenEnabled=!0,(l=document.querySelector(".identify-widget"))==null||l.classList.add("active"))})},lZe=async t=>{const e=document.createElement("div"),i=new Fge({content:e,expandIconClass:"esri-icon-overview-arrow-top-left",collapseIconClass:"esri-icon-overview-arrow-bottom-right",mode:"floating",label:"Overview Map",collapseTooltip:"Overview Map",expandTooltip:"Overview Map",id:"overview"});t.ui.add(i,"bottom-right"),await jo(()=>i.expanded),e!=null&&e.hasChildNodes()||Bw(e).render(re(le.Suspense,{fallback:"",children:re(sZe,{id:"overview-map",view:t})}))},cZe=async(t,e)=>{const i=document.createElement("div"),n=new Fge({content:i,expandIconClass:"esri-icon-pan",collapseIconClass:"esri-icon-pan",mode:"floating",label:"Coordinates",collapseTooltip:"Coordinates",expandTooltip:"Coordinates",id:"coordinates"});t.ui.add(n,"bottom-left"),await jo(()=>n.expanded),i!=null&&i.hasChildNodes()||Bw(i).render(re(le.Suspense,{fallback:"",children:re(oZe,{id:"coordinates",clickActivated:s=>{e(s)},view:t,expand:n})}))},uZe=(t,e)=>{const i=document.createElement("div");i.classList.add("streetview-widget"),i.classList.add("esri-component"),i.classList.add("esri-widget--button"),i.classList.add("esri-widget"),i.classList.add("map-tool"),i.setAttribute("role","button"),i.setAttribute("aria-label","Open streetview"),i.setAttribute("title","Open streetview");const n=document.createElement("calcite-icon");n.setAttribute("icon","360-view");const r=document.createElement("span");return r.classList.add("esri-icon-font-fallback-text"),r.textContent="Open streetview",i.appendChild(n),i.appendChild(r),i.addEventListener("click",()=>{var s,o,a,l;e(t),t.popup.autoOpenEnabled=!1,(s=document.querySelector(".streetview-widget"))!=null&&s.classList.contains("active")?((o=document.querySelector(".streetview-widget"))==null||o.classList.remove("active"),fa==null||fa.remove()):((a=document.querySelector(".map-tool.active"))==null||a.classList.remove("active"),(l=document.querySelector(".streetview-widget"))==null||l.classList.add("active"),fa==null||fa.remove(),fa=t.on("click",u=>{var p,f;(p=document.querySelector(".map-tool.active"))==null||p.classList.remove("active"),(f=document.querySelector(".streetview-widget"))==null||f.classList.add("active");const h=u.mapPoint.latitude+","+u.mapPoint.longitude;window.open("https://maps.google.com?layer=c&cbll="+h+"&cbp=0,0,0,0,0","streetview")}))}),i},dZe=(t,e)=>{const i=document.createElement("div");i.classList.add("identify-widget"),i.classList.add("esri-component"),i.classList.add("esri-widget--button"),i.classList.add("esri-widget"),i.classList.add("active"),i.classList.add("map-tool"),i.setAttribute("role","button"),i.setAttribute("aria-label","Identify features"),i.setAttribute("title","Identify features");const n=document.createElement("span");n.classList.add("esri-icon"),n.classList.add("esri-icon-description"),n.setAttribute("aria-hidden","true");const r=document.createElement("span");return r.classList.add("esri-icon-font-fallback-text"),r.textContent="Idenfity features",i.appendChild(n),i.appendChild(r),t.popup.autoOpenEnabled=!0,i.addEventListener("click",()=>{var s,o;t.popup.autoOpenEnabled=!0,fa==null||fa.remove(),(s=document.querySelector(".identify-widget"))==null||s.classList.add("active"),(o=document.querySelector(".streetview-widget"))==null||o.classList.remove("active"),e(t)}),i},lk="esri-identity-form",Jo={base:lk,group:`${lk}__group`,label:`${lk}__label`,footer:`${lk}__footer`,esriInput:"esri-input",esriButton:"esri-button",esriButtonSecondary:"esri-button--secondary"},hZe="ArcGIS Online";let Vd=class extends qt{constructor(e,i){super(e,i),this._usernameInputNode=null,this._passwordInputNode=null,this.signingIn=!1,this.server=null,this.resource=null,this.error=null,this.oAuthPrompt=!1}render(){const{error:e,server:i,resource:n,signingIn:r,oAuthPrompt:s,messages:o}=this,a=L("div",{class:Jo.group},Vr(s?o.oAuthInfo:o.info,{server:i&&/\.arcgis\.com/i.test(i)?hZe:i,resource:`(${n||o.lblItem})`})),l=s?null:L("div",{class:Jo.group,key:"username"},L("label",{class:Jo.label},o.lblUser,L("input",{value:"",required:!0,autocomplete:"off",spellcheck:!1,type:"text",bind:this,afterCreate:Ao,"data-node-ref":"_usernameInputNode",class:Jo.esriInput}))),u=s?null:L("div",{class:Jo.group,key:"password"},L("label",{class:Jo.label},o.lblPwd,L("input",{value:"",required:!0,type:"password",bind:this,afterCreate:Ao,"data-node-ref":"_passwordInputNode",class:Jo.esriInput}))),h=L("div",{class:this.classes(Jo.group,Jo.footer)},L("input",{type:"submit",disabled:!!r,value:r?o.lblSigning:o.lblOk,class:Jo.esriButton}),L("input",{type:"button",value:o.lblCancel,bind:this,onclick:this._cancel,class:this.classes(Jo.esriButton,Jo.esriButtonSecondary)})),p=e?L("div",null,e.details&&e.details.httpStatus?o.invalidUser:o.noAuthService):null;return L("form",{class:Jo.base,bind:this,onsubmit:this._submit},a,p,l,u,h)}_cancel(){this._set("signingIn",!1),this._usernameInputNode&&(this._usernameInputNode.value=""),this._passwordInputNode&&(this._passwordInputNode.value=""),this.emit("cancel")}_submit(e){e.preventDefault(),this._set("signingIn",!0);const i=this.oAuthPrompt?{}:{username:this._usernameInputNode&&this._usernameInputNode.value,password:this._passwordInputNode&&this._passwordInputNode.value};this.emit("submit",i)}};c([d(),bt("esri/identity/t9n/identity")],Vd.prototype,"messages",void 0),c([d()],Vd.prototype,"signingIn",void 0),c([d()],Vd.prototype,"server",void 0),c([d()],Vd.prototype,"resource",void 0),c([d()],Vd.prototype,"error",void 0),c([d()],Vd.prototype,"oAuthPrompt",void 0),Vd=c([O("esri.identity.IdentityForm")],Vd);const pZe=Vd;/*!
* tabbable 6.1.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Gge=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],SO=Gge.join(","),qge=typeof Element>"u",A0=qge?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,EO=!qge&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},CO=function t(e,i){var n;i===void 0&&(i=!0);var r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),s=r===""||r==="true",o=s||i&&e&&t(e.parentNode);return o},fZe=function(e){var i,n=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"contenteditable");return n===""||n==="true"},Wge=function(e,i,n){if(CO(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(SO));return i&&A0.call(e,SO)&&r.unshift(e),r=r.filter(n),r},Jge=function t(e,i,n){for(var r=[],s=Array.from(e);s.length;){var o=s.shift();if(!CO(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=t(l,!0,n);n.flatten?r.push.apply(r,u):r.push({scopeParent:o,candidates:u})}else{var h=A0.call(o,SO);h&&n.filter(o)&&(i||!e.includes(o))&&r.push(o);var p=o.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(o),f=!CO(p,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(o));if(p&&f){var g=t(p===!0?o.children:p.children,!0,n);n.flatten?r.push.apply(r,g):r.push({scopeParent:o,candidates:g})}else s.unshift.apply(s,o.children)}}return r},Yge=function(e,i){return e.tabIndex<0&&(i||/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||fZe(e))&&isNaN(parseInt(e.getAttribute("tabindex"),10))?0:e.tabIndex},mZe=function(e,i){return e.tabIndex===i.tabIndex?e.documentOrder-i.documentOrder:e.tabIndex-i.tabIndex},Zge=function(e){return e.tagName==="INPUT"},gZe=function(e){return Zge(e)&&e.type==="hidden"},yZe=function(e){var i=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return i},vZe=function(e,i){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===i)return e[n]},bZe=function(e){if(!e.name)return!0;var i=e.form||EO(e),n=function(a){return i.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=n(window.CSS.escape(e.name));else try{r=n(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=vZe(r,e.form);return!s||s===e},_Ze=function(e){return Zge(e)&&e.type==="radio"},wZe=function(e){return _Ze(e)&&!bZe(e)},xZe=function(e){var i,n=e&&EO(e),r=(i=n)===null||i===void 0?void 0:i.host,s=!1;if(n&&n!==e){var o,a,l;for(s=!!((o=r)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(r)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&r;){var u,h,p;n=EO(r),r=(u=n)===null||u===void 0?void 0:u.host,s=!!((h=r)!==null&&h!==void 0&&(p=h.ownerDocument)!==null&&p!==void 0&&p.contains(r))}}return s},eQ=function(e){var i=e.getBoundingClientRect(),n=i.width,r=i.height;return n===0&&r===0},SZe=function(e,i){var n=i.displayCheck,r=i.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=A0.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(A0.call(o,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof r=="function"){for(var a=e;e;){var l=e.parentElement,u=EO(e);if(l&&!l.shadowRoot&&r(l)===!0)return eQ(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(xZe(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return eQ(e);return!1},EZe=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var i=e.parentElement;i;){if(i.tagName==="FIELDSET"&&i.disabled){for(var n=0;n<i.children.length;n++){var r=i.children.item(n);if(r.tagName==="LEGEND")return A0.call(i,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}i=i.parentElement}return!1},IO=function(e,i){return!(i.disabled||CO(i)||gZe(i)||SZe(i,e)||yZe(i)||EZe(i))},x6=function(e,i){return!(wZe(i)||Yge(i)<0||!IO(e,i))},CZe=function(e){var i=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(i)||i>=0)},IZe=function t(e){var i=[],n=[];return e.forEach(function(r,s){var o=!!r.scopeParent,a=o?r.scopeParent:r,l=Yge(a,o),u=o?t(r.candidates):a;l===0?o?i.push.apply(i,u):i.push(a):n.push({documentOrder:s,tabIndex:l,item:r,isScope:o,content:u})}),n.sort(mZe).reduce(function(r,s){return s.isScope?r.push.apply(r,s.content):r.push(s.content),r},[]).concat(i)},TZe=function(e,i){i=i||{};var n;return i.getShadowRoot?n=Jge([e],i.includeContainer,{filter:x6.bind(null,i),flatten:!1,getShadowRoot:i.getShadowRoot,shadowRootFilter:CZe}):n=Wge(e,i.includeContainer,x6.bind(null,i)),IZe(n)},kZe=function(e,i){i=i||{};var n;return i.getShadowRoot?n=Jge([e],i.includeContainer,{filter:IO.bind(null,i),flatten:!0,getShadowRoot:i.getShadowRoot}):n=Wge(e,i.includeContainer,IO.bind(null,i)),n},ck=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return A0.call(e,SO)===!1?!1:x6(i,e)},$Ze=Gge.concat("iframe").join(","),OF=function(e,i){if(i=i||{},!e)throw new Error("No node provided");return A0.call(e,$Ze)===!1?!1:IO(i,e)};/*!
* focus-trap 7.2.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function tQ(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function iQ(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?tQ(Object(i),!0).forEach(function(n){AZe(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):tQ(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function AZe(t,e,i){return e=OZe(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function MZe(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OZe(t){var e=MZe(t,"string");return typeof e=="symbol"?e:String(e)}var nQ={activateTrap:function(e,i){if(e.length>0){var n=e[e.length-1];n!==i&&n.pause()}var r=e.indexOf(i);r===-1||e.splice(r,1),e.push(i)},deactivateTrap:function(e,i){var n=e.indexOf(i);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},PZe=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},RZe=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},LE=function(e){return e.key==="Tab"||e.keyCode===9},LZe=function(e){return LE(e)&&!e.shiftKey},DZe=function(e){return LE(e)&&e.shiftKey},rQ=function(e){return setTimeout(e,0)},sQ=function(e,i){var n=-1;return e.every(function(r,s){return i(r)?(n=s,!1):!0}),n},yx=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,n):e},uk=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},FZe=[],NZe=function(e,i){var n=(i==null?void 0:i.document)||document,r=(i==null?void 0:i.trapStack)||FZe,s=iQ({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:LZe,isKeyBackward:DZe},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},a,l=function(k,D,z){return k&&k[D]!==void 0?k[D]:s[z||D]},u=function(k){return o.containerGroups.findIndex(function(D){var z=D.container,B=D.tabbableNodes;return z.contains(k)||B.find(function(j){return j===k})})},h=function(k){var D=s[k];if(typeof D=="function"){for(var z=arguments.length,B=new Array(z>1?z-1:0),j=1;j<z;j++)B[j-1]=arguments[j];D=D.apply(void 0,B)}if(D===!0&&(D=void 0),!D){if(D===void 0||D===!1)return D;throw new Error("`".concat(k,"` was specified but was not a node, or did not return a node"))}var K=D;if(typeof D=="string"&&(K=n.querySelector(D),!K))throw new Error("`".concat(k,"` as selector refers to no known node"));return K},p=function(){var k=h("initialFocus");if(k===!1)return!1;if(k===void 0)if(u(n.activeElement)>=0)k=n.activeElement;else{var D=o.tabbableGroups[0],z=D&&D.firstTabbableNode;k=z||h("fallbackFocus")}if(!k)throw new Error("Your focus-trap needs to have at least one focusable element");return k},f=function(){if(o.containerGroups=o.containers.map(function(k){var D=TZe(k,s.tabbableOptions),z=kZe(k,s.tabbableOptions);return{container:k,tabbableNodes:D,focusableNodes:z,firstTabbableNode:D.length>0?D[0]:null,lastTabbableNode:D.length>0?D[D.length-1]:null,nextTabbableNode:function(j){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ie=z.findIndex(function(te){return te===j});if(!(ie<0))return K?z.slice(ie+1).find(function(te){return ck(te,s.tabbableOptions)}):z.slice(0,ie).reverse().find(function(te){return ck(te,s.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(k){return k.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},g=function P(k){if(k!==!1&&k!==n.activeElement){if(!k||!k.focus){P(p());return}k.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=k,PZe(k)&&k.select()}},v=function(k){var D=h("setReturnFocus",k);return D||(D===!1?!1:k)},b=function(k){var D=uk(k);if(!(u(D)>=0)){if(yx(s.clickOutsideDeactivates,k)){a.deactivate({returnFocus:s.returnFocusOnDeactivate&&!OF(D,s.tabbableOptions)});return}yx(s.allowOutsideClick,k)||k.preventDefault()}},_=function(k){var D=uk(k),z=u(D)>=0;z||D instanceof Document?z&&(o.mostRecentlyFocusedNode=D):(k.stopImmediatePropagation(),g(o.mostRecentlyFocusedNode||p()))},w=function(k){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,z=uk(k);f();var B=null;if(o.tabbableGroups.length>0){var j=u(z),K=j>=0?o.containerGroups[j]:void 0;if(j<0)D?B=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:B=o.tabbableGroups[0].firstTabbableNode;else if(D){var ie=sQ(o.tabbableGroups,function(ge){var he=ge.firstTabbableNode;return z===he});if(ie<0&&(K.container===z||OF(z,s.tabbableOptions)&&!ck(z,s.tabbableOptions)&&!K.nextTabbableNode(z,!1))&&(ie=j),ie>=0){var te=ie===0?o.tabbableGroups.length-1:ie-1,me=o.tabbableGroups[te];B=me.lastTabbableNode}else LE(k)||(B=K.nextTabbableNode(z,!1))}else{var Ie=sQ(o.tabbableGroups,function(ge){var he=ge.lastTabbableNode;return z===he});if(Ie<0&&(K.container===z||OF(z,s.tabbableOptions)&&!ck(z,s.tabbableOptions)&&!K.nextTabbableNode(z))&&(Ie=j),Ie>=0){var Me=Ie===o.tabbableGroups.length-1?0:Ie+1,oe=o.tabbableGroups[Me];B=oe.firstTabbableNode}else LE(k)||(B=K.nextTabbableNode(z))}}else B=h("fallbackFocus");B&&(LE(k)&&k.preventDefault(),g(B))},S=function(k){if(RZe(k)&&yx(s.escapeDeactivates,k)!==!1){k.preventDefault(),a.deactivate();return}(s.isKeyForward(k)||s.isKeyBackward(k))&&w(k,s.isKeyBackward(k))},C=function(k){var D=uk(k);u(D)>=0||yx(s.clickOutsideDeactivates,k)||yx(s.allowOutsideClick,k)||(k.preventDefault(),k.stopImmediatePropagation())},$=function(){if(o.active)return nQ.activateTrap(r,a),o.delayInitialFocusTimer=s.delayInitialFocus?rQ(function(){g(p())}):g(p()),n.addEventListener("focusin",_,!0),n.addEventListener("mousedown",b,{capture:!0,passive:!1}),n.addEventListener("touchstart",b,{capture:!0,passive:!1}),n.addEventListener("click",C,{capture:!0,passive:!1}),n.addEventListener("keydown",S,{capture:!0,passive:!1}),a},M=function(){if(o.active)return n.removeEventListener("focusin",_,!0),n.removeEventListener("mousedown",b,!0),n.removeEventListener("touchstart",b,!0),n.removeEventListener("click",C,!0),n.removeEventListener("keydown",S,!0),a};return a={get active(){return o.active},get paused(){return o.paused},activate:function(k){if(o.active)return this;var D=l(k,"onActivate"),z=l(k,"onPostActivate"),B=l(k,"checkCanFocusTrap");B||f(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement,D&&D();var j=function(){B&&f(),$(),z&&z()};return B?(B(o.containers.concat()).then(j,j),this):(j(),this)},deactivate:function(k){if(!o.active)return this;var D=iQ({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},k);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,M(),o.active=!1,o.paused=!1,nQ.deactivateTrap(r,a);var z=l(D,"onDeactivate"),B=l(D,"onPostDeactivate"),j=l(D,"checkCanReturnFocus"),K=l(D,"returnFocus","returnFocusOnDeactivate");z&&z();var ie=function(){rQ(function(){K&&g(v(o.nodeFocusedBeforeActivation)),B&&B()})};return K&&j?(j(v(o.nodeFocusedBeforeActivation)).then(ie,ie),this):(ie(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,M(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,f(),$(),this)},updateContainerElements:function(k){var D=[].concat(k).filter(Boolean);return o.containers=D.map(function(z){return typeof z=="string"?n.querySelector(z):z}),o.active&&f(),this}},a.updateContainerElements(e),a};const ng="esri-identity-modal",Jc={base:ng,open:`${ng}--open`,closed:`${ng}--closed`,title:`${ng}__title`,dialog:`${ng}__dialog`,content:`${ng}__content`,closeButton:`${ng}__close-button`,iconClose:"esri-icon-close"};let Wp=class extends qt{constructor(e,i){super(e,i),this.container=document.createElement("div"),this.content=null,this.open=!1,this._focusTrap=null,this._close=()=>{this.open=!1},document.body.appendChild(this.container),this.addHandles(X(()=>this.open,()=>this._toggleFocusTrap()))}destroy(){this._destroyFocusTrap()}get title(){var e;return(e=this.messages)==null?void 0:e.auth.signIn}render(){const e=this.id,{open:i,content:n,title:r,messages:s}=this,o=i&&!!n,a={[Jc.open]:o,[Jc.closed]:!o},l=L("button",{class:Jc.closeButton,"aria-label":s.close,title:s.close,bind:this,onclick:this._close,type:"button"},L("span",{"aria-hidden":"true",class:Jc.iconClose})),u=`${e}_title`,h=`${e}_content`,p=r?L("h1",{id:u,class:Jc.title},r):null,f=o?L("div",{bind:this,class:Jc.dialog,role:"dialog","aria-labelledby":u,"aria-describedby":h,afterCreate:this._createFocusTrap},l,p,this._renderContent(h)):null;return L("div",{tabIndex:-1,class:this.classes(Jc.base,a)},f)}_destroyFocusTrap(){var e;(e=this._focusTrap)==null||e.deactivate({onDeactivate:()=>{}}),this._focusTrap=null}_toggleFocusTrap(){const{_focusTrap:e,open:i}=this;e&&(i?e.activate():e.deactivate())}_createFocusTrap(e){this._destroyFocusTrap();const i=requestAnimationFrame(()=>{this._focusTrap=NZe(e,{initialFocus:"input",onDeactivate:this._close}),this._toggleFocusTrap()});this.addHandles(Nh(()=>cancelAnimationFrame(i)))}_renderContent(e){const i=this.content;return typeof i=="string"?L("div",{class:Jc.content,id:e,innerHTML:i}):VC(i)?L("div",{class:Jc.content,id:e},i.render()):i instanceof HTMLElement?L("div",{class:Jc.content,id:e,bind:i,afterCreate:this._attachToNode}):null}_attachToNode(e){const i=this;e.appendChild(i)}};c([d({readOnly:!0})],Wp.prototype,"container",void 0),c([d()],Wp.prototype,"content",void 0),c([d()],Wp.prototype,"open",void 0),c([d(),bt("esri/t9n/common")],Wp.prototype,"messages",void 0),c([d()],Wp.prototype,"title",null),Wp=c([O("esri.identity.IdentityModal")],Wp);const oQ=Wp,PF="esriJSAPIOAuth";let S6=class{constructor(e,i){this.oAuthInfo=null,this.storage=null,this.appId=null,this.codeVerifier=null,this.expires=null,this.refreshToken=null,this.ssl=null,this.stateUID=null,this.token=null,this.userId=null,this.oAuthInfo=e,this.storage=i,this._init()}isValid(){let e=!1;if(this.oAuthInfo&&this.userId&&(this.refreshToken||this.token)){if(this.expires==null&&this.refreshToken)e=!0;else if(this.expires){const i=Date.now();this.expires>i&&(this.expires-i)/1e3>60*this.oAuthInfo.minTimeUntilExpiration&&(e=!0)}}return e}save(){if(!this.storage)return!1;const e=this._load(),i=this.oAuthInfo;if(i&&i.authNamespace&&i.portalUrl){let n=e[i.authNamespace];n||(n=e[i.authNamespace]={}),this.appId||(this.appId=i.appId),n[i.portalUrl]={appId:this.appId,codeVerifier:this.codeVerifier,expires:this.expires,refreshToken:this.refreshToken,ssl:this.ssl,stateUID:this.stateUID,token:this.token,userId:this.userId};try{this.storage.setItem(PF,JSON.stringify(e))}catch(r){return console.warn(r),!1}return!0}return!1}destroy(){const e=this._load(),i=this.oAuthInfo;if(i&&i.appId&&i.portalUrl&&(this.expires==null||this.expires>Date.now())&&(this.refreshToken||this.token)){const n=i.portalUrl.replace(/^http:/i,"https:")+"/sharing/rest/oauth2/revokeToken",r=new FormData;if(r.append("f","json"),r.append("auth_token",this.refreshToken||this.token),r.append("client_id",i.appId),r.append("token_type_hint",this.refreshToken?"refresh_token":"access_token"),typeof navigator.sendBeacon=="function")navigator.sendBeacon(n,r);else{const s=new XMLHttpRequest;s.open("POST",n),s.send(r)}}if(i&&i.authNamespace&&i.portalUrl&&this.storage){const n=e[i.authNamespace];if(n){delete n[i.portalUrl];try{this.storage.setItem(PF,JSON.stringify(e))}catch(r){console.log(r)}}}i&&(i._oAuthCred=null,this.oAuthInfo=null)}_init(){const e=this._load(),i=this.oAuthInfo;if(i&&i.authNamespace&&i.portalUrl){let n=e[i.authNamespace];n&&(n=n[i.portalUrl],n&&(this.appId=n.appId,this.codeVerifier=n.codeVerifier,this.expires=n.expires,this.refreshToken=n.refreshToken,this.ssl=n.ssl,this.stateUID=n.stateUID,this.token=n.token,this.userId=n.userId))}}_load(){let e={};if(this.storage){const i=this.storage.getItem(PF);if(i)try{e=JSON.parse(i)}catch(n){console.warn(n)}}return e}};S6.prototype.declaredClass="esri.identity.OAuthCredential";var E6;let Dr=E6=class extends Y{constructor(t){super(t),this._oAuthCred=null,this.appId=null,this.authNamespace="/",this.expiration=20160,this.flowType="auto",this.forceLogin=!1,this.forceUserId=!1,this.locale=null,this.minTimeUntilExpiration=30,this.popup=!1,this.popupCallbackUrl="oauth-callback.html",this.popupWindowFeatures="height=490,width=800,resizable,scrollbars,status",this.portalUrl="https://www.arcgis.com",this.preserveUrlHash=!1,this.userId=null}clone(){return E6.fromJSON(this.toJSON())}};c([d({json:{write:!0}})],Dr.prototype,"appId",void 0),c([d({json:{write:!0}})],Dr.prototype,"authNamespace",void 0),c([d({json:{write:!0}})],Dr.prototype,"expiration",void 0),c([d({json:{write:!0}})],Dr.prototype,"flowType",void 0),c([d({json:{write:!0}})],Dr.prototype,"forceLogin",void 0),c([d({json:{write:!0}})],Dr.prototype,"forceUserId",void 0),c([d({json:{write:!0}})],Dr.prototype,"locale",void 0),c([d({json:{write:!0}})],Dr.prototype,"minTimeUntilExpiration",void 0),c([d({json:{write:!0}})],Dr.prototype,"popup",void 0),c([d({json:{write:!0}})],Dr.prototype,"popupCallbackUrl",void 0),c([d({json:{write:!0}})],Dr.prototype,"popupWindowFeatures",void 0),c([d({json:{write:!0}})],Dr.prototype,"portalUrl",void 0),c([d({json:{write:!0}})],Dr.prototype,"preserveUrlHash",void 0),c([d({json:{write:!0}})],Dr.prototype,"userId",void 0),Dr=E6=c([O("esri.identity.OAuthInfo")],Dr);const aQ=Dr;let sa=class extends Y{constructor(e){super(e),this.adminTokenServiceUrl=null,this.currentVersion=null,this.hasPortal=null,this.hasServer=null,this.owningSystemUrl=null,this.owningTenant=null,this.server=null,this.shortLivedTokenValidity=null,this.tokenServiceUrl=null,this.webTierAuth=null}};c([d({json:{write:!0}})],sa.prototype,"adminTokenServiceUrl",void 0),c([d({json:{write:!0}})],sa.prototype,"currentVersion",void 0),c([d({json:{write:!0}})],sa.prototype,"hasPortal",void 0),c([d({json:{write:!0}})],sa.prototype,"hasServer",void 0),c([d({json:{write:!0}})],sa.prototype,"owningSystemUrl",void 0),c([d({json:{write:!0}})],sa.prototype,"owningTenant",void 0),c([d({json:{write:!0}})],sa.prototype,"server",void 0),c([d({json:{write:!0}})],sa.prototype,"shortLivedTokenValidity",void 0),c([d({json:{write:!0}})],sa.prototype,"tokenServiceUrl",void 0),c([d({json:{write:!0}})],sa.prototype,"webTierAuth",void 0),sa=c([O("esri.identity.ServerInfo")],sa);const RF=sa,xA={},Kge=t=>{const e=new Hs(t.owningSystemUrl).host,i=new Hs(t.server).host,n=/.+\.arcgis\.com$/i;return n.test(e)&&n.test(i)},C6=(t,e)=>!!(Kge(t)&&e&&e.some(i=>i.test(t.server)));let SA=null,EA=null;try{SA=window.localStorage,EA=window.sessionStorage}catch{}let Xge=class extends $r{constructor(){super(),this._portalConfig=globalThis.esriGeowConfig,this.serverInfos=[],this.oAuthInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[],this._defaultOAuthInfo=null,this._defaultTokenValidity=60,this.dialog=null,this.formConstructor=pZe,this.tokenValidity=null,this.normalizeWebTierAuth=!1,this._appOrigin=window.origin!=="null"?window.origin:window.location.origin,this._appUrlObj=_i(window.location.href),this._busy=null,this._rejectOnPersistedPageShow=!1,this._oAuthLocationParams=null,this._gwTokenUrl="/sharing/rest/generateToken",this._agsRest="/rest/services",this._agsPortal=/\/sharing(\/|$)/i,this._agsAdmin=/(https?:\/\/[^\/]+\/[^\/]+)\/admin\/?(\/.*)?$/i,this._adminSvcs=/\/rest\/admin\/services(\/|$)/i,this._gwDomains=[{regex:/^https?:\/\/www\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:dev|[a-z\d-]+\.mapsdev)\.arcgis\.com/i,customBaseUrl:"mapsdev.arcgis.com",tokenServiceUrl:"https://dev.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:devext|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,customBaseUrl:"mapsdevext.arcgis.com",tokenServiceUrl:"https://devext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/(?:qaext|[a-z\d-]+\.mapsqa)\.arcgis\.com/i,customBaseUrl:"mapsqa.arcgis.com",tokenServiceUrl:"https://qaext.arcgis.com/sharing/rest/generateToken"},{regex:/^https?:\/\/[a-z\d-]+\.maps\.arcgis\.com/i,customBaseUrl:"maps.arcgis.com",tokenServiceUrl:"https://www.arcgis.com/sharing/rest/generateToken"}],this._legacyFed=[],this._regexSDirUrl=/http.+\/rest\/services\/?/gi,this._regexServerType=/(\/(FeatureServer|GPServer|GeoDataServer|GeocodeServer|GeoenrichmentServer|GeometryServer|GlobeServer|ImageServer|KnowledgeGraphServer|MapServer|MissionServer|MobileServer|NAServer|NetworkDiagramServer|OGCFeatureServer|ParcelFabricServer|RelationalCatalogServer|SceneServer|StreamServer|UtilityNetworkServer|ValidationServer|VectorTileServer|VersionManagementServer|VideoServer)).*/gi,this._gwUser=/http.+\/users\/([^\/]+)\/?.*/i,this._gwItem=/http.+\/items\/([^\/]+)\/?.*/i,this._gwGroup=/http.+\/groups\/([^\/]+)\/?.*/i,this._rePortalTokenSvc=/\/sharing(\/rest)?\/generatetoken/i,this._createDefaultOAuthInfo=!0,this._hasTestedIfAppIsOnPortal=!1,this._getOAuthLocationParams(),window.addEventListener("pageshow",e=>{this._pageShowHandler(e)})}registerServers(e){const i=this.serverInfos;i?(e=e.filter(n=>!this.findServerInfo(n.server)),this.serverInfos=i.concat(e)):this.serverInfos=e,e.forEach(n=>{n.owningSystemUrl&&this._portals.push(n.owningSystemUrl),n.hasPortal&&this._portals.push(n.server)})}registerOAuthInfos(e){const i=this.oAuthInfos;if(i){for(const n of e){const r=this.findOAuthInfo(n.portalUrl);r&&i.splice(i.indexOf(r),1)}this.oAuthInfos=i.concat(e)}else this.oAuthInfos=e}registerToken(e){e={...e};const i=this._sanitizeUrl(e.server),n=this._isServerRsrc(i);let r,s=this.findServerInfo(i),o=!0;s||(s=new RF,s.server=this._getServerInstanceRoot(i),n?s.hasServer=!0:(s.tokenServiceUrl=this._getTokenSvcUrl(i),s.hasPortal=!0),this.registerServers([s])),r=this._findCredential(i),r?(delete e.server,Object.assign(r,e),o=!1):(r=new ki({userId:e.userId,server:s.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:n?"server":"portal"}),r.resources=[i],this.credentials.push(r)),r.emitTokenChange(!1),o||r.refreshServerTokens()}toJSON(){return IP({serverInfos:this.serverInfos.map(e=>e.toJSON()),oAuthInfos:this.oAuthInfos.map(e=>e.toJSON()),credentials:this.credentials.map(e=>e.toJSON())})}initialize(e){if(!e)return;typeof e=="string"&&(e=JSON.parse(e));const i=e.serverInfos,n=e.oAuthInfos,r=e.credentials;if(i){const s=[];i.forEach(o=>{o.server&&o.tokenServiceUrl&&s.push(o.declaredClass?o:new RF(o))}),s.length&&this.registerServers(s)}if(n){const s=[];n.forEach(o=>{o.appId&&s.push(o.declaredClass?o:new aQ(o))}),s.length&&this.registerOAuthInfos(s)}r&&r.forEach(s=>{s.server&&s.token&&s.expires&&s.expires>Date.now()&&((s=s.declaredClass?s:new ki(s)).emitTokenChange(),this.credentials.push(s))})}findServerInfo(e){let i;e=this._sanitizeUrl(e);for(const n of this.serverInfos)if(this._hasSameServerInstance(n.server,e)){i=n;break}return i}findOAuthInfo(e){let i;e=this._sanitizeUrl(e);for(const n of this.oAuthInfos)if(this._hasSameServerInstance(n.portalUrl,e)){i=n;break}return i}findCredential(e,i){if(!e)return;let n;e=this._sanitizeUrl(e);const r=this._isServerRsrc(e)?"server":"portal";if(i){for(const s of this.credentials)if(this._hasSameServerInstance(s.server,e)&&i===s.userId&&s.scope===r){n=s;break}}else for(const s of this.credentials)if(this._hasSameServerInstance(s.server,e)&&this._getIdenticalSvcIdx(e,s)!==-1&&s.scope===r){n=s;break}return n}getCredential(e,i){let n,r,s=!0;i&&(n=!!i.token,r=i.error,s=i.prompt!==!1),i={...i},e=this._sanitizeUrl(e);const o=new AbortController,a=qx();if(i.signal&&Ur(i.signal,()=>{o.abort()}),Ur(o,()=>{a.reject(new N("identity-manager:user-aborted","ABORTED"))}),$a(o))return a.promise;i.signal=o.signal;const l=this._isAdminResource(e),u=n?this.findCredential(e):null;let h;if(u&&r&&r.details&&r.details.httpStatus===498)u.destroy();else if(u)return h=new N("identity-manager:not-authorized","You are currently signed in as: '"+u.userId+"'. You do not have access to this resource: "+e,{error:r}),a.reject(h),a.promise;const p=this._findCredential(e,i);if(p)return a.resolve(p),a.promise;let f=this.findServerInfo(e);if(f)!f.hasServer&&this._isServerRsrc(e)&&(f._restInfoPms=this._getTokenSvcUrl(e),f.hasServer=!0);else{const g=this._getTokenSvcUrl(e);if(!g)return h=new N("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),a.reject(h),a.promise;f=new RF,f.server=this._getServerInstanceRoot(e),typeof g=="string"?(f.tokenServiceUrl=g,f.hasPortal=!0):(f._restInfoPms=g,f.hasServer=!0),this.registerServers([f])}return f.hasPortal&&f._selfReq===void 0&&(s||vo(f.tokenServiceUrl,this._appOrigin)||this._gwDomains.some(g=>g.tokenServiceUrl===f.tokenServiceUrl))&&(f._selfReq={owningTenant:i&&i.owningTenant,selfDfd:this._getPortalSelf(f.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),e)}),this._enqueue(e,f,i,a,l)}getResourceName(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""}generateToken(e,i,n){const r=this._rePortalTokenSvc.test(e.tokenServiceUrl),s=new Hs(this._appOrigin),o=e.shortLivedTokenValidity;let a,l,u,h,p,f,g,v;i&&(v=this.tokenValidity||o||this._defaultTokenValidity,v>o&&o>0&&(v=o)),n&&(a=n.isAdmin,l=n.serverUrl,u=n.token,f=n.signal,g=n.ssl,e.customParameters=n.customParameters),a?h=e.adminTokenServiceUrl:(h=e.tokenServiceUrl,p=new Hs(h.toLowerCase()),e.webTierAuth&&(n!=null&&n.serverUrl)&&!g&&s.scheme==="http"&&(vo(s.uri,h,!0)||p.scheme==="https"&&s.host===p.host&&s.port==="7080"&&p.port==="7443")&&(h=h.replace(/^https:/i,"http:").replace(/:7443/i,":7080")));const b={query:{request:"getToken",username:i==null?void 0:i.username,password:i==null?void 0:i.password,serverUrl:l,token:u,expiration:v,referer:a||r?this._appOrigin:null,client:a?"referer":null,f:"json",...e.customParameters},method:"post",authMode:"anonymous",useProxy:this._useProxy(e,n),signal:f,...n==null?void 0:n.ioArgs};return r||(b.withCredentials=!1),rt(h,b).then(_=>{const w=_.data;if(!w||!w.token)return new N("identity-manager:authentication-failed","Unable to generate token");const S=e.server;return xA[S]||(xA[S]={}),i&&(xA[S][i.username]=i.password),w.validity=v,w})}isBusy(){return!!this._busy}checkSignInStatus(e){return this.checkAppAccess(e,"").then(i=>i.credential)}checkAppAccess(e,i,n){let r=!1;return this.getCredential(e,{prompt:!1}).then(s=>{let o;const a={f:"json"};if(s.scope==="portal")if(i&&(this._doPortalSignIn(e)||n&&n.force))o=s.server+"/sharing/rest/oauth2/validateAppAccess",a.client_id=i;else{if(!s.token)return{credential:s};o=s.server+"/sharing/rest"}else{if(!s.token)return{credential:s};o=s.server+"/rest/services"}return s.token&&(a.token=s.token),rt(o,{query:a,authMode:"anonymous"}).then(l=>{if(l.data.valid===!1)throw new N("identity-manager:not-authorized",`You are currently signed in as: '${s.userId}'.`,l.data);return r=!!l.data.viewOnlyUserTypeApp,{credential:s}}).catch(l=>{if(l.name==="identity-manager:not-authorized")throw l;const u=l.details&&l.details.httpStatus;if(u===498)throw s.destroy(),new N("identity-manager:not-authenticated","User is not signed in.");if(u===400)throw new N("identity-manager:invalid-request");return{credential:s}})}).then(s=>({credential:s.credential,viewOnly:r}))}setOAuthResponseHash(e){e&&(e.charAt(0)==="#"&&(e=e.substring(1)),this._processOAuthPopupParams(e_(e)))}setOAuthRedirectionHandler(e){this._oAuthRedirectFunc=e}setProtocolErrorHandler(e){this._protocolFunc=e}signIn(e,i,n={}){const r=qx(),s=()=>{var p;l==null||l.remove(),u==null||u.remove(),h==null||h.remove(),a==null||a.destroy(),(p=this.dialog)==null||p.destroy(),this.dialog=a=l=u=h=null},o=()=>{s(),this._oAuthDfd=null,r.reject(new N("identity-manager:user-aborted","ABORTED"))};n.signal&&Ur(n.signal,()=>{o()});let a=new this.formConstructor;a.resource=this.getResourceName(e),a.server=i.server,this.dialog=new oQ,this.dialog.content=a,this.dialog.open=!0,this.emit("dialog-create");let l=a.on("cancel",o),u=X(()=>this.dialog.open,o),h=a.on("submit",p=>{this.generateToken(i,p,{isAdmin:n.isAdmin,signal:n.signal}).then(f=>{s();const g=new ki({userId:p.username,server:i.server,token:f.token,expires:f.expires!=null?Number(f.expires):null,ssl:!!f.ssl,isAdmin:n.isAdmin,validity:f.validity});r.resolve(g)}).catch(f=>{a.error=f,a.signingIn=!1})});return r.promise}oAuthSignIn(e,i,n,r){this._oAuthDfd=qx();const s=this._oAuthDfd;let o;r!=null&&r.signal&&Ur(r.signal,()=>{const v=this._oAuthDfd&&this._oAuthDfd.oAuthWin_;v&&!v.closed?v.close():this.dialog&&f()}),s.resUrl_=e,s.sinfo_=i,s.oinfo_=n;const a=n._oAuthCred;if(a.storage&&(n.flowType==="authorization-code"||n.flowType==="auto"&&!n.popup&&i.currentVersion>=8.4)){let v=crypto.getRandomValues(new Uint8Array(32));o=eD(v),a.codeVerifier=o,v=crypto.getRandomValues(new Uint8Array(32)),a.stateUID=eD(v),a.save()||(a.codeVerifier=o=null)}else a.codeVerifier=null;let l,u,h,p;this._getCodeChallenge(o).then(v=>{const b=!r||r.oAuthPopupConfirmation!==!1;n.popup&&b?(l=new this.formConstructor,l.oAuthPrompt=!0,l.server=i.server,this.dialog=new oQ,this.dialog.content=l,this.dialog.open=!0,this.emit("dialog-create"),u=l.on("cancel",f),h=X(()=>this.dialog.open,f),p=l.on("submit",()=>{g(),this._doOAuthSignIn(e,i,n,v)})):this._doOAuthSignIn(e,i,n,v)});const f=()=>{g(),this._oAuthDfd=null,s.reject(new N("identity-manager:user-aborted","ABORTED"))},g=()=>{var v;u==null||u.remove(),h==null||h.remove(),p==null||p.remove(),l==null||l.destroy(),(v=this.dialog)==null||v.destroy(),this.dialog=null};return s.promise}destroyCredentials(){this.credentials&&this.credentials.slice().forEach(e=>{e.destroy()}),this.emit("credentials-destroy")}enablePostMessageAuth(e="https://www.arcgis.com/sharing/rest"){this._postMessageAuthHandle&&this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=ll(window,"message",i=>{var n;if((i.origin===this._appOrigin||i.origin.endsWith(".arcgis.com"))&&((n=i.data)==null?void 0:n.type)==="arcgis:auth:requestCredential"){const r=i.source;this.getCredential(e).then(s=>{r.postMessage({type:"arcgis:auth:credential",credential:{expires:s.expires,server:s.server,ssl:s.ssl,token:s.token,userId:s.userId}},i.origin)}).catch(s=>{r.postMessage({type:"arcgis:auth:error",error:{name:s.name,message:s.message}},i.origin)})}})}disablePostMessageAuth(){this._postMessageAuthHandle&&(this._postMessageAuthHandle.remove(),this._postMessageAuthHandle=null)}_getOAuthLocationParams(){var n,r;let e=window.location.hash;if(e){e.charAt(0)==="#"&&(e=e.substring(1));const s=e_(e);let o=!1;if(s.access_token&&s.expires_in&&s.state&&s.hasOwnProperty("username"))try{s.state=JSON.parse(s.state),s.state.portalUrl&&(this._oAuthLocationParams=s,o=!0)}catch{}else if(s.error&&s.error_description&&(console.log("IdentityManager OAuth Error: ",s.error," - ",s.error_description),s.error==="access_denied"&&(o=!0,s.state)))try{s.state=JSON.parse(s.state)}catch{}o&&(window.location.hash=((n=s.state)==null?void 0:n.hash)||"")}let i=window.location.search;if(i){i.charAt(0)==="?"&&(i=i.substring(1));const s=e_(i);let o=!1;if(s.code&&s.state)try{s.state=JSON.parse(s.state),s.state.portalUrl&&s.state.uid&&(this._oAuthLocationParams=s,o=!0)}catch{}else if(s.error&&s.error_description&&(console.log("IdentityManager OAuth Error: ",s.error," - ",s.error_description),s.error==="access_denied"&&(o=!0,s.state)))try{s.state=JSON.parse(s.state)}catch{}if(o){const a={...s};["code","error","error_description","message_code","persist","state"].forEach(h=>{delete a[h]});const l=_0(a),u=window.location.pathname+(l?`?${l}`:"")+(((r=s.state)==null?void 0:r.hash)||"");window.history.replaceState(window.history.state,"",u)}}}_getOAuthToken(e,i,n,r,s){return e=e.replace(/^http:/i,"https:"),rt(`${e}/sharing/rest/oauth2/token`,{authMode:"anonymous",method:"post",query:r&&s?{grant_type:"authorization_code",code:i,redirect_uri:r,client_id:n,code_verifier:s}:{grant_type:"refresh_token",refresh_token:i,client_id:n}}).then(o=>o.data)}_getCodeChallenge(e){if(e&&globalThis.isSecureContext){const i=new TextEncoder().encode(e);return crypto.subtle.digest("SHA-256",i).then(n=>eD(new Uint8Array(n)))}return Promise.resolve(null)}_pageShowHandler(e){if(e.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow){const i=new N("identity-manager:user-aborted","ABORTED");this._errbackFunc(i)}}_findCredential(e,i){let n,r,s,o,a=-1;const l=i&&i.token,u=i&&i.resource,h=this._isServerRsrc(e)?"server":"portal",p=this.credentials.filter(f=>this._hasSameServerInstance(f.server,e)&&f.scope===h);if(e=u||e,p.length)if(p.length===1){if(n=p[0],s=this.findServerInfo(n.server),r=s&&s.owningSystemUrl,o=r?this.findCredential(r,n.userId):void 0,a=this._getIdenticalSvcIdx(e,n),!l)return a===-1&&n.resources.push(e),this._addResource(e,o),n;a!==-1&&(n.resources.splice(a,1),this._removeResource(e,o))}else{let f,g;if(p.some(v=>(g=this._getIdenticalSvcIdx(e,v),g!==-1&&(f=v,s=this.findServerInfo(f.server),r=s&&s.owningSystemUrl,o=r?this.findCredential(r,f.userId):void 0,a=g,!0))),l)f&&(f.resources.splice(a,1),this._removeResource(e,o));else if(f)return this._addResource(e,o),f}}_findOAuthInfo(e){let i=this.findOAuthInfo(e);if(!i){for(const n of this.oAuthInfos)if(this._isIdProvider(n.portalUrl,e)){i=n;break}}return i}_addResource(e,i){i&&this._getIdenticalSvcIdx(e,i)===-1&&i.resources.push(e)}_removeResource(e,i){let n=-1;i&&(n=this._getIdenticalSvcIdx(e,i),n>-1&&i.resources.splice(n,1))}_useProxy(e,i){return i&&i.isAdmin&&!vo(e.adminTokenServiceUrl,this._appOrigin)||!this._isPortalDomain(e.tokenServiceUrl)&&String(e.currentVersion)==="10.1"&&!vo(e.tokenServiceUrl,this._appOrigin)}_getOrigin(e){const i=new Hs(e);return i.scheme+"://"+i.host+(i.port!=null?":"+i.port:"")}_getServerInstanceRoot(e){const i=e.toLowerCase();let n=i.indexOf(this._agsRest);return n===-1&&this._isAdminResource(e)&&(n=this._agsAdmin.test(e)?e.replace(this._agsAdmin,"$1").length:e.search(this._adminSvcs)),n!==-1||vle(i)||(n=i.indexOf("/sharing")),n===-1&&i.substr(-1)==="/"&&(n=i.length-1),n>-1?e.substring(0,n):e}_hasSameServerInstance(e,i){return e.substr(-1)==="/"&&(e=e.slice(0,-1)),e=e.toLowerCase(),i=this._getServerInstanceRoot(i).toLowerCase(),e=this._normalizeAGOLorgDomain(e),i=this._normalizeAGOLorgDomain(i),(e=e.substr(e.indexOf(":")))===(i=i.substr(i.indexOf(":")))}_normalizeAGOLorgDomain(e){const i=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,n=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,r=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return i.test(e)?e=e.replace(i,"https://www.arcgis.com"):n.test(e)?e=e.replace(n,"https://devext.arcgis.com"):r.test(e)&&(e=e.replace(r,"https://qaext.arcgis.com")),e}_sanitizeUrl(e){const i=(lt.request.proxyUrl||"").toLowerCase(),n=i?e.toLowerCase().indexOf(i+"?"):-1;return n!==-1&&(e=e.substring(n+i.length+1)),e=Ca(e),_i(e).path}_isRESTService(e){return e.includes(this._agsRest)}_isAdminResource(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)}_isServerRsrc(e){return this._isRESTService(e)||this._isAdminResource(e)}_isIdenticalService(e,i){let n=!1;if(this._isRESTService(e)&&this._isRESTService(i)){const r=this._getSuffix(e).toLowerCase(),s=this._getSuffix(i).toLowerCase();if(n=r===s,!n){const o=/(.*)\/(MapServer|FeatureServer|UtilityNetworkServer).*/gi;n=r.replace(o,"$1")===s.replace(o,"$1")}}else this._isAdminResource(e)&&this._isAdminResource(i)?n=!0:this._isServerRsrc(e)||this._isServerRsrc(i)||!this._isPortalDomain(e)||(n=!0);return n}_isPortalDomain(e){const i=new Hs(e.toLowerCase()),n=this._portalConfig;let r=this._gwDomains.some(s=>s.regex.test(i.uri));return!r&&n&&(r=this._hasSameServerInstance(this._getServerInstanceRoot(n.restBaseUrl),i.uri)),r||lt.portalUrl&&(r=vo(i,lt.portalUrl,!0)),r||(r=this._portals.some(s=>this._hasSameServerInstance(s,i.uri))),r=r||this._agsPortal.test(i.path),r}_isIdProvider(e,i){let n=-1,r=-1;this._gwDomains.forEach((o,a)=>{n===-1&&o.regex.test(e)&&(n=a),r===-1&&o.regex.test(i)&&(r=a)});let s=!1;if(n>-1&&r>-1&&(n===0||n===4?r!==0&&r!==4||(s=!0):n===1?r!==1&&r!==2||(s=!0):n===2?r===2&&(s=!0):n===3&&r===3&&(s=!0)),!s){const o=this.findServerInfo(i),a=o&&o.owningSystemUrl;a&&Kge(o)&&this._isPortalDomain(a)&&this._isIdProvider(e,a)&&(s=!0)}return s}_getIdenticalSvcIdx(e,i){let n=-1;for(let r=0;r<i.resources.length;r++){const s=i.resources[r];if(this._isIdenticalService(e,s)){n=r;break}}return n}_getSuffix(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")}_getTokenSvcUrl(e){let i,n,r;if(this._isRESTService(e)||this._isAdminResource(e)){const s=this._getServerInstanceRoot(e);return i=s+"/admin/generateToken",n=rt(e=s+"/rest/info",{query:{f:"json"}}).then(o=>o.data),{adminUrl:i,promise:n}}if(this._isPortalDomain(e)){let s="";if(this._gwDomains.some(o=>(o.regex.test(e)&&(s=o.tokenServiceUrl),!!s)),s||this._portals.some(o=>(this._hasSameServerInstance(o,e)&&(s=o+this._gwTokenUrl),!!s)),s||(r=e.toLowerCase().indexOf("/sharing"),r!==-1&&(s=e.substring(0,r)+this._gwTokenUrl)),s||(s=this._getOrigin(e)+this._gwTokenUrl),s){const o=new Hs(e).port;/^http:\/\//i.test(e)&&o==="7080"&&(s=s.replace(/:7080/i,":7443")),s=s.replace(/http:/i,"https:")}return s}if(e.toLowerCase().includes("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"}_processOAuthResponseParams(e,i,n){const r=i._oAuthCred;if(e.code){const o=r.codeVerifier;return r.codeVerifier=null,r.stateUID=null,r.save(),this._getOAuthToken(n.server,e.code,i.appId,this._getRedirectURI(i,!0),o).then(a=>{const l=new ki({userId:a.username,server:n.server,token:a.access_token,expires:Date.now()+1e3*a.expires_in,ssl:a.ssl,oAuthState:e.state,_oAuthCred:r});return i.userId=l.userId,r.storage=a.persist?SA:EA,r.refreshToken=a.refresh_token,r.token=null,r.expires=a.refresh_token_expires_in?Date.now()+1e3*a.refresh_token_expires_in:null,r.userId=l.userId,r.ssl=l.ssl,r.save(),l})}const s=new ki({userId:e.username,server:n.server,token:e.access_token,expires:Date.now()+1e3*Number(e.expires_in),ssl:e.ssl==="true",oAuthState:e.state,_oAuthCred:r});return i.userId=s.userId,r.storage=e.persist?SA:EA,r.refreshToken=null,r.token=s.token,r.expires=s.expires,r.userId=s.userId,r.ssl=s.ssl,r.save(),Promise.resolve(s)}_processOAuthPopupParams(e){var n;const i=this._oAuthDfd;if(this._oAuthDfd=null,i)if(clearInterval(this._oAuthIntervalId),(n=this._oAuthOnPopupHandle)==null||n.remove(),e.error){const r=e.error==="access_denied",s=new N(r?"identity-manager:user-aborted":"identity-manager:authentication-failed",r?"ABORTED":"OAuth: "+e.error+" - "+e.error_description);i.reject(s)}else this._processOAuthResponseParams(e,i.oinfo_,i.sinfo_).then(r=>{i.resolve(r)}).catch(r=>{i.reject(r)})}_setOAuthResponseQueryString(e){e&&(e.charAt(0)==="?"&&(e=e.substring(1)),this._processOAuthPopupParams(e_(e)))}_exchangeToken(e,i,n){return rt(`${e}/sharing/rest/oauth2/exchangeToken`,{authMode:"anonymous",method:"post",query:{f:"json",client_id:i,token:n}}).then(r=>r.data.token)}_getPlatformSelf(e,i){return e=e.replace(/^http:/i,"https:"),rt(`${e}/sharing/rest/oauth2/platformSelf`,{authMode:"anonymous",headers:{"X-Esri-Auth-Client-Id":i,"X-Esri-Auth-Redirect-Uri":window.location.href.replace(/#.*$/,"")},method:"post",query:{f:"json",expiration:30},withCredentials:!0}).then(n=>n.data)}_getPortalSelf(e,i){let n;return this._gwDomains.some(r=>(r.regex.test(e)&&(n=r.customBaseUrl),!!n)),n?Promise.resolve({allSSL:!0,currentVersion:"8.4",customBaseUrl:n,portalMode:"multitenant",supportsOAuth:!0}):(this._appOrigin.startsWith("https:")?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(i)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),rt(e,{query:{f:"json"},authMode:"anonymous",withCredentials:!0}).then(r=>r.data))}_doPortalSignIn(e){const i=this._portalConfig,n=window.location.href,r=this.findServerInfo(e);return!(!i&&!this._isPortalDomain(n)||!(r?r.hasPortal||r.owningSystemUrl&&this._isPortalDomain(r.owningSystemUrl):this._isPortalDomain(e))||!(this._isIdProvider(n,e)||i&&(this._hasSameServerInstance(this._getServerInstanceRoot(i.restBaseUrl),e)||this._isIdProvider(i.restBaseUrl,e))||vo(n,e,!0)))}_checkProtocol(e,i,n,r){let s=!0;const o=r?i.adminTokenServiceUrl:i.tokenServiceUrl;return o.trim().toLowerCase().startsWith("https:")&&!this._appOrigin.startsWith("https:")&&FI(o)&&(s=!!this._protocolFunc&&!!this._protocolFunc({resourceUrl:e,serverInfo:i}),!s)&&n(new N("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection.")),s}_enqueue(e,i,n,r,s,o){return r||(r=qx()),r.resUrl_=e,r.sinfo_=i,r.options_=n,r.admin_=s,r.refresh_=o,this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(e),this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(r)):this._xoReqs.push(r):this._doSignIn(r),r.promise}_doSignIn(e){this._busy=e,this._rejectOnPersistedPageShow=!1;const i=u=>{const h=e.options_&&e.options_.resource,p=e.resUrl_,f=e.refresh_;let g=!1;this.credentials.includes(u)||(f&&this.credentials.includes(f)?(f.userId=u.userId,f.token=u.token,f.expires=u.expires,f.validity=u.validity,f.ssl=u.ssl,f.creationTime=u.creationTime,g=!0,u=f):this.credentials.push(u)),u.resources||(u.resources=[]),u.resources.includes(h||p)||u.resources.push(h||p),u.scope=this._isServerRsrc(p)?"server":"portal",u.emitTokenChange();const v=this._soReqs,b={};this._soReqs=[],v.forEach(_=>{if(!this._isIdenticalService(p,_.resUrl_)){const w=this._getSuffix(_.resUrl_);b[w]||(b[w]=!0,u.resources.push(_.resUrl_))}}),e.resolve(u),v.forEach(_=>{this._hasSameServerInstance(this._getServerInstanceRoot(p),_.resUrl_)?_.resolve(u):this._soReqs.push(_)}),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,g||this.emit("credential-create",{credential:u}),this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},n=u=>{e.reject(u),this._busy=e.resUrl_=e.sinfo_=e.refresh_=null,this._soReqs.length?this._doSignIn(this._soReqs.shift()):this._xoReqs.length&&this._doSignIn(this._xoReqs.shift())},r=(u,h,p,f)=>{var S,C,$;const g=e.sinfo_,v=!e.options_||e.options_.prompt!==!1,b=g.hasPortal&&this._findOAuthInfo(e.resUrl_);let _,w;if(u)i(new ki({userId:u,server:g.server,token:p||null,expires:f!=null?Number(f):null,ssl:!!h}));else if(window!==window.parent&&((S=this._appUrlObj.query)!=null&&S["arcgis-auth-origin"])&&((C=this._appUrlObj.query)!=null&&C["arcgis-auth-portal"])&&this._hasSameServerInstance(this._getServerInstanceRoot(this._appUrlObj.query["arcgis-auth-portal"]),e.resUrl_)){window.parent.postMessage({type:"arcgis:auth:requestCredential"},this._appUrlObj.query["arcgis-auth-origin"]);const M=ll(window,"message",P=>{P.source===window.parent&&P.data&&(P.data.type==="arcgis:auth:credential"?(M.remove(),P.data.credential.expires<Date.now()?n(new N("identity-manager:credential-request-failed","Parent application's token has expired.")):i(new ki(P.data.credential))):P.data.type==="arcgis:auth:error"&&(M.remove(),P.data.error.name==="tokenExpiredError"?n(new N("identity-manager:credential-request-failed","Parent application's token has expired.")):n(N.fromJSON(P.data.error))))});Ur(($=e.options_)==null?void 0:$.signal,()=>{M.remove()})}else if(b){let M=b._oAuthCred;if(!M){const P=new S6(b,SA),k=new S6(b,EA);P.isValid()&&k.isValid()?P.expires>k.expires?(M=P,k.destroy()):(M=k,P.destroy()):M=P.isValid()?P:k,b._oAuthCred=M}if(M.isValid()){_=new ki({userId:M.userId,server:g.server,token:M.token,expires:M.expires,ssl:M.ssl,_oAuthCred:M});const P=b.appId!==M.appId&&this._doPortalSignIn(e.resUrl_);P||M.refreshToken?(e._pendingDfd=M.refreshToken?this._getOAuthToken(g.server,M.refreshToken,M.appId).then(k=>(_.expires=Date.now()+1e3*k.expires_in,_.token=k.access_token,_)):Promise.resolve(_),e._pendingDfd.then(k=>P?this._exchangeToken(k.server,b.appId,k.token).then(D=>(k.token=D,k)).catch(()=>k):k).then(k=>{i(k)}).catch(()=>{M==null||M.destroy(),r()})):i(_)}else if(this._oAuthLocationParams&&this._hasSameServerInstance(b.portalUrl,this._oAuthLocationParams.state.portalUrl)&&(this._oAuthLocationParams.access_token||this._oAuthLocationParams.code&&this._oAuthLocationParams.state.uid===M.stateUID&&M.codeVerifier)){const P=this._oAuthLocationParams;this._oAuthLocationParams=null,e._pendingDfd=this._processOAuthResponseParams(P,b,g).then(k=>{i(k)}).catch(n)}else{const P=()=>{v?e._pendingDfd=this.oAuthSignIn(e.resUrl_,g,b,e.options_).then(i,n):(w=new N("identity-manager:not-authenticated","User is not signed in."),n(w))};this._doPortalSignIn(e.resUrl_)?e._pendingDfd=this._getPlatformSelf(g.server,b.appId).then(k=>{vo(k.portalUrl,this._appOrigin,!0)?(_=new ki({userId:k.username,server:g.server,expires:Date.now()+1e3*k.expires_in,token:k.token}),i(_)):P()}).catch(P):P()}}else if(v){if(this._checkProtocol(e.resUrl_,g,n,e.admin_)){let M=e.options_;e.admin_&&(M=M||{},M.isAdmin=!0),e._pendingDfd=this.signIn(e.resUrl_,g,M).then(i,n)}}else w=new N("identity-manager:not-authenticated","User is not signed in."),n(w)},s=()=>{const u=e.sinfo_,h=u.owningSystemUrl,p=e.options_;let f,g,v,b;if(p&&(f=p.token,g=p.error,v=p.prompt),b=this._findCredential(h,{token:f,resource:e.resUrl_}),!b){for(const _ of this.credentials)if(this._isIdProvider(h,_.server)){b=_;break}}if(b){const _=this.findCredential(e.resUrl_,b.userId);if(_)i(_);else if(C6(u,this._legacyFed)){const w=b.toJSON();w.server=u.server,w.resources=null,i(new ki(w))}else(e._pendingDfd=this.generateToken(this.findServerInfo(b.server),null,{serverUrl:e.resUrl_,token:b.token,signal:e.options_.signal,ssl:b.ssl})).then(w=>{i(new ki({userId:b==null?void 0:b.userId,server:u.server,token:w.token,expires:w.expires!=null?Number(w.expires):null,ssl:!!w.ssl,isAdmin:e.admin_,validity:w.validity}))},n)}else this._busy=null,f&&(e.options_.token=null),(e._pendingDfd=this.getCredential(h.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,owningTenant:u.owningTenant,signal:e.options_.signal,token:f,error:g,prompt:v})).then(()=>{this._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)},_=>{e.resUrl_=e.sinfo_=e.refresh_=null,e.reject(_)})};this._errbackFunc=n;const o=e.sinfo_.owningSystemUrl,a=this._isServerRsrc(e.resUrl_),l=e.sinfo_._restInfoPms;l?l.promise.then(u=>{const h=e.sinfo_;if(h._restInfoPms){h.adminTokenServiceUrl=h._restInfoPms.adminUrl,h._restInfoPms=null,h.tokenServiceUrl=(rh("authInfo.tokenServicesUrl",u)||rh("authInfo.tokenServiceUrl",u)||rh("tokenServiceUrl",u))??null,h.shortLivedTokenValidity=rh("authInfo.shortLivedTokenValidity",u)??null,h.currentVersion=u.currentVersion,h.owningTenant=u.owningTenant;const p=h.owningSystemUrl=u.owningSystemUrl;p&&this._portals.push(p)}a&&h.owningSystemUrl?s():r()},()=>{e.sinfo_._restInfoPms=null;const u=new N("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");n(u)}):a&&o?s():e.sinfo_._selfReq?e.sinfo_._selfReq.selfDfd.then(u=>{const h={};let p,f,g,v;return u&&(p=u.user&&u.user.username,h.username=p,h.allSSL=u.allSSL,f=u.supportsOAuth,v=parseFloat(u.currentVersion),u.portalMode==="multitenant"&&(g=u.customBaseUrl),e.sinfo_.currentVersion=v),e.sinfo_.webTierAuth=!!p,p&&this.normalizeWebTierAuth?this.generateToken(e.sinfo_,null,{ssl:h.allSSL}).catch(()=>null).then(b=>(h.portalToken=b&&b.token,h.tokenExpiration=b&&b.expires,h)):!p&&f&&v>=4.4&&!this._findOAuthInfo(e.resUrl_)?this._generateOAuthInfo({portalUrl:e.sinfo_.server,customBaseUrl:g,owningTenant:e.sinfo_._selfReq.owningTenant}).catch(()=>null).then(()=>h):h}).catch(()=>null).then(u=>{e.sinfo_._selfReq=null,u?r(u.username,u.allSSL,u.portalToken,u.tokenExpiration):r()}):r()}_generateOAuthInfo(e){let i,n=null,r=e.portalUrl;const s=e.customBaseUrl,o=e.owningTenant,a=!this._defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal;if(a){n=window.location.href;let l=n.indexOf("?");l>-1&&(n=n.slice(0,l)),l=n.search(/\/(apps|home)\//),n=l>-1?n.slice(0,l):null}return a&&n?(this._hasTestedIfAppIsOnPortal=!0,i=rt(n+"/sharing/rest",{query:{f:"json"}}).then(()=>{this._defaultOAuthInfo=new aQ({appId:"arcgisonline",popupCallbackUrl:n+"/home/oauth-callback.html"})})):i=Promise.resolve(),i.then(()=>{if(this._defaultOAuthInfo)return r=r.replace(/^http:/i,"https:"),rt(r+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:o,client_id:this._defaultOAuthInfo.appId,redirect_uri:_s(this._defaultOAuthInfo.popupCallbackUrl),f:"json"}}).then(l=>{if(l.data.valid){const u=this._defaultOAuthInfo.clone();l.data.urlKey&&s?u.portalUrl="https://"+l.data.urlKey.toLowerCase()+"."+s:u.portalUrl=r,u.popup=window!==window.top||!(vo(r,this._appOrigin)||this._gwDomains.some(h=>h.regex.test(r)&&h.regex.test(this._appOrigin))),this.oAuthInfos.push(u)}})})}_doOAuthSignIn(e,i,n,r){const s=n._oAuthCred,o={portalUrl:n.portalUrl};!n.popup&&n.preserveUrlHash&&window.location.hash&&(o.hash=window.location.hash),s.stateUID&&(o.uid=s.stateUID);const a={client_id:n.appId,response_type:s.codeVerifier?"code":"token",state:JSON.stringify(o),expiration:n.expiration,locale:n.locale,redirect_uri:this._getRedirectURI(n,!!s.codeVerifier)};n.forceLogin&&(a.force_login=!0),n.forceUserId&&n.userId&&(a.prepopulatedusername=n.userId),!n.popup&&this._doPortalSignIn(e)&&(a.redirectToUserOrgUrl=!0),s.codeVerifier&&(a.code_challenge=r||s.codeVerifier,a.code_challenge_method=r?"S256":"plain");const l=n.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",u=l+"?"+_0(a);if(n.popup){const h=window.open(u,"esriJSAPIOAuth",n.popupWindowFeatures);if(h)h.focus(),this._oAuthDfd.oAuthWin_=h,this._oAuthIntervalId=setInterval(()=>{if(h.closed){clearInterval(this._oAuthIntervalId),this._oAuthOnPopupHandle.remove();const p=this._oAuthDfd;if(p){const f=new N("identity-manager:user-aborted","ABORTED");p.reject(f)}}},500),this._oAuthOnPopupHandle=ll(window,["arcgis:auth:hash","arcgis:auth:location:search"],p=>{p.type==="arcgis:auth:hash"?this.setOAuthResponseHash(p.detail):this._setOAuthResponseQueryString(p.detail)});else{const p=new N("identity-manager:popup-blocked","ABORTED");this._oAuthDfd.reject(p)}}else this._rejectOnPersistedPageShow=!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:a,authorizeUrl:l,resourceUrl:e,serverInfo:i,oAuthInfo:n}):window.location.href=u}_getRedirectURI(e,i){const n=window.location.href.replace(/#.*$/,"");if(e.popup)return _s(e.popupCallbackUrl);if(i){const r=_i(n);return r.query&&["code","error","error_description","message_code","persist","state"].forEach(s=>{delete r.query[s]}),w$(r.path,r.query)}return n}};Xge.prototype.declaredClass="esri.identity.IdentityManagerBase";let ki=class extends $r.EventedAccessor{constructor(e){super(e),this._oAuthCred=null,this.tokenRefreshBuffer=2,e&&e._oAuthCred&&(this._oAuthCred=e._oAuthCred)}initialize(){this.resources=this.resources||[],this.creationTime==null&&(this.creationTime=Date.now())}refreshToken(){const e=Ne.findServerInfo(this.server),i=e&&e.owningSystemUrl,n=!!i&&this.scope==="server",r=n&&C6(e,Ne._legacyFed),s=e.webTierAuth,o=s&&Ne.normalizeWebTierAuth,a=xA[this.server],l=a&&a[this.userId];let u,h=this.resources&&this.resources[0],p=n?Ne.findServerInfo(i):null,f={username:this.userId,password:l};if(s&&!o)return;n&&!p&&Ne.serverInfos.some(v=>(Ne._isIdProvider(i,v.server)&&(p=v),!!p));const g=p?Ne.findCredential(p.server,this.userId):null;if(!n||g){if(!r){if(n)u={serverUrl:h,token:g&&g.token,ssl:g&&g.ssl};else if(o)f=null,u={ssl:this.ssl};else{if(!l){let v;return h&&(h=Ne._sanitizeUrl(h),this._enqueued=1,v=Ne._enqueue(h,e,null,null,this.isAdmin,this),v.then(()=>{this._enqueued=0,this.refreshServerTokens()}).catch(()=>{this._enqueued=0})),v}this.isAdmin&&(u={isAdmin:!0})}return Ne.generateToken(n?p:e,n?null:f,u).then(v=>{this.token=v.token,this.expires=v.expires!=null?Number(v.expires):null,this.creationTime=Date.now(),this.validity=v.validity,this.emitTokenChange(),this.refreshServerTokens()}).catch(()=>{})}g==null||g.refreshToken()}}refreshServerTokens(){this.scope==="portal"&&Ne.credentials.forEach(e=>{const i=Ne.findServerInfo(e.server),n=i&&i.owningSystemUrl;e!==this&&e.userId===this.userId&&n&&e.scope==="server"&&(Ne._hasSameServerInstance(this.server,n)||Ne._isIdProvider(n,this.server))&&(C6(i,Ne._legacyFed)?(e.token=this.token,e.expires=this.expires,e.creationTime=this.creationTime,e.validity=this.validity,e.emitTokenChange()):e.refreshToken())})}emitTokenChange(e){clearTimeout(this._refreshTimer);const i=this.server&&Ne.findServerInfo(this.server),n=i&&i.owningSystemUrl,r=n&&Ne.findServerInfo(n);e===!1||n&&this.scope!=="portal"&&(!r||!r.webTierAuth||Ne.normalizeWebTierAuth)||this.expires==null&&this.validity==null||this._startRefreshTimer(),this.emit("token-change")}destroy(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null,this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);const e=Ne.credentials.indexOf(this);e>-1&&Ne.credentials.splice(e,1),this.emitTokenChange(),this.emit("destroy")}toJSON(){const e=IP({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),i=this.resources;return i&&i.length>0&&(e.resources=i.slice()),e}_startRefreshTimer(){clearTimeout(this._refreshTimer);const e=6e4*this.tokenRefreshBuffer,i=2**31-1;let n=(this.validity?this.creationTime+6e4*this.validity:this.expires)-Date.now();n<0?n=0:n>i&&(n=i),this._refreshTimer=setTimeout(this.refreshToken.bind(this),n>e?n-e:n)}};c([d()],ki.prototype,"creationTime",void 0),c([d()],ki.prototype,"expires",void 0),c([d()],ki.prototype,"isAdmin",void 0),c([d()],ki.prototype,"oAuthState",void 0),c([d()],ki.prototype,"resources",void 0),c([d()],ki.prototype,"scope",void 0),c([d()],ki.prototype,"server",void 0),c([d()],ki.prototype,"ssl",void 0),c([d()],ki.prototype,"token",void 0),c([d()],ki.prototype,"tokenRefreshBuffer",void 0),c([d()],ki.prototype,"userId",void 0),c([d()],ki.prototype,"validity",void 0),ki=c([O("esri.identity.Credential")],ki);let Qge=class extends Xge{};Qge.prototype.declaredClass="esri.identity.IdentityManager";const DE=new Qge;AOe(DE);const zZe=Object.freeze(Object.defineProperty({__proto__:null,default:DE},Symbol.toStringTag,{value:"Module"})),jZe=async(t,e,i,n)=>{const r=new NJe({container:t,constraints:NYe});WZe();const s=await VZe(e);r.map=s,aZe(r,n),await r.when(),UZe(r),r.map.add(Jp),r.map.add(bu),JZe(r),r.popup.on("trigger-action",a=>{a.action.title==="Select"&&i(r.popup.location)}),await jo(()=>r.map.basemap.loaded);const o=await qZe(r.map.basemap);return o&&(r.background={color:o}),r.on("hold",a=>{i(a.mapPoint)}),await r.when(),r.watch("extent",()=>{var u;const a=TO();if(window.localStorage.getItem(`imaps_calcite_${a}`)){const h=JSON.parse((u=window==null?void 0:window.localStorage)==null?void 0:u.getItem(`imaps_calcite_${a}`));h.initialState={viewpoint:{targetGeometry:r.extent}},window.localStorage.setItem(`imaps_calcite_${a}`,JSON.stringify(h))}}),r.map.watch("basemap",()=>{var u;const a=TO();if(window.localStorage.getItem(`imaps_calcite_${a}`)){const h=JSON.parse((u=window==null?void 0:window.localStorage)==null?void 0:u.getItem(`imaps_calcite_${a}`));h.baseMap=r.map.basemap,window.localStorage.setItem(`imaps_calcite_${a}`,JSON.stringify(h))}}),r},eye=(t,e)=>e.applicationProperties.viewing.search.layers.find(n=>n.id===t.id),TO=()=>{const t=new URL(window.location);let e="";return t.searchParams.get("config")&&(e+=t.searchParams.get("config")),e},VZe=async t=>{var n,r;let e;const i=TO();if(window.localStorage.getItem(`imaps_calcite_${i}`)&&window.localStorage.getItem("imaps_reset")!=="true"){e=MF.fromJSON(JSON.parse((n=window==null?void 0:window.localStorage)==null?void 0:n.getItem(`imaps_calcite_${i}`)));const s=new URL(window.location);if(s.searchParams.get("layers")){const o=(r=s.searchParams.get("layers"))==null?void 0:r.split(",");if(o){const a=new MF({portalItem:{id:t}});await e.load(),await a.load(),a.allLayers.filter(u=>o.includes(u.title)).forEach(u=>{if(u.parent){const h=e.findLayerById(u.parent.id);h&&(h.add(u),h.visible=!0,h.parent&&(h.parent.visible=!0),u.visible=!0)}})}}return e}else return window.localStorage.removeItem("imaps_reset"),e=new MF({portalItem:{id:t}}),await e.load(),e.allLayers.filter(o=>o.type==="group").toArray().forEach(o=>{o.removeMany(o.allLayers.filter(a=>!a.visible&&!a.title.includes("Property")&&!eye(a,e)).toArray())}),e},UZe=t=>{t.map.removeMany([t.map.findLayerById("selection-layer"),t.map.findLayerById("feature-table")]),t.map.removeMany(t.map.allLayers.filter(e=>e.type==="map-notes").toArray())},tye=t=>t.reduce((e,i)=>e.concat(i.layerType==="GroupLayer"?[i,...tye(i.layers)]:[]),[]),$xt=async t=>{if(t&&(t!=null&&t.ready)){const e=t.map.toJSON();tye(e.operationalLayers).forEach(r=>{r.layerType!=="ArcGISMapServiceLayer"&&(r.layers=r.layers.filter(function(s){return s.visibility||s.title.includes("Property")||eye(s,e)||s.type==="group"}))}),e.initialState={viewpoint:{targetGeometry:t.extent}};const n=TO();window.localStorage.setItem(`imaps_calcite_${n}`,JSON.stringify(e))}},BZe={type:"cluster",clusterRadius:"100px",clusterMinSize:"24px",clusterMaxSize:"60px",labelingInfo:[{deconflictionStrategy:"none",labelExpressionInfo:{expression:"Text($feature.cluster_count, '#,###')"},symbol:{type:"text",color:"#004a5d",font:{weight:"bold",family:"Noto Sans",size:"12px"}},labelPlacement:"center-center"}]},Jp=new Ph({source:[],editingEnabled:!0,listMode:"hide",legendEnabled:!1,geometryType:"polygon",id:"selection-layer",objectIdField:"OBJECTID",spatialReference:{wkid:102100},orderBy:[{field:"selected",order:"ascending"}],fields:[{name:"OBJECTID",type:"oid"},{name:"selected",type:"small-integer"},{name:"PIN_NUM",type:"string"}],renderer:{type:"unique-value",field:"selected",uniqueValueInfos:[{value:1,symbol:{type:"simple-fill",outline:{type:"simple-line",color:[217,66,70,1],width:2,style:"solid"},style:"none"}},{value:2,symbol:{type:"simple-fill",outline:{type:"simple-line",color:[255,227,76,1],width:2,style:"solid"},style:"none"}}]},minScale:2e4}),bu=new Ph({source:[],editingEnabled:!0,listMode:"hide",featureReduction:BZe,legendEnabled:!1,geometryType:"point",id:"selection-cluster",objectIdField:"OBJECTID",spatialReference:{wkid:102100},orderBy:[{field:"selected",order:"ascending"}],fields:[{name:"OBJECTID",type:"oid"},{name:"selected",type:"small-integer"},{name:"PIN_NUM",type:"string"}],effect:"drop-shadow(3px, 3px, 4px)",renderer:{type:"simple",symbol:{type:"simple-marker",size:4,color:"#ffe34c",outline:{color:"rgba(153, 130, 0, 1)",width:2}}},maxScale:2e4}),HZe=async(t,e)=>{const i=await(Jp==null?void 0:Jp.queryFeatures({where:"1=1",returnGeometry:!1,outFields:["OBJECTID"]}));await(Jp==null?void 0:Jp.applyEdits({deleteFeatures:i.features})),await Jp.applyEdits({addFeatures:t}),GZe(t)},GZe=async t=>{const e=[];t.forEach(n=>{const r=n.geometry;e.push(new en({attributes:n.attributes,geometry:r?r.centroid:void 0}))});const i=await(bu==null?void 0:bu.queryFeatures({where:"1=1",returnGeometry:!1,outFields:["OBJECTID"]}));await(bu==null?void 0:bu.applyEdits({deleteFeatures:i.features})),await(bu==null?void 0:bu.applyEdits({addFeatures:e}))},qZe=async t=>{const e=t.baseLayers.find(n=>n.type==="vector-tile");if(!e)return null;await jo(()=>e==null?void 0:e.loaded);const i=e.getStyleLayer("background");return i?new Se(i.paint["background-color"]):null},WZe=()=>{DE.on("dialog-create",async t=>{DE.dialog.visible=!1,setTimeout(()=>{DE.dialog.content.emit("cancel",{})},250)})},JZe=async t=>{const e=t.map.allLayers.find(i=>i.type==="feature"&&i.title.startsWith("Property"));await t.whenLayerView(e),e&&e.popupTemplate&&(e.popupTemplate.actions=new we([{title:"Select",id:"property-select",className:"esri-icon-search"}]))},YZe=t=>{const e=le.useRef(),i=le.useRef(!1),n=le.useRef(null);return le.useEffect(()=>(i.current||(i.current=!0,jZe(e.current,t.mapId,t.geometrySet,t.widgetActivated).then(r=>{n.current=r,t.mapViewSet(n.current)})),()=>{}),[]),le.useEffect(()=>{t.properties&&HZe(t.properties,n.current)},[t.properties]),{ref:e,loaded:i,view:n}};function ZZe(t){const{ref:e}=YZe(t);return re("div",{className:"mapDiv",ref:e})}const KZe=gl.memo(ZZe);const lQ=t=>{var n,r,s,o;t?(document.body.classList.add("calcite-mode-dark"),(n=document.querySelector(".esri-ui"))==null||n.classList.remove("calcite-mode-light"),(r=document.querySelector(".esri-ui"))==null||r.classList.add("calcite-mode-dark")):(document.body.classList.remove("calcite-mode-dark"),(s=document.querySelector(".esri-ui"))==null||s.classList.add("calcite-mode-light"),(o=document.querySelector(".esri-ui"))==null||o.classList.remove("calcite-mode-dark"));const e=document.querySelector("#jsapi-theme-dark"),i=document.querySelector("#jsapi-theme-light");return e&&i&&(e.disabled=!t,i.disabled=t),document.body.classList.contains("calcite-mode-dark")};function XZe(){const t=le.useRef(null),e=le.useRef(),i=le.useRef(),n=le.useRef(),[r,s]=le.useState(),[o,a]=le.useState("light"),l=navigator.userAgent.toUpperCase().includes("MAC")?"Option":"Alt",u=window.matchMedia("(pointer:coarse)").matches;return le.useEffect(()=>{fetch("./config.json").then(p=>{p.json().then(f=>{s(f.links)})}),window.localStorage.getItem("calcite-imaps-theme")==="dark"&&requestAnimationFrame(()=>{lQ(!0),a("dark")})},[]),qe("div",{slot:"header",id:"header",children:[re("div",{children:re("img",{ref:t,alt:"imaps",src:o==="dark"?"logo_dark.svg":"logo.svg",className:"logo"})}),re("div",{id:"header-controls",children:qe(hIe,{ref:e,placement:"bottom-end",scale:"m",width:"l",type:"click",onCalciteDropdownOpen:h=>{var p,f;(f=(p=h.target.shadowRoot)==null?void 0:p.querySelector(".calcite-dropdown-content"))==null||f.setAttribute("style",`min-height: ${u?"590":"620"}px`)},children:[re(Xk,{id:"menuButton",scale:"m",slot:"trigger",name:"Menu",role:"button","aria-label":"Menu",children:re(L3,{icon:"hamburger",scale:"m"})}),re(ua,{label:"Menu",referenceElement:"menuButton",closeOnClick:!0,children:"Menu"}),re(R3,{"selection-mode":"none","group-title":"About",children:re(G1,{onClick:()=>{i.current&&(i.current.open=!i.current.open)},children:"Disclaimer"})},"disclaimer"),r&&r.map(h=>re(R3,{"selection-mode":"none","group-title":h.title,children:h.links.map(p=>re(G1,{rel:"noreferrer",href:p.href,target:"_blank",children:p.title},p.title))},h.title)),qe(R3,{selectionMode:"none","group-title":"Settings",children:[re(G1,{children:qe(pIe,{layout:"inline",className:"label-wrapper",children:["Light",re(L3,{icon:"brightness",scale:"s"}),re(gIe,{checked:o==="dark"?!0:void 0,onCalciteSwitchChange:h=>{const p=lQ(h.currentTarget.checked);a(p?"dark":"light"),window.localStorage.setItem("calcite-imaps-theme",p?"dark":"light")}}),re(L3,{icon:"moon",scale:"s"}),"Dark"]})}),!u&&re(G1,{onClick:()=>{n.current&&(n.current.open=!n.current.open)},children:"Keyboard Shortcuts"}),re(G1,{iconStart:"reset",onClick:()=>{window.localStorage.setItem("imaps_reset","true");const h=new URL(window.location);let p="";h.searchParams.get("config")&&(p+=h.searchParams.get("config")),window.localStorage.removeItem(`imaps_calcite_${p}`),window.location.reload()},children:"Reset To Default"})]})]})}),qe(Vq,{ref:i,"aria-labelledby":"disclaimer-title",children:[re("div",{slot:"header",id:"disclaimer-title",children:"Disclaimer"}),re("div",{slot:"content",children:"iMAPS makes every effort to produce and publish the most current and accurate information possible. However, the maps are productions for information purposed, and are NOT surveys. No warranties, expressed or implied, are provided for the data therein, its use, or its interpretation. Register of Deeds documents accessed through this site are unofficial. The official records are maintained at the Wake County Register of Deeds office. The Wake County Register of Deeds assumes no responsibility or liability associated with the use or misused of this data."}),re(Xk,{slot:"primary",width:"full",onClick:()=>{i.current&&(i.current.open=!i.current.open)},children:"Close"})]}),!u&&qe(Vq,{ref:n,"aria-labelledby":"shortcuts-title",children:[re("div",{slot:"header",id:"shortcuts-title",children:"Keyboard Shortcuts"}),qe("div",{className:"shortcuts-content ",slot:"content",children:[re("h3",{children:"Panels"}),re("table",{children:qe("tbody",{children:[qe("tr",{children:[re("td",{children:"Property Search"}),qe("td",{children:[l,"+P"]})]}),qe("tr",{children:[re("td",{children:"Location Search"}),qe("td",{children:[l,"+O"]})]}),qe("tr",{children:[re("td",{children:"Layer list"}),qe("td",{children:[l,"+L"]})]}),qe("tr",{children:[re("td",{children:"Legend"}),qe("td",{children:[l,"+G"]})]}),qe("tr",{children:[re("td",{children:"Basemap"}),qe("td",{children:[l,"+B"]})]})]})}),re("h3",{children:"Tools"}),re("table",{children:qe("tbody",{children:[qe("tr",{children:[re("td",{children:"Property Select"}),qe("td",{children:["Shift+",l,"+S"]})]}),qe("tr",{children:[re("td",{children:"Measure"}),qe("td",{children:["Shift+",l,"+M"]})]}),qe("tr",{children:[re("td",{children:"Sketch"}),qe("td",{children:["Shift+",l,"+K"]})]}),qe("tr",{children:[re("td",{children:"Bookmarks"}),qe("td",{children:["Shift+",l,"+B"]})]}),qe("tr",{children:[re("td",{children:"Print"}),qe("td",{children:["Shift+",l,"+P"]})]})]})}),re("h3",{children:"Select Property"}),re("em",{children:"Hold keys without releasing to use these shortcuts"}),re("br",{}),re("table",{children:qe("tbody",{children:[qe("tr",{children:[re("td",{children:"Select by Area"}),qe("td",{children:["Shift+",l,"+A"]})]}),qe("tr",{children:[re("td",{children:"Select by Circle"}),qe("td",{children:["Shift+",l,"+C"]})]}),qe("tr",{children:[re("td",{children:"Select by Rectangle"}),qe("td",{children:["Shift+",l,"+R"]})]}),qe("tr",{children:[re("td",{children:"Select by Line"}),qe("td",{children:["Shift+",l,"+L"]})]})]})})]}),re(Xk,{slot:"primary",width:"full",onClick:()=>{n.current&&(n.current.open=!n.current.open)},children:"Close"})]})]})}const QZe=gl.memo(XZe);const Si="esri-search",Re={base:`${Si} esri-widget`,loader:"esri-widget__loader",loaderText:"esri-widget__loader-text",loaderAnimation:"esri-widget__loader-animation",esriInput:"esri-input",hasMultipleSources:`${Si}--multiple-sources`,isLoading:`${Si}--loading`,isSearching:`${Si}--searching`,showSuggestions:`${Si}--show-suggestions`,showSources:`${Si}--sources`,showWarning:`${Si}--warning`,container:`${Si}__container`,input:`${Si}__input`,inputContainer:`${Si}__input-container`,form:`${Si}__form`,submitButton:`${Si}__submit-button`,sourcesButton:`${Si}__sources-button`,clearButton:`${Si}__clear-button`,sourceName:`${Si}__source-name`,suggestionsMenu:`${Si}__suggestions-menu`,suggestionList:`${Si}__suggestions-list`,suggestionListCurrentLocation:`${Si}__suggestions-list--current-location`,sourcesMenu:`${Si}__sources-menu`,source:`${Si}__source`,warningMenu:`${Si}__warning-menu`,warningMenuBody:`${Si}__warning-body`,warningMenuHeader:`${Si}__warning-header`,warningMenuText:`${Si}__warning-text`,noValueText:`${Si}__no-value-text`,esriWidgetDisabled:"esri-widget--disabled",button:"esri-widget--button",fallbackText:"esri-icon-font-fallback-text",header:"esri-widget__heading",locate:"esri-icon-locate-circled",menu:"esri-menu",menuList:"esri-menu__list",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuHeader:"esri-menu__header",loadingIcon:"esri-icon-loading-indicator esri-rotating",searchIcon:"esri-icon-search",dropdownIcon:"esri-icon-down-arrow esri-search__sources-button--down",dropupIcon:"esri-icon-up-arrow esri-search__sources-button--up",clearIcon:"esri-icon-close",noticeIcon:"esri-icon-notice-triangle",widgetIcon:"esri-icon-search",disabled:"esri-disabled"},rg="esri-search-result-renderer",pd={base:`${rg} esri-widget`,anchor:"esri-widget__anchor",showMoreResults:`${rg}__more-results--show-more-results`,moreResults:`${rg}__more-results`,moreResultsList:`${rg}__more-results-list`,moreResultsHeader:`${rg}__more-results-header`,moreResultsItem:`${rg}__more-results-item`,moreResultsListHeader:`${rg}__more-results-list-header`};let mn=class extends F0(Y){constructor(e){super(e),this.autoNavigate=null,this.filter=null,this.getResults=null,this.getSuggestions=null,this.maxResults=null,this.maxSuggestions=null,this.minSuggestCharacters=null,this.outFields=null,this.placeholder="",this.popupEnabled=null,this.popupTemplate=null,this.prefix="",this.resultGraphicEnabled=null,this.resultSymbol=null,this.suggestionsEnabled=null,this.suffix="",this.withinViewEnabled=!1,this.zoomScale=null}};c([d()],mn.prototype,"autoNavigate",void 0),c([d()],mn.prototype,"filter",void 0),c([d()],mn.prototype,"getResults",void 0),c([d()],mn.prototype,"getSuggestions",void 0),c([d()],mn.prototype,"maxResults",void 0),c([d()],mn.prototype,"maxSuggestions",void 0),c([d()],mn.prototype,"minSuggestCharacters",void 0),c([d()],mn.prototype,"outFields",void 0),c([d()],mn.prototype,"placeholder",void 0),c([d()],mn.prototype,"popupEnabled",void 0),c([d()],mn.prototype,"popupTemplate",void 0),c([d()],mn.prototype,"prefix",void 0),c([d()],mn.prototype,"resultGraphicEnabled",void 0),c([d()],mn.prototype,"resultSymbol",void 0),c([d()],mn.prototype,"suggestionsEnabled",void 0),c([d()],mn.prototype,"suffix",void 0),c([d()],mn.prototype,"withinViewEnabled",void 0),c([d()],mn.prototype,"zoomScale",void 0),mn=c([O("esri.widgets.Search.SearchSource")],mn);const I7=mn,iye=96;function Mxt(t,e){const i=e||t.extent,n=t.width,r=jh(i&&i.spatialReference);return i&&n?i.width/n*r*Ioe*iye:0}function eKe(t,e){return t/(jh(e)*Ioe*iye)}function tKe(t,e){const i=t.extent,n=t.width-(t.padding?t.padding.left+t.padding.right:0),r=eKe(e,i.spatialReference);return i.clone().expand(r*n/i.width)}const cQ=se.getLogger("esri.widgets.Search.support.geometryUtils");function iKe(t,e){var n,r;if(!e)return cQ.error("missing-parameter: view is missing."),Promise.reject(new N("searchgeometryutils:missing-parameter","view is missing."));if(!t)return cQ.error("missing-parameter: point is missing."),Promise.reject(new N("searchgeometryutils:missing-parameter","point is missing."));if(t.hasZ||e.type==="2d")return Promise.resolve(t);const i=(n=e==null?void 0:e.map)==null?void 0:n.ground;return i&&i.layers.length?i.queryElevation(t,{cache:(r=e.basemapTerrain)==null?void 0:r.elevationQueryCache}).then(s=>s.geometry):Promise.resolve(t)}function uQ(t){if(U(t))return null;switch(t.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":return t.getPoint(0);case"polyline":return t.getPoint(0,0)}return null}function T7(t,e,i){return U(t)?null:t.type==="extent"?t:t.type==="multipoint"||t.type==="polygon"||t.type==="polyline"?t.extent:t.type==="point"?nye(t,e,i):void 0}function I6(t,e,i){return U(t)||U(e)?null:nye(t.center,e,i)}function nye(t,e,i){const n=t.hasZ?t.z:void 0;return e&&e.map?(i?tKe(e,i):e.extent).clone().centerAt(t).set({zmax:n,zmin:n}):new Dt({xmin:t.x-.25,ymin:t.y-.25,xmax:t.x+.25,ymax:t.y+.25,spatialReference:t.spatialReference,zmin:n,zmax:n})}const nKe=/https?:\/\/services.*\.arcgis\.com/i,rKe=/(?:\{([^}]+)\})/g,V_=se.getLogger("esri.widgets.Search.support.layerSearchUtils");function sKe(t,e){const{exactMatch:i=!1,location:n,maxResults:r,spatialReference:s,source:o,sourceIndex:a,suggestResult:l,view:u}=t,{layer:h,filter:p,zoomScale:f}=o,g=u&&u.scale,v=rye(o,u),b=e&&e.signal;return oye(h).then(()=>{const _=h.popupTemplate;return _?_.getRequiredFields(h.fieldsIndex):null}).then(_=>{var j,K,ie;const{objectIdField:w,returnZ:S}=h,C=hye(o);if(!k7(h,C))throw V_.error("invalid-field: displayField is invalid."),new N("getResults():invalid-field","displayField is invalid.");const $=_&&_.length?_:[C],M=o.outFields||$,P=sye(M);if(M.includes(w)||P||M.push(w),(j=h.floorInfo)!=null&&j.floorField&&M.push(h.floorInfo.floorField),!(P||kO(h,M)))throw V_.error("invalid-field: outField is invalid."),new N("getResults():invalid-field","outField is invalid.");const k=h.createQuery(),{orderByFields:D}=o;if(D&&(k.orderByFields=D),s){k.outSpatialReference=s;const te=1/jh(s);te&&(k.maxAllowableOffset=te)}const z=h.geometryType==="mesh"||h.geometryType==="multipatch",B=((ie=(K=h.capabilities)==null?void 0:K.data)==null?void 0:ie.supportsZ)&&!z;if(k.returnZ=B&&S!==!1,k.returnGeometry=!0,k.multipatchOption=z?"xyFootprint":null,M&&(k.outFields=M),n)k.geometry=n;else if(l.key)k.objectIds=[l.key];else{const te=o.searchFields||[C];if(!kO(h,te))throw V_.error("invalid-field: search field is invalid."),new N("getResults():invalid-field","search field is invalid.");if(dye(h)&&(k.num=r),v&&(k.geometry=v),!l.text.trim())return[];const me=l.text,{prefix:Ie="",suffix:Me=""}=o,oe=pye(`${Ie}${me}${Me}`);uye(h)&&lye(h,te)&&!i&&me&&(k.fullText=cye({text:me,searchFields:te}));const ge=fye({searchTerm:oe,layer:h,searchFields:te,filter:p,exactMatch:i,query:k,type:"search"});if(k.where=ge,!aye(k))return[]}return h.queryFeatures(k,{signal:b}).then(te=>yKe(te,u,o,a,C,g,f))})}function oKe(t,e){const{source:i,spatialReference:n,view:r,suggestTerm:s,maxSuggestions:o,sourceIndex:a,exactMatch:l}=t,{layer:u,filter:h}=i,p=e&&e.signal,f=rye(i,r);return oye(u).then(()=>{if(!dye(u))return[];const g=hye(i),v=i.searchFields||[g],b=[];i.suggestionTemplate?i.suggestionTemplate.replace(rKe,(B,j)=>(b.push(j),B)):b.push(g);const _=sye(b);b.includes(u.objectIdField)||_||b.push(u.objectIdField);const w=k7(u,g),S=_||kO(u,b),C=kO(u,v);if(!w)throw V_.error("invalid-field: displayField is invalid."),new N("getSuggestions():invalid-field","displayField is invalid.");if(!S)throw V_.error("invalid-field: outField is invalid."),new N("getSuggestions():invalid-field","outField is invalid.");if(!C)throw V_.error("invalid-field: search field is invalid."),new N("getSuggestions():invalid-field","search field is invalid.");const $=u.createQuery(),{orderByFields:M}=i;if(M&&($.orderByFields=M),$.outSpatialReference=n,$.returnGeometry=!1,$.num=o,$.outFields=b,f&&($.geometry=f),!s.trim())return[];const{prefix:P="",suffix:k=""}=i,D=pye(`${P}${s}${k}`);uye(u)&&lye(u,v)&&!l&&s&&($.fullText=cye({text:s,searchFields:v}));const z=fye({searchTerm:D,layer:u,searchFields:v,filter:h,exactMatch:l,query:$,type:"suggest"});return $.where=z,aye($)?u.queryFeatures($,{signal:p}).then(B=>mKe(B,i,a,g)):[]})}function rye(t,e){const{filter:i,withinViewEnabled:n}=t,r=e&&e.extent;return i&&i.geometry||(n&&r?r:void 0)}function sye(t){return t&&t.includes("*")}async function oye(t){t&&await t.load()}function aye(t){return!(!t.fullText&&!t.where)}function lye(t,e){const i=t==null?void 0:t.indexes;return!i||!(e!=null&&e.length)?!1:i.filter(n=>n.indexType==="FullText").some(n=>{var s;const r=((s=n.fields)==null?void 0:s.split(",").map(o=>o.trim().toLowerCase()))||[];return e.every(o=>r.includes(o.toLowerCase()))})}function cye({text:t,searchFields:e}){return t.trim().split(" ").filter(i=>!!i.trim()).map(i=>new jde({onFields:e,searchTerm:i,searchType:"prefix"}))}function uye(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsFullTextSearch)??!1}function dye(t){var e,i;return((i=(e=t==null?void 0:t.capabilities)==null?void 0:e.query)==null?void 0:i.supportsPagination)??!1}function aKe(t){var e,i,n;return((n=(i=(e=t==null?void 0:t.fieldsIndex)==null?void 0:e.fields)==null?void 0:i.find(r=>r.type==="string"))==null?void 0:n.name)??""}function hye(t){return t.displayField||t.layer.displayField||aKe(t.layer)}function kO(t,e){return!(!t||!(e!=null&&e.length))&&e.every(i=>k7(t,i))}function k7(t,e){return!!t.getField(e)}function lKe(t){for(let e=0;e<t.length;e++)if(t.charCodeAt(e)>255)return!0;return!1}function cKe(t,e,i){let n=null;const{codedValues:r}=t;return r&&r.some(s=>{const o=s.name,a=i?o:o.toLowerCase();return(i?e:e.toLowerCase())===a&&(n=s.code.toString(),!0)}),n}function pye(t){return t.replace(/\'/g,"''")}function vx(t,e){const i=e&&e.where;return i?`(${t}) AND (${i})`:t}function uKe({currentTerm:t,field:e,filter:i,exactMatch:n,url:r,type:s}){const o=e.type,a=e.name;if(o==="string"||o==="date"||o==="global-id"){const l=nKe.test(r),u=l&&lKe(t)?"N":"";return vx(n&&s==="search"?`${a} = ${u}'${t}'`:l?`${a} LIKE ${u}${`'${t}%'`}`:`${`LOWER(${a})`} LIKE ${u}${`'${t.toLowerCase()}%'`}`,i)}if(o==="oid"||o==="small-integer"||o==="integer"||o==="single"||o==="double"){const l=Number(t);return isNaN(l)?null:vx(`${a} = ${l}`,i)}return vx(`${a} = ${t}`,i)}function dKe(t,e){return t?` OR (${e})`:`(${e})`}function fye({searchTerm:t,layer:e,searchFields:i,filter:n,exactMatch:r,query:s,type:o}){const{definitionExpression:a,url:l}=e;let u="";return!s.fullText&&t&&i&&i.forEach(h=>{const p=e.getField(h),f=typeof e.getFieldDomain=="function"&&e.getFieldDomain(h),g=(f&&f.type==="coded-value"?cKe(f,t,r):null)||t||null;if(g!==null){const v=uKe({currentTerm:g,field:p,filter:n,exactMatch:r,url:l,type:o});v&&(u+=dKe(u,v))}}),a&&u?`(${a}) AND (${u})`:a||u}function hKe(t,e){let i=null;const{codedValues:n}=t;return n&&n.length&&n.some(r=>r.code===e&&(i=r.name,!0)),i}function pKe(t,e){return t[Object.keys(t).find(i=>i.toLowerCase()===e.toLowerCase())]}function mye(t,e,i){const n=t.sourceLayer,{attributes:r}=t,s=typeof n.getFieldDomain=="function"&&n.getFieldDomain(i);if(e)return Vr(e,r);if(i&&r){const o=n.getField(i),a=pKe(r,i);return a==null?"":s&&s.type==="coded-value"?hKe(s,a):(o==null?void 0:o.type)==="date"?Ai(new Date(a)):typeof a=="number"?a.toString():typeof a!="string"?"":a.trim()}return""}function fKe(t,e,i,n){const r=t.sourceLayer,{attributes:s}=t,{objectIdField:o}=r,a=s[o];return{text:mye(t,e.suggestionTemplate,n),key:a,sourceIndex:i}}function mKe(t,e,i,n){return t.features.map(r=>fKe(r,e,i,n))}function gKe(t,e,i,n,r,s,o){const a=t.clone(),l=t.sourceLayer,u=l&&l.objectIdField,h=u&&t.attributes[u],p=mye(t,i.searchTemplate,r),f=T7(a.geometry,e,s),g=typeof o=="number"?I6(G(f),e,o):f,v=t.clone();return A(g)&&(v.geometry=Ws.fromExtent(g)),{extent:g,target:v,feature:a,key:h,name:p,sourceIndex:n}}function yKe(t,e,i,n,r,s,o){return t.features.map(a=>gKe(a,e,i,n,r,s,o))}var T6;let sc=T6=class extends I7{constructor(t){super(t),this.displayField=null,this.exactMatch=null,this.orderByFields=null,this.searchFields=null,this.searchTemplate=null,this.suggestionTemplate=null,this.getResults=(e,i)=>sKe({source:this,...e},i),this.getSuggestions=(e,i)=>oKe({source:this,...e},i)}set layer(t){this._set("layer",t),t&&t.load().catch(()=>{})}get name(){return this._getLayerTitle()??""}set name(t){this._overrideIfSome("name",t)}clone(){return new T6({autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?G(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,displayField:this.displayField,exactMatch:this.exactMatch,layer:this.layer,searchFields:this.searchFields?G(this.searchFields):null,suggestionTemplate:this.suggestionTemplate,zoomScale:this.zoomScale})}_getFirstStringField(){var t;return((t=this.layer.fieldsIndex.fields.find(e=>e.type==="string"))==null?void 0:t.name)??""}_getDisplayField(){return this.displayField||this.layer.displayField||this._getFirstStringField()}_getSearchFieldsString(){const{layer:t,searchFields:e}=this;return t.loaded?`: ${(e||[this._getDisplayField()]).map(i=>{const n=t.getField(i);return n&&n.alias||i}).join(", ")}`:""}_getLayerTitle(){const{layer:t}=this;if(!t)return;const{title:e}=t;return e?`${e}${this._getSearchFieldsString()}`:void 0}};c([d({json:{read:{source:"field.name"},write:{target:"field.name"}}})],sc.prototype,"displayField",void 0),c([d({json:{read:{source:"field.exactMatch"},write:{target:"field.exactMatch"}}})],sc.prototype,"exactMatch",void 0),c([d({value:null})],sc.prototype,"layer",null),c([d()],sc.prototype,"name",null),c([d({type:[String],json:{write:!0}})],sc.prototype,"orderByFields",void 0),c([d()],sc.prototype,"searchFields",void 0),c([d()],sc.prototype,"searchTemplate",void 0),c([d()],sc.prototype,"suggestionTemplate",void 0),sc=T6=c([O("esri.widgets.Search.LayerSearchSource")],sc);const xy=sc;function vKe(t){return!!t&&typeof t.x=="number"&&typeof t.y=="number"}function bKe(t){return t&&typeof t.xmin=="number"&&typeof t.ymin=="number"&&typeof t.xmax=="number"&&typeof t.ymax=="number"}let Yp=class extends Y{constructor(e){super(e),this.address=null,this.attributes=null,this.extent=null,this.location=null,this.score=null}};c([d({type:String,json:{write:!0}})],Yp.prototype,"address",void 0),c([d({type:Object,json:{write:!0}})],Yp.prototype,"attributes",void 0),c([d({type:Dt,json:{write:!0}})],Yp.prototype,"extent",void 0),c([d({type:Ve,json:{write:!0}})],Yp.prototype,"location",void 0),c([d({type:Number,json:{write:!0}})],Yp.prototype,"score",void 0),Yp=c([O("esri.rest.support.AddressCandidate")],Yp);const gye=Yp,$7={type:String,json:{read:{source:"token"},write:{target:"token"}}};let Fr=class extends Y{constructor(e){super(e),this.address=null,this.apiKey=null,this.categories=null,this.countryCode=null,this.forStorage=null,this.location=null,this.locationType=null,this.magicKey=null,this.maxLocations=null,this.outFields=null,this.outSpatialReference=null,this.searchExtent=null}};c([d({type:Object,json:{write:!0}})],Fr.prototype,"address",void 0),c([d($7)],Fr.prototype,"apiKey",void 0),c([d({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],Fr.prototype,"categories",void 0),c([d({type:String,json:{write:!0}})],Fr.prototype,"countryCode",void 0),c([d({type:Boolean,json:{write:!0}})],Fr.prototype,"forStorage",void 0),c([d({type:Ve,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],Fr.prototype,"location",void 0),c([d({type:String,json:{write:!0}})],Fr.prototype,"locationType",void 0),c([d({type:String,json:{write:!0}})],Fr.prototype,"magicKey",void 0),c([d({type:Number,json:{write:!0}})],Fr.prototype,"maxLocations",void 0),c([d({type:[String],json:{write:{writer:(t,e)=>{e.outFields=t?t.join(","):null}}}})],Fr.prototype,"outFields",void 0),c([d({type:Ge,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Fr.prototype,"outSpatialReference",void 0),c([d({type:Dt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=i}}}})],Fr.prototype,"searchExtent",void 0),Fr=c([O("esri.rest.support.AddressToLocationsParameters")],Fr),Fr.from=Ht(Fr);const yye=Fr;async function _Ke(t,e,i){e=yye.from(e);const n=r1(t),{address:r,...s}=e.toJSON(),o={...r,...s,f:"json"},a=bR({...n.query,...o}),l=vR(a,i),u=`${n.path}/findAddressCandidates`;return rt(u,l).then(wKe)}function wKe({data:t}){if(!t)return[];const{candidates:e,spatialReference:i}=t;return e?e.map(n=>{if(!n)return;const{extent:r,location:s}=n,o=!r||bKe(r);return vKe(s)&&o?(r&&(r.spatialReference=i),s&&(s.spatialReference=i),gye.fromJSON(n)):void 0}):[]}let Ud=class extends Y{constructor(e){super(e),this.apiKey=null,this.location=null,this.locationType=null,this.outSpatialReference=null}};c([d($7)],Ud.prototype,"apiKey",void 0),c([d({type:Ve,json:{write:{writer:(t,e)=>{const i=t?t.clone().normalize():null,n=i!==void 0;e.location=n?i:null}}}})],Ud.prototype,"location",void 0),c([d({type:String,json:{write:!0}})],Ud.prototype,"locationType",void 0),c([d({type:Ge,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ud.prototype,"outSpatialReference",void 0),Ud=c([O("esri.rest.support.LocationToAddressParameters")],Ud),Ud.from=Ht(Ud);const vye=Ud;async function xKe(t,e,i){e=vye.from(e);const n=r1(t),r={...e.toJSON(),f:"json"},s=bR({...n.query,...r}),o=vR(s,i),a=`${n.path}/reverseGeocode`;return rt(a,o).then(SKe)}function SKe({data:t}){if(!t)return;const{address:e,location:i}=t,n=e&&e.Match_addr||"";return gye.fromJSON({address:n,attributes:e||{},location:i,score:100})}let $b=class extends Y{constructor(e){super(e),this.isCollection=null,this.magicKey=null,this.text=null}};c([d({type:Boolean,json:{write:!0}})],$b.prototype,"isCollection",void 0),c([d({type:String,json:{write:!0}})],$b.prototype,"magicKey",void 0),c([d({type:String,json:{write:!0}})],$b.prototype,"text",void 0),$b=c([O("esri.rest.support.SuggestionCandidate")],$b);const EKe=$b;let oa=class extends Y{constructor(e){super(e),this.apiKey=null,this.categories=null,this.countryCode=null,this.location=null,this.maxSuggestions=null,this.outSpatialReference=null,this.searchExtent=null,this.text=null}};c([d($7)],oa.prototype,"apiKey",void 0),c([d({type:[String],json:{read:{source:"category",reader:t=>t?t.split(","):null},write:{target:"category",writer:(t,e)=>{e.category=t?t.join(","):null}}}})],oa.prototype,"categories",void 0),c([d({type:String,json:{write:!0}})],oa.prototype,"countryCode",void 0),c([d({type:Ve,json:{write:{writer:(t,e)=>{e.location=t?t.clone().normalize():null}}}})],oa.prototype,"location",void 0),c([d({type:Number,json:{write:!0}})],oa.prototype,"maxSuggestions",void 0),c([d({type:Ge,json:{read:{source:"outSR"},write:{target:"outSR"}}})],oa.prototype,"outSpatialReference",void 0),c([d({type:Dt,json:{write:{writer:(t,e)=>{const i=t?t.shiftCentralMeridian():null;e.searchExtent=JSON.stringify(i)}}}})],oa.prototype,"searchExtent",void 0),c([d({type:String,json:{write:!0}})],oa.prototype,"text",void 0),oa=c([O("esri.rest.support.SuggestLocationsParameters")],oa),oa.from=Ht(oa);const bye=oa;async function CKe(t,e,i){const n=r1(t),r={...(e=bye.from(e)).toJSON(),f:"json"},s=bR({...n.query,...r}),o=vR(s,i),a=`${n.path}/suggest`;return rt(a,o).then(IKe)}function IKe(t){const{data:e}=t;if(!e)return[];const{suggestions:i}=e;return i?i.map(n=>new EKe(n)):[]}const TKe="Single Line Input",kKe=3e5;function $Ke(t,e){return t.location?RKe(t,e):LKe(t,e)}function _ye(t,e){if(e.localSearchDisabled)return null;const i=t==null?void 0:t.scale;return typeof i=="number"&&i<=kKe?t.get("extent.center"):null}function AKe(t,e){const{source:i,spatialReference:n,view:r,suggestTerm:s,maxSuggestions:o,sourceIndex:a}=t,l=new bye,{apiKey:u,url:h}=i,p=wye(i,r),f=e&&e.signal;if(!h)return Promise.resolve(null);u&&(l.apiKey=u),i.categories&&(l.categories=i.categories),n&&(l.outSpatialReference=n);const g=_ye(r,i);if(g&&(l.location=g),!s.trim())return Promise.resolve(null);const{prefix:v="",suffix:b=""}=i,_=`${v}${s}${b}`;return l.text=_,p&&(l.searchExtent=p),l.maxSuggestions=o,i.countryCode&&(l.countryCode=i.countryCode),CKe(h,l,{signal:f}).then(w=>FKe(w,a))}function MKe(t){return!!t&&/(?:geocode\-api\.arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}function OKe(t){return!!t&&/(?:\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/i.test(t)}function dQ(t){return!!t&&/(?:arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/i.test(t)}const PKe="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer";function RKe(t,e){const{source:i,spatialReference:n,location:r,sourceIndex:s,view:o}=t,{apiKey:a,url:l,zoomScale:u,defaultZoomScale:h}=i,p=o&&o.scale,f=e&&e.signal,g=new vye;return g.location=r,a&&(g.apiKey=a),n&&(g.outSpatialReference=n),xKe(l,g,{signal:f}).then(v=>xye([v],{sourceIndex:s,scale:p,view:o,zoomScale:u,defaultZoomScale:h})).catch(()=>[])}function wye(t,e){const{filter:i,withinViewEnabled:n}=t,r=e&&e.scale,s=e&&e.extent,o=i&&i.geometry;return T7(o,e,r)||(n&&s?s:void 0)}function LKe(t,e){const{source:i,suggestResult:n,spatialReference:r,view:s,maxResults:o,sourceIndex:a}=t,l=i&&i.zoomScale,u=i&&i.defaultZoomScale;if(!n.text.trim())return Promise.resolve(null);const h=!n.key&&i.prefix?i.prefix:"",p=!n.key&&i.suffix?i.suffix:"",f=`${h}${n.text}${p}`,g=new yye,{apiKey:v,url:b}=i,_=s&&s.scale,w=wye(i,s),S=e&&e.signal;if(v&&(g.apiKey=v),!b)return Promise.resolve(null);i.categories&&(g.categories=i.categories),i.locationType&&(g.locationType=i.locationType),r&&(g.outSpatialReference=r);const C=_ye(s,i);C&&(g.location=C),g.maxLocations=o,w&&(g.searchExtent=w),i.countryCode&&(g.countryCode=i.countryCode);const{key:$}=n,M=`${$}`;return $&&(g.magicKey=M),g.address={},g.address[i.singleLineFieldName||TKe]=f,i.outFields&&(g.outFields=i.outFields),_Ke(b,g,{signal:S}).then(P=>xye(P,{key:M,scale:_,sourceIndex:a,view:s,zoomScale:l,defaultZoomScale:u}))}function DKe(t,e){return{text:t.text,key:t.magicKey,sourceIndex:e}}function FKe(t,e){return t.map(i=>DKe(i,e))}function NKe(t,e){const{key:i,scale:n,sourceIndex:r,view:s,zoomScale:o,defaultZoomScale:a}=e,{attributes:l,extent:u,location:h,address:p}=t,f=new en({geometry:h,attributes:l}),g=u||h,v=T7(g,s,n),b=typeof o=="number"?I6(v,s,o):typeof a=="number"&&g.type==="point"?I6(v,s,a):v,_=h?`${h.x},${h.y}`:"",w=p||_,S=f.clone();return A(b)&&(S.geometry=Ws.fromExtent(b)),{extent:b,feature:f,target:S,key:i,name:w,sourceIndex:r}}function xye(t,e){return t.filter(Boolean).map(i=>NKe(i,e))}var k6;const zKe="esri.widgets.Search.LocatorSearchSource";let ms=k6=class extends I7{constructor(t){super(t),this.apiKey=null,this.categories=null,this.countryCode=null,this.defaultZoomScale=null,this.localSearchDisabled=!1,this.locationType=null,this.name="",this.placeholder="",this.searchTemplate="",this.singleLineFieldName=null,this.suggestionsEnabled=null,this.url=null,this.zoomScale=null,this.getResults=(e,i)=>$Ke({source:this,...e},i),this.getSuggestions=(e,i)=>AKe({source:this,...e},i)}clone(){return new k6({apiKey:this.apiKey,autoNavigate:this.autoNavigate,filter:this.filter,maxResults:this.maxResults,maxSuggestions:this.maxSuggestions,minSuggestCharacters:this.minSuggestCharacters,outFields:this.outFields?G(this.outFields):null,placeholder:this.placeholder,popupEnabled:this.popupEnabled,prefix:this.prefix,resultGraphicEnabled:this.resultGraphicEnabled,resultSymbol:this.resultSymbol?this.resultSymbol.clone():null,suggestionsEnabled:this.suggestionsEnabled,suffix:this.suffix,withinViewEnabled:this.withinViewEnabled,categories:this.categories?G(this.categories):null,countryCode:this.countryCode,locationType:this.locationType,searchTemplate:this.searchTemplate,singleLineFieldName:this.singleLineFieldName,zoomScale:this.zoomScale})}};c([d()],ms.prototype,"apiKey",void 0),c([d()],ms.prototype,"categories",void 0),c([d()],ms.prototype,"countryCode",void 0),c([d({json:{write:!0}})],ms.prototype,"defaultZoomScale",void 0),c([d()],ms.prototype,"localSearchDisabled",void 0),c([d()],ms.prototype,"locationType",void 0),c([d({json:{write:!0}})],ms.prototype,"name",void 0),c([d({json:{write:!0}})],ms.prototype,"placeholder",void 0),c([d()],ms.prototype,"searchTemplate",void 0),c([d({json:{write:!0}})],ms.prototype,"singleLineFieldName",void 0),c([d({json:{read:{source:"suggest"},write:{target:"suggest"}}})],ms.prototype,"suggestionsEnabled",void 0),c([d({json:{write:!0}})],ms.prototype,"url",void 0),c([d({json:{write:!0}})],ms.prototype,"zoomScale",void 0),ms=k6=c([O(zKe)],ms);const Sye=ms;function ss(t,e){return t.hasOwnProperty(e)&&t[e]!=null&&t[e]!==""}const jKe=()=>A_("esri/widgets/Search/t9n/Search"),Eye="esri.widgets.Search.SearchViewModel",fd=se.getLogger(Eye),hQ="highlight",CA=we.ofType({key:t=>t.layer?"layer":"locator",base:I7,typeMap:{layer:xy,locator:Sye}}),pQ=Ge.WGS84,VKe="esri/images/search/search-symbol-32.png",UKe=/<(?:.|\s)*?>/g,Ab=-1;let it=class extends o2($r.EventedMixin(_e)){constructor(e){super(e),this._handles=new wn,this._gotoController=null,this._searching=null,this._createdFeatureLayers=[],this.autoNavigate=!0,this.autoSelect=!0,this.defaultPopupTemplate=null,this.defaultSources=new CA,this.defaultSymbols={point:new e1({url:pt(VKe),size:24,width:24,height:24}),polyline:new Is({color:[130,130,130,1],width:2}),polygon:new Lc({color:[235,235,235,.4],outline:{color:[130,130,130,1],width:2}})},this.includeDefaultSources=!0,this.maxInputLength=128,this.maxResults=6,this.maxSuggestions=6,this.messages=null,this.minSuggestCharacters=3,this.popupEnabled=!0,this.popupTemplate=null,this.portal=zi.getDefault(),this.resultCount=null,this.resultGraphicEnabled=!0,this.resultGraphic=null,this.results=null,this.selectedSuggestion=null,this.searchAllEnabled=!0,this.selectedResult=null,this.sources=new CA,this.suggestionDelay=350,this.suggestionCount=null,this.suggestions=null,this.suggestionsEnabled=!0,this.view=null}initialize(){const e=async()=>{const i=await jKe();this.messages=i,this.defaultPopupTemplate=new Cm({title:i.searchResult,content:"{Match_addr}"})};e(),this._handles.add([X(()=>[this.includeDefaultSources,this.view,this.portal],()=>this._update(),ut),zP(e)])}destroy(){this._destroyFeatureLayers(),this._abortGoTo(),this.clearGraphics(),this._handles.destroy(),this._handles=null}get activeSource(){return this.allSources.at(this.activeSourceIndex)??null}get activeSourceIndex(){return this.allSources.length===1||!this.searchAllEnabled?0:Ab}set activeSourceIndex(e){this._overrideIfSome("activeSourceIndex",e)}get allPlaceholder(){var e;return(e=this.messages)==null?void 0:e.allPlaceholder}set allPlaceholder(e){this._overrideIfSome("allPlaceholder",e)}get allSources(){const{sources:e,defaultSources:i,includeDefaultSources:n}=this,r=typeof n=="function"?n.call(null,{sources:e,defaultSources:i}):n?i.concat(e):e,s=this._get("allSources")||new CA;return s.removeAll(),s.addMany(r.filter(Boolean)),s}get locationEnabled(){return this._get("locationEnabled")||w6()}set locationEnabled(e){if(e===void 0)return void this._clearOverride("locationEnabled");const i=w6();if(e&&!i){const n=new N("locationEnabled:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});fd.error(n)}this._override("locationEnabled",!!e&&i)}get placeholder(){const{allSources:e,activeSourceIndex:i,allPlaceholder:n}=this;if(i===Ab)return n;const r=e.at(i);return r?r.placeholder:""}set searchTerm(e){this._set("searchTerm",e||""),this.clearGraphics(),this.selectedSuggestion&&this.selectedSuggestion.text!==e&&this._set("selectedSuggestion",null),e===""&&this._clear()}get searchTerm(){return this._get("searchTerm")||""}get state(){return this._searching?"searching":this.updating?"loading":this.allSources.length===0?"disabled":"ready"}get updating(){return this._updatingPromise!=null}clear(){this.searchTerm=""}clearGraphics(){this._removeHighlight(),this._closePopup(),this.view&&this.view.graphics.remove(this.resultGraphic),this._set("resultGraphic",null)}search(e,i){this.emit("search-start"),this.clearGraphics();const n=this._createSuggestionForSearch(e),r=this.when().then(()=>this._getResultsFromSources(n,i).then(s=>{var u;if((u=i==null?void 0:i.signal)!=null&&u.aborted)return null;const o={activeSourceIndex:this.activeSourceIndex,searchTerm:n.text,numResults:0,numErrors:0,errors:[],results:[]};this._formatResponse(o,s,n);const a=this._getFirstResult(o.results),l=(n.location&&a?a.name:n.text).replace(UKe,"");return this._set("searchTerm",l),(n.key&&typeof n.sourceIndex=="number"||n.location)&&this._set("selectedSuggestion",n),this._set("results",o.results),this._set("resultCount",o.results.reduce((h,p)=>h+p.results.length,0)),this.emit("search-complete",o),this._selectFirstResult(a).then(()=>o)})).then(s=>(this._clearSearching(),s),s=>{throw this._clearSearching(),s});return this._searching=r,r}searchNearby(e){if(!this.locationEnabled){const n=new N("searchNearby:geolocation-unsupported","Geolocation API is unsupported.",{geolocation:navigator.geolocation});return fd.error(n),Promise.reject(n)}const i=ZYe().then(n=>Bge({position:n,view:this.view},e)).then(n=>this.search(n,e));return this._searching=i,i.catch(()=>{}).then(()=>this._clearSearching()),i}select(e){if(this.clearGraphics(),!e){const S=new N("select:missing-parameter","Cannot select without a searchResult.",{searchResult:e});return fd.error(S),Promise.reject(S)}const{view:i}=this,n=ss(e,"sourceIndex")?e.sourceIndex:this._getSourceIndexOfResult(e),r=this.allSources.at(n);if(!r){const S=new N("select:missing-source","Cannot select without a source.",{source:r});return fd.error(S),Promise.reject(S)}const s=r instanceof xy?this._getLayerSourcePopupTemplate(r):r.popupTemplate,o=r.resultSymbol||this._getDefaultSymbol(e),a=ss(r,"resultGraphicEnabled")?r.resultGraphicEnabled:this.resultGraphicEnabled,l=ss(r,"autoNavigate")?r.autoNavigate:this.autoNavigate,u=ss(r,"popupEnabled")?r.popupEnabled:this.popupEnabled,h=u?s||this.popupTemplate||this.defaultPopupTemplate:null,{feature:p}=e;if(!p){const S=new N("select:missing-feature","Cannot select without a feature.",{feature:p});return fd.error(S),Promise.reject(S)}const{attributes:f,geometry:g,layer:v,sourceLayer:b}=p,_=uQ(g),w={layerViewQuery:this._getLayerView(p),elevationQuery:i&&A(_)?iKe(_,i).catch(()=>_):Promise.resolve(_)};return Zi(w).then(S=>{const C=S.layerViewQuery.value,$=S.elevationQuery.value;o instanceof N0&&(o.text=e.name);const M=i&&l?e.target||e.extent:null;return(A(M)?this._goToSearchResult(M):Promise.resolve()).then(()=>{var z;const P=C?p:new en({geometry:g,symbol:o,attributes:f,layer:v,sourceLayer:b,popupTemplate:h}),k=u&&((z=this.view)==null?void 0:z.popup),D=k&&P.getEffectivePopupTemplate(k.defaultPopupTemplateEnabled);return D&&i.popup.open({features:[P],location:$}),C&&gO(C)&&!D&&this._highlightFeature({graphic:P,layerView:C}),!C&&a&&i&&i.graphics.push(P),this._setResultFloor(e),this._set("selectedResult",e),this._set("resultGraphic",P),this.emit("select-result",{result:e,source:r,sourceIndex:n}),e})})}suggest(e,i,n){const r=e||this.searchTerm;return this.emit("suggest-start",{searchTerm:r}),this._suggestTimer(i,n).then(()=>this._suggestImmediate(r,n).then(s=>(this._set("suggestions",s.results),this._set("suggestionCount",s.results.reduce((o,a)=>o+a.results.length,0)),this.emit("suggest-complete",s),s)))}async when(){await jo(()=>!this.updating)}async _update(){const{portal:e,view:i}=this;if(this.includeDefaultSources){const n=this._updatingPromise=Zi([e==null?void 0:e.load(),i==null?void 0:i.when()]);if(this.destroyed||(await n,n!==this._updatingPromise))return}await jo(()=>this.messages),this.destroyed||this._updateDefaultSources(),this._updatingPromise=null}_clearSearching(){this._searching=null}_convertHelperServices(){var i,n;const e=(n=(i=this.portal)==null?void 0:i.helperServices)==null?void 0:n.geocode;return e?e.map(r=>{if(r.placefinding===!1)return;const s=lt.apiKey&&dQ(r.url)?{url:PKe}:null,o=Sye.fromJSON({...r,...s}),a=o.url;if(dQ(a)||OKe(a)||MKe(a)){const l=o.outFields||["Addr_type","Match_addr","StAddr","City"],u=o.placeholder||this.messages.placeholder,h=typeof o.defaultZoomScale=="number"?o.defaultZoomScale:2500;o.set({singleLineFieldName:"SingleLine",outFields:l,placeholder:u,defaultZoomScale:h})}return o.singleLineFieldName?o:void 0}).filter(Boolean):[]}_destroyFeatureLayers(){this._createdFeatureLayers.forEach(e=>e==null?void 0:e.destroy()),this._createdFeatureLayers=[]}_getLayerSources(e,i){var r;const n=(r=this.view)==null?void 0:r.map;return e.map(s=>{const o=n.findLayerById(s.id);if(!o)return;const a=this._getLayerJSON(s),l=xy.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then(u=>{l.layer=u}),l}).filter(Boolean).toArray()}_getTableSources(e,i){var r;const n=(r=this.view)==null?void 0:r.map;return e.map(s=>{const o=n.findTableById(s.id);if(!o)return;const a=this._getLayerJSON(s),l=xy.fromJSON(a);return l.placeholder=i,this._getLayer(o,a).then(u=>{l.layer=u}),l}).filter(Boolean).toArray()}_convertApplicationProperties(){var a,l,u;const e=(a=this.view)==null?void 0:a.map,i=(u=(l=e==null?void 0:e.applicationProperties)==null?void 0:l.viewing)==null?void 0:u.search;if(!i)return[];const{enabled:n,hintText:r,layers:s,tables:o}=i;return n?[...this._getLayerSources(s,r),...this._getTableSources(o,r)]:[]}async _getSubLayer(e,i){if(await e.load(),!e.allSublayers)throw new Error;const n=e.allSublayers.find(s=>s.id===i.subLayer);if(!n)throw new Error;const r=await n.createFeatureLayer();return this._createdFeatureLayers.push(r),r}async _getBuildingSubLayer(e,i){await e.load();const n=e.allSublayers.find(r=>r.id===i.subLayer);if((n==null?void 0:n.type)!=="building-component")throw new Error;if(await n.load(),n.associatedLayer==null)throw new Error;return await n.associatedLayer.load(),n}_getLayer(e,i){return e.type==="feature"||e.type==="scene"||e.type==="csv"||e.type==="geojson"||e.type==="ogc-feature"?Promise.resolve(e):e.type==="map-image"?this._getSubLayer(e,i).catch(()=>{const n=new N("search:create-featurelayer","Could not create a FeatureLayer from the MapImageLayer",{layer:e});return fd.error(n),null}):e.type==="building-scene"?this._getBuildingSubLayer(e,i):Promise.resolve(null)}_getLayerJSON(e){return typeof e.toJSON=="function"?e.toJSON():e}_updateDefaultSources(){const{defaultSources:e,includeDefaultSources:i}=this;this._destroyFeatureLayers(),e.removeAll(),i&&e.addMany([...this._convertApplicationProperties(),...this._convertHelperServices()])}_abortGoTo(){this._gotoController&&this._gotoController.abort(),this._gotoController=null}_clear(){this._abortGoTo(),this._set("resultCount",null),this._set("results",null),this._set("suggestions",null),this._set("suggestionCount",null),this._set("selectedResult",null),this._set("selectedSuggestion",null),this.emit("search-clear")}_closePopup(){var r;const e=(r=this.view)==null?void 0:r.popup,{resultGraphic:i}=this;if(!e||!i)return;const{selectedFeature:n}=e;n&&n===i&&e.close()}_suggestTimer(e,i){const n=e??this.suggestionDelay;return $I(n,null,i&&i.signal)}_createLocationForSearch(e){return e instanceof en?uQ(e.geometry):e instanceof Ve?e:Array.isArray(e)&&e.length===2?new Ve({longitude:e[0],latitude:e[1]}):null}_createSuggestionForSearch(e){if(e&&ss(e,"key")&&ss(e,"text")&&ss(e,"sourceIndex"))return e;const i=this._createLocationForSearch(e),n=typeof e=="string"?e:this.searchTerm,{selectedSuggestion:r,selectedResult:s}=this,o=!e&&r&&s,a=o&&r.key===s.key&&r.sourceIndex===s.sourceIndex,l=o&&r.location;return a||l?r:{location:i,text:i?"":n,sourceIndex:null,key:null}}_getFirstResult(e){let i=null;return e&&e.some(n=>{const{results:r}=n,s=r[0],o=!!s;return o&&(i=s),o}),i}_selectFirstResult(e){return this.autoSelect&&e?this.select(e):Promise.resolve(null)}_suggestImmediate(e,i){return this.when().then(()=>this._getSuggestionsFromSources(e,i)).then(n=>{var s;if((s=i==null?void 0:i.signal)!=null&&s.aborted)return null;const r={activeSourceIndex:this.activeSourceIndex,searchTerm:e,numResults:0,numErrors:0,errors:[],results:[]};return this._formatResponse(r,n),r})}_formatSourceResponse(e,i,n){const r=i&&i.value||[],s=i&&i.error,o=this.allSources.at(n);if(s){const a={sourceIndex:n,source:o,error:s};e.errors.push(a),fd.error(s),e.numErrors++}else{const a={sourceIndex:n,source:o,results:r};e.results.push(a),e.numResults+=r.length}}_formatResponse(e,i,n){if(i)if(e.activeSourceIndex===Ab){const r=n&&ss(n,"sourceIndex")&&n.sourceIndex!==-1?n.sourceIndex:void 0;i.forEach((s,o)=>{const a=r!==void 0?r:o;this._formatSourceResponse(e,s,a)})}else this._formatSourceResponse(e,i[0],e.activeSourceIndex)}_getResultsFromSources(e,i){const{allSources:n}=this,r=!e.location&&ss(e,"sourceIndex")?e.sourceIndex:this.activeSourceIndex,s=[];if(!n.length){const o=new N("search:no-sources-defined","At least one source is required.",{allSources:n});return fd.error(o),Promise.reject(o)}return r===Ab?n.forEach((o,a)=>{s.push(this._getResultsFromSource(e,a,i))}):s.push(this._getResultsFromSource(e,r,i)),Zi(s)}_getSuggestionsFromSources(e,i){const{allSources:n,activeSourceIndex:r}=this,s=[];if(!n.length){const o=new N("suggest:no-sources-defined","At least one source is required.",{allSources:n});return fd.error(o),Promise.reject(o)}return r===Ab?n.forEach((o,a)=>{s.push(this._getSuggestionsFromSource(e,a,i))}):s.push(this._getSuggestionsFromSource(e,r,i)),Zi(s)}_getResultsFromSource(e,i,n){var h;const r=this.allSources.at(i),{location:s=null}=e,o=((h=this.view)==null?void 0:h.spatialReference)||pQ,a=ss(r,"maxResults")?r.maxResults:this.maxResults,l=!!(r instanceof xy&&ss(r,"exactMatch"))&&r.exactMatch,{view:u}=this;return r.getResults({view:u,sourceIndex:i,location:s,suggestResult:e,spatialReference:o,exactMatch:l,maxResults:a},n)}_getSuggestionsFromSource(e,i,n){var l;const r=this.allSources.at(i),s=ss(r,"suggestionsEnabled")?r.suggestionsEnabled:this.suggestionsEnabled,o=e.length,a=ss(r,"minSuggestCharacters")?r.minSuggestCharacters:this.minSuggestCharacters;if(s&&e.trim()&&o>=a){const u=((l=this.view)==null?void 0:l.spatialReference)||pQ,h=ss(r,"maxSuggestions")?r.maxSuggestions:this.maxSuggestions,{view:p}=this,f=!!(r instanceof xy&&ss(r,"exactMatch"))&&r.exactMatch;return r.getSuggestions({view:p,sourceIndex:i,suggestTerm:e,spatialReference:u,maxSuggestions:h,exactMatch:f},n)}return Promise.resolve(null)}_getLayerSourcePopupTemplate(e){const{layer:i}=e;if(i)return ss(e,"popupTemplate")?e.popupTemplate:i.popupTemplate}_getSourceIndexOfResult(e){const i=this.results;let n=null;return i.some(r=>r.results.some(s=>s===e&&(n=r.sourceIndex,!0))),n}async _goToSearchResult(e){const i=!!e;this._abortGoTo();const n=new AbortController;this._gotoController=n;const r={target:{target:e},options:{animate:i,signal:n.signal}};await this.callGoTo(r),this._gotoController=null}_getDefaultSymbol(e){var r;const{defaultSymbols:i}=this,n=(r=e.feature)==null?void 0:r.geometry;if(U(n))return null;switch(n.type){case"point":case"multipoint":return i.point;case"polyline":return i.polyline;case"extent":case"polygon":return i.polygon;default:return null}}_removeHighlight(){this._handles.remove(hQ)}async _getLayerView(e){const{view:i}=this;if(!e||!i||e.layer.type==="building-component"||e.layer.type==="subtype-sublayer")return null;const{layer:n}=e;return await i.when(),i.whenLayerView(n)}_highlightFeature(e){const{graphic:i,layerView:n}=e,{attributes:r,layer:s}=i,{objectIdField:o}=s,a=r&&r[o],l=n.highlight(a||i);this._handles.add(l,hQ)}_setResultFloor(e){var s,o,a;const{view:i}=this,n=(s=e.feature)==null?void 0:s.attributes,r=(o=e.feature)==null?void 0:o.sourceLayer;if(r&&"floorInfo"in r&&((a=r==null?void 0:r.floorInfo)!=null&&a.floorField)&&n){const l=n[r.floorInfo.floorField];i==null||i.emit("select-result-floor",l)}}};it.ALL_INDEX=Ab,c([d()],it.prototype,"_searching",void 0),c([d()],it.prototype,"_updatingPromise",void 0),c([d({readOnly:!0,value:null})],it.prototype,"activeSource",null),c([d()],it.prototype,"activeSourceIndex",null),c([d()],it.prototype,"allPlaceholder",null),c([d({readOnly:!0})],it.prototype,"allSources",null),c([d()],it.prototype,"autoNavigate",void 0),c([d()],it.prototype,"autoSelect",void 0),c([d()],it.prototype,"defaultPopupTemplate",void 0),c([d({readOnly:!0})],it.prototype,"defaultSources",void 0),c([d()],it.prototype,"defaultSymbols",void 0),c([d()],it.prototype,"includeDefaultSources",void 0),c([d()],it.prototype,"locationEnabled",null),c([d()],it.prototype,"maxInputLength",void 0),c([d()],it.prototype,"maxResults",void 0),c([d()],it.prototype,"maxSuggestions",void 0),c([d()],it.prototype,"messages",void 0),c([d()],it.prototype,"minSuggestCharacters",void 0),c([d({readOnly:!0})],it.prototype,"placeholder",null),c([d()],it.prototype,"popupEnabled",void 0),c([d({type:Cm})],it.prototype,"popupTemplate",void 0),c([d({type:zi})],it.prototype,"portal",void 0),c([d()],it.prototype,"resultCount",void 0),c([d()],it.prototype,"resultGraphicEnabled",void 0),c([d({readOnly:!0})],it.prototype,"resultGraphic",void 0),c([d({readOnly:!0})],it.prototype,"results",void 0),c([d({readOnly:!0})],it.prototype,"selectedSuggestion",void 0),c([d()],it.prototype,"searchAllEnabled",void 0),c([d({readOnly:!0})],it.prototype,"selectedResult",void 0),c([d()],it.prototype,"searchTerm",null),c([d({type:CA})],it.prototype,"sources",void 0),c([d({readOnly:!0})],it.prototype,"state",null),c([d()],it.prototype,"suggestionDelay",void 0),c([d()],it.prototype,"suggestionCount",void 0),c([d({readOnly:!0})],it.prototype,"suggestions",void 0),c([d()],it.prototype,"suggestionsEnabled",void 0),c([d({readOnly:!0})],it.prototype,"updating",null),c([d()],it.prototype,"view",void 0),c([d()],it.prototype,"clear",null),it=c([O(Eye)],it);const d_=it;let Zp=class extends qt{constructor(e,i){super(e,i),this.messages=null,this.showMoreResultsOpen=!1,this.viewModel=null}render(){const e={[pd.showMoreResults]:this.showMoreResultsOpen};return L("div",{class:pd.base},L("div",{key:"esri-search-renderer__container",class:this.classes(pd.moreResults,e)},this.renderSearchResultName(),this.renderMoreResults()))}renderMoreResults(){return L("div",{key:"esri-search-renderer__more-results"},this.renderMoreResultsButton(),this.renderMoreResultsLists())}renderSearchResultName(){var n;const e=(n=this.viewModel)==null?void 0:n.selectedResult,i=e&&e.name||"";return L("div",{key:"esri-search-renderer__result-name",class:pd.moreResultsItem},i)}renderMoreResultsLists(){var r;const e=(r=this.viewModel)==null?void 0:r.results,{resultCount:i}=this.viewModel;if(i<2)return null;const n=e.map(s=>this.renderMoreResultsList(s));return L("div",{key:"esri-search-renderer__more-results-container",class:pd.moreResultsList},n)}renderMoreResultsButton(){const{messages:e}=this,{resultCount:i}=this.viewModel;return i<2?null:L("div",{key:"esri-search-renderer__more-results-button",class:pd.moreResultsItem},L("a",{class:pd.anchor,href:"#",bind:this,onclick:this._showMoreResultsClick,onkeydown:this._showMoreResultsClick},this.showMoreResultsOpen?e.hideMoreResults:e.showMoreResults))}renderMoreResultsHeader(e,i){return L("div",{key:`esri-search-result-renderer__header-${i}`,class:pd.moreResultsListHeader},e)}renderMoreResultsList(e){var p,f;const{results:i}=e,n=i.length,r=!!n,s=(p=this.viewModel)==null?void 0:p.selectedResult,o=n===1&&i[0]===s,a=this._getSourceName(e.source,e.sourceIndex),l=((f=this.viewModel)==null?void 0:f.results.length)>1&&!o?this.renderMoreResultsHeader(a,e.sourceIndex):null,u=r&&i.map((g,v)=>this.renderMoreResultsListItem(g,v)),h=r&&!o?L("ul",{key:`esri-search-result-renderer__list-${e.sourceIndex}`},u):null;return r?L("div",{key:`esri-search-result-renderer__results-${e.sourceIndex}`},l,h):null}renderMoreResultsListItem(e,i){return e!==this.get("viewModel.selectedResult")?L("li",{key:`esri-search-result-renderer__list-item-${i}`},L("a",{class:pd.anchor,href:"#",tabindex:"0",bind:this,"data-result":e,onclick:this._selectResultClick,onkeydown:this._selectResultClick},e.name)):null}_showMoreResultsClick(e){e.preventDefault(),this.showMoreResultsOpen=!this.showMoreResultsOpen;const i=this.get("viewModel.view.popup");i&&i.reposition()}_selectResultClick(e){e.preventDefault();const i=e.currentTarget["data-result"];this.viewModel&&this.viewModel.select(i)}_getSourceName(e,i){return i===d_.ALL_INDEX?this.messages.all:e.name}};c([d(),bt("esri/widgets/Search/t9n/Search")],Zp.prototype,"messages",void 0),c([d()],Zp.prototype,"showMoreResultsOpen",void 0),c([d()],Zp.prototype,"viewModel",void 0),c([Ln()],Zp.prototype,"_showMoreResultsClick",null),c([Ln()],Zp.prototype,"_selectResultClick",null),Zp=c([O("esri.widgets.Search.SearchResultRenderer")],Zp);const BKe=Zp,HKe=/<[a-z/][\s\S]*>/i;let ot=class extends qt{constructor(e,i){super(e,i),this._activeMenuItemIndex=-1,this._handles=new wn,this._inputNode=null,this._menuItemCount=0,this._sourceMenuButtonNode=null,this._sourceListNode=null,this._suggestionListNode=null,this._searchResultRenderer=new BKe,this._locateFailed=null,this._container=null,this.activeMenu="none",this.disabled=!1,this.iconClass=Re.widgetIcon,this.messages=null,this.messagesCommon=null,this.viewModel=new d_,this._clearActiveMenu=()=>{this.activeMenu="none"},this._removeActiveMenu=n=>{var s;const r=n.relatedTarget;r&&((s=this._container)!=null&&s.contains(r))||this._clearActiveMenu()},this.addHandles([X(()=>this.searchTerm,n=>{(n&&this.activeMenu==="warning"||!n&&!this.get("viewModel.selectedSuggestion.location"))&&this._clearActiveMenu()}),ji(()=>{var n;return(n=this.viewModel)==null?void 0:n.allSources},"change",()=>this._watchSourceChanges()),X(()=>this.activeMenu,()=>this._resetActiveMenuItemIndex(),ut),X(()=>{var n;return(n=this.viewModel)==null?void 0:n.defaultPopupTemplate},n=>{n&&(n.content=this._renderSearchResultsContent.bind(this))},ut)])}destroy(){this._handles.destroy(),this._handles=null,this._cancelSuggest(),this._cancelSearch(),this._searchResultRenderer&&(this._searchResultRenderer.viewModel=null,this._searchResultRenderer.destroy(),this._searchResultRenderer=null)}get displayedSearchTerm(){return`${this.viewModel.searchTerm}`.trim()}get inputId(){return this._buildId("input")}get suggestionsMenuId(){return this._buildId("suggest-menu")}get sourceMenuId(){return this._buildId("source-menu")}get sourceMenuButtonId(){return this._buildId("source-menu-button")}get activeSource(){return this.viewModel.activeSource}get activeSourceIndex(){return this.viewModel.activeSourceIndex}set activeSourceIndex(e){this.viewModel.activeSourceIndex=e}get allPlaceholder(){return this.viewModel.allPlaceholder}set allPlaceholder(e){this.viewModel.allPlaceholder=e}get allSources(){return this.viewModel.allSources}get autoNavigate(){return this.viewModel.autoNavigate}set autoNavigate(e){this.viewModel.autoNavigate=e}get autoSelect(){return this.viewModel.autoSelect}set autoSelect(e){this.viewModel.autoSelect=e}get defaultSources(){return this.viewModel.defaultSources}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get includeDefaultSources(){return this.viewModel.includeDefaultSources}set includeDefaultSources(e){this.viewModel.includeDefaultSources=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get locationEnabled(){return this.viewModel.locationEnabled}set locationEnabled(e){this.viewModel.locationEnabled=e}get maxResults(){return this.viewModel.maxResults}set maxResults(e){this.viewModel.maxResults=e}get maxSuggestions(){return this.viewModel.maxSuggestions}set maxSuggestions(e){this.viewModel.maxSuggestions=e}get minSuggestCharacters(){return this.viewModel.minSuggestCharacters}set minSuggestCharacters(e){this.viewModel.minSuggestCharacters=e}get popupEnabled(){return this.viewModel.popupEnabled}set popupEnabled(e){this.viewModel.popupEnabled=e}get popupTemplate(){return this.viewModel.popupTemplate}set popupTemplate(e){this.viewModel.popupTemplate=e}get portal(){return this.viewModel.portal}set portal(e){this.viewModel.portal=e}get resultGraphic(){return this.viewModel.resultGraphic}set resultGraphic(e){this.viewModel.resultGraphic=e}get resultGraphicEnabled(){return this.viewModel.resultGraphicEnabled}set resultGraphicEnabled(e){this.viewModel.resultGraphicEnabled=e}get results(){return this.viewModel.results}get searchAllEnabled(){return this.viewModel.searchAllEnabled}set searchAllEnabled(e){this.viewModel.searchAllEnabled=e}get searchTerm(){return this.viewModel.searchTerm}set searchTerm(e){this.viewModel.searchTerm=e}get selectedResult(){return this.viewModel.selectedResult}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get suggestions(){return this.viewModel.suggestions}get suggestionsEnabled(){return this.viewModel.suggestionsEnabled}set suggestionsEnabled(e){this.viewModel.suggestionsEnabled=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}clear(){this.viewModel.clear()}focus(){var e;(e=this._inputNode)==null||e.focus(),this.emit("search-focus")}blur(){var e;(e=this._inputNode)==null||e.blur(),this.emit("search-blur")}search(e){this._clearActiveMenu(),this._cancelSuggest(),this._cancelSearch();const i=new AbortController,{signal:n}=i;return this._searchController=i,this.viewModel.search(e,{signal:n}).catch(r=>{if(this._searchController===i)return this._clearActiveMenu(),this._searchController=null,r}).then(r=>{if(this._searchController===i)return this.activeMenu=r.numResults?"none":"warning",this._searchController=null,r})}suggest(e){this._cancelSuggest();const i=new AbortController,{signal:n}=i;return this._suggestController=i,this.viewModel.suggest(e,null,{signal:n}).then(r=>{if(this._suggestController===i)return this._suggestController=null,r.numResults&&this._openSuggestionMenu(),this._scrollToTopSuggestion(),r}).catch(()=>{if(this._suggestController===i)return this._suggestController=null,null})}render(){const{state:e}=this.viewModel,i={[Re.disabled]:e==="disabled",[Re.esriWidgetDisabled]:this.disabled};return L("div",{class:this.classes(Re.base,i)},e==="loading"?this.renderLoader():this.renderContainer())}renderSubmitButton(){const{messages:e,disabled:i}=this;return L("button",{"aria-label":e.searchButtonTitle,bind:this,disabled:i,class:this.classes(Re.submitButton,Re.button),key:"esri-search__submit-button",onclick:this._handleSearchButtonClick,title:e.searchButtonTitle,type:"button"},L("span",{"aria-hidden":"true",class:Re.searchIcon}))}renderWarningMenu(){return L("div",{key:"esri-search__error-menu",class:this.classes(Re.menu,Re.warningMenu)},L("div",{class:Re.warningMenuBody},this.renderWarning()))}renderSourceMenuButton(){const{messages:e,activeMenu:i,sourceMenuId:n,sourceMenuButtonId:r,disabled:s}=this,{activeSourceIndex:o,allSources:a}=this.viewModel;return a.length>1?L("button",{id:r,key:"esri-search__source-menu-button",bind:this,disabled:s,"aria-label":e.searchIn,title:e.searchIn,"aria-haspopup":"true","aria-expanded":(i==="source").toString(),"aria-controls":n,class:this.classes(Re.sourcesButton,Re.button),onclick:this._handleSourcesMenuToggleClick,onfocus:this._handleSourcesMenuToggleFocus,afterCreate:Ao,"data-node-ref":"_sourceMenuButtonNode",type:"button"},L("span",{"aria-hidden":"true",class:Re.dropdownIcon}),L("span",{"aria-hidden":"true",class:Re.dropupIcon}),L("span",{class:Re.sourceName},this._getSourceName(o))):null}renderSourcesList(){const{allSources:e,searchAllEnabled:i}=this.viewModel,{_activeMenuItemIndex:n,activeMenu:r,sourceMenuId:s,sourceMenuButtonId:o}=this,a=r==="source"&&n>-1?this._buildId("source-item",n):null;return e.length>1?L("ul",{"aria-activedescendant":a,"aria-labelledby":o,id:s,role:"menu",bind:this,afterCreate:Ao,onkeydown:this._handleSourceMenuKeydown,onkeyup:this._handleSourceMenuKeyup,"data-node-ref":"_sourceListNode",class:Re.menuList,tabIndex:-1},i?this.renderSource(d_.ALL_INDEX):null,e.map((l,u)=>this.renderSource(u)).toArray()):null}renderSourcesMenu(){const{allSources:e}=this.viewModel;return e.length>1?L("div",{key:"esri-search__source-menu",class:this.classes(Re.menu,Re.sourcesMenu)},this.renderSourcesList()):null}renderLoader(){const{messages:e,messagesCommon:i,disabled:n}=this;return L("div",{class:Re.loader,key:"base-loader",tabIndex:n?-1:null},L("span",{"aria-hidden":"true",class:Re.loaderAnimation}),L("span",{class:Re.fallbackText},e.searchButtonTitle),L("span",{class:Re.loaderText},i.loading))}renderContainer(){const{allSources:e,state:i}=this.viewModel,{activeMenu:n}=this,r={[Re.hasMultipleSources]:e.length>1,[Re.isLoading]:i==="loading",[Re.isSearching]:i==="searching",[Re.showWarning]:n==="warning",[Re.showSources]:n==="source",[Re.showSuggestions]:n==="suggestion"};return L("div",{tabIndex:-1,afterCreate:s=>{this._container=s,s.addEventListener("focusout",this._removeActiveMenu)},afterRemoved:s=>{s.removeEventListener("focusout",this._removeActiveMenu)},class:this.classes(r,Re.container),key:"base-container"},this.renderSourceMenuButton(),this.renderSourcesMenu(),this.renderInputContainer(),this.renderSubmitButton(),this.renderWarningMenu())}renderClearButton(){return this.searchTerm?L("button",{bind:this,disabled:this.disabled,class:this.classes(Re.clearButton,Re.button),key:"esri-search__clear-button",onclick:this._handleClearButtonClick,onfocus:this._clearActiveMenu,title:this.messages.clearButtonTitle,type:"button"},L("span",{"aria-hidden":"true",class:Re.clearIcon})):null}renderLocationGroup(){const{messages:e,locationEnabled:i,displayedSearchTerm:n}=this,r=i&&!n,s=this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0;return r?L("ul",{role:"group",key:"esri-search__suggestion-list-current-location",class:this.classes(Re.menuList,Re.suggestionList,Re.suggestionListCurrentLocation)},L("li",{bind:this,"data-current-location-item":!0,onclick:this._handleUseCurrentLocationClick,id:this._buildId("suggestion-item",0),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===0).toString(),role:"option",class:this.classes(Re.menuItem,s?Re.menuItemFocus:null)},L("span",{"aria-hidden":"true",class:Re.locate})," ",e.useCurrentLocation)):null}renderInput(){const{activeMenu:e,locationEnabled:i,displayedSearchTerm:n,messages:r,suggestionsMenuId:s,inputId:o,_activeMenuItemIndex:a,disabled:l}=this,{maxInputLength:u,placeholder:h,searchTerm:p,suggestionCount:f}=this.viewModel,g=!(!(i&&!n)&&!f),v=e==="suggestion"&&a>-1?this._buildId("suggestion-item",a):null;return L("input",{"aria-activedescendant":v,"aria-autocomplete":"list","aria-expanded":(g&&e==="suggestion").toString(),"aria-controls":g?s:null,"aria-haspopup":"listbox","aria-label":r.searchButtonTitle,bind:this,disabled:l,placeholder:h,maxlength:u,autocomplete:"off",type:"text",class:this.classes(Re.esriInput,Re.input),value:p,id:o,role:"combobox",onkeyup:this._handleInputKeyup,onclick:this._openSuggestionMenu,oninput:this._handleInputPaste,onpaste:this._handleInputPaste,afterCreate:Ao,"data-node-ref":"_inputNode",onfocus:this.focus,onblur:this.blur,title:p?"":h})}renderForm(){return L("form",{key:"esri-search__form",bind:this,disabled:this.disabled,class:Re.form,onsubmit:this._formSubmit,role:"search"},this.renderInput())}renderSuggestList(e){const{sourceIndex:i}=e,n=e.results.length,r=e.results;return n?L("ul",{role:"group",key:`esri-search__suggestion-list-${i}`,class:this.classes(Re.menuList,Re.suggestionList)},r.map(s=>this.renderSuggestion(s,this._menuItemCount++))):null}renderSuggestionsGroup(){const{suggestions:e}=this.viewModel;return e?e.map(i=>[this.renderSuggestionHeader(i),this.renderSuggestList(i)]):null}renderSuggestionsMenu(){const{displayedSearchTerm:e,locationEnabled:i,suggestionsMenuId:n,inputId:r}=this,{suggestionCount:s}=this.viewModel,o=i&&!e||s;return this._menuItemCount=0,o?L("div",{id:n,key:"esri-search__suggestions-menu",class:this.classes(Re.menu,Re.suggestionsMenu),role:"listbox","aria-labelledby":r,bind:this,afterCreate:Ao,"data-node-ref":"_suggestionListNode"},this.renderLocationGroup(),this.renderSuggestionsGroup()):null}renderInputContainer(){return L("div",{key:"esri-search__input-container",class:Re.inputContainer},this.renderForm(),this.renderSuggestionsMenu(),this.renderClearButton())}renderSuggestionHeader(e){const{allSources:i,activeSourceIndex:n}=this.viewModel,{sourceIndex:r}=e,s=e.results.length,o=i.length>1&&n===d_.ALL_INDEX;return s&&o?L("div",{key:`esri-search__suggestion-header-${r}`,class:Re.menuHeader},this._getSourceName(r)):null}renderSuggestion(e,i){const{_activeMenuItemIndex:n,messages:r}=this,{searchTerm:s}=this.viewModel;if(s){const{text:o}=e,a=o||r.untitledResult,l=HKe.test(a),u=[];if(l)u.push(L("div",{innerHTML:a}));else{const p=this._splitResult(a,s),f=s.toLowerCase();p.forEach((g,v)=>{g&&g.length&&(g.toLowerCase()===f?u.push(L("strong",{key:v},g)):u.push(g))})}const h=this.activeMenu==="suggestion"&&n===i;return L("li",{bind:this,id:this._buildId("suggestion-item",i),"aria-selected":(this.activeMenu==="suggestion"&&this._activeMenuItemIndex===i).toString(),onclick:this._handleSuggestionClick,key:`esri-search__suggestion_${i}`,"data-suggestion":e,role:"option",class:this.classes(Re.menuItem,h?Re.menuItemFocus:null)},u)}}renderSource(e){const{activeSourceIndex:i,searchAllEnabled:n}=this.viewModel,r={[Re.menuItemActive]:e===i,[Re.menuItemFocus]:this.activeMenu==="source"&&e===(n?this._activeMenuItemIndex-1:this._activeMenuItemIndex)},s=n?e+1:e;return L("li",{bind:this,key:`esri-search__source-${e}`,id:this._buildId("source-item",s),"aria-checked":(e===i).toString(),onclick:this._handleSourceClick,"data-source-index":e,role:"menuitemradio",class:this.classes(Re.source,Re.menuItem,r)},this._getSourceName(e))}renderNoResultsWarning(e){const{messages:i}=this,n=e?Vr(i.noResultsFoundForValue,{value:`"${e}"`}):i.noResultsFound;return L("div",{key:"esri-search__no_results"},L("div",{class:Re.warningMenuHeader},i.noResults),L("div",{class:Re.warningMenuText},n))}renderEmptySearchWarning(){const{messages:e}=this;return L("div",{key:"esri-search__empty-search"},L("span",{"aria-hidden":"true",class:Re.noticeIcon}),L("span",{class:Re.noValueText},e.emptyValue))}renderLocateWarning(){const{messages:e}=this;return L("div",{key:"esri-search__locate-error"},L("span",{"aria-hidden":"true",class:Re.noticeIcon}),L("span",{class:Re.noValueText},e.locateError))}renderWarning(){var r;const{displayedSearchTerm:e,_locateFailed:i}=this,{viewModel:n}=this;return i?this.renderLocateWarning():(r=n.selectedSuggestion)!=null&&r.location||e?this.renderNoResultsWarning(e):this.renderEmptySearchWarning()}_resetActiveMenuItemIndex(){this._activeMenuItemIndex=-1}_buildId(e,i){return`${this.id}-${e}${i===void 0?"":`-${i}`}`}_watchSourceChanges(){const{_handles:e,viewModel:{allSources:i}}=this,n="sources";e.remove(n),i.forEach(r=>e.add(X(()=>r.name,()=>this.scheduleRender()),n))}_handleSourcesMenuToggleFocus(){this.activeMenu!=="source"&&this._clearActiveMenu()}_handleSourcesMenuToggleClick(){var i;const e=this.activeMenu==="source";this.activeMenu=e?"none":"source",this.renderNow(),this.activeMenu==="source"&&((i=this._sourceListNode)==null||i.focus())}_handleClearButtonClick(){this.viewModel.clear(),this._focus()}_handleSearchButtonClick(){this.search()}_handleSuggestionClick(e){const i=e.currentTarget["data-suggestion"];i&&(this._focus(),this.search(i))}_handleUseCurrentLocationClick(){this._useCurrentLocation()}_useCurrentLocation(){this._focus("none"),this._cancelSuggest(),this._cancelSearch();const e=new AbortController,{signal:i}=e;this._searchController=e,this.viewModel.searchNearby({signal:i}).then(n=>{this.activeMenu=n.numResults?"none":"warning"}).catch(()=>{this._locateFailed=!0,this.activeMenu="warning"}).then(()=>{this._searchController=null})}_handleSourceClick(e){this._setSourceFromMenuItem(e.currentTarget)}_setSourceFromMenuItem(e){var n;if(!e)return;const i=e["data-source-index"];this.viewModel.activeSourceIndex=i,this._clearActiveMenu(),(n=this._sourceMenuButtonNode)==null||n.focus()}_cancelSuggest(){this._suggestController&&(this._suggestController.abort(),this._suggestController=null)}_cancelSearch(){this._searchController&&(this._searchController.abort(),this._searchController=null),this._locateFailed=!1}_handleInputKeyup(e){var s;const i=To(e);if(e.ctrlKey||e.metaKey||i==="Copy"||i==="ArrowLeft"||i==="ArrowRight"||i==="Shift")return;if(i==="Tab"||i==="Escape"||e.shiftKey&&i==="Tab")return this._cancelSuggest(),void(i==="Escape"&&this._clearActiveMenu());const n=i==="Home"||i==="End"||i==="ArrowUp"||i==="ArrowDown";if(i==="Enter"&&this._activeMenuItemIndex<0)return void this._cancelSuggest();const r=(s=this._suggestionListNode)==null?void 0:s.getElementsByTagName("li");if(r!=null&&r.length){if(this.activeMenu!=="suggestion"&&this._openSuggestionMenu(),n)return e.preventDefault(),this._cancelSuggest(),void this._handleItemNavigation(i,r,this._suggestionListNode);const o=r[this._activeMenuItemIndex];if(i==="Enter"&&o){const a=o["data-suggestion"];return void(a?(this._focus(),this.search(a)):o["data-current-location-item"]&&this._useCurrentLocation())}}this.viewModel.searchTerm&&this.suggest()}_handleItemNavigation(e,i,n){const r=this._activeMenuItemIndex;e==="Home"&&(this._activeMenuItemIndex=0),e==="End"&&(this._activeMenuItemIndex=i.length-1),e==="ArrowUp"&&(this._activeMenuItemIndex=this._activeMenuItemIndex<=0?i.length-1:this._activeMenuItemIndex-1),e==="ArrowDown"&&(this._activeMenuItemIndex=this._activeMenuItemIndex===i.length-1?0:this._activeMenuItemIndex+1),r!==this._activeMenuItemIndex&&A3e(i[this._activeMenuItemIndex],n)}_scrollToTopSuggestion(){this._suggestionListNode&&(this._suggestionListNode.scrollTop=0)}_openSuggestionMenu(){this.activeMenu="suggestion"}_handleInputPaste(e){const i=e.target;this.viewModel.searchTerm!==i.value&&(this.viewModel.searchTerm=i.value),this.viewModel.searchTerm&&this.suggest()}_handleSourceMenuKeydown(e){const i=To(e);if(Vy(i)){e.preventDefault();const n=this._sourceListNode.getElementsByTagName("li")[this._activeMenuItemIndex];this._setSourceFromMenuItem(n)}else i!=="ArrowUp"&&i!=="ArrowDown"&&i!=="End"&&i!=="Home"||e.preventDefault()}_handleSourceMenuKeyup(e){var s,o;const i=To(e),n=i==="ArrowUp"||i==="ArrowDown"||i==="End"||i==="Home";if(n&&e.preventDefault(),i==="Escape")return this._clearActiveMenu(),void((s=this._sourceMenuButtonNode)==null?void 0:s.focus());const r=(o=this._sourceListNode)==null?void 0:o.getElementsByTagName("li");return r&&r.length!==0&&n?(this.activeMenu!=="source"&&(this.activeMenu="source"),void this._handleItemNavigation(i,r,this._sourceListNode.parentElement)):void 0}_focus(e){this.focus(),e&&(this.activeMenu=e)}_formSubmit(e){e.preventDefault(),this._activeMenuItemIndex===-1&&this.search()}_getSourceName(e){const{messages:i}=this,n=this.viewModel,{allSources:r}=n,s=r.getItemAt(e);return e===d_.ALL_INDEX?i.all:s&&s.name||i.untitledSource}_splitResult(e,i){const n=Ise(i);return e.replace(new RegExp(`(^|)(${n})(|$)`,"ig"),"$1|$2|$3").split("|")}_renderSearchResultsContent(){return this._searchResultRenderer.showMoreResultsOpen=!1,this._searchResultRenderer.viewModel=this.viewModel,this._searchResultRenderer}};c([d()],ot.prototype,"_activeMenuItemIndex",void 0),c([d()],ot.prototype,"displayedSearchTerm",null),c([d({readOnly:!0})],ot.prototype,"inputId",null),c([d({readOnly:!0})],ot.prototype,"suggestionsMenuId",null),c([d({readOnly:!0})],ot.prototype,"sourceMenuId",null),c([d({readOnly:!0})],ot.prototype,"sourceMenuButtonId",null),c([d()],ot.prototype,"activeMenu",void 0),c([d({readOnly:!0})],ot.prototype,"activeSource",null),c([d()],ot.prototype,"activeSourceIndex",null),c([d()],ot.prototype,"allPlaceholder",null),c([d({readOnly:!0})],ot.prototype,"allSources",null),c([d()],ot.prototype,"autoNavigate",null),c([d()],ot.prototype,"autoSelect",null),c([d({readOnly:!0})],ot.prototype,"defaultSources",null),c([d()],ot.prototype,"disabled",void 0),c([d()],ot.prototype,"goToOverride",null),c([d()],ot.prototype,"iconClass",void 0),c([d()],ot.prototype,"includeDefaultSources",null),c([d()],ot.prototype,"label",null),c([d()],ot.prototype,"locationEnabled",null),c([d()],ot.prototype,"maxResults",null),c([d()],ot.prototype,"maxSuggestions",null),c([d(),bt("esri/widgets/Search/t9n/Search")],ot.prototype,"messages",void 0),c([d(),bt("esri/t9n/common")],ot.prototype,"messagesCommon",void 0),c([d()],ot.prototype,"minSuggestCharacters",null),c([d()],ot.prototype,"popupEnabled",null),c([d()],ot.prototype,"popupTemplate",null),c([d()],ot.prototype,"portal",null),c([d()],ot.prototype,"resultGraphic",null),c([d()],ot.prototype,"resultGraphicEnabled",null),c([d({readOnly:!0})],ot.prototype,"results",null),c([d()],ot.prototype,"searchAllEnabled",null),c([d()],ot.prototype,"searchTerm",null),c([d({readOnly:!0})],ot.prototype,"selectedResult",null),c([d()],ot.prototype,"sources",null),c([d({readOnly:!0})],ot.prototype,"suggestions",null),c([d()],ot.prototype,"suggestionsEnabled",null),c([d()],ot.prototype,"view",null),c([cR(["search-complete","search-clear","search-start","select-result","suggest-start","suggest-complete"]),d({type:d_})],ot.prototype,"viewModel",void 0),ot=c([O("esri.widgets.Search")],ot);const GKe=ot;let Rh,qR,il,WR;const fQ=async t=>{const i=new URL(window.location).searchParams.get("pin");if(i!==""&&i!==null){const n=await $6(`PIN_NUM in ('${i==null?void 0:i.replaceAll(",","','")}')`,[]);t(n)}},qKe=(t,e,i)=>(WKe(e),il=new GKe({view:e,container:t,allPlaceholder:"Address, owner, PIN, or REID",includeDefaultSources:!1,popupEnabled:!1,sources:[],locationEnabled:!1}),il.sources=ZKe(qR,Rh,WR,il),il.on("search-complete",async n=>{const r=await KKe(n);r.forEach(s=>{s.layer=Rh}),i(r)}),il.watch("searchTerm",n=>{n!==mQ(n)&&(il.searchTerm=mQ(n))}),fQ(i),window.addEventListener("popstate",n=>{fQ(i)}),il),WKe=t=>{Rh=t.map.allTables.find(e=>e.title.includes("Condo")&&e.type==="feature"),qR=t.map.allTables.find(e=>e.title.includes("Address")&&e.type==="feature"),WR=t.map.allLayers.find(e=>e.title.includes("Property")&&e.type==="feature")},JKe=(t,e,i)=>{const n=[],r=[];for(let s=0;s<i.length;s++)i[s].attributes[e].indexOf(t)===0?n.push(i[s]):r.push(i[s]);return n.sort(),r.sort(),n.concat(r)},YKe=async(t,e,i,n,r,s,o,a)=>{const l=[],u=t.suggestTerm.toUpperCase().replace(/'/g,"''").replace(/[\u2018\u2019]/g,"''");s.forEach(f=>{o?l.push(`${f} LIKE '${u}%'`):l.push(`${f} LIKE '%${u}%'`)});const h=await i.queryFeatures({returnDistinctValues:!0,outFields:n,returnGeometry:!1,orderByFields:r,num:a.activeSource?50:6,where:l.join(" OR ")});return JKe(t.suggestTerm.toUpperCase(),s[0],h.features).map(f=>({key:e,text:f.getAttribute(n[0]),sourceIndex:t.sourceIndex}))},bx=(t,e,i,n,r,s,o,a,l)=>{const u=async h=>{const p=h.suggestResult.text.toUpperCase().replace(/'/g,"''").replace(/[\u2018\u2019]/g,"''");return(await i.queryFeatures({where:`${r[0]} = '${p}'`,outFields:a})).features.map(g=>({feature:g,name:e}))};return new xy({placeholder:t,name:e,maxSuggestions:6,getSuggestions:h=>YKe(h,e,i,n,r,s,o,l),getResults:u})},ZKe=(t,e,i,n)=>(Rh=e,qR=t,WR=i,il=n,new we([bx("example: 222 W HARGETT ST","Site Address",t,["ADDRESS"],["ADDRESS"],["ADDRESS"],!0,["ADDRESS","REA_REID","OBJECTID"],n),bx("example: SMITH, JOHN","Owner",e,["OWNER"],["OWNER"],["OWNER"],!0,["OWNER","OBJECTID"],n),bx("PIN","PIN",e,["PIN_NUM"],["PIN_NUM"],["PIN_NUM"],!0,["PIN_NUM","OBJECTID"],n),bx("REID","REID",e,["REID"],["REID"],["REID"],!0,["REID","OBJECTID"],n),bx("example: W HARGETT ST","Street Name",t,["STREET","ADDR_LIST"],["STREET"],["STREET"],!0,["STREET","REA_REID","OBJECTID"],n)])),mQ=t=>(t.length===19&&t[4]==="."&&[t[7],t[10],t[15]].every(i=>i===" ")&&(t=t.substring(0,4)+t.substring(8,10)+t.substring(11,15)),t),KKe=async t=>{var e;if(!il.viewModel.selectedSuggestion){let i=[];il.activeSource&&(i=(e=il.activeSource)==null?void 0:e.searchFields);const n=t.searchTerm.toUpperCase().replace(/'/g,"''").replace(/[\u2018\u2019]/g,"''");if(n.length>2){const r=XKe(i,n);return QKe(r,Rh)}else console.log("search term must be 3 or more characters")}if(t.numResults)return await eXe(t.results[0].source.layer,t.results[0].source.name,t.results[0].results,t.searchTerm)},XKe=(t,e)=>{let i="";return t!=null&&t.length?(t.includes("OWNER")&&(i=`OWNER like '_%${e}%'`),t.includes("PIN_NUM")&&(i=`PIN_NUM like '%${e}%'`),t.includes("REID")&&(i=`REID like '%${e}%'`)):i=`SITE_ADDRESS like '%${e}%' OR FULL_STREET_NAME like '%${e}%' OR OWNER like '%${e}%' OR REID like '${e}%' OR PIN_NUM like '${e}%'`,i},QKe=async(t,e)=>{var r;(r=document.querySelector(".esri-search__warning-menu"))==null||r.setAttribute("style","visibility: hidden");const i=[],n=await e.queryFeatures({where:t,outFields:["*"]});if(n.features.forEach(s=>{i.push(s.getAttribute("OBJECTID"))}),i.length){const s=await JR(i);return n.features.forEach(o=>{var l;const a=(l=s.find(u=>u.getAttribute("PIN_NUM")===o.getAttribute("PIN_NUM")))==null?void 0:l.geometry;a&&(o.geometry=a)}),n.features}},eXe=async(t,e,i,n)=>{!t&&e==="Owner"&&(t=Rh),!t&&["Site Address","Street Name"].includes(e)&&(t=qR);const r=i.map(o=>o.feature.getAttribute("OBJECTID"));let s="";if((t==null?void 0:t.layerId)===4){s=`${e==="Street Name"?"FULL_STREET_NAME":"SITE_ADDRESS"} = '${n}'`;const o=await tXe(r,t);return o||$6(s,r)}else return await $6(s,r)},$6=async(t,e)=>{const i={outFields:["*"],returnDistinctValues:!0};t!==""?i.where=t:i.objectIds=e;const n=await Rh.queryFeatures(i);e=[],n.features.forEach(s=>{e.push(s.getAttribute("OBJECTID"))});const r=await JR(e);return n.features.forEach(s=>{var a;const o=(a=r.find(l=>l.getAttribute("PIN_NUM")===s.getAttribute("PIN_NUM")))==null?void 0:a.geometry;o&&(s.geometry=o)}),n.features},tXe=async(t,e)=>{const i=e.relationships.find(l=>l.name==="ADDRESSES_CONDO"),n={outFields:["*"],objectIds:t,relationshipId:i==null?void 0:i.id},r=await e.queryRelatedFeatures(n);t=[];const s=[],o=[];for(const l in r)r[l].features.forEach(u=>{o.includes(u.getAttribute("REID"))||(t.push(u.getAttribute("OBJECTID")),o.push(u.getAttribute("REID")),s.push(u))});const a=await JR(t);return s.forEach(l=>{var h;const u=(h=a.find(p=>p.getAttribute("PIN_NUM")===l.getAttribute("PIN_NUM")))==null?void 0:h.geometry;u&&(l.geometry=u)}),s},JR=async t=>{const e=Rh.relationships.find(r=>r.name==="CONDO_PROPERTY"),i=await Rh.queryRelatedFeatures({relationshipId:e==null?void 0:e.id,objectIds:t,outFields:["OBJECTID","REID"],returnGeometry:!1});t=[];for(const r in i)i[r].features.forEach(s=>{t.push(s.getAttribute("OBJECTID"))});const n=await WR.queryFeatures({objectIds:t,outFields:["*"],returnGeometry:!0,outSpatialReference:{wkid:102100}});return il.view.goTo({target:n.features}),n.features};function iXe(t){const e=le.useRef(null),i=le.useRef(!1);return le.useEffect(()=>{i.current||(i.current=!0,qKe(e.current,t.view,t.condosSelected))},[t.view]),re("div",{ref:e})}const nXe=gl.memo(iXe);var IA;let Qa=IA=class extends _e{constructor(t){super(t),this.autoCloseMenu=!1,this.iconClass=null,this.items=null,this.label=null,this.open=!1,this.selected=!1,this.selectionEnabled=!1,this.clickFunction=null}castItems(t){return t?t.map(e=>e instanceof IA?e:new IA(e)):null}};c([d()],Qa.prototype,"autoCloseMenu",void 0),c([d()],Qa.prototype,"iconClass",void 0),c([d()],Qa.prototype,"items",void 0),c([st("items")],Qa.prototype,"castItems",null),c([d()],Qa.prototype,"label",void 0),c([d()],Qa.prototype,"open",void 0),c([d()],Qa.prototype,"selected",void 0),c([d()],Qa.prototype,"selectionEnabled",void 0),c([d()],Qa.prototype,"clickFunction",void 0),Qa=IA=c([O("esri.widgets.FeatureTable.Grid.support.ButtonMenuItem")],Qa);const hc=Qa;let Mb=class extends _e{constructor(e){super(e),this.items=null,this.open=!1}castItems(e){return e?e.map(i=>i instanceof hc?i:new hc(i)):null}};c([d()],Mb.prototype,"items",void 0),c([st("items")],Mb.prototype,"castItems",null),c([d()],Mb.prototype,"open",void 0),Mb=c([O("esri.widgets.FeatureTable.Grid.support.ButtonMenuViewModel")],Mb);const rXe=Mb;function Il(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function M0(t){var e=Il(t).Element;return t instanceof e||t instanceof Element}function fl(t){var e=Il(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function A7(t){if(typeof ShadowRoot>"u")return!1;var e=Il(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var a0=Math.max,$O=Math.min,Iw=Math.round;function A6(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Cye(){return!/^((?!chrome|android).)*safari/i.test(A6())}function Tw(t,e,i){e===void 0&&(e=!1),i===void 0&&(i=!1);var n=t.getBoundingClientRect(),r=1,s=1;e&&fl(t)&&(r=t.offsetWidth>0&&Iw(n.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Iw(n.height)/t.offsetHeight||1);var o=M0(t)?Il(t):window,a=o.visualViewport,l=!Cye()&&i,u=(n.left+(l&&a?a.offsetLeft:0))/r,h=(n.top+(l&&a?a.offsetTop:0))/s,p=n.width/r,f=n.height/s;return{width:p,height:f,top:h,right:u+p,bottom:h+f,left:u,x:u,y:h}}function M7(t){var e=Il(t),i=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:i,scrollTop:n}}function sXe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function oXe(t){return t===Il(t)||!fl(t)?M7(t):sXe(t)}function Wu(t){return t?(t.nodeName||"").toLowerCase():null}function Om(t){return((M0(t)?t.ownerDocument:t.document)||window.document).documentElement}function O7(t){return Tw(Om(t)).left+M7(t).scrollLeft}function Lh(t){return Il(t).getComputedStyle(t)}function P7(t){var e=Lh(t),i=e.overflow,n=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+n)}function aXe(t){var e=t.getBoundingClientRect(),i=Iw(e.width)/t.offsetWidth||1,n=Iw(e.height)/t.offsetHeight||1;return i!==1||n!==1}function lXe(t,e,i){i===void 0&&(i=!1);var n=fl(e),r=fl(e)&&aXe(e),s=Om(e),o=Tw(t,r,i),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!i)&&((Wu(e)!=="body"||P7(s))&&(a=oXe(e)),fl(e)?(l=Tw(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=O7(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function R7(t){var e=Tw(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function YR(t){return Wu(t)==="html"?t:t.assignedSlot||t.parentNode||(A7(t)?t.host:null)||Om(t)}function Iye(t){return["html","body","#document"].indexOf(Wu(t))>=0?t.ownerDocument.body:fl(t)&&P7(t)?t:Iye(YR(t))}function FE(t,e){var i;e===void 0&&(e=[]);var n=Iye(t),r=n===((i=t.ownerDocument)==null?void 0:i.body),s=Il(n),o=r?[s].concat(s.visualViewport||[],P7(n)?n:[]):n,a=e.concat(o);return r?a:a.concat(FE(YR(o)))}function cXe(t){return["table","td","th"].indexOf(Wu(t))>=0}function gQ(t){return!fl(t)||Lh(t).position==="fixed"?null:t.offsetParent}function uXe(t){var e=/firefox/i.test(A6()),i=/Trident/i.test(A6());if(i&&fl(t)){var n=Lh(t);if(n.position==="fixed")return null}var r=YR(t);for(A7(r)&&(r=r.host);fl(r)&&["html","body"].indexOf(Wu(r))<0;){var s=Lh(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function l2(t){for(var e=Il(t),i=gQ(t);i&&cXe(i)&&Lh(i).position==="static";)i=gQ(i);return i&&(Wu(i)==="html"||Wu(i)==="body"&&Lh(i).position==="static")?e:i||uXe(t)||e}var Fo="top",wl="bottom",xl="right",No="left",L7="auto",c2=[Fo,wl,xl,No],kw="start",KC="end",dXe="clippingParents",Tye="viewport",_x="popper",hXe="reference",yQ=c2.reduce(function(t,e){return t.concat([e+"-"+kw,e+"-"+KC])},[]),kye=[].concat(c2,[L7]).reduce(function(t,e){return t.concat([e,e+"-"+kw,e+"-"+KC])},[]),pXe="beforeRead",fXe="read",mXe="afterRead",gXe="beforeMain",yXe="main",vXe="afterMain",bXe="beforeWrite",_Xe="write",wXe="afterWrite",xXe=[pXe,fXe,mXe,gXe,yXe,vXe,bXe,_Xe,wXe];function SXe(t){var e=new Map,i=new Set,n=[];t.forEach(function(s){e.set(s.name,s)});function r(s){i.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!i.has(a)){var l=e.get(a);l&&r(l)}}),n.push(s)}return t.forEach(function(s){i.has(s.name)||r(s)}),n}function EXe(t){var e=SXe(t);return xXe.reduce(function(i,n){return i.concat(e.filter(function(r){return r.phase===n}))},[])}function CXe(t){var e;return function(){return e||(e=new Promise(function(i){Promise.resolve().then(function(){e=void 0,i(t())})})),e}}function Ru(t){return t.split("-")[0]}function IXe(t){var e=t.reduce(function(i,n){var r=i[n.name];return i[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,i},{});return Object.keys(e).map(function(i){return e[i]})}function TXe(t,e){var i=Il(t),n=Om(t),r=i.visualViewport,s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var u=Cye();(u||!u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+O7(t),y:l}}function kXe(t){var e,i=Om(t),n=M7(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=a0(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=a0(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-n.scrollLeft+O7(t),l=-n.scrollTop;return Lh(r||i).direction==="rtl"&&(a+=a0(i.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function $ye(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&A7(i)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function M6(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function $Xe(t,e){var i=Tw(t,!1,e==="fixed");return i.top=i.top+t.clientTop,i.left=i.left+t.clientLeft,i.bottom=i.top+t.clientHeight,i.right=i.left+t.clientWidth,i.width=t.clientWidth,i.height=t.clientHeight,i.x=i.left,i.y=i.top,i}function vQ(t,e,i){return e===Tye?M6(TXe(t,i)):M0(e)?$Xe(e,i):M6(kXe(Om(t)))}function AXe(t){var e=FE(YR(t)),i=["absolute","fixed"].indexOf(Lh(t).position)>=0,n=i&&fl(t)?l2(t):t;return M0(n)?e.filter(function(r){return M0(r)&&$ye(r,n)&&Wu(r)!=="body"}):[]}function MXe(t,e,i,n){var r=e==="clippingParents"?AXe(t):[].concat(e),s=[].concat(r,[i]),o=s[0],a=s.reduce(function(l,u){var h=vQ(t,u,n);return l.top=a0(h.top,l.top),l.right=$O(h.right,l.right),l.bottom=$O(h.bottom,l.bottom),l.left=a0(h.left,l.left),l},vQ(t,o,n));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function $w(t){return t.split("-")[1]}function D7(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Aye(t){var e=t.reference,i=t.element,n=t.placement,r=n?Ru(n):null,s=n?$w(n):null,o=e.x+e.width/2-i.width/2,a=e.y+e.height/2-i.height/2,l;switch(r){case Fo:l={x:o,y:e.y-i.height};break;case wl:l={x:o,y:e.y+e.height};break;case xl:l={x:e.x+e.width,y:a};break;case No:l={x:e.x-i.width,y:a};break;default:l={x:e.x,y:e.y}}var u=r?D7(r):null;if(u!=null){var h=u==="y"?"height":"width";switch(s){case kw:l[u]=l[u]-(e[h]/2-i[h]/2);break;case KC:l[u]=l[u]+(e[h]/2-i[h]/2);break}}return l}function Mye(){return{top:0,right:0,bottom:0,left:0}}function Oye(t){return Object.assign({},Mye(),t)}function Pye(t,e){return e.reduce(function(i,n){return i[n]=t,i},{})}function XC(t,e){e===void 0&&(e={});var i=e,n=i.placement,r=n===void 0?t.placement:n,s=i.strategy,o=s===void 0?t.strategy:s,a=i.boundary,l=a===void 0?dXe:a,u=i.rootBoundary,h=u===void 0?Tye:u,p=i.elementContext,f=p===void 0?_x:p,g=i.altBoundary,v=g===void 0?!1:g,b=i.padding,_=b===void 0?0:b,w=Oye(typeof _!="number"?_:Pye(_,c2)),S=f===_x?hXe:_x,C=t.rects.popper,$=t.elements[v?S:f],M=MXe(M0($)?$:$.contextElement||Om(t.elements.popper),l,h,o),P=Tw(t.elements.reference),k=Aye({reference:P,element:C,strategy:"absolute",placement:r}),D=M6(Object.assign({},C,k)),z=f===_x?D:P,B={top:M.top-z.top+w.top,bottom:z.bottom-M.bottom+w.bottom,left:M.left-z.left+w.left,right:z.right-M.right+w.right},j=t.modifiersData.offset;if(f===_x&&j){var K=j[r];Object.keys(B).forEach(function(ie){var te=[xl,wl].indexOf(ie)>=0?1:-1,me=[Fo,wl].indexOf(ie)>=0?"y":"x";B[ie]+=K[me]*te})}return B}var bQ={placement:"bottom",modifiers:[],strategy:"absolute"};function _Q(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function OXe(t){t===void 0&&(t={});var e=t,i=e.defaultModifiers,n=i===void 0?[]:i,r=e.defaultOptions,s=r===void 0?bQ:r;return function(a,l,u){u===void 0&&(u=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},bQ,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],f=!1,g={state:h,setOptions:function(w){var S=typeof w=="function"?w(h.options):w;b(),h.options=Object.assign({},s,h.options,S),h.scrollParents={reference:M0(a)?FE(a):a.contextElement?FE(a.contextElement):[],popper:FE(l)};var C=EXe(IXe([].concat(n,h.options.modifiers)));return h.orderedModifiers=C.filter(function($){return $.enabled}),v(),g.update()},forceUpdate:function(){if(!f){var w=h.elements,S=w.reference,C=w.popper;if(_Q(S,C)){h.rects={reference:lXe(S,l2(C),h.options.strategy==="fixed"),popper:R7(C)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(B){return h.modifiersData[B.name]=Object.assign({},B.data)});for(var $=0;$<h.orderedModifiers.length;$++){if(h.reset===!0){h.reset=!1,$=-1;continue}var M=h.orderedModifiers[$],P=M.fn,k=M.options,D=k===void 0?{}:k,z=M.name;typeof P=="function"&&(h=P({state:h,options:D,name:z,instance:g})||h)}}}},update:CXe(function(){return new Promise(function(_){g.forceUpdate(),_(h)})}),destroy:function(){b(),f=!0}};if(!_Q(a,l))return g;g.setOptions(u).then(function(_){!f&&u.onFirstUpdate&&u.onFirstUpdate(_)});function v(){h.orderedModifiers.forEach(function(_){var w=_.name,S=_.options,C=S===void 0?{}:S,$=_.effect;if(typeof $=="function"){var M=$({state:h,name:w,instance:g,options:C}),P=function(){};p.push(M||P)}})}function b(){p.forEach(function(_){return _()}),p=[]}return g}}var dk={passive:!0};function PXe(t){var e=t.state,i=t.instance,n=t.options,r=n.scroll,s=r===void 0?!0:r,o=n.resize,a=o===void 0?!0:o,l=Il(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(h){h.addEventListener("scroll",i.update,dk)}),a&&l.addEventListener("resize",i.update,dk),function(){s&&u.forEach(function(h){h.removeEventListener("scroll",i.update,dk)}),a&&l.removeEventListener("resize",i.update,dk)}}const RXe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:PXe,data:{}};function LXe(t){var e=t.state,i=t.name;e.modifiersData[i]=Aye({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const DXe={name:"popperOffsets",enabled:!0,phase:"read",fn:LXe,data:{}};var FXe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function NXe(t){var e=t.x,i=t.y,n=window,r=n.devicePixelRatio||1;return{x:Iw(e*r)/r||0,y:Iw(i*r)/r||0}}function wQ(t){var e,i=t.popper,n=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,h=t.roundOffsets,p=t.isFixed,f=o.x,g=f===void 0?0:f,v=o.y,b=v===void 0?0:v,_=typeof h=="function"?h({x:g,y:b}):{x:g,y:b};g=_.x,b=_.y;var w=o.hasOwnProperty("x"),S=o.hasOwnProperty("y"),C=No,$=Fo,M=window;if(u){var P=l2(i),k="clientHeight",D="clientWidth";if(P===Il(i)&&(P=Om(i),Lh(P).position!=="static"&&a==="absolute"&&(k="scrollHeight",D="scrollWidth")),P=P,r===Fo||(r===No||r===xl)&&s===KC){$=wl;var z=p&&P===M&&M.visualViewport?M.visualViewport.height:P[k];b-=z-n.height,b*=l?1:-1}if(r===No||(r===Fo||r===wl)&&s===KC){C=xl;var B=p&&P===M&&M.visualViewport?M.visualViewport.width:P[D];g-=B-n.width,g*=l?1:-1}}var j=Object.assign({position:a},u&&FXe),K=h===!0?NXe({x:g,y:b}):{x:g,y:b};if(g=K.x,b=K.y,l){var ie;return Object.assign({},j,(ie={},ie[$]=S?"0":"",ie[C]=w?"0":"",ie.transform=(M.devicePixelRatio||1)<=1?"translate("+g+"px, "+b+"px)":"translate3d("+g+"px, "+b+"px, 0)",ie))}return Object.assign({},j,(e={},e[$]=S?b+"px":"",e[C]=w?g+"px":"",e.transform="",e))}function zXe(t){var e=t.state,i=t.options,n=i.gpuAcceleration,r=n===void 0?!0:n,s=i.adaptive,o=s===void 0?!0:s,a=i.roundOffsets,l=a===void 0?!0:a,u={placement:Ru(e.placement),variation:$w(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,wQ(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,wQ(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const jXe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:zXe,data:{}};function VXe(t){var e=t.state;Object.keys(e.elements).forEach(function(i){var n=e.styles[i]||{},r=e.attributes[i]||{},s=e.elements[i];!fl(s)||!Wu(s)||(Object.assign(s.style,n),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function UXe(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach(function(n){var r=e.elements[n],s=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:i[n]),a=o.reduce(function(l,u){return l[u]="",l},{});!fl(r)||!Wu(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}const BXe={name:"applyStyles",enabled:!0,phase:"write",fn:VXe,effect:UXe,requires:["computeStyles"]};function HXe(t,e,i){var n=Ru(t),r=[No,Fo].indexOf(n)>=0?-1:1,s=typeof i=="function"?i(Object.assign({},e,{placement:t})):i,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[No,xl].indexOf(n)>=0?{x:a,y:o}:{x:o,y:a}}function GXe(t){var e=t.state,i=t.options,n=t.name,r=i.offset,s=r===void 0?[0,0]:r,o=kye.reduce(function(h,p){return h[p]=HXe(p,e.rects,s),h},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[n]=o}const qXe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:GXe};var WXe={left:"right",right:"left",bottom:"top",top:"bottom"};function TA(t){return t.replace(/left|right|bottom|top/g,function(e){return WXe[e]})}var JXe={start:"end",end:"start"};function xQ(t){return t.replace(/start|end/g,function(e){return JXe[e]})}function YXe(t,e){e===void 0&&(e={});var i=e,n=i.placement,r=i.boundary,s=i.rootBoundary,o=i.padding,a=i.flipVariations,l=i.allowedAutoPlacements,u=l===void 0?kye:l,h=$w(n),p=h?a?yQ:yQ.filter(function(v){return $w(v)===h}):c2,f=p.filter(function(v){return u.indexOf(v)>=0});f.length===0&&(f=p);var g=f.reduce(function(v,b){return v[b]=XC(t,{placement:b,boundary:r,rootBoundary:s,padding:o})[Ru(b)],v},{});return Object.keys(g).sort(function(v,b){return g[v]-g[b]})}function ZXe(t){if(Ru(t)===L7)return[];var e=TA(t);return[xQ(t),e,xQ(e)]}function KXe(t){var e=t.state,i=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var r=i.mainAxis,s=r===void 0?!0:r,o=i.altAxis,a=o===void 0?!0:o,l=i.fallbackPlacements,u=i.padding,h=i.boundary,p=i.rootBoundary,f=i.altBoundary,g=i.flipVariations,v=g===void 0?!0:g,b=i.allowedAutoPlacements,_=e.options.placement,w=Ru(_),S=w===_,C=l||(S||!v?[TA(_)]:ZXe(_)),$=[_].concat(C).reduce(function(xn,fr){return xn.concat(Ru(fr)===L7?YXe(e,{placement:fr,boundary:h,rootBoundary:p,padding:u,flipVariations:v,allowedAutoPlacements:b}):fr)},[]),M=e.rects.reference,P=e.rects.popper,k=new Map,D=!0,z=$[0],B=0;B<$.length;B++){var j=$[B],K=Ru(j),ie=$w(j)===kw,te=[Fo,wl].indexOf(K)>=0,me=te?"width":"height",Ie=XC(e,{placement:j,boundary:h,rootBoundary:p,altBoundary:f,padding:u}),Me=te?ie?xl:No:ie?wl:Fo;M[me]>P[me]&&(Me=TA(Me));var oe=TA(Me),ge=[];if(s&&ge.push(Ie[K]<=0),a&&ge.push(Ie[Me]<=0,Ie[oe]<=0),ge.every(function(xn){return xn})){z=j,D=!1;break}k.set(j,ge)}if(D)for(var he=v?3:1,et=function(fr){var Ar=$.find(function(Qs){var Tl=k.get(Qs);if(Tl)return Tl.slice(0,fr).every(function(Fm){return Fm})});if(Ar)return z=Ar,"break"},wt=he;wt>0;wt--){var pr=et(wt);if(pr==="break")break}e.placement!==z&&(e.modifiersData[n]._skip=!0,e.placement=z,e.reset=!0)}}const XXe={name:"flip",enabled:!0,phase:"main",fn:KXe,requiresIfExists:["offset"],data:{_skip:!1}};function QXe(t){return t==="x"?"y":"x"}function NE(t,e,i){return a0(t,$O(e,i))}function eQe(t,e,i){var n=NE(t,e,i);return n>i?i:n}function tQe(t){var e=t.state,i=t.options,n=t.name,r=i.mainAxis,s=r===void 0?!0:r,o=i.altAxis,a=o===void 0?!1:o,l=i.boundary,u=i.rootBoundary,h=i.altBoundary,p=i.padding,f=i.tether,g=f===void 0?!0:f,v=i.tetherOffset,b=v===void 0?0:v,_=XC(e,{boundary:l,rootBoundary:u,padding:p,altBoundary:h}),w=Ru(e.placement),S=$w(e.placement),C=!S,$=D7(w),M=QXe($),P=e.modifiersData.popperOffsets,k=e.rects.reference,D=e.rects.popper,z=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,B=typeof z=="number"?{mainAxis:z,altAxis:z}:Object.assign({mainAxis:0,altAxis:0},z),j=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,K={x:0,y:0};if(P){if(s){var ie,te=$==="y"?Fo:No,me=$==="y"?wl:xl,Ie=$==="y"?"height":"width",Me=P[$],oe=Me+_[te],ge=Me-_[me],he=g?-D[Ie]/2:0,et=S===kw?k[Ie]:D[Ie],wt=S===kw?-D[Ie]:-k[Ie],pr=e.elements.arrow,xn=g&&pr?R7(pr):{width:0,height:0},fr=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Mye(),Ar=fr[te],Qs=fr[me],Tl=NE(0,k[Ie],xn[Ie]),Fm=C?k[Ie]/2-he-Tl-Ar-B.mainAxis:et-Tl-Ar-B.mainAxis,E1=C?-k[Ie]/2+he+Tl+Qs+B.mainAxis:wt+Tl+Qs+B.mainAxis,Nm=e.elements.arrow&&l2(e.elements.arrow),C1=Nm?$==="y"?Nm.clientTop||0:Nm.clientLeft||0:0,W0=(ie=j==null?void 0:j[$])!=null?ie:0,I1=Me+Fm-W0-C1,T1=Me+E1-W0,J0=NE(g?$O(oe,I1):oe,Me,g?a0(ge,T1):ge);P[$]=J0,K[$]=J0-Me}if(a){var Y0,k1=$==="x"?Fo:No,$1=$==="x"?wl:xl,kl=P[M],Wh=M==="y"?"height":"width",Z0=kl+_[k1],K0=kl-_[$1],zm=[Fo,No].indexOf(w)!==-1,jm=(Y0=j==null?void 0:j[M])!=null?Y0:0,Vm=zm?Z0:kl-k[Wh]-D[Wh]-jm+B.altAxis,Ho=zm?kl+k[Wh]+D[Wh]-jm-B.altAxis:K0,X0=g&&zm?eQe(Vm,kl,Ho):NE(g?Vm:Z0,kl,g?Ho:K0);P[M]=X0,K[M]=X0-kl}e.modifiersData[n]=K}}const iQe={name:"preventOverflow",enabled:!0,phase:"main",fn:tQe,requiresIfExists:["offset"]};var nQe=function(e,i){return e=typeof e=="function"?e(Object.assign({},i.rects,{placement:i.placement})):e,Oye(typeof e!="number"?e:Pye(e,c2))};function rQe(t){var e,i=t.state,n=t.name,r=t.options,s=i.elements.arrow,o=i.modifiersData.popperOffsets,a=Ru(i.placement),l=D7(a),u=[No,xl].indexOf(a)>=0,h=u?"height":"width";if(!(!s||!o)){var p=nQe(r.padding,i),f=R7(s),g=l==="y"?Fo:No,v=l==="y"?wl:xl,b=i.rects.reference[h]+i.rects.reference[l]-o[l]-i.rects.popper[h],_=o[l]-i.rects.reference[l],w=l2(s),S=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,C=b/2-_/2,$=p[g],M=S-f[h]-p[v],P=S/2-f[h]/2+C,k=NE($,P,M),D=l;i.modifiersData[n]=(e={},e[D]=k,e.centerOffset=k-P,e)}}function sQe(t){var e=t.state,i=t.options,n=i.element,r=n===void 0?"[data-popper-arrow]":n;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||$ye(e.elements.popper,r)&&(e.elements.arrow=r))}const oQe={name:"arrow",enabled:!0,phase:"main",fn:rQe,effect:sQe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function SQ(t,e,i){return i===void 0&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function EQ(t){return[Fo,xl,wl,No].some(function(e){return t[e]>=0})}function aQe(t){var e=t.state,i=t.name,n=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=XC(e,{elementContext:"reference"}),a=XC(e,{altBoundary:!0}),l=SQ(o,n),u=SQ(a,r,s),h=EQ(l),p=EQ(u);e.modifiersData[i]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const lQe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:aQe};var cQe=[RXe,DXe,jXe,BXe,qXe,XXe,iQe,oQe,lQe],uQe=OXe({defaultModifiers:cQe});const dQe=["bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end","top","top-start","top-end"],CQ={base:"esri-popover",open:"esri-popover--open"},hQe={position:"fixed","z-index":"1000"};let _u=class extends qt{constructor(e,i){super(e,i),this._popper=null,this._contentNode=null,this._renderAttached=!1,this._rootNode=null,this.anchorElement=null,this.offset=[0,0],this.open=!1,this.renderContentFunction=null,this._afterRootCreate=n=>{this._rootNode=n},this._afterContentCreate=n=>{this._contentNode=n},this._updatePosition=()=>{A(this._popper)&&this._popper.update()}}initialize(){this.when(()=>{this.destroyed||(this._projector.append(document.body,this.render),this._renderAttached=!0)}),this.addHandles([X(()=>[this.open,this.anchorElement],()=>this._buildPopper(),ut),X(()=>[this.placement,this.offset],()=>this._setPopperOptions(),ut)])}destroy(){this.owner=null,this.anchorElement=null,this.renderContentFunction=null,this._renderAttached&&(this._projector.detach(this.render),this._renderAttached=!1),A(this._rootNode)&&(ILe(this._rootNode),this._rootNode=null),this._contentNode=null,A(this._popper)&&(this._popper.destroy(),this._popper=null)}set container(e){}set owner(e){this._set("owner",e)}get placement(){return"top"}set placement(e){dQe.includes(e)?this._override("placement",e):this._clearOverride("placement")}get test(){return{rootNode:this._rootNode}}render(){var r;const{open:e,owner:i,renderContentFunction:n}=this;return L("div",{afterCreate:this._afterRootCreate,class:this.classes(CQ.base,e?CQ.open:null),styles:hQe,lang:sr()},L("div",{dir:C3e((r=this.owner)==null?void 0:r.container),afterCreate:this._afterContentCreate,afterUpdate:this._updatePosition},e&&(n==null?void 0:n.call(i))))}_buildPopper(){A(this._popper)&&(this._popper.destroy(),this._popper=null);const e=this._contentNode;if(U(e)||!this.open||!this.renderContentFunction)return;const i=this._getAnchor();i&&(this._popper=uQe(i,e),this._setPopperOptions())}_setPopperOptions(){const{placement:e,offset:i,_popper:n}=this;U(n)||(n.setOptions({placement:e,modifiers:[{name:"offset",options:{offset:i}}]}),n.forceUpdate())}_getAnchor(){const{anchorElement:e}=this;return eR(typeof e=="function"?e():e)}};c([d()],_u.prototype,"anchorElement",void 0),c([d()],_u.prototype,"container",null),c([d()],_u.prototype,"offset",void 0),c([d()],_u.prototype,"open",void 0),c([d()],_u.prototype,"owner",null),c([d()],_u.prototype,"placement",null),c([d()],_u.prototype,"renderContentFunction",void 0),_u=c([O("esri.widgets.support.Popover")],_u);const Rye=_u,Ps="esri-button-menu",os={base:Ps,content:`${Ps}__content`,contentWrapper:`${Ps}__content-wrapper`,itemWrapper:`${Ps}__item-wrapper`,label:`${Ps}__label`,icon:`${Ps}__icon`,item:`${Ps}__item`,itemLabel:`${Ps}__item-label`,itemLabelContent:`${Ps}__item-label-content`,selectableMenuItem:`${Ps}__item--selectable`,selectedMenuItem:`${Ps}__item--selected`,checkbox:`${Ps}__checkbox`,embeddedContentWrapper:`${Ps}__embedded-content-wrapper`,button:`${Ps}__button`,buttonSelected:`${Ps}__button--selected`,defaultIconClass:"esri-icon-menu",widget:"esri-widget"};let Kp=class extends La(qt){constructor(e,i){super(e,i),this._menuContentNode=null,this._popover=null,this._rootNode=null,this.disabled=!1,this.iconClass="",this.viewModel=new rXe,this._handleOutsideClick=this._handleOutsideClick.bind(this)}postInitialize(){this._popover=new Rye({owner:this,open:!!this.open,placement:$o(this.container)?"bottom-start":"bottom-end",renderContentFunction:this.renderMenuContent,anchorElement:this._rootNode}),this.handles.add(X(()=>this.open,e=>{var i;return(i=this._popover)==null?void 0:i.set("open",e)})),document.addEventListener("click",this._handleOutsideClick)}destroy(){var e;(e=this._popover)==null||e.destroy(),this._popover=null,document.removeEventListener("click",this._handleOutsideClick)}_handleOutsideClick(e){var n,r;if(!this.open||!this._rootNode||!this._menuContentNode)return;const i=e.target;(n=this._menuContentNode)!=null&&n.contains(i)||(r=this._rootNode)!=null&&r.contains(i)||(this.open=!1)}get items(){return this.viewModel.items}set items(e){this.viewModel.items=e}get open(){return this.viewModel.open}set open(e){this.viewModel.open=e}render(){return L("div",{afterCreate:this._afterRootNodeCreate,bind:this,"data-node-ref":"_rootNode",class:this.classes(os.base,os.widget),key:"menu"},this.renderMenuButton())}renderMenuButton(){const{iconClass:e,id:i,label:n,open:r}=this,s=this.classes(os.button,e??os.defaultIconClass,r?os.buttonSelected:null);return L("button",{"aria-pressed":r.toString(),"aria-controls":`${i}-menu`,"aria-expanded":r.toString(),"aria-haspopup":"true","aria-label":n,bind:this,class:s,disabled:this.disabled,id:`${i}-button`,title:n??"",selected:r,onclick:this._toggleOpen,tabindex:this.disabled?-1:0,type:"button"})}renderMenuContent(){var n;const{id:e,open:i}=this;return L("div",{afterCreate:this._afterMenuContentNodeCreate,bind:this,class:os.content,"data-node-ref":"_menuContentNode",key:"esri-button-menu-content",hidden:!i},L("ul",{"aria-labelledby":`${e}-button`,bind:this,class:os.itemWrapper,id:`${e}-menu`,role:"menu"},((n=this.items)==null?void 0:n.length)&&this.renderItems()))}renderItems(){var e;return(e=this.items)==null?void 0:e.map((i,n)=>this.renderItem(i,n))}renderItem(e,i,n){var a;const r=A(n)?`${this.id}-menu-item-${i}-${n}`:`${this.id}-menu-item-${i}`,s=`${r}-label`,o=this.classes(os.item,e.selectionEnabled?os.selectableMenuItem:null,e.selectionEnabled&&e.selected?os.selectedMenuItem:null);return L("li",{afterCreate:this._afterMenuItemCreate,bind:this,class:o,"data-item-index":i,"data-item-subIndex":n,for:r,key:r,onkeydown:l=>this._handleMenuItemKeydown(l,e),onclick:l=>this._handleMenuItemInteraction(l,e),role:"menuitem",tabindex:this.disabled?-1:0},L("input",{disabled:!0,checked:e.selected,class:os.checkbox,id:r,name:r,tabindex:"-1",type:"checkbox"}),L("label",{bind:this,class:this.classes(os.button,os.itemLabel),for:r,id:s},L("span",{class:this.classes(os.icon,e.iconClass),"aria-hidden":"true"}),L("span",{class:os.itemLabelContent},C0.sanitize(e.label))),L("ul",{"aria-labelledby":s,class:os.embeddedContentWrapper,id:`${this.id}-submenu`,role:"menu"},(a=e==null?void 0:e.items)==null?void 0:a.map((l,u)=>this.renderItem(l,i,u))))}_afterRootNodeCreate(e){var i;this._rootNode=e,(i=this._popover)==null||i.set("anchorElement",()=>e)}_handleMenuItemInteraction(e,i){i.selected=!i.selected,i.open=!(!i.selected||!i.items),i.autoCloseMenu&&this.set("open",!1),i.clickFunction&&i.clickFunction({event:e,item:i}),e.stopPropagation()}_handleMenuItemKeydown(e,i){const n=To(e);Vy(n)&&this._handleMenuItemInteraction(e,i),n==="Escape"&&(this.open=!1,e.preventDefault(),e.stopPropagation())}_afterMenuContentNodeCreate(e){this._menuContentNode=e,e.focus()}_toggleOpen(){this.open=!this.open}_afterMenuItemCreate(e){e["data-item-index"]===0&&e.focus()}};c([d()],Kp.prototype,"disabled",void 0),c([d()],Kp.prototype,"iconClass",void 0),c([d()],Kp.prototype,"items",null),c([d()],Kp.prototype,"open",null),c([d()],Kp.prototype,"viewModel",void 0),Kp=c([O("esri.widgets.FeatureTable.Grid.support.ButtonMenu")],Kp);const Lye=Kp,hk="esri-column",sg={sortAscIcon:"esri-icon-arrow-up",sortDescIcon:"esri-icon-arrow-down",menuContainer:`${hk}__menu-container`,menuIcon:"esri-icon-handle-horizontal",sorter:`${hk}__sorter`,headerContent:`${hk}__header-content`,headerLabel:`${hk}__header-label`},IQ={keyboardSort1:"Enter",keyboardSort2:"Spacebar"};let zt=class extends La($r.EventedAccessor){constructor(e){super(e),this._menuContainer=document.createElement("div"),this.activeRowIndex=null,this.autoWidth=!1,this.cellValueFormatFunction=({value:i})=>C0.sanitize(i),this.flexGrow=1,this.footerRenderFunction=null,this.frozen=!1,this.grid=null,this.header=null,this.headerRenderFunction=i=>{const{root:n}=i;if(this.removeCellContent(n),n.classList.add(sg.headerContent),this.sortable)this.headerSorterRenderFunction(i);else{const r=document.createElement("div");r.classList.add(sg.headerLabel),r.textContent=this.label,n.appendChild(r)}this.headerMenuEnabled&&this.headerMenuRenderFunction(i)},this.headerMenuRenderFunction=({root:i})=>{var n,r;(r=(n=this.menu)==null?void 0:n.items)!=null&&r.length&&i.appendChild(this._menuContainer)},this.headerSorterRenderFunction=({root:i})=>{var a;const{label:n,sortElement:r}=this;if(!r)return void(i.textContent=n);r.textContent!==n&&r.setAttribute("textContent",n),i.appendChild(r);const s=(a=this.grid)==null?void 0:a.getSlotElementByName(i.slot),o=s==null?void 0:s.parentElement;o&&!o.onkeydown&&(o.onkeydown=({key:l})=>{l!==IQ.keyboardSort1&&l!==IQ.keyboardSort2||r.click()})},this.hidden=!1,this.headerMenuEnabled=!0,this.initialSortPriority=null,this.menu=null,this.menuConfig=null,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.path=null,this.renderFunction=({root:i,column:n,rowData:r})=>{const s=this.getCellValue(n,r),o=this.cellValueFormatFunction({column:n,rowData:r,value:s});i.innerHTML!==o&&(i.innerHTML=o)},this.resizable=!0,this.sortable=!0,this.textAlign="start",this.width=200}initialize(){const{messages:e,path:i}=this;this._set("sortElement",this.createSortElement()),this.sortElement.setAttribute("path",i??""),this._menuContainer.classList.add(sg.menuContainer),this.menu=new Lye({label:e==null?void 0:e.options,iconClass:sg.menuIcon,...this.menuConfig}),this.menu.container=this._menuContainer,this.menu.set("items",this.getMenuItems()),this.handles.add(X(()=>this.hidden,()=>{var n;return(n=this.menu)==null?void 0:n.set("open",!1)}),X(()=>this.path,n=>{this.sortElement&&this.sortElement.path!==n&&this.sortElement.setAttribute("path",n??"")}))}destroy(){var e;(e=this.menu)==null||e.destroy()}set direction(e){this.sortable&&(this.sortElement&&(e?this.sortElement.direction!==e&&this.sortElement.setAttribute("direction",e):this.sortElement.removeAttribute("direction")),this._set("direction",e))}get direction(){return this._get("direction")||null}get label(){return C0.sanitize(this.header??this.path??"")}getMenuItems(){const{menuConfig:e,sortable:i}=this,n=e==null?void 0:e.items,r=this.getSortMenuItems(),s=[];return i&&s.push(...r),n!=null&&n.length&&s.push(...n),s.length?s:null}getSortMenuItems(){const{messages:e}=this;return[{selected:this.direction==="asc",iconClass:sg.sortAscIcon,label:e==null?void 0:e.sortAsc,autoCloseMenu:!0,clickFunction:()=>this.set("direction",this.direction!=="asc"?"asc":null)},{selected:this.direction==="desc",iconClass:sg.sortDescIcon,label:e==null?void 0:e.sortDesc,autoCloseMenu:!0,clickFunction:()=>this.set("direction",this.direction!=="desc"?"desc":null)}]}getCellValue(e,i){return(i==null?void 0:i.item[e==null?void 0:e.path])??""}createSortElement(){const{direction:e,label:i,path:n,initialSortPriority:r}=this,s=document.createElement("vaadin-grid-sorter");return s.classList.add(sg.sorter),s.setAttribute("path",n??""),s.setAttribute("title",i),s.textContent=i,e&&s.setAttribute("direction",e),A(r)&&(s._initialOrder=r),s.addEventListener("direction-changed",()=>{this.direction!==s.direction&&this._set("direction",s.direction)}),s}removeCellContent(e){if(e)for(;e.firstChild;)try{e.removeChild(e.firstChild)}catch{}}};c([d()],zt.prototype,"activeRowIndex",void 0),c([d()],zt.prototype,"autoWidth",void 0),c([d()],zt.prototype,"cellValueFormatFunction",void 0),c([d()],zt.prototype,"direction",null),c([d()],zt.prototype,"flexGrow",void 0),c([d()],zt.prototype,"footerRenderFunction",void 0),c([d()],zt.prototype,"frozen",void 0),c([d()],zt.prototype,"grid",void 0),c([d()],zt.prototype,"header",void 0),c([d()],zt.prototype,"headerRenderFunction",void 0),c([d()],zt.prototype,"headerMenuRenderFunction",void 0),c([d()],zt.prototype,"headerSorterRenderFunction",void 0),c([d()],zt.prototype,"hidden",void 0),c([d()],zt.prototype,"headerMenuEnabled",void 0),c([d({constructOnly:!0})],zt.prototype,"initialSortPriority",void 0),c([d({readOnly:!0})],zt.prototype,"label",null),c([d()],zt.prototype,"menu",void 0),c([d()],zt.prototype,"menuConfig",void 0),c([d()],zt.prototype,"messages",void 0),c([d()],zt.prototype,"messagesCommon",void 0),c([d()],zt.prototype,"messagesURIUtils",void 0),c([d()],zt.prototype,"path",void 0),c([d()],zt.prototype,"renderFunction",void 0),c([d()],zt.prototype,"resizable",void 0),c([d()],zt.prototype,"sortable",void 0),c([d({readOnly:!0})],zt.prototype,"sortElement",void 0),c([d()],zt.prototype,"textAlign",void 0),c([d()],zt.prototype,"width",void 0),zt=c([O("esri.widgets.FeatureTable.Grid.Column")],zt);const ZR=zt,pQe={attachmentsColumn:"esri-feature-table__column--attachments"};let Xp=class extends ZR{constructor(e){super(e),this.header="",this.path="EsriFeatureTableAttachmentsColumn",this.renderFunction=({root:i,rowData:n})=>{const r=this._countFromItem(n.item).toString();i.innerHTML=`<div class="${pQe.attachmentsColumn}">${r}</div>`},this.sortable=!1,this.textAlign="center"}_countFromItem(e){return e.attachments&&e.attachments.length||0}};c([d({constructOnly:!0})],Xp.prototype,"header",void 0),c([d({readOnly:!0})],Xp.prototype,"path",void 0),c([d()],Xp.prototype,"renderFunction",void 0),c([d({readOnly:!0})],Xp.prototype,"sortable",void 0),c([d({readOnly:!0})],Xp.prototype,"textAlign",void 0),Xp=c([O("esri.widgets.FeatureTable.AttachmentsColumn")],Xp);const fQe=Xp,TQ=(t,e)=>{var i;return A(t)&&((i=t.input)==null?void 0:i.type)===e},kQ={typeFieldName:null,types:[]},mQe=t=>{var e,i;return t?t.type==="subtype-sublayer"?{typeFieldName:(e=t.parent)==null?void 0:e.subtypeField,types:(i=t.parent)==null?void 0:i.subtypes}:"types"in t&&t.types?{typeFieldName:t.typeIdField,types:t.types.map(({id:n,name:r,domains:s})=>({code:n,name:r,domains:s}))}:kQ:kQ};var qd,AO;(function(t){t.Text="text",t.Number="number",t.Date="date",t.Unsupported="unsupported"})(qd||(qd={})),function(t){t.TOO_SHORT="length-validation-error::too-short"}(AO||(AO={}));const $Q={type:"number"},AQ={type:"number",intlOptions:{notation:"scientific"}},MQ={type:"date",intlOptions:{day:"2-digit",month:"2-digit",year:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}},gQe="__internal-type-based-coded-value-domain__";function OQ(t){return t>=1e7||t<=-1e7}let at=class extends La(_e){constructor(e){super(e),this._storedValue=null,this.arcadeEditType="NA",this.editableExpressionExecutor=null,this.id=E_().toString(),this.requiredExpressionExecutor=null,this.valueExpressionExecutor=null,this.visibilityExpressionExecutor=null,this.feature=null,this.field=null,this.fieldElement=null,this.layer=null,this.error=null,this.group=null,this.messages=null}get _configAllowsEdits(){var r,s,o;const{fieldElement:e,layer:i,name:n}=this;return A(e)?e.editableExpression?this.evaluatedEditableExpression:e.editable!==!1:i.userHasUpdateItemPrivileges?!0:((o="popupTemplate"in i?(s=(r=i==null?void 0:i.popupTemplate)==null?void 0:r.fieldInfos)==null?void 0:s.find(({fieldName:a})=>a===n):null)==null?void 0:o.isEditable)??!0}get _layerFieldAllowsEdits(){const{field:e,layer:i}=this;if(!i||!e)return!1;const n=Pf(i),r=n==null?void 0:n.operations.supportsEditing,s=e.editable,o=yQe(n,this.arcadeEditType);return!!(r&&s&&o)}get isUsingValueExpression(){return this._shouldUseValueExpression()}get evaluatedEditableExpression(){const{editableExpressionExecutor:e}=this;return A(e)?!!e.lastEvaluatedValue:null}get evaluatedRequiredExpression(){const{requiredExpressionExecutor:e}=this;return A(e)?!!e.lastEvaluatedValue:null}get evaluatedVisibilityExpression(){const{visibilityExpressionExecutor:e}=this;return A(e)?!!e.lastEvaluatedValue:null}get evaluatedValueExpression(){const{valueExpressionExecutor:e}=this;return A(e)?e.lastEvaluatedValue:null}set initialFeature(e){this._set("initialFeature",e),this.notifyChange("valid")}get description(){var e;return(e=this.fieldElement)==null?void 0:e.description}get domain(){const{layer:e}=this,{typeFieldName:i,types:n}=mQe(e);if(i===this.name&&U(this.field.domain))return new gR({name:gQe,codedValues:n.map(({code:a,name:l})=>new s_({code:a,name:l}))});const{feature:r}=this,s=e.getFieldDomain(this.name,{feature:r}),o=tw(this.fieldElement,"domain");return A(o)&&this._isDomainCompatible(o)?o:s}get editable(){return!!this._layerFieldAllowsEdits&&(this.evaluatedEditableExpression??this._configAllowsEdits)}get inputType(){var e,i;return(i=(e=this.fieldElement)==null?void 0:e.input)==null?void 0:i.type}get errorMessage(){return this._toErrorMessage()}get hint(){var e;return(e=this.fieldElement)==null?void 0:e.hint}get includeTime(){var n;const{fieldElement:e}=this,i=A(e)&&((n=e.input)==null?void 0:n.type)==="datetime-picker"?e.input.includeTime:void 0;return i===void 0||i}get label(){return A(this.fieldElement)&&this.fieldElement.label||this.field.alias||this.field.name}get maxLength(){if(this.type===qd.Date)return-1;const{field:i,fieldElement:n}=this,r=i==null?void 0:i.length,s=PQ(n)?n.input.maxLength:NaN;return!isNaN(s)&&s>=-1&&(r===-1||s<=r)?s:r}get minLength(){if(this.type===qd.Date)return-1;const{field:i,fieldElement:n}=this,r=i==null?void 0:i.length,s=PQ(n)?n.input.minLength:NaN;return!isNaN(s)&&s>=-1&&(r===-1||s<=r)?s:-1}get name(){var e;return(e=this.field)==null?void 0:e.name}get required(){const{editable:e,evaluatedRequiredExpression:i,field:n,visible:r}=this;return!!e&&((n==null?void 0:n.nullable)===!1||!(!r||!A(i))&&i)}set required(e){this._overrideIfSome("required",e)}get submittable(){const{field:e,required:i,valid:n,value:r}=this;return(!i||!U(r))&&(!!n||this.initialFeature.getAttribute(e.name)===r)}get type(){const{field:e}=this;return _c(e)?qd.Number:wC(e)?qd.Text:$W(e)?qd.Date:qd.Unsupported}get updating(){const{editableExpressionExecutor:e,valueExpressionExecutor:i}=this;return A(i)&&i.updating||A(e)&&e.updating}get valid(){const e=this.editable?this._validate():null;return this._set("error",e),e===null}get value(){if(this._shouldUseValueExpression()){const e=this.evaluatedValueExpression;if(this.type===qd.Date){if(e instanceof Date)return e.getTime();if(typeof e!="number")return parseInt(e,10)}return A(e)&&typeof e=="object"?e.toString():e}return this.get("_storedValue")}set value(e){this.notifyChange("evaluatedVisibilityExpression"),this.set("_storedValue",e)}get visible(){return!this._isEditorField()&&(A(this.evaluatedVisibilityExpression)?this.evaluatedVisibilityExpression:!!A(this.fieldElement)||this._isVisibleByDefault())}_isDomainCompatible(e){const{field:i}=this;if((e==null?void 0:e.type)==="coded-value"){const n=typeof e.codedValues[0].code;if(n==="string"&&wC(i)||n==="number"&&_c(i))return!0}return!!((e==null?void 0:e.type)==="range"&&_c(i)||$W(i))}_validate(){const{domain:e,field:i,initialFeature:n,minLength:r,required:s,type:o,valid:a,value:l}=this,u=s&&l===null,h=a!==void 0;return!u&&n.getAttribute(i.name)===l&&h?null:u?aw.INVALID_TYPE:o==="text"&&r>-1&&typeof l=="string"&&l.length<r?AO.TOO_SHORT:e?l!==null||s?cae(e,l):null:v$e(i,l)}_isVisibleByDefault(){var i,n;const e=(i=this.field)==null?void 0:i.type;return((n=this.field)==null?void 0:n.visible)&&e!=="oid"&&e!=="global-id"&&!this._isGeometryField()}_isEditorField(){return l$e(this.layer).includes(this.name)}_isGeometryField(){return c$e(this.layer).includes(this.name)}_shouldUseValueExpression(){return this._layerFieldAllowsEdits&&!this._configAllowsEdits&&A(this.valueExpressionExecutor)}_toErrorMessage(){const{domain:e,field:i,messages:n,minLength:r,value:s,required:o,type:a}=this,l=this.error;if(o&&s===null)return n.validationErrors.cannotBeNull;if(l===im.VALUE_OUT_OF_RANGE||l===xC.OUT_OF_RANGE){const u=uae(e)||_$e(i);return Vr(n.validationErrors.outsideRange,u,{format:{max:a==="date"?MQ:OQ(u.max)?AQ:$Q,min:a==="date"?MQ:OQ(u.min)?AQ:$Q}})}return l===im.INVALID_CODED_VALUE?n.validationErrors.invalidCodedValue:l===aw.INVALID_TYPE?n.validationErrors.invalidType:l===AO.TOO_SHORT?Vr(n.validationErrors.tooShort,{min:r}):null}};c([d()],at.prototype,"_storedValue",void 0),c([d()],at.prototype,"_configAllowsEdits",null),c([d()],at.prototype,"_layerFieldAllowsEdits",null),c([d()],at.prototype,"arcadeEditType",void 0),c([d()],at.prototype,"editableExpressionExecutor",void 0),c([d()],at.prototype,"requiredExpressionExecutor",void 0),c([d()],at.prototype,"valueExpressionExecutor",void 0),c([d()],at.prototype,"isUsingValueExpression",null),c([d()],at.prototype,"visibilityExpressionExecutor",void 0),c([d()],at.prototype,"evaluatedEditableExpression",null),c([d()],at.prototype,"evaluatedRequiredExpression",null),c([d()],at.prototype,"evaluatedVisibilityExpression",null),c([d()],at.prototype,"evaluatedValueExpression",null),c([d()],at.prototype,"feature",void 0),c([d()],at.prototype,"field",void 0),c([d({constructOnly:!0})],at.prototype,"fieldElement",void 0),c([d()],at.prototype,"initialFeature",null),c([d()],at.prototype,"layer",void 0),c([d({readOnly:!0})],at.prototype,"description",null),c([d()],at.prototype,"domain",null),c([d()],at.prototype,"editable",null),c([d({readOnly:!0})],at.prototype,"inputType",null),c([d({readOnly:!0})],at.prototype,"error",void 0),c([d({dependsOn:["error","messages","value"]})],at.prototype,"errorMessage",null),c([d()],at.prototype,"group",void 0),c([d({readOnly:!0})],at.prototype,"hint",null),c([d()],at.prototype,"includeTime",null),c([d()],at.prototype,"label",null),c([d()],at.prototype,"maxLength",null),c([d()],at.prototype,"minLength",null),c([d()],at.prototype,"messages",void 0),c([d({readOnly:!0})],at.prototype,"name",null),c([d()],at.prototype,"required",null),c([d()],at.prototype,"submittable",null),c([d()],at.prototype,"type",null),c([d()],at.prototype,"updating",null),c([d()],at.prototype,"valid",null),c([d({value:null})],at.prototype,"value",null),c([d()],at.prototype,"visible",null),at=c([O("esri.widgets.FeatureForm.InputField")],at);const yQe=(t,e)=>{if(!t)return!0;const{operations:i}=t;switch(e){case"INSERT":return i.supportsAdd;case"UPDATE":case"DELETE":return i.supportsUpdate;default:return!0}},PQ=t=>A(t)&&(TQ(t,"text-box")||TQ(t,"text-area")),vQe=at,RQ="esri-editor-column__cell-input",LQ={input:RQ,inputContainer:`${RQ}--container`},DQ={showInput:"Enter",hideInput:"Escape"};let gs=class extends ZR{constructor(e){super(e),this.activeEditInfo=null,this.cellValueValidatorFunction=({oldValue:i,value:n})=>i!==n,this.editable=!1,this.inputRenderFunction=({root:i,column:n,rowData:r})=>{var l,u;if((l=this.activeEditInfo)!=null&&l.updating||!this.editable)return;const s=this.getCellValue(n,r),o=this.createInputElement({root:i,column:n,rowData:r,value:s});this._set("activeEditInfo",{column:n,input:o,root:i,rowData:r,updating:!0,oldValue:s});const a=this.createInputContainer();a.appendChild(o),this.removeCellContent(i),i.appendChild(a),o.focus(),o instanceof HTMLInputElement&&o.select(),(u=this.grid)==null||u.notifyResize()},this.loadingMessage="",this.inputType="text",this.maxLength=null,this.parseInputValueFunction=({input:i})=>i.value,this.renderFunction=i=>{var f;const{root:n,column:r,rowData:s}=i,{activeEditInfo:o}=this;if(o&&o.updating)return;const a=this.getCellValue(r,s),l=this.cellValueFormatFunction({column:r,rowData:s,value:a});n.onclick=()=>n.focus(),n.ondblclick=()=>this.inputRenderFunction(i),n.ontouchend=()=>this.inputRenderFunction(i);const u=(f=this.grid)==null?void 0:f.getSlotElementByName(n.slot),h=u==null?void 0:u.parentElement;h&&!h.onkeydown&&(h.onkeydown=g=>{g.key!==DQ.showInput||this.activeEditInfo||this.inputRenderFunction(i),g.key===DQ.hideInput&&this.activeEditInfo&&this.cancel()}),A(a)&&A(l)?n.title=l.toString():n.title&&n.removeAttribute("title");const p=P$(this.messagesURIUtils,l);(l==null?void 0:l.toString())!==n.innerHTML&&p!==n.innerHTML&&(n.innerHTML=p)},this.required=!1,this.store=null,this.updateRowItemFunction=({rowData:i,column:n,value:r})=>{Du(i),i.item[n.path]=r},this.updateStoreItemFunction=async({rowData:i,column:n,value:r})=>{var s;Du(i),await((s=this.store)==null?void 0:s.updateItem({index:i.index,name:n.path,value:r}))}}cancel(){var l;const{activeEditInfo:e}=this;if(!e)return;const{column:i,root:n,rowData:r,oldValue:s}=e;this._set("activeEditInfo",null);const o=this.cellValueFormatFunction({column:i,rowData:r,value:s}),a=P$(this.messagesURIUtils,o);n.innerHTML=a,(l=this.grid)==null||l.notifyResize()}createInputContainer(){const e=document.createElement("div");return e.classList.add(LQ.inputContainer),e}createInputElement({value:e}){const i=document.createElement("input");return i.classList.add(LQ.input),this.maxLength!=null&&(i.maxLength=this.maxLength),i.type=this.inputType,i.value=e,i.onblur=()=>{i.onblur=null,this.submit()},i}async submit(){var l,u;const{activeEditInfo:e}=this;if(!e)return;const{column:i,input:n,root:r,rowData:s,oldValue:o}=e,a=this.parseInputValueFunction({input:n,column:i,rowData:s});if(!this.cellValueValidatorFunction({value:a,oldValue:o,column:i,rowData:s}))this.cancel();else{r.innerHTML=this.loadingMessage,(l=this.grid)==null||l.notifyResize();try{await this.updateStoreItemFunction({rowData:s,column:i,value:a}),this.updateRowItemFunction({rowData:s,column:i,value:a});const h=this.getCellValue(i,s),p=this.cellValueFormatFunction({column:i,rowData:s,value:h});A(h)&&A(p)?r.title=p.toString():r.title&&r.removeAttribute("title");const f=P$(this.messagesURIUtils,p);r.innerHTML=f,this.emit("value-change",{column:i,rowData:s,value:h}),this._set("activeEditInfo",null),(u=this.grid)==null||u.notifyResize()}catch{this.cancel()}}}};c([d({readOnly:!0})],gs.prototype,"activeEditInfo",void 0),c([d()],gs.prototype,"cellValueValidatorFunction",void 0),c([d()],gs.prototype,"editable",void 0),c([d()],gs.prototype,"inputRenderFunction",void 0),c([d({constructOnly:!0})],gs.prototype,"loadingMessage",void 0),c([d()],gs.prototype,"inputType",void 0),c([d()],gs.prototype,"maxLength",void 0),c([d()],gs.prototype,"parseInputValueFunction",void 0),c([d()],gs.prototype,"renderFunction",void 0),c([d()],gs.prototype,"required",void 0),c([d()],gs.prototype,"store",void 0),c([d()],gs.prototype,"updateRowItemFunction",void 0),c([d()],gs.prototype,"updateStoreItemFunction",void 0),gs=c([O("esri.widgets.FeatureTable.Grid.EditorColumn")],gs);const bQe=gs;function _Qe(t,e){const i=wae(e),n=Date.now(),r=i.formatToParts(n),s=new Set;r.filter(({type:u})=>u==="literal").forEach(({value:u})=>s.add(u));let o=0;const a={};for(;r.length>0;){const{type:u,value:h}=r.shift();for(let p=0;p<h.length;p++,o++){const f=t.charAt(o);if(s.has(f)){o++;break}if(u==="literal")break;a[u]||(a[u]=[]),a[u].push(f)}}const l={};try{l.day=LF(a.day.join("")),l.month=LF(a.month.join("")),l.year=LF((a.year||a.relatedYear).join(""))}catch{throw FQ(e)}if(isNaN(l.day)||isNaN(l.month)||isNaN(l.year))throw FQ(e);return l}function LF(t){const e=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g];for(let i=0;i<10;i++)t=t.replace(e[i],i.toString());return Number(t)}function FQ(t){return new N(`could not parse date input, expecting the following format: ${Ai(Date.now(),t)}`)}const wx={ar:6,"ar-dz":6,"ar-kw":6,"ar-ly":6,"ar-ma":1,"ar-sa":7,"ar-tn":1,bg:1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":7,"en-gb":1,"en-ie":1,"en-il":7,"en-in":7,"en-nz":1,"en-sg":7,es:1,"es-do":7,"es-mx":7,"es-us":7,et:1,fi:1,fr:1,"fr-ca":7,"fr-ch":1,he:7,hr:1,hu:1,id:7,it:1,"it-ch":1,ja:7,ko:7,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:7,"pt-br":7,ro:1,ru:1,sk:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:7,tr:1,uk:1,vi:1,"zh-cn":7,"zh-hk":7,"zh-mo":7,"zh-tw":7},wQe="Locale"in Intl&&"weekInfo"in Intl.Locale.prototype;function Dye(t){if(t=t.toLowerCase(),wx[t])return wx[t];if(wQe)try{const i=new Intl.Locale(t).weekInfo.firstDay;return wx[t]=i,i}catch{}const e=$$e(t);return wx[e]?wx[e]:7}function xQe(t,e){return(e+7-Dye(t))%7}let JS=class extends _e{constructor(){super(...arguments),this.state="ready",this.value=new Date}};c([d()],JS.prototype,"state",void 0),c([d()],JS.prototype,"value",void 0),JS=c([O("esri.widgets.support.DateTimeElementViewModel")],JS);const Fye=JS;let O6=class extends Fye{constructor(e){super(e)}};O6=c([O("esri.widgets.support.DatePickerViewModel")],O6);const Nye=O6,In="esri-date-picker",ft={base:In,datePicker:`${In}__calendar`,monthPicker:`${In}__month-picker`,dayPicker:`${In}__day-picker`,week:`${In}__week-item`,nearbyMonth:`${In}__day-item--nearby-month`,activeDay:`${In}__day-item--active`,today:`${In}__day-item--today`,selectedDay:`${In}__day-item--selected`,day:`${In}__day-item`,dayHeader:`${In}__day-item--header`,yearPicker:`${In}__year-picker`,selectedYear:`${In}__year-picker-item--selected`,year:`${In}__year-picker-item`,monthDropdown:`${In}__month-dropdown`,date:`${In}__date`,datePickerToggle:`${In}__calendar-toggle`,dateInput:`${In}__input`,dateTextInput:`${In}__text-input`,leadingIcon:`${In}__icon--leading`,previousIcon:"esri-icon-left",nextIcon:"esri-icon-right",calendarIcon:"esri-icon-calendar",widget:"esri-widget",button:"esri-widget--button",input:"esri-input",select:"esri-select"},_v={year:"numeric",month:"2-digit",day:"2-digit"},SQe=[" ","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Enter","Home","PageDown","PageUp"];let Nr=class extends qt{constructor(e,i){super(e,i),this._calendarNode=null,this._inputOrButtonNode=null,this._rootNode=null,this._pageClickHandler=null,this._requestDayPickerFocusOnCreate=!1,this._activeDate=null,this._calendarPopover=new Rye({owner:this,placement:"bottom-start",anchorElement:()=>this._rootNode,renderContentFunction:this._renderCalendar}),this._isOpen=!1,this.dateInputEnabled=!1,this.messages=null,this.commitOnMonthChange=!1,this.viewModel=new Nye,this.disabled=!1,this.toggle=this.toggle.bind(this)}initialize(){this.addHandles(X(()=>{var e;return{viewModel:this.viewModel,value:(e=this.viewModel)==null?void 0:e.value}},({viewModel:e,value:i})=>{this.destroyed||!e||U(this.onChange)||this.onChange(i)},Bu))}destroy(){this._calendarPopover.destroy()}get value(){return this.viewModel.value}set value(e){this.viewModel.value=e}get isOpen(){return this._isOpen}render(){return L("div",{afterCreate:Ao,bind:this,class:this.classes(ft.base,ft.widget),"data-node-ref":"_rootNode"},this.dateInputEnabled?this._renderInputAndButtonMode():this._renderButtonOnlyMode())}toggle(){this._isOpen?this.close():this.open()}open(e=!0){this._activeDate=Oe.fromJSDate(this.viewModel.value),this._isOpen=!0,this._calendarPopover.open=!0,this._requestDayPickerFocusOnCreate=e,this._pageClickHandler||(this._pageClickHandler=H2e(document,"click",({target:i})=>{var n,r;(n=this._calendarNode)!=null&&n.contains(i)||(r=this._rootNode)!=null&&r.contains(i)||this.close()}),this.addHandles(this._pageClickHandler)),this._pageClickHandler.resume()}close(e=!0){var i,n;this._activeDate=null,this._isOpen=!1,this._calendarPopover.open=!1,(i=this._pageClickHandler)==null||i.pause(),e&&((n=this._inputOrButtonNode)==null||n.focus())}_renderButtonOnlyMode(){const e=Ai(this.viewModel.value,_v),{disabled:i,_isOpen:n,messages:r}=this;return L("div",{key:`date-button-${i}`,afterCreate:Ao,"aria-controls":n?this._getCalendarId():null,"aria-expanded":n.toString(),"aria-haspopup":"true","aria-label":r.setDate,"aria-pressed":n.toString(),bind:this,class:this.classes(ft.button,ft.select,ft.datePickerToggle),"data-node-ref":"_inputOrButtonNode",onclick:this.toggle,onkeydown:this._handleDateButtonKeyDown,role:"button",tabIndex:i?void 0:0},L("span",{class:ft.date},e))}_renderInputAndButtonMode(){const e=Ai(this.viewModel.value,_v),{_isOpen:i,messages:n}=this;return L("div",{class:this.classes(ft.dateInput)},L("input",{afterCreate:Ao,"data-node-ref":"_inputOrButtonNode","aria-controls":i?this._getCalendarId():null,"aria-haspopup":"true","aria-label":n.setDate,bind:this,class:this.classes(ft.dateTextInput,ft.input),key:"date-input",onblur:this._handleDateInputBlur,onclick:this._handleDateInputClick,onkeydown:this._handleDateInputKeyDown,type:"text",value:e}),L("span",{"aria-hidden":"true",class:this.classes(ft.leadingIcon,ft.calendarIcon)}))}_handleDateInputClick(){this.open(!1)}_handleDateInputKeyDown(e){const{key:i}=e;this._isOpen?i==="Enter"?this._handleDateText(e):i==="Escape"&&this.close():i==="ArrowDown"&&(this.open(),e.preventDefault())}_handleDateButtonKeyDown(e){const{key:i,shiftKey:n}=e;this._isOpen&&i==="Tab"&&n?this.close():Vy(i)&&this.toggle()}_handleDateInputBlur(e){this._isOpen||this._handleDateText(e)}_handleDateText(e){const i=e.currentTarget;let n;try{n=_Qe(i.value,_v)}catch(s){return se.getLogger(this.declaredClass).warn(s),void(i.value=Ai(this.viewModel.value,_v))}const r=Oe.fromObject(n);r.isValid?(this.viewModel.value=r.toJSDate(),this._activeDate=r):i.value=Ai(this.viewModel.value,_v)}_handleDatePickerKeydown(e){To(e)==="Escape"&&(this.close(),e.preventDefault(),e.stopPropagation())}_renderCalendar(){const e=this._activeDate;if(!e)return null;const i=Oe.fromJSDate(this.viewModel.value);return L("div",{afterCreate:Ao,bind:this,class:this.classes(ft.datePicker,ft.widget),"data-node-ref":"_calendarNode",id:this._getCalendarId(),key:"esri-date-picker__calendar",onkeydown:this._handleDatePickerKeydown},this._renderMonthPicker(e),this._renderDayPicker(e,i),this._renderYearPicker(e))}_getCalendarId(){return`date-picker__calendar--${this.id}`}_renderMonthPicker(e){const i=$o(this.container),n=i?ft.nextIcon:ft.previousIcon,r=i?ft.previousIcon:ft.nextIcon,s=$S.months("long",{locale:sr()}).map((l,u)=>{const h=e.month-1===u;return L("option",{selected:h,value:u.toString()},l)}),{disabled:o,messages:a}=this;return L("div",{class:ft.monthPicker},L("div",{key:`previous-month-${o}`,"aria-label":a.goToPreviousMonth,bind:this,class:ft.button,onclick:this._setPreviousMonth,onkeydown:this._handlePreviousMonthKeyDown,role:"button",tabIndex:o?void 0:0,title:a.goToPreviousMonth},L("span",{"aria-hidden":"true",class:n})),L("select",{"aria-live":"assertive","aria-label":a.selectMonth,bind:this,class:this.classes(ft.monthDropdown,ft.select),disabled:o,id:`${this.id}__month-picker`,onchange:this._setMonth,onkeydown:this._setMonth,title:a.selectMonth},s),L("div",{key:`next-month-${o}`,"aria-label":a.goToNextMonth,bind:this,class:ft.button,onclick:this._setNextMonth,onkeydown:this._setNextMonth,role:"button",tabIndex:o?void 0:0,title:a.goToNextMonth},L("span",{"aria-hidden":"true",class:r})))}_renderDayPicker(e,i){const n=this._getWeekLabels(),r=this._getDayId(e),s=this._renderMonth(e,i),{id:o,disabled:a}=this;return L("div",{key:`day-picker-${a}`,afterCreate:this._handleDayPickerCreate,"aria-activedescendant":r,"aria-labelledby":`${o}__month-picker ${o}__selected-year`,bind:this,class:ft.dayPicker,id:`${o}__day-picker`,onkeydown:this._handleDayPickerKeydown,role:"grid",tabIndex:a?void 0:0},L("div",{class:ft.week,role:"row"},n.map(l=>L("div",{"aria-label":l.name,class:this.classes(ft.day,ft.dayHeader),role:"columnheader",title:l.name},l.abbr))),s)}_getDayId(e){return`${this.id}__${Ai(e.valueOf(),_v)}`}_handleDayPickerCreate(e){this._requestDayPickerFocusOnCreate&&(this._requestDayPickerFocusOnCreate=!1,e.focus())}_getWeekLabels(){const e=[],i={weekday:"long"},n={weekday:"narrow"};let r=Oe.now().set({weekday:Dye(sr())});for(let s=0;s<7;s++)e.push({name:Ai(r.valueOf(),i),abbr:Ai(r.valueOf(),n)}),r=r.plus({day:1});return e}_handleDayPickerKeydown(e){const{ctrlKey:i,shiftKey:n}=e,r=To(e);if(!SQe.includes(r))return;let s=this._activeDate;if(s){if(r==="ArrowLeft")s=s.minus({day:1});else if(r==="ArrowRight")s=s.plus({day:1});else if(r==="ArrowUp")s=s.minus({week:1});else if(r==="ArrowDown")s=s.plus({week:1});else if(r==="PageUp"){const o=n?"year":"month";s=s.minus({[o]:1})}else if(r==="PageDown"){const o=n?"year":"month";s=s.plus({[o]:1})}else if(r==="Home"){const o=i?"year":"month";s=s.startOf(o)}else if(r==="End"){const o=i?"year":"month";s=s.endOf(o)}else Vy(r)&&(this.viewModel.value=s.toJSDate(),this.close());this._activeDate=s,e.preventDefault(),e.stopPropagation()}}_renderMonth(e,i){const n=Oe.now(),r=e.startOf("month"),s=e.endOf("month"),o=6,a=7;let l=r.minus({day:xQe(sr(),r.weekday)});const u=[];for(let h=0;h<o;h++){const p=[];for(let f=0;f<a;f++){const g=l.day,v=l.hasSame(e,"day"),b=l.hasSame(i,"day"),_=this._getDayId(l),w=Ji.fromDateTimes(r,s),S={[ft.nearbyMonth]:!w.contains(l),[ft.today]:l.hasSame(n,"day"),[ft.activeDay]:v,[ft.selectedDay]:b};p.push(L("div",{"aria-label":g.toString(),"aria-selected":v.toString(),bind:this,class:this.classes(ft.day,S),"data-iso-date":l.toISO(),id:_,onclick:this._handleSelectedDate,onkeydown:this._handleSelectedDate,role:"gridcell"},g)),l=l.plus({day:1})}u.push(L("div",{class:ft.week,role:"row"},p))}return u}_renderYearPicker(e){const i={year:"numeric"},n=e,r=Ai(n.valueOf(),i),s=Ai(n.plus({year:1}).valueOf(),i),o=Ai(n.minus({year:1}).valueOf(),i),{disabled:a,messages:l}=this;return L("div",{class:ft.yearPicker},L("div",{key:`previous-year-${a}`,"aria-label":l.goToPreviousYear,bind:this,class:ft.year,onclick:this._setPreviousYear,onkeydown:this._setPreviousYear,tabIndex:a?void 0:0,title:l.goToPreviousYear},o),L("div",{class:this.classes(ft.year,ft.selectedYear),id:`${this.id}__selected-year`},r),L("div",{key:`next-year-${a}`,"aria-label":l.goToNextYear,bind:this,class:ft.year,onclick:this._setNextYear,onkeydown:this._handleNextYearKeyDown,tabIndex:a?void 0:0,title:l.goToNextYear},s))}_setMonth(e){const i=e.target,n=Number(i.value)+1;this._activeDate&&(this._activeDate=this._activeDate.set({month:n}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_setPreviousMonth(){this._activeDate&&(this._activeDate=this._activeDate.minus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_handlePreviousMonthKeyDown(e){if(e.key==="Tab"&&e.shiftKey)return e.preventDefault(),void this.close();Vy(e.key)&&this._setPreviousMonth()}_setNextMonth(){this._activeDate&&(this._activeDate=this._activeDate.plus({month:1}),this.commitOnMonthChange&&(this.viewModel.value=this._activeDate.toJSDate()))}_setPreviousYear(){var e;this._activeDate=((e=this._activeDate)==null?void 0:e.minus({year:1}))??null}_setNextYear(){var e;this._activeDate=((e=this._activeDate)==null?void 0:e.plus({year:1}))??null}_handleNextYearKeyDown(e){if(e.key==="Tab"&&!e.shiftKey)return e.preventDefault(),void this.close();Vy(e.key)&&this._setNextYear()}_handleSelectedDate(e){const i=e.target;this.viewModel.value=Oe.fromISO(i.getAttribute("data-iso-date")).toJSDate(),this.close()}};c([d()],Nr.prototype,"_activeDate",void 0),c([d()],Nr.prototype,"_calendarPopover",void 0),c([d()],Nr.prototype,"_isOpen",void 0),c([d()],Nr.prototype,"dateInputEnabled",void 0),c([d(),bt("esri/widgets/support/t9n/DatePicker")],Nr.prototype,"messages",void 0),c([d()],Nr.prototype,"value",null),c([d()],Nr.prototype,"commitOnMonthChange",void 0),c([d({type:Nye})],Nr.prototype,"viewModel",void 0),c([d()],Nr.prototype,"onChange",void 0),c([d()],Nr.prototype,"disabled",void 0),c([d()],Nr.prototype,"isOpen",null),c([Ln()],Nr.prototype,"_setNextMonth",null),c([Ln()],Nr.prototype,"_setPreviousYear",null),c([Ln()],Nr.prototype,"_handleSelectedDate",null),Nr=c([O("esri.widgets.support.DatePicker")],Nr);const EQe=Nr;let P6=class extends Fye{constructor(e){super(e)}};P6=c([O("esri.widgets.support.TimePickerViewModel")],P6);const zye=P6,DF="esri-time-picker",FF={base:`${DF} esri-widget`,timePicker:`${DF}__date-picker`,timePickerInput:`${DF}__input`,input:"esri-input",button:"esri-widget--button"},R6={hour:"numeric",minute:"numeric"},NQ="t",CQe=["ArrowDown","ArrowLeft","ArrowRight","ArrowUp","Tab"];function zQ(t){return t!=null&&Ai(t.valueOf(),R6).includes(" ")}let Ob=class extends qt{constructor(e,i){super(e,i),this._activePart=null,this._activeTime=null,this.messages=null,this.viewModel=new zye}get value(){return this.viewModel.value}set value(e){this.viewModel.value=e}render(){const e=this._activeTime||this.viewModel.value;return L("div",{class:FF.base},L("input",{afterUpdate:this._handleInputUpdate,"aria-label":this.messages.inputTitle,bind:this,class:this.classes(FF.timePickerInput,FF.input),onblur:this._handleInputBlur,onfocus:this._handleInputFocus,onkeydown:this._handleInputKeydown,oninput:this._handleInputKeydown,onclick:this._handleInputClick,onpaste:this._handleInputPaste,onwheel:this._handleInputWheel,value:Ai(e.valueOf(),R6)}))}_handleInputBlur(){var e;(e=this._activeTime)!=null&&e.isValid&&(this.viewModel.value=this._activeTime.toJSDate()),this._activeTime=null,this._activePart=null}_handleInputUpdate(e){this._selectPart(e,this._activePart)}_selectPart(e,i){const n=this._activeTime;if(!n||!e)return;const r=Ai(n.valueOf(),R6),s=0,o=r.indexOf(":");if(i==="hours")return void e.setSelectionRange(s,o);const a=o+1,l=a+2;if(i==="minutes")return void e.setSelectionRange(a,l);const u=l+1,h=r.length;i!=="meridiem"||e.setSelectionRange(u,h)}_handleInputFocus(e){this._activePart="hours",this._activeTime=Oe.fromJSDate(this.viewModel.value).startOf("minute"),this._selectPart(e.target,"hours")}_caretIndexToPartName(e){var s;const i=(s=this._activeTime)==null?void 0:s.toFormat(NQ,{locale:sr(),numberingSystem:"latn"});if(!i)return null;const n=i.indexOf(":"),r=i.indexOf(" ");return e<=n?"hours":e>n&&e<=r?"minutes":"meridiem"}_handleInputKeydown(e){const{ctrlKey:i,metaKey:n,shiftKey:r}=e,s=To(e),o=this._activeTime,a=this._activePart,l=/\d/.test(s),u=/^a|p$/i.test(s),h=n||i;if((CQe.includes(s)||l||a==="meridiem"&&u&&!h)&&o!=null){if(s==="ArrowLeft")this._activePart=this._prevPart();else if(s==="ArrowRight")this._activePart=this._nextPart();else if(s==="Tab"){const p=r?this._prevPart():this._nextPart();if(p===this._activePart)return;this._activePart=p}else if(s==="ArrowUp")this._shift("up",a);else if(s==="ArrowDown")this._shift("down",a);else if(l)this._setTime(o,a,Number(s));else if(u){const p=s.toLowerCase(),f=o.hour;(p==="a"&&f>=12||p==="p"&&f<12)&&this._shift("up",a)}e.preventDefault(),e.stopImmediatePropagation()}else h||(e.preventDefault(),e.stopImmediatePropagation())}_handleInputClick(e){const i=e.target;this._activePart=null,this.renderNow(),this._activePart=this._caretIndexToPartName(i.selectionStart??0)}_getOrderedParts(){return zQ(this._activeTime)?["hours","minutes","meridiem"]:["hours","minutes"]}_prevPart(){const e=this._getOrderedParts(),i=this._activePart?e.indexOf(this._activePart)-1:0;return e[Math.max(i,0)]}_nextPart(){const e=this._getOrderedParts(),i=this._activePart?e.indexOf(this._activePart)+1:0;return e[Math.min(i,e.length-1)]}_setTime(e,i,n){if(i==="hours"){const r=zQ(e)?12:24,s=""+e.hour%r,o=n,a=Number(`${s}${n}`);s.length===2||a>r?this._activeTime=e.set({hour:o}):a<=r&&(this._activeTime=e.set({hour:a}))}else if(i==="minutes"){const s=`${e.minute}`,o=n,a=Number(`${s}${n}`);s.length===2||a>59?this._activeTime=e.set({minute:o}):a<59&&(this._activeTime=e.set({minute:a}))}}_parseTime(e){if(!e)return null;const i={locale:sr(),numberingSystem:"latn"};let n=Oe.fromFormat(e,NQ,i);return n.isValid?n:(n=Oe.fromISO(e,i),n.isValid?n:(n=Oe.fromRFC2822(e,i),n.isValid?n:(n=Oe.fromJSDate(new Date(e)),n.isValid?n:null)))}_handleInputPaste(e){var r;const i=(r=e.clipboardData)==null?void 0:r.getData("text/plain"),n=this._parseTime(i);n&&(this._activeTime=n),e.preventDefault(),e.stopImmediatePropagation()}_handleInputWheel(e){const i=e.deltaY<0?"up":"down";this._shift(i,this._activePart)}_shift(e,i){var o;if(!i)return;const n=e==="up"?"plus":"minus",r=i==="meridiem"?12:1,s=i==="hours"?"hour":i==="minutes"?"minute":"hours";this._activeTime=((o=this._activeTime)==null?void 0:o[n]({[s]:r}))??null}};c([d(),bt("esri/widgets/support/t9n/TimePicker")],Ob.prototype,"messages",void 0),c([d()],Ob.prototype,"value",null),c([d({type:zye})],Ob.prototype,"viewModel",void 0),Ob=c([O("esri.widgets.support.TimePicker")],Ob);const IQe=Ob,TQe={cancelEdit:"Escape"},og="esri-field-column",Nl={headerContent:`${og}__header-content`,headerLabel:`${og}__header-label`,input:`${og}__cell-input`,inputContainer:`${og}__cell__input-container`,dateInputContainer:`${og}__cell__date-input-container`,dateInputWrapper:`${og}__cell__date-input-wrapper`,button:`${og}__button`,saveIcon:"esri-icon-save",trashIcon:"esri-icon-trash",locked:"esri-icon-locked"},kQe=Jw("short-date-short-time"),$Qe=Jw("short-date"),AQe={useGrouping:!0,maximumFractionDigits:20};let Ot=class extends bQe{constructor(e){super(e),this._inputField=null,this.cellValueFormatFunction=({rowData:i,value:n})=>{var l;if(this.formatFunction){const{config:u,field:h}=this;return this.formatFunction({config:u,field:h,value:C0.sanitize(n)})}if(n===null)return"&nbsp;";const{config:r,field:s}=this,{item:{feature:o}}=i,a=this._getDomainForFeature(o);if(a)return this._getComputedDomain(n,a);if(s.type==="date"){const u=this._getDateFormatOptions(),h=((l=this.layer)==null?void 0:l.type)==="feature"&&this.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null;return n?Ai(n,{...u,...h}):null}if(_c(s)){const u=r!=null&&r.format?s9(r.format):AQe;return Aa(parseFloat(n),u)}return C0.sanitize(n)},this.cellValueValidatorFunction=({oldValue:i,value:n})=>!(this._inputField&&!this._inputField.valid)&&!(this.required&&(!A(n)||n===""))&&i!==n,this.config=null,this.editingEnabled=!1,this.expressionInfos=null,this.field=null,this.formatFunction=null,this.headerRenderFunction=i=>{const{root:n}=i,{editable:r,editingEnabled:s,headerMenuEnabled:o,sortable:a}=this;if(this.removeCellContent(n),n.classList.add(Nl.headerContent),s&&!r&&n.appendChild(this.createLockedElement()),a)this.headerSorterRenderFunction(i);else{const l=document.createElement("div");l.classList.add(Nl.headerLabel),l.textContent=this.label,n.appendChild(l)}o&&this.headerMenuRenderFunction(i)},this.inputRenderFunction=({root:i,column:n,rowData:r})=>{var l,u;if((l=this.activeEditInfo)!=null&&l.updating||!this.editable)return;const s=this.getCellValue(n,r),o=this.createInputElement({root:i,column:n,rowData:r,value:s});if(this._set("activeEditInfo",{column:n,input:o,root:i,rowData:r,updating:!0,oldValue:s}),this.field.type==="date")return void this._renderDateEditors(s,i,o);const a=this.createInputContainer();a.appendChild(o),this.removeCellContent(i),i.appendChild(a),o.focus(),o instanceof HTMLInputElement&&o.select(),(u=this.grid)==null||u.notifyResize()},this.layer=null,this.parseInputValueFunction=({input:i})=>{const n=this._inputField,r=i.value,{required:s,type:o}=n;return s||r!==""?o==="number"||o==="date"?parseFloat(r):o==="text"?r.trim():r:null},this.store=null,this.template=null,this.updateRowItemFunction=({rowData:i,column:n,value:r})=>{i.item.feature.attributes[n.path]=r},this.updateStoreItemFunction=async({rowData:i,column:n,value:r})=>{if(!i||!this.store)return;const s=i.item.objectId,o=this.store.getObjectIdIndex(s)??i.index;await this.store.updateItem({index:o,name:n.path,value:r})}}get alias(){var e;return(e=this.field)==null?void 0:e.alias}get defaultValue(){var e;return(e=this.field)==null?void 0:e.defaultValue}get description(){var e,i,n;return((e=this.template)==null?void 0:e.description)??((i=this.config)==null?void 0:i.description)??((n=this.field)==null?void 0:n.description)??null}get editable(){var l;const{config:e,editingEnabled:i,field:n,layer:r,template:s}=this;if(U(n)||U(r))return!1;const o=lme(r),a=(l=Pf(r))==null?void 0:l.operations.supportsUpdate;return!!(n.editable&&o&&a)&&(i?!((s==null?void 0:s.editable)===!1||(e==null?void 0:e.editable)===!1):!(!(s!=null&&s.editable)&&!(e!=null&&e.editable)))}get header(){var e,i;return((e=this.template)==null?void 0:e.label)||((i=this.config)==null?void 0:i.label)||this.alias||this.path||null}get hidden(){const{config:e}=this;return(e==null?void 0:e.visible)===!1||this._get("hidden")||!1}set hidden(e){this._set("hidden",e)}get loadingMessage(){var e;return((e=this.messages)==null?void 0:e.loading)||"..."}get maxLength(){const{field:e,config:i,template:n}=this,r=e==null?void 0:e.length,s=n!=null&&n.input&&"maxLength"in n.input?n.input.maxLength:i==null?void 0:i.maxLength;return!isNaN(s)&&s>=-1&&(r===-1||s<=r)?s:r}get minLength(){const{config:e,template:i,maxLength:n}=this,r=i!=null&&i.input&&"minLength"in i.input?i.input.minLength:(e==null?void 0:e.minLength)||null;return n&&r<=n?r:null}get name(){var e;return(e=this.field)==null?void 0:e.name}get nullable(){var e;return((e=this.field)==null?void 0:e.nullable)??!1}get path(){var e;return(e=this.field)==null?void 0:e.name}get required(){const{config:e,field:i,template:n}=this,r=i==null?void 0:i.nullable,s=e==null?void 0:e.required,o=n==null?void 0:n.required;return this.editable&&(!r||s===!0||o===!0)}get sortable(){var e,i;return this.template?((e=this.template)==null?void 0:e.sortable)!==!1:((i=this.config)==null?void 0:i.sortable)!==!1}createInputElement({rowData:e,value:i}){const{item:n}=e;if(!n||!n.feature)return null;this._inputField=this._setUpInputField(n.feature,i);const{field:r,maxLength:s,minLength:o,required:a}=this,{domain:l}=this._inputField;let u=null;(l==null?void 0:l.type)==="coded-value"?(u=this._createSelectElement(i,l.codedValues.map(({code:f,name:g})=>({value:f,name:g})),this._inputField),u.onchange=()=>{u.onblur=null,p()}):(u=document.createElement("input"),u.type=_c(r)?"number":"text",s>-1&&(u.maxLength=s),o>0&&(u.minLength=o)),u.classList.add(Nl.input),u.value=i,u.required=a;let h=!1;u.onkeydown=f=>{h=f.key===TQe.cancelEdit},u.onblur=()=>{u.onblur=null,p()};const p=()=>{h?this.cancel():this.submit(),this._inputField=null};return u}createInputContainer(){const e=document.createElement("div");return e.classList.add(Nl.inputContainer),e}createLockedElement(){const e=document.createElement("div");return e.classList.add(Nl.locked),e}getCellValue({path:e},{item:i}){var n,r;return((r=(n=i==null?void 0:i.feature)==null?void 0:n.attributes)==null?void 0:r[e])??null}_renderDateEditors(e,i,n){var $;const{config:r,messagesCommon:s,template:o}=this,a=e?new Date(e):new Date(Date.now()),l=new EQe({dateInputEnabled:!0,value:a}),u=new IQe({value:a});n.value=a.getTime().toString();let h=!e;const p=()=>{h=!0;const M=this._getCombinedDateTime(l.value,u.value);n.value=M.getTime().toString()},f=()=>{h?this.submit():this.cancel()},g=()=>{n.value=null,this.submit()};X(()=>[l.value,u.value],()=>p());const v=document.createElement("div"),b=document.createElement("div");l.container=v,u.container=b;const _=document.createElement("button");_.classList.add(Nl.button,Nl.saveIcon),_.onclick=()=>f(),_.title=s==null?void 0:s.save;const w=document.createElement("button");w.classList.add(Nl.button,Nl.trashIcon),w.onclick=()=>g(),w.title=s==null?void 0:s.clear;const S=document.createElement("div");S.classList.add(Nl.dateInputWrapper),S.appendChild(v),(o&&o.input&&o.input.type==="datetime-picker"&&o.input.includeTime!==!1||r&&r.includeTime!==!1)&&S.appendChild(b);const C=document.createElement("div");C.classList.add(Nl.dateInputContainer),C.appendChild(S),C.appendChild(_),C.appendChild(w),l.when(()=>{var M;return(M=this.grid)==null?void 0:M.notifyResize()}),u.when(()=>{var M;return(M=this.grid)==null?void 0:M.notifyResize()}),this.removeCellContent(i),i.appendChild(C),($=this.grid)==null||$.notifyResize()}_createSelectElement(e,i,n){let r=!1;const s=i.map(a=>{a.value===e&&(r=!0);const l=document.createElement("option");return l.text=a.name,l.value=a.value,l});if(e!=null&&e!==""&&!r){const a=document.createElement("option");a.text=e,a.value=e,s.unshift(a)}if(!n.required&&n.value==null){const a=document.createElement("option");a.value="",s.unshift(a)}const o=document.createElement("select");return s.forEach(a=>o.add(a)),o.value=e,o}_setUpInputField(e,i){const{config:n,field:r,layer:s}=this,o=new vQe({config:n,feature:e,initialFeature:e.clone(),field:r,layer:s,group:null,messages:null});return o.set("value",i),o}_isDomainCompatible(e){const{field:i}=this;if(e&&e.type==="coded-value"){const n=typeof e.codedValues[0].code;if(n==="string"&&wC(i)||n==="number"&&_c(i))return!0}return!(!e||e.type!=="range"||!_c(i))}_getDomainForFeature(e){const{config:i,layer:n,name:r,template:s}=this;if(n.type==="wfs"||n.type==="geojson"||n.type==="csv")return null;if(s!=null&&s.domain&&this._isDomainCompatible(s.domain))return s.domain;const{typeIdField:o}=n,a=o===r,l=this.field.domain;if(a&&!l)return new gR({name:"__internal-type-based-coded-value-domain__",codedValues:n.types.map(({id:p,name:f})=>({code:p,name:f}))});const u=o&&n.getFieldDomain(r,{feature:e})||l,h=i==null?void 0:i.domain;return this._isDomainCompatible(h)?h:u}_getComputedDomain(e,i){if(!i)return null;if(i.type==="range")return e;if(i.type==="coded-value"){const n=i.codedValues.filter(r=>r.hasOwnProperty("code")&&r.code===e);return n&&n.length?n[0].name:e}return null}_getCombinedDateTime(e,i){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),i.getHours(),i.getMinutes(),i.getSeconds())}_getDateFormatOptions(){var r,s;const{config:e,template:i}=this,n=((r=i==null?void 0:i.format)==null?void 0:r.dateFormat)||((s=e==null?void 0:e.format)==null?void 0:s.dateFormat);return n?Jw(n):i&&i.input&&!("includeTime"in i.input)||(e==null?void 0:e.includeTime)===!1?$Qe:kQe}};c([d({readOnly:!0})],Ot.prototype,"alias",null),c([d()],Ot.prototype,"cellValueFormatFunction",void 0),c([d()],Ot.prototype,"cellValueValidatorFunction",void 0),c([d()],Ot.prototype,"config",void 0),c([d({readOnly:!0})],Ot.prototype,"defaultValue",null),c([d({readOnly:!0})],Ot.prototype,"description",null),c([d({readOnly:!0})],Ot.prototype,"editable",null),c([d()],Ot.prototype,"editingEnabled",void 0),c([d()],Ot.prototype,"expressionInfos",void 0),c([d()],Ot.prototype,"field",void 0),c([d()],Ot.prototype,"formatFunction",void 0),c([d({readOnly:!0})],Ot.prototype,"header",null),c([d()],Ot.prototype,"hidden",null),c([d()],Ot.prototype,"headerRenderFunction",void 0),c([d()],Ot.prototype,"inputRenderFunction",void 0),c([d()],Ot.prototype,"layer",void 0),c([d({readOnly:!0})],Ot.prototype,"loadingMessage",null),c([d()],Ot.prototype,"maxLength",null),c([d()],Ot.prototype,"minLength",null),c([d({readOnly:!0})],Ot.prototype,"name",null),c([d({readOnly:!0})],Ot.prototype,"nullable",null),c([d()],Ot.prototype,"parseInputValueFunction",void 0),c([d({readOnly:!0})],Ot.prototype,"path",null),c([d({readOnly:!0})],Ot.prototype,"required",null),c([d()],Ot.prototype,"sortable",null),c([d()],Ot.prototype,"store",void 0),c([d()],Ot.prototype,"template",void 0),c([d()],Ot.prototype,"updateRowItemFunction",void 0),c([d()],Ot.prototype,"updateStoreItemFunction",void 0),Ot=c([O("esri.widgets.FeatureTable.FieldColumn")],Ot);const NF=Ot;let go=class extends _e{constructor(e){super(e),this.cellClassNameGenerator=null,this.columnReorderingEnabled=!0,this.columns=new we,this.dataProvider=async({page:i,pageSize:n},r)=>{const{store:s}=this;r&&(s?r(await s.fetchItems({page:i,pageSize:n})):r&&r([]))},this.multiSortEnabled=!1,this.pageSize=50,this.rowDetailsRenderer=null,this.store=null}get highlightIds(){return this._get("highlightIds")||new we}set highlightIds(e){Array.isArray(e)?this._set("highlightIds",new we(e)):this._set("highlightIds",e)}get size(){return this.store&&this.store.count||0}get state(){const{store:e}=this;return e&&e.state!=="disabled"?e.state==="loading"?"loading":e.state==="loaded"?"loaded":"ready":"disabled"}closeColumnMenus(){var e;(e=this.columns)==null||e.forEach(i=>{i.menu&&i.menu.open&&i.menu.set("open",!1)})}sortColumn(e,i){const n=this.findColumn(e);n&&(n.direction=i)}hideColumn(e){const i=this.findColumn(e);i&&i.hidden===!1&&(i.hidden=!0)}showColumn(e){const i=this.findColumn(e);i&&i.hidden&&(i.hidden=!1)}showAllColumns(){var e;(e=this.columns)==null||e.forEach(i=>{i.hidden&&(i.hidden=!1)})}findColumn(e){const i=[];return this.columns.forEach(n=>{var r;i.push(n),"columns"in n&&((r=n.columns)==null||r.forEach(s=>i.push(s)))}),i.find(n=>n.path===e)}getRowItemAt(e){var i;return(i=this.store)==null?void 0:i.getLocalItemAt(e)}refresh(){this.store&&(this.store.reset(),this.store.load())}};c([d()],go.prototype,"cellClassNameGenerator",void 0),c([d()],go.prototype,"columnReorderingEnabled",void 0),c([d()],go.prototype,"columns",void 0),c([d()],go.prototype,"dataProvider",void 0),c([d()],go.prototype,"highlightIds",null),c([d()],go.prototype,"multiSortEnabled",void 0),c([d()],go.prototype,"pageSize",void 0),c([d()],go.prototype,"rowDetailsRenderer",void 0),c([d({readOnly:!0})],go.prototype,"size",null),c([d()],go.prototype,"store",void 0),c([d({readOnly:!0})],go.prototype,"state",null),go=c([O("esri.widgets.FeatureTable.Grid.GridViewModel")],go);const jye=go;let MQe=class extends HTMLElement{static get version(){return"1.6.1"}};customElements.define("vaadin-lumo-styles",MQe);let zF,jF=null,jQ=window.HTMLImports&&window.HTMLImports.whenReady||null;function VQ(t){requestAnimationFrame(function(){jQ?jQ(t):(jF||(jF=new Promise(e=>{zF=e}),document.readyState==="complete"?zF():document.addEventListener("readystatechange",()=>{document.readyState==="complete"&&zF()})),jF.then(function(){t&&t()}))})}const UQ="__seenByShadyCSS",pk="__shadyCSSCachedStyle";let MO=null,zE=null,Qp=class{constructor(){this.customStyles=[],this.enqueued=!1,VQ(()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}enqueueDocumentValidation(){!this.enqueued&&zE&&(this.enqueued=!0,VQ(zE))}addCustomStyle(e){e[UQ]||(e[UQ]=!0,this.customStyles.push(e),this.enqueueDocumentValidation())}getStyleForCustomStyle(e){if(e[pk])return e[pk];let i;return i=e.getStyle?e.getStyle():e,i}processStyles(){const e=this.customStyles;for(let i=0;i<e.length;i++){const n=e[i];if(n[pk])continue;const r=this.getStyleForCustomStyle(n);if(r){const s=r.__appliedElement||r;MO&&MO(s),n[pk]=s}}return e}};Qp.prototype.addCustomStyle=Qp.prototype.addCustomStyle,Qp.prototype.getStyleForCustomStyle=Qp.prototype.getStyleForCustomStyle,Qp.prototype.processStyles=Qp.prototype.processStyles,Object.defineProperties(Qp.prototype,{transformCallback:{get:()=>MO,set(t){MO=t}},validateCallback:{get:()=>zE,set(t){let e=!1;zE||(e=!0),zE=t,e&&this.enqueueDocumentValidation()}}});const L6=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,OO=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi,OQe=/@media\s(.*)/;function D6(t,e){for(let i in e)i===null?t.style.removeProperty(i):t.style.setProperty(i,e[i])}function Vye(t,e){const i=window.getComputedStyle(t).getPropertyValue(e);return i?i.trim():""}function PQe(t){const e=OO.test(t)||L6.test(t);return OO.lastIndex=0,L6.lastIndex=0,e}const KR=!(window.ShadyDOM&&window.ShadyDOM.inUse);let F7,QC;function BQ(t){F7=(!t||!t.shimcssproperties)&&(KR||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&window.ShadyCSS.cssBuild!==void 0&&(QC=window.ShadyCSS.cssBuild);const Uye=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&window.ShadyCSS.nativeCss!==void 0?F7=window.ShadyCSS.nativeCss:window.ShadyCSS?(BQ(window.ShadyCSS),window.ShadyCSS=void 0):BQ(window.WebComponents&&window.WebComponents.flags);const N7=F7,fk=new Qp;window.ShadyCSS||(window.ShadyCSS={prepareTemplate(t,e,i){},prepareTemplateDom(t,e){},prepareTemplateStyles(t,e,i){},styleSubtree(t,e){fk.processStyles(),D6(t,e)},styleElement(t){fk.processStyles()},styleDocument(t){fk.processStyles(),D6(document.body,t)},getComputedStyleValue:(t,e)=>Vye(t,e),flushCustomStyles(){},nativeCss:N7,nativeShadow:KR,cssBuild:QC,disableRuntime:Uye}),window.ShadyCSS.CustomStyleInterface=fk,window.JSCompiler_renameProperty=function(t,e){return t};let mk,Yo,RQe=/(url\()([^)]*)(\))/g,LQe=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function jE(t,e){if(t&&LQe.test(t)||t==="//")return t;if(mk===void 0){mk=!1;try{const i=new URL("b","http://a");i.pathname="c%20d",mk=i.href==="http://a/c%20d"}catch{}}if(e||(e=document.baseURI||window.location.href),mk)try{return new URL(t,e).href}catch{return t}return Yo||(Yo=document.implementation.createHTMLDocument("temp"),Yo.base=Yo.createElement("base"),Yo.head.appendChild(Yo.base),Yo.anchor=Yo.createElement("a"),Yo.body.appendChild(Yo.anchor)),Yo.base.href=e,Yo.anchor.href=t,Yo.anchor.href||t}function z7(t,e){return t.replace(RQe,function(i,n,r,s){return n+"'"+jE(r.replace(/["']/g,""),e)+"'"+s})}function j7(t){return t.substring(0,t.lastIndexOf("/")+1)}const V7=!window.ShadyDOM||!window.ShadyDOM.inUse;Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss);const DQe=V7&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const t=new CSSStyleSheet;t.replaceSync("");const e=document.createElement("div");return e.attachShadow({mode:"open"}),e.shadowRoot.adoptedStyleSheets=[t],e.shadowRoot.adoptedStyleSheets[0]===t}catch{return!1}})();let FQe=window.Polymer&&window.Polymer.rootPath||j7(document.baseURI||window.location.href),PO=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0,NQe=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1,Aw=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,zQe=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,eI=window.Polymer&&window.Polymer.legacyOptimizations||!1,Bye=window.Polymer&&window.Polymer.legacyWarnings||!1,jQe=window.Polymer&&window.Polymer.syncInitialRender||!1,F6=window.Polymer&&window.Polymer.legacyUndefined||!1,VQe=window.Polymer&&window.Polymer.orderedComputed||!1,HQ=window.Polymer&&window.Polymer.removeNestedTemplates||!1,Hye=window.Polymer&&window.Polymer.fastDomIf||!1,N6=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1,gk=window.Polymer&&window.Polymer.legacyNoObservedAttributes||!1,UQe=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1,U7={},Gye={};function GQ(t,e){U7[t]=Gye[t.toLowerCase()]=e}function qQ(t){return U7[t]||Gye[t.toLowerCase()]}function BQe(t){t.querySelector("style")&&console.warn("dom-module %s has style outside template",t.id)}class Mw extends HTMLElement{static get observedAttributes(){return["id"]}static import(e,i){if(e){let n=qQ(e);return n&&i?n.querySelector(i):n}return null}attributeChangedCallback(e,i,n,r){i!==n&&this.register()}get assetpath(){if(!this.__assetpath){const e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,i=jE(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=j7(i)}return this.__assetpath}register(e){if(e=e||this.id){if(Aw&&qQ(e)!==void 0)throw GQ(e,null),new Error(`strictTemplatePolicy: dom-module ${e} re-registered`);this.id=e,GQ(e,this),BQe(this)}}}Mw.prototype.modules=U7,customElements.define("dom-module",Mw);const HQe="link[rel=import][type~=css]",GQe="include",WQ="shady-unscoped";function B7(t){return Mw.import(t)}function JQ(t){const e=z7((t.body?t.body:t).textContent,t.baseURI),i=document.createElement("style");return i.textContent=e,i}function qQe(t){const e=t.trim().split(/\s+/),i=[];for(let n=0;n<e.length;n++)i.push(...WQe(e[n]));return i}function WQe(t){const e=B7(t);if(!e)return console.warn("Could not find style data in module named",t),[];if(e._styles===void 0){const i=[];i.push(...G7(e));const n=e.querySelector("template");n&&i.push(...H7(n,e.assetpath)),e._styles=i}return e._styles}function H7(t,e){if(!t._styles){const i=[],n=t.content.querySelectorAll("style");for(let r=0;r<n.length;r++){let s=n[r],o=s.getAttribute(GQe);o&&i.push(...qQe(o).filter(function(a,l,u){return u.indexOf(a)===l})),e&&(s.textContent=z7(s.textContent,e)),i.push(s)}t._styles=i}return t._styles}function JQe(t){let e=B7(t);return e?G7(e):[]}function G7(t){const e=[],i=t.querySelectorAll(HQe);for(let n=0;n<i.length;n++){let r=i[n];if(r.import){const s=r.import,o=r.hasAttribute(WQ);if(o&&!s._unscopedStyle){const a=JQ(s);a.setAttribute(WQ,""),s._unscopedStyle=a}else s._style||(s._style=JQ(s));e.push(o?s._unscopedStyle:s._style)}}return e}function YQe(t){let e=t.trim().split(/\s+/),i="";for(let n=0;n<e.length;n++)i+=ZQe(e[n]);return i}function ZQe(t){let e=B7(t);if(e&&e._cssText===void 0){let i=XQe(e),n=e.querySelector("template");n&&(i+=KQe(n,e.assetpath)),e._cssText=i||null}return e||console.warn("Could not find style data in module named",t),e&&e._cssText||""}function KQe(t,e){let i="";const n=H7(t,e);for(let r=0;r<n.length;r++){let s=n[r];s.parentNode&&s.parentNode.removeChild(s),i+=s.textContent}return i}function XQe(t){let e="",i=G7(t);for(let n=0;n<i.length;n++)e+=i[n].textContent;return e}const YQ="include",QQe=window.ShadyCSS.CustomStyleInterface;class eet extends HTMLElement{constructor(){super(),this._style=null,QQe.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const e=this.querySelector("style");if(!e)return null;this._style=e;const i=e.getAttribute(YQ);return i&&(e.removeAttribute(YQ),e.textContent=YQe(i)+e.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",eet);const ZQ=document.createElement("template");ZQ.innerHTML=`<custom-style>
  <style>
    html {
      /* Base (background) */
      --lumo-base-color: #FFF;

      /* Tint */
      --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);
      --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);
      --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);
      --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);
      --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);
      --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);
      --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);
      --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);
      --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);
      --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);
      --lumo-tint: #FFF;

      /* Shade */
      --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);
      --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);
      --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);
      --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);
      --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);
      --lumo-shade-50pct: hsla(214, 45%, 20%, 0.5);
      --lumo-shade-60pct: hsla(214, 43%, 19%, 0.61);
      --lumo-shade-70pct: hsla(214, 42%, 18%, 0.72);
      --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);
      --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);
      --lumo-shade: hsl(214, 35%, 15%);

      /* Contrast */
      --lumo-contrast-5pct: var(--lumo-shade-5pct);
      --lumo-contrast-10pct: var(--lumo-shade-10pct);
      --lumo-contrast-20pct: var(--lumo-shade-20pct);
      --lumo-contrast-30pct: var(--lumo-shade-30pct);
      --lumo-contrast-40pct: var(--lumo-shade-40pct);
      --lumo-contrast-50pct: var(--lumo-shade-50pct);
      --lumo-contrast-60pct: var(--lumo-shade-60pct);
      --lumo-contrast-70pct: var(--lumo-shade-70pct);
      --lumo-contrast-80pct: var(--lumo-shade-80pct);
      --lumo-contrast-90pct: var(--lumo-shade-90pct);
      --lumo-contrast: var(--lumo-shade);

      /* Text */
      --lumo-header-text-color: var(--lumo-contrast);
      --lumo-body-text-color: var(--lumo-contrast-90pct);
      --lumo-secondary-text-color: var(--lumo-contrast-70pct);
      --lumo-tertiary-text-color: var(--lumo-contrast-50pct);
      --lumo-disabled-text-color: var(--lumo-contrast-30pct);

      /* Primary */
      --lumo-primary-color: hsl(214, 90%, 52%);
      --lumo-primary-color-50pct: hsla(214, 90%, 52%, 0.5);
      --lumo-primary-color-10pct: hsla(214, 90%, 52%, 0.1);
      --lumo-primary-text-color: var(--lumo-primary-color);
      --lumo-primary-contrast-color: #FFF;

      /* Error */
      --lumo-error-color: hsl(3, 100%, 61%);
      --lumo-error-color-50pct: hsla(3, 100%, 60%, 0.5);
      --lumo-error-color-10pct: hsla(3, 100%, 60%, 0.1);
      --lumo-error-text-color: hsl(3, 92%, 53%);
      --lumo-error-contrast-color: #FFF;

      /* Success */
      --lumo-success-color: hsl(145, 80%, 42%); /* hsl(144,82%,37%); */
      --lumo-success-color-50pct: hsla(145, 76%, 44%, 0.55);
      --lumo-success-color-10pct: hsla(145, 76%, 44%, 0.12);
      --lumo-success-text-color: hsl(145, 100%, 32%);
      --lumo-success-contrast-color: #FFF;
    }
  </style>
</custom-style><dom-module id="lumo-color">
  <template>
    <style>
      [theme~="dark"] {
        /* Base (background) */
        --lumo-base-color: hsl(214, 35%, 21%);

        /* Tint */
        --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);
        --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);
        --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);
        --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);
        --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);
        --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);
        --lumo-tint-60pct: hsla(214, 82%, 90%, 0.6);
        --lumo-tint-70pct: hsla(214, 87%, 92%, 0.7);
        --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);
        --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);
        --lumo-tint: hsl(214, 100%, 98%);

        /* Shade */
        --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);
        --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);
        --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);
        --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);
        --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);
        --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);
        --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);
        --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);
        --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);
        --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);
        --lumo-shade: hsl(214, 33%, 13%);

        /* Contrast */
        --lumo-contrast-5pct: var(--lumo-tint-5pct);
        --lumo-contrast-10pct: var(--lumo-tint-10pct);
        --lumo-contrast-20pct: var(--lumo-tint-20pct);
        --lumo-contrast-30pct: var(--lumo-tint-30pct);
        --lumo-contrast-40pct: var(--lumo-tint-40pct);
        --lumo-contrast-50pct: var(--lumo-tint-50pct);
        --lumo-contrast-60pct: var(--lumo-tint-60pct);
        --lumo-contrast-70pct: var(--lumo-tint-70pct);
        --lumo-contrast-80pct: var(--lumo-tint-80pct);
        --lumo-contrast-90pct: var(--lumo-tint-90pct);
        --lumo-contrast: var(--lumo-tint);

        /* Text */
        --lumo-header-text-color: var(--lumo-contrast);
        --lumo-body-text-color: var(--lumo-contrast-90pct);
        --lumo-secondary-text-color: var(--lumo-contrast-70pct);
        --lumo-tertiary-text-color: var(--lumo-contrast-50pct);
        --lumo-disabled-text-color: var(--lumo-contrast-30pct);

        /* Primary */
        --lumo-primary-color: hsl(214, 86%, 55%);
        --lumo-primary-color-50pct: hsla(214, 86%, 55%, 0.5);
        --lumo-primary-color-10pct: hsla(214, 90%, 63%, 0.1);
        --lumo-primary-text-color: hsl(214, 100%, 70%);
        --lumo-primary-contrast-color: #FFF;

        /* Error */
        --lumo-error-color: hsl(3, 90%, 63%);
        --lumo-error-color-50pct: hsla(3, 90%, 63%, 0.5);
        --lumo-error-color-10pct: hsla(3, 90%, 63%, 0.1);
        --lumo-error-text-color: hsl(3, 100%, 67%);

        /* Success */
        --lumo-success-color: hsl(145, 65%, 42%);
        --lumo-success-color-50pct: hsla(145, 65%, 42%, 0.5);
        --lumo-success-color-10pct: hsla(145, 65%, 42%, 0.1);
        --lumo-success-text-color: hsl(145, 85%, 47%);
      }

      html {
        color: var(--lumo-body-text-color);
        background-color: var(--lumo-base-color);
      }

      [theme~="dark"] {
        color: var(--lumo-body-text-color);
        background-color: var(--lumo-base-color);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        color: var(--lumo-header-text-color);
      }

      a {
        color: var(--lumo-primary-text-color);
      }

      blockquote {
        color: var(--lumo-secondary-text-color);
      }

      code,
      pre {
        background-color: var(--lumo-contrast-10pct);
        border-radius: var(--lumo-border-radius-m);
      }
    </style>
  </template>
</dom-module><dom-module id="lumo-color-legacy">
  <template>
    <style include="lumo-color">
      :host {
        color: var(--lumo-body-text-color) !important;
        background-color: var(--lumo-base-color) !important;
      }
    </style>
  </template>
</dom-module>`,document.head.appendChild(ZQ.content);const KQ=document.createElement("template");KQ.innerHTML=`<custom-style>
  <style>
    @font-face {
      font-family: 'lumo-icons';
      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABEcAAsAAAAAIiwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAQwAAAFZAIUuKY21hcAAAAYgAAAD4AAADrsCU8d5nbHlmAAACgAAAC2MAABd4h9To2WhlYWQAAA3kAAAAMAAAADZa/6SsaGhlYQAADhQAAAAdAAAAJAbpA35obXR4AAAONAAAABAAAACspBAAAGxvY2EAAA5EAAAAWAAAAFh55IAsbWF4cAAADpwAAAAfAAAAIAFKAXBuYW1lAAAOvAAAATEAAAIuUUJZCHBvc3QAAA/wAAABKwAAAelm8SzVeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS+yDiBgZWBgamKaQ8DA0MPhGZ8wGDIyAQUZWBlZsAKAtJcUxgcXjG+0mIO+p/FEMUcxDANKMwIkgMABn8MLQB4nO3SWW6DMABF0UtwCEnIPM/zhLK8LqhfXRybSP14XUYtHV9hGYQwQBNIo3cUIPkhQeM7rib1ekqnXg981XuC1qvy84lzojleh3puxL0hPjGjRU473teloEefAUNGjJkwZcacBUtWrNmwZceeA0dOnLlw5cadB09elPGhGf+j0NTI/65KfXerT6JhqKnpRKtgOpuqaTrtKjPUlqHmhto21I7pL6i6hlqY3q7qGWrfUAeGOjTUkaGODXViqFNDnRnq3FAXhro01JWhrg11Y6hbQ90Z6t5QD4Z6NNSToZ4N9WKoV0O9GerdUB+G+jTUl6GWRvkL24BkEXictVh9bFvVFb/nxvbz+7Rf/N6zHcd2bCfP+Wgc1Z9N0jpNnEL6kbRVS6HA2hQYGh9TGR1CbCqa2rXrWOkQE/sHNJgmtZvoVNZqE1B1DNHxzTQxCehUTYiJTQyENui0qSLezr3PduyQfgmRWOfde8+9551z7rnn/O4jLoJ/bRP0UaKQMLFJjpBAvphLZC3Dk0ok7WBzR2/upJs7Ryw/nfFbln/uuN/apCvwrKLrSvUqRufbm5pn0fs0w4gYxnGVP6qHnO4bWiDQGQgwtS6lm3lB3QoX1M2vwEmuzirF39y+Es2+DJ8d1pkyqBIqoze3D1+Zz4DrFoazxI8dWwMrDlZ2DMqQAR9AROsJU+2cmlTPazTco52F1xTa2a2+K8vvq92dVHmtLoPeQX/AZPRYGthDYOeZjBjKoFsVGulR3lWU95WeCK44qHU7MhWUGUKZDT3oKUcG2GWuh+EDDfUYA/jhAhl0TOsJNYSEu7mQmi3UzfXwZKA4BsVsHLXQYGgRW95uEtpJ1Vfn9XiLriRBlFEqxsDjA09yCNUoQxxwd7KWSTt2y3GTKiflqHRSoWZc3m11Wa/fJdFgXD4sSYfleJBKd8GMz7J8dZn/cGRCcKGDnA2Ge3fKzcvlnTDNthGWLXzX/WaXtUAmRgeLlHSr30r0G9UTXMb0AtmwzOoy73fkSlHZkduw/TYuU9cAD4YutPoxTTsA3797wVr4Z/1NC5zARHr4vtxJjxIfiZMhMkbWk+14BnJZKwqGZwDfswLyxWDSg11rFLJF7Nopxjd1h1/QOT+oezgfu3Yq+Hk+duf5x+40o1GTkaIgikK/IEnC6aYxCUBaZJSN4XTYFjU/YMNIKqJwhDGOCCI8FDXnXmXjtGhGJyShqjAOnBOkW2JG9S7GgYeMWAU5JzhnWmBOaOM+CKEPoqSfFDC2Unq+DLlUgUVUFFLZGJg6jtlojsdsa8kPObPuJdi5dnBdBsLJMGTWDa4t2JvtwuPo9s+Y86suv/W33QG1rAaOAUV+vx4K6f2D04PVKlC7WLSrZzAi45ZV6lIC7WoXqmRyvUqoVwrzUoVsIjeTXWQv+RH5GTlBXiB/In8ln0IbBCAFOajAJrgZYyOHWqOfUe/aHjI12R6OQo1jCgt215l+4f6XPb+0MNou0V+43n2F77tSfRb24d7zitgnKmvYHs69zugaPvBwv6ioXkb2LdL65Atw51uLkXlu1bhMMRcXSPcYoqKIRlh34lQP8/5JbuUFye4vxD6/6MxFF11C0uVLr9Ulgw44tS3pMViNLUExbycFgLIct+QDMibRimx1ydUz8FXZiuOIDBOMVX2nUZc+huNE5XUJ81uiJoiabwqaVF0uacKbau/pl4R2VW0XXlJra6boVrYG646TF5NYzwy4vjENVrDlcNpZPl8DH6XX8XWCx0mvWVZY6KFLrvsY66/zPict5FnxaNUR/juvZCM3TvD60E2W1tZizbXTPDuabcm0nbbzpWKpmA1ayBQ8giedLUM+A0kNjBjQjmuYz7YrgIXYvmF63ZLBwSXrpn9Tb9wwdd/U1H0PMQK3XcO8ul3WT7PyPPdpy0TemKxNRcJNauiXJnnUDpUppQWs4SnUIy0EESGYqJYQLGHxzaGWwVIaS6Y7mQFM8ZjYDQ3axjf61SWjU33JwOZA1pwaG1L9mzf71aHRdX1JHw6Fp0aXhNwbqyeGNg4NbdzGCBxoz4ZXjy4Nu69Zr6sDY6vMrLU5nA1P8JkbdWXJ6ERfMryvNh1JfQ9+T4dIhGvK9w3dxjBBzatsQ/MlOHVIDnYpDz6odAXlQ01t2Pa5Iafd8MMpxAeDKP0C6CjgVLT5osB6icUx01lWjXxzT/GyRF2welEM5Z/7jG3VjQ1SrNn5IbyzOG5dobB3/QHxyZvsXcoz8IoEwS7plCg+zxHQk424q9BfEpkESJbFHQusDBSWFkuBkoPO0kLKwRVYjxGXlHTcTDQMJ/H6TX9afkO7mnraTO1feTnZAXLu4cp7HAXMmNG1yeFk9TgS/NHhZR/4QoBTr/ZB+6hCgyl15Nq1UbN6nE1/ZnP1U2cizCBpvs8cJQZJ4LkYx5N/yZPAUZNQQ0V4f3BQllWrK3YRzl30dOT6RVn2upNur6woSa8CqpdT/aKnBM4o3jNur9d9xqtUT6veBEt9Ca9at+ERzEEhUkR8sa5mQ4aVvJoVeEA8zI4ei5mULXFGyU7z/6TAeYLVcpzSWZY8PYYF5yrTV60sT0+XV141vX++Wf16V2bFeGVPZXxFpkvyeKTWLlzfW0mnKxsY6Y3294/0998SCfX1blm5pbcvFGlq/r07MRAMhYIDiW5JFKWW3vdrEpCsZSJG+om7Zu/PSScZJhNkLbmW5Wsr12pWqW5zKtlwRS4bFOxUw17mCzy6lskCDl1WYOGWDYrADrMA7BDDweWWNd5koiJnR1dz+ytLP2q0SqPB1lnK2ccB7RYe4FSoPks3iB3t4txTSHctb2sy1ivk0pvHuCNm6w1f6wxv3+OCgN78LqdQnUVh7R0oTAp0zOf2rbW770Vu5C2dIyGdTnHo8zSji7dppj0USoVCz+lhRMTh53Teq9VbGfbjuSbAooSdXayY4PYHg374C6f7gl1B/DXuJ4/QXxOBdJFJspFsI3egpoWUUCjlTIFnNYNl+ZyZKmBeYKGHkD1QyDlhaKbKwKcIJqJ4TLJ2OmdY/JWXae4DdGBw8HZ7eXcgFF2zr2SoalDry5iKqoa0Puhe3hPQ2s3elTYM+MI+n3rK0KgL7/La3GeMLt6m7u912vGnvtORiIa0qBmhqVi+XW9XNBmqb8eVgKzIHfGI5bNoG7X0UCzeISmqIcO/nY8FH7U8avX9fx/ST+hx0sezPw9Qy8Mum3GWf2N4Uy/yIYGVBXbJHWIZp7dfTcptdMTr9Qmq7DaiK/ukqCL4kt4RUfS5XPnMtmT22/mQFqF7emSqtrlu8SVElxDRJrZODkpuwe0VfTfjdEp1f7A7v+fozNBXUJ/6WTuK2TtFlpFVZAZ3LcFvUi1Z2p2YT+EMAkGJVStOzLTAPg4IqWIAlzRSjOBkl2zxj3TKycpzT/MnvX3uaSMWM+gU0rkXjohhefVRMaps3/kLMSKv23lT23uxQrkQjyOJleMDsdhAnD6ZGElWZ5MjCXzCE/hkWX+WF4knzGhVOyK2eQZekV3eyo0zL8kuYWCnDCvjjhAkcTPOBDXVdoav3HVcFnQjLvtV9S2p0zA6JegPwMQxt+yFb3ll9zGlq/5dRKb3cEyQYoaNYpharJ7xCB7AWxsLY3jjZXY0XsZj0Wjwc9I6PP/dKABnCZaqHpaZEACxk4ZeLZSKNgZABl+lYQX1sJQOSX3n6r410evcoud5JeAGUXVP9H1tZOKejTq4Ono0z0erro1FrnOpohva1d/hTdtVsQdKN5W9RlT3NjD0nznyKNTgKAMfWNWcyodV0IGLPIHOF0o4JyqufaK4z6WIIzuGh3d8c8cwQg8ER+OVxyrjdm8vNuhts4LoOihGxIMuUdgzwiYN7xhh1+oZnJNuTG7gQZvu4XWZ9GAZZjGEubwePqYhtKDTH+9VQkl17/iGybsnJ+8+sKtyPrcll9ty65Zsdst/9iqpEKh7M5VdBxh3csOdNc6tW3I1uyM1PzOXegSOrLFsFNI2O27M+TF2ApnN9MUv5ud6LjxIvEQnHRzxIu4IsA9MLFkJn2tcZoZ7ON7dXe7ujrc8HrusPKamlqXwd77lQUuLpilau4PUMapueBb7irU4RoUXEYXuVuIGlRGmOp+2lNkaRPVziOqmlaZvaqG4dFgSj0jxEJWrv12IUWntmw+rfQarRE0Aph4ocI6nlUlGqs+u3/+T/ethW62PpHp2eHbZstnh/wOO95yDAHicY2BkYGAA4pmJ6QHx/DZfGbiZXwBFGGpUNzQi6P+vmacy3QJyORiYQKIANoULVXicY2BkYGAO+p8FJF8wAAHzVAZGBlSgDQBW9gNvAAAAeJxjYGBgYH4xNDAAzwQmjwAAAAAATgCaAOgBCgEsAU4BcAGaAcQB7gIaApwC6ASaBLwE1gTyBQ4FKgV6BdAF/gZEBmYGtgcYB5AIGAhSCGoI/glGCb4J2goECjwKggq4CvALUAuWC7x4nGNgZGBg0GZMYRBlAAEmIOYCQgaG/2A+AwAYlAG8AHicbZE9TsMwGIbf9A/RSggEYmHxAgtq+jN2ZGj3Dt3T1GlTOXHkuBW9AyfgEByCgTNwCA7BW/NJlVBtyd/jx+8XKwmAa3whwnFE6Ib1OBq44O6Pm6Qb4Rb5QbiNHh6FO/RD4S6eMRHu4RaaT4halzR3eBVu4Apvwk36d+EW+UO4jXt8Cnfov4W7WOBHuIen6MXsCtvPU1vWc73emcSdxIkW2tW5LdUoHp7kTJfaJV6v1PKg6v167H2mMmcLNbWl18ZYVTm71amPN95Xk8EgEx+ntoDBDgUs+siRspaoMef7rukNEriziXNuwS7Hmoe9wggxv+e55IzJMqQTeNYV00scuNbY8+YxrUfGfcaMZb/CNPQe04bT0lThbEuT0sfYhK6K/23Amf3Lx+H24hcj4GScAAAAeJxtjtlugzAQRbkJUEJIuu/7vqR8lGNPAcWx0YAb5e/LklR96EgenSufGY038PqKvf9rhgGG8BEgxA4ijBBjjAQTTLGLPezjAIc4wjFOcIoznOMCl7jCNW5wizvc4wGPeMIzXvCKN7zjAzN8eonQRWZSSaYmjvug6ase98hFltexMJmmVNmV2WBvdNgZUc+ujAWzXW3UDnu1w43asStHc8GpzAXX/py0jqTQZJTgkcxJLpaCF0lD32xNt+43tAsn29Dft02uDKS2cjGUNgsk26qK2lFthYoU27INPqmiDqg5goe0pqR5qSoqMdek/CUZFywL46rEsiImleqiqoMyt4baXlu/1GLdNFf5zbcNmdr1YUWCZe47o+zUmb/DoStbw3cVsef9ALjjiPQA) format('woff');
      font-weight: normal;
      font-style: normal;
    }

    html {
      --lumo-icons-align-center: "\\ea01";
      --lumo-icons-align-left: "\\ea02";
      --lumo-icons-align-right: "\\ea03";
      --lumo-icons-angle-down: "\\ea04";
      --lumo-icons-angle-left: "\\ea05";
      --lumo-icons-angle-right: "\\ea06";
      --lumo-icons-angle-up: "\\ea07";
      --lumo-icons-arrow-down: "\\ea08";
      --lumo-icons-arrow-left: "\\ea09";
      --lumo-icons-arrow-right: "\\ea0a";
      --lumo-icons-arrow-up: "\\ea0b";
      --lumo-icons-bar-chart: "\\ea0c";
      --lumo-icons-bell: "\\ea0d";
      --lumo-icons-calendar: "\\ea0e";
      --lumo-icons-checkmark: "\\ea0f";
      --lumo-icons-chevron-down: "\\ea10";
      --lumo-icons-chevron-left: "\\ea11";
      --lumo-icons-chevron-right: "\\ea12";
      --lumo-icons-chevron-up: "\\ea13";
      --lumo-icons-clock: "\\ea14";
      --lumo-icons-cog: "\\ea15";
      --lumo-icons-cross: "\\ea16";
      --lumo-icons-download: "\\ea17";
      --lumo-icons-dropdown: "\\ea18";
      --lumo-icons-edit: "\\ea19";
      --lumo-icons-error: "\\ea1a";
      --lumo-icons-eye: "\\ea1b";
      --lumo-icons-eye-disabled: "\\ea1c";
      --lumo-icons-menu: "\\ea1d";
      --lumo-icons-minus: "\\ea1e";
      --lumo-icons-ordered-list: "\\ea1f";
      --lumo-icons-phone: "\\ea20";
      --lumo-icons-photo: "\\ea21";
      --lumo-icons-play: "\\ea22";
      --lumo-icons-plus: "\\ea23";
      --lumo-icons-redo: "\\ea24";
      --lumo-icons-reload: "\\ea25";
      --lumo-icons-search: "\\ea26";
      --lumo-icons-undo: "\\ea27";
      --lumo-icons-unordered-list: "\\ea28";
      --lumo-icons-upload: "\\ea29";
      --lumo-icons-user: "\\ea2a";
    }
  </style>
</custom-style>`,document.head.appendChild(KQ.content);const XQ=document.createElement("template");XQ.innerHTML=`<custom-style>
  <style>
    html {
      --lumo-size-xs: 1.625rem;
      --lumo-size-s: 1.875rem;
      --lumo-size-m: 2.25rem;
      --lumo-size-l: 2.75rem;
      --lumo-size-xl: 3.5rem;

      /* Icons */
      --lumo-icon-size-s: 1.25em;
      --lumo-icon-size-m: 1.5em;
      --lumo-icon-size-l: 2.25em;
      /* For backwards compatibility */
      --lumo-icon-size: var(--lumo-icon-size-m);
    }
  </style>
</custom-style>`,document.head.appendChild(XQ.content);const QQ=document.createElement("template");QQ.innerHTML=`<custom-style>
  <style>
    html {
      /* Square */
      --lumo-space-xs: 0.25rem;
      --lumo-space-s: 0.5rem;
      --lumo-space-m: 1rem;
      --lumo-space-l: 1.5rem;
      --lumo-space-xl: 2.5rem;

      /* Wide */
      --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);
      --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);
      --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);
      --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);
      --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);

      /* Tall */
      --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);
      --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);
      --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);
      --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);
      --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);
    }
  </style>
</custom-style>`,document.head.appendChild(QQ.content);const eee=document.createElement("template");eee.innerHTML=`<custom-style>
  <style>
    html {
      /* Border radius */
      --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */
      --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */
      --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */
      --lumo-border-radius: 0.25em; /* Deprecated */

      /* Shadow */
      --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);
      --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);
      --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);
      --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);
      --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);

      /* Clickable element cursor */
      --lumo-clickable-cursor: default;
    }
  </style>
</custom-style>`,document.head.appendChild(eee.content);const tee=document.createElement("template");tee.innerHTML=`<custom-style>
  <style>
    html {
      /* Font families */
      --lumo-font-family: -apple-system, BlinkMacSystemFont, "Roboto", "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

      /* Font sizes */
      --lumo-font-size-xxs: .75rem;
      --lumo-font-size-xs: .8125rem;
      --lumo-font-size-s: .875rem;
      --lumo-font-size-m: 1rem;
      --lumo-font-size-l: 1.125rem;
      --lumo-font-size-xl: 1.375rem;
      --lumo-font-size-xxl: 1.75rem;
      --lumo-font-size-xxxl: 2.5rem;

      /* Line heights */
      --lumo-line-height-xs: 1.25;
      --lumo-line-height-s: 1.375;
      --lumo-line-height-m: 1.625;
    }

  </style>
</custom-style><dom-module id="lumo-typography">
  <template>
    <style>
      html {
        font-family: var(--lumo-font-family);
        font-size: var(--lumo-font-size, var(--lumo-font-size-m));
        line-height: var(--lumo-line-height-m);
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Can’t combine with the above selector because that doesn’t work in browsers without native shadow dom */
      :host {
        font-family: var(--lumo-font-family);
        font-size: var(--lumo-font-size, var(--lumo-font-size-m));
        line-height: var(--lumo-line-height-m);
        -webkit-text-size-adjust: 100%;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      small,
      [theme~="font-size-s"] {
        font-size: var(--lumo-font-size-s);
        line-height: var(--lumo-line-height-s);
      }

      [theme~="font-size-xs"] {
        font-size: var(--lumo-font-size-xs);
        line-height: var(--lumo-line-height-xs);
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-weight: 600;
        line-height: var(--lumo-line-height-xs);
        margin-top: 1.25em;
      }

      h1 {
        font-size: var(--lumo-font-size-xxxl);
        margin-bottom: 0.75em;
      }

      h2 {
        font-size: var(--lumo-font-size-xxl);
        margin-bottom: 0.5em;
      }

      h3 {
        font-size: var(--lumo-font-size-xl);
        margin-bottom: 0.5em;
      }

      h4 {
        font-size: var(--lumo-font-size-l);
        margin-bottom: 0.5em;
      }

      h5 {
        font-size: var(--lumo-font-size-m);
        margin-bottom: 0.25em;
      }

      h6 {
        font-size: var(--lumo-font-size-xs);
        margin-bottom: 0;
        text-transform: uppercase;
        letter-spacing: 0.03em;
      }

      p,
      blockquote {
        margin-top: 0.5em;
        margin-bottom: 0.75em;
      }

      a {
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      hr {
        display: block;
        align-self: stretch;
        height: 1px;
        border: 0;
        padding: 0;
        margin: var(--lumo-space-s) calc(var(--lumo-border-radius-m) / 2);
        background-color: var(--lumo-contrast-10pct);
      }

      blockquote {
        border-left: 2px solid var(--lumo-contrast-30pct);
      }

      b,
      strong {
        font-weight: 600;
      }

      /* RTL specific styles */

      blockquote[dir="rtl"] {
        border-left: none;
        border-right: 2px solid var(--lumo-contrast-30pct);
      }

    </style>
  </template>
</dom-module>`,document.head.appendChild(tee.content);const iee=typeof window<"u"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0,q7=(t,e,i=null)=>{for(;e!==i;){const n=e.nextSibling;t.removeChild(e),e=n}},vh=`{{lit-${String(Math.random()).slice(2)}}}`,qye=`<!--${vh}-->`,nee=new RegExp(`${vh}|${qye}`),YS="$lit$";class Wye{constructor(e,i){this.parts=[],this.element=i;const n=[],r=[],s=document.createTreeWalker(i.content,133,null,!1);let o=0,a=-1,l=0;const{strings:u,values:{length:h}}=e;for(;l<h;){const p=s.nextNode();if(p!==null){if(a++,p.nodeType===1){if(p.hasAttributes()){const f=p.attributes,{length:g}=f;let v=0;for(let b=0;b<g;b++)ree(f[b].name,YS)&&v++;for(;v-- >0;){const b=u[l],_=z6.exec(b)[2],w=_.toLowerCase()+YS,S=p.getAttribute(w);p.removeAttribute(w);const C=S.split(nee);this.parts.push({type:"attribute",index:a,name:_,strings:C}),l+=C.length-1}}p.tagName==="TEMPLATE"&&(r.push(p),s.currentNode=p.content)}else if(p.nodeType===3){const f=p.data;if(f.indexOf(vh)>=0){const g=p.parentNode,v=f.split(nee),b=v.length-1;for(let _=0;_<b;_++){let w,S=v[_];if(S==="")w=wf();else{const C=z6.exec(S);C!==null&&ree(C[2],YS)&&(S=S.slice(0,C.index)+C[1]+C[2].slice(0,-YS.length)+C[3]),w=document.createTextNode(S)}g.insertBefore(w,p),this.parts.push({type:"node",index:++a})}v[b]===""?(g.insertBefore(wf(),p),n.push(p)):p.data=v[b],l+=b}}else if(p.nodeType===8)if(p.data===vh){const f=p.parentNode;p.previousSibling!==null&&a!==o||(a++,f.insertBefore(wf(),p)),o=a,this.parts.push({type:"node",index:a}),p.nextSibling===null?p.data="":(n.push(p),a--),l++}else{let f=-1;for(;(f=p.data.indexOf(vh,f+1))!==-1;)this.parts.push({type:"node",index:-1}),l++}}else s.currentNode=r.pop()}for(const p of n)p.parentNode.removeChild(p)}}const ree=(t,e)=>{const i=t.length-e.length;return i>=0&&t.slice(i)===e},Jye=t=>t.index!==-1,wf=()=>document.createComment(""),z6=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,W7=133;function Yye(t,e){const{element:{content:i},parts:n}=t,r=document.createTreeWalker(i,W7,null,!1);let s=VE(n),o=n[s],a=-1,l=0;const u=[];let h=null;for(;r.nextNode();){a++;const p=r.currentNode;for(p.previousSibling===h&&(h=null),e.has(p)&&(u.push(p),h===null&&(h=p)),h!==null&&l++;o!==void 0&&o.index===a;)o.index=h!==null?-1:o.index-l,s=VE(n,s),o=n[s]}u.forEach(p=>p.parentNode.removeChild(p))}const tet=t=>{let e=t.nodeType===11?0:1;const i=document.createTreeWalker(t,W7,null,!1);for(;i.nextNode();)e++;return e},VE=(t,e=-1)=>{for(let i=e+1;i<t.length;i++){const n=t[i];if(Jye(n))return i}return-1};function iet(t,e,i=null){const{element:{content:n},parts:r}=t;if(i==null)return void n.appendChild(e);const s=document.createTreeWalker(n,W7,null,!1);let o=VE(r),a=0,l=-1;for(;s.nextNode();)for(l++,s.currentNode===i&&(a=tet(e),i.parentNode.insertBefore(e,i));o!==-1&&r[o].index===l;){if(a>0){for(;o!==-1;)r[o].index+=a,o=VE(r,o);return}o=VE(r,o)}}const net=new WeakMap,ret=t=>typeof t=="function"&&net.has(t),see={},oee={};let j6=class{constructor(e,i,n){this.__parts=[],this.template=e,this.processor=i,this.options=n}update(e){let i=0;for(const n of this.__parts)n!==void 0&&n.setValue(e[i]),i++;for(const n of this.__parts)n!==void 0&&n.commit()}_clone(){const e=iee?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),i=[],n=this.template.parts,r=document.createTreeWalker(e,133,null,!1);let s,o=0,a=0,l=r.nextNode();for(;o<n.length;)if(s=n[o],Jye(s)){for(;a<s.index;)a++,l.nodeName==="TEMPLATE"&&(i.push(l),r.currentNode=l.content),(l=r.nextNode())===null&&(r.currentNode=i.pop(),l=r.nextNode());if(s.type==="node"){const u=this.processor.handleTextExpression(this.options);u.insertAfterNode(l.previousSibling),this.__parts.push(u)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,s.name,s.strings,this.options));o++}else this.__parts.push(void 0),o++;return iee&&(document.adoptNode(e),customElements.upgrade(e)),e}};const aee=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),set=` ${vh} `;let oet=class{constructor(e,i,n,r){this.strings=e,this.values=i,this.type=n,this.processor=r}getHTML(){const e=this.strings.length-1;let i="",n=!1;for(let r=0;r<e;r++){const s=this.strings[r],o=s.lastIndexOf("<!--");n=(o>-1||n)&&s.indexOf("-->",o+1)===-1;const a=z6.exec(s);i+=a===null?s+(n?set:qye):s.substr(0,a.index)+a[1]+a[2]+YS+a[3]+vh}return i+=this.strings[e],i}getTemplateElement(){const e=document.createElement("template");let i=this.getHTML();return aee!==void 0&&(i=aee.createHTML(i)),e.innerHTML=i,e}};const aet=t=>t===null||!(typeof t=="object"||typeof t=="function"),cet=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);class J7{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(wf()),this.endNode=e.appendChild(wf())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=wf()),e.__insert(this.endNode=wf())}insertAfterPart(e){e.__insert(this.startNode=wf()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(this.startNode.parentNode===null)return;for(;ret(this.__pendingValue);){const i=this.__pendingValue;this.__pendingValue=see,i(this)}const e=this.__pendingValue;e!==see&&(aet(e)?e!==this.value&&this.__commitText(e):e instanceof oet?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):cet(e)?this.__commitIterable(e):e===oee?(this.value=oee,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const i=this.startNode.nextSibling,n=typeof(e=e??"")=="string"?e:String(e);i===this.endNode.previousSibling&&i.nodeType===3?i.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}__commitTemplateResult(e){const i=this.options.templateFactory(e);if(this.value instanceof j6&&this.value.template===i)this.value.update(e.values);else{const n=new j6(i,e.processor,this.options),r=n._clone();n.update(e.values),this.__commitNode(r),this.value=n}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const i=this.value;let n,r=0;for(const s of e)n=i[r],n===void 0&&(n=new J7(this.options),i.push(n),r===0?n.appendIntoPart(this):n.insertAfterPart(i[r-1])),n.setValue(s),n.commit(),r++;r<i.length&&(i.length=r,this.clear(n&&n.endNode))}clear(e=this.startNode){q7(this.startNode.parentNode,e.nextSibling,this.endNode)}}let uet=!1;function det(t){let e=tI.get(t.type);e===void 0&&(e={stringsArray:new WeakMap,keyString:new Map},tI.set(t.type,e));let i=e.stringsArray.get(t.strings);if(i!==void 0)return i;const n=t.strings.join(vh);return i=e.keyString.get(n),i===void 0&&(i=new Wye(t,t.getTemplateElement()),e.keyString.set(n,i)),e.stringsArray.set(t.strings,i),i}(()=>{try{const t={get capture(){return uet=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch{}})();const tI=new Map,h_=new WeakMap,het=(t,e,i)=>{let n=h_.get(e);n===void 0&&(q7(e,e.firstChild),h_.set(e,n=new J7(Object.assign({templateFactory:det},i))),n.appendInto(e)),n.setValue(t),n.commit()};typeof window<"u"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const Zye=(t,e)=>`${t}--${e}`;let RO=!0;window.ShadyCSS===void 0?RO=!1:window.ShadyCSS.prepareTemplateDom===void 0&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),RO=!1);const pet=t=>e=>{const i=Zye(e.type,t);let n=tI.get(i);n===void 0&&(n={stringsArray:new WeakMap,keyString:new Map},tI.set(i,n));let r=n.stringsArray.get(e.strings);if(r!==void 0)return r;const s=e.strings.join(vh);if(r=n.keyString.get(s),r===void 0){const o=e.getTemplateElement();RO&&window.ShadyCSS.prepareTemplateDom(o,t),r=new Wye(e,o),n.keyString.set(s,r)}return n.stringsArray.set(e.strings,r),r},fet=["html","svg"],met=t=>{fet.forEach(e=>{const i=tI.get(Zye(e,t));i!==void 0&&i.keyString.forEach(n=>{const{element:{content:r}}=n,s=new Set;Array.from(r.querySelectorAll("style")).forEach(o=>{s.add(o)}),Yye(n,s)})})},Kye=new Set,get=(t,e,i)=>{Kye.add(t);const n=i?i.element:document.createElement("template"),r=e.querySelectorAll("style"),{length:s}=r;if(s===0)return void window.ShadyCSS.prepareTemplateStyles(n,t);const o=document.createElement("style");for(let u=0;u<s;u++){const h=r[u];h.parentNode.removeChild(h),o.textContent+=h.textContent}met(t);const a=n.content;i?iet(i,o,a.firstChild):a.insertBefore(o,a.firstChild),window.ShadyCSS.prepareTemplateStyles(n,t);const l=a.querySelector("style");if(window.ShadyCSS.nativeShadow&&l!==null)e.insertBefore(l.cloneNode(!0),e.firstChild);else if(i){a.insertBefore(o,a.firstChild);const u=new Set;u.add(o),Yye(i,u)}},yet=(t,e,i)=>{if(!i||typeof i!="object"||!i.scopeName)throw new Error("The `scopeName` option is required.");const n=i.scopeName,r=h_.has(e),s=RO&&e.nodeType===11&&!!e.host,o=s&&!Kye.has(n),a=o?document.createDocumentFragment():e;if(het(t,a,Object.assign({templateFactory:pet(n)},i)),o){const l=h_.get(a);h_.delete(a);const u=l.value instanceof j6?l.value.template:void 0;get(n,a,u),q7(e,e.firstChild),e.appendChild(a),h_.set(e,l)}!r&&s&&window.ShadyCSS.styleElement(e.host)};window.JSCompiler_renameProperty=(t,e)=>t;const V6={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return t!==null;case Number:return t===null?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}},Xye=(t,e)=>e!==t&&(e==e||t==t),VF={attribute:!0,type:String,converter:V6,reflect:!1,hasChanged:Xye},UF=1,BF=4,HF=8,GF=16,U6="finalized";class Qye extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach((i,n)=>{const r=this._attributeNameForProperty(n,i);r!==void 0&&(this._attributeToPropertyMap.set(r,n),e.push(r))}),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;e!==void 0&&e.forEach((i,n)=>this._classProperties.set(n,i))}}static createProperty(e,i=VF){if(this._ensureClassProperties(),this._classProperties.set(e,i),i.noAccessor||this.prototype.hasOwnProperty(e))return;const n=typeof e=="symbol"?Symbol():`__${e}`,r=this.getPropertyDescriptor(e,n,i);r!==void 0&&Object.defineProperty(this.prototype,e,r)}static getPropertyDescriptor(e,i,n){return{get(){return this[i]},set(r){const s=this[e];this[i]=r,this.requestUpdateInternal(e,s,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||VF}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty(U6)||e.finalize(),this[U6]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const i=this.properties,n=[...Object.getOwnPropertyNames(i),...typeof Object.getOwnPropertySymbols=="function"?Object.getOwnPropertySymbols(i):[]];for(const r of n)this.createProperty(r,i[r])}}static _attributeNameForProperty(e,i){const n=i.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}static _valueHasChanged(e,i,n=Xye){return n(e,i)}static _propertyValueFromAttribute(e,i){const n=i.type,r=i.converter||V6,s=typeof r=="function"?r:r.fromAttribute;return s?s(e,n):e}static _propertyValueToAttribute(e,i){if(i.reflect===void 0)return;const n=i.type,r=i.converter;return(r&&r.toAttribute||V6.toAttribute)(e,n)}initialize(){this._updateState=0,this._updatePromise=new Promise(e=>this._enableUpdatingResolver=e),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach((e,i)=>{if(this.hasOwnProperty(i)){const n=this[i];delete this[i],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(i,n)}})}_applyInstanceProperties(){this._instanceProperties.forEach((e,i)=>this[i]=e),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){this._enableUpdatingResolver!==void 0&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,i,n){i!==n&&this._attributeToProperty(e,n)}_propertyToAttribute(e,i,n=VF){const r=this.constructor,s=r._attributeNameForProperty(e,n);if(s!==void 0){const o=r._propertyValueToAttribute(i,n);if(o===void 0)return;this._updateState=this._updateState|HF,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._updateState=this._updateState&~HF}}_attributeToProperty(e,i){if(this._updateState&HF)return;const n=this.constructor,r=n._attributeToPropertyMap.get(e);if(r!==void 0){const s=n.getPropertyOptions(r);this._updateState=this._updateState|GF,this[r]=n._propertyValueFromAttribute(i,s),this._updateState=this._updateState&~GF}}requestUpdateInternal(e,i,n){let r=!0;if(e!==void 0){const s=this.constructor;n=n||s.getPropertyOptions(e),s._valueHasChanged(this[e],i,n.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,i),n.reflect!==!0||this._updateState&GF||(this._reflectingProperties===void 0&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,n))):r=!1}!this._hasRequestedUpdate&&r&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,i){return this.requestUpdateInternal(e,i),this.updateComplete}async _enqueueUpdate(){this._updateState=this._updateState|BF;try{await this._updatePromise}catch{}const e=this.performUpdate();return e!=null&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return this._updateState&BF}get hasUpdated(){return this._updateState&UF}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1;const i=this._changedProperties;try{e=this.shouldUpdate(i),e?this.update(i):this._markUpdated()}catch(n){throw e=!1,this._markUpdated(),n}e&&(this._updateState&UF||(this._updateState=this._updateState|UF,this.firstUpdated(i)),this.updated(i))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~BF}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){this._reflectingProperties!==void 0&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((i,n)=>this._propertyToAttribute(n,this[n],i)),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}Qye[U6]=!0;const B6=window.ShadowRoot&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Y7=Symbol();class XR{constructor(e,i){if(i!==Y7)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return this._styleSheet===void 0&&(B6?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}const vet=t=>new XR(String(t),Y7),bet=t=>{if(t instanceof XR)return t.cssText;if(typeof t=="number")return t;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${t}. Use 'unsafeCSS' to pass non-literal values, but
            take care to ensure page security.`)},iI=(t,...e)=>{const i=e.reduce((n,r,s)=>n+bet(r)+t[s+1],t[0]);return new XR(i,Y7)};(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const lee={};class qF extends Qye{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const i=(s,o)=>s.reduceRight((a,l)=>Array.isArray(l)?i(l,a):(a.add(l),a),o),n=i(e,new Set),r=[];n.forEach(s=>r.unshift(s)),this._styles=r}else this._styles=e===void 0?[]:[e];this._styles=this._styles.map(i=>{if(i instanceof CSSStyleSheet&&!B6){const n=Array.prototype.slice.call(i.cssRules).reduce((r,s)=>r+s.cssText,"");return vet(n)}return i})}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const e=this.constructor._styles;e.length!==0&&(window.ShadyCSS===void 0||window.ShadyCSS.nativeShadow?B6?this.renderRoot.adoptedStyleSheets=e.map(i=>i instanceof CSSStyleSheet?i:i.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(i=>i.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&window.ShadyCSS!==void 0&&window.ShadyCSS.styleElement(this)}update(e){const i=this.render();super.update(e),i!==lee&&this.constructor.render(i,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(n=>{const r=document.createElement("style");r.textContent=n.cssText,this.renderRoot.appendChild(r)}))}render(){return lee}}qF.finalized=!0,qF.render=yet,qF.shadowRootOptions={mode:"open"};let cee=0;const WF={},nI=(t,e,i)=>{const n=i&&i.moduleId||"custom-style-module-"+cee++;Array.isArray(e)||(e=e?[e]:[]),e.forEach(o=>{if(!(o instanceof XR))throw new Error("An item in styles is not of type CSSResult. Use `unsafeCSS` or `css`.");if(!WF[o]){const a=document.createElement("dom-module");a.innerHTML=`
        <template>
          <style>${o.toString()}</style>
        </template>
      `;const l="custom-style-module-"+cee++;a.register(l),WF[o]=l}});const r=document.createElement("dom-module");if(t){const o=window.customElements&&window.customElements.get(t);o&&o.hasOwnProperty("__finalized")&&console.warn(`The custom element definition for "${t}"
      was finalized before a style module was registered.
      Make sure to add component specific style modules before
      importing the corresponding custom element.`),r.setAttribute("theme-for",t)}const s=i&&i.include||[];r.innerHTML=`
    <template>
      ${s.map(o=>`<style include=${o}></style>`)}
      ${e.map(o=>`<style include=${WF[o]}></style>`)}
    </template>
  `,r.register(n)};nI("vaadin-checkbox",iI`
    :host {
      -webkit-tap-highlight-color: transparent;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
      cursor: default;
      outline: none;
    }

    [part='label']:not([empty]) {
      margin: 0.1875em 0.875em 0.1875em 0.375em;
    }

    [part='checkbox'] {
      width: calc(1em + 2px);
      height: calc(1em + 2px);
      margin: 0.1875em;
      position: relative;
      border-radius: var(--lumo-border-radius-s);
      background-color: var(--lumo-contrast-20pct);
      transition: transform 0.2s cubic-bezier(0.12, 0.32, 0.54, 2), background-color 0.15s;
      pointer-events: none;
      line-height: 1.2;
    }

    :host([indeterminate]) [part='checkbox'],
    :host([checked]) [part='checkbox'] {
      background-color: var(--lumo-primary-color);
    }

    /* Needed to align the checkbox nicely on the baseline */
    [part='checkbox']::before {
      content: '\\2003';
    }

    /* Checkmark */
    [part='checkbox']::after {
      content: '';
      display: inline-block;
      width: 0;
      height: 0;
      border: 0 solid var(--lumo-primary-contrast-color);
      border-width: 0.1875em 0 0 0.1875em;
      box-sizing: border-box;
      transform-origin: 0 0;
      position: absolute;
      top: 0.8125em;
      left: 0.5em;
      transform: scale(0.55) rotate(-135deg);
      opacity: 0;
    }

    :host([checked]) [part='checkbox']::after {
      opacity: 1;
      width: 0.625em;
      height: 1.0625em;
    }

    /* Indeterminate checkmark */
    :host([indeterminate]) [part='checkbox']::after {
      transform: none;
      opacity: 1;
      top: 45%;
      height: 10%;
      left: 22%;
      right: 22%;
      width: auto;
      border: 0;
      background-color: var(--lumo-primary-contrast-color);
      transition: opacity 0.25s;
    }

    /* Focus ring */
    :host([focus-ring]) [part='checkbox'] {
      box-shadow: 0 0 0 3px var(--lumo-primary-color-50pct);
    }

    /* Disabled */
    :host([disabled]) {
      pointer-events: none;
      color: var(--lumo-disabled-text-color);
    }

    :host([disabled]) [part='label'] ::slotted(*) {
      color: inherit;
    }

    :host([disabled]) [part='checkbox'] {
      background-color: var(--lumo-contrast-10pct);
    }

    :host([disabled]) [part='checkbox']::after {
      border-color: var(--lumo-contrast-30pct);
    }

    :host([indeterminate][disabled]) [part='checkbox']::after {
      background-color: var(--lumo-contrast-30pct);
    }

    /* RTL specific styles */
    :host([dir='rtl']) [part='label']:not([empty]) {
      margin: 0.1875em 0.375em 0.1875em 0.875em;
    }

    /* Transition the checkmark if activated with the mouse (disabled for grid select-all this way) */
    :host(:hover) [part='checkbox']::after {
      transition: width 0.1s, height 0.25s;
    }

    /* Used for activation "halo" */
    [part='checkbox']::before {
      color: transparent;
      display: inline-block;
      width: 100%;
      height: 100%;
      border-radius: inherit;
      background-color: inherit;
      transform: scale(1.4);
      opacity: 0;
      transition: transform 0.1s, opacity 0.8s;
    }

    /* Hover */
    :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
      background-color: var(--lumo-contrast-30pct);
    }

    /* Disable hover for touch devices */
    @media (pointer: coarse) {
      :host(:not([checked]):not([indeterminate]):not([disabled]):hover) [part='checkbox'] {
        background-color: var(--lumo-contrast-20pct);
      }
    }

    /* Active */
    :host([active]) [part='checkbox'] {
      transform: scale(0.9);
      transition-duration: 0.05s;
    }

    :host([active][checked]) [part='checkbox'] {
      transform: scale(1.1);
    }

    :host([active]:not([checked])) [part='checkbox']::before {
      transition-duration: 0.01s, 0.01s;
      transform: scale(0);
      opacity: 0.4;
    }
  `,{moduleId:"lumo-checkbox"});let _et=0;const Da=function(t){let e=t.__mixinApplications;e||(e=new WeakMap,t.__mixinApplications=e);let i=_et++;function n(r){let s=r.__mixinSet;if(s&&s[i])return r;let o=e,a=o.get(r);if(!a){a=t(r),o.set(r,a);let l=Object.create(a.__mixinSet||s||null);l[i]=!0,a.__mixinSet=l}return a}return n},ze=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?t=>ShadyDOM.patch(t):t=>t;function H6(t){return t.indexOf(".")>=0}function Bh(t){let e=t.indexOf(".");return e===-1?t:t.slice(0,e)}function e0e(t,e){return t.indexOf(e+".")===0}function rI(t,e){return e.indexOf(t+".")===0}function sI(t,e,i){return e+i.slice(t.length)}function wet(t,e){return t===e||e0e(t,e)||rI(t,e)}function ZS(t){if(Array.isArray(t)){let e=[];for(let i=0;i<t.length;i++){let n=t[i].toString().split(".");for(let r=0;r<n.length;r++)e.push(n[r])}return e.join(".")}return t}function t0e(t){return Array.isArray(t)?ZS(t).split("."):t.toString().split(".")}function Vs(t,e,i){let n=t,r=t0e(e);for(let s=0;s<r.length;s++){if(!n)return;n=n[r[s]]}return i&&(i.path=r.join(".")),n}function uee(t,e,i){let n=t,r=t0e(e),s=r[r.length-1];if(r.length>1){for(let o=0;o<r.length-1;o++)if(n=n[r[o]],!n)return;n[s]=i}else n[e]=i;return r.join(".")}const LO={},xet=/-[a-z]/g,Eet=/([A-Z])/g;function i0e(t){return LO[t]||(LO[t]=t.indexOf("-")<0?t:t.replace(xet,e=>e[1].toUpperCase()))}function QR(t){return LO[t]||(LO[t]=t.replace(Eet,"-$1").toLowerCase())}let Cet=0,n0e=0,U_=[],Iet=0,G6=!1,r0e=document.createTextNode("");function Tet(){G6=!1;const t=U_.length;for(let e=0;e<t;e++){let i=U_[e];if(i)try{i()}catch(n){setTimeout(()=>{throw n})}}U_.splice(0,t),n0e+=t}new window.MutationObserver(Tet).observe(r0e,{characterData:!0});const Ac={after:t=>({run:e=>window.setTimeout(e,t),cancel(e){window.clearTimeout(e)}}),run:(t,e)=>window.setTimeout(t,e),cancel(t){window.clearTimeout(t)}},bh={run:t=>window.requestAnimationFrame(t),cancel(t){window.cancelAnimationFrame(t)}},s0e={run:t=>window.requestIdleCallback?window.requestIdleCallback(t):window.setTimeout(t,16),cancel(t){window.cancelIdleCallback?window.cancelIdleCallback(t):window.clearTimeout(t)}},ml={run:t=>(G6||(G6=!0,r0e.textContent=Iet++),U_.push(t),Cet++),cancel(t){const e=t-n0e;if(e>=0){if(!U_[e])throw new Error("invalid async handle: "+t);U_[e]=null}}},ket=ml,o0e=Da(t=>{class e extends t{static createProperties(n){const r=this.prototype;for(let s in n)s in r||r._createPropertyAccessor(s)}static attributeNameForProperty(n){return n.toLowerCase()}static typeForProperty(n){}_createPropertyAccessor(n,r){this._addPropertyToAttributeMap(n),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[n]||(this.__dataHasAccessor[n]=!0,this._definePropertyAccessor(n,r))}_addPropertyToAttributeMap(n){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let r=this.__dataAttributes[n];return r||(r=this.constructor.attributeNameForProperty(n),this.__dataAttributes[r]=n),r}_definePropertyAccessor(n,r){Object.defineProperty(this,n,{get(){return this.__data[n]},set:r?function(){}:function(s){this._setPendingProperty(n,s,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let n in this.__dataHasAccessor)this.hasOwnProperty(n)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[n]=this[n],delete this[n])}_initializeInstanceProperties(n){Object.assign(this,n)}_setProperty(n,r){this._setPendingProperty(n,r)&&this._invalidateProperties()}_getProperty(n){return this.__data[n]}_setPendingProperty(n,r,s){let o=this.__data[n],a=this._shouldPropertyChange(n,r,o);return a&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(n in this.__dataOld)&&(this.__dataOld[n]=o),this.__data[n]=r,this.__dataPending[n]=r),a}_isPropertyPending(n){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(n))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,ket.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const n=this.__data,r=this.__dataPending,s=this.__dataOld;this._shouldPropertiesChange(n,r,s)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(n,r,s)),this.__dataCounter--}_shouldPropertiesChange(n,r,s){return Boolean(r)}_propertiesChanged(n,r,s){}_shouldPropertyChange(n,r,s){return s!==r&&(s==s||r==r)}attributeChangedCallback(n,r,s,o){r!==s&&this._attributeToProperty(n,s),super.attributeChangedCallback&&super.attributeChangedCallback(n,r,s,o)}_attributeToProperty(n,r,s){if(!this.__serializing){const o=this.__dataAttributes,a=o&&o[n]||n;this[a]=this._deserializeValue(r,s||this.constructor.typeForProperty(a))}}_propertyToAttribute(n,r,s){this.__serializing=!0,s=arguments.length<3?this[n]:s,this._valueToNodeAttribute(this,s,r||this.constructor.attributeNameForProperty(n)),this.__serializing=!1}_valueToNodeAttribute(n,r,s){const o=this._serializeValue(r);s!=="class"&&s!=="name"&&s!=="slot"||(n=ze(n)),o===void 0?n.removeAttribute(s):n.setAttribute(s,o)}_serializeValue(n){return typeof n=="boolean"?n?"":void 0:n!=null?n.toString():void 0}_deserializeValue(n,r){switch(r){case Boolean:return n!==null;case Number:return Number(n);default:return n}}}return e}),a0e={};let yk=HTMLElement.prototype;for(;yk;){let t=Object.getOwnPropertyNames(yk);for(let e=0;e<t.length;e++)a0e[t[e]]=!0;yk=Object.getPrototypeOf(yk)}function $et(t,e){if(!a0e[e]){let i=t[e];i!==void 0&&(t.__data?t._setPendingProperty(e,i):(t.__dataProto?t.hasOwnProperty(JSCompiler_renameProperty("__dataProto",t))||(t.__dataProto=Object.create(t.__dataProto)):t.__dataProto={},t.__dataProto[e]=i))}}const l0e=Da(t=>{const e=o0e(t);class i extends e{static createPropertiesForAttributes(){let r=this.observedAttributes;for(let s=0;s<r.length;s++)this.prototype._createPropertyAccessor(i0e(r[s]))}static attributeNameForProperty(r){return QR(r)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(r){for(let s in r)this._setProperty(s,r[s])}_ensureAttribute(r,s){const o=this;o.hasAttribute(r)||this._valueToNodeAttribute(o,s,r)}_serializeValue(r){if(typeof r=="object"){if(r instanceof Date)return r.toString();if(r)try{return JSON.stringify(r)}catch{return""}}return super._serializeValue(r)}_deserializeValue(r,s){let o;switch(s){case Object:try{o=JSON.parse(r)}catch{o=r}break;case Array:try{o=JSON.parse(r)}catch{o=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${r}`)}break;case Date:o=isNaN(r)?String(r):Number(r),o=new Date(o);break;default:o=super._deserializeValue(r,s)}return o}_definePropertyAccessor(r,s){$et(this,r),super._definePropertyAccessor(r,s)}_hasAccessor(r){return this.__dataHasAccessor&&this.__dataHasAccessor[r]}_isPropertyPending(r){return Boolean(this.__dataPending&&r in this.__dataPending)}}return i}),Aet={"dom-if":!0,"dom-repeat":!0};let dee=!1,hee=!1;function Met(){if(!dee){dee=!0;const t=document.createElement("textarea");t.placeholder="a",hee=t.placeholder===t.textContent}return hee}function Oet(t){Met()&&t.localName==="textarea"&&t.placeholder&&t.placeholder===t.textContent&&(t.textContent=null)}function Pet(t){let e=t.getAttribute("is");if(e&&Aet[e]){let i=t;for(i.removeAttribute("is"),t=i.ownerDocument.createElement(e),i.parentNode.replaceChild(t,i),t.appendChild(i);i.attributes.length;)t.setAttribute(i.attributes[0].name,i.attributes[0].value),i.removeAttribute(i.attributes[0].name)}return t}function c0e(t,e){let i=e.parentInfo&&c0e(t,e.parentInfo);if(!i)return t;for(let n=i.firstChild,r=0;n;n=n.nextSibling)if(e.parentIndex===r++)return n}function Ret(t,e,i,n){n.id&&(e[n.id]=i)}function Let(t,e,i){if(i.events&&i.events.length)for(let n,r=0,s=i.events;r<s.length&&(n=s[r]);r++)t._addMethodEventListenerToNode(e,n.name,n.value,t)}function Det(t,e,i,n){i.templateInfo&&(e._templateInfo=i.templateInfo,e._parentTemplateInfo=n)}function Fet(t,e,i){return t=t._methodHost||t,function(n){t[i]?t[i](n,n.detail):console.warn("listener method `"+i+"` not defined")}}const Net=Da(t=>{class e extends t{static _parseTemplate(n,r){if(!n._templateInfo){let s=n._templateInfo={};s.nodeInfoList=[],s.nestedTemplate=Boolean(r),s.stripWhiteSpace=r&&r.stripWhiteSpace||n.hasAttribute("strip-whitespace"),this._parseTemplateContent(n,s,{parent:null})}return n._templateInfo}static _parseTemplateContent(n,r,s){return this._parseTemplateNode(n.content,r,s)}static _parseTemplateNode(n,r,s){let o=!1,a=n;return a.localName!="template"||a.hasAttribute("preserve-content")?a.localName==="slot"&&(r.hasInsertionPoint=!0):o=this._parseTemplateNestedTemplate(a,r,s)||o,Oet(a),a.firstChild&&this._parseTemplateChildNodes(a,r,s),a.hasAttributes&&a.hasAttributes()&&(o=this._parseTemplateNodeAttributes(a,r,s)||o),o||s.noted}static _parseTemplateChildNodes(n,r,s){if(n.localName!=="script"&&n.localName!=="style")for(let o,a=n.firstChild,l=0;a;a=o){if(a.localName=="template"&&(a=Pet(a)),o=a.nextSibling,a.nodeType===Node.TEXT_NODE){let h=o;for(;h&&h.nodeType===Node.TEXT_NODE;)a.textContent+=h.textContent,o=h.nextSibling,n.removeChild(h),h=o;if(r.stripWhiteSpace&&!a.textContent.trim()){n.removeChild(a);continue}}let u={parentIndex:l,parentInfo:s};this._parseTemplateNode(a,r,u)&&(u.infoIndex=r.nodeInfoList.push(u)-1),a.parentNode&&l++}}static _parseTemplateNestedTemplate(n,r,s){let o=n,a=this._parseTemplate(o,r);return(a.content=o.content.ownerDocument.createDocumentFragment()).appendChild(o.content),s.templateInfo=a,!0}static _parseTemplateNodeAttributes(n,r,s){let o=!1,a=Array.from(n.attributes);for(let l,u=a.length-1;l=a[u];u--)o=this._parseTemplateNodeAttribute(n,r,s,l.name,l.value)||o;return o}static _parseTemplateNodeAttribute(n,r,s,o,a){return o.slice(0,3)==="on-"?(n.removeAttribute(o),s.events=s.events||[],s.events.push({name:o.slice(3),value:a}),!0):o==="id"&&(s.id=a,!0)}static _contentForTemplate(n){let r=n._templateInfo;return r&&r.content||n.content}_stampTemplate(n,r){n&&!n.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(n);let s=(r=r||this.constructor._parseTemplate(n)).nodeInfoList,o=r.content||n.content,a=document.importNode(o,!0);a.__noInsertionPoint=!r.hasInsertionPoint;let l=a.nodeList=new Array(s.length);a.$={};for(let u,h=0,p=s.length;h<p&&(u=s[h]);h++){let f=l[h]=c0e(a,u);Ret(this,a.$,f,u),Det(this,f,u,r),Let(this,f,u)}return a}_addMethodEventListenerToNode(n,r,s,o){let a=Fet(o=o||n,r,s);return this._addEventListenerToNode(n,r,a),a}_addEventListenerToNode(n,r,s){n.addEventListener(r,s)}_removeEventListenerFromNode(n,r,s){n.removeEventListener(r,s)}}return e});let oI=0;const aI=[],Rt={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},u0e="__computeInfo",zet=/[A-Z]/;function JF(t,e,i){let n=t[e];if(n){if(!t.hasOwnProperty(e)&&(n=t[e]=Object.create(t[e]),i))for(let r in n){let s=n[r],o=n[r]=Array(s.length);for(let a=0;a<s.length;a++)o[a]=s[a]}}else n=t[e]={};return n}function KS(t,e,i,n,r,s){if(e){let o=!1;const a=oI++;for(let l in i){let u=e[r?Bh(l):l];if(u)for(let h,p=0,f=u.length;p<f&&(h=u[p]);p++)h.info&&h.info.lastRun===a||r&&!Z7(l,h.trigger)||(h.info&&(h.info.lastRun=a),h.fn(t,l,i,n,h.info,r,s),o=!0)}return o}return!1}function jet(t,e,i,n,r,s,o,a){let l=!1,u=e[o?Bh(n):n];if(u)for(let h,p=0,f=u.length;p<f&&(h=u[p]);p++)h.info&&h.info.lastRun===i||o&&!Z7(n,h.trigger)||(h.info&&(h.info.lastRun=i),h.fn(t,n,r,s,h.info,o,a),l=!0);return l}function Z7(t,e){if(e){let i=e.name;return i==t||!(!e.structured||!e0e(i,t))||!(!e.wildcard||!rI(i,t))}return!0}function pee(t,e,i,n,r){let s=typeof r.method=="string"?t[r.method]:r.method,o=r.property;s?s.call(t,t.__data[o],n[o]):r.dynamicFn||console.warn("observer method `"+r.method+"` not defined")}function Vet(t,e,i,n,r){let s,o,a=t[Rt.NOTIFY],l=oI++;for(let u in e)e[u]&&(a&&jet(t,a,l,u,i,n,r)||r&&Uet(t,u,i))&&(s=!0);s&&(o=t.__dataHost)&&o._invalidateProperties&&o._invalidateProperties()}function Uet(t,e,i){let n=Bh(e);return n!==e?(d0e(t,QR(n)+"-changed",i[e],e),!0):!1}function d0e(t,e,i,n){let r={value:i,queueProperty:!0};n&&(r.path=n),ze(t).dispatchEvent(new CustomEvent(e,{detail:r}))}function Bet(t,e,i,n,r,s){let o=(s?Bh(e):e)!=e?e:null,a=o?Vs(t,o):t.__data[e];o&&a===void 0&&(a=i[e]),d0e(t,r.eventName,a,o)}function Het(t,e,i,n,r){let s,o=t.detail,a=o&&o.path;a?(n=sI(i,n,a),s=o&&o.value):s=t.currentTarget[i],s=r?!s:s,e[Rt.READ_ONLY]&&e[Rt.READ_ONLY][n]||!e._setPendingPropertyOrPath(n,s,!0,Boolean(a))||o&&o.queueProperty||e._invalidateProperties()}function Get(t,e,i,n,r){let s=t.__data[e];PO&&(s=PO(s,r.attrName,"attribute",t)),t._propertyToAttribute(e,r.attrName,s)}function qet(t,e,i,n){let r=t[Rt.COMPUTE];if(r)if(VQe){oI++;const s=Jet(t),o=[];for(let l in e)fee(l,r,o,s,n);let a;for(;a=o.shift();)h0e(t,"",e,i,a)&&fee(a.methodInfo,r,o,s,n);Object.assign(i,t.__dataOld),Object.assign(e,t.__dataPending),t.__dataPending=null}else{let s=e;for(;KS(t,r,s,i,n);)Object.assign(i,t.__dataOld),Object.assign(e,t.__dataPending),s=t.__dataPending,t.__dataPending=null}}const Wet=(t,e,i)=>{let n=0,r=e.length-1,s=-1;for(;n<=r;){const o=n+r>>1,a=i.get(e[o].methodInfo)-i.get(t.methodInfo);if(a<0)n=o+1;else{if(!(a>0)){s=o;break}r=o-1}}s<0&&(s=r+1),e.splice(s,0,t)},fee=(t,e,i,n,r)=>{const s=e[r?Bh(t):t];if(s)for(let o=0;o<s.length;o++){const a=s[o];a.info.lastRun===oI||r&&!Z7(t,a.trigger)||(a.info.lastRun=oI,Wet(a.info,i,n))}};function Jet(t){let e=t.constructor.__orderedComputedDeps;if(!e){e=new Map;const i=t[Rt.COMPUTE];let n,{counts:r,ready:s,total:o}=Yet(t);for(;n=s.shift();){e.set(n,e.size);const a=i[n];a&&a.forEach(l=>{const u=l.info.methodInfo;--o,--r[u]==0&&s.push(u)})}o!==0&&console.warn(`Computed graph for ${t.localName} incomplete; circular?`),t.constructor.__orderedComputedDeps=e}return e}function Yet(t){const e=t[u0e],i={},n=t[Rt.COMPUTE],r=[];let s=0;for(let o in e){const a=e[o];s+=i[o]=a.args.filter(l=>!l.literal).length+(a.dynamicFn?1:0)}for(let o in n)e[o]||r.push(o);return{counts:i,ready:r,total:s}}function h0e(t,e,i,n,r){let s=q6(t,e,i,n,r);if(s===aI)return!1;let o=r.methodInfo;return t.__dataHasAccessor&&t.__dataHasAccessor[o]?t._setPendingProperty(o,s,!0):(t[o]=s,!1)}function Zet(t,e,i){let n=t.__dataLinkedPaths;if(n){let r;for(let s in n){let o=n[s];rI(s,e)?(r=sI(s,o,e),t._setPendingPropertyOrPath(r,i,!0,!0)):rI(o,e)&&(r=sI(o,s,e),t._setPendingPropertyOrPath(r,i,!0,!0))}}}function YF(t,e,i,n,r,s,o){i.bindings=i.bindings||[];let a={kind:n,target:r,parts:s,literal:o,isCompound:s.length!==1};if(i.bindings.push(a),ttt(a)){let{event:u,negate:h}=a.parts[0];a.listenerEvent=u||QR(r)+"-changed",a.listenerNegate=h}let l=e.nodeInfoList.length;for(let u=0;u<a.parts.length;u++){let h=a.parts[u];h.compoundIndex=u,Ket(t,e,a,h,l)}}function Ket(t,e,i,n,r){if(!n.literal)if(i.kind==="attribute"&&i.target[0]==="-")console.warn("Cannot set attribute "+i.target+' because "-" is not a valid attribute starting character');else{let s=n.dependencies,o={index:r,binding:i,part:n,evaluator:t};for(let a=0;a<s.length;a++){let l=s[a];typeof l=="string"&&(l=f0e(l),l.wildcard=!0),t._addTemplatePropertyEffect(e,l.rootProperty,{fn:Xet,info:o,trigger:l})}}}function Xet(t,e,i,n,r,s,o){let a=o[r.index],l=r.binding,u=r.part;if(s&&u.source&&e.length>u.source.length&&l.kind=="property"&&!l.isCompound&&a.__isPropertyEffectsClient&&a.__dataHasAccessor&&a.__dataHasAccessor[l.target]){let h=i[e];e=sI(u.source,l.target,e),a._setPendingPropertyOrPath(e,h,!1,!0)&&t._enqueueClient(a)}else{let h=r.evaluator._evaluateBinding(t,u,e,i,n,s);h!==aI&&Qet(t,a,l,u,h)}}function Qet(t,e,i,n,r){if(r=ett(e,r,i,n),PO&&(r=PO(r,i.target,i.kind,e)),i.kind=="attribute")t._valueToNodeAttribute(e,r,i.target);else{let s=i.target;e.__isPropertyEffectsClient&&e.__dataHasAccessor&&e.__dataHasAccessor[s]?e[Rt.READ_ONLY]&&e[Rt.READ_ONLY][s]||e._setPendingProperty(s,r)&&t._enqueueClient(e):t._setUnmanagedPropertyToNode(e,s,r)}}function ett(t,e,i,n){if(i.isCompound){let r=t.__dataCompoundStorage[i.target];r[n.compoundIndex]=e,e=r.join("")}return i.kind!=="attribute"&&(i.target!=="textContent"&&(i.target!=="value"||t.localName!=="input"&&t.localName!=="textarea")||(e=e??"")),e}function ttt(t){return Boolean(t.target)&&t.kind!="attribute"&&t.kind!="text"&&!t.isCompound&&t.parts[0].mode==="{"}function itt(t,e){let{nodeList:i,nodeInfoList:n}=e;if(n.length)for(let r=0;r<n.length;r++){let s=n[r],o=i[r],a=s.bindings;if(a)for(let l=0;l<a.length;l++){let u=a[l];ntt(o,u),rtt(o,t,u)}o.__dataHost=t}}function ntt(t,e){if(e.isCompound){let i=t.__dataCompoundStorage||(t.__dataCompoundStorage={}),n=e.parts,r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n[o].literal;let s=e.target;i[s]=r,e.literal&&e.kind=="property"&&(s==="className"&&(t=ze(t)),t[s]=e.literal)}}function rtt(t,e,i){if(i.listenerEvent){let n=i.parts[0];t.addEventListener(i.listenerEvent,function(r){Het(r,e,i.target,n.source,n.negate)})}}function mee(t,e,i,n,r,s){s=e.static||s&&(typeof s!="object"||s[e.methodName]);let o={methodName:e.methodName,args:e.args,methodInfo:r,dynamicFn:s};for(let a,l=0;l<e.args.length&&(a=e.args[l]);l++)a.literal||t._addPropertyEffect(a.rootProperty,i,{fn:n,info:o,trigger:a});return s&&t._addPropertyEffect(e.methodName,i,{fn:n,info:o}),o}function q6(t,e,i,n,r){let s=t._methodHost||t,o=s[r.methodName];if(o){let a=t._marshalArgs(r.args,e,i);return a===aI?aI:o.apply(s,a)}r.dynamicFn||console.warn("method `"+r.methodName+"` not defined")}const stt=[],p0e="(?:[a-zA-Z_$][\\w.:$\\-*]*)",gee="(?:("+p0e+`|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:"(?:[^"\\\\]|\\\\.)*")))\\s*)`,yee=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?"+("("+p0e+"\\s*"+("(?:\\(\\s*(?:"+("(?:"+gee+"(?:,\\s*"+gee+")*)")+"?)\\)\\s*)")+"?)")+"(?:]]|}})","g");function vee(t){let e="";for(let i=0;i<t.length;i++)e+=t[i].literal||"";return e}function ZF(t){let e=t.match(/([^\s]+?)\(([\s\S]*)\)/);if(e){let i={methodName:e[1],static:!0,args:stt};return e[2].trim()?ott(e[2].replace(/\\,/g,"&comma;").split(","),i):i}return null}function ott(t,e){return e.args=t.map(function(i){let n=f0e(i);return n.literal||(e.static=!1),n},this),e}function f0e(t){let e=t.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),i={name:e,value:"",literal:!1},n=e[0];switch(n==="-"&&(n=e[1]),n>="0"&&n<="9"&&(n="#"),n){case"'":case'"':i.value=e.slice(1,-1),i.literal=!0;break;case"#":i.value=Number(e),i.literal=!0}return i.literal||(i.rootProperty=Bh(e),i.structured=H6(e),i.structured&&(i.wildcard=e.slice(-2)==".*",i.wildcard&&(i.name=e.slice(0,-2)))),i}function bee(t,e,i){let n=Vs(t,i);return n===void 0&&(n=e[i]),n}function m0e(t,e,i,n){const r={indexSplices:n};F6&&!t._overrideLegacyUndefined&&(e.splices=r),t.notifyPath(i+".splices",r),t.notifyPath(i+".length",e.length),F6&&!t._overrideLegacyUndefined&&(r.indexSplices=[])}function xx(t,e,i,n,r,s){m0e(t,e,i,[{index:n,addedCount:r,removed:s,object:e,type:"splice"}])}function att(t){return t[0].toUpperCase()+t.substring(1)}const eL=Da(t=>{const e=Net(l0e(t));class i extends e{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return Rt}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(Sx.length){let r=Sx[Sx.length-1];r._enqueueClient(this),this.__dataHost=r}}_initializeProtoProperties(r){this.__data=Object.create(r),this.__dataPending=Object.create(r),this.__dataOld={}}_initializeInstanceProperties(r){let s=this[Rt.READ_ONLY];for(let o in r)s&&s[o]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[o]=this.__dataPending[o]=r[o])}_addPropertyEffect(r,s,o){this._createPropertyAccessor(r,s==Rt.READ_ONLY);let a=JF(this,s,!0)[r];a||(a=this[s][r]=[]),a.push(o)}_removePropertyEffect(r,s,o){let a=JF(this,s,!0)[r],l=a.indexOf(o);l>=0&&a.splice(l,1)}_hasPropertyEffect(r,s){let o=this[s];return Boolean(o&&o[r])}_hasReadOnlyEffect(r){return this._hasPropertyEffect(r,Rt.READ_ONLY)}_hasNotifyEffect(r){return this._hasPropertyEffect(r,Rt.NOTIFY)}_hasReflectEffect(r){return this._hasPropertyEffect(r,Rt.REFLECT)}_hasComputedEffect(r){return this._hasPropertyEffect(r,Rt.COMPUTE)}_setPendingPropertyOrPath(r,s,o,a){if(a||Bh(Array.isArray(r)?r[0]:r)!==r){if(!a){let l=Vs(this,r);if(!(r=uee(this,r,s))||!super._shouldPropertyChange(r,s,l))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(r,s,o))return Zet(this,r,s),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[r])return this._setPendingProperty(r,s,o);this[r]=s}return!1}_setUnmanagedPropertyToNode(r,s,o){o===r[s]&&typeof o!="object"||(s==="className"&&(r=ze(r)),r[s]=o)}_setPendingProperty(r,s,o){let a=this.__dataHasPaths&&H6(r),l=a?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(r,s,l[r])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),r in this.__dataOld||(this.__dataOld[r]=this.__data[r]),a?this.__dataTemp[r]=s:this.__data[r]=s,this.__dataPending[r]=s,(a||this[Rt.NOTIFY]&&this[Rt.NOTIFY][r])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[r]=o),!0)}_setProperty(r,s){this._setPendingProperty(r,s,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(r){this.__dataPendingClients=this.__dataPendingClients||[],r!==this&&this.__dataPendingClients.push(r)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let r=this.__dataPendingClients;if(r){this.__dataPendingClients=null;for(let s=0;s<r.length;s++){let o=r[s];o.__dataEnabled?o.__dataPending&&o._flushProperties():o._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(r,s){for(let o in r)!s&&this[Rt.READ_ONLY]&&this[Rt.READ_ONLY][o]||this._setPendingPropertyOrPath(o,r[o],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(r,s,o){let a,l=this.__dataHasPaths;this.__dataHasPaths=!1,qet(this,s,o,l),a=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(s,o,l),this._flushClients(),KS(this,this[Rt.REFLECT],s,o,l),KS(this,this[Rt.OBSERVE],s,o,l),a&&Vet(this,a,s,o,l),this.__dataCounter==1&&(this.__dataTemp={})}_propagatePropertyChanges(r,s,o){this[Rt.PROPAGATE]&&KS(this,this[Rt.PROPAGATE],r,s,o),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,r,s,o)}_runEffectsForTemplate(r,s,o,a){const l=(u,h)=>{KS(this,r.propertyEffects,u,o,h,r.nodeList);for(let p=r.firstChild;p;p=p.nextSibling)this._runEffectsForTemplate(p,u,o,h)};r.runEffects?r.runEffects(l,s,a):l(s,a)}linkPaths(r,s){r=ZS(r),s=ZS(s),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[r]=s}unlinkPaths(r){r=ZS(r),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[r]}notifySplices(r,s){let o={path:""};m0e(this,Vs(this,r,o),o.path,s)}get(r,s){return Vs(s||this,r)}set(r,s,o){o?uee(o,r,s):this[Rt.READ_ONLY]&&this[Rt.READ_ONLY][r]||this._setPendingPropertyOrPath(r,s,!0)&&this._invalidateProperties()}push(r,...s){let o={path:""},a=Vs(this,r,o),l=a.length,u=a.push(...s);return s.length&&xx(this,a,o.path,l,s.length,[]),u}pop(r){let s={path:""},o=Vs(this,r,s),a=Boolean(o.length),l=o.pop();return a&&xx(this,o,s.path,o.length,0,[l]),l}splice(r,s,o,...a){let l,u={path:""},h=Vs(this,r,u);return s<0?s=h.length-Math.floor(-s):s&&(s=Math.floor(s)),l=arguments.length===2?h.splice(s):h.splice(s,o,...a),(a.length||l.length)&&xx(this,h,u.path,s,a.length,l),l}shift(r){let s={path:""},o=Vs(this,r,s),a=Boolean(o.length),l=o.shift();return a&&xx(this,o,s.path,0,0,[l]),l}unshift(r,...s){let o={path:""},a=Vs(this,r,o),l=a.unshift(...s);return s.length&&xx(this,a,o.path,0,s.length,[]),l}notifyPath(r,s){let o;if(arguments.length==1){let a={path:""};s=Vs(this,r,a),o=a.path}else o=Array.isArray(r)?ZS(r):r;this._setPendingPropertyOrPath(o,s,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(r,s){this._addPropertyEffect(r,Rt.READ_ONLY),s&&(this["_set"+att(r)]=function(o){this._setProperty(r,o)})}_createPropertyObserver(r,s,o){let a={property:r,method:s,dynamicFn:Boolean(o)};this._addPropertyEffect(r,Rt.OBSERVE,{fn:pee,info:a,trigger:{name:r}}),o&&this._addPropertyEffect(s,Rt.OBSERVE,{fn:pee,info:a,trigger:{name:s}})}_createMethodObserver(r,s){let o=ZF(r);if(!o)throw new Error("Malformed observer expression '"+r+"'");mee(this,o,Rt.OBSERVE,q6,null,s)}_createNotifyingProperty(r){this._addPropertyEffect(r,Rt.NOTIFY,{fn:Bet,info:{eventName:QR(r)+"-changed",property:r}})}_createReflectedProperty(r){let s=this.constructor.attributeNameForProperty(r);s[0]==="-"?console.warn("Property "+r+" cannot be reflected to attribute "+s+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(r,Rt.REFLECT,{fn:Get,info:{attrName:s}})}_createComputedProperty(r,s,o){let a=ZF(s);if(!a)throw new Error("Malformed computed expression '"+s+"'");const l=mee(this,a,Rt.COMPUTE,h0e,r,o);JF(this,u0e)[r]=l}_marshalArgs(r,s,o){const a=this.__data,l=[];for(let u=0,h=r.length;u<h;u++){let{name:p,structured:f,wildcard:g,value:v,literal:b}=r[u];if(!b)if(g){const _=rI(p,s),w=bee(a,o,_?s:p);v={path:_?s:p,value:w,base:_?Vs(a,p):w}}else v=f?bee(a,o,p):a[p];if(F6&&!this._overrideLegacyUndefined&&v===void 0&&r.length>1)return aI;l[u]=v}return l}static addPropertyEffect(r,s,o){this.prototype._addPropertyEffect(r,s,o)}static createPropertyObserver(r,s,o){this.prototype._createPropertyObserver(r,s,o)}static createMethodObserver(r,s){this.prototype._createMethodObserver(r,s)}static createNotifyingProperty(r){this.prototype._createNotifyingProperty(r)}static createReadOnlyProperty(r,s){this.prototype._createReadOnlyProperty(r,s)}static createReflectedProperty(r){this.prototype._createReflectedProperty(r)}static createComputedProperty(r,s,o){this.prototype._createComputedProperty(r,s,o)}static bindTemplate(r){return this.prototype._bindTemplate(r)}_bindTemplate(r,s){let o=this.constructor._parseTemplate(r),a=this.__preBoundTemplateInfo==o;if(!a)for(let l in o.propertyEffects)this._createPropertyAccessor(l);if(s)if(o=Object.create(o),o.wasPreBound=a,this.__templateInfo){const l=r._parentTemplateInfo||this.__templateInfo,u=l.lastChild;o.parent=l,l.lastChild=o,o.previousSibling=u,u?u.nextSibling=o:l.firstChild=o}else this.__templateInfo=o;else this.__preBoundTemplateInfo=o;return o}static _addTemplatePropertyEffect(r,s,o){(r.hostProps=r.hostProps||{})[s]=!0;let a=r.propertyEffects=r.propertyEffects||{};(a[s]=a[s]||[]).push(o)}_stampTemplate(r,s){s=s||this._bindTemplate(r,!0),Sx.push(this);let o=super._stampTemplate(r,s);if(Sx.pop(),s.nodeList=o.nodeList,!s.wasPreBound){let a=s.childNodes=[];for(let l=o.firstChild;l;l=l.nextSibling)a.push(l)}return o.templateInfo=s,itt(this,s),this.__dataClientsReady&&(this._runEffectsForTemplate(s,this.__data,null,!1),this._flushClients()),o}_removeBoundDom(r){const s=r.templateInfo,{previousSibling:o,nextSibling:a,parent:l}=s;o?o.nextSibling=a:l&&(l.firstChild=a),a?a.previousSibling=o:l&&(l.lastChild=o),s.nextSibling=s.previousSibling=null;let u=s.childNodes;for(let h=0;h<u.length;h++){let p=u[h];ze(ze(p).parentNode).removeChild(p)}}static _parseTemplateNode(r,s,o){let a=e._parseTemplateNode.call(this,r,s,o);if(r.nodeType===Node.TEXT_NODE){let l=this._parseBindings(r.textContent,s);l&&(r.textContent=vee(l)||" ",YF(this,s,o,"text","textContent",l),a=!0)}return a}static _parseTemplateNodeAttribute(r,s,o,a,l){let u=this._parseBindings(l,s);if(u){let h=a,p="property";zet.test(a)?p="attribute":a[a.length-1]=="$"&&(a=a.slice(0,-1),p="attribute");let f=vee(u);return f&&p=="attribute"&&(a=="class"&&r.hasAttribute("class")&&(f+=" "+r.getAttribute(a)),r.setAttribute(a,f)),p=="attribute"&&h=="disable-upgrade$"&&r.setAttribute(a,""),r.localName==="input"&&h==="value"&&r.setAttribute(h,""),r.removeAttribute(h),p==="property"&&(a=i0e(a)),YF(this,s,o,p,a,u,f),!0}return e._parseTemplateNodeAttribute.call(this,r,s,o,a,l)}static _parseTemplateNestedTemplate(r,s,o){let a=e._parseTemplateNestedTemplate.call(this,r,s,o);const l=r.parentNode,u=o.templateInfo,h=l.localName==="dom-if",p=l.localName==="dom-repeat";HQ&&(h||p)&&(l.removeChild(r),(o=o.parentInfo).templateInfo=u,o.noted=!0,a=!1);let f=u.hostProps;if(Hye&&h)f&&(s.hostProps=Object.assign(s.hostProps||{},f),HQ||(o.parentInfo.noted=!0));else{let g="{";for(let v in f)YF(this,s,o,"property","_host_"+v,[{mode:g,source:v,dependencies:[v],hostProp:!0}])}return a}static _parseBindings(r,s){let o,a=[],l=0;for(;(o=yee.exec(r))!==null;){o.index>l&&a.push({literal:r.slice(l,o.index)});let u=o[1][0],h=Boolean(o[2]),p=o[3].trim(),f=!1,g="",v=-1;u=="{"&&(v=p.indexOf("::"))>0&&(g=p.substring(v+2),p=p.substring(0,v),f=!0);let b=ZF(p),_=[];if(b){let{args:w,methodName:S}=b;for(let $=0;$<w.length;$++){let M=w[$];M.literal||_.push(M)}let C=s.dynamicFns;(C&&C[S]||b.static)&&(_.push(S),b.dynamicFn=!0)}else _.push(p);a.push({source:p,mode:u,negate:h,customEvent:f,signature:b,dependencies:_,event:g}),l=yee.lastIndex}if(l&&l<r.length){let u=r.substring(l);u&&a.push({literal:u})}return a.length?a:null}static _evaluateBinding(r,s,o,a,l,u){let h;return h=s.signature?q6(r,o,a,l,s.signature):o!=s.source?Vs(r,s.source):u&&H6(o)?Vs(r,o):r.__data[o],s.negate&&(h=!h),h}}return i}),Sx=[];function ltt(t){const e={};for(let i in t){const n=t[i];e[i]=typeof n=="function"?{type:n}:n}return e}const ctt=Da(t=>{const e=o0e(t);function i(s){const o=Object.getPrototypeOf(s);return o.prototype instanceof r?o:null}function n(s){if(!s.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",s))){let o=null;if(s.hasOwnProperty(JSCompiler_renameProperty("properties",s))){const a=s.properties;a&&(o=ltt(a))}s.__ownProperties=o}return s.__ownProperties}class r extends e{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const o=this._properties;this.__observedAttributes=o?Object.keys(o).map(a=>this.prototype._addPropertyToAttributeMap(a)):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const o=i(this);o&&o.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const o=n(this);o&&this.createProperties(o)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const o=i(this);this.__properties=Object.assign({},o&&o._properties,n(this))}return this.__properties}static typeForProperty(o){const a=this._properties[o];return a&&a.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return r}),utt="3.4.1",W6=window.ShadyCSS&&window.ShadyCSS.cssBuild,tL=Da(t=>{const e=ctt(eL(t));function i(l){if(!l.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",l))){l.__propertyDefaults=null;let u=l._properties;for(let h in u){let p=u[h];"value"in p&&(l.__propertyDefaults=l.__propertyDefaults||{},l.__propertyDefaults[h]=p)}}return l.__propertyDefaults}function n(l){return l.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",l))||(l.__ownObservers=l.hasOwnProperty(JSCompiler_renameProperty("observers",l))?l.observers:null),l.__ownObservers}function r(l,u,h,p){h.computed&&(h.readOnly=!0),h.computed&&(l._hasReadOnlyEffect(u)?console.warn(`Cannot redefine computed property '${u}'.`):l._createComputedProperty(u,h.computed,p)),h.readOnly&&!l._hasReadOnlyEffect(u)?l._createReadOnlyProperty(u,!h.computed):h.readOnly===!1&&l._hasReadOnlyEffect(u)&&console.warn(`Cannot make readOnly property '${u}' non-readOnly.`),h.reflectToAttribute&&!l._hasReflectEffect(u)?l._createReflectedProperty(u):h.reflectToAttribute===!1&&l._hasReflectEffect(u)&&console.warn(`Cannot make reflected property '${u}' non-reflected.`),h.notify&&!l._hasNotifyEffect(u)?l._createNotifyingProperty(u):h.notify===!1&&l._hasNotifyEffect(u)&&console.warn(`Cannot make notify property '${u}' non-notify.`),h.observer&&l._createPropertyObserver(u,h.observer,p[h.observer]),l._addPropertyToAttributeMap(u)}function s(l,u,h,p){if(!W6){const f=u.content.querySelectorAll("style"),g=H7(u),v=JQe(h),b=u.content.firstElementChild;for(let w=0;w<v.length;w++){let S=v[w];S.textContent=l._processStyleText(S.textContent,p),u.content.insertBefore(S,b)}let _=0;for(let w=0;w<g.length;w++){let S=g[w],C=f[_];C!==S?(S=S.cloneNode(!0),C.parentNode.insertBefore(S,C)):_++,S.textContent=l._processStyleText(S.textContent,p)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(u,h),UQe&&W6&&DQe){const f=u.content.querySelectorAll("style");if(f){let g="";Array.from(f).forEach(v=>{g+=v.textContent,v.parentNode.removeChild(v)}),l._styleSheet=new CSSStyleSheet,l._styleSheet.replaceSync(g)}}}function o(l){let u=null;if(l&&(!Aw||zQe)&&(u=Mw.import(l,"template"),Aw&&!u))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${l}`);return u}class a extends e{static get polymerElementVersion(){return utt}static _finalizeClass(){e._finalizeClass.call(this);const u=n(this);u&&this.createObservers(u,this._properties),this._prepareTemplate()}static _prepareTemplate(){let u=this.template;u&&(typeof u=="string"?(console.error("template getter must return HTMLTemplateElement"),u=null):eI||(u=u.cloneNode(!0))),this.prototype._template=u}static createProperties(u){for(let h in u)r(this.prototype,h,u[h],u)}static createObservers(u,h){const p=this.prototype;for(let f=0;f<u.length;f++)p._createMethodObserver(u[f],h)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const u=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=u!==void 0?u:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&o(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(u){this._template=u}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const u=this.importMeta;if(u)this._importPath=j7(u.url);else{const h=Mw.import(this.is);this._importPath=h&&h.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=FQe,this.importPath=this.constructor.importPath;let u=i(this.constructor);if(u)for(let h in u){let p=u[h];if(this._canApplyPropertyDefault(h)){let f=typeof p.value=="function"?p.value.call(this):p.value;this._hasAccessor(h)?this._setPendingProperty(h,f,!0):this[h]=f}}}_canApplyPropertyDefault(u){return!this.hasOwnProperty(u)}static _processStyleText(u,h){return z7(u,h)}static _finalizeTemplate(u){const h=this.prototype._template;if(h&&!h.__polymerFinalized){h.__polymerFinalized=!0;const p=this.importPath;s(this,h,u,p?jE(p):""),this.prototype._bindTemplate(h)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(u){const h=ze(this);if(h.attachShadow)return u?(h.shadowRoot||(h.attachShadow({mode:"open",shadyUpgradeFragment:u}),h.shadowRoot.appendChild(u),this.constructor._styleSheet&&(h.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),jQe&&window.ShadyDOM&&window.ShadyDOM.flushInitial(h.shadowRoot),h.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(u){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,u)}resolveUrl(u,h){return!h&&this.importPath&&(h=jE(this.importPath)),jE(u,h)}static _parseTemplateContent(u,h,p){return h.dynamicFns=h.dynamicFns||this._properties,e._parseTemplateContent.call(this,u,h,p)}static _addTemplatePropertyEffect(u,h,p){return!Bye||h in this._properties||p.info.part.signature&&p.info.part.signature.static||p.info.part.hostProp||u.nestedTemplate||console.warn(`Property '${h}' used in template but not declared in 'properties'; attribute will not be observed.`),e._addTemplatePropertyEffect.call(this,u,h,p)}}return a});class g0e{constructor(e){this.value=e.toString()}toString(){return this.value}}function dtt(t){if(t instanceof g0e)return t.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${t}`)}function htt(t){if(t instanceof HTMLTemplateElement)return t.innerHTML;if(t instanceof g0e)return dtt(t);throw new Error(`non-template value passed to Polymer's html function: ${t}`)}const u2=function(t,...e){const i=document.createElement("template");return i.innerHTML=e.reduce((n,r,s)=>n+htt(r)+t[s+1],t[0]),i},Hh=tL(HTMLElement);class dn{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(e,i){this._asyncModule=e,this._callback=i,this._timer=this._asyncModule.run(()=>{this._timer=null,lI.delete(this),this._callback()})}cancel(){this.isActive()&&(this._cancelAsync(),lI.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return this._timer!=null}static debounce(e,i,n){return e instanceof dn?e._cancelAsync():e=new dn,e.setConfig(i,n),e}}let lI=new Set;const iL=function(t){lI.add(t)},ptt=function(){const t=Boolean(lI.size);return lI.forEach(e=>{try{e.flush()}catch(i){setTimeout(()=>{throw i})}}),t};let K7=typeof document.head.style.touchAction=="string",DO="__polymerGestures",kA="__polymerGesturesHandled",J6="__polymerGesturesTouchAction",_ee=25,wee=5,ftt=2,mtt=2500,y0e=["mousedown","mousemove","mouseup","click"],gtt=[0,1,4,2],ytt=function(){try{return new MouseEvent("test",{buttons:1}).buttons===1}catch{return!1}}();function X7(t){return y0e.indexOf(t)>-1}let Q7=!1;function v0e(t){if(!X7(t)&&t!=="touchend")return K7&&Q7&&NQe?{passive:!0}:void 0}(function(){try{let t=Object.defineProperty({},"passive",{get(){Q7=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch{}})();let b0e=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const Y6=[],vtt={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},btt={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function _tt(t){return vtt[t.localName]||!1}function wtt(t){let e=Array.prototype.slice.call(t.labels||[]);if(!e.length){e=[];let i=t.getRootNode();if(t.id){let n=i.querySelectorAll(`label[for = ${t.id}]`);for(let r=0;r<n.length;r++)e.push(n[r])}}return e}let xee=function(t){let e=t.sourceCapabilities;if((!e||e.firesTouchEvents)&&(t[kA]={skip:!0},t.type==="click")){let i=!1,n=nL(t);for(let r=0;r<n.length;r++){if(n[r].nodeType===Node.ELEMENT_NODE){if(n[r].localName==="label")Y6.push(n[r]);else if(_tt(n[r])){let s=wtt(n[r]);for(let o=0;o<s.length;o++)i=i||Y6.indexOf(s[o])>-1}}if(n[r]===ys.mouse.target)return}if(i)return;t.preventDefault(),t.stopPropagation()}};function See(t){let e=b0e?["click"]:y0e;for(let i,n=0;n<e.length;n++)i=e[n],t?(Y6.length=0,document.addEventListener(i,xee,!0)):document.removeEventListener(i,xee,!0)}function xtt(t){ys.mouse.mouseIgnoreJob||See(!0);let e=function(){See(),ys.mouse.target=null,ys.mouse.mouseIgnoreJob=null};ys.mouse.target=nL(t)[0],ys.mouse.mouseIgnoreJob=dn.debounce(ys.mouse.mouseIgnoreJob,Ac.after(mtt),e)}function ag(t){let e=t.type;if(!X7(e))return!1;if(e==="mousemove"){let i=t.buttons===void 0?1:t.buttons;return t instanceof window.MouseEvent&&!ytt&&(i=gtt[t.which]||0),Boolean(1&i)}return(t.button===void 0?0:t.button)===0}function Stt(t){if(t.type==="click"){if(t.detail===0)return!0;let e=mf(t);if(!e.nodeType||e.nodeType!==Node.ELEMENT_NODE)return!0;let i=e.getBoundingClientRect(),n=t.pageX,r=t.pageY;return!(n>=i.left&&n<=i.right&&r>=i.top&&r<=i.bottom)}return!1}let ys={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function Ett(t){let e="auto",i=nL(t);for(let n,r=0;r<i.length;r++)if(n=i[r],n[J6]){e=n[J6];break}return e}function Eee(t,e,i){t.movefn=e,t.upfn=i,document.addEventListener("mousemove",e),document.addEventListener("mouseup",i)}function wv(t){document.removeEventListener("mousemove",t.movefn),document.removeEventListener("mouseup",t.upfn),t.movefn=null,t.upfn=null}document.addEventListener("touchend",xtt,!!Q7&&{passive:!0});const nL=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:t=>t.composedPath&&t.composedPath()||[],d2={},qy=[];function Ctt(t,e){let i=document.elementFromPoint(t,e),n=i;for(;n&&n.shadowRoot&&!window.ShadyDOM;){let r=n;if(n=n.shadowRoot.elementFromPoint(t,e),r===n)break;n&&(i=n)}return i}function mf(t){const e=nL(t);return e.length>0?e[0]:t.target}function _0e(t){let e,i=t.type,n=t.currentTarget[DO];if(!n)return;let r=n[i];if(r){if(!t[kA]&&(t[kA]={},i.slice(0,5)==="touch")){let s=t.changedTouches[0];if(i==="touchstart"&&t.touches.length===1&&(ys.touch.id=s.identifier),ys.touch.id!==s.identifier)return;K7||i!=="touchstart"&&i!=="touchmove"||Itt(t)}if(e=t[kA],!e.skip){for(let s,o=0;o<qy.length;o++)s=qy[o],r[s.name]&&!e[s.name]&&s.flow&&s.flow.start.indexOf(t.type)>-1&&s.reset&&s.reset();for(let s,o=0;o<qy.length;o++)s=qy[o],r[s.name]&&!e[s.name]&&(e[s.name]=!0,s[i](t))}}}function Itt(t){let e=t.changedTouches[0],i=t.type;if(i==="touchstart")ys.touch.x=e.clientX,ys.touch.y=e.clientY,ys.touch.scrollDecided=!1;else if(i==="touchmove"){if(ys.touch.scrollDecided)return;ys.touch.scrollDecided=!0;let n=Ett(t),r=!1,s=Math.abs(ys.touch.x-e.clientX),o=Math.abs(ys.touch.y-e.clientY);t.cancelable&&(n==="none"?r=!0:n==="pan-x"?r=o>s:n==="pan-y"&&(r=s>o)),r?t.preventDefault():FO("track")}}function eH(t,e,i){return!!d2[e]&&(ktt(t,e,i),!0)}function Ttt(t,e,i){return!!d2[e]&&($tt(t,e,i),!0)}function ktt(t,e,i){let n=d2[e],r=n.deps,s=n.name,o=t[DO];o||(t[DO]=o={});for(let a,l,u=0;u<r.length;u++)a=r[u],b0e&&X7(a)&&a!=="click"||(l=o[a],l||(o[a]=l={_count:0}),l._count===0&&t.addEventListener(a,_0e,v0e(a)),l[s]=(l[s]||0)+1,l._count=(l._count||0)+1);t.addEventListener(e,i),n.touchAction&&w0e(t,n.touchAction)}function $tt(t,e,i){let n=d2[e],r=n.deps,s=n.name,o=t[DO];if(o)for(let a,l,u=0;u<r.length;u++)a=r[u],l=o[a],l&&l[s]&&(l[s]=(l[s]||1)-1,l._count=(l._count||1)-1,l._count===0&&t.removeEventListener(a,_0e,v0e(a)));t.removeEventListener(e,i)}function KF(t){qy.push(t);for(let e=0;e<t.emits.length;e++)d2[t.emits[e]]=t}function Att(t){for(let e,i=0;i<qy.length;i++){e=qy[i];for(let n,r=0;r<e.emits.length;r++)if(n=e.emits[r],n===t)return e}return null}function w0e(t,e){K7&&t instanceof HTMLElement&&ml.run(()=>{t.style.touchAction=e}),t[J6]=e}function tH(t,e,i){let n=new Event(e,{bubbles:!0,cancelable:!0,composed:!0});if(n.detail=i,ze(t).dispatchEvent(n),n.defaultPrevented){let r=i.preventer||i.sourceEvent;r&&r.preventDefault&&r.preventDefault()}}function FO(t){let e=Att(t);e.info&&(e.info.prevent=!0)}function Ex(t,e,i,n){e&&tH(e,t,{x:i.clientX,y:i.clientY,sourceEvent:i,preventer:n,prevent:function(r){return FO(r)}})}function Cee(t,e,i){if(t.prevent)return!1;if(t.started)return!0;let n=Math.abs(t.x-e),r=Math.abs(t.y-i);return n>=wee||r>=wee}function XF(t,e,i){if(!e)return;let n,r=t.moves[t.moves.length-2],s=t.moves[t.moves.length-1],o=s.x-t.x,a=s.y-t.y,l=0;r&&(n=s.x-r.x,l=s.y-r.y),tH(e,"track",{state:t.state,x:i.clientX,y:i.clientY,dx:o,dy:a,ddx:n,ddy:l,sourceEvent:i,hover:function(){return Ctt(i.clientX,i.clientY)}})}function Iee(t,e,i){let n=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y),s=mf(i||e);!s||btt[s.localName]&&s.hasAttribute("disabled")||(isNaN(n)||isNaN(r)||n<=_ee&&r<=_ee||Stt(e))&&(t.prevent||tH(s,"tap",{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:i}))}KF({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){wv(this.info)},mousedown:function(t){if(!ag(t))return;let e=mf(t),i=this,n=function(s){ag(s)||(Ex("up",e,s),wv(i.info))},r=function(s){ag(s)&&Ex("up",e,s),wv(i.info)};Eee(this.info,n,r),Ex("down",e,t)},touchstart:function(t){Ex("down",mf(t),t.changedTouches[0],t)},touchend:function(t){Ex("up",mf(t),t.changedTouches[0],t)}}),KF({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(t){this.moves.length>ftt&&this.moves.shift(),this.moves.push(t)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,wv(this.info)},mousedown:function(t){if(!ag(t))return;let e=mf(t),i=this,n=function(s){let o=s.clientX,a=s.clientY;Cee(i.info,o,a)&&(i.info.state=i.info.started?s.type==="mouseup"?"end":"track":"start",i.info.state==="start"&&FO("tap"),i.info.addMove({x:o,y:a}),ag(s)||(i.info.state="end",wv(i.info)),e&&XF(i.info,e,s),i.info.started=!0)},r=function(s){i.info.started&&n(s),wv(i.info)};Eee(this.info,n,r),this.info.x=t.clientX,this.info.y=t.clientY},touchstart:function(t){let e=t.changedTouches[0];this.info.x=e.clientX,this.info.y=e.clientY},touchmove:function(t){let e=mf(t),i=t.changedTouches[0],n=i.clientX,r=i.clientY;Cee(this.info,n,r)&&(this.info.state==="start"&&FO("tap"),this.info.addMove({x:n,y:r}),XF(this.info,e,i),this.info.state="track",this.info.started=!0)},touchend:function(t){let e=mf(t),i=t.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:i.clientX,y:i.clientY}),XF(this.info,e,i))}}),KF({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(t){ag(t)&&(this.info.x=t.clientX,this.info.y=t.clientY)},click:function(t){ag(t)&&Iee(this.info,t)},touchstart:function(t){const e=t.changedTouches[0];this.info.x=e.clientX,this.info.y=e.clientY},touchend:function(t){Iee(this.info,t.changedTouches[0],t)}});const h2=Da(t=>{class e extends t{_addEventListenerToNode(n,r,s){eH(n,r,s)||super._addEventListenerToNode(n,r,s)}_removeEventListenerFromNode(n,r,s){Ttt(n,r,s)||super._removeEventListenerFromNode(n,r,s)}}return e}),Mtt=t=>class extends t{static get properties(){return{theme:{type:String,readOnly:!0}}}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e==="theme"&&this._setTheme(n)}},iH=t=>class extends Mtt(t){static finalize(){super.finalize();const e=this.prototype._template,i=this.template&&this.template.parentElement&&this.template.parentElement.id===this.is,n=Object.getPrototypeOf(this.prototype)._template;n&&!i&&Array.from(n.content.querySelectorAll("style[include]")).forEach(r=>{this._includeStyle(r.getAttribute("include"),e)}),this._includeMatchingThemes(e)}static _includeMatchingThemes(e){const i=Mw.prototype.modules;let n=!1;const r=this.is+"-default-theme";Object.keys(i).sort((s,o)=>{const a=s.indexOf("vaadin-")===0,l=o.indexOf("vaadin-")===0,u=["lumo-","material-"],h=u.filter(f=>s.indexOf(f)===0).length>0,p=u.filter(f=>o.indexOf(f)===0).length>0;return a!==l?a?-1:1:h!==p?h?-1:1:0}).forEach(s=>{if(s!==r){const o=i[s].getAttribute("theme-for");o&&o.split(" ").forEach(a=>{new RegExp("^"+a.split("*").join(".*")+"$").test(this.is)&&(n=!0,this._includeStyle(s,e))})}}),!n&&i[r]&&this._includeStyle(r,e)}static _includeStyle(e,i){if(i&&!i.content.querySelector(`style[include="${e}"]`)){const n=document.createElement("style");n.setAttribute("include",e),i.content.appendChild(n)}}};let NO=!1;window.addEventListener("keydown",()=>{NO=!0},{capture:!0}),window.addEventListener("mousedown",()=>{NO=!1},{capture:!0});const Ott=t=>class extends t{static get properties(){var e={tabindex:{type:Number,value:0,reflectToAttribute:!0,observer:"_tabindexChanged"}};return window.ShadyDOM&&(e.tabIndex=e.tabindex),e}},Ptt=t=>class extends Ott(t){static get properties(){return{autofocus:{type:Boolean},_previousTabIndex:{type:Number},disabled:{type:Boolean,observer:"_disabledChanged",reflectToAttribute:!0},_isShiftTabbing:{type:Boolean}}}get _keyboardActive(){return NO}ready(){this.addEventListener("focusin",i=>{i.composedPath()[0]===this?this.contains(i.relatedTarget)||this._focus():i.composedPath().indexOf(this.focusElement)===-1||this.disabled||this._setFocused(!0)}),this.addEventListener("focusout",i=>this._setFocused(!1)),super.ready();const e=i=>{i.composed||i.target.dispatchEvent(new CustomEvent(i.type,{bubbles:!0,composed:!0,cancelable:!1}))};this.shadowRoot.addEventListener("focusin",e),this.shadowRoot.addEventListener("focusout",e),this.addEventListener("keydown",i=>{if(!i.defaultPrevented&&i.keyCode===9)if(i.shiftKey)this._isShiftTabbing=!0,HTMLElement.prototype.focus.apply(this),this._setFocused(!1),setTimeout(()=>this._isShiftTabbing=!1,0);else{const n=window.navigator.userAgent.match(/Firefox\/(\d\d\.\d)/);if(n&&parseFloat(n[1])>=63&&parseFloat(n[1])<66&&this.parentNode&&this.nextSibling){const r=document.createElement("input");r.style.position="absolute",r.style.opacity="0",r.tabIndex=this.tabIndex,this.parentNode.insertBefore(r,this.nextSibling),r.focus(),r.addEventListener("focusout",()=>this.parentNode.removeChild(r))}}}),this.autofocus&&!this.disabled&&window.requestAnimationFrame(()=>{this._focus(),this._setFocused(!0),this.setAttribute("focus-ring","")})}disconnectedCallback(){super.disconnectedCallback(),this.hasAttribute("focused")&&this._setFocused(!1)}_setFocused(e){e?this.setAttribute("focused",""):this.removeAttribute("focused"),e&&NO?this.setAttribute("focus-ring",""):this.removeAttribute("focus-ring")}get focusElement(){return window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`),this}_focus(){this.focusElement&&!this._isShiftTabbing&&(this.focusElement.focus(),this._setFocused(!0))}focus(){this.focusElement&&!this.disabled&&(this.focusElement.focus(),this._setFocused(!0))}blur(){this.focusElement&&(this.focusElement.blur(),this._setFocused(!1))}_disabledChanged(e){this.focusElement.disabled=e,e?(this.blur(),this._previousTabIndex=this.tabindex,this.tabindex=-1,this.setAttribute("aria-disabled","true")):(this._previousTabIndex!==void 0&&(this.tabindex=this._previousTabIndex),this.removeAttribute("aria-disabled"))}_tabindexChanged(e){e!==void 0&&(this.focusElement.tabIndex=e),this.disabled&&this.tabindex&&(this.tabindex!==-1&&(this._previousTabIndex=this.tabindex),this.tabindex=e=void 0),window.ShadyDOM&&this.setProperties({tabIndex:e,tabindex:e})}click(){this.disabled||super.click()}},Ow=function(){let t,e;do t=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),e=ptt();while(t||e)};class QF{static detectScrollType(){const e=document.createElement("div");e.textContent="ABCD",e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e);let i="reverse";return e.scrollLeft>0?i="default":(e.scrollLeft=2,e.scrollLeft<2&&(i="negative")),document.body.removeChild(e),i}static getNormalizedScrollLeft(e,i,n){const{scrollLeft:r}=n;if(i!=="rtl"||!e)return r;switch(e){case"negative":return n.scrollWidth-n.clientWidth+r;case"reverse":return n.scrollWidth-n.clientWidth-r}return r}static setNormalizedScrollLeft(e,i,n,r){if(i==="rtl"&&e)switch(e){case"negative":n.scrollLeft=n.clientWidth-n.scrollWidth+r;break;case"reverse":n.scrollLeft=n.scrollWidth-n.clientWidth-r;break;default:n.scrollLeft=r}else n.scrollLeft=r}}const ef=[],Rtt=function(){const t=Pb();ef.forEach(e=>{Z6(e,t)})};let vk;new MutationObserver(Rtt).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]});const Z6=function(t,e){e?t.setAttribute("dir",e):t.removeAttribute("dir")},Pb=function(){return document.documentElement.getAttribute("dir")},nH=t=>class extends t{static get properties(){return{dir:{type:String,readOnly:!0}}}static finalize(){super.finalize(),vk||(vk=QF.detectScrollType())}connectedCallback(){super.connectedCallback(),this.hasAttribute("dir")||(this.__subscribe(),Z6(this,Pb()))}attributeChangedCallback(e,i,n){if(super.attributeChangedCallback(e,i,n),e!=="dir")return;const r=n===Pb()&&ef.indexOf(this)===-1,s=!n&&i&&ef.indexOf(this)===-1,o=n!==Pb()&&i===Pb();r||s?(this.__subscribe(),Z6(this,Pb())):o&&this.__subscribe(!1)}disconnectedCallback(){super.disconnectedCallback(),this.__subscribe(!1),this.removeAttribute("dir")}__subscribe(e=!0){e?ef.indexOf(this)===-1&&ef.push(this):ef.indexOf(this)>-1&&ef.splice(ef.indexOf(this),1)}__getNormalizedScrollLeft(e){return QF.getNormalizedScrollLeft(vk,this.getAttribute("dir")||"ltr",e)}__setNormalizedScrollLeft(e,i){return QF.setNormalizedScrollLeft(vk,this.getAttribute("dir")||"ltr",e,i)}},Ltt=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,$A=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function Dtt(){function t(){return!0}return x0e(t)}function Ftt(){try{return!!Ntt()||!!ztt()&&($A?!jtt():!Dtt())}catch{return!1}}function Ntt(){return localStorage.getItem("vaadin.developmentmode.force")}function ztt(){return["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0}function jtt(){return!!($A&&Object.keys($A).map(t=>$A[t]).filter(t=>t.productionMode).length>0)}function x0e(t,e){if(typeof t!="function")return;const i=Ltt.exec(t.toString());if(i)try{t=new Function(i[1])}catch(n){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",n)}return t(e)}window.Vaadin=window.Vaadin||{};const Tee=function(t,e){if(window.Vaadin.developmentMode)return x0e(t,e)};function Vtt(){}window.Vaadin.developmentMode===void 0&&(window.Vaadin.developmentMode=Ftt());const kee=function(){if(typeof Tee=="function")return Tee(Vtt)};let e5;window.Vaadin||(window.Vaadin={}),window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.developmentModeCallback=window.Vaadin.developmentModeCallback||{},window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]=function(){kee&&kee()};const $ee=new Set,S0e=t=>class extends nH(t){static finalize(){super.finalize();const{is:e}=this;e&&!$ee.has(e)&&(window.Vaadin.registrations.push(this),$ee.add(e),window.Vaadin.developmentModeCallback&&(e5=dn.debounce(e5,s0e,()=>{window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]()}),iL(e5)))}constructor(){super(),document.doctype===null&&console.warn('Vaadin components require the "standards mode" declaration. Please add <!DOCTYPE html> to the HTML document.')}};class Aee extends S0e(Ptt(iH(h2(Hh)))){static get template(){return u2`
      <style>
        :host {
          display: inline-block;
        }

        :host([hidden]) {
          display: none !important;
        }

        label {
          display: inline-flex;
          align-items: baseline;
          outline: none;
        }

        [part='checkbox'] {
          position: relative;
          display: inline-block;
          flex: none;
        }

        input[type='checkbox'] {
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          width: 100%;
          height: 100%;
          opacity: 0;
          cursor: inherit;
          margin: 0;
        }

        :host([disabled]) {
          -webkit-tap-highlight-color: transparent;
        }
      </style>

      <label>
        <span part="checkbox">
          <input
            type="checkbox"
            checked="{{checked::change}}"
            disabled$="[[disabled]]"
            indeterminate="{{indeterminate::change}}"
            role="presentation"
            tabindex="-1"
          />
        </span>

        <span part="label">
          <slot></slot>
        </span>
      </label>
    `}static get is(){return"vaadin-checkbox"}static get version(){return"3.0.0"}static get properties(){return{checked:{type:Boolean,value:!1,notify:!0,observer:"_checkedChanged",reflectToAttribute:!0},indeterminate:{type:Boolean,notify:!0,observer:"_indeterminateChanged",reflectToAttribute:!0,value:!1},value:{type:String,value:"on"},_nativeCheckbox:{type:Object}}}constructor(){super(),this.name}get name(){return this.checked?this._storedName:""}set name(e){this._storedName=e}ready(){super.ready(),this.setAttribute("role","checkbox"),this._nativeCheckbox=this.shadowRoot.querySelector('input[type="checkbox"]'),this.addEventListener("click",this._handleClick.bind(this)),this._addActiveListeners();const e=this.getAttribute("name");e&&(this.name=e),this.shadowRoot.querySelector('[part~="label"]').querySelector("slot").addEventListener("slotchange",this._updateLabelAttribute.bind(this)),this._updateLabelAttribute()}_updateLabelAttribute(){const e=this.shadowRoot.querySelector('[part~="label"]'),i=e.firstElementChild.assignedNodes();this._isAssignedNodesEmpty(i)?e.setAttribute("empty",""):e.removeAttribute("empty")}_isAssignedNodesEmpty(e){return e.length===0||e.length==1&&e[0].nodeType==Node.TEXT_NODE&&e[0].textContent.trim()===""}_checkedChanged(e){this.indeterminate?this.setAttribute("aria-checked","mixed"):this.setAttribute("aria-checked",Boolean(e))}_indeterminateChanged(e){e?this.setAttribute("aria-checked","mixed"):this.setAttribute("aria-checked",this.checked)}_addActiveListeners(){this._addEventListenerToNode(this,"down",e=>{this.__interactionsAllowed(e)&&this.setAttribute("active","")}),this._addEventListenerToNode(this,"up",()=>this.removeAttribute("active")),this.addEventListener("keydown",e=>{this.__interactionsAllowed(e)&&e.keyCode===32&&(e.preventDefault(),this.setAttribute("active",""))}),this.addEventListener("keyup",e=>{this.__interactionsAllowed(e)&&e.keyCode===32&&(e.preventDefault(),this._toggleChecked(),this.removeAttribute("active"),this.indeterminate&&(this.indeterminate=!1))})}get focusElement(){return this.shadowRoot.querySelector("input")}__interactionsAllowed(e){return!this.disabled&&e.target.localName!=="a"}_handleClick(e){this.__interactionsAllowed(e)&&(this.indeterminate?(this.indeterminate=!1,e.preventDefault(),this._toggleChecked()):e.composedPath()[0]!==this._nativeCheckbox&&(e.preventDefault(),this._toggleChecked()))}_toggleChecked(){this.checked=!this.checked,this.dispatchEvent(new CustomEvent("change",{composed:!1,bubbles:!0}))}}customElements.define(Aee.is,Aee),nI("vaadin-grid",iI`
    :host {
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-m);
      line-height: var(--lumo-line-height-s);
      color: var(--lumo-body-text-color);
      background-color: var(--lumo-base-color);
      box-sizing: border-box;
      -webkit-text-size-adjust: 100%;
      -webkit-tap-highlight-color: transparent;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;

      /* For internal use only */
      --_lumo-grid-border-color: var(--lumo-contrast-20pct);
      --_lumo-grid-secondary-border-color: var(--lumo-contrast-10pct);
      --_lumo-grid-border-width: 1px;
      --_lumo-grid-selected-row-color: var(--lumo-primary-color-10pct);
    }

    /* No (outer) border */

    :host(:not([theme~='no-border'])) {
      border: var(--_lumo-grid-border-width) solid var(--_lumo-grid-border-color);
    }

    /* Cell styles */

    [part~='cell'] {
      min-height: var(--lumo-size-m);
      background-color: var(--lumo-base-color);
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      cursor: default;
      padding: var(--lumo-space-xs) var(--lumo-space-m);
    }

    /* Apply row borders by default and introduce the "no-row-borders" variant */
    :host(:not([theme~='no-row-borders'])) [part~='cell']:not([part~='details-cell']) {
      border-top: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Hide first body row top border */
    :host(:not([theme~='no-row-borders'])) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      border-top: 0;
      min-height: calc(var(--lumo-size-m) - var(--_lumo-grid-border-width));
    }

    /* Focus-ring */

    [part~='cell']:focus {
      outline: none;
    }

    :host([navigating]) [part~='cell']:focus::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    /* Drag and Drop styles */
    :host([dragover])::after {
      content: '';
      position: absolute;
      z-index: 100;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      box-shadow: inset 0 0 0 2px var(--lumo-primary-color-50pct);
    }

    [part~='row'][dragover] {
      z-index: 100 !important;
    }

    [part~='row'][dragover] [part~='cell'] {
      overflow: visible;
    }

    [part~='row'][dragover] [part~='cell']::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      height: calc(var(--_lumo-grid-border-width) + 2px);
      pointer-events: none;
      background: var(--lumo-primary-color-50pct);
    }

    :host([theme~='no-row-borders']) [dragover] [part~='cell']::after {
      height: 2px;
    }

    [part~='row'][dragover='below'] [part~='cell']::after {
      top: 100%;
      bottom: auto;
      margin-top: -1px;
    }

    [part~='row'][dragover='above'] [part~='cell']::after {
      top: auto;
      bottom: 100%;
      margin-bottom: -1px;
    }

    [part~='row'][details-opened][dragover='below'] [part~='cell']:not([part~='details-cell'])::after,
    [part~='row'][details-opened][dragover='above'] [part~='details-cell']::after {
      display: none;
    }

    [part~='row'][dragover][dragover='on-top'] [part~='cell']::after {
      height: 100%;
    }

    [part~='row'][dragstart] {
      /* Add bottom-space to the row so the drag number doesn't get clipped. Needed for IE/Edge */
      border-bottom: 100px solid transparent;
      z-index: 100 !important;
      opacity: 0.9;
    }

    [part~='row'][dragstart] [part~='cell'] {
      border: none !important;
      box-shadow: none !important;
    }

    [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    [ios] [part~='row'][dragstart] [part~='cell'] {
      background: var(--lumo-primary-color-50pct);
    }

    #scroller:not([ios]) [part~='row'][dragstart]:not([dragstart=''])::after {
      display: block;
      position: absolute;
      left: var(--_grid-drag-start-x);
      top: var(--_grid-drag-start-y);
      z-index: 100;
      content: attr(dragstart);
      align-items: center;
      justify-content: center;
      box-sizing: border-box;
      padding: calc(var(--lumo-space-xs) * 0.8);
      color: var(--lumo-error-contrast-color);
      background-color: var(--lumo-error-color);
      border-radius: var(--lumo-border-radius-m);
      font-family: var(--lumo-font-family);
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
      font-weight: 500;
      text-transform: initial;
      letter-spacing: initial;
      min-width: calc(var(--lumo-size-s) * 0.7);
      text-align: center;
    }

    /* Headers and footers */

    [part~='header-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content),
    [part~='reorder-ghost'] {
      font-size: var(--lumo-font-size-s);
      font-weight: 500;
    }

    [part~='footer-cell'] ::slotted(vaadin-grid-cell-content) {
      font-weight: 400;
    }

    [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-xl);
    }

    /* Header borders */

    /* Hide first header row top border */
    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='header-cell'] {
      border-top: 0;
    }

    [part='row']:last-child [part~='header-cell'] {
      border-bottom: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='top']) [part='row']:last-child [part~='header-cell'] {
      border-bottom-color: var(--_lumo-grid-border-color);
    }

    /* Footer borders */

    [part='row']:first-child [part~='footer-cell'] {
      border-top: var(--_lumo-grid-border-width) solid transparent;
    }

    :host(:not([theme~='no-row-borders'])) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-secondary-border-color);
    }

    /* Overflow uses a stronger border color */
    :host([overflow~='bottom']) [part='row']:first-child [part~='footer-cell'] {
      border-top-color: var(--_lumo-grid-border-color);
    }

    /* Column reordering */

    :host([reordering]) [part~='cell'] {
      background: linear-gradient(var(--lumo-shade-20pct), var(--lumo-shade-20pct)) var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='allowed'] {
      background: var(--lumo-base-color);
    }

    :host([reordering]) [part~='cell'][reorder-status='dragging'] {
      background: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct)) var(--lumo-base-color);
    }

    [part~='reorder-ghost'] {
      opacity: 0.85;
      box-shadow: var(--lumo-box-shadow-s);
      /* TODO Use the same styles as for the cell element (reorder-ghost copies styles from the cell element) */
      padding: var(--lumo-space-s) var(--lumo-space-m) !important;
    }

    /* Column resizing */

    [part='resize-handle'] {
      width: 3px;
      background-color: var(--lumo-primary-color-50pct);
      opacity: 0;
      transition: opacity 0.2s;
    }

    :host(:not([reordering])) *:not([column-resizing]) [part~='cell']:hover [part='resize-handle'],
    [part='resize-handle']:active {
      opacity: 1;
      transition-delay: 0.15s;
    }

    /* Column borders */

    :host([theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    /* Frozen columns */

    [last-frozen] {
      border-right: var(--_lumo-grid-border-width) solid transparent;
      overflow: hidden;
    }

    :host([overflow~='left']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-right-color: var(--_lumo-grid-border-color);
    }

    /* Row stripes */

    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='body-cell'],
    :host([theme~='row-stripes']) [part~='row']:not([odd]) [part~='details-cell'] {
      background-image: linear-gradient(var(--lumo-contrast-5pct), var(--lumo-contrast-5pct));
      background-repeat: repeat-x;
    }

    /* Selected row */

    /* Raise the selected rows above unselected rows (so that box-shadow can cover unselected rows) */
    :host(:not([reordering])) [part~='row'][selected] {
      z-index: 1;
    }

    :host(:not([reordering])) [part~='row'][selected] [part~='body-cell']:not([part~='details-cell']) {
      background-image: linear-gradient(var(--_lumo-grid-selected-row-color), var(--_lumo-grid-selected-row-color));
      background-repeat: repeat;
    }

    /* Cover the border of an unselected row */
    :host(:not([theme~='no-row-borders'])) [part~='row'][selected] [part~='cell']:not([part~='details-cell']) {
      box-shadow: 0 var(--_lumo-grid-border-width) 0 0 var(--_lumo-grid-selected-row-color);
    }

    /* Compact */

    :host([theme~='compact']) [part='row']:only-child [part~='header-cell'] {
      min-height: var(--lumo-size-m);
    }

    :host([theme~='compact']) [part~='cell'] {
      min-height: var(--lumo-size-s);
    }

    :host([theme~='compact']) [part='row'][first] [part~='cell']:not([part~='details-cell']) {
      min-height: calc(var(--lumo-size-s) - var(--_lumo-grid-border-width));
    }

    :host([theme~='compact']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      padding: var(--lumo-space-xs) var(--lumo-space-s);
    }

    /* Wrap cell contents */

    :host([theme~='wrap-cell-content']) [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      white-space: normal;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][last-column] {
      border-radius: var(--lumo-border-radius-s) 0 0 var(--lumo-border-radius-s);
    }

    :host([dir='rtl']) [part~='row'][dragstart] [part~='cell'][first-column] {
      border-radius: 0 var(--lumo-border-radius-s) var(--lumo-border-radius-s) 0;
    }

    :host([dir='rtl'][theme~='column-borders']) [part~='cell']:not([last-column]):not([part~='details-cell']) {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid var(--_lumo-grid-secondary-border-color);
    }

    :host([dir='rtl']) [last-frozen] {
      border-right: none;
      border-left: var(--_lumo-grid-border-width) solid transparent;
    }

    :host([dir='rtl'][overflow~='right']) [part~='cell'][last-frozen]:not([part~='details-cell']) {
      border-left-color: var(--_lumo-grid-border-color);
    }
  `,{moduleId:"lumo-grid"}),nI("vaadin-checkbox",iI`
    :host(.vaadin-grid-select-all-checkbox) {
      font-size: var(--lumo-font-size-m);
    }
  `,{moduleId:"vaadin-grid-select-all-checkbox-lumo"});let zO=!1,E0e=[],C0e=[];function I0e(){zO=!0,requestAnimationFrame(function(){zO=!1,Utt(E0e),setTimeout(function(){Btt(C0e)})})}function Utt(t){for(;t.length;)T0e(t.shift())}function Btt(t){for(let e=0,i=t.length;e<i;e++)T0e(t.shift())}function T0e(t){const e=t[0],i=t[1],n=t[2];try{i.apply(e,n)}catch(r){setTimeout(()=>{throw r})}}function Htt(t,e,i){zO||I0e(),E0e.push([t,e,i])}function Gtt(t,e,i){zO||I0e(),C0e.push([t,e,i])}class Mee{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""}}function k0e(t){return $0e(Wtt(t=qtt(t)),t)}function qtt(t){return t.replace(_h.comments,"").replace(_h.port,"")}function Wtt(t){let e=new Mee;e.start=0,e.end=t.length;let i=e;for(let n=0,r=t.length;n<r;n++)if(t[n]===M0e){i.rules||(i.rules=[]);let s=i,o=s.rules[s.rules.length-1]||null;i=new Mee,i.start=n+1,i.parent=s,i.previous=o,s.rules.push(i)}else t[n]===O0e&&(i.end=n+1,i=i.parent||e);return e}function $0e(t,e){let i=e.substring(t.start,t.end-1);if(t.parsedCssText=t.cssText=i.trim(),t.parent){let r=t.previous?t.previous.end:t.parent.start;i=e.substring(r,t.start-1),i=Jtt(i),i=i.replace(_h.multipleSpaces," "),i=i.substring(i.lastIndexOf(";")+1);let s=t.parsedSelector=t.selector=i.trim();t.atRule=s.indexOf(eit)===0,t.atRule?s.indexOf(Qtt)===0?t.type=Df.MEDIA_RULE:s.match(_h.keyframesRule)&&(t.type=Df.KEYFRAMES_RULE,t.keyframesName=t.selector.split(_h.multipleSpaces).pop()):s.indexOf(P0e)===0?t.type=Df.MIXIN_RULE:t.type=Df.STYLE_RULE}let n=t.rules;if(n)for(let r,s=0,o=n.length;s<o&&(r=n[s]);s++)$0e(r,e);return t}function Jtt(t){return t.replace(/\\([0-9a-f]{1,6})\s/gi,function(){let e=arguments[1],i=6-e.length;for(;i--;)e="0"+e;return"\\"+e})}function A0e(t,e,i=""){let n="";if(t.cssText||t.rules){let r=t.rules;if(r&&!Ytt(r))for(let s,o=0,a=r.length;o<a&&(s=r[o]);o++)n=A0e(s,e,n);else n=e?t.cssText:Ztt(t.cssText),n=n.trim(),n&&(n="  "+n+`
`)}return n&&(t.selector&&(i+=t.selector+" "+M0e+`
`),i+=n,t.selector&&(i+=O0e+`

`)),i}function Ytt(t){let e=t[0];return Boolean(e)&&Boolean(e.selector)&&e.selector.indexOf(P0e)===0}function Ztt(t){return Xtt(t=Ktt(t))}function Ktt(t){return t.replace(_h.customProp,"").replace(_h.mixinProp,"")}function Xtt(t){return t.replace(_h.mixinApply,"").replace(_h.varApply,"")}const Df={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},M0e="{",O0e="}",_h={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},P0e="--",Qtt="@media",eit="@",Oee=new Set,tit="shady-unscoped";function iit(t){const e=t.textContent;if(!Oee.has(e)){Oee.add(e);const i=document.createElement("style");i.setAttribute("shady-unscoped",""),i.textContent=e,document.head.appendChild(i)}}function nit(t){return t.hasAttribute(tit)}function K6(t,e){return t?(typeof t=="string"&&(t=k0e(t)),e&&UE(t,e),A0e(t,N7)):""}function Pee(t){return!t.__cssRules&&t.textContent&&(t.__cssRules=k0e(t.textContent)),t.__cssRules||null}function UE(t,e,i,n){if(!t)return;let r=!1,s=t.type;if(n&&s===Df.MEDIA_RULE){let a=t.selector.match(OQe);a&&(window.matchMedia(a[1]).matches||(r=!0))}s===Df.STYLE_RULE?e(t):i&&s===Df.KEYFRAMES_RULE?i(t):s===Df.MIXIN_RULE&&(r=!0);let o=t.rules;if(o&&!r)for(let a,l=0,u=o.length;l<u&&(a=o[l]);l++)UE(a,e,i,n)}function rit(t,e){let i=0;for(let n=e,r=t.length;n<r;n++)if(t[n]==="(")i++;else if(t[n]===")"&&--i==0)return n;return-1}function R0e(t,e){let i=t.indexOf("var(");if(i===-1)return e(t,"","","");let n=rit(t,i+3),r=t.substring(i+4,n),s=t.substring(0,i),o=R0e(t.substring(n+1),e),a=r.indexOf(",");return a===-1?e(s,r.trim(),"",o):e(s,r.substring(0,a).trim(),r.substring(a+1).trim(),o)}function sit(t){let e=t.localName,i="",n="";return e?e.indexOf("-")>-1?i=e:(n=e,i=t.getAttribute&&t.getAttribute("is")||""):(i=t.is,n=t.extends),{is:i,typeExtension:n}}function oit(t){const e=[],i=t.querySelectorAll("style");for(let n=0;n<i.length;n++){const r=i[n];nit(r)?KR||(iit(r),r.parentNode.removeChild(r)):(e.push(r.textContent),r.parentNode.removeChild(r))}return e.join("").trim()}window.ShadyDOM&&window.ShadyDOM.wrap;const L0e="css-build";function ait(t){if(QC!==void 0)return QC;if(t.__cssBuild===void 0){const e=t.getAttribute(L0e);if(e)t.__cssBuild=e;else{const i=lit(t);i!==""&&cit(t),t.__cssBuild=i}}return t.__cssBuild||""}function Ree(t){return ait(t)!==""}function lit(t){const e=t.localName==="template"?t.content.firstChild:t.firstChild;if(e instanceof Comment){const i=e.textContent.trim().split(":");if(i[0]===L0e)return i[1]}return""}function cit(t){const e=t.localName==="template"?t.content.firstChild:t.firstChild;e.parentNode.removeChild(e)}const uit=/;\s*/m,dit=/^\s*(initial)|(inherit)\s*$/,Lee=/\s*!important/,X6="_-_";class hit{constructor(){this._map={}}set(e,i){e=e.trim(),this._map[e]={properties:i,dependants:{}}}get(e){return e=e.trim(),this._map[e]||null}}let jO=null;class zs{constructor(){this._currentElement=null,this._measureElement=null,this._map=new hit}detectMixin(e){return PQe(e)}gatherStyles(e){const i=oit(e.content);if(i){const n=document.createElement("style");return n.textContent=i,e.content.insertBefore(n,e.content.firstChild),n}return null}transformTemplate(e,i){e._gatheredStyle===void 0&&(e._gatheredStyle=this.gatherStyles(e));const n=e._gatheredStyle;return n?this.transformStyle(n,i):null}transformStyle(e,i=""){let n=Pee(e);return this.transformRules(n,i),e.textContent=K6(n),n}transformCustomStyle(e){let i=Pee(e);return UE(i,n=>{n.selector===":root"&&(n.selector="html"),this.transformRule(n)}),e.textContent=K6(i),i}transformRules(e,i){this._currentElement=i,UE(e,n=>{this.transformRule(n)}),this._currentElement=null}transformRule(e){e.cssText=this.transformCssText(e.parsedCssText,e),e.selector===":root"&&(e.selector=":host > *")}transformCssText(e,i){return e=e.replace(L6,(n,r,s,o)=>this._produceCssProperties(n,r,s,o,i)),this._consumeCssProperties(e,i)}_getInitialValueForProperty(e){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(e)}_fallbacksFromPreviousRules(e){let i=e;for(;i.parent;)i=i.parent;const n={};let r=!1;return UE(i,s=>{r=r||s===e,r||s.selector===e.selector&&Object.assign(n,this._cssTextToMap(s.parsedCssText))}),n}_consumeCssProperties(e,i){let n=null;for(;n=OO.exec(e);){let r=n[0],s=n[1],o=n.index,a=o+r.indexOf("@apply"),l=o+r.length,u=e.slice(0,a),h=e.slice(l),p=i?this._fallbacksFromPreviousRules(i):{};Object.assign(p,this._cssTextToMap(u));let f=this._atApplyToCssProperties(s,p);e=`${u}${f}${h}`,OO.lastIndex=o+f.length}return e}_atApplyToCssProperties(e,i){e=e.replace(uit,"");let n=[],r=this._map.get(e);if(r||(this._map.set(e,{}),r=this._map.get(e)),r){let s,o,a;this._currentElement&&(r.dependants[this._currentElement]=!0);const l=r.properties;for(s in l)a=i&&i[s],o=[s,": var(",e,X6,s],a&&o.push(",",a.replace(Lee,"")),o.push(")"),Lee.test(l[s])&&o.push(" !important"),n.push(o.join(""))}return n.join("; ")}_replaceInitialOrInherit(e,i){let n=dit.exec(i);return n&&(i=n[1]?this._getInitialValueForProperty(e):"apply-shim-inherit"),i}_cssTextToMap(e,i=!1){let n,r,s=e.split(";"),o={};for(let a,l,u=0;u<s.length;u++)a=s[u],a&&(l=a.split(":"),l.length>1&&(n=l[0].trim(),r=l.slice(1).join(":"),i&&(r=this._replaceInitialOrInherit(n,r)),o[n]=r));return o}_invalidateMixinEntry(e){if(jO)for(let i in e.dependants)i!==this._currentElement&&jO(i)}_produceCssProperties(e,i,n,r,s){if(n&&R0e(n,(_,w)=>{w&&this._map.get(w)&&(r=`@apply ${w};`)}),!r)return e;let o=this._consumeCssProperties(""+r,s),a=e.slice(0,e.indexOf("--")),l=this._cssTextToMap(o,!0),u=l,h=this._map.get(i),p=h&&h.properties;p?u=Object.assign(Object.create(p),l):this._map.set(i,u);let f,g,v=[],b=!1;for(f in u)g=l[f],g===void 0&&(g="initial"),p&&!(f in p)&&(b=!0),v.push(`${i}${X6}${f}: ${g}`);return b&&this._invalidateMixinEntry(h),h&&(h.properties=u),n&&(a=`${e};${a}`),`${a}${v.join("; ")};`}}zs.prototype.detectMixin=zs.prototype.detectMixin,zs.prototype.transformStyle=zs.prototype.transformStyle,zs.prototype.transformCustomStyle=zs.prototype.transformCustomStyle,zs.prototype.transformRules=zs.prototype.transformRules,zs.prototype.transformRule=zs.prototype.transformRule,zs.prototype.transformTemplate=zs.prototype.transformTemplate,zs.prototype._separator=X6,Object.defineProperty(zs.prototype,"invalidCallback",{get:()=>jO,set(t){jO=t}});const Q6={},VO="_applyShimCurrentVersion",Pw="_applyShimNextVersion",UO="_applyShimValidatingVersion",pit=Promise.resolve();function fit(t){let e=Q6[t];e&&mit(e)}function mit(t){t[VO]=t[VO]||0,t[UO]=t[UO]||0,t[Pw]=(t[Pw]||0)+1}function D0e(t){return t[VO]===t[Pw]}function git(t){return!D0e(t)&&t[UO]===t[Pw]}function yit(t){t[UO]=t[Pw],t._validating||(t._validating=!0,pit.then(function(){t[VO]=t[Pw],t._validating=!1}))}const XS=new zs;class vit{constructor(){this.customStyleInterface=null,XS.invalidCallback=fit}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=e=>{XS.transformCustomStyle(e)},this.customStyleInterface.validateCallback=()=>{requestAnimationFrame(()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles()})})}prepareTemplate(e,i){if(this.ensure(),Ree(e))return;Q6[i]=e;let n=XS.transformTemplate(e,i);e._styleAst=n}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let e=this.customStyleInterface.processStyles();if(this.customStyleInterface.enqueued){for(let i=0;i<e.length;i++){let n=e[i],r=this.customStyleInterface.getStyleForCustomStyle(n);r&&XS.transformCustomStyle(r)}this.customStyleInterface.enqueued=!1}}styleSubtree(e,i){if(this.ensure(),i&&D6(e,i),e.shadowRoot){this.styleElement(e);let n=e.shadowRoot.children||e.shadowRoot.childNodes;for(let r=0;r<n.length;r++)this.styleSubtree(n[r])}else{let n=e.children||e.childNodes;for(let r=0;r<n.length;r++)this.styleSubtree(n[r])}}styleElement(e){this.ensure();let{is:i}=sit(e),n=Q6[i];if((!n||!Ree(n))&&n&&!D0e(n)){git(n)||(this.prepareTemplate(n,i),yit(n));let r=e.shadowRoot;if(r){let s=r.querySelector("style");s&&(s.__cssRules=n._styleAst,s.textContent=K6(n._styleAst))}}}styleDocument(e){this.ensure(),this.styleSubtree(document.body,e)}}if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){const t=new vit;let e=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(i,n,r){t.flushCustomStyles(),t.prepareTemplate(i,n)},prepareTemplateStyles(i,n,r){window.ShadyCSS.prepareTemplate(i,n,r)},prepareTemplateDom(i,n){},styleSubtree(i,n){t.flushCustomStyles(),t.styleSubtree(i,n)},styleElement(i){t.flushCustomStyles(),t.styleElement(i)},styleDocument(i){t.flushCustomStyles(),t.styleDocument(i)},getComputedStyleValue:(i,n)=>Vye(i,n),flushCustomStyles(){t.flushCustomStyles()},nativeCss:N7,nativeShadow:KR,cssBuild:QC,disableRuntime:Uye},e&&(window.ShadyCSS.CustomStyleInterface=e)}window.ShadyCSS.ApplyShim=XS;const bit=/:host\(:dir\((ltr|rtl)\)\)/g,_it=':host([dir="$1"])',wit=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,xit=':host([dir="$2"]) $1',Sit=/:dir\((?:ltr|rtl)\)/,Dee=Boolean(window.ShadyDOM&&window.ShadyDOM.inUse),BE=[];let HE=null,rH="";function F0e(){rH=document.documentElement.getAttribute("dir")}function N0e(t){t.__autoDirOptOut||t.setAttribute("dir",rH)}function z0e(){F0e(),rH=document.documentElement.getAttribute("dir");for(let t=0;t<BE.length;t++)N0e(BE[t])}function Eit(){HE&&HE.takeRecords().length&&z0e()}const Cit=Da(t=>{Dee||HE||(F0e(),HE=new MutationObserver(z0e),HE.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));const e=l0e(t);class i extends e{static _processStyleText(r,s){return r=e._processStyleText.call(this,r,s),!Dee&&Sit.test(r)&&(r=this._replaceDirInCssText(r),this.__activateDir=!0),r}static _replaceDirInCssText(r){let s=r;return s=s.replace(bit,_it),s=s.replace(wit,xit),s}constructor(){super(),this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){e.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(Eit(),BE.push(this),N0e(this))}disconnectedCallback(){if(e.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){const r=BE.indexOf(this);r>-1&&BE.splice(r,1)}}}return i.__activateDir=!1,i});function Fee(){document.body.removeAttribute("unresolved")}function Cx(t,e,i){return{index:t,removed:e,addedCount:i}}document.readyState==="interactive"||document.readyState==="complete"?Fee():window.addEventListener("DOMContentLoaded",Fee);const j0e=0,V0e=1,eU=2,tU=3;function Iit(t,e,i,n,r,s){let o=s-r+1,a=i-e+1,l=new Array(o);for(let u=0;u<o;u++)l[u]=new Array(a),l[u][0]=u;for(let u=0;u<a;u++)l[0][u]=u;for(let u=1;u<o;u++)for(let h=1;h<a;h++)if(sH(t[e+h-1],n[r+u-1]))l[u][h]=l[u-1][h-1];else{let p=l[u-1][h]+1,f=l[u][h-1]+1;l[u][h]=p<f?p:f}return l}function Tit(t){let e=t.length-1,i=t[0].length-1,n=t[e][i],r=[];for(;e>0||i>0;){if(e==0){r.push(eU),i--;continue}if(i==0){r.push(tU),e--;continue}let s,o=t[e-1][i-1],a=t[e-1][i],l=t[e][i-1];s=a<l?a<o?a:o:l<o?l:o,s==o?(o==n?r.push(j0e):(r.push(V0e),n=o),e--,i--):s==a?(r.push(tU),e--,n=a):(r.push(eU),i--,n=l)}return r.reverse(),r}function kit(t,e,i,n,r,s){let o,a=0,l=0,u=Math.min(i-e,s-r);if(e==0&&r==0&&(a=$it(t,n,u)),i==t.length&&s==n.length&&(l=Ait(t,n,u-a)),r+=a,s-=l,(i-=l)-(e+=a)==0&&s-r==0)return[];if(e==i){for(o=Cx(e,[],0);r<s;)o.removed.push(n[r++]);return[o]}if(r==s)return[Cx(e,[],i-e)];let h=Tit(Iit(t,e,i,n,r,s));o=void 0;let p=[],f=e,g=r;for(let v=0;v<h.length;v++)switch(h[v]){case j0e:o&&(p.push(o),o=void 0),f++,g++;break;case V0e:o||(o=Cx(f,[],0)),o.addedCount++,f++,o.removed.push(n[g]),g++;break;case eU:o||(o=Cx(f,[],0)),o.addedCount++,f++;break;case tU:o||(o=Cx(f,[],0)),o.removed.push(n[g]),g++}return o&&p.push(o),p}function $it(t,e,i){for(let n=0;n<i;n++)if(!sH(t[n],e[n]))return n;return i}function Ait(t,e,i){let n=t.length,r=e.length,s=0;for(;s<i&&sH(t[--n],e[--r]);)s++;return s}function U0e(t,e){return kit(t,0,t.length,e,0,e.length)}function sH(t,e){return t===e}function xv(t){return t.localName==="slot"}let wh=class{static getFlattenedNodes(t){const e=ze(t);return xv(t)?e.assignedNodes({flatten:!0}):Array.from(e.childNodes).map(i=>xv(i)?ze(i).assignedNodes({flatten:!0}):[i]).reduce((i,n)=>i.concat(n),[])}constructor(t,e){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=t,this.callback=e,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){xv(this._target)?this._listenSlots([this._target]):ze(this._target).children&&(this._listenSlots(ze(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,t=>{this._processMutations(t)}):(this._nativeChildrenObserver=new MutationObserver(t=>{this._processMutations(t)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){xv(this._target)?this._unlistenSlots([this._target]):ze(this._target).children&&(this._unlistenSlots(ze(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,ml.run(()=>this.flush()))}_processMutations(t){this._processSlotMutations(t),this.flush()}_processSlotMutations(t){if(t)for(let e=0;e<t.length;e++){let i=t[e];i.addedNodes&&this._listenSlots(i.addedNodes),i.removedNodes&&this._unlistenSlots(i.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let t={target:this._target,addedNodes:[],removedNodes:[]},e=this.constructor.getFlattenedNodes(this._target),i=U0e(e,this._effectiveNodes);for(let r,s=0;s<i.length&&(r=i[s]);s++)for(let o,a=0;a<r.removed.length&&(o=r.removed[a]);a++)t.removedNodes.push(o);for(let r,s=0;s<i.length&&(r=i[s]);s++)for(let o=r.index;o<r.index+r.addedCount;o++)t.addedNodes.push(e[o]);this._effectiveNodes=e;let n=!1;return(t.addedNodes.length||t.removedNodes.length)&&(n=!0,this.callback.call(this._target,t)),n}_listenSlots(t){for(let e=0;e<t.length;e++){let i=t[e];xv(i)&&i.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(t){for(let e=0;e<t.length;e++){let i=t[e];xv(i)&&i.removeEventListener("slotchange",this._boundSchedule)}}};const Sv=Element.prototype,Mit=Sv.matches||Sv.matchesSelector||Sv.mozMatchesSelector||Sv.msMatchesSelector||Sv.oMatchesSelector||Sv.webkitMatchesSelector,B0e=function(t,e){return Mit.call(t,e)};class ti{constructor(e){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(e),this.node=e}observeNodes(e){return new wh(this.node,e)}unobserveNodes(e){e.disconnect()}notifyObserver(){}deepContains(e){if(ze(this.node).contains(e))return!0;let i=e,n=e.ownerDocument;for(;i&&i!==n&&i!==this.node;)i=ze(i).parentNode||ze(i).host;return i===this.node}getOwnerRoot(){return ze(this.node).getRootNode()}getDistributedNodes(){return this.node.localName==="slot"?ze(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let e=[],i=ze(this.node).assignedSlot;for(;i;)e.push(i),i=ze(i).assignedSlot;return e}importNode(e,i){let n=this.node instanceof Document?this.node:this.node.ownerDocument;return ze(n).importNode(e,i)}getEffectiveChildNodes(){return wh.getFlattenedNodes(this.node)}queryDistributedElements(e){let i=this.getEffectiveChildNodes(),n=[];for(let r,s=0,o=i.length;s<o&&(r=i[s]);s++)r.nodeType===Node.ELEMENT_NODE&&B0e(r,e)&&n.push(r);return n}get activeElement(){let e=this.node;return e._activeElement!==void 0?e._activeElement:e.activeElement}}function Oit(t,e){for(let i=0;i<e.length;i++){let n=e[i];t[n]=function(){return this.node[n].apply(this.node,arguments)}}}function Nee(t,e){for(let i=0;i<e.length;i++){let n=e[i];Object.defineProperty(t,n,{get:function(){return this.node[n]},configurable:!0})}}function Pit(t,e){for(let i=0;i<e.length;i++){let n=e[i];Object.defineProperty(t,n,{get:function(){return this.node[n]},set:function(r){this.node[n]=r},configurable:!0})}}class iU{constructor(e){this.event=e}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}}ti.prototype.cloneNode,ti.prototype.appendChild,ti.prototype.insertBefore,ti.prototype.removeChild,ti.prototype.replaceChild,ti.prototype.setAttribute,ti.prototype.removeAttribute,ti.prototype.querySelector,ti.prototype.querySelectorAll,ti.prototype.parentNode,ti.prototype.firstChild,ti.prototype.lastChild,ti.prototype.nextSibling,ti.prototype.previousSibling,ti.prototype.firstElementChild,ti.prototype.lastElementChild,ti.prototype.nextElementSibling,ti.prototype.previousElementSibling,ti.prototype.childNodes,ti.prototype.children,ti.prototype.classList,ti.prototype.textContent,ti.prototype.innerHTML;let nU=ti;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class t extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(ti.prototype).forEach(e=>{e!="activeElement"&&(t.prototype[e]=ti.prototype[e])}),Nee(t.prototype,["classList"]),nU=t,Object.defineProperties(iU.prototype,{localTarget:{get(){const e=this.event.currentTarget,i=e&&Ff(e).getOwnerRoot(),n=this.path;for(let r=0;r<n.length;r++){const s=n[r];if(Ff(s).getOwnerRoot()===i)return s}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}})}else Oit(ti.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),Nee(ti.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),Pit(ti.prototype,["textContent","innerHTML","className"]);const Ff=function(t){if((t=t||document)instanceof nU||t instanceof iU)return t;let e=t.__domApi;return e||(e=t instanceof Event?new iU(t):new nU(t),t.__domApi=e),e},t5=window.ShadyDOM,zee=window.ShadyCSS;function jee(t,e){return ze(t).getRootNode()===e}function Rit(t,e=!1){if(!t5||!zee||!t5.handlesDynamicScoping)return null;const i=zee.ScopingShim;if(!i)return null;const n=i.scopeForNode(t),r=ze(t).getRootNode(),s=o=>{if(!jee(o,r))return;const a=Array.from(t5.nativeMethods.querySelectorAll.call(o,"*"));a.push(o);for(let l=0;l<a.length;l++){const u=a[l];if(!jee(u,r))continue;const h=i.currentScopeForNode(u);h!==n&&(h!==""&&i.unscopeNode(u,h),i.scopeNode(u,n))}};if(s(t),e){const o=new MutationObserver(a=>{for(let l=0;l<a.length;l++){const u=a[l];for(let h=0;h<u.addedNodes.length;h++){const p=u.addedNodes[h];p.nodeType===Node.ELEMENT_NODE&&s(p)}}});return o.observe(t,{childList:!0,subtree:!0}),o}return null}const i5="disable-upgrade",H0e=t=>{for(;t;){const e=Object.getOwnPropertyDescriptor(t,"observedAttributes");if(e)return e.get;t=Object.getPrototypeOf(t.prototype).constructor}return()=>[]};Da(t=>{const e=tL(t);let i=H0e(e);class n extends e{constructor(){super(),this.__isUpgradeDisabled}static get observedAttributes(){return i.call(this).concat(i5)}_initializeProperties(){this.hasAttribute(i5)?this.__isUpgradeDisabled=!0:super._initializeProperties()}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(s){return super._canApplyPropertyDefault(s)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(s))}attributeChangedCallback(s,o,a,l){s==i5?this.__isUpgradeDisabled&&a==null&&(super._initializeProperties(),this.__isUpgradeDisabled=!1,ze(this).isConnected&&super.connectedCallback()):super.attributeChangedCallback(s,o,a,l)}connectedCallback(){this.__isUpgradeDisabled||super.connectedCallback()}disconnectedCallback(){this.__isUpgradeDisabled||super.disconnectedCallback()}}return n});const bk="disable-upgrade";let Lit=window.ShadyCSS;const G0e=Da(t=>{const e=h2(tL(t)),i=W6?e:Cit(e),n=H0e(i),r={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class s extends i{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers,this.__isUpgradeDisabled,this.__needsAttributesAtConnected,this._legacyForceObservedAttributes}static get importMeta(){return this.prototype.importMeta}created(){}__attributeReaction(a,l,u){(this.__dataAttributes&&this.__dataAttributes[a]||a===bk)&&this.attributeChangedCallback(a,l,u,null)}setAttribute(a,l){if(gk&&!this._legacyForceObservedAttributes){const u=this.getAttribute(a);super.setAttribute(a,l),this.__attributeReaction(a,u,String(l))}else super.setAttribute(a,l)}removeAttribute(a){if(gk&&!this._legacyForceObservedAttributes){const l=this.getAttribute(a);super.removeAttribute(a),this.__attributeReaction(a,l,null)}else super.removeAttribute(a)}static get observedAttributes(){return gk&&!this.prototype._legacyForceObservedAttributes?(this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))||(this.__observedAttributes=[],this.prototype,void 0),this.__observedAttributes):n.call(this).concat(bk)}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(a){return super._canApplyPropertyDefault(a)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(a))}connectedCallback(){this.__needsAttributesAtConnected&&this._takeAttributes(),this.__isUpgradeDisabled||(super.connectedCallback(),this.isAttached=!0,this.attached())}attached(){}disconnectedCallback(){this.__isUpgradeDisabled||(super.disconnectedCallback(),this.isAttached=!1,this.detached())}detached(){}attributeChangedCallback(a,l,u,h){l!==u&&(a==bk?this.__isUpgradeDisabled&&u==null&&(this._initializeProperties(),this.__isUpgradeDisabled=!1,ze(this).isConnected&&this.connectedCallback()):(super.attributeChangedCallback(a,l,u,h),this.attributeChanged(a,l,u)))}attributeChanged(a,l,u){}_initializeProperties(){if(eI&&this.hasAttribute(bk))this.__isUpgradeDisabled=!0;else{let a=Object.getPrototypeOf(this);a.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",a))||(this._registered(),a.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),gk&&!this._legacyForceObservedAttributes&&(this.hasAttributes()?this._takeAttributes():this.parentNode||(this.__needsAttributesAtConnected=!0)),this._applyListeners()}}_takeAttributes(){const a=this.attributes;for(let l=0,u=a.length;l<u;l++){const h=a[l];this.__attributeReaction(h.name,null,h.value)}}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(a){return this._serializeValue(a)}deserialize(a,l){return this._deserializeValue(a,l)}reflectPropertyToAttribute(a,l,u){this._propertyToAttribute(a,l,u)}serializeValueToAttribute(a,l,u){this._valueToNodeAttribute(u||this,a,l)}extend(a,l){if(!a||!l)return a||l;let u=Object.getOwnPropertyNames(l);for(let h,p=0;p<u.length&&(h=u[p]);p++){let f=Object.getOwnPropertyDescriptor(l,h);f&&Object.defineProperty(a,h,f)}return a}mixin(a,l){for(let u in l)a[u]=l[u];return a}chainObject(a,l){return a&&l&&a!==l&&(a.__proto__=l),a}instanceTemplate(a){let l=this.constructor._contentForTemplate(a);return document.importNode(l,!0)}fire(a,l,u){u=u||{},l=l??{};let h=new Event(a,{bubbles:u.bubbles===void 0||u.bubbles,cancelable:Boolean(u.cancelable),composed:u.composed===void 0||u.composed});h.detail=l;let p=u.node||this;return ze(p).dispatchEvent(h),h}listen(a,l,u){a=a||this;let h=this.__boundListeners||(this.__boundListeners=new WeakMap),p=h.get(a);p||(p={},h.set(a,p));let f=l+u;p[f]||(p[f]=this._addMethodEventListenerToNode(a,l,u,this))}unlisten(a,l,u){a=a||this;let h=this.__boundListeners&&this.__boundListeners.get(a),p=l+u,f=h&&h[p];f&&(this._removeEventListenerFromNode(a,l,f),h[p]=null)}setScrollDirection(a,l){w0e(l||this,r[a]||"auto")}$$(a){return this.root.querySelector(a)}get domHost(){let a=ze(this).getRootNode();return a instanceof DocumentFragment?a.host:a}distributeContent(){const a=Ff(this);window.ShadyDOM&&a.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return Ff(this).getEffectiveChildNodes()}queryDistributedElements(a){return Ff(this).queryDistributedElements(a)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter(function(a){return a.nodeType===Node.ELEMENT_NODE})}getEffectiveTextContent(){let a=this.getEffectiveChildNodes(),l=[];for(let u,h=0;u=a[h];h++)u.nodeType!==Node.COMMENT_NODE&&l.push(u.textContent);return l.join("")}queryEffectiveChildren(a){let l=this.queryDistributedElements(a);return l&&l[0]}queryAllEffectiveChildren(a){return this.queryDistributedElements(a)}getContentChildNodes(a){let l=this.root.querySelector(a||"slot");return l?Ff(l).getDistributedNodes():[]}getContentChildren(a){return this.getContentChildNodes(a).filter(function(l){return l.nodeType===Node.ELEMENT_NODE})}isLightDescendant(a){const l=this;return l!==a&&ze(l).contains(a)&&ze(l).getRootNode()===ze(a).getRootNode()}isLocalDescendant(a){return this.root===ze(a).getRootNode()}scopeSubtree(a,l=!1){return Rit(a,l)}getComputedStyleValue(a){return Lit.getComputedStyleValue(this,a)}debounce(a,l,u){return this._debouncers=this._debouncers||{},this._debouncers[a]=dn.debounce(this._debouncers[a],u>0?Ac.after(u):ml,l.bind(this))}isDebouncerActive(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];return!(!l||!l.isActive())}flushDebouncer(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];l&&l.flush()}cancelDebouncer(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];l&&l.cancel()}async(a,l){return l>0?Ac.run(a.bind(this),l):~ml.run(a.bind(this))}cancelAsync(a){a<0?ml.cancel(~a):Ac.cancel(a)}create(a,l){let u=document.createElement(a);if(l)if(u.setProperties)u.setProperties(l);else for(let h in l)u[h]=l[h];return u}elementMatches(a,l){return B0e(l||this,a)}toggleAttribute(a,l){let u=this;return arguments.length===3&&(u=arguments[2]),arguments.length==1&&(l=!u.hasAttribute(a)),l?(ze(u).setAttribute(a,""),!0):(ze(u).removeAttribute(a),!1)}toggleClass(a,l,u){u=u||this,arguments.length==1&&(l=!u.classList.contains(a)),l?u.classList.add(a):u.classList.remove(a)}transform(a,l){(l=l||this).style.webkitTransform=a,l.style.transform=a}translate3d(a,l,u,h){h=h||this,this.transform("translate3d("+a+","+l+","+u+")",h)}arrayDelete(a,l){let u;if(Array.isArray(a)){if(u=a.indexOf(l),u>=0)return a.splice(u,1)}else if(u=Vs(this,a).indexOf(l),u>=0)return this.splice(a,u,1);return null}_logger(a,l){switch(Array.isArray(l)&&l.length===1&&Array.isArray(l[0])&&(l=l[0]),a){case"log":case"warn":case"error":console[a](...l)}}_log(...a){this._logger("log",a)}_warn(...a){this._logger("warn",a)}_error(...a){this._logger("error",a)}_logf(a,...l){return["[%s::%s]",this.is,a,...l]}}return s.prototype.is="",s}),Dit={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},q0e={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},Fit=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},q0e);function Nit(t,e,i){const n=t._noAccessors,r=Object.getOwnPropertyNames(t);for(let s=0;s<r.length;s++){let o=r[s];if(!(o in i))if(n)e[o]=t[o];else{let a=Object.getOwnPropertyDescriptor(t,o);a&&(a.configurable=!0,Object.defineProperty(e,o,a))}}}function zit(t,e,i){for(let n=0;n<e.length;n++)W0e(t,e[n],i,Fit)}function W0e(t,e,i,n){Nit(e,t,n);for(let r in Dit)e[r]&&(i[r]=i[r]||[],i[r].push(e[r]))}function J0e(t,e,i){e=e||[];for(let n=t.length-1;n>=0;n--){let r=t[n];r?Array.isArray(r)?J0e(r,e):e.indexOf(r)<0&&(!i||i.indexOf(r)<0)&&e.unshift(r):console.warn("behavior is null, check for missing or 404 import")}return e}function Vee(t,e){for(const i in e){const n=t[i],r=e[i];t[i]=!("value"in r)&&n&&"value"in n?Object.assign({value:n.value},r):r}}const Uee=G0e(HTMLElement);function jit(t,e,i){let n;const r={};class s extends e{static _finalizeClass(){if(this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this))){if(n)for(let l,u=0;u<n.length;u++)l=n[u],l.properties&&this.createProperties(l.properties),l.observers&&this.createObservers(l.observers,l.properties);t.properties&&this.createProperties(t.properties),t.observers&&this.createObservers(t.observers,t.properties),this._prepareTemplate()}else e._finalizeClass.call(this)}static get properties(){const l={};if(n)for(let u=0;u<n.length;u++)Vee(l,n[u].properties);return Vee(l,t.properties),l}static get observers(){let l=[];if(n)for(let u,h=0;h<n.length;h++)u=n[h],u.observers&&(l=l.concat(u.observers));return t.observers&&(l=l.concat(t.observers)),l}created(){super.created();const l=r.created;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}_registered(){const l=s.prototype;if(!l.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",l))){l.__hasRegisterFinished=!0,super._registered(),eI&&o(l);const u=Object.getPrototypeOf(this);let h=r.beforeRegister;if(h)for(let p=0;p<h.length;p++)h[p].call(u);if(h=r.registered,h)for(let p=0;p<h.length;p++)h[p].call(u)}}_applyListeners(){super._applyListeners();const l=r.listeners;if(l)for(let u=0;u<l.length;u++){const h=l[u];if(h)for(let p in h)this._addMethodEventListenerToNode(this,p,h[p])}}_ensureAttributes(){const l=r.hostAttributes;if(l)for(let u=l.length-1;u>=0;u--){const h=l[u];for(let p in h)this._ensureAttribute(p,h[p])}super._ensureAttributes()}ready(){super.ready();let l=r.ready;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}attached(){super.attached();let l=r.attached;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}detached(){super.detached();let l=r.detached;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}attributeChanged(l,u,h){super.attributeChanged();let p=r.attributeChanged;if(p)for(let f=0;f<p.length;f++)p[f].call(this,l,u,h)}}if(i){Array.isArray(i)||(i=[i]);let a=e.prototype.behaviors;n=J0e(i,null,a),s.prototype.behaviors=a?a.concat(i):n}const o=a=>{n&&zit(a,n,r),W0e(a,t,r,q0e)};return eI||o(s.prototype),s.generatedFrom=t,s}const Vit=function(t,e){t||console.warn("Polymer.Class requires `info` argument");let i=e?e(Uee):Uee;return i=jit(t,i,t.behaviors),i.is=i.prototype.is=t.is,i};function oH(t,e,i,n,r){let s;r&&(s=typeof i=="object"&&i!==null,s&&(n=t.__dataTemp[e]));let o=n!==i&&(n==n||i==i);return s&&o&&(t.__dataTemp[e]=i),o}const aH=Da(t=>{class e extends t{_shouldPropertyChange(n,r,s){return oH(this,n,r,s,!0)}}return e}),Y0e=Da(t=>{class e extends t{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(n,r,s){return oH(this,n,r,s,this.mutableData)}}return e});aH._mutablePropertyChange=oH;let rU=null;function sU(){return rU}sU.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:sU,writable:!0}});const Z0e=eL(sU),Uit=aH(Z0e);function Bit(t,e){rU=t,Object.setPrototypeOf(t,e.prototype),new e,rU=null}const Hit=eL(class{});function K0e(t,e){for(let i=0;i<e.length;i++){let n=e[i];if(Boolean(t)!=Boolean(n.__hideTemplateChildren__))if(n.nodeType===Node.TEXT_NODE)t?(n.__polymerTextContent__=n.textContent,n.textContent=""):n.textContent=n.__polymerTextContent__;else if(n.localName==="slot")if(t)n.__polymerReplaced__=document.createComment("hidden-slot"),ze(ze(n).parentNode).replaceChild(n.__polymerReplaced__,n);else{const r=n.__polymerReplaced__;r&&ze(ze(r).parentNode).replaceChild(n,r)}else n.style&&(t?(n.__polymerDisplay__=n.style.display,n.style.display="none"):n.style.display=n.__polymerDisplay__);n.__hideTemplateChildren__=t,n._showHideChildren&&n._showHideChildren(t)}}class xf extends Hit{constructor(e){super(),this._configureProperties(e),this.root=this._stampTemplate(this.__dataHost);let i=[];this.children=i;for(let r=this.root.firstChild;r;r=r.nextSibling)i.push(r),r.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let n=this.__templatizeOptions;(e&&n.instanceProps||!n.instanceProps)&&this._enableProperties()}_configureProperties(e){if(this.__templatizeOptions.forwardHostProp)for(let i in this.__hostProps)this._setPendingProperty(i,this.__dataHost["_host_"+i]);for(let i in e)this._setPendingProperty(i,e[i])}forwardHostProp(e,i){this._setPendingPropertyOrPath(e,i,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(e,i,n){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(e,i,r=>{r.model=this,n(r)});else{let r=this.__dataHost.__dataHost;r&&r._addEventListenerToNode(e,i,n)}}_showHideChildren(e){K0e(e,this.children)}_setUnmanagedPropertyToNode(e,i,n){e.__hideTemplateChildren__&&e.nodeType==Node.TEXT_NODE&&i=="textContent"?e.__polymerTextContent__=n:super._setUnmanagedPropertyToNode(e,i,n)}get parentModel(){let e=this.__parentModel;if(!e){let i;e=this;do e=e.__dataHost.__dataHost;while((i=e.__templatizeOptions)&&!i.parentModel);this.__parentModel=e}return e}dispatchEvent(e){return!0}}xf.prototype.__dataHost,xf.prototype.__templatizeOptions,xf.prototype._methodHost,xf.prototype.__templatizeOwner,xf.prototype.__hostProps;const Git=aH(xf);function Bee(t){let e=t.__dataHost;return e&&e._methodHost||e}function qit(t,e,i){let n=i.mutableData?Git:xf;cI.mixin&&(n=cI.mixin(n));let r=class extends n{};return r.prototype.__templatizeOptions=i,r.prototype._bindTemplate(t),Yit(r,t,e,i),r}function Wit(t,e,i,n){let r=i.forwardHostProp;if(r&&e.hasHostProps){const s=t.localName=="template";let o=e.templatizeTemplateClass;if(!o){if(s){let l=i.mutableData?Uit:Z0e;class u extends l{}o=e.templatizeTemplateClass=u}else{const l=t.constructor;class u extends l{}o=e.templatizeTemplateClass=u}let a=e.hostProps;for(let l in a)o.prototype._addPropertyEffect("_host_"+l,o.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:Jit(l,r)}),o.prototype._createNotifyingProperty("_host_"+l);Bye&&n&&Xit(e,i,n)}if(t.__dataProto&&Object.assign(t.__data,t.__dataProto),s)Bit(t,o),t.__dataTemp={},t.__dataPending=null,t.__dataOld=null,t._enableProperties();else{Object.setPrototypeOf(t,o.prototype);const a=e.hostProps;for(let l in a)if(l="_host_"+l,l in t){const u=t[l];delete t[l],t.__data[l]=u}}}}function Jit(t,e){return function(i,n,r){e.call(i.__templatizeOwner,n.substring(6),r[n])}}function Yit(t,e,i,n){let r=i.hostProps||{};for(let s in n.instanceProps){delete r[s];let o=n.notifyInstanceProp;o&&t.prototype._addPropertyEffect(s,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:Zit(s,o)})}if(n.forwardHostProp&&e.__dataHost)for(let s in r)i.hasHostProps||(i.hasHostProps=!0),t.prototype._addPropertyEffect(s,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:Kit()})}function Zit(t,e){return function(i,n,r){e.call(i.__templatizeOwner,i,n,r[n])}}function Kit(){return function(t,e,i){t.__dataHost._setPendingPropertyOrPath("_host_"+e,i[e],!0,!0)}}function cI(t,e,i){if(Aw&&!Bee(t))throw new Error("strictTemplatePolicy: template owner not trusted");if(i=i||{},t.__templatizeOwner)throw new Error("A <template> can only be templatized once");t.__templatizeOwner=e;let n=(e?e.constructor:xf)._parseTemplate(t),r=n.templatizeInstanceClass;r||(r=qit(t,n,i),n.templatizeInstanceClass=r);const s=Bee(t);Wit(t,n,i,s);let o=class extends r{};return o.prototype._methodHost=s,o.prototype.__dataHost=t,o.prototype.__templatizeOwner=e,o.prototype.__hostProps=n.hostProps,o}function Xit(t,e,i){const n=i.constructor._properties,{propertyEffects:r}=t,{instanceProps:s}=e;for(let o in r)if(!(n[o]||s&&s[o])){const a=r[o];for(let l=0;l<a.length;l++){const{part:u}=a[l].info;if(!u.signature||!u.signature.static){console.warn(`Property '${o}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}function Qit(t,e){let i;for(;e;)if(i=e.__dataHost?e:e.__templatizeInstance){if(i.__dataHost==t)return i;e=i.__dataHost}else e=ze(e).parentNode;return null}let Hee=!1;function lH(){if(eI&&!V7){if(!Hee){Hee=!0;const t=document.createElement("style");t.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(t)}return!0}return!1}const ent=h2(Y0e(eL(HTMLElement)));class tnt extends ent{static get observedAttributes(){return["mutable-data"]}constructor(){if(super(),Aw)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null}attributeChangedCallback(e,i,n,r){this.mutableData=!0}connectedCallback(){lH()||(this.style.display="none"),this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){ze(ze(this).parentNode).insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let e=0;e<this.__children.length;e++)this.root.appendChild(this.__children[e])}render(){let e;if(!this.__children){if(e=e||this.querySelector("template"),!e){let i=new MutationObserver(()=>{if(e=this.querySelector("template"),!e)throw new Error("dom-bind requires a <template> child");i.disconnect(),this.render()});return void i.observe(this,{childList:!0})}this.root=this._stampTemplate(e),this.$=this.root.$,this.__children=[];for(let i=this.root.firstChild;i;i=i.nextSibling)this.__children[this.__children.length]=i;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}}customElements.define("dom-bind",tnt);const int=Y0e(Hh);class Gee extends int{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!N6,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let e=0;e<this.__instances.length;e++)this.__detachInstance(e)}connectedCallback(){if(super.connectedCallback(),lH()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let e=ze(ze(this).parentNode);for(let i=0;i<this.__instances.length;i++)this.__attachInstance(i,e)}}__ensureTemplatized(){if(!this.__ctor){const e=this;let i=this.template=e._templateInfo?e:this.querySelector("template");if(!i){let r=new MutationObserver(()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");r.disconnect(),this.__render()});return r.observe(this,{childList:!0}),!1}let n={};n[this.as]=!0,n[this.indexAs]=!0,n[this.itemsIndexAs]=!0,this.__ctor=cI(i,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:n,forwardHostProp:function(r,s){let o=this.__instances;for(let a,l=0;l<o.length&&(a=o[l]);l++)a.forwardHostProp(r,s)},notifyInstanceProp:function(r,s,o){if(wet(this.as,s)){let a=r[this.itemsIndexAs];s==this.as&&(this.items[a]=o);let l=sI(this.as,`${JSCompiler_renameProperty("items",this)}.${a}`,s);this.notifyPath(l,o)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(e){if(typeof e=="string"){let i=e,n=this.__getMethodHost();return function(){return n[i].apply(n,arguments)}}return e}__sortChanged(e){this.__sortFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__filterChanged(e){this.__filterFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(e){return Math.ceil(1e3/e)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(e){if(this.__sortFn||this.__filterFn)if(e){if(this.__observePaths){let i=this.__observePaths;for(let n=0;n<i.length;n++)e.indexOf(i[n])===0&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(e){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(e.path,e.value)||(e.path==="items"&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(e,i=0){this.__renderDebouncer=dn.debounce(this.__renderDebouncer,i>0?Ac.after(i):ml,e.bind(this)),iL(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),Ow()}__render(){if(!this.__ensureTemplatized())return;let e=this.items||[];const i=this.__sortAndFilterItems(e),n=this.__calculateLimit(i.length);this.__updateInstances(e,n,i),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame(()=>this.__continueChunking())),this._setRenderedItemCount(this.__instances.length),N6&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(e){let i=new Array(e.length);for(let n=0;n<e.length;n++)i[n]=n;return this.__filterFn&&(i=i.filter((n,r,s)=>this.__filterFn(e[n],r,s))),this.__sortFn&&i.sort((n,r)=>this.__sortFn(e[n],e[r])),i}__calculateLimit(e){let i=e;const n=this.__instances.length;if(this.initialCount){let r;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(i=Math.min(e,this.initialCount),r=Math.max(i-n,0),this.__chunkCount=r||1):(r=Math.min(Math.max(e-n,0),this.__chunkCount),i=Math.min(n+r,e)),this.__shouldMeasureChunk=r===this.__chunkCount,this.__shouldContinueChunking=i<e,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,i}__continueChunking(){if(this.__shouldMeasureChunk){const e=performance.now()-this.__renderStartTime,i=this._targetFrameTime/e;this.__chunkCount=Math.round(this.__chunkCount*i)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(e,i,n){const r=this.__itemsIdxToInstIdx={};let s;for(s=0;s<i;s++){let o=this.__instances[s],a=n[s],l=e[a];r[a]=s,o?(o._setPendingProperty(this.as,l),o._setPendingProperty(this.indexAs,s),o._setPendingProperty(this.itemsIndexAs,a),o._flushProperties()):this.__insertInstance(l,s,a)}for(let o=this.__instances.length-1;o>=s;o--)this.__detachAndRemoveInstance(o)}__detachInstance(e){let i=this.__instances[e];const n=ze(i.root);for(let r=0;r<i.children.length;r++){let s=i.children[r];n.appendChild(s)}return i}__attachInstance(e,i){let n=this.__instances[e];i.insertBefore(n.root,this)}__detachAndRemoveInstance(e){this.__detachInstance(e),this.__instances.splice(e,1)}__stampInstance(e,i,n){let r={};return r[this.as]=e,r[this.indexAs]=i,r[this.itemsIndexAs]=n,new this.__ctor(r)}__insertInstance(e,i,n){const r=this.__stampInstance(e,i,n);let s=this.__instances[i+1],o=s?s.children[0]:this;return ze(ze(this).parentNode).insertBefore(r.root,o),this.__instances[i]=r,r}_showHideChildren(e){for(let i=0;i<this.__instances.length;i++)this.__instances[i]._showHideChildren(e)}__handleItemPath(e,i){let n=e.slice(6),r=n.indexOf("."),s=r<0?n:n.substring(0,r);if(s==parseInt(s,10)){let o=r<0?"":n.substring(r+1);this.__handleObservedPaths(o);let a=this.__itemsIdxToInstIdx[s],l=this.__instances[a];if(l){let u=this.as+(o?"."+o:"");l._setPendingPropertyOrPath(u,i,!1,!0),l._flushProperties()}return!0}}itemForElement(e){let i=this.modelForElement(e);return i&&i[this.as]}indexForElement(e){let i=this.modelForElement(e);return i&&i[this.indexAs]}modelForElement(e){return Qit(this.template,e)}}customElements.define(Gee.is,Gee);class X0e extends Hh{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"},notifyDomChange:{type:Boolean}}}constructor(){super(),this.__renderDebouncer=null,this._lastIf=!1,this.__hideTemplateChildren__=!1,this.__template,this._templateInfo}__debounceRender(){this.__renderDebouncer=dn.debounce(this.__renderDebouncer,ml,()=>this.__render()),iL(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();const e=ze(this).parentNode;e&&(e.nodeType!=Node.DOCUMENT_FRAGMENT_NODE||ze(e).host)||this.__teardownInstance()}connectedCallback(){super.connectedCallback(),lH()||(this.style.display="none"),this.if&&this.__debounceRender()}__ensureTemplate(){if(!this.__template){const e=this;let i=e._templateInfo?e:ze(e).querySelector("template");if(!i){let n=new MutationObserver(()=>{if(!ze(this).querySelector("template"))throw new Error("dom-if requires a <template> child");n.disconnect(),this.__render()});return n.observe(this,{childList:!0}),!1}this.__template=i}return!0}__ensureInstance(){let e=ze(this).parentNode;if(this.__hasInstance()){let i=this.__getInstanceNodes();if(i&&i.length&&ze(this).previousSibling!==i[i.length-1])for(let n,r=0;r<i.length&&(n=i[r]);r++)ze(e).insertBefore(n,this)}else{if(!e||!this.__ensureTemplate())return!1;this.__createAndInsertInstance(e)}return!0}render(){Ow()}__render(){if(this.if){if(!this.__ensureInstance())return}else this.restamp&&this.__teardownInstance();this._showHideChildren(),N6&&!this.notifyDomChange||this.if==this._lastIf||(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__hasInstance(){}__getInstanceNodes(){}__createAndInsertInstance(e){}__teardownInstance(){}_showHideChildren(){}}class nnt extends X0e{constructor(){super(),this.__instance=null,this.__syncInfo=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.templateInfo.childNodes}__createAndInsertInstance(e){const i=this.__dataHost||this;if(Aw&&!this.__dataHost)throw new Error("strictTemplatePolicy: template owner not trusted");const n=i._bindTemplate(this.__template,!0);n.runEffects=(r,s,o)=>{let a=this.__syncInfo;if(this.if)a&&(this.__syncInfo=null,this._showHideChildren(),s=Object.assign(a.changedProps,s)),r(s,o);else if(this.__instance)if(a||(a=this.__syncInfo={runEffects:r,changedProps:{}}),o)for(const l in s){const u=Bh(l);a.changedProps[u]=this.__dataHost[u]}else Object.assign(a.changedProps,s)},this.__instance=i._stampTemplate(this.__template,n),ze(e).insertBefore(this.__instance,this)}__syncHostProperties(){const e=this.__syncInfo;e&&(this.__syncInfo=null,e.runEffects(e.changedProps,!1))}__teardownInstance(){const e=this.__dataHost||this;this.__instance&&(e._removeBoundDom(this.__instance),this.__instance=null,this.__syncInfo=null)}_showHideChildren(){const e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,K0e(e,this.__instance.templateInfo.childNodes)),e||this.__syncHostProperties()}}class rnt extends X0e{constructor(){super(),this.__ctor=null,this.__instance=null,this.__invalidProps=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.children}__createAndInsertInstance(e){this.__ctor||(this.__ctor=cI(this.__template,this,{mutableData:!0,forwardHostProp:function(i,n){this.__instance&&(this.if?this.__instance.forwardHostProp(i,n):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[Bh(i)]=!0))}})),this.__instance=new this.__ctor,ze(e).insertBefore(this.__instance.root,this)}__teardownInstance(){if(this.__instance){let e=this.__instance.children;if(e&&e.length){let i=ze(e[0]).parentNode;if(i){i=ze(i);for(let n,r=0;r<e.length&&(n=e[r]);r++)i.removeChild(n)}}this.__invalidProps=null,this.__instance=null}}__syncHostProperties(){let e=this.__invalidProps;if(e){this.__invalidProps=null;for(let i in e)this.__instance._setPendingProperty(i,this.__dataHost[i]);this.__instance._flushProperties()}}_showHideChildren(){const e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,this.__instance._showHideChildren(e)),e||this.__syncHostProperties()}}const qee=Hye?nnt:rnt;customElements.define(qee.is,qee);let snt=Da(t=>{let e=tL(t);class i extends e{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(r,s){let o=s.path;if(o==JSCompiler_renameProperty("items",this)){let a=s.base||[],l=this.__lastItems;if(r!==this.__lastMulti&&this.clearSelection(),l){let u=U0e(a,l);this.__applySplices(u)}this.__lastItems=a,this.__lastMulti=r}else if(s.path==`${JSCompiler_renameProperty("items",this)}.splices`)this.__applySplices(s.value.indexSplices);else{let a=o.slice(`${JSCompiler_renameProperty("items",this)}.`.length),l=parseInt(a,10);a.indexOf(".")<0&&a==l&&this.__deselectChangedIdx(l)}}__applySplices(r){let s=this.__selectedMap;for(let a=0;a<r.length;a++){let l=r[a];s.forEach((u,h)=>{u<l.index||(u>=l.index+l.removed.length?s.set(h,u+l.addedCount-l.removed.length):s.set(h,-1))});for(let u=0;u<l.addedCount;u++){let h=l.index+u;s.has(this.items[h])&&s.set(this.items[h],h)}}this.__updateLinks();let o=0;s.forEach((a,l)=>{a<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),o,1):this.selected=this.selectedItem=null,s.delete(l)):o++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let r=0;this.__selectedMap.forEach(s=>{s>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${s}`,`${JSCompiler_renameProperty("selected",this)}.${r++}`)})}else this.__selectedMap.forEach(r=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${r}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${r}`)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(r){return this.__selectedMap.has(r)}isIndexSelected(r){return this.isSelected(this.items[r])}__deselectChangedIdx(r){let s=this.__selectedIndexForItemIndex(r);if(s>=0){let o=0;this.__selectedMap.forEach((a,l)=>{s==o++&&this.deselect(l)})}}__selectedIndexForItemIndex(r){let s=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${r}`];if(s)return parseInt(s.slice(`${JSCompiler_renameProperty("selected",this)}.`.length),10)}deselect(r){let s=this.__selectedMap.get(r);if(s>=0){let o;this.__selectedMap.delete(r),this.multi&&(o=this.__selectedIndexForItemIndex(s)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),o,1):this.selected=this.selectedItem=null}}deselectIndex(r){this.deselect(this.items[r])}select(r){this.selectIndex(this.items.indexOf(r))}selectIndex(r){let s=this.items[r];this.isSelected(s)?this.toggle&&this.deselectIndex(r):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(s,r),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),s):this.selected=this.selectedItem=s)}}return i})(Hh);class Wee extends snt{static get is(){return"array-selector"}static get template(){return null}}customElements.define(Wee.is,Wee);const Ev=G0e(HTMLElement).prototype;var _k=new Set;const ont={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this),this._boundOnDescendantIronResize=this._onDescendantIronResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):(_k.delete(this),window.removeEventListener("resize",this._boundNotifyResize)),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach(function(t){this.resizerShouldNotify(t)&&this._notifyDescendant(t)},this),this._fireResize())},assignParentResizable:function(t){this._parentResizable&&this._parentResizable.stopResizeNotificationsFor(this),this._parentResizable=t,t&&t._interestedResizables.indexOf(this)===-1&&(t._interestedResizables.push(this),t._subscribeIronResize(this))},stopResizeNotificationsFor:function(t){var e=this._interestedResizables.indexOf(t);e>-1&&(this._interestedResizables.splice(e,1),this._unsubscribeIronResize(t))},_subscribeIronResize:function(t){t.addEventListener("iron-resize",this._boundOnDescendantIronResize)},_unsubscribeIronResize:function(t){t.removeEventListener("iron-resize",this._boundOnDescendantIronResize)},resizerShouldNotify:function(t){return!0},_onDescendantIronResize:function(t){this._notifyingDescendant?t.stopPropagation():V7||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(t){var e=Ff(t).rootTarget;e!==this&&(e.assignParentResizable(this),this._notifyDescendant(e),t.stopPropagation())},_parentResizableChanged:function(t){t&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(t){this.isAttached&&(this._notifyingDescendant=!0,t.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if(document.readyState==="loading"){var t=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",function e(){document.removeEventListener("readystatechange",e),t()})}else this._findParent(),this._parentResizable?this._parentResizable._interestedResizables.forEach(function(e){e!==this&&e._findParent()},this):(_k.forEach(function(e){e!==this&&e._findParent()},this),window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())},_findParent:function(){this.assignParentResizable(null),this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable?_k.delete(this):_k.add(this)}},ant={properties:{scrollTarget:{type:HTMLElement,value:function(){return this._defaultScrollTarget}}},observers:["_scrollTargetChanged(scrollTarget, isAttached)"],_shouldHaveListener:!0,_scrollTargetChanged:function(t,e){if(this._oldScrollTarget&&(this._toggleScrollListener(!1,this._oldScrollTarget),this._oldScrollTarget=null),e)if(t==="document")this.scrollTarget=this._doc;else if(typeof t=="string"){var i=this.domHost;this.scrollTarget=i&&i.$?i.$[t]:Ff(this.ownerDocument).querySelector("#"+t)}else this._isValidScrollTarget()&&(this._oldScrollTarget=t,this._toggleScrollListener(this._shouldHaveListener,t))},_scrollHandler:function(){},get _defaultScrollTarget(){return this._doc},get _doc(){return this.ownerDocument.documentElement},get _scrollTop(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageYOffset:this.scrollTarget.scrollTop:0},get _scrollLeft(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.pageXOffset:this.scrollTarget.scrollLeft:0},set _scrollTop(t){this.scrollTarget===this._doc?window.scrollTo(window.pageXOffset,t):this._isValidScrollTarget()&&(this.scrollTarget.scrollTop=t)},set _scrollLeft(t){this.scrollTarget===this._doc?window.scrollTo(t,window.pageYOffset):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=t)},scroll:function(t,e){var i;typeof t=="object"?(i=t.left,e=t.top):i=t,i=i||0,e=e||0,this.scrollTarget===this._doc?window.scrollTo(i,e):this._isValidScrollTarget()&&(this.scrollTarget.scrollLeft=i,this.scrollTarget.scrollTop=e)},get _scrollTargetWidth(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerWidth:this.scrollTarget.offsetWidth:0},get _scrollTargetHeight(){return this._isValidScrollTarget()?this.scrollTarget===this._doc?window.innerHeight:this.scrollTarget.offsetHeight:0},_isValidScrollTarget:function(){return this.scrollTarget instanceof HTMLElement},_toggleScrollListener:function(t,e){var i=e===this._doc?window:e;t?this._boundScrollHandler||(this._boundScrollHandler=this._scrollHandler.bind(this),i.addEventListener("scroll",this._boundScrollHandler)):this._boundScrollHandler&&(i.removeEventListener("scroll",this._boundScrollHandler),this._boundScrollHandler=null)},toggleScrollListener:function(t){this._shouldHaveListener=t,this._toggleScrollListener(t,this.scrollTarget)}},Jee=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),lnt=Jee&&Jee[1]>=8,Yee=3,cnt=Vit({behaviors:[ont,ant],_ratio:.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_lastVisibleIndexVal:null,_maxPages:2,_focusedVirtualIndex:-1,_templateCost:0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){return this._physicalSize-this._viewportHeight},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollOffset},get _maxVirtualStart(){return Math.max(0,this._virtualCount-this._physicalCount)},set _virtualStart(t){t=this._clamp(t,0,this._maxVirtualStart),this._virtualStartVal=t},get _virtualStart(){return this._virtualStartVal||0},set _physicalStart(t){(t%=this._physicalCount)<0&&(t=this._physicalCount+t),this._physicalStartVal=t},get _physicalStart(){return this._physicalStartVal||0},get _physicalEnd(){return(this._physicalStart+this._physicalCount-1)%this._physicalCount},set _physicalCount(t){this._physicalCountVal=t},get _physicalCount(){return this._physicalCountVal||0},get _optPhysicalSize(){return this._viewportHeight===0?1/0:this._viewportHeight*this._maxPages},get _isVisible(){return Boolean(this.offsetWidth||this.offsetHeight)},get firstVisibleIndex(){let t=this._firstVisibleIndexVal;if(t==null){let e=this._physicalTop+this._scrollOffset;t=this._iterateItems(function(i,n){if(e+=this._physicalSizes[i],e>this._scrollPosition)return n})||0,this._firstVisibleIndexVal=t}return t},get lastVisibleIndex(){let t=this._lastVisibleIndexVal;if(t==null){let e=this._physicalTop+this._scrollOffset;this._iterateItems(function(i,n){e<this._scrollBottom&&(t=n),e+=this._physicalSizes[i]}),this._lastVisibleIndexVal=t}return t},get _scrollOffset(){return this._scrollerPaddingTop},attached:function(){this._debounce("_render",this._render,bh),this.listen(this,"iron-resize","_resizeHandler")},detached:function(){this.unlisten(this,"iron-resize","_resizeHandler")},updateViewportBoundaries:function(){const t=window.getComputedStyle(this);this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(t["padding-top"],10),this._isRTL=Boolean(t.direction==="rtl"),this._viewportWidth=this.$.items.offsetWidth,this._viewportHeight=this._scrollTargetHeight},_scrollHandler:function(){const t=Math.max(0,Math.min(this._maxScrollTop,this._scrollTop));let e=t-this._scrollPosition;const i=e>=0;if(this._scrollPosition=t,this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,Math.abs(e)>this._physicalSize&&this._physicalSize>0){e-=this._scrollOffset;const n=Math.round(e/this._physicalAverage);this._virtualStart=this._virtualStart+n,this._physicalStart=this._physicalStart+n,this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage,this._update()}else if(this._physicalCount>0){const{physicalTop:n,indexes:r}=this._getReusables(i);i?(this._physicalTop=n,this._virtualStart=this._virtualStart+r.length,this._physicalStart=this._physicalStart+r.length):(this._virtualStart=this._virtualStart-r.length,this._physicalStart=this._physicalStart-r.length),this._update(r,i?null:r),this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,0),ml)}},_getReusables:function(t){let e,i,n;const r=[],s=this._hiddenContentSize*this._ratio,o=this._virtualStart,a=this._virtualEnd,l=this._physicalCount;let u=this._physicalTop+this._scrollOffset;const h=this._physicalBottom+this._scrollOffset,p=this._scrollTop,f=this._scrollBottom;for(t?(e=this._physicalStart,i=p-u):(e=this._physicalEnd,i=h-f);n=this._physicalSizes[e],i-=n,!(r.length>=l||i<=s);)if(t){if(a+r.length+1>=this._virtualCount||u+n>=p-this._scrollOffset)break;r.push(e),u+=n,e=(e+1)%l}else{if(o-r.length<=0||u+this._physicalSize-n<=f)break;r.push(e),u-=n,e=e===0?l-1:e-1}return{indexes:r,physicalTop:u-this._scrollOffset}},_update:function(t,e){if(!(t&&t.length===0||this._physicalCount===0)){if(this._assignModels(t),this._updateMetrics(t),e)for(;e.length;){const i=e.pop();this._physicalTop-=this._physicalSizes[i]}this._positionItems(),this._updateScrollerSize()}},_isClientFull:function(){return this._scrollBottom!=0&&this._physicalBottom-1>=this._scrollBottom&&this._physicalTop<=this._scrollPosition},_increasePoolIfNeeded:function(t){const e=this._clamp(this._physicalCount+t,Yee,this._virtualCount-this._virtualStart)-this._physicalCount;let i=Math.round(.5*this._physicalCount);if(!(e<0)){if(e>0){const n=window.performance.now();[].push.apply(this._physicalItems,this._createPool(e));for(let r=0;r<e;r++)this._physicalSizes.push(0);this._physicalCount=this._physicalCount+e,this._physicalStart>this._physicalEnd&&this._isIndexRendered(this._focusedVirtualIndex)&&this._getPhysicalIndex(this._focusedVirtualIndex)<this._physicalEnd&&(this._physicalStart=this._physicalStart+e),this._update(),this._templateCost=(window.performance.now()-n)/e,i=Math.round(.5*this._physicalCount)}this._virtualEnd>=this._virtualCount-1||i===0||(this._isClientFull()?this._physicalSize<this._optPhysicalSize&&this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,this._clamp(Math.round(50/this._templateCost),1,i)),s0e):this._debounce("_increasePoolIfNeeded",this._increasePoolIfNeeded.bind(this,i),ml))}},_render:function(){if(this.isAttached&&this._isVisible)if(this._physicalCount!==0){const{physicalTop:t,indexes:e}=this._getReusables(!0);this._physicalTop=t,this._virtualStart=this._virtualStart+e.length,this._physicalStart=this._physicalStart+e.length,this._update(e),this._update(),this._increasePoolIfNeeded(0)}else this._virtualCount>0&&(this.updateViewportBoundaries(),this._increasePoolIfNeeded(Yee))},_itemsChanged:function(t){t.path==="items"&&(this._virtualStart=0,this._physicalTop=0,this._virtualCount=this.items?this.items.length:0,this._physicalIndexForKey={},this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this._physicalCount=this._physicalCount||0,this._physicalItems=this._physicalItems||[],this._physicalSizes=this._physicalSizes||[],this._physicalStart=0,this._scrollTop>this._scrollOffset&&this._resetScrollPosition(0),this._debounce("_render",this._render,bh))},_iterateItems:function(t,e){let i,n,r,s;if(arguments.length===2&&e){for(s=0;s<e.length;s++)if(i=e[s],n=this._computeVidx(i),(r=t.call(this,i,n))!=null)return r}else{for(i=this._physicalStart,n=this._virtualStart;i<this._physicalCount;i++,n++)if((r=t.call(this,i,n))!=null)return r;for(i=0;i<this._physicalStart;i++,n++)if((r=t.call(this,i,n))!=null)return r}},_computeVidx:function(t){return t>=this._physicalStart?this._virtualStart+(t-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+t},_updateMetrics:function(t){Ow();let e=0,i=0;const n=this._physicalAverageCount,r=this._physicalAverage;this._iterateItems(function(s){i+=this._physicalSizes[s],this._physicalSizes[s]=this._physicalItems[s].offsetHeight,e+=this._physicalSizes[s],this._physicalAverageCount+=this._physicalSizes[s]?1:0},t),this._physicalSize=this._physicalSize+e-i,this._physicalAverageCount!==n&&(this._physicalAverage=Math.round((r*n+e)/this._physicalAverageCount))},_positionItems:function(){this._adjustScrollPosition();let t=this._physicalTop;this._iterateItems(function(e){this.translate3d(0,t+"px",0,this._physicalItems[e]),t+=this._physicalSizes[e]})},_adjustScrollPosition:function(){const t=this._virtualStart===0?this._physicalTop:Math.min(this._scrollPosition+this._physicalTop,0);if(t!==0){this._physicalTop=this._physicalTop-t;const e=this._scrollTop;!lnt&&e>0&&this._resetScrollPosition(e-t)}},_resetScrollPosition:function(t){this.scrollTarget&&t>=0&&(this._scrollTop=t,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(t){this._estScrollHeight=this._physicalBottom+Math.max(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,((t=(t=t||this._scrollHeight===0)||this._scrollPosition>=this._estScrollHeight-this._physicalSize)||Math.abs(this._estScrollHeight-this._scrollHeight)>=this._viewportHeight)&&(this.$.items.style.height=this._estScrollHeight+"px",this._scrollHeight=this._estScrollHeight)},scrollToIndex:function(t){if(typeof t!="number"||t<0||t>this.items.length-1||(Ow(),this._physicalCount===0))return;t=this._clamp(t,0,this._virtualCount-1),(!this._isIndexRendered(t)||t>=this._maxVirtualStart)&&(this._virtualStart=t-1),this._assignModels(),this._updateMetrics(),this._physicalTop=Math.floor(this._virtualStart)*this._physicalAverage;let e=this._physicalStart,i=this._virtualStart,n=0;const r=this._hiddenContentSize;for(;i<t&&n<=r;)n+=this._physicalSizes[e],e=(e+1)%this._physicalCount,i++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollOffset+n),this._increasePoolIfNeeded(0),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){this._debounce("_render",function(){this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null,this.updateViewportBoundaries(),this._isVisible?(this.toggleScrollListener(!0),this._resetAverage(),this._render()):this.toggleScrollListener(!1)},bh)},_isIndexRendered:function(t){return t>=this._virtualStart&&t<=this._virtualEnd},_getPhysicalIndex:function(t){return(this._physicalStart+(t-this._virtualStart))%this._physicalCount},_clamp:function(t,e,i){return Math.min(i,Math.max(e,t))},_debounce:function(t,e,i){this._debouncers=this._debouncers||{},this._debouncers[t]=dn.debounce(this._debouncers[t],i,e.bind(this)),iL(this._debouncers[t])}});class unt extends cnt{static get properties(){return{size:{type:Number,notify:!0},_vidxOffset:{type:Number,value:0}}}static get observers(){return["_effectiveSizeChanged(_effectiveSize)"]}connectedCallback(){super.connectedCallback(),this._scrollHandler()}_updateScrollerItem(){}_afterScroll(){}_getRowTarget(){}_createScrollerRows(){}_canPopulate(){}scrollToIndex(e){this._warnPrivateAPIAccess("scrollToIndex"),this._scrollingToIndex=!0,e=Math.min(Math.max(e,0),this._effectiveSize-1),this.$.table.scrollTop=e/this._effectiveSize*(this.$.table.scrollHeight-this.$.table.offsetHeight),this._scrollHandler(),this._accessIronListAPI(()=>this._maxScrollTop)&&this._virtualCount<this._effectiveSize&&this._adjustVirtualIndexOffset(1e6),this._accessIronListAPI(()=>super.scrollToIndex(e-this._vidxOffset)),this._scrollHandler();const i=Array.from(this.$.items.children).filter(n=>n.index===e)[0];if(i){const n=i.getBoundingClientRect().top-this.$.header.getBoundingClientRect().bottom;Math.abs(n)>1&&(this.$.table.scrollTop+=n,this._scrollHandler())}this._scrollingToIndex=!1}_effectiveSizeChanged(e){let i,n=0;this._iterateItems((r,s)=>{if(s===this._firstVisibleIndex){const o=this._physicalItems[r];i=o.index,n=o.getBoundingClientRect().top}}),this.items&&e<this.items.length&&(this._scrollTop=0),!Array.isArray(this.items)&&(this.items={length:Math.min(e,1e5)}),this._accessIronListAPI(()=>super._itemsChanged({path:"items"})),this._virtualCount=Math.min(this.items.length,e)||0,this._scrollTop===0&&(this._accessIronListAPI(()=>this._scrollToIndex(Math.min(e-1,i))),this._iterateItems(r=>{const s=this._physicalItems[r];if(s.index===i&&(this.$.table.scrollTop+=Math.round(s.getBoundingClientRect().top-n)),s.index===this._focusedItemIndex&&this._itemsFocusable&&this.$.items.contains(this.shadowRoot.activeElement)){const o=Array.from(this._itemsFocusable.parentElement.children).indexOf(this._itemsFocusable);s.children[o].focus()}})),this._assignModels(),requestAnimationFrame(()=>this._update()),this.__updateFooterPositioning()}_positionItems(){let e;this._adjustScrollPosition(),isNaN(this._physicalTop)&&(e=!0,this._physicalTop=0);let i=this._physicalTop;this._iterateItems(n=>{this._physicalItems[n].style.transform=`translateY(${i}px)`,i+=this._physicalSizes[n]}),e&&this._scrollToIndex(0)}_increasePoolIfNeeded(e){e===0&&this._scrollingToIndex||!this._canPopulate()||!this._effectiveSize||(this._initialPoolCreated?this._optPhysicalSize!==1/0&&(this._debounceIncreasePool=dn.debounce(this._debounceIncreasePool,bh,()=>{this._updateMetrics();const i=this._optPhysicalSize-this._physicalSize;let n=Math.ceil(i/this._physicalAverage);this._physicalCount+n>this._effectiveSize&&(n=Math.max(0,this._effectiveSize-this._physicalCount)),this._physicalSize&&n>0&&this._optPhysicalSize!==1/0&&(super._increasePoolIfNeeded(n),this.__reorderChildNodes())})):(this._initialPoolCreated=!0,super._increasePoolIfNeeded(25)))}__reorderChildNodes(){const e=Array.from(this.$.items.childNodes);e.reduce((i,n,r,s)=>{if(r===0||s[r-1].index===n.index-1)return i},!0)||e.sort((i,n)=>i.index-n.index).forEach(i=>this.$.items.appendChild(i))}_createPool(e){const i=document.createDocumentFragment(),n=this._createScrollerRows(e);n.forEach(s=>i.appendChild(s)),this._getRowTarget().appendChild(i);const r=this.querySelector("[slot]");if(r){const s=r.getAttribute("slot");r.setAttribute("slot","foo-bar"),r.setAttribute("slot",s)}return Gtt(this,()=>this.notifyResize()),n}_assignModels(e){this._iterateItems((i,n)=>{const r=this._physicalItems[i];this._toggleAttribute("hidden",n>=this._effectiveSize,r),this._updateScrollerItem(r,n+(this._vidxOffset||0))},e)}_scrollHandler(){const e=this.$.table.scrollTop-this._scrollPosition;this._accessIronListAPI(super._scrollHandler);const i=this._vidxOffset;this._accessIronListAPI(()=>this._maxScrollTop)&&this._virtualCount<this._effectiveSize?this._adjustVirtualIndexOffset(e):this._vidxOffset=0,this._vidxOffset!==i&&this._update(),this._afterScroll()}_adjustVirtualIndexOffset(e){if(Math.abs(e)>1e4){if(this._noScale)return void(this._noScale=!1);const i=this.$.table.scrollTop/(this.$.table.scrollHeight-this.$.table.offsetHeight),n=i*this._effectiveSize;this._vidxOffset=Math.round(n-i*this._virtualCount)}else{const i=this._vidxOffset||0,n=1e3,r=100;this._scrollTop===0?(this._vidxOffset=0,i!==this._vidxOffset&&super.scrollToIndex(0)):this.firstVisibleIndex<n&&this._vidxOffset>0&&(this._vidxOffset-=Math.min(this._vidxOffset,r),i!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex+(i-this._vidxOffset)),this._noScale=!0);const s=this._effectiveSize-this._virtualCount;this._scrollTop>=this._maxScrollTop&&this._maxScrollTop>0?(this._vidxOffset=s,i!==this._vidxOffset&&super.scrollToIndex(this._virtualCount)):this.firstVisibleIndex>this._virtualCount-n&&this._vidxOffset<s&&(this._vidxOffset+=Math.min(s-this._vidxOffset,r),i!==this._vidxOffset&&super.scrollToIndex(this.firstVisibleIndex-(this._vidxOffset-i)),this._noScale=!0)}}_accessIronListAPI(e){this._warnPrivateAPIAccessAsyncEnabled=!1;const i=e.apply(this);return this._debouncerWarnPrivateAPIAccess=dn.debounce(this._debouncerWarnPrivateAPIAccess,bh,()=>this._warnPrivateAPIAccessAsyncEnabled=!0),i}_debounceRender(e,i){super._debounceRender(()=>this._accessIronListAPI(e),i)}_warnPrivateAPIAccess(e){this._warnPrivateAPIAccessAsyncEnabled&&console.warn(`Accessing private API (${e})!`)}_render(){this._accessIronListAPI(super._render)}_itemsChanged(){}get _firstVisibleIndex(){return this._accessIronListAPI(()=>super.firstVisibleIndex)}get _lastVisibleIndex(){return this._accessIronListAPI(()=>super.lastVisibleIndex)}_scrollToIndex(e){this._accessIronListAPI(()=>this.scrollToIndex(e))}get firstVisibleIndex(){return this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex}set firstVisibleIndex(e){this._warnPrivateAPIAccess("firstVisibleIndex"),super.firstVisibleIndex=e}get lastVisibleIndex(){return this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex}set lastVisibleIndex(e){this._warnPrivateAPIAccess("lastVisibleIndex"),super.lastVisibleIndex=e}updateViewportBoundaries(){this._warnPrivateAPIAccess("updateViewportBoundaries"),super.updateViewportBoundaries.apply(this,arguments)}_resizeHandler(){super._resizeHandler(),Ow()}}const dnt=t=>class extends t{static get observers(){return["_a11yUpdateGridSize(size, _columnTree, _columnTree.*)"]}_a11yGetHeaderRowCount(e){return e.filter(i=>i.some(n=>n._headerTemplate||n.headerRenderer||n.path||n.header)).length}_a11yGetFooterRowCount(e){return e.filter(i=>i.some(n=>n._headerTemplate||n.headerRenderer)).length}_a11yUpdateGridSize(e,i){if(e===void 0||i===void 0)return;const n=i[i.length-1];this.$.table.setAttribute("aria-rowcount",e+this._a11yGetHeaderRowCount(i)+this._a11yGetFooterRowCount(i)),this.$.table.setAttribute("aria-colcount",n&&n.length||0),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows()}_a11yUpdateHeaderRows(){Array.from(this.$.header.children).forEach((e,i)=>e.setAttribute("aria-rowindex",i+1))}_a11yUpdateFooterRows(){Array.from(this.$.footer.children).forEach((e,i)=>e.setAttribute("aria-rowindex",this._a11yGetHeaderRowCount(this._columnTree)+this.size+i+1))}_a11yUpdateRowRowindex(e,i){e.setAttribute("aria-rowindex",i+this._a11yGetHeaderRowCount(this._columnTree)+1)}_a11yUpdateRowSelected(e,i){e.setAttribute("aria-selected",Boolean(i)),Array.from(e.children).forEach(n=>n.setAttribute("aria-selected",Boolean(i)))}_a11yUpdateRowLevel(e,i){e.setAttribute("aria-level",i+1)}_a11yUpdateRowDetailsOpened(e,i){Array.from(e.children).forEach(n=>{typeof i=="boolean"?n.setAttribute("aria-expanded",i):n.hasAttribute("aria-expanded")&&n.removeAttribute("aria-expanded")})}_a11ySetRowDetailsCell(e,i){Array.from(e.children).forEach(n=>{n!==i&&n.setAttribute("aria-controls",i.id)})}_a11yUpdateCellColspan(e,i){e.setAttribute("aria-colspan",Number(i))}_a11yUpdateSorters(){Array.from(this.querySelectorAll("vaadin-grid-sorter")).forEach(e=>{let i=e.parentNode;for(;i&&i.localName!=="vaadin-grid-cell-content";)i=i.parentNode;i&&i.assignedSlot&&i.assignedSlot.parentNode.setAttribute("aria-sort",{asc:"ascending",desc:"descending"}[String(e.direction)]||"none")})}},hnt=t=>class extends t{static get properties(){return{activeItem:{type:Object,notify:!0,value:null}}}ready(){super.ready(),this.$.scroller.addEventListener("click",this._onClick.bind(this)),this.addEventListener("cell-activate",this._activateItem.bind(this))}_activateItem(e){const i=e.detail.model,n=i?i.item:null;n&&(this.activeItem=this._itemsEqual(this.activeItem,n)?null:n)}_onClick(e){if(e.defaultPrevented)return;const i=e.composedPath(),n=i[i.indexOf(this.$.table)-3];if(!n||n.getAttribute("part").indexOf("details-cell")>-1)return;const r=n._content,s=this.getRootNode().activeElement;r.contains(s)||this._isFocusable(e.target)||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(n.parentElement)}}))}_isFocusable(e){return pnt(e)}},pnt=t=>{if(!t.parentNode)return!1;const e=Array.from(t.parentNode.querySelectorAll("[tabindex], button, input, select, textarea, object, iframe, label, a[href], area[href]")).filter(i=>i.getAttribute("part")!=="cell body-cell").indexOf(t)!==-1;return!t.disabled&&e},fnt=t=>class extends t{static get properties(){return{items:Array}}static get observers(){return["_itemsChanged(items, items.*, isAttached)"]}_itemsChanged(e,i,n){if(n){if(!Array.isArray(e))return e==null&&(this.size=0),void(this.dataProvider===this._arrayDataProvider&&(this.dataProvider=void 0));this.size=e.length,this.dataProvider=this.dataProvider||this._arrayDataProvider,this.clearCache(),this._ensureFirstPageLoaded()}}_arrayDataProvider(e,i){let n=(Array.isArray(this.items)?this.items:[]).slice(0);this._filters&&this._checkPaths(this._filters,"filtering",n)&&(n=this._filter(n)),this.size=n.length,e.sortOrders.length&&this._checkPaths(this._sorters,"sorting",n)&&(n=n.sort(this._multiSort.bind(this)));const r=e.page*e.pageSize,s=r+e.pageSize;i(n.slice(r,s),n.length)}_checkPaths(e,i,n){if(!n.length)return!1;let r=!0;for(let s in e){const o=e[s].path;if(!o||o.indexOf(".")===-1)continue;const a=o.replace(/\.[^.]*$/,"");Ev.get(a,n[0])===void 0&&(console.warn(`Path "${o}" used for ${i} does not exist in all of the items, ${i} is disabled.`),r=!1)}return r}_multiSort(e,i){return this._sorters.map(n=>n.direction==="asc"?this._compare(Ev.get(n.path,e),Ev.get(n.path,i)):n.direction==="desc"?this._compare(Ev.get(n.path,i),Ev.get(n.path,e)):0).reduce((n,r)=>n||r,0)}_normalizeEmptyValue(e){return[void 0,null].indexOf(e)>=0?"":isNaN(e)?e.toString():e}_compare(e,i){return(e=this._normalizeEmptyValue(e))<(i=this._normalizeEmptyValue(i))?-1:e>i?1:0}_filter(e){return e.filter(i=>this._filters.filter(n=>{const r=this._normalizeEmptyValue(Ev.get(n.path,i)),s=this._normalizeEmptyValue(n.value).toString().toLowerCase();return r.toString().toLowerCase().indexOf(s)===-1}).length===0)}},mnt=t=>class extends h2(t){ready(){super.ready();const e=this.$.scroller;eH(e,"track",this._onHeaderTrack.bind(this)),e.addEventListener("touchmove",i=>e.hasAttribute("column-resizing")&&i.preventDefault()),e.addEventListener("contextmenu",i=>i.target.getAttribute("part")=="resize-handle"&&i.preventDefault()),e.addEventListener("mousedown",i=>i.target.getAttribute("part")==="resize-handle"&&i.preventDefault())}_onHeaderTrack(e){const i=e.target;if(i.getAttribute("part")==="resize-handle"){let n=i.parentElement._column;for(this._toggleAttribute("column-resizing",!0,this.$.scroller);n.localName==="vaadin-grid-column-group";)n=Array.prototype.slice.call(n._childColumns,0).sort(function(o,a){return o._order-a._order}).filter(function(o){return!o.hidden}).pop();const r=Array.from(this.$.header.querySelectorAll('[part~="row"]:last-child [part~="cell"]')),s=r.filter(o=>o._column===n)[0];if(s.offsetWidth){const o=window.getComputedStyle(s),a=10+parseInt(o.paddingLeft)+parseInt(o.paddingRight)+parseInt(o.borderLeftWidth)+parseInt(o.borderRightWidth)+parseInt(o.marginLeft)+parseInt(o.marginRight),l=s.offsetWidth+(this.__isRTL?s.getBoundingClientRect().left-e.detail.x:e.detail.x-s.getBoundingClientRect().right);n.width=Math.max(a,l)+"px",n.flexGrow=0}r.sort(function(o,a){return o._column._order-a._column._order}).forEach(function(o,a,l){a<l.indexOf(s)&&(o._column.width=o.offsetWidth+"px",o._column.flexGrow=0)}),e.detail.state==="end"&&(this._toggleAttribute("column-resizing",!1,this.$.scroller),this.dispatchEvent(new CustomEvent("column-resize",{detail:{resizedColumn:n}}))),this._resizeHandler()}}},Zee=class Q0e{constructor(e,i,n){this.grid=e,this.parentCache=i,this.parentItem=n,this.itemCaches={},this.items={},this.effectiveSize=0,this.size=0,this.pendingRequests={}}isLoading(){return Boolean(Object.keys(this.pendingRequests).length||Object.keys(this.itemCaches).filter(e=>this.itemCaches[e].isLoading())[0])}getItemForIndex(e){const{cache:i,scaledIndex:n}=this.getCacheAndIndex(e);return i.items[n]}updateSize(){this.effectiveSize=!this.parentItem||this.grid._isExpanded(this.parentItem)?this.size+Object.keys(this.itemCaches).reduce((e,i)=>{const n=this.itemCaches[i];return n.updateSize(),e+n.effectiveSize},0):0}ensureSubCacheForScaledIndex(e){if(!this.itemCaches[e]){const i=new Q0e(this.grid,this,this.items[e]);this.itemCaches[e]=i,this.grid._loadPage(0,i)}}getCacheAndIndex(e){let i=e;const n=Object.keys(this.itemCaches);for(let r=0;r<n.length;r++){const s=Number(n[r]),o=this.itemCaches[s];if(i<=s)return{cache:this,scaledIndex:i};if(i<=s+o.effectiveSize)return o.getCacheAndIndex(i-s-1);i-=o.effectiveSize}return{cache:this,scaledIndex:i}}},gnt=t=>class extends t{static get properties(){return{pageSize:{type:Number,value:50,observer:"_pageSizeChanged"},dataProvider:{type:Object,notify:!0,observer:"_dataProviderChanged"},loading:{type:Boolean,notify:!0,readOnly:!0,reflectToAttribute:!0},_cache:{type:Object,value:function(){return new Zee(this)}},itemIdPath:{type:String,value:null},expandedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return["_sizeChanged(size)","_itemIdPathChanged(itemIdPath)","_expandedItemsChanged(expandedItems.*)"]}_sizeChanged(e){const i=e-this._cache.size;this._cache.size+=i,this._cache.effectiveSize+=i,this._effectiveSize=this._cache.effectiveSize,this._increasePoolIfNeeded(0),this._debounceIncreasePool&&this._debounceIncreasePool.flush()}_getItem(e,i){if(e>=this._effectiveSize)return;i.index=e;const{cache:n,scaledIndex:r}=this._cache.getCacheAndIndex(e),s=n.items[r];s?(this._toggleAttribute("loading",!1,i),this._updateItem(i,s),this._isExpanded(s)&&n.ensureSubCacheForScaledIndex(r)):(this._toggleAttribute("loading",!0,i),this._loadPage(this._getPageForIndex(r),n))}_expandedInstanceChangedCallback(e,i){e.item!==void 0&&(i?this.expandItem(e.item):this.collapseItem(e.item))}getItemId(e){return this.itemIdPath?this.get(this.itemIdPath,e):e}_isExpanded(e){return this.__expandedKeys.has(this.getItemId(e))}_expandedItemsChanged(){this.__cacheExpandedKeys(),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,this._assignModels()}_itemIdPathChanged(){this.__cacheExpandedKeys()}__cacheExpandedKeys(){this.expandedItems&&(this.__expandedKeys=new Set,this.expandedItems.forEach(e=>{this.__expandedKeys.add(this.getItemId(e))}))}expandItem(e){this._isExpanded(e)||this.push("expandedItems",e)}collapseItem(e){this._isExpanded(e)&&this.splice("expandedItems",this._getItemIndexInArray(e,this.expandedItems),1)}_getIndexLevel(e){let{cache:i}=this._cache.getCacheAndIndex(e),n=0;for(;i.parentCache;)i=i.parentCache,n++;return n}_canPopulate(){return Boolean(this._hasData&&this._columnTree)}_loadPage(e,i){if(!i.pendingRequests[e]&&this.dataProvider){this._setLoading(!0),i.pendingRequests[e]=!0;const n={page:e,pageSize:this.pageSize,sortOrders:this._mapSorters(),filters:this._mapFilters(),parentItem:i.parentItem};this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.dataProvider(n,(r,s)=>{s!==void 0?i.size=s:n.parentItem&&(i.size=r.length);const o=Array.from(this.$.items.children).map(a=>a._item);r.forEach((a,l)=>{const u=e*this.pageSize+l;i.items[u]=a,this._isExpanded(a)&&o.indexOf(a)>-1&&i.ensureSubCacheForScaledIndex(u)}),this._hasData=!0,delete i.pendingRequests[e],this._debouncerApplyCachedData=dn.debounce(this._debouncerApplyCachedData,Ac.after(0),()=>{this._setLoading(!1),this._cache.updateSize(),this._effectiveSize=this._cache.effectiveSize,Array.from(this.$.items.children).filter(a=>!a.hidden).forEach(a=>{this._cache.getItemForIndex(a.index)&&this._getItem(a.index,a)}),this._increasePoolIfNeeded(0),this.__scrollToPendingIndex()}),this._cache.isLoading()||this._debouncerApplyCachedData.flush(),this.__itemsReceived()})}}_getPageForIndex(e){return Math.floor(e/this.pageSize)}clearCache(){this._cache=new Zee(this),Array.from(this.$.items.children).forEach(e=>{Array.from(e.children).forEach(i=>{i._instance&&i._instance._setPendingProperty("item",{},!1)})}),this._cache.size=this.size||0,this._cache.updateSize(),this._hasData=!1,this._assignModels(),this._effectiveSize&&this._initialPoolCreated||this._loadPage(0,this._cache)}_pageSizeChanged(e,i){i!==void 0&&e!==i&&this.clearCache()}_checkSize(){this.size===void 0&&this._effectiveSize===0&&console.warn("The <vaadin-grid> needs the total number of items in order to display rows. Set the total number of items to the `size` property, or provide the total number of items in the second argument of the `dataProvider`’s `callback` call.")}_dataProviderChanged(e,i){i!==void 0&&this.clearCache(),e&&this.items&&this.items.length&&this._scrollToIndex(this._firstVisibleIndex),this._ensureFirstPageLoaded(),this._debouncerCheckSize=dn.debounce(this._debouncerCheckSize,Ac.after(2e3),this._checkSize.bind(this)),this._scrollHandler()}_ensureFirstPageLoaded(){this._hasData||this._loadPage(0,this._cache)}_itemsEqual(e,i){return this.getItemId(e)===this.getItemId(i)}_getItemIndexInArray(e,i){let n=-1;return i.forEach((r,s)=>{this._itemsEqual(r,e)&&(n=s)}),n}scrollToIndex(e){super.scrollToIndex(e),isNaN(e)||!this._cache.isLoading()&&this.clientHeight||(this.__pendingScrollToIndex=e)}__scrollToPendingIndex(){if(this.__pendingScrollToIndex&&this.$.items.children.length){const e=this.__pendingScrollToIndex;delete this.__pendingScrollToIndex,this._debounceIncreasePool&&this._debounceIncreasePool.flush(),this.scrollToIndex(e)}}},ynt=t=>class extends t{ready(){super.ready(),this._addNodeObserver()}_hasColumnGroups(e){for(let i=0;i<e.length;i++)if(e[i].localName==="vaadin-grid-column-group")return!0;return!1}_getChildColumns(e){return wh.getFlattenedNodes(e).filter(this._isColumnElement)}_flattenColumnGroups(e){return e.map(i=>i.localName==="vaadin-grid-column-group"?this._getChildColumns(i):[i]).reduce((i,n)=>i.concat(n),[])}_getColumnTree(){const e=[];for(let i=wh.getFlattenedNodes(this).filter(this._isColumnElement);e.push(i),this._hasColumnGroups(i);)i=this._flattenColumnGroups(i);return e}_updateColumnTree(){const e=this._getColumnTree();this._arrayEquals(e,this._columnTree)||(this._columnTree=e)}_addNodeObserver(){this._observer=new wh(this,e=>{const i=e.addedNodes.filter(r=>r.localName==="template"&&r.classList.contains("row-details"))[0];i&&this._rowDetailsTemplate!==i&&(this._rowDetailsTemplate=i);const n=r=>r.filter(this._isColumnElement).length>0;if(n(e.addedNodes)||n(e.removedNodes)){const r=e.removedNodes.flatMap(o=>o._allCells),s=o=>r.filter(a=>a._content.contains(o)).length;this.__removeSorters(this._sorters.filter(s)),this.__removeFilters(this._filters.filter(s)),this._updateColumnTree()}this._debouncerCheckImports=dn.debounce(this._debouncerCheckImports,Ac.after(2e3),this._checkImports.bind(this)),this._ensureFirstPageLoaded()})}_arrayEquals(e,i){if(!e||!i||e.length!=i.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]instanceof Array&&i[n]instanceof Array){if(!this._arrayEquals(e[n],i[n]))return!1}else if(e[n]!=i[n])return!1;return!0}_checkImports(){["vaadin-grid-column-group","vaadin-grid-filter","vaadin-grid-filter-column","vaadin-grid-tree-toggle","vaadin-grid-selection-column","vaadin-grid-sort-column","vaadin-grid-sorter"].forEach(e=>{const i=this.querySelector(e);!i||i instanceof Hh||console.warn(`Make sure you have imported the required module for <${e}> element.`)})}_updateFirstAndLastColumn(){Array.from(this.shadowRoot.querySelectorAll("tr")).forEach(e=>this._updateFirstAndLastColumnForRow(e))}_updateFirstAndLastColumnForRow(e){Array.from(e.querySelectorAll('[part~="cell"]:not([part~="details-cell"])')).sort((i,n)=>i._column._order-n._column._order).forEach((i,n,r)=>{this._toggleAttribute("first-column",n===0,i),this._toggleAttribute("last-column",n===r.length-1,i)})}_isColumnElement(e){return e.nodeType===Node.ELEMENT_NODE&&/\bcolumn\b/.test(e.localName)}},vnt=t=>class extends t{getEventContext(e){const i={},n=e.composedPath(),r=n[n.indexOf(this.$.table)-3];return r&&(i.section=["body","header","footer","details"].filter(s=>r.getAttribute("part").indexOf(s)>-1)[0],r._column&&(i.column=r._column),i.section!=="body"&&i.section!=="details"||Object.assign(i,this.__getRowModel(r.parentElement))),i}},bnt=t=>class extends t{static get properties(){return{_filters:{type:Array,value:function(){return[]}}}}ready(){super.ready(),this.addEventListener("filter-changed",this._filterChanged.bind(this))}_filterChanged(e){e.stopPropagation(),this.__addFilter(e.target),this.__applyFilters()}__removeFilters(e){e.length!=0&&(this._filters=this._filters.filter(i=>e.indexOf(i)<0),this.__applyFilters())}__addFilter(e){this._filters.indexOf(e)===-1&&this._filters.push(e)}__applyFilters(){this.dataProvider&&this.isAttached&&this.clearCache()}_mapFilters(){return this._filters.map(e=>({path:e.path,value:e.value}))}};class BO extends Hh{static get is(){return"vaadin-grid-templatizer"}static get properties(){return{dataHost:Object,template:Object,_templateInstances:{type:Array,value:function(){return[]}},_parentPathValues:{value:function(){return{}}},_grid:Object}}static get observers(){return["_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)"]}constructor(){super(),this._instanceProps={detailsOpened:!0,index:!0,item:!0,selected:!0,expanded:!0,level:!0}}createInstance(){this._ensureTemplatized();const e=new this._TemplateClass({});return this.addInstance(e),e}addInstance(e){this._templateInstances.indexOf(e)===-1&&(this._templateInstances.push(e),requestAnimationFrame(()=>this.notifyPath("_templateInstances.*",this._templateInstances)))}removeInstance(e){const i=this._templateInstances.indexOf(e);this.splice("_templateInstances",i,1)}_ensureTemplatized(){this._TemplateClass||(this._TemplateClass=cI(this.template,this,{instanceProps:this._instanceProps,parentModel:!0,forwardHostProp:function(e,i){this._forwardParentProp(e,i),this._templateInstances&&this._templateInstances.forEach(n=>n.notifyPath(e,i))},notifyInstanceProp:function(e,i,n){if(i==="index"||i==="item")return;const r=`__${i}__`;if(e[r]===n)return;e[r]=n;const s=Array.from(this._grid.$.items.children).filter(l=>this._grid._itemsEqual(l._item,e.item))[0];s&&Array.from(s.children).forEach(l=>{l._instance&&(l._instance[r]=n,l._instance.notifyPath(i,n))});const o="item.";if(Array.isArray(this._grid.items)&&i.indexOf(o)===0){const l=this._grid.items.indexOf(e.item),u=i.slice(o.length);this._grid.notifyPath(`items.${l}.${u}`,n)}const a=`_${i}InstanceChangedCallback`;this._grid&&this._grid[a]&&this._grid[a](e,n)}}))}_forwardParentProp(e,i){this._parentPathValues[e]=i,this._templateInstances.forEach(n=>n.notifyPath(e,i))}_templateInstancesChanged(e){let i,n;if(e.path==="_templateInstances")i=0,n=this._templateInstances.length;else{if(e.path!=="_templateInstances.splices")return;i=e.value.index,n=e.value.addedCount}Object.keys(this._parentPathValues||{}).forEach(r=>{for(let s=i;s<i+n;s++)this._templateInstances[s].set(r,this._parentPathValues[r])})}}customElements.define(BO.is,BO);const _nt=t=>class extends t{static get properties(){return{detailsOpenedItems:{type:Array,value:function(){return[]}},_rowDetailsTemplate:Object,rowDetailsRenderer:Function,_detailsCells:{type:Array}}}static get observers(){return["_detailsOpenedItemsChanged(detailsOpenedItems.*, _rowDetailsTemplate, rowDetailsRenderer)","_rowDetailsTemplateOrRendererChanged(_rowDetailsTemplate, rowDetailsRenderer)"]}_rowDetailsTemplateOrRendererChanged(e,i){if(e&&i)throw new Error("You should only use either a renderer or a template for row details");if(e||i){if(e&&!e.templatizer){const n=new BO;n._grid=this,n.dataHost=this.dataHost,n.template=e,e.templatizer=n}this._columnTree&&Array.from(this.$.items.children).forEach(n=>{n.querySelector("[part~=details-cell]")||(this._updateRow(n,this._columnTree[this._columnTree.length-1]),this._a11yUpdateRowDetailsOpened(n,!1)),delete n.querySelector("[part~=details-cell]")._instance}),this.detailsOpenedItems.length&&(Array.from(this.$.items.children).forEach(this._toggleDetailsCell,this),this._update())}}_detailsOpenedItemsChanged(e){e.path!=="detailsOpenedItems.length"&&e.value&&Array.from(this.$.items.children).forEach(i=>{this._toggleDetailsCell(i,i._item),this._a11yUpdateRowDetailsOpened(i,this._isDetailsOpened(i._item)),this._toggleAttribute("details-opened",this._isDetailsOpened(i._item),i)})}_configureDetailsCell(e){e.setAttribute("part","cell details-cell"),this._toggleAttribute("frozen",!0,e)}_toggleDetailsCell(e,i){const n=e.querySelector('[part~="details-cell"]');if(!n)return;const r=!this._isDetailsOpened(i),s=!!n.hidden!==r;(n._instance||n._renderer)&&n.hidden===r||(n.hidden=r,r?e.style.removeProperty("padding-bottom"):(this.rowDetailsRenderer?(n._renderer=this.rowDetailsRenderer,n._renderer.call(this,n._content,this,{index:e.index,item:i})):this._rowDetailsTemplate&&!n._instance&&(n._instance=this._rowDetailsTemplate.templatizer.createInstance(),n._content.innerHTML="",n._content.appendChild(n._instance.root),this._updateItem(e,i)),Ow(),e.style.setProperty("padding-bottom",`${n.offsetHeight}px`),requestAnimationFrame(()=>this.notifyResize()))),s&&(this._updateMetrics(),this._positionItems())}_updateDetailsCellHeights(){Array.from(this.$.items.querySelectorAll('[part~="details-cell"]:not([hidden])')).forEach(e=>{e.parentElement.style.setProperty("padding-bottom",`${e.offsetHeight}px`)})}_isDetailsOpened(e){return this.detailsOpenedItems&&this._getItemIndexInArray(e,this.detailsOpenedItems)!==-1}openItemDetails(e){this._isDetailsOpened(e)||this.push("detailsOpenedItems",e)}closeItemDetails(e){this._isDetailsOpened(e)&&this.splice("detailsOpenedItems",this._getItemIndexInArray(e,this.detailsOpenedItems),1)}_detailsOpenedInstanceChangedCallback(e,i){i?this.openItemDetails(e.item):this.closeItemDetails(e.item)}},n5={SCROLLING:500,IGNORE_WHEEL:500},wnt=t=>class extends t{static get properties(){return{_frozenCells:{type:Array,value:()=>[]},_rowWithFocusedElement:Element,_deltaYAcc:{type:Number,value:0},_useSticky:{type:Boolean,value:window.CSS&&window.CSS.supports&&(window.CSS.supports("position","sticky")||window.CSS.supports("position","-webkit-sticky"))}}}static get observers(){return["_scrollViewportHeightUpdated(_viewportHeight)"]}set _scrollTop(e){this.$.table.scrollTop=e}get _scrollTop(){return this.$.table.scrollTop}constructor(){super(),this._scrollLineHeight=this._getScrollLineHeight()}_getScrollLineHeight(){const e=document.createElement("div");e.style.fontSize="initial",e.style.display="none",document.body.appendChild(e);const i=window.getComputedStyle(e).fontSize;return document.body.removeChild(e),i?window.parseInt(i):void 0}_scrollViewportHeightUpdated(e){this._scrollPageHeight=e-this.$.header.clientHeight-this.$.footer.clientHeight-this._scrollLineHeight}ready(){super.ready(),this.$.outerscroller=document.createElement("div"),this.scrollTarget=this.$.table,this.addEventListener("wheel",this._onWheel),this.$.items.addEventListener("focusin",e=>{const i=e.composedPath().indexOf(this.$.items);this._rowWithFocusedElement=e.composedPath()[i-1]}),this.$.items.addEventListener("focusout",()=>this._rowWithFocusedElement=void 0),this.scrollTarget.addEventListener("mousedown",()=>this.__mouseDown=!0),this.scrollTarget.addEventListener("mouseup",()=>{this.__mouseDown=!1,this.__pendingReorder&&(this.__pendingReorder=!1,setTimeout(()=>this._reorderRows(),n5.SCROLLING))})}scrollToIndex(e){this._accessIronListAPI(()=>super.scrollToIndex(e))}_onWheel(e){if(e.ctrlKey||this._hasScrolledAncestor(e.target,e.deltaX,e.deltaY))return;const i=this.$.table;let n=e.deltaY;if(e.deltaMode===WheelEvent.DOM_DELTA_LINE?n*=this._scrollLineHeight:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._scrollPageHeight),this._wheelAnimationFrame)return this._deltaYAcc+=n,void e.preventDefault();n+=this._deltaYAcc,this._deltaYAcc=0,this._wheelAnimationFrame=!0,this._debouncerWheelAnimationFrame=dn.debounce(this._debouncerWheelAnimationFrame,bh,()=>this._wheelAnimationFrame=!1);const r=Math.abs(e.deltaX)+Math.abs(n);this._canScroll(i,e.deltaX,n)?(e.preventDefault(),i.scrollTop+=n,i.scrollLeft+=e.deltaX,this._scrollHandler(),this._hasResidualMomentum=!0,this._ignoreNewWheel=!0,this._debouncerIgnoreNewWheel=dn.debounce(this._debouncerIgnoreNewWheel,Ac.after(n5.IGNORE_WHEEL),()=>this._ignoreNewWheel=!1)):this._hasResidualMomentum&&r<=this._previousMomentum||this._ignoreNewWheel?e.preventDefault():r>this._previousMomentum&&(this._hasResidualMomentum=!1),this._previousMomentum=r}_hasScrolledAncestor(e,i,n){return e.localName!=="vaadin-grid-cell-content"&&(!(!this._canScroll(e,i,n)||["auto","scroll"].indexOf(getComputedStyle(e).overflow)===-1)||(e!==this&&e.parentElement?this._hasScrolledAncestor(e.parentElement,i,n):void 0))}_canScroll(e,i,n){return n>0&&e.scrollTop<e.scrollHeight-e.offsetHeight||n<0&&e.scrollTop>0||i>0&&e.scrollLeft<e.scrollWidth-e.offsetWidth||i<0&&e.scrollLeft>0}_scheduleScrolling(){this._scrollingFrame||(this._scrollingFrame=requestAnimationFrame(()=>this._toggleAttribute("scrolling",!0,this.$.scroller))),this._debounceScrolling=dn.debounce(this._debounceScrolling,Ac.after(n5.SCROLLING),()=>{cancelAnimationFrame(this._scrollingFrame),delete this._scrollingFrame,this._toggleAttribute("scrolling",!1,this.$.scroller),this._reorderRows()})}_afterScroll(){this._translateStationaryElements(),this.hasAttribute("reordering")||this._scheduleScrolling(),this._updateOverflow()}_updateOverflow(){let e="";const i=this.$.table;i.scrollTop<i.scrollHeight-i.clientHeight&&(e+=" bottom"),i.scrollTop>0&&(e+=" top"),i.scrollLeft<i.scrollWidth-i.clientWidth&&(e+=" right"),i.scrollLeft>0&&(e+=" left"),this._debounceOverflow=dn.debounce(this._debounceOverflow,bh,()=>{const n=e.trim();n.length>0&&this.getAttribute("overflow")!==n?this.setAttribute("overflow",n):n.length==0&&this.hasAttribute("overflow")&&this.removeAttribute("overflow")})}_reorderRows(){if(this.__mouseDown)return void(this.__pendingReorder=!0);const e=this.$.items,i=e.querySelectorAll("tr");if(!i.length)return;const n=this._virtualStart+this._vidxOffset,r=this._rowWithFocusedElement||Array.from(i).filter(a=>!a.hidden)[0];if(!r)return;const s=r.index-n,o=Array.from(i).indexOf(r)-s;if(o>0)for(let a=0;a<o;a++)e.appendChild(i[a]);else if(o<0)for(let a=i.length+o;a<i.length;a++)e.insertBefore(i[a],i[0]);if(this._safari){const{transform:a}=this.$.header.style;this.$.header.style.transform="",setTimeout(()=>this.$.header.style.transform=a)}}_frozenCellsChanged(){this._debouncerCacheElements=dn.debounce(this._debouncerCacheElements,ml,()=>{Array.from(this.shadowRoot.querySelectorAll('[part~="cell"]')).forEach(function(e){e.style.transform=""}),this._frozenCells=Array.prototype.slice.call(this.$.table.querySelectorAll("[frozen]")),this._updateScrollerMeasurements(),this._translateStationaryElements()}),this._updateLastFrozen()}_updateScrollerMeasurements(){this._frozenCells.length>0&&this.__isRTL&&(this.__scrollerMetrics={scrollWidth:this.$.table.scrollWidth,clientWidth:this.$.table.clientWidth})}_updateLastFrozen(){if(!this._columnTree)return;const e=this._columnTree[this._columnTree.length-1].slice(0);e.sort((n,r)=>n._order-r._order);const i=e.reduce((n,r,s)=>(r._lastFrozen=!1,r.frozen&&!r.hidden?s:n),void 0);i!==void 0&&(e[i]._lastFrozen=!0)}_translateStationaryElements(){const e=Math.max(0,this._scrollLeft),i=Math.max(0,this._scrollTop);let n=0,r=0,s=0;if(this._useSticky||(n=e,r=i,s=this.$.table.clientHeight-this.$.footer.offsetHeight-this.$.footer.offsetTop),this.$.header.style.transform=this._getTranslate(-e+n,r),this.$.footer.style.transform=this._getTranslate(-e+n,r+s),this.$.items.style.transform=this._getTranslate(-e+n,0),this._frozenCells.length>0){const o=this.__isRTL?this.__getNormalizedScrollLeft(this.$.table)+this.__scrollerMetrics.clientWidth-this.__scrollerMetrics.scrollWidth:this._scrollLeft,a=this._getTranslate(o,0);for(let l=0;l<this._frozenCells.length;l++)this._frozenCells[l].style.transform=a}}_getTranslate(e,i){return`translate(${e}px, ${i}px)`}},xnt=t=>class extends t{static get properties(){return{selectedItems:{type:Object,notify:!0,value:()=>[]}}}static get observers(){return["_selectedItemsChanged(selectedItems.*)"]}_isSelected(e){return this.selectedItems&&this._getItemIndexInArray(e,this.selectedItems)>-1}selectItem(e){this._isSelected(e)||this.push("selectedItems",e)}deselectItem(e){const i=this._getItemIndexInArray(e,this.selectedItems);i>-1&&this.splice("selectedItems",i,1)}_toggleItem(e){this._getItemIndexInArray(e,this.selectedItems)===-1?this.selectItem(e):this.deselectItem(e)}_selectedItemsChanged(e){!this.$.items.children.length||e.path!=="selectedItems"&&e.path!=="selectedItems.splices"||Array.from(this.$.items.children).forEach(i=>{this._updateItem(i,i._item)})}_selectedInstanceChangedCallback(e,i){i?this.selectItem(e.item):this.deselectItem(e.item)}},Snt=t=>class extends t{static get properties(){return{multiSort:{type:Boolean,value:!1},_sorters:{type:Array,value:function(){return[]}},_previousSorters:{type:Array,value:function(){return[]}}}}ready(){super.ready(),this.addEventListener("sorter-changed",this._onSorterChanged)}_onSorterChanged(e){const i=e.target;e.stopPropagation(),this.__updateSorter(i),this.__applySorters()}__removeSorters(e){e.length!=0&&(this._sorters=this._sorters.filter(i=>e.indexOf(i)<0),this.multiSort&&this.__updateSortOrders(),this.__applySorters())}__updateSortOrders(){this._sorters.forEach((e,i)=>e._order=this._sorters.length>1?i:null,this)}__updateSorter(e){if(e.direction||this._sorters.indexOf(e)!==-1){if(e._order=null,this.multiSort)this._removeArrayItem(this._sorters,e),e.direction&&this._sorters.unshift(e),this.__updateSortOrders();else if(e.direction){const i=this._sorters.filter(n=>n!=e);this._sorters=[e],i.forEach(n=>{n._order=null,n.direction=null})}}}__applySorters(){this.dataProvider&&this.isAttached&&JSON.stringify(this._previousSorters)!==JSON.stringify(this._mapSorters())&&this.clearCache(),this._a11yUpdateSorters(),this._previousSorters=this._mapSorters()}_mapSorters(){return this._sorters.map(e=>({path:e.path,direction:e.direction}))}_removeArrayItem(e,i){const n=e.indexOf(i);n>-1&&e.splice(n,1)}},Ent=t=>class extends t{static get properties(){return{cellClassNameGenerator:Function}}static get observers(){return["__cellClassNameGeneratorChanged(cellClassNameGenerator)"]}__cellClassNameGeneratorChanged(){this.generateCellClassNames()}generateCellClassNames(){Array.from(this.$.items.children).filter(e=>!e.hidden).forEach(e=>this._generateCellClassNames(e,this.__getRowModel(e)))}_generateCellClassNames(e,i){Array.from(e.children).forEach(n=>{if(n.__generatedClasses&&n.__generatedClasses.forEach(r=>n.classList.remove(r)),this.cellClassNameGenerator){const r=this.cellClassNameGenerator(n._column,i);n.__generatedClasses=r&&r.split(" ").filter(s=>s.length>0),n.__generatedClasses&&n.__generatedClasses.forEach(s=>n.classList.add(s))}})}},Ix={BETWEEN:"between",ON_TOP:"on-top",ON_TOP_OR_BETWEEN:"on-top-or-between",ON_GRID:"on-grid"},fp={ON_TOP:"on-top",ABOVE:"above",BELOW:"below",EMPTY:"empty"},Cnt=t=>class extends t{static get properties(){return{dropMode:String,rowsDraggable:Boolean,dragFilter:Function,dropFilter:Function,__dndAutoScrollThreshold:{value:50}}}static get observers(){return["_dragDropAccessChanged(rowsDraggable, dropMode, dragFilter, dropFilter)"]}ready(){super.ready(),this.$.table.addEventListener("dragstart",this._onDragStart.bind(this)),this.$.table.addEventListener("dragend",this._onDragEnd.bind(this)),this.$.table.addEventListener("dragover",this._onDragOver.bind(this)),this.$.table.addEventListener("dragleave",this._onDragLeave.bind(this)),this.$.table.addEventListener("drop",this._onDrop.bind(this)),this.$.table.addEventListener("dragenter",e=>{this.dropMode&&(e.preventDefault(),e.stopPropagation())})}_onDragStart(e){if(this.rowsDraggable){let i=e.target;if(i.localName==="vaadin-grid-cell-content"&&(i=i.assignedSlot.parentNode.parentNode),i.parentNode!==this.$.items)return;if(e.stopPropagation(),this._toggleAttribute("dragging-rows",!0,this),this._safari){const o=i.style.transform;i.style.top=/translateY\((.*)\)/.exec(o)[1],i.style.transform="none",requestAnimationFrame(()=>{i.style.top="",i.style.transform=o})}const n=i.getBoundingClientRect();this._ios?e.dataTransfer.setDragImage(i):e.dataTransfer.setDragImage(i,e.clientX-n.left,e.clientY-n.top);let r=[i];this._isSelected(i._item)&&(r=this.__getViewportRows().filter(o=>this._isSelected(o._item)).filter(o=>!this.dragFilter||this.dragFilter(this.__getRowModel(o)))),e.dataTransfer.setData("text",this.__formatDefaultTransferData(r)),i.setAttribute("dragstart",r.length>1?r.length:""),this.updateStyles({"--_grid-drag-start-x":e.clientX-n.left+20+"px","--_grid-drag-start-y":e.clientY-n.top+10+"px"}),requestAnimationFrame(()=>{i.removeAttribute("dragstart"),this.updateStyles({"--_grid-drag-start-x":"","--_grid-drag-start-y":""})});const s=new CustomEvent("grid-dragstart",{detail:{draggedItems:r.map(o=>o._item),setDragData:(o,a)=>e.dataTransfer.setData(o,a),setDraggedItemsCount:o=>i.setAttribute("dragstart",o)}});s.originalEvent=e,this.dispatchEvent(s)}}_onDragEnd(e){this._toggleAttribute("dragging-rows",!1,this),e.stopPropagation();const i=new CustomEvent("grid-dragend");i.originalEvent=e,this.dispatchEvent(i)}_onDragLeave(e){e.stopPropagation(),this._clearDragStyles()}_onDragOver(e){if(this.dropMode){if(this._dropLocation=void 0,this._dragOverItem=void 0,this.__dndAutoScroll(e.clientY))return void this._clearDragStyles();let i=e.composedPath().filter(n=>n.localName==="tr")[0];if(this._effectiveSize&&this.dropMode!==Ix.ON_GRID)if(i&&i.parentNode===this.$.items){const n=i.getBoundingClientRect();if(this._dropLocation=fp.ON_TOP,this.dropMode===Ix.BETWEEN){const r=e.clientY-n.top<n.bottom-e.clientY;this._dropLocation=r?fp.ABOVE:fp.BELOW}else this.dropMode===Ix.ON_TOP_OR_BETWEEN&&(e.clientY-n.top<n.height/3?this._dropLocation=fp.ABOVE:e.clientY-n.top>n.height/3*2&&(this._dropLocation=fp.BELOW))}else{if(i||this.dropMode!==Ix.BETWEEN&&this.dropMode!==Ix.ON_TOP_OR_BETWEEN)return;i=Array.from(this.$.items.children).filter(n=>!n.hidden).pop(),this._dropLocation=fp.BELOW}else this._dropLocation=fp.EMPTY;if(i&&i.hasAttribute("drop-disabled"))return void(this._dropLocation=void 0);e.stopPropagation(),e.preventDefault(),this._dropLocation===fp.EMPTY?this._toggleAttribute("dragover",!0,this):i?(this._dragOverItem=i._item,i.getAttribute("dragover")!==this._dropLocation&&i.setAttribute("dragover",this._dropLocation)):this._clearDragStyles()}}__dndAutoScroll(e){if(this.__dndAutoScrolling)return!0;const i=this.$.header.getBoundingClientRect().bottom,n=this.$.footer.getBoundingClientRect().top,r=i-e+this.__dndAutoScrollThreshold,s=e-n+this.__dndAutoScrollThreshold;let o=0;if(s>0?o=2*s:r>0&&(o=2*-r),o){const a=this.$.table.scrollTop;if(this.$.table.scrollTop+=o,a!==this.$.table.scrollTop)return this.__dndAutoScrolling=!0,setTimeout(()=>this.__dndAutoScrolling=!1,20),this._scrollHandler(),!0}}__getViewportRows(){const e=this.$.header.getBoundingClientRect().bottom,i=this.$.footer.getBoundingClientRect().top;return Array.from(this.$.items.children).filter(n=>{const r=n.getBoundingClientRect();return r.bottom>e&&r.top<i})}_clearDragStyles(){this.removeAttribute("dragover"),Array.from(this.$.items.children).forEach(e=>e.removeAttribute("dragover"))}_onDrop(e){if(this.dropMode){e.stopPropagation(),e.preventDefault();const i=e.dataTransfer.types&&Array.from(e.dataTransfer.types).map(r=>({type:r,data:e.dataTransfer.getData(r)}));this._clearDragStyles();const n=new CustomEvent("grid-drop",{bubbles:e.bubbles,cancelable:e.cancelable,detail:{dropTargetItem:this._dragOverItem,dropLocation:this._dropLocation,dragData:i}});n.originalEvent=e,this.dispatchEvent(n)}}__formatDefaultTransferData(e){return e.map(i=>Array.from(i.children).filter(n=>!n.hidden&&n.getAttribute("part").indexOf("details-cell")===-1).sort((n,r)=>n._column._order>r._column._order?1:-1).map(n=>n._content.textContent.trim()).filter(n=>n).join("	")).join(`
`)}_dragDropAccessChanged(){this.filterDragAndDrop()}filterDragAndDrop(){Array.from(this.$.items.children).filter(e=>!e.hidden).forEach(e=>{this._filterDragAndDrop(e,this.__getRowModel(e))})}_filterDragAndDrop(e,i){const n=!this.rowsDraggable||this.dragFilter&&!this.dragFilter(i),r=!this.dropMode||this.dropFilter&&!this.dropFilter(i);Array.from(e.children).map(s=>s._content).forEach(s=>{n?s.removeAttribute("draggable"):s.setAttribute("draggable",!0)}),this._toggleAttribute("drag-disabled",n,e),this._toggleAttribute("drop-disabled",r,e)}},Int=t=>class extends t{static get properties(){return{_headerFocusable:{type:Object,observer:"_focusableChanged"},_itemsFocusable:{type:Object,observer:"_focusableChanged"},_footerFocusable:{type:Object,observer:"_focusableChanged"},_navigatingIsHidden:Boolean,_focusedItemIndex:{type:Number,value:0},_focusedColumnOrder:Number}}ready(){super.ready(),this._ios||this._android||(this.addEventListener("keydown",this._onKeyDown),this.addEventListener("keyup",this._onKeyUp),this.addEventListener("focusin",this._onFocusIn),this.addEventListener("focusout",this._onFocusOut),this.$.table.addEventListener("focusin",this._onCellFocusIn.bind(this)),this.$.table.addEventListener("focusout",this._onCellFocusOut.bind(this)),this.addEventListener("mousedown",()=>{this._toggleAttribute("navigating",!1,this),this._isMousedown=!0}),this.addEventListener("mouseup",()=>this._isMousedown=!1))}_focusableChanged(e,i){i&&i.setAttribute("tabindex","-1"),e&&e.setAttribute("tabindex","0")}_onKeyDown(e){const i=e.key;let n;switch(i){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"PageUp":case"PageDown":case"Home":case"End":n="Navigation";break;case"Enter":case"Escape":case"F2":n="Interaction";break;case"Tab":n="Tab";break;case" ":n="Space"}this._detectInteracting(e),this.hasAttribute("interacting")&&n!=="Interaction"&&(n=void 0),n&&this[`_on${n}KeyDown`](e,i)}_ensureScrolledToIndex(e){Array.from(this.$.items.children).filter(i=>i.index===e)[0]||this._scrollToIndex(e)}_onNavigationKeyDown(e,i){function n(D){return Array.prototype.indexOf.call(D.parentNode.children,D)}this._scrollHandler(),e.preventDefault();const r=this._lastVisibleIndex-this._firstVisibleIndex-1;let s=0,o=0;switch(i){case"ArrowRight":s=this.__isRTL?-1:1;break;case"ArrowLeft":s=this.__isRTL?1:-1;break;case"Home":s=-1/0,e.ctrlKey&&(o=-1/0);break;case"End":s=1/0,e.ctrlKey&&(o=1/0);break;case"ArrowDown":o=1;break;case"ArrowUp":o=-1;break;case"PageDown":o=r;break;case"PageUp":o=-r}const a=e.composedPath()[0],l=n(a),u=this._elementMatches(a,'[part~="details-cell"]'),h=a.parentNode,p=h.parentNode,f=(p===this.$.items?this._effectiveSize:p.children.length)-1,g=p===this.$.items?this._focusedItemIndex!==void 0?this._focusedItemIndex:h.index:n(h);let v=Math.max(0,Math.min(g+o,f)),b=!1;if(p===this.$.items){const D=h._item,z=this._cache.getItemForIndex(v);b=u?o===0:o===1&&this._isDetailsOpened(D)||o===-1&&v!==g&&this._isDetailsOpened(z),b!==u&&(o===1&&b||o===-1&&!b)&&(v=g)}if(p!==this.$.items){if(v>g)for(;v<f&&p.children[v].hidden;)v++;else if(v<g)for(;v>0&&p.children[v].hidden;)v--}this._focusedColumnOrder===void 0&&(this._focusedColumnOrder=u?0:this._getColumns(p,g).filter(D=>!D.hidden)[l]._order);const _=this._getColumns(p,v).filter(D=>!D.hidden),w=_.map(D=>D._order).sort((D,z)=>D-z),S=w.length-1,C=w.indexOf(w.slice(0).sort((D,z)=>Math.abs(D-this._focusedColumnOrder)-Math.abs(z-this._focusedColumnOrder))[0]),$=o===0&&u?C:Math.max(0,Math.min(C+s,S));$!==C&&(this._focusedColumnOrder=void 0),p===this.$.items&&this._ensureScrolledToIndex(v),this._toggleAttribute("navigating",!0,this);const M=_.reduce((D,z,B)=>(D[z._order]=B,D),{})[w[$]],P=p===this.$.items?Array.from(p.children).filter(D=>D.index===v)[0]:p.children[v];if(!P)return;const k=b?Array.from(P.children).filter(D=>this._elementMatches(D,'[part~="details-cell"]'))[0]:P.children[M];if(this._scrollHorizontallyToCell(k),p===this.$.items&&(this._focusedItemIndex=v),p===this.$.items){const D=k.getBoundingClientRect(),z=this.$.footer.getBoundingClientRect().top,B=this.$.header.getBoundingClientRect().bottom;D.bottom>z?(this.$.table.scrollTop+=D.bottom-z,this._scrollHandler()):D.top<B&&(this.$.table.scrollTop-=B-D.top,this._scrollHandler())}k.focus()}_parseEventPath(e){const i=e.indexOf(this.$.table);return{rowGroup:e[i-1],row:e[i-2],cell:e[i-3]}}_onInteractionKeyDown(e,i){const n=e.composedPath()[0],r=n.localName==="input"&&!/^(button|checkbox|color|file|image|radio|range|reset|submit)$/i.test(n.type);let s;switch(i){case"Enter":s=!this.hasAttribute("interacting")||!r;break;case"Escape":s=!1;break;case"F2":s=!this.hasAttribute("interacting")}const{cell:o}=this._parseEventPath(e.composedPath());if(this.hasAttribute("interacting")!==s)if(s){const a=o._content.querySelector("[focus-target]")||o._content.firstElementChild;a&&(e.preventDefault(),a.focus(),this._toggleAttribute("interacting",!0,this),this._toggleAttribute("navigating",!1,this))}else e.preventDefault(),this._focusedColumnOrder=void 0,o.focus(),this._toggleAttribute("interacting",!1,this),this._toggleAttribute("navigating",!0,this)}_predictFocusStepTarget(e,i){const n=[this.$.table,this._headerFocusable,this._itemsFocusable,this._footerFocusable,this.$.focusexit];let r=n.indexOf(e);for(r+=i;r>=0&&r<=n.length-1&&(!n[r]||n[r].parentNode.hidden);)r+=i;return n[r]}_onTabKeyDown(e){const i=this._predictFocusStepTarget(e.composedPath()[0],e.shiftKey?-1:1);if(i===this.$.table)this.$.table.focus();else if(i===this.$.focusexit)this.$.focusexit.focus();else if(i===this._itemsFocusable){let n=i;const r=this._itemsFocusable.parentNode;if(this._ensureScrolledToIndex(this._focusedItemIndex),r.index!==this._focusedItemIndex){const s=Array.from(r.children).indexOf(this._itemsFocusable),o=Array.from(this.$.items.children).filter(a=>a.index===this._focusedItemIndex)[0];o&&(n=o.children[s])}e.preventDefault(),n.focus()}else e.preventDefault(),i.focus();this._toggleAttribute("navigating",!0,this)}_onSpaceKeyDown(e){e.preventDefault();const i=e.composedPath()[0];i._content&&i._content.firstElementChild||this.dispatchEvent(new CustomEvent("cell-activate",{detail:{model:this.__getRowModel(i.parentElement)}}))}_onKeyUp(e){if(!/^( |SpaceBar)$/.test(e.key))return;e.preventDefault();const i=e.composedPath()[0];if(i._content&&i._content.firstElementChild){const n=this.hasAttribute("navigating");i._content.firstElementChild.click(),this._toggleAttribute("navigating",n,this)}}_onFocusIn(e){this._isMousedown||this._toggleAttribute("navigating",!0,this);const i=e.composedPath()[0];i===this.$.table||i===this.$.focusexit?(this._predictFocusStepTarget(i,i===this.$.table?1:-1).focus(),this._toggleAttribute("interacting",!1,this)):this._detectInteracting(e)}_onFocusOut(e){this._toggleAttribute("navigating",!1,this),this._detectInteracting(e)}_onCellFocusIn(e){if(this._detectInteracting(e),e.composedPath().indexOf(this.$.table)===3){const i=e.composedPath()[0];this._activeRowGroup=i.parentNode.parentNode,this._activeRowGroup===this.$.header?this._headerFocusable=i:this._activeRowGroup===this.$.items?this._itemsFocusable=i:this._activeRowGroup===this.$.footer&&(this._footerFocusable=i),i._content.dispatchEvent(new CustomEvent("cell-focusin",{bubbles:!1}))}this._detectFocusedItemIndex(e)}_onCellFocusOut(e){e.composedPath().indexOf(this.$.table)===3&&e.composedPath()[0]._content.dispatchEvent(new CustomEvent("cell-focusout",{bubbles:!1}))}_detectInteracting(e){this._toggleAttribute("interacting",e.composedPath().some(i=>i.localName==="vaadin-grid-cell-content"),this)}_detectFocusedItemIndex(e){const{rowGroup:i,row:n}=this._parseEventPath(e.composedPath());i===this.$.items&&(this._focusedItemIndex=n.index)}_preventScrollerRotatingCellFocus(e,i){e.index===this._focusedItemIndex&&this.hasAttribute("navigating")&&this._activeRowGroup===this.$.items&&(this._navigatingIsHidden=!0,this._toggleAttribute("navigating",!1,this)),i===this._focusedItemIndex&&this._navigatingIsHidden&&(this._navigatingIsHidden=!1,this._toggleAttribute("navigating",!0,this))}_getColumns(e,i){let n=this._columnTree.length-1;return e===this.$.header?n=i:e===this.$.footer&&(n=this._columnTree.length-1-i),this._columnTree[n]}_resetKeyboardNavigation(){if(this.$.header.firstElementChild&&(this._headerFocusable=Array.from(this.$.header.firstElementChild.children).filter(e=>!e.hidden)[0]),this.$.items.firstElementChild){const e=this._iterateItems((i,n)=>{if(this._firstVisibleIndex===n)return this.$.items.children[i]});e&&(this._itemsFocusable=Array.from(e.children).filter(i=>!i.hidden)[0])}this.$.footer.firstElementChild&&(this._footerFocusable=Array.from(this.$.footer.firstElementChild.children).filter(e=>!e.hidden)[0])}_scrollHorizontallyToCell(e){if(e.hasAttribute("frozen")||this._elementMatches(e,'[part~="details-cell"]'))return;const i=e.getBoundingClientRect(),n=e.parentNode,r=Array.from(n.children).indexOf(e),s=this.$.table.getBoundingClientRect();let o=s.left,a=s.right;for(let l=r-1;l>=0;l--){const u=n.children[l];if(!u.hasAttribute("hidden")&&!this._elementMatches(u,'[part~="details-cell"]')&&u.hasAttribute("frozen")){o=u.getBoundingClientRect().right;break}}for(let l=r+1;l<n.children.length;l++){const u=n.children[l];if(!u.hasAttribute("hidden")&&!this._elementMatches(u,'[part~="details-cell"]')&&u.hasAttribute("frozen")){a=u.getBoundingClientRect().left;break}}i.left<o&&(this.$.table.scrollLeft+=Math.round(i.left-o)),i.right>a&&(this.$.table.scrollLeft+=Math.round(i.right-a))}_elementMatches(e,i){return e.matches?e.matches(i):Array.from(e.parentNode.querySelectorAll(i)).indexOf(e)!==-1}},Tnt=t=>class extends h2(t){static get properties(){return{columnReorderingAllowed:{type:Boolean,value:!1},_orderBaseScope:{type:Number,value:1e7}}}static get observers(){return["_updateOrders(_columnTree, _columnTree.*)"]}ready(){super.ready(),eH(this,"track",this._onTrackEvent),this._reorderGhost=this.shadowRoot.querySelector('[part="reorder-ghost"]'),this.addEventListener("touchstart",this._onTouchStart.bind(this)),this.addEventListener("touchmove",this._onTouchMove.bind(this)),this.addEventListener("touchend",this._onTouchEnd.bind(this)),this.addEventListener("contextmenu",this._onContextMenu.bind(this))}_onContextMenu(e){this.hasAttribute("reordering")&&e.preventDefault()}_onTouchStart(e){this._startTouchReorderTimeout=setTimeout(()=>{this._onTrackStart({detail:{x:e.touches[0].clientX,y:e.touches[0].clientY}})},100)}_onTouchMove(e){this._draggedColumn&&e.preventDefault(),clearTimeout(this._startTouchReorderTimeout)}_onTouchEnd(){clearTimeout(this._startTouchReorderTimeout),this._onTrackEnd()}_onTrackEvent(e){if(e.detail.state==="start"){const i=e.composedPath(),n=i[i.indexOf(this.$.header)-2];if(!n||!n._content||n._content.contains(this.getRootNode().activeElement)||this.$.scroller.hasAttribute("column-resizing"))return;this._touchDevice||this._onTrackStart(e)}else e.detail.state==="track"?this._onTrack(e):e.detail.state==="end"&&this._onTrackEnd(e)}_onTrackStart(e){if(!this.columnReorderingAllowed)return;const i=e.composedPath&&e.composedPath();if(i&&i.filter(r=>r.hasAttribute&&r.hasAttribute("draggable"))[0])return;const n=this._cellFromPoint(e.detail.x,e.detail.y);if(n&&n.getAttribute("part").indexOf("header-cell")!==-1){for(this._toggleAttribute("reordering",!0,this),this._draggedColumn=n._column;this._draggedColumn.parentElement.childElementCount===1;)this._draggedColumn=this._draggedColumn.parentElement;this._setSiblingsReorderStatus(this._draggedColumn,"allowed"),this._draggedColumn._reorderStatus="dragging",this._updateGhost(n),this._reorderGhost.style.visibility="visible",this._updateGhostPosition(e.detail.x,this._touchDevice?e.detail.y-50:e.detail.y),this._autoScroller()}}_onTrack(e){if(!this._draggedColumn)return;const i=this._cellFromPoint(e.detail.x,e.detail.y);if(!i)return;const n=this._getTargetColumn(i,this._draggedColumn);this._isSwapAllowed(this._draggedColumn,n)&&this._isSwappableByPosition(n,e.detail.x)&&this._swapColumnOrders(this._draggedColumn,n),this._updateGhostPosition(e.detail.x,this._touchDevice?e.detail.y-50:e.detail.y),this._lastDragClientX=e.detail.x}_onTrackEnd(){this._draggedColumn&&(this._toggleAttribute("reordering",!1,this),this._draggedColumn._reorderStatus="",this._setSiblingsReorderStatus(this._draggedColumn,""),this._draggedColumn=null,this._lastDragClientX=null,this._reorderGhost.style.visibility="hidden",this.dispatchEvent(new CustomEvent("column-reorder",{detail:{columns:this._getColumnsInOrder()}})))}_getColumnsInOrder(){return this._columnTree.slice(0).pop().filter(e=>!e.hidden).sort((e,i)=>e._order-i._order)}_cellFromPoint(e,i){e=e||0,i=i||0,this._draggedColumn||this._toggleAttribute("no-content-pointer-events",!0,this.$.scroller);const n=this.shadowRoot.elementFromPoint(e,i);if(this._toggleAttribute("no-content-pointer-events",!1,this.$.scroller),n&&n._column)return n}_updateGhostPosition(e,i){const n=this._reorderGhost.getBoundingClientRect(),r=e-n.width/2,s=i-n.height/2,o=parseInt(this._reorderGhost._left||0),a=parseInt(this._reorderGhost._top||0);this._reorderGhost._left=o-(n.left-r),this._reorderGhost._top=a-(n.top-s),this._reorderGhost.style.transform=`translate(${this._reorderGhost._left}px, ${this._reorderGhost._top}px)`}_updateGhost(e){const i=this._reorderGhost;i.textContent=e._content.innerText;const n=window.getComputedStyle(e);return["boxSizing","display","width","height","background","alignItems","padding","border","flex-direction","overflow"].forEach(r=>i.style[r]=n[r]),i}_updateOrders(e,i){e!==void 0&&i!==void 0&&(e[0].forEach(n=>n._order=0),e[0].forEach((n,r)=>n._order=(r+1)*this._orderBaseScope))}_setSiblingsReorderStatus(e,i){Array.from(e.parentNode.children).filter(n=>/column/.test(n.localName)&&this._isSwapAllowed(n,e)).forEach(n=>n._reorderStatus=i)}_autoScroller(){if(this._lastDragClientX){const e=this._lastDragClientX-this.getBoundingClientRect().right+50,i=this.getBoundingClientRect().left-this._lastDragClientX+50;e>0?this.$.table.scrollLeft+=e/10:i>0&&(this.$.table.scrollLeft-=i/10),this._scrollHandler()}this._draggedColumn&&this.async(this._autoScroller,10)}_isSwapAllowed(e,i){if(e&&i){const n=e!==i,r=e.parentElement===i.parentElement,s=e.frozen===i.frozen;return n&&r&&s}}_isSwappableByPosition(e,i){const n=Array.from(this.$.header.querySelectorAll('tr:not([hidden]) [part~="cell"]')).filter(o=>e.contains(o._column))[0],r=this.$.header.querySelector("tr:not([hidden]) [reorder-status=dragging]").getBoundingClientRect(),s=n.getBoundingClientRect();return s.left>r.left?i>s.right-r.width:i<s.left+r.width}_swapColumnOrders(e,i){const n=e._order;e._order=i._order,i._order=n,this._updateLastFrozen(),this._updateFirstAndLastColumn()}_getTargetColumn(e,i){if(e&&i){let n=e._column;for(;n.parentElement!==i.parentElement&&n!==this;)n=n.parentElement;return n.parentElement===i.parentElement?n:e._column}}},eve=t=>class extends t{static get properties(){return{resizable:{type:Boolean,value:function(){if(this.localName==="vaadin-grid-column-group")return;const e=this.parentNode;return e&&e.localName==="vaadin-grid-column-group"&&e.resizable||!1}},_headerTemplate:{type:Object},_footerTemplate:{type:Object},frozen:{type:Boolean,value:!1},hidden:{type:Boolean},header:{type:String},textAlign:{type:String},_lastFrozen:{type:Boolean,value:!1},_order:Number,_reorderStatus:Boolean,_emptyCells:Array,_headerCell:Object,_footerCell:Object,_grid:Object,headerRenderer:Function,footerRenderer:Function}}static get observers(){return["_widthChanged(width, _headerCell, _footerCell, _cells.*)","_frozenChanged(frozen, _headerCell, _footerCell, _cells.*)","_flexGrowChanged(flexGrow, _headerCell, _footerCell, _cells.*)","_pathOrHeaderChanged(path, header, _headerCell, _footerCell, _cells.*, renderer, headerRenderer, _bodyTemplate, _headerTemplate)","_textAlignChanged(textAlign, _cells.*, _headerCell, _footerCell)","_orderChanged(_order, _headerCell, _footerCell, _cells.*)","_lastFrozenChanged(_lastFrozen)","_setBodyTemplateOrRenderer(_bodyTemplate, renderer, _cells, _cells.*)","_setHeaderTemplateOrRenderer(_headerTemplate, headerRenderer, _headerCell)","_setFooterTemplateOrRenderer(_footerTemplate, footerRenderer, _footerCell)","_resizableChanged(resizable, _headerCell)","_reorderStatusChanged(_reorderStatus, _headerCell, _footerCell, _cells.*)","_hiddenChanged(hidden, _headerCell, _footerCell, _cells.*)"]}connectedCallback(){super.connectedCallback(),this._bodyTemplate&&(this._bodyTemplate.templatizer._grid=this._grid),this._headerTemplate&&(this._headerTemplate.templatizer._grid=this._grid),this._footerTemplate&&(this._footerTemplate.templatizer._grid=this._grid),this._templateObserver.flush(),this._bodyTemplate||this._templateObserver.callback(),requestAnimationFrame(()=>{this._allCells.forEach(e=>{e._content.parentNode||this._grid&&this._grid.appendChild(e._content)})})}disconnectedCallback(){super.disconnectedCallback(),requestAnimationFrame(()=>{this._findHostGrid()||this._allCells.forEach(e=>{e._content.parentNode&&e._content.parentNode.removeChild(e._content)})}),this._gridValue=void 0}_findHostGrid(){let e=this;for(;e&&!/^vaadin.*grid(-pro)?$/.test(e.localName);)e=e.assignedSlot?e.assignedSlot.parentNode:e.parentNode;return e||void 0}get _grid(){return this._gridValue||(this._gridValue=this._findHostGrid()),this._gridValue}get _allCells(){return[].concat(this._cells||[]).concat(this._emptyCells||[]).concat(this._headerCell).concat(this._footerCell).filter(e=>e)}constructor(){super(),this._templateObserver=new wh(this,()=>{this._headerTemplate=this._prepareHeaderTemplate(),this._footerTemplate=this._prepareFooterTemplate(),this._bodyTemplate=this._prepareBodyTemplate()})}_prepareHeaderTemplate(){return this._prepareTemplatizer(this._findTemplate(!0)||null,{})}_prepareFooterTemplate(){return this._prepareTemplatizer(this._findTemplate(!1,!0)||null,{})}_prepareBodyTemplate(){return this._prepareTemplatizer(this._findTemplate()||null)}_prepareTemplatizer(e,i){if(e&&!e.templatizer){const n=new BO;n._grid=this._grid,n.dataHost=this.dataHost,n._instanceProps=i||n._instanceProps,n.template=e,e.templatizer=n}return e}_renderHeaderAndFooter(){this.headerRenderer&&this._headerCell&&this.__runRenderer(this.headerRenderer,this._headerCell),this.footerRenderer&&this._footerCell&&this.__runRenderer(this.footerRenderer,this._footerCell)}__runRenderer(e,i,n){const r=[i._content,this];n&&n.item&&r.push(n),e.apply(this,r)}__setColumnTemplateOrRenderer(e,i,n){if(!this.hidden){if(e&&i)throw new Error("You should only use either a renderer or a template");n.forEach(r=>{const s=this._grid.__getRowModel(r.parentElement);if(i)r._renderer=i,(s.item||i===this.headerRenderer||i===this.footerRenderer)&&this.__runRenderer(i,r,s);else if(r._template!==e){r._template=e,r._content.innerHTML="",e.templatizer._grid=e.templatizer._grid||this._grid;const o=e.templatizer.createInstance();r._content.appendChild(o.root),r._instance=o,s.item&&r._instance.setProperties(s)}})}}_setBodyTemplateOrRenderer(e,i,n){(e||i)&&n&&this.__setColumnTemplateOrRenderer(e,i,n)}_setHeaderTemplateOrRenderer(e,i,n){(e||i)&&n&&this.__setColumnTemplateOrRenderer(e,i,[n])}_setFooterTemplateOrRenderer(e,i,n){(e||i)&&n&&(this.__setColumnTemplateOrRenderer(e,i,[n]),this._grid.__updateHeaderFooterRowVisibility(n.parentElement))}_selectFirstTemplate(e=!1,i=!1){return wh.getFlattenedNodes(this).filter(n=>n.localName==="template"&&n.classList.contains("header")===e&&n.classList.contains("footer")===i)[0]}_findTemplate(e,i){const n=this._selectFirstTemplate(e,i);return n&&this.dataHost&&(n._rootDataHost=this.dataHost._rootDataHost||this.dataHost),n}_flexGrowChanged(e){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("flexGrow"),this._allCells.forEach(i=>i.style.flexGrow=e)}_orderChanged(e){this._allCells.forEach(i=>i.style.order=e)}_widthChanged(e){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("width"),this._allCells.forEach(i=>i.style.width=e),this._grid&&this._grid.__forceReflow&&this._grid.__forceReflow()}_frozenChanged(e){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("frozen",e),this._allCells.forEach(i=>this._toggleAttribute("frozen",e,i)),this._grid&&this._grid._frozenCellsChanged&&this._grid._frozenCellsChanged()}_lastFrozenChanged(e){this._allCells.forEach(i=>this._toggleAttribute("last-frozen",e,i)),this.parentElement&&this.parentElement._columnPropChanged&&(this.parentElement._lastFrozen=e)}_pathOrHeaderChanged(e,i,n,r,s,o,a,l,u){const h=i!==void 0;if(!a&&!u&&h&&n&&this.__setTextContent(n._content,i),e&&s.value){if(!o&&!l){const p=(f,g,{item:v})=>this.__setTextContent(f,this.get(e,v));this.__setColumnTemplateOrRenderer(void 0,p,s.value)}a||u||h||!n||i===null||this.__setTextContent(n._content,this._generateHeader(e))}n&&this._grid.__updateHeaderFooterRowVisibility(n.parentElement)}__setTextContent(e,i){e.textContent!==i&&(e.textContent=i)}_generateHeader(e){return e.substr(e.lastIndexOf(".")+1).replace(/([A-Z])/g,"-$1").toLowerCase().replace(/-/g," ").replace(/^./,i=>i.toUpperCase())}_toggleAttribute(e,i,n){n.hasAttribute(e)===!i&&(i?n.setAttribute(e,""):n.removeAttribute(e))}_reorderStatusChanged(e){this._allCells.forEach(i=>i.setAttribute("reorder-status",e))}_resizableChanged(e,i){e!==void 0&&i!==void 0&&i&&[i].concat(this._emptyCells).forEach(n=>{if(n){const r=n.querySelector('[part~="resize-handle"]');if(r&&n.removeChild(r),e){const s=document.createElement("div");s.setAttribute("part","resize-handle"),n.appendChild(s)}}})}_textAlignChanged(e){if(e===void 0)return;if(["start","end","center"].indexOf(e)===-1)return void console.warn('textAlign can only be set as "start", "end" or "center"');let i;getComputedStyle(this._grid).direction==="ltr"?e==="start"?i="left":e==="end"&&(i="right"):e==="start"?i="right":e==="end"&&(i="left"),this._allCells.forEach(n=>{n._content.style.textAlign=e,getComputedStyle(n._content).textAlign!==e&&(n._content.style.textAlign=i)})}_hiddenChanged(e){this.parentElement&&this.parentElement._columnPropChanged&&this.parentElement._columnPropChanged("hidden",e),!!e!=!!this._previousHidden&&this._grid&&(e===!0&&this._allCells.forEach(i=>{i._content.parentNode&&i._content.parentNode.removeChild(i._content)}),this._grid._debouncerHiddenChanged=dn.debounce(this._grid._debouncerHiddenChanged,bh,()=>{this._grid&&this._grid._renderColumnTree&&this._grid._renderColumnTree(this._grid._columnTree)}),this._grid._updateLastFrozen&&this._grid._updateLastFrozen(),this._grid.notifyResize&&this._grid.notifyResize(),this._grid._resetKeyboardNavigation&&this._grid._resetKeyboardNavigation()),this._previousHidden=e}};class HO extends eve(nH(Hh)){static get is(){return"vaadin-grid-column"}static get properties(){return{width:{type:String,value:"100px"},flexGrow:{type:Number,value:1},renderer:Function,path:{type:String},autoWidth:{type:Boolean,value:!1},_bodyTemplate:{type:Object},_cells:Array}}}customElements.define(HO.is,HO),nI("vaadin-grid",iI`
    @keyframes vaadin-grid-appear {
      to {
        opacity: 1;
      }
    }

    :host {
      display: block;
      animation: 1ms vaadin-grid-appear;
      height: 400px;
      flex: 1 1 auto;
      align-self: stretch;
      position: relative;
    }

    :host([hidden]) {
      display: none !important;
    }

    #scroller {
      display: block;
      transform: translateY(0);
      width: auto;
      height: auto;
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }

    :host([height-by-rows]) {
      height: auto;
      align-self: flex-start;
      flex-grow: 0;
      width: 100%;
    }

    :host([height-by-rows]) #scroller {
      width: 100%;
      height: 100%;
      position: relative;
    }

    #table {
      display: flex;
      flex-direction: column;
      width: 100%;
      height: 100%;
      overflow: auto;
      position: relative;
      outline: none;
      /* Workaround for a Desktop Safari bug: new stacking context here prevents the scrollbar from getting hidden */
      z-index: 0;
    }

    #header,
    #footer {
      display: block;
      position: -webkit-sticky;
      position: sticky;
      left: 0;
      overflow: visible;
      width: 100%;
      z-index: 1;
    }

    #header {
      top: 0;
    }

    th {
      text-align: inherit;
    }

    /* Safari doesn't work with "inherit" */
    [safari] th {
      text-align: initial;
    }

    #footer {
      bottom: 0;
    }

    #items {
      flex-grow: 1;
      flex-shrink: 0;
      display: block;
      position: -webkit-sticky;
      position: sticky;
      width: 100%;
      left: 0;
      overflow: visible;
    }

    [part~='row'] {
      display: flex;
      width: 100%;
      box-sizing: border-box;
      margin: 0;
    }

    [part~='row'][loading] [part~='body-cell'] ::slotted(vaadin-grid-cell-content) {
      opacity: 0;
    }

    #items [part~='row'] {
      position: absolute;
    }

    #items [part~='row']:empty {
      height: 1em;
    }

    [part~='cell']:not([part~='details-cell']) {
      flex-shrink: 0;
      flex-grow: 1;
      box-sizing: border-box;
      display: flex;
      width: 100%;
      position: relative;
      align-items: center;
      padding: 0;
      white-space: nowrap;
    }

    [part~='details-cell'] {
      position: absolute;
      bottom: 0;
      width: 100%;
      box-sizing: border-box;
      padding: 0;
    }

    [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: block;
      width: 100%;
      box-sizing: border-box;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [hidden] {
      display: none !important;
    }

    [frozen] {
      z-index: 2;
      will-change: transform;
    }

    [no-scrollbars][safari] #table,
    [no-scrollbars][firefox] #table {
      overflow: hidden;
    }

    /* Reordering styles */
    :host([reordering]) [part~='cell'] ::slotted(vaadin-grid-cell-content),
    :host([reordering]) [part~='resize-handle'],
    #scroller[no-content-pointer-events] [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      pointer-events: none;
    }

    [part~='reorder-ghost'] {
      visibility: hidden;
      position: fixed;
      pointer-events: none;
      opacity: 0.5;

      /* Prevent overflowing the grid in Firefox */
      top: 0;
      left: 0;
    }

    :host([reordering]) {
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Resizing styles */
    [part~='resize-handle'] {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
      cursor: col-resize;
      z-index: 1;
    }

    [part~='resize-handle']::before {
      position: absolute;
      content: '';
      height: 100%;
      width: 35px;
      transform: translateX(-50%);
    }

    [last-column] [part~='resize-handle']::before,
    [last-frozen] [part~='resize-handle']::before {
      width: 18px;
      transform: none;
      right: 0;
    }

    #scroller[column-resizing] {
      -ms-user-select: none;
      -moz-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Sizer styles */
    #sizer {
      display: flex;
      position: absolute;
      visibility: hidden;
    }

    #sizer [part~='details-cell'] {
      display: none !important;
    }

    #sizer [part~='cell'][hidden] {
      display: none !important;
    }

    #sizer [part~='cell'] {
      display: block;
      flex-shrink: 0;
      line-height: 0;
      height: 0 !important;
      min-height: 0 !important;
      max-height: 0 !important;
      padding: 0 !important;
      border: none !important;
    }

    #sizer [part~='cell']::before {
      content: '-';
    }

    #sizer [part~='cell'] ::slotted(vaadin-grid-cell-content) {
      display: none !important;
    }

    /* RTL specific styles */

    :host([dir='rtl']) #items,
    :host([dir='rtl']) #header,
    :host([dir='rtl']) #footer {
      left: auto;
    }

    :host([dir='rtl']) [part~='reorder-ghost'] {
      left: auto;
      right: 0;
    }

    :host([dir='rtl']) [part~='resize-handle'] {
      left: 0;
      right: auto;
    }

    :host([dir='rtl']) [part~='resize-handle']::before {
      transform: translateX(50%);
    }

    :host([dir='rtl']) [last-column] [part~='resize-handle']::before,
    :host([dir='rtl']) [last-frozen] [part~='resize-handle']::before {
      left: 0;
      right: auto;
    }
  `,{moduleId:"vaadin-grid-styles"});const knt=(()=>{try{return document.createEvent("TouchEvent"),!0}catch{return!1}})();class Kee extends S0e(iH(gnt(fnt(ynt(hnt(wnt(xnt(Snt(_nt(Int(dnt(bnt(Tnt(mnt(vnt(Cnt(Ent(unt)))))))))))))))))){static get template(){return u2`
      <div
        id="scroller"
        safari$="[[_safari]]"
        ios$="[[_ios]]"
        loading$="[[loading]]"
        column-reordering-allowed$="[[columnReorderingAllowed]]"
      >
        <table id="table" role="grid" aria-multiselectable="true" tabindex="0">
          <caption id="sizer" part="row"></caption>
          <thead id="header" role="rowgroup"></thead>
          <tbody id="items" role="rowgroup"></tbody>
          <tfoot id="footer" role="rowgroup"></tfoot>
        </table>

        <div part="reorder-ghost"></div>
      </div>

      <div id="focusexit" tabindex="0"></div>
    `}static get is(){return"vaadin-grid"}static get version(){return"6.0.2"}static get observers(){return["_columnTreeChanged(_columnTree, _columnTree.*)"]}static get properties(){return{_safari:{type:Boolean,value:/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},_ios:{type:Boolean,value:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1},_firefox:{type:Boolean,value:navigator.userAgent.toLowerCase().indexOf("firefox")>-1},_android:{type:Boolean,value:/android/i.test(navigator.userAgent)},_touchDevice:{type:Boolean,value:knt},heightByRows:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_heightByRowsChanged"},_recalculateColumnWidthOnceLoadingFinished:{type:Boolean,value:!0}}}constructor(){super(),this.addEventListener("animationend",this._onAnimationEnd)}connectedCallback(){super.connectedCallback(),this.recalculateColumnWidths()}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e==="dir"&&(this.__isRTL=n==="rtl",this._updateScrollerMeasurements())}__hasRowsWithClientHeight(){return!!Array.from(this.$.items.children).filter(e=>e.clientHeight).length}__itemsReceived(){this._recalculateColumnWidthOnceLoadingFinished&&!this._cache.isLoading()&&this.__hasRowsWithClientHeight()&&(this._recalculateColumnWidthOnceLoadingFinished=!1,this.recalculateColumnWidths())}_recalculateColumnWidths(e){e.forEach(i=>{i.width="auto",i._origFlexGrow=i.flexGrow,i.flexGrow=0}),e.forEach(i=>{i._currentWidth=0,i._allCells.forEach(n=>{const r=n.offsetWidth+1;i._currentWidth=Math.max(i._currentWidth,r)})}),e.forEach(i=>{i.width=`${i._currentWidth}px`,i.flexGrow=i._origFlexGrow,i._currentWidth=void 0,i._origFlexGrow=void 0})}recalculateColumnWidths(){if(this._columnTree)if(this._cache.isLoading())this._recalculateColumnWidthOnceLoadingFinished=!0;else{const e=this._getColumns().filter(i=>!i.hidden&&i.autoWidth);this._recalculateColumnWidths(e)}}_createScrollerRows(e){const i=[];for(let n=0;n<e;n++){const r=document.createElement("tr");r.setAttribute("part","row"),r.setAttribute("role","row"),this._columnTree&&this._updateRow(r,this._columnTree[this._columnTree.length-1],"body",!1,!0),i.push(r)}return this._columnTree&&this._columnTree[this._columnTree.length-1].forEach(n=>n.isConnected&&n.notifyPath&&n.notifyPath("_cells.*",n._cells)),Htt(this,()=>{this._updateFirstAndLastColumn(),this._resetKeyboardNavigation()}),i}_getRowTarget(){return this.$.items}_createCell(e){const i="vaadin-grid-cell-content-"+(this._contentIndex=this._contentIndex+1||0),n=document.createElement("vaadin-grid-cell-content");n.setAttribute("slot",i);const r=document.createElement(e);r.id=i.replace("-content-","-"),r.setAttribute("tabindex","-1"),r.setAttribute("role",e==="td"?"gridcell":"columnheader");const s=document.createElement("slot");return s.setAttribute("name",i),r.appendChild(s),r._content=n,n.addEventListener("mousedown",()=>{if(window.chrome){const o=()=>{n.contains(this.getRootNode().activeElement)||r.focus(),document.removeEventListener("mouseup",o,!0)};document.addEventListener("mouseup",o,!0)}else setTimeout(()=>{n.contains(this.getRootNode().activeElement)||r.focus()})}),r}_updateRow(e,i,n,r,s){n=n||"body";const o=document.createDocumentFragment();Array.from(e.children).forEach(a=>a._vacant=!0),e.innerHTML="",e.id!=="sizer"&&(e.hidden=!0),i.filter(a=>!a.hidden).forEach((a,l,u)=>{let h;if(n==="body"){if(a._cells=a._cells||[],h=a._cells.filter(p=>p._vacant)[0],h||(h=this._createCell("td"),a._cells.push(h)),h.setAttribute("part","cell body-cell"),e.appendChild(h),l===u.length-1&&(this._rowDetailsTemplate||this.rowDetailsRenderer)){this._detailsCells=this._detailsCells||[];const p=this._detailsCells.filter(f=>f._vacant)[0]||this._createCell("td");this._detailsCells.indexOf(p)===-1&&this._detailsCells.push(p),p._content.parentElement||o.appendChild(p._content),this._configureDetailsCell(p),e.appendChild(p),this._a11ySetRowDetailsCell(e,p),p._vacant=!1}a.notifyPath&&!s&&a.notifyPath("_cells.*",a._cells)}else{const p=n==="header"?"th":"td";r||a.localName==="vaadin-grid-column-group"?(h=a[`_${n}Cell`]||this._createCell(p),h._column=a,e.appendChild(h),a[`_${n}Cell`]=h):(a._emptyCells=a._emptyCells||[],h=a._emptyCells.filter(f=>f._vacant)[0]||this._createCell(p),h._column=a,e.appendChild(h),a._emptyCells.indexOf(h)===-1&&a._emptyCells.push(h)),h.setAttribute("part",`cell ${n}-cell`),this.__updateHeaderFooterRowVisibility(e)}h._content.parentElement||o.appendChild(h._content),h._vacant=!1,h._column=a}),this.appendChild(o),this._frozenCellsChanged(),this._updateFirstAndLastColumnForRow(e)}__updateHeaderFooterRowVisibility(e){if(!e)return;const i=Array.from(e.children).filter(n=>{const r=n._column;if(r._emptyCells&&r._emptyCells.indexOf(n)>-1)return!1;if(e.parentElement===this.$.header){if(r.headerRenderer||r._headerTemplate)return!0;if(r.header===null)return!1;if(r.path||r.header!==void 0)return!0}else if(r.footerRenderer||r._footerTemplate)return!0});e.hidden!==!i.length&&(e.hidden=!i.length,this.notifyResize())}_updateScrollerItem(e,i){this._preventScrollerRotatingCellFocus(e,i),this._columnTree&&(this._toggleAttribute("first",i===0,e),this._toggleAttribute("odd",i%2,e),this._a11yUpdateRowRowindex(e,i),this._getItem(i,e))}_columnTreeChanged(e){this._renderColumnTree(e),this.recalculateColumnWidths()}_renderColumnTree(e){for(Array.from(this.$.items.children).forEach(i=>this._updateRow(i,e[e.length-1],null,!1,!0));this.$.header.children.length<e.length;){const i=document.createElement("tr");i.setAttribute("part","row"),i.setAttribute("role","row"),this.$.header.appendChild(i);const n=document.createElement("tr");n.setAttribute("part","row"),n.setAttribute("role","row"),this.$.footer.appendChild(n)}for(;this.$.header.children.length>e.length;)this.$.header.removeChild(this.$.header.firstElementChild),this.$.footer.removeChild(this.$.footer.firstElementChild);Array.from(this.$.header.children).forEach((i,n)=>this._updateRow(i,e[n],"header",n===e.length-1)),Array.from(this.$.footer.children).forEach((i,n)=>this._updateRow(i,e[e.length-1-n],"footer",n===0)),this._updateRow(this.$.sizer,e[e.length-1]),this._resizeHandler(),this._frozenCellsChanged(),this._updateFirstAndLastColumn(),this._resetKeyboardNavigation(),this._a11yUpdateHeaderRows(),this._a11yUpdateFooterRows(),this.__updateFooterPositioning()}__updateFooterPositioning(){this._firefox&&(this.$.items.style.paddingBottom=0,this.heightByRows||(this.$.items.style.paddingBottom=`${this.$.footer.offsetHeight}px`)),this._ios&&!window.CSS.supports("position","sticky")&&(this.$.table.style.height="",this.$.table.style.minHeight="100%",this.$.table.style.maxHeight="100%",setTimeout(()=>this.$.table.style.height=`${this.$.scroller.offsetHeight}px`))}_updateItem(e,i){e._item=i;const n=this.__getRowModel(e);this._toggleAttribute("selected",n.selected,e),this._a11yUpdateRowSelected(e,n.selected),this._a11yUpdateRowLevel(e,n.level),this._toggleAttribute("expanded",n.expanded,e),this._toggleAttribute("details-opened",this._isDetailsOpened(i),e),(this._rowDetailsTemplate||this.rowDetailsRenderer)&&this._toggleDetailsCell(e,i),this._generateCellClassNames(e,n),this._filterDragAndDrop(e,n),Array.from(e.children).forEach(r=>{if(r._renderer){const s=r._column||this;r._renderer.call(s,r._content,s,n)}else r._instance&&(r._instance.__detailsOpened__=n.detailsOpened,r._instance.__selected__=n.selected,r._instance.__level__=n.level,r._instance.__expanded__=n.expanded,r._instance.setProperties(n))}),this._debouncerUpdateHeights=dn.debounce(this._debouncerUpdateHeights,Ac.after(1),()=>{this._updateMetrics(),this._positionItems(),this._updateScrollerSize()})}_resizeHandler(){this._updateDetailsCellHeights(),this._accessIronListAPI(super._resizeHandler,!0),this._updateScrollerMeasurements(),this.__updateFooterPositioning()}_onAnimationEnd(e){e.animationName.indexOf("vaadin-grid-appear")===0&&(this._render(),e.stopPropagation(),this.notifyResize(),this.__itemsReceived(),requestAnimationFrame(()=>{this.__scrollToPendingIndex(),this.$.table.style.webkitOverflowScrolling="touch"}))}_toggleAttribute(e,i,n){n.hasAttribute(e)===!i&&(i?n.setAttribute(e,""):n.removeAttribute(e))}__getRowModel(e){return{index:e.index,item:e._item,level:this._getIndexLevel(e.index),expanded:this._isExpanded(e._item),selected:this._isSelected(e._item),detailsOpened:!(!this._rowDetailsTemplate&&!this.rowDetailsRenderer)&&this._isDetailsOpened(e._item)}}render(){this._columnTree&&(this._columnTree.forEach(e=>{e.forEach(i=>i._renderHeaderAndFooter())}),this._update())}notifyResize(){super.notifyResize()}_heightByRowsChanged(e,i){(e||i)&&this.notifyResize()}__forceReflow(){this._debouncerForceReflow=dn.debounce(this._debouncerForceReflow,bh,()=>{this.$.scroller.style.overflow="hidden",setTimeout(()=>this.$.scroller.style.overflow="")})}}customElements.define(Kee.is,Kee);class Xee extends eve(Hh){static get is(){return"vaadin-grid-column-group"}static get properties(){return{_childColumns:{value:function(){return this._getChildColumns(this)}},flexGrow:{type:Number,readOnly:!0},width:{type:String,readOnly:!0},_visibleChildColumns:Array,_colSpan:Number,_rootColumns:Array}}static get observers(){return["_updateVisibleChildColumns(_childColumns)","_childColumnsChanged(_childColumns)","_groupFrozenChanged(frozen, _rootColumns)","_groupHiddenChanged(hidden, _rootColumns)","_visibleChildColumnsChanged(_visibleChildColumns)","_colSpanChanged(_colSpan, _headerCell, _footerCell)","_groupOrderChanged(_order, _rootColumns)","_groupReorderStatusChanged(_reorderStatus, _rootColumns)","_groupResizableChanged(resizable, _rootColumns)"]}connectedCallback(){super.connectedCallback(),this._addNodeObserver(),this._updateFlexAndWidth()}disconnectedCallback(){super.disconnectedCallback(),this._observer&&this._observer.disconnect()}_columnPropChanged(e,i){e==="hidden"&&(this._preventHiddenCascade=!0,this._updateVisibleChildColumns(this._childColumns),this._preventHiddenCascade=!1),/flexGrow|width|hidden|_childColumns/.test(e)&&this._updateFlexAndWidth(),e==="frozen"&&(this.frozen=this.frozen||i),e==="lastFrozen"&&(this._lastFrozen=this._lastFrozen||i)}_groupOrderChanged(e,i){if(i){const n=i.slice(0);if(!e)return void n.forEach(a=>a._order=0);const r=/(0+)$/.exec(e).pop().length,s=1+~~(Math.log(i.length)/Math.log(Math.LN10)),o=Math.pow(10,r-s);n[0]&&n[0]._order&&n.sort((a,l)=>a._order-l._order),n.forEach((a,l)=>a._order=e+(l+1)*o)}}_groupReorderStatusChanged(e,i){e!==void 0&&i!==void 0&&i.forEach(n=>n._reorderStatus=e)}_groupResizableChanged(e,i){e!==void 0&&i!==void 0&&i.forEach(n=>n.resizable=e)}_updateVisibleChildColumns(e){this._visibleChildColumns=Array.prototype.filter.call(e,i=>!i.hidden)}_childColumnsChanged(e){!this._autoHidden&&this.hidden&&(Array.prototype.forEach.call(e,i=>i.hidden=!0),this._updateVisibleChildColumns(e))}_updateFlexAndWidth(){this._visibleChildColumns&&(this._visibleChildColumns.length?this._setWidth("calc("+Array.prototype.reduce.call(this._visibleChildColumns,(e,i)=>e+" + "+(i.width||"0px").replace("calc",""),"").substring(3)+")"):this._setWidth("0px"),this._setFlexGrow(Array.prototype.reduce.call(this._visibleChildColumns,(e,i)=>e+i.flexGrow,0)))}_groupFrozenChanged(e,i){i!==void 0&&e!==void 0&&e!==!1&&Array.from(i).forEach(n=>n.frozen=e)}_groupHiddenChanged(e,i){i&&!this._preventHiddenCascade&&(this._ignoreVisibleChildColumns=!0,i.forEach(n=>n.hidden=e),this._ignoreVisibleChildColumns=!1),this._columnPropChanged("hidden")}_visibleChildColumnsChanged(e){this._colSpan=e.length,this._ignoreVisibleChildColumns||(e.length===0?this._autoHidden=this.hidden=!0:this.hidden&&this._autoHidden&&(this._autoHidden=this.hidden=!1))}_colSpanChanged(e,i,n){i&&(i.setAttribute("colspan",e),this._grid&&this._grid._a11yUpdateCellColspan(i,e)),n&&(n.setAttribute("colspan",e),this._grid&&this._grid._a11yUpdateCellColspan(n,e))}_getChildColumns(e){return wh.getFlattenedNodes(e).filter(this._isColumnElement)}_addNodeObserver(){this._observer=new wh(this,e=>{(e.addedNodes.filter(this._isColumnElement).length>0||e.removedNodes.filter(this._isColumnElement).length>0)&&(this._preventHiddenCascade=!0,this._rootColumns=this._getChildColumns(this),this._childColumns=this._rootColumns,this._preventHiddenCascade=!1,ml.run(()=>{this._grid&&this._grid._updateColumnTree&&this._grid._updateColumnTree()}))}),this._observer.flush()}_isColumnElement(e){return e.nodeType===Node.ELEMENT_NODE&&/\bcolumn\b/.test(e.localName)}}customElements.define(Xee.is,Xee);class Qee extends HO{static get template(){return u2`
      <template class="header" id="defaultHeaderTemplate">
        <vaadin-checkbox
          class="vaadin-grid-select-all-checkbox"
          aria-label="Select All"
          hidden$="[[_selectAllHidden]]"
          on-checked-changed="_onSelectAllCheckedChanged"
          checked="[[_isChecked(selectAll, _indeterminate)]]"
          indeterminate="[[_indeterminate]]"
        ></vaadin-checkbox>
      </template>
      <template id="defaultBodyTemplate">
        <vaadin-checkbox aria-label="Select Row" checked="{{selected}}"></vaadin-checkbox>
      </template>
    `}static get is(){return"vaadin-grid-selection-column"}static get properties(){return{width:{type:String,value:"58px"},flexGrow:{type:Number,value:0},selectAll:{type:Boolean,value:!1,notify:!0},autoSelect:{type:Boolean,value:!1},_indeterminate:Boolean,_previousActiveItem:Object,_selectAllHidden:Boolean}}static get observers(){return["_onSelectAllChanged(selectAll)"]}_pathOrHeaderChanged(e,i,n,r,s,o,a,l,u){!s.value||e===void 0&&o===void 0||(this._bodyTemplate=l=void 0,this.__cleanCellsOfTemplateProperties(s.value)),!n||i===void 0&&a===void 0||(this._headerTemplate=u=void 0,this.__cleanCellsOfTemplateProperties([n])),super._pathOrHeaderChanged(e,i,n,r,s,o,a,l,u)}__cleanCellsOfTemplateProperties(e){e.forEach(i=>{i._content.innerHTML="",delete i._instance,delete i._template})}_prepareHeaderTemplate(){const e=this._prepareTemplatizer(this._findTemplate(!0)||this.$.defaultHeaderTemplate);return e.templatizer.dataHost=e===this.$.defaultHeaderTemplate?this:this.dataHost,e}_prepareBodyTemplate(){const e=this._prepareTemplatizer(this._findTemplate()||this.$.defaultBodyTemplate);return e.templatizer.dataHost=e===this.$.defaultBodyTemplate?this:this.dataHost,e}constructor(){super(),this._boundOnActiveItemChanged=this._onActiveItemChanged.bind(this),this._boundOnDataProviderChanged=this._onDataProviderChanged.bind(this),this._boundOnSelectedItemsChanged=this._onSelectedItemsChanged.bind(this)}disconnectedCallback(){this._grid.removeEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.removeEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.removeEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.removeEventListener("selected-items-changed",this._boundOnSelectedItemsChanged),super.disconnectedCallback()}connectedCallback(){super.connectedCallback(),this._grid&&(this._grid.addEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.addEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.addEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.addEventListener("selected-items-changed",this._boundOnSelectedItemsChanged))}_onSelectAllChanged(e){e!==void 0&&this._grid&&(this._selectAllChangeLock||(this._grid.selectedItems=e&&Array.isArray(this._grid.items)?this._grid._filter(this._grid.items):[]))}_arrayContains(e,i){for(var n=0;e&&i&&i[n]&&e.indexOf(i[n])>=0;n++);return n==i.length}_onSelectAllCheckedChanged(e){this.selectAll=this._indeterminate||e.target.checked}_isChecked(e,i){return i||e}_onActiveItemChanged(e){const i=e.detail.value;if(this.autoSelect){const n=i||this._previousActiveItem;n&&this._grid._toggleItem(n)}this._previousActiveItem=i}_onSelectedItemsChanged(){this._selectAllChangeLock=!0,Array.isArray(this._grid.items)&&(this._grid.selectedItems.length?this._arrayContains(this._grid.selectedItems,this._grid._filter(this._grid.items))?(this.selectAll=!0,this._indeterminate=!1):(this.selectAll=!1,this._indeterminate=!0):(this.selectAll=!1,this._indeterminate=!1)),this._selectAllChangeLock=!1}_onDataProviderChanged(){this._selectAllHidden=!Array.isArray(this._grid.items)}}customElements.define(Qee.is,Qee),nI("vaadin-grid-sorter",iI`
    :host {
      justify-content: flex-start;
      align-items: baseline;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    [part='content'] {
      display: inline-block;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    [part='indicators'] {
      margin-left: var(--lumo-space-s);
    }

    :host(:not([direction])) [part='indicators']::before {
      opacity: 0.2;
    }

    :host([direction]) {
      color: var(--lumo-primary-text-color);
    }

    [part='order'] {
      font-size: var(--lumo-font-size-xxs);
      line-height: 1;
    }

    /* RTL specific styles */

    :host([dir='rtl']) [part='indicators'] {
      margin-right: var(--lumo-space-s);
      margin-left: 0;
    }
  `,{moduleId:"lumo-grid-sorter"});const ete=document.createElement("template");ete.innerHTML=`
  <style>
    @font-face {
      font-family: 'vaadin-grid-sorter-icons';
      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAQwAA0AAAAABuwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABGRlRNAAAEFAAAABkAAAAcfep+mUdERUYAAAP4AAAAHAAAAB4AJwAOT1MvMgAAAZgAAAA/AAAAYA8TBPpjbWFwAAAB7AAAAFUAAAFeF1fZ4mdhc3AAAAPwAAAACAAAAAgAAAAQZ2x5ZgAAAlgAAABcAAAAnMvguMloZWFkAAABMAAAAC8AAAA2C5Ap72hoZWEAAAFgAAAAHQAAACQGbQPHaG10eAAAAdgAAAAUAAAAHAoAAABsb2NhAAACRAAAABIAAAASAIwAYG1heHAAAAGAAAAAFgAAACAACwAKbmFtZQAAArQAAAECAAACZxWCgKhwb3N0AAADuAAAADUAAABZCrApUXicY2BkYGAA4rDECVrx/DZfGbhZGEDgyqNPOxH0/wNMq5kPALkcDEwgUQBWRA0dAHicY2BkYGA+8P8AAwMLAwgwrWZgZEAFbABY4QM8AAAAeJxjYGRgYOAAQiYGEICQSAAAAi8AFgAAeJxjYGY6yziBgZWBgWkm0xkGBoZ+CM34msGYkZMBFTAKoAkwODAwvmRiPvD/AIMDMxCD1CDJKjAwAgBktQsXAHicY2GAAMZQCM0EwqshbAALxAEKeJxjYGBgZoBgGQZGBhCIAPIYwXwWBhsgzcXAwcAEhIwMCi+Z/v/9/x+sSuElA4T9/4k4K1gHFwMMMILMY2QDYmaoABOQYGJABUA7WBiGNwAAJd4NIQAAAAAAAAAACAAIABAAGAAmAEAATgAAeJyNjLENgDAMBP9tIURJwQCMQccSZgk2i5fIYBDAidJjycXr7x5EPwE2wY8si7jmyBNXGo/bNBerxJNrpxhbO3/fEFpx8ZICpV+ghxJ74fAMe+h7Ox14AbrsHB14nK2QQWrDMBRER4mTkhQK3ZRQKOgCNk7oGQqhhEIX2WSlWEI1BAlkJ5CDdNsj5Ey9Rncdi38ES+jzNJo/HwTgATcoDEthhY3wBHc4CE+pfwsX5F/hGe7Vo/AcK/UhvMSz+mGXKhZU6pww8ISz3oWn1BvhgnwTnuEJf8Jz1OpFeIlX9YULDLdFi4ASHolkSR0iuYdjLak1vAequBhj21D61Nqyi6l3qWybGPjySbPHGScGJl6dP58MYcQRI0bts7mjebBqrFENH7t3qWtj0OuqHnXcW7b0HOTZFnKryRGW2hFX1m0O2vEM3opNMfTau+CS6Z3Vx6veNnEXY6jwDxhsc2gAAHicY2BiwA84GBgYmRiYGJkZmBlZGFkZ2djScyoLMgzZS/MyDQwMwLSrpYEBlIbxjQDrzgsuAAAAAAEAAf//AA94nGNgZGBg4AFiMSBmYmAEQnYgZgHzGAAD6wA2eJxjYGBgZACCKyoz1cD0o087YTQATOcIewAAAA==) format('woff');
      font-weight: normal;
      font-style: normal;
    }
  </style>
`,document.head.appendChild(ete.content);class tte extends iH(nH(Hh)){static get template(){return u2`
      <style>
        :host {
          display: inline-flex;
          cursor: pointer;
          max-width: 100%;
        }

        [part='content'] {
          flex: 1 1 auto;
        }

        [part='indicators'] {
          position: relative;
          align-self: center;
          flex: none;
        }

        [part='order'] {
          display: inline;
          vertical-align: super;
        }

        [part='indicators']::before {
          font-family: 'vaadin-grid-sorter-icons';
          display: inline-block;
        }

        :host(:not([direction])) [part='indicators']::before {
          content: '\\e901';
        }

        :host([direction='asc']) [part='indicators']::before {
          content: '\\e900';
        }

        :host([direction='desc']) [part='indicators']::before {
          content: '\\e902';
        }
      </style>

      <div part="content">
        <slot></slot>
      </div>
      <div part="indicators">
        <span part="order">[[_getDisplayOrder(_order)]]</span>
      </div>
    `}static get is(){return"vaadin-grid-sorter"}static get properties(){return{path:String,direction:{type:String,reflectToAttribute:!0,notify:!0,value:null},_order:{type:Number,value:null},_isConnected:{type:Boolean,observer:"__isConnectedChanged"}}}static get observers(){return["_pathOrDirectionChanged(path, direction)"]}ready(){super.ready(),this.addEventListener("click",this._onClick.bind(this))}connectedCallback(){super.connectedCallback(),this._isConnected=!0}disconnectedCallback(){super.disconnectedCallback(),this._isConnected=!1}_pathOrDirectionChanged(){this.__dispatchSorterChangedEvenIfPossible()}__isConnectedChanged(e,i){i!==!1&&this.__dispatchSorterChangedEvenIfPossible()}__dispatchSorterChangedEvenIfPossible(){this.path!==void 0&&this.direction!==void 0&&this._isConnected&&this.dispatchEvent(new CustomEvent("sorter-changed",{bubbles:!0,composed:!0}))}_getDisplayOrder(e){return e===null?"":e+1}_onClick(e){const i=this.getRootNode().activeElement;this!==i&&this.contains(i)||(e.preventDefault(),this.direction==="asc"?this.direction="desc":this.direction==="desc"?this.direction=null:this.direction="asc")}}customElements.define(tte.is,tte);class ite extends HO{static get template(){return u2`
      <template class="header" id="headerTemplate">
        <vaadin-grid-sorter path="[[path]]" direction="{{direction}}">[[_getHeader(header, path)]]</vaadin-grid-sorter>
      </template>
    `}static get is(){return"vaadin-grid-sort-column"}static get properties(){return{path:String,direction:{type:String,notify:!0}}}_prepareHeaderTemplate(){const e=this._prepareTemplatizer(this.$.headerTemplate);return e.templatizer.dataHost=this,e}_getHeader(e,i){return e||this._generateHeader(i)}}customElements.define(ite.is,ite);const nte={selectionColumn:!0,columnMenus:!0},wk="esri-grid",$nt="compact column-borders",Tx={base:wk,content:`${wk}__content`,grid:`${wk}__grid`,noColumnMenu:`${wk}--no-column-menu`,widget:"esri-widget"};let ln=class extends La(qt){constructor(t,e){super(t,e),this._grid=null,this._columnElements=[],this._isDataLoaded=!1,this.itemIdPath=null,this.messages=null,this.viewModel=new jye,this.visibleElements={...nte}}initialize(){this.handles.add([this.columns.on("change",()=>this.onColumnChange()),X(()=>{var t;return(t=this.viewModel)==null?void 0:t.size},()=>this._updateGridSize()),X(()=>{var t;return(t=this.store)==null?void 0:t.state},(t,e)=>{t!=="ready"||e!=="loaded"&&e!=="error"||this.refreshPageCache()}),ji(()=>this.highlightIds,"change",t=>{const{added:e,removed:i}=t,n=e.map(s=>{var o;return((o=this.store)==null?void 0:o.getLocalItemByKey(s))||{objectId:s}}),r=i.map(s=>{var o;return((o=this.store)==null?void 0:o.getLocalItemByKey(s))||{objectId:s}});this._deselectRows(r),this._selectRows(n)}),ji(()=>{var t,e;return(e=(t=this._grid)==null?void 0:t.$)==null?void 0:e.table},"scroll",()=>{var t;return(t=this.viewModel)==null?void 0:t.closeColumnMenus()})])}destroy(){var t;this.handles.removeAll(),this.resetColumns(),(t=this.columns)==null||t.destroy()}resetColumns(){this.columns.items.forEach(t=>t.destroy()),this.columns.removeAll()}get cellClassNameGenerator(){return this.viewModel.cellClassNameGenerator}set cellClassNameGenerator(t){this.viewModel.cellClassNameGenerator=t}get columns(){return this.viewModel.columns}set columns(t){this.viewModel.columns=t}get columnReorderingEnabled(){return this.viewModel.columnReorderingEnabled}set columnReorderingEnabled(t){this.viewModel.columnReorderingEnabled=t}get dataProvider(){return this.viewModel.dataProvider}set dataProvider(t){this.viewModel.dataProvider=t}get highlightIds(){return this.viewModel.highlightIds}set highlightIds(t){this.viewModel.highlightIds=t}get label(){var t;return((t=this.messages)==null?void 0:t.widgetLabel)??""}set label(t){this._overrideIfSome("label",t)}get multiSortEnabled(){return this.viewModel.multiSortEnabled}set multiSortEnabled(t){this.viewModel.multiSortEnabled=t}get pageSize(){return this.viewModel.pageSize}set pageSize(t){this.viewModel.pageSize=t}get rowDetailsRenderer(){return this.viewModel.rowDetailsRenderer}set rowDetailsRenderer(t){this.viewModel.rowDetailsRenderer=t}get size(){return this.viewModel.size}get sortOrders(){var t;return(t=this._grid)!=null&&t._sorters?this._grid._sorters.filter(e=>!!e).map(({direction:e,path:i})=>({direction:e,path:i})):[]}get store(){return this.viewModel.store}set store(t){this.viewModel.store=t}castVisibleElements(t){return{...nte,...t}}render(){const{columnMenus:t}=this.visibleElements;return L("div",{bind:this,class:this.classes(Tx.base,Tx.widget,{[Tx.noColumnMenu]:!t})},L("div",{bind:this,class:Tx.content},this.renderGrid()))}renderGrid(){return L("vaadin-grid",{_safari:!1,afterCreate:this._afterGridCreate,afterUpdate:this._afterGridUpdate,bind:this,cellClassNameGenerator:this.cellClassNameGenerator,class:Tx.grid,columnReorderingAllowed:this.columnReorderingEnabled,dataProvider:this.dataProvider,id:`${this.id}_grid`,itemIdPath:this.itemIdPath,multiSort:this.multiSortEnabled,pageSize:this.pageSize,ref:"grid",rowDetailsRenderer:this.rowDetailsRenderer,size:this.size},this.renderAllColumns())}renderAllColumns(){var t;return this.viewModel.state!=="disabled"&&((t=this.columns)!=null&&t.length)?[this.renderSelectionColumn(),this.renderColumns()]:null}renderSelectionColumn(){return L("vaadin-grid-selection-column",{_selectAllHidden:!0,selectAll:!1,bind:this,hidden:!this.visibleElements.selectionColumn,sortable:!1,frozen:!$o(this.container)})}renderColumns(){return this.columns.items.map((t,e)=>"columns"in t?this.renderGroupColumn(t,e):L("vaadin-grid-column",{...this.getColumnProps(t,e)})).filter(A)}renderGroupColumn(t,e){const i=this.getColumnProps(t,e);if(i.hidden||!t.columns)return null;const n=t.columns.filter(({hidden:r})=>!r);return n.length?L("vaadin-grid-column-group",{...i},n.map(r=>L("vaadin-grid-column",{...this.getColumnProps(r,e)}))):null}getColumnProps(t,e){const{id:i}=this,{autoWidth:n,direction:r,flexGrow:s,frozen:o,header:a,hidden:l,path:u,resizable:h,textAlign:p,width:f}=t;return{autoWidth:n,direction:r,flexGrow:s,frozen:o,header:a,hidden:l,key:`${i}_${a}_${A(e)?e:u}`,path:u,resizable:h,"text-align":p,width:typeof f=="number"?`${f}px`:f,bind:this,afterCreate:this._afterColumnCreate,afterRemoved:this._afterColumnRemoved}}clearSelection(){this._clearSelection(),this.scheduleRender()}clearSort(){var e,i;let t=!1;this._grid&&((e=this._grid._sorters)!=null&&e.length&&(this._grid._sorters.forEach(n=>{n._order=null,n.direction=null}),t=!0),(i=this.columns)!=null&&i.length&&this.columns.some(n=>!!n.direction)&&(this.columns.forEach(n=>n.direction=null),t=!0),t&&(this.notifyChange("sortOrders"),this.scheduleRender()))}findColumn(t){this.viewModel.findColumn(t)}generateCellClassNames(){var t;(t=this._grid)==null||t.generateCellClassNames()}getSlotElementByName(t){var e,i;return((i=(e=this._grid)==null?void 0:e.shadowRoot)==null?void 0:i.querySelector(`slot[name='${t}']`))??null}hideColumn(t){var e;(e=this.viewModel)==null||e.hideColumn(t),this.scheduleRender()}notifyResize(){var t;(t=this._grid)==null||t.notifyResize()}recalculateColumnWidths(){var t;(t=this._grid)==null||t.recalculateColumnWidths()}async reset(){var t;this._isDataLoaded=!1,this._clearSelection(),await((t=this.store)==null?void 0:t.reset()),this.scrollToTop()}refreshPageCache(){var t;(t=this._grid)==null||t.clearCache()}selectRows(t){const e=t==null?void 0:t.filter(n=>!this.highlightIds.includes(n.objectId)),i=e.map(n=>n.objectId);i.length&&(this.highlightIds.addMany(i),this._selectRows(e))}deselectRows(t){const e=(t==null?void 0:t.map(i=>i.objectId))||[];e.length&&(this.highlightIds.removeMany(e),this._deselectRows(t))}showColumn(t){var e;(e=this.viewModel)==null||e.showColumn(t),this.scheduleRender()}sort({path:t,direction:e}){var i;(i=this.viewModel)==null||i.sortColumn(t,e),this.notifyChange("sortOrders")}scrollToIndex(t){var e;(e=this._grid)==null||e.scrollToIndex(t)}scrollToTop(){var t;(t=this._grid)==null||t.scrollToIndex(0)}isEditingActive(){return!!this._getActiveEditInfo().length}onColumnChange(){this._syncColumnRenderers()}_afterGridCreate(t){const e=this._grid=t;e.setAttribute("theme",$nt),customElements.whenDefined("vaadin-grid").then(()=>this._addGridEventListeners()),e.__updateSorter=i=>{const n=e._sorters,r=!n.includes(i);if(i.direction||!r){if(i._order=null,e.multiSort)e._removeArrayItem(n,i),i.direction&&(A(i._initialOrder)?(r?n[i._initialOrder]=i:n.splice(i._initialOrder,0,i),i._initialOrder=null):n.unshift(i)),e.__updateSortOrders();else if(i.direction){const s=n.filter(o=>o!==i);e._sorters=[i],s.forEach(o=>{o._order=null,o.direction=null})}}}}_afterGridUpdate(t){this._grid||(this._grid=t)}_afterColumnCreate(t){this._applyRenderersToColumnElement(t),this._columnElements.push(t)}_afterColumnRemoved(t){const e=this._columnElements.indexOf(t,0);e>-1&&this._columnElements.splice(e,1)}_syncColumnRenderers(){this._columnElements.forEach(t=>{this._applyRenderersToColumnElement(t)})}_updateGridSize(){this._grid&&(this._grid.size=this.size||0,this.scheduleRender())}_getActiveEditInfo(){return!this.columns||this.columns.length?[]:this.columns.filter(t=>"activeEditInfo"in t).map(t=>t.activeEditInfo).items}_addGridEventListeners(){const t=this._grid;Du(t),this.handles.add([ll(t,"click",e=>this._onRowClick(e)),ll(t,"selected-items-changed",e=>this._onSelectionChange(e)),ll(t,"sorter-changed",()=>this.notifyChange("sortOrders")),ll(t,"loading-changed",e=>{this._isDataLoaded||e.detail.value===!1&&(this._isDataLoaded=!0,this._selectRowsOnLoad())})])}_onRowClick(t){const e=this._grid;Du(e);const i=e.getEventContext(t),{item:n,section:r}=i;n&&r&&r!=="details"&&r!=="header"&&this.emit("row-click",{context:i,native:t})}_clearSelection(){this._grid&&(this.highlightIds.removeAll(),this._grid.selectedItems=[],this._grid.render())}_selectRowsOnLoad(){var n;const t=this._grid;if(!t)return;const e=t.selectedItems.slice();((n=this.highlightIds)==null?void 0:n.filter(r=>e.findIndex(s=>s.objectId===r)<0)).forEach(r=>{var s;return t.selectedItems.push(((s=this.store)==null?void 0:s.getLocalItemByKey(r))||{objectId:r})}),t.render()}_selectRows(t){const e=this._grid;if(!e)return;const i=e.selectedItems.slice();t.filter(n=>i.findIndex(r=>r.objectId===n.objectId)<0).forEach(n=>e.selectedItems.push(n)),e.render()}_deselectRows(t){const e=this._grid;if(!e)return;const i=e.selectedItems.slice();t.forEach(n=>{const r=i.findIndex(s=>s.objectId===n.objectId);r>-1&&i.splice(r,1)}),e.selectedItems=i,e.render()}_onSelectionChange(t){const e=t;if(e.detail.path==="selectedItems.splices"){const{removed:i,object:n}=e.detail.value.indexSplices[0],r=n.filter(o=>!this.highlightIds.includes(o.objectId)).map(o=>o.objectId),s=i.filter(o=>this.highlightIds.includes(o.objectId)).map(o=>o.objectId);this.highlightIds.removeMany(s),this.highlightIds.addMany(r)}}_applyRenderersToColumnElement(t){const e=t.path,i=this.viewModel.findColumn(e);if(i)try{const{renderFunction:n,footerRenderFunction:r,headerRenderFunction:s}=i;n&&"renderer"in t&&(t.renderer=(o,a,l)=>n({root:o,column:a,rowData:l})),r&&(t.footerRenderer=(o,a)=>r({root:o,column:a})),s&&(t.headerRenderer=(o,a)=>s({root:o,column:a}))}catch{}}};c([d()],ln.prototype,"_grid",void 0),c([d()],ln.prototype,"_isDataLoaded",void 0),c([d()],ln.prototype,"cellClassNameGenerator",null),c([d()],ln.prototype,"columns",null),c([d()],ln.prototype,"columnReorderingEnabled",null),c([d()],ln.prototype,"dataProvider",null),c([d()],ln.prototype,"highlightIds",null),c([d()],ln.prototype,"itemIdPath",void 0),c([d()],ln.prototype,"label",null),c([d(),bt("esri/widgets/FeatureTable/t9n/FeatureTable")],ln.prototype,"messages",void 0),c([d()],ln.prototype,"multiSortEnabled",null),c([d()],ln.prototype,"pageSize",null),c([d()],ln.prototype,"rowDetailsRenderer",null),c([d()],ln.prototype,"size",null),c([d({readOnly:!0})],ln.prototype,"sortOrders",null),c([d()],ln.prototype,"store",null),c([d()],ln.prototype,"viewModel",void 0),c([d()],ln.prototype,"visibleElements",void 0),c([st("visibleElements")],ln.prototype,"castVisibleElements",null),ln=c([O("esri.widgets.FeatureTable.Grid.Grid")],ln);const Ant=ln;let Rb=class extends ZR{constructor(e){super(e),this.columns=null,this.sortable=!1}get path(){return this.header}set path(e){this.header=e}};c([d()],Rb.prototype,"columns",void 0),c([d()],Rb.prototype,"path",null),c([d({readOnly:!0})],Rb.prototype,"sortable",void 0),Rb=c([O("esri.widgets.FeatureTable.Grid.GroupColumn")],Rb);const Mnt=Rb,tve="esri.widgets.FeatureTable.support.FeatureStore",Ont=se.getLogger(tve);function r5(t,e,i){Ont.error(new N(t,e,i))}let vr=class extends _e{constructor(e){super(e),this._loaded=!1,this._loadError=!1,this._loading=!1,this._editOperationQueue=[],this._queryOperationQueue=[],this._objectIdCache=new we,this._hasStaleCache=!1,this.count=0,this.failures=new we,this.itemCache=new we,this.relatedRecordsEnabled=!1}destroy(){this.layer=null,this.itemCache&&this.itemCache.destroy(),this.failures&&this.failures.destroy(),this._set("itemCache",null)}set attachmentsEnabled(e){this._reset(),this._set("attachmentsEnabled",e),this.notifyChange("state")}set filterGeometry(e){this._reset(),this._set("filterGeometry",e),this.notifyChange("state")}set layer(e){this._reset(),this._set("layer",e),this.notifyChange("state")}set objectIds(e){this._reset(),this._set("objectIds",e||null),this.notifyChange("state")}get orderByFields(){return this._get("orderByFields")||[]}set orderByFields(e){const i=this.orderByFields;SI(e,i)||(this.itemCache.removeAll(),this._hasStaleCache=!0,this._set("orderByFields",e))}get querying(){return this._queryOperationQueue.length>0}set returnGeometry(e){this._reset(),this._set("returnGeometry",e),this.notifyChange("state")}get state(){const{layer:e,_loaded:i,_loadError:n,_loading:r}=this;return n?"error":!e||this.get("layer.loadError")?"disabled":r?"loading":this.get("layer.loadStatus")==="loaded"&&i?"loaded":"ready"}get syncing(){return this._editOperationQueue.length>0}set timeExtent(e){this._reset(),this._set("timeExtent",e),this.notifyChange("state")}get where(){return this._get("where")||null}set where(e){this._reset(),this._set("where",e),this.notifyChange("state")}async load(){this._reset();const{layer:e}=this;if(e){this._loading=!0,this.notifyChange("state");try{await e.when(),await this._syncLayerInfo(),this._loading=!1,this._loaded=!0,this.notifyChange("state")}catch(i){throw this._reset(),this._loadError=!0,this.notifyChange("state"),r5("store:load-error","An error ocurred.",{error:i}),i}}}async refreshLayerInfo(){return this._syncLayerInfo()}async addItems(e){}async fetchItems(e){const{page:i,pageSize:n}=e,r=i*n,s=r+n,{layer:o,state:a}=this;if(!o||a!=="loaded")return[];this.notifyChange("querying");const l=await this._query({start:r,num:s,page:i,pageSize:n});return this.notifyChange("state"),l}async verifyFeaturesByObjectId(e){const{layer:i,state:n}=this;if(!i||n!=="loaded")return[];const{features:r}=await this._verifyFeaturesByObjectId(e);return e.map(s=>r.some(o=>(o==null?void 0:o.getObjectId())===s))}async query(e){const{layer:i,state:n}=this;if(!i||n!=="loaded")return[];this.notifyChange("querying");const r=await this._query(e);return this.notifyChange("state"),r}async removeItemAt(e){}async reset(){this._reset()}async updateItem(e){return this._update(e).then(()=>{})}async deleteRowsByObjectId(e){return this._delete({objectIds:e})}getLocalItemByKey(e){return this.getItemByObjectId(e)}getItemByObjectId(e){const{itemCache:i,layer:{objectIdField:n}}=this;return i.find(r=>r.feature.attributes[n]===e)}getLocalItemAt(e){return this.itemCache.getItemAt(e)}getItemAt(e){return Promise.resolve(this.itemCache.getItemAt(e))}getObjectIdIndex(e){const{itemCache:i,layer:{objectIdField:n}}=this;return i.findIndex(r=>r.feature.attributes[n]===e)}_reset(){this.itemCache.removeAll(),this.failures.removeAll(),this._editOperationQueue=[],this._queryOperationQueue=[],this._hasStaleCache=!1,this._loading=!1,this._loaded=!1,this._loadError=!1,this._set("count",0),this._objectIdCache.removeAll(),this.notifyChange("querying"),this.notifyChange("syncing"),this.notifyChange("state")}_getIdsFromFeatures(e){return e.map(i=>i.attributes[this.layer.objectIdField])}_toFeatureData(e,i){const{layer:{objectIdField:n}}=this;return e.map(r=>{const{attributes:s}=r,o=s[n];return{objectId:o,feature:r,attachments:i?i[o]:null,relatedRecords:null}})}async _update(e){const{layer:i}=this,{operations:n}=Pf(i);if(!n.supportsUpdate||!("applyEdits"in i))throw new N("store:update-error","Update is not supported.");const{index:r,name:s,value:o}=e,a=await this.getItemAt(r);if(!a||!a.feature)throw new N("store:update-error","Feature with provided 'objectId' not found.");const{feature:l}=a,u=G(l.attributes);u[s]=o;const h=new en({attributes:u}),p=i.applyEdits({updateFeatures:[h]}).then(f=>{const{updateFeatureResults:g}=f,v=g.find(b=>!!b.error);if(v)throw v.error;return g.length&&(l.attributes=u),f});return this._queueEditOperation(()=>p)}async _delete(e){const{layer:i}=this,{operations:n}=Pf(i);if(!n.supportsDelete||!("applyEdits"in i))throw new N("store:delete-error","Delete is not supported.");const{objectIds:r}=e,s=r.map(o=>this.getItemByObjectId(o).feature);return this._queueEditOperation(()=>i.applyEdits({deleteFeatures:s}))}async _query(e){const{refresh:i}=e;return i===!0?(this.itemCache.removeAll(),this._syncLayerInfo().then(()=>this._queryFeatureData(e))):(this._hasStaleCache&&(await this._updateIds(),this._hasStaleCache=!1),this._queryFeatureData(e))}async _queryFeatureData(e){return this._queueQueryOperation(async()=>{const{features:i}=await this._queryFeatures(e),n=this._getIdsFromFeatures(i),r=await this._queryAttachments(n);return this._toFeatureData(i,r)||[]})}async _syncLayerInfo(){await this._updateCount(),await this._updateIds()}async _updateCount(){await this._queryCount().then(e=>this._set("count",e))}async _updateIds(){var e,i,n;(n=(i=(e=this.layer)==null?void 0:e.capabilities)==null?void 0:i.query)!=null&&n.supportsPagination||(this._objectIdCache.removeAll(),await this._queryForObjectIds().then(r=>this._objectIdCache.addMany(r)))}_queryCount(){const{filterGeometry:e,layer:i}=this,{capabilities:{query:{supportsCacheHint:n}}}=i,r=i.createQuery();return r.geometry=e,r.returnGeometry=!1,r.where=this._getWhere(),r.timeExtent=this._getTimeExtent(),r.objectIds=this.objectIds,n&&(r.cacheHint=!0),i.queryFeatureCount(r)}_queryForObjectIds(){const{filterGeometry:e,layer:i,orderByFields:n}=this,{capabilities:{query:{supportsCacheHint:r,supportsOrderBy:s}}}=i,o=i.createQuery();return o.geometry=e,o.outFields=[i.objectIdField],o.returnGeometry=!1,o.where=this._getWhere(),o.timeExtent=this._getTimeExtent(),o.objectIds=this.objectIds,s&&(o.orderByFields=n),r&&(o.cacheHint=!0),i.queryObjectIds(o)}async _queryFeatures(e){var f;const{layer:i}=this;if(!((f=Pf(i))!=null&&f.operations.supportsQuery))throw new N("store:query-error","Layer does not support query operation.");const{filterGeometry:n,layer:{capabilities:{query:{supportsCacheHint:r,supportsOrderBy:s,supportsPagination:o}}},orderByFields:a,returnGeometry:l}=this,{start:u,pageSize:h}=e,p=i.createQuery();return p.returnGeometry=l,o?(p.start=u,p.num=h,p.where=this._getWhere(),p.timeExtent=this._getTimeExtent(),p.objectIds=this.objectIds):p.objectIds=this.objectIds||this._getObjectIdsForPage(u,h),s&&(p.orderByFields=a),n&&(p.geometry=n),r&&(p.cacheHint=!0),i.queryFeatures(p)}async _verifyFeaturesByObjectId(e){var l;const{layer:i}=this;if(!((l=Pf(i))!=null&&l.operations.supportsQuery))throw new N("store:query-error","Layer does not support query operation.");const{filterGeometry:n,layer:{capabilities:{query:{supportsCacheHint:r,supportsOrderBy:s}}},orderByFields:o}=this,a=i.createQuery();return a.where=this._getWhere(),a.timeExtent=this._getTimeExtent(),a.returnGeometry=!1,a.objectIds=e,a.outFields=[i.objectIdField],s&&(a.orderByFields=o),n&&(a.geometry=n),r&&(a.cacheHint=!0),i.queryFeatures(a)}_getObjectIdsForPage(e,i){const n=this._objectIdCache.toArray();return n.length>=e+i?n.slice(e,e+i):n.slice(e)}_queryAttachments(e){const{attachmentsEnabled:i,layer:n}=this,{capabilities:{data:{supportsAttachment:r},operations:{supportsQueryAttachments:s}}}=n;return i&&r&&s&&"queryAttachments"in n?n.queryAttachments(new ZM({objectIds:e,where:this._getWhere()})):Promise.resolve(null)}_queueQueryOperation(e){return this._queryOperationQueue.push(e),this.notifyChange("querying"),e().then(i=>this._queryOperationQueue.includes(e)?(this.itemCache.addMany(i),i):[]).catch(i=>{r5("store:query-error","An error ocurred.",{error:i});const n={error:i,retry:()=>{this.failures.remove(n),this._queueQueryOperation(e)},cancel:()=>this.failures.remove(n)};return this.failures.add(n),[]}).then(i=>(Qk(this._queryOperationQueue,e),this.notifyChange("querying"),i))}_queueEditOperation(e){return this._editOperationQueue.push(e),this.notifyChange("syncing"),e().then(i=>(Qk(this._editOperationQueue,e),this.notifyChange("syncing"),i)).catch(i=>{r5("store:edit-error","An error ocurred.",{error:i});const n={error:i,retry:()=>{this.failures.remove(n),this._queueEditOperation(e)},cancel:()=>this.failures.remove(n)};throw this.failures.add(n),Qk(this._editOperationQueue,e),this.notifyChange("syncing"),i})}_getWhere(){var e;return this.where||((e=this.layer)==null?void 0:e.definitionExpression)||"1=1"}_getTimeExtent(){const e=this.layer;return this.timeExtent||e&&"timeExtent"in e&&e.timeExtent||null}};c([d()],vr.prototype,"attachmentsEnabled",null),c([d({readOnly:!0})],vr.prototype,"count",void 0),c([d({readOnly:!0})],vr.prototype,"failures",void 0),c([d()],vr.prototype,"filterGeometry",null),c([d({readOnly:!0})],vr.prototype,"itemCache",void 0),c([d({value:null})],vr.prototype,"layer",null),c([d({value:null})],vr.prototype,"objectIds",null),c([d()],vr.prototype,"orderByFields",null),c([d({readOnly:!0})],vr.prototype,"querying",null),c([d()],vr.prototype,"relatedRecordsEnabled",void 0),c([d({value:!1})],vr.prototype,"returnGeometry",null),c([d({readOnly:!0})],vr.prototype,"state",null),c([d({readOnly:!0})],vr.prototype,"syncing",null),c([d()],vr.prototype,"timeExtent",null),c([d()],vr.prototype,"where",null),vr=c([O(tve)],vr);const ive=vr;let Gt=class extends La(jye){constructor(e){super(e),this._debounceRefresh=F8(()=>this._refresh()),this._defaultHiddenFields=["CreationDate","Creator","EditDate","Editor","GlobalID"],this._highlights=new wn,this.activeFilters=new we,this.autoRefreshEnabled=!0,this.cellClassNameGenerator=(r,s)=>r.path||null,this.columns=new we,this.dataProvider=async(r,s)=>{const{store:o}=this,{page:a,pageSize:l,sortOrders:u}=r,h=this._sortOrdersToLayerOrderByFields(u);s&&(o?(await o.set({orderByFields:h}),o.state!=="loaded"&&o.state!=="loading"&&await o.load(),s&&s(await o.fetchItems({page:a,pageSize:l}))):s&&s([]))},this.editingEnabled=!1,this.fieldConfigs=null,this.grid=null,this.highlightEnabled=!0,this.itemIdPath="objectId",this.messagesCommon=null,this.messagesURIUtils=null,this.relatedRecordsEnabled=!1,this.store=null,this.tableTemplate=null,this.view=null;const{hiddenFields:i,itemIdPath:n}=this;i.addMany(this._defaultHiddenFields),this._onLayerRefresh=this._onLayerRefresh.bind(this),this._set("store",new ive),this._set("grid",new Ant({itemIdPath:n,viewModel:this}))}initialize(){const e=async()=>{this.messages=await A_("esri/widgets/FeatureTable/t9n/FeatureTable"),this.messagesCommon=await A_("esri/t9n/common"),this.messagesURIUtils=await A_("esri/widgets/support/t9n/uriUtils")};e(),this.handles.add([zP(()=>{e(),this._generateColumns()}),ji(()=>this.highlightIds,"change",i=>this._onHighlightIdsChange(i),{onListenerAdd:()=>{this.highlightIds.forEach(i=>this._highlight(i))},onListenerRemove:()=>{this.highlightIds.forEach(i=>this._unhighlight(i))}}),X(()=>this.layerView,()=>{var i;this._highlights.removeAll(),this.layerView&&this.highlightEnabled&&((i=this.highlightIds)==null||i.forEach(n=>this._highlight(n)))}),X(()=>this.highlightEnabled,()=>{var i;this._highlights.removeAll(),this.highlightEnabled&&((i=this.highlightIds)==null||i.forEach(n=>this._highlight(n)))}),X(()=>this.relatedRecordsEnabled,i=>this.store.relatedRecordsEnabled=i),X(()=>{var i;return(i=this.layer)==null?void 0:i.loaded},i=>i&&this._onLayerLoad()),X(()=>this.store.state,i=>{var n;i==="loaded"&&((n=this.grid)==null||n.scrollToTop())}),X(()=>[this.messages,this.tableTemplate,this.fieldConfigs],()=>{var i;return((i=this.layer)==null?void 0:i.loaded)&&this._generateColumns()}),X(()=>this.editingEnabled,i=>{var n;this.columns.forEach(r=>{"editingEnabled"in r&&(r.editingEnabled=i)}),(n=this.grid)==null||n.onColumnChange()}),X(()=>{var i;return(i=this.layer)==null?void 0:i.definitionExpression},(i,n)=>(i||n)&&this.store.state==="loaded"&&this.reset()),X(()=>this.layer&&"timeExtent"in this.layer&&this.layer.timeExtent,(i,n)=>(i||n)&&!this.timeExtent&&this.store.state==="loaded"&&this.reset()),ji(()=>this.layer,"refresh",i=>this._onLayerRefresh(i))])}destroy(){var e,i;this._resetColumns(),this.handles.removeAll(),this._highlights.removeAll(),this._highlights.destroy(),(e=this.grid)==null||e.destroy(),(i=this.columns)==null||i.destroy(),this.layer=null,this.view=null}get activeSortOrders(){var e;return(e=this.grid)!=null&&e.sortOrders?this.grid.sortOrders.map(({path:i,direction:n})=>({fieldName:i,direction:n})):[]}set attachmentsEnabled(e){this.attachmentsEnabled!==e&&(this._set("attachmentsEnabled",e),this._generateColumns(),this.store.attachmentsEnabled=e)}set filterGeometry(e){if(!this.filterGeometry&&!e)return;const i=this.activeFilters.find(n=>n.type==="geometry");i&&this.activeFilters.remove(i),this._set("filterGeometry",e),this.store.filterGeometry=e,e&&this.activeFilters.add({type:"geometry",geometry:e})}get hiddenFields(){return this._get("hiddenFields")||new we}set hiddenFields(e){Array.isArray(e)?this._set("hiddenFields",new we(e)):this._set("hiddenFields",e)}get highlightOnRowSelectEnabled(){return this.highlightEnabled}set highlightOnRowSelectEnabled(e){this.highlightEnabled=e}set layer(e){var i;this._set("layer",e),(i=this.grid)==null||i.clearSort(),this._resetColumns(),this.store.layer=e,e&&(e.loaded?this._onLayerLoad():e.load()),this.notifyChange("state")}get layerView(){var e;return((e=this.view)==null?void 0:e.allLayerViews.find(i=>i.layer===this.layer))||null}set messages(e){var i;(i=this.grid)==null||i.set("messages",e),this._set("messages",e)}get state(){const{store:e}=this;return e&&e.state!=="disabled"?e.state==="loading"?"loading":e.state==="loaded"?"loaded":"ready":"disabled"}set timeExtent(e){this._set("timeExtent",e),this.store.timeExtent=e}clearHighlights(){this._highlights.removeAll()}clearSelection(){var e;(e=this.grid)==null||e.clearSelection()}async deleteSelection(){const e=this.highlightIds.toArray();if(!(e!=null&&e.length))return;const{deleteFeatureResults:i}=await this.store.deleteRowsByObjectId(e),n=i.filter(r=>!r.error).map(r=>r.objectId);n.length&&(this.deselectRows(n),await this.refresh())}deselectRows(e){const i=this._getStoreItemsFromSelectionParams(e);this.grid.deselectRows(i)}filterBySelection(){const e=this.highlightIds.toArray();e.length&&(this.clearSelectionFilter(),this.store.objectIds=e,this.activeFilters.add({type:"selection",objectIds:e}))}getObjectIdIndex(e){var i;return(i=this.store)==null?void 0:i.getObjectIdIndex(e)}getValue(e,i){var n,r;return(r=(n=this.store.getItemByObjectId(e))==null?void 0:n.feature)==null?void 0:r.attributes[i]}get highlightIds(){return this._get("highlightIds")||new we}set highlightIds(e){Array.isArray(e)?this._set("highlightIds",new we(e)):this._set("highlightIds",e)}async refresh(){return Qy(this._debounceRefresh())}reset(){this.grid.reset()}selectRows(e){const i=this._getStoreItemsFromSelectionParams(e);return this.grid.selectRows(i)}scrollToIndex(e){var i;(i=this.grid)==null||i.scrollToIndex(e)}clearSelectionFilter(){this.store.objectIds=null;const e=this.activeFilters.find(i=>i.type==="selection");e&&this.activeFilters.remove(e)}zoomToSelection(){const{layer:e,view:i}=this,n=this.highlightIds.toArray();if(!e||!i||!n.length)return;const r=e.createQuery();r.objectIds=n,r.returnGeometry=!0,e.queryFeatures(r).then(s=>{i.goTo(s.features).catch(o=>{o.name!=="AbortError"&&console.error(o)})})}async _refresh(){await this.store.refreshLayerInfo();const e=this.highlightIds.toArray();e.length&&(await this.store.verifyFeaturesByObjectId(e)).forEach((i,n)=>{i||this.deselectRows(e[n])}),this.grid.refreshPageCache()}_onLayerLoad(){const e=this.layer.capabilities.query.maxRecordCount;e&&e<this.pageSize&&this.grid&&(this.grid.pageSize=e),this._generateColumns()}_onLayerRefresh(e){this.autoRefreshEnabled&&e.dataChanged&&this.refresh()}_generateColumns(){var n,r;this._resetColumns();const e=[],i=(n=this.tableTemplate)!=null&&n.columnTemplates?this._generateColumnsFromTemplates(this.tableTemplate.columnTemplates):(r=this.fieldConfigs)!=null&&r.length?this._generateColumnsFromConfigs():this._generateDefaultFieldColumns();e.push(...i),this.attachmentsEnabled&&e.push(this._generateDefaultAttachmentColumn()),this.columns.addMany([...e])}_generateColumnsFromTemplates(e){var f;const{editingEnabled:i,grid:n,hiddenFields:r,layer:s,messages:o,messagesCommon:a,messagesURIUtils:l,store:u,tableTemplate:h}=this,p=((f=this.layer)==null?void 0:f.fields)??[];return e.filter(g=>(p||[]).find(v=>"fieldName"in g&&g.fieldName===v.name)||g.type==="group"&&"columnTemplates"in g).map(g=>{if("fieldName"in g){const v=(p||[]).find(P=>g.fieldName===P.name),b=g.visible===!1||g.visible!==!0&&r.includes(v.name),{direction:_,formatFunction:w,initialSortPriority:S,menuConfig:C,textAlign:$}=g,M=h.expressionInfos||null;return new NF({direction:_,editingEnabled:i,expressionInfos:M,field:v,formatFunction:w,grid:n,hidden:b,initialSortPriority:S,layer:s,messages:o,messagesCommon:a,messagesURIUtils:l,menuConfig:C,store:u,template:g,textAlign:$})}if(g.type==="group"&&"columnTemplates"in g){const v=this._generateColumnsFromTemplates(g.columnTemplates),b=g.visible===!1||g.visible!==!0&&r.includes(g.label),{label:_}=g;return new Mnt({header:_,columns:v,hidden:b})}return new ZR({...g})})}_generateColumnsFromConfigs(){var p;const{editingEnabled:e,fieldConfigs:i,grid:n,hiddenFields:r,layer:s,messages:o,messagesCommon:a,messagesURIUtils:l,store:u}=this,h=((p=this.layer)==null?void 0:p.fields)??[];return i.filter(f=>(h||[]).find(g=>f.name===g.name)).map(f=>{const g=f.direction||null,v=f.formatFunction||null,b=f.textAlign||null,_=A(f.initialSortPriority)?f.initialSortPriority:null,w=(h||[]).find($=>f.name===$.name),S=f.visible===!1||f.visible!==!0&&r.includes(w.name),C=f.menuConfig||null;return new NF({config:f,direction:g,editingEnabled:e,field:w,formatFunction:v,grid:n,hidden:S,layer:s,store:u,messages:o,messagesCommon:a,messagesURIUtils:l,menuConfig:C,textAlign:b,initialSortPriority:_})})}_generateDefaultFieldColumns(){var u;const{editingEnabled:e,grid:i,hiddenFields:n,layer:r,messages:s,messagesCommon:o,messagesURIUtils:a,store:l}=this;return(((u=this.layer)==null?void 0:u.fields)??[]).map(h=>{const p=n.includes(h.name);return new NF({editingEnabled:e,field:h,grid:i,hidden:p,layer:r,store:l,messages:s,messagesCommon:o,messagesURIUtils:a})})}_generateDefaultAttachmentColumn(){var e;return new fQe({header:(e=this.messages)==null?void 0:e.attachments})}_sortOrdersToLayerOrderByFields(e){return e&&e.length?e.filter((i,n,r)=>r.map(s=>s.path).indexOf(i.path)===n).filter(({direction:i})=>!!i).map(({direction:i,path:n})=>n+" "+i.toUpperCase()):[]}_highlight(e){this.layerView&&gO(this.layerView)&&this._highlights.add(this.layerView.highlight(e),e)}_unhighlight(e){this._highlights.remove(e)}_getStoreItemsFromSelectionParams(e){const i=[];return(e=e instanceof Array?e:[e]).forEach(n=>{let r=n instanceof en?n:null;const s=r?r.getObjectId():n;if(typeof s=="number"||typeof s=="string"){if(!r){const o=this.store.getItemByObjectId(s);o&&(r=o.feature)}i.push({objectId:s,feature:r})}}),i}_onHighlightIdsChange(e){const{highlightEnabled:i}=this,{added:n,removed:r}=e;i&&(n.forEach(s=>this._highlight(s)),r.forEach(s=>this._unhighlight(s)))}_resetColumns(){this.columns.items.forEach(e=>e.destroy()),this.columns.removeAll()}};c([d({readOnly:!0})],Gt.prototype,"activeFilters",void 0),c([d({readOnly:!0})],Gt.prototype,"activeSortOrders",null),c([d()],Gt.prototype,"attachmentsEnabled",null),c([d()],Gt.prototype,"autoRefreshEnabled",void 0),c([d()],Gt.prototype,"cellClassNameGenerator",void 0),c([d({readOnly:!0})],Gt.prototype,"columns",void 0),c([d()],Gt.prototype,"dataProvider",void 0),c([d()],Gt.prototype,"editingEnabled",void 0),c([d()],Gt.prototype,"fieldConfigs",void 0),c([d()],Gt.prototype,"filterGeometry",null),c([d({readOnly:!0})],Gt.prototype,"grid",void 0),c([d()],Gt.prototype,"hiddenFields",null),c([d()],Gt.prototype,"highlightEnabled",void 0),c([d()],Gt.prototype,"highlightOnRowSelectEnabled",null),c([d({readOnly:!0})],Gt.prototype,"itemIdPath",void 0),c([d()],Gt.prototype,"layer",null),c([d()],Gt.prototype,"layerView",null),c([d()],Gt.prototype,"messages",null),c([d(),bt("esri/t9n/common")],Gt.prototype,"messagesCommon",void 0),c([d(),bt("esri/widgets/support/t9n/uriUtils")],Gt.prototype,"messagesURIUtils",void 0),c([d()],Gt.prototype,"relatedRecordsEnabled",void 0),c([d({readOnly:!0})],Gt.prototype,"state",null),c([d({readOnly:!0,type:ive})],Gt.prototype,"store",void 0),c([d()],Gt.prototype,"tableTemplate",void 0),c([d()],Gt.prototype,"timeExtent",null),c([d()],Gt.prototype,"view",void 0),c([d()],Gt.prototype,"highlightIds",null),Gt=c([O("esri.widgets.FeatureTable.FeatureTableViewModel")],Gt);const Pnt=Gt,rte={header:!0,menu:!0,menuItems:{clearSelection:!0,refreshData:!0,toggleColumns:!0,selectedRecordsShowAllToggle:!0,selectedRecordsShowSelectedToggle:!0,zoomToSelection:!0,deleteSelection:!0},selectionColumn:!0,columnMenus:!0},tf="esri-feature-table",Cv=`${tf}__prompt`,Un={base:tf,header:`${tf}__header`,title:`${tf}__title`,content:`${tf}__content`,loader:`${tf}__loader`,loaderContainer:`${tf}__loader-container`,menuContainer:`${tf}__menu`,menuIcon:"esri-icon-handle-horizontal",menuItemGroupOpenedIcon:"esri-icon-down",menuItemGroupClosedIcon:"esri-icon-right",checkmarkIcon:"esri-icon-check-mark",promptContainer:Cv,promptHeader:`${Cv}__header`,promptHeading:`${Cv}__header__heading`,promptMessage:`${Cv}__message`,promptDivider:`${Cv}__divider`,promptActions:`${Cv}__actions`,widget:"esri-widget"},ste=se.getLogger("esri.widgets.FeatureTable");let xt=class extends La(qt){constructor(e,i){super(e,i),this._prompt=null,this.menu=null,this.menuConfig=null,this.viewModel=new Pnt,this.visibleElements={...rte},this._showDeletePrompt=this._showDeletePrompt.bind(this),this._onDeleteSelectionClick=this._onDeleteSelectionClick.bind(this)}initialize(){var n,r,s;this.handles.add([ji(()=>this.viewModel.columns,"change",()=>this._syncMenuConfig()),ji(()=>this.viewModel.activeFilters,"change",()=>this._syncMenuConfig()),ji(()=>this.highlightIds,"change",o=>{this._syncMenuConfig(),this._onSelectionChange(o)}),X(()=>[this.viewModel.store.querying,this.viewModel.store.syncing,this.editingEnabled],()=>this.scheduleRender()),X(()=>[this.menuConfig,this.editingEnabled],()=>this._syncMenuConfig()),X(()=>this.messages,()=>{var o;this.menu.label=(o=this.messages)==null?void 0:o.options,this._syncMenuConfig()})]),this._set("menu",new Lye({label:(n=this.messages)==null?void 0:n.options,iconClass:Un.menuIcon,...this.menuConfig}));const{attachmentsEnabled:e,relatedRecordsEnabled:i}=this;(s=(r=this.viewModel)==null?void 0:r.store)==null||s.set({attachmentsEnabled:e,relatedRecordsEnabled:i})}loadDependencies(){return Promise.all([q(()=>import("./calcite-scrim-22344ab2.js"),[]),q(()=>import("./calcite-button-f89a4aa3.js"),[]),q(()=>import("./calcite-icon-ee29cf49.js"),[])])}destroy(){var e;this._prompt=null,this.handles.removeAll(),(e=this.menu)==null||e.destroy()}get activeFilters(){return this.viewModel.activeFilters}get activeSortOrders(){return this.viewModel.activeSortOrders}get attachmentsEnabled(){return this.viewModel.attachmentsEnabled}set attachmentsEnabled(e){this.viewModel.attachmentsEnabled=e}get autoRefreshEnabled(){return this.viewModel.autoRefreshEnabled}set autoRefreshEnabled(e){this.viewModel.autoRefreshEnabled=e}get columnReorderingEnabled(){return this.viewModel.columnReorderingEnabled}set columnReorderingEnabled(e){this.viewModel.columnReorderingEnabled=e}get columns(){return this.viewModel.columns}get editingEnabled(){return this.viewModel.editingEnabled}set editingEnabled(e){this.viewModel.editingEnabled=e}get fieldConfigs(){return this.viewModel.fieldConfigs}set fieldConfigs(e){this.viewModel.fieldConfigs=e}get filterGeometry(){return this.viewModel.filterGeometry}set filterGeometry(e){this.viewModel.filterGeometry=e}get grid(){return this.viewModel.grid}get hiddenFields(){return this.viewModel.hiddenFields}set hiddenFields(e){this.viewModel.hiddenFields=e}get highlightEnabled(){return this.viewModel.highlightEnabled}set highlightEnabled(e){this.viewModel.highlightEnabled=e}get highlightIds(){return this.viewModel.highlightIds}set highlightIds(e){this.viewModel.highlightIds=e}get highlightOnRowSelectEnabled(){return this.viewModel.highlightEnabled}set highlightOnRowSelectEnabled(e){this.viewModel.highlightEnabled=e}get label(){var e;return((e=this.messages)==null?void 0:e.widgetLabel)??""}set label(e){this._overrideIfSome("label",e)}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get messages(){return this.viewModel.messages}set messages(e){this.viewModel.messages=e}get messagesCommon(){return this.viewModel.messagesCommon}set messagesCommon(e){this.viewModel.messagesCommon=e}get messagesURIUtils(){return this.viewModel.messagesURIUtils}set messagesURIUtils(e){this.viewModel.messagesURIUtils=e}get multiSortEnabled(){return this.viewModel.multiSortEnabled}set multiSortEnabled(e){this.viewModel.multiSortEnabled=e}get pageSize(){return this.viewModel.pageSize}set pageSize(e){this.viewModel.pageSize=e}get relatedRecordsEnabled(){return this.viewModel.relatedRecordsEnabled}set relatedRecordsEnabled(e){this.viewModel.relatedRecordsEnabled=e}get state(){return this.viewModel.state}get tableTemplate(){return this.viewModel.tableTemplate}set tableTemplate(e){this.viewModel.tableTemplate=e}get timeExtent(){return this.viewModel.timeExtent}set timeExtent(e){this.viewModel.timeExtent=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){var n;const i={...rte,...e};return(n=this.grid)==null||n.set("visibleElements",{...this.grid.visibleElements,selectionColumn:i.selectionColumn,columnMenus:i.columnMenus}),i}clearHighlights(){return dW(ste,"`FeatureTable.clearHighlights` is deprecated in favor of FeatureTable.highlightIds'",{replacement:"FeatureTable.highlightIds",version:"4.25",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-FeatureTable.html#highlightIds"}),this.viewModel.clearHighlights()}clearSelection(){return dW(ste,"`FeatureTable.clearSelection` is deprecated in favor of FeatureTable.highlightIds'",{replacement:"FeatureTable.highlightIds",version:"4.25",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-FeatureTable.html#highlightIds"}),this.viewModel.clearSelection()}clearSelectionFilter(){return this.viewModel.clearSelectionFilter()}deleteSelection(e){return this.highlightIds.length?e?(this._showDeletePrompt(),this.scheduleRender(),Promise.resolve()):this.viewModel.deleteSelection():Promise.resolve()}deselectRows(e){return this.viewModel.deselectRows(e)}filterBySelection(){return this.viewModel.filterBySelection()}findColumn(e){return this.viewModel.findColumn(e)}hideColumn(e){var i;(i=this.grid)==null||i.hideColumn(e),this._syncMenuConfig()}refresh(){return this.viewModel.refresh()}showAllColumns(){return this.viewModel.showAllColumns()}showColumn(e){var i;(i=this.grid)==null||i.showColumn(e),this._syncMenuConfig()}sortColumn(e,i){return this.viewModel.sortColumn(e,i)}selectRows(e){return this.viewModel.selectRows(e)}scrollToIndex(e){return this.viewModel.scrollToIndex(e)}zoomToSelection(){return this.viewModel.zoomToSelection()}render(){var n;const{_prompt:e}=this,i=A(e)?L("calcite-scrim",null,this.renderPrompt(e)):null;return L("div",{bind:this,class:this.classes(Un.base,Un.widget)},this.visibleElements.header?this._renderHeader():null,L("div",{class:Un.content},this.state!=="disabled"&&((n=this.grid)==null?void 0:n.render())),i)}renderPrompt({title:e,message:i,context:n,actions:r}){const s=!!r.secondary,o=L("calcite-button",{appearance:"solid",kind:n==="danger"?"danger":"brand",width:s?"half":"full",onclick:r.primary.action,key:"prompt-primary-button"},r.primary.label),a=s?L("calcite-button",{appearance:"outline",kind:n==="danger"?"danger":"brand",width:"half",onclick:r.secondary.action,key:"prompt-secondary-button"},r.secondary.label):null;return L("div",{class:`${Un.promptContainer}--${n}`},L("div",{class:Un.promptHeader},L("calcite-icon",{icon:"exclamation-mark-triangle"}),L(aR,{class:Un.promptHeading,level:2},e)),L("div",{class:Un.promptMessage},i),L("div",{class:Un.promptDivider}),L("div",{class:Un.promptActions},a,o))}_renderHeader(){return L("div",{key:"header",class:Un.header},this._renderLoader(),this._renderTitle(),this.visibleElements.menu?this._renderMenu():null)}_renderTitle(){return L("div",{class:Un.title,key:"title"},this._getTitle())}_getTitle(){const{grid:e,highlightIds:i,layer:n,messages:r,viewModel:{size:s}}=this;return e&&n?Vr(r.header,{title:n.title,count:s,selected:i.length||0}):""}_renderLoader(){const{state:e,store:i}=this.viewModel,n=e==="loading"||i.syncing||i.querying;return L("div",{class:Un.loaderContainer},n?L("div",{class:Un.loader,key:"loader"}):null)}_renderMenu(){return L("div",{class:Un.menuContainer},this.menu.render())}_onSelectionChange(e){const{added:i,removed:n}=e,r=i.map(o=>this.viewModel.store.getLocalItemByKey(o)||{objectId:o,feature:null,attachments:null,relatedRecords:null}),s=n.map(o=>this.viewModel.store.getLocalItemByKey(o)||{objectId:o,feature:null,attachments:null,relatedRecords:null});this.emit("selection-change",{added:r,removed:s})}_syncMenuConfig(){var e;(e=this.menu)==null||e.set({...this.menuConfig,items:this._getMenuItems()})}_getMenuItems(){var r;const e=(r=this.menuConfig)==null?void 0:r.items,i=this._getDefaultMenuItems(),n=[];return i!=null&&i.length&&n.push(...i),e!=null&&e.length&&n.push(...e),n}_getDefaultMenuItems(){var a,l,u,h;const{highlightIds:e,messages:i,viewModel:n,visibleElements:r}=this,{menuItems:s}=r,o=[];if(s!=null&&s.refreshData&&o.push(new hc({selectionEnabled:!1,label:i==null?void 0:i.refreshData,clickFunction:()=>this.refresh()})),e.length){const p=this._getSelectionFilter();if(s!=null&&s.clearSelection&&o.push(new hc({selectionEnabled:!1,label:i==null?void 0:i.clearSelection,clickFunction:()=>{var f;return(f=this.highlightIds)==null?void 0:f.removeAll()}})),s!=null&&s.zoomToSelection&&this.view&&o.push(new hc({selectionEnabled:!1,label:i==null?void 0:i.zoomToSelection,clickFunction:()=>this.viewModel.zoomToSelection()})),(s==null?void 0:s.selectedRecordsShowSelectedToggle)&&(!p||e.length!==p.objectIds.length)){const f=i.showSelected,g=new hc({selectionEnabled:!1,label:f,clickFunction:()=>{this.filterBySelection(),g.set("label",f)}});o.push(g)}s!=null&&s.deleteSelection&&this.editingEnabled&&((u=(l=(a=this.layer)==null?void 0:a.capabilities)==null?void 0:l.operations)!=null&&u.supportsDelete)&&o.push(new hc({selectionEnabled:!1,label:i.deleteSelection,clickFunction:this._showDeletePrompt}))}if(s!=null&&s.selectedRecordsShowAllToggle&&this._hasSelectionFilter()){const p=i.showAllRecords,f=new hc({selectionEnabled:!1,label:p,clickFunction:()=>{this.clearSelectionFilter(),f.set("label",p)}});o.push(f)}return s!=null&&s.toggleColumns&&o.push(new hc({iconClass:Un.menuItemGroupClosedIcon,label:i==null?void 0:i.toggleColumns,clickFunction:this._toggleMenuItemSelectedIcon,items:(h=n==null?void 0:n.columns)==null?void 0:h.items.map(({header:p,hidden:f,path:g})=>new hc({label:p||g,selected:!f,selectionEnabled:!0,iconClass:Un.checkmarkIcon,clickFunction:()=>this._toggleColumnFromMenuItem(g)}))})),o.length?o:null}_toggleMenuItemSelectedIcon({item:e}){e==null||e.set("iconClass",e!=null&&e.selected?Un.menuItemGroupOpenedIcon:Un.menuItemGroupClosedIcon)}_toggleColumnFromMenuItem(e){var r;const{grid:i,viewModel:n}=this;(r=n.findColumn(e))!=null&&r.hidden?i.showColumn(e):i.hideColumn(e)}_showDeletePrompt(){const{messages:e,messagesCommon:i}=this,n=this.highlightIds.length||0,r=Vr(e.deleteSelectionCount,{count:n});this.menu.open=!1,this._prompt={title:r,message:e.deleteRecordsRemoved,context:"danger",actions:{primary:{label:i.delete,action:this._onDeleteSelectionClick},secondary:{label:e.keepRecords,action:()=>this._prompt=null}}}}async _onDeleteSelectionClick(){await this.viewModel.deleteSelection(),this._prompt=null}_getSelectionFilter(){var e;return(e=this.viewModel.activeFilters)==null?void 0:e.find(i=>i.type==="selection")}_hasSelectionFilter(){return!!this._getSelectionFilter()}};c([d({readOnly:!0})],xt.prototype,"activeFilters",null),c([d({readOnly:!0})],xt.prototype,"activeSortOrders",null),c([d()],xt.prototype,"attachmentsEnabled",null),c([d()],xt.prototype,"autoRefreshEnabled",null),c([d()],xt.prototype,"columnReorderingEnabled",null),c([d({readOnly:!0})],xt.prototype,"columns",null),c([d()],xt.prototype,"editingEnabled",null),c([d()],xt.prototype,"fieldConfigs",null),c([d()],xt.prototype,"filterGeometry",null),c([d({readOnly:!0})],xt.prototype,"grid",null),c([d()],xt.prototype,"hiddenFields",null),c([d()],xt.prototype,"highlightEnabled",null),c([d()],xt.prototype,"highlightIds",null),c([d()],xt.prototype,"highlightOnRowSelectEnabled",null),c([d()],xt.prototype,"label",null),c([d()],xt.prototype,"layer",null),c([d(),bt("esri/widgets/FeatureTable/t9n/FeatureTable")],xt.prototype,"messages",null),c([d(),bt("esri/t9n/common")],xt.prototype,"messagesCommon",null),c([d(),bt("esri/widgets/support/t9n/uriUtils")],xt.prototype,"messagesURIUtils",null),c([d({readOnly:!0})],xt.prototype,"menu",void 0),c([d()],xt.prototype,"menuConfig",void 0),c([d()],xt.prototype,"multiSortEnabled",null),c([d()],xt.prototype,"pageSize",null),c([d()],xt.prototype,"relatedRecordsEnabled",null),c([d({readOnly:!0})],xt.prototype,"state",null),c([d()],xt.prototype,"tableTemplate",null),c([d()],xt.prototype,"timeExtent",null),c([d()],xt.prototype,"view",null),c([d()],xt.prototype,"viewModel",void 0),c([d()],xt.prototype,"visibleElements",void 0),c([st("visibleElements")],xt.prototype,"castVisibleElements",null),xt=c([O("esri.widgets.FeatureTable")],xt);const Rnt=xt;let Lb=class extends Y{constructor(e){super(e),this.digitSeparator=!1,this.dateFormat=null,this.places=null}};c([d()],Lb.prototype,"digitSeparator",void 0),c([d({json:{read:{source:"dateFormat",reader:T$e}}})],Lb.prototype,"dateFormat",void 0),c([d()],Lb.prototype,"places",void 0),Lb=c([O("esri.widgets.FeatureForm.Format")],Lb);const Lnt=Lb;let aa=class extends Y{constructor(e){super(e),this.description=null,this.direction=null,this.formatFunction=null,this.initialSortPriority=null,this.label=null,this.menuConfig=null,this.sortable=!0,this.textAlign="start",this.type=null,this.visible=!0}};c([d()],aa.prototype,"description",void 0),c([d()],aa.prototype,"direction",void 0),c([d()],aa.prototype,"formatFunction",void 0),c([d()],aa.prototype,"initialSortPriority",void 0),c([d()],aa.prototype,"label",void 0),c([d()],aa.prototype,"menuConfig",void 0),c([d()],aa.prototype,"sortable",void 0),c([d()],aa.prototype,"textAlign",void 0),c([d({type:String,json:{read:!1,write:!0}})],aa.prototype,"type",void 0),c([d()],aa.prototype,"visible",void 0),aa=c([O("esri.widgets.FeatureTable.support.ColumnTemplateBase")],aa);const Dnt=aa,Fnt=t=>{let e=class extends t{constructor(){super(...arguments),this.editable=!0,this.hint=null,this.input=null,this.required=!1}};return c([d({type:Boolean,json:{write:!0}})],e.prototype,"editable",void 0),c([d({type:String,json:{write:!0}})],e.prototype,"hint",void 0),c([d({types:Dhe,json:{read:{source:"inputType"},write:{target:"inputType"}}})],e.prototype,"input",void 0),c([d()],e.prototype,"required",void 0),e=c([O("esri.widgets.FeatureTable.support.EditableColumnTemplateMixin")],e),e};let oc=class extends Fnt(Dnt){constructor(e){super(e),this.domain=null,this.editableExpression=null,this.fieldName=null,this.format=null,this.requiredExpression=null,this.type="field",this.valueExpression=null,this.visibilityExpression=null}};c([d({types:_B,json:{read:{reader:yR},write:!0}})],oc.prototype,"domain",void 0),c([d({type:String,json:{write:!0}}),d()],oc.prototype,"editableExpression",void 0),c([d({type:String,json:{write:!0}})],oc.prototype,"fieldName",void 0),c([d({type:Lnt})],oc.prototype,"format",void 0),c([d({type:String,json:{write:!0}})],oc.prototype,"requiredExpression",void 0),c([d({type:String,json:{read:!1,write:!0}})],oc.prototype,"type",void 0),c([d({type:String,json:{write:!0}})],oc.prototype,"valueExpression",void 0),c([d({type:String,json:{write:!0}})],oc.prototype,"visibilityExpression",void 0),oc=c([O("esri.widgets.FeatureTable.support.FieldColumnTemplate")],oc);const ote=oc;var oU;let QS=oU=class extends Y{constructor(t){super(t),this.columnTemplates=[],this.expressionInfos=null}clone(){return new oU({columnTemplates:G(this.columnTemplates),expressionInfos:G(this.expressionInfos)})}};c([d()],QS.prototype,"columnTemplates",void 0),c([d({type:[Lhe],json:{write:!0}})],QS.prototype,"expressionInfos",void 0),QS=oU=c([O("esri.widgets.FeatureTable.support.TableTemplate")],QS);const Nnt=QS;let zl;const znt=async(t,e,i)=>{const n=await Vnt(e);return zl=new Rnt({container:t,view:e,editingEnabled:!1,multiSortEnabled:!0,visibleElements:{selectionColumn:!1},menuConfig:{items:[new hc({label:"Export",iconClass:"esri-icon-download",clickFunction:()=>{Gnt(zl)}})]},tableTemplate:Bnt(n),layer:n}),document.addEventListener("visibilitychange",r=>{if(document.hidden){const s=zl.columns.filter(o=>!o.hidden).map(o=>o.field.name);window.localStorage.setItem("imaps_table_template",JSON.stringify(s))}},!1),await(zl==null?void 0:zl.when()),zl.highlightIds.on("change",async r=>{if(r.added.length){const s=await zl.layer.queryFeatures({where:`OBJECTID = ${r.added[0]}`,outFields:["REID"],returnGeometry:!1});if(s.features.length){const o=e.map.allTables.find(l=>l.title.includes("Condo"));zl.layer;const a=await o.queryFeatures({where:`REID = '${s.features[0].getAttribute("REID")}'`,outFields:["*"],returnGeometry:!1});if(a.features.length){const l=a.features[0].getAttribute("OBJECTID"),u=await JR([l]);u.length&&(a.features[0].geometry=u[0].geometry,i(a.features[0]))}}}}),jnt(zl),zl},jnt=t=>{t.findColumn("REID").width=100,t.findColumn("SITE_ADDRESS").width=130,t.findColumn("PIN_NUM").width=100,t.findColumn("OWNER").width=150,t.refresh(),requestAnimationFrame(()=>{var i,n,r;const e=t.container.querySelector("vaadin-grid");nve(t,e),(r=(n=(i=t.container.parentElement)==null?void 0:i.shadowRoot)==null?void 0:n.querySelector('[role="tabpanel"]'))==null||r.setAttribute("style","height: 100%"),e==null||e.addEventListener("cell-activate",s=>{t.highlightIds.removeAll(),s.detail.model.item.feature,t.highlightIds.add(s.detail.model.item.objectId)})})},Vnt=async t=>{const e=t.map.allTables.find(i=>i.title.includes("Condo"));try{await e.load();const i=new Ph({source:[],fields:e.fields,geometryType:"polygon",spatialReference:t.spatialReference,popupTemplate:e.popupTemplate,objectIdField:e.objectIdField,displayField:e.displayField,id:"feature-table"});return t.map.allTables.add(i),await i.load(),i}catch(i){console.log(i);return}},Unt=t=>t.includes("PIN")?2:t.includes("SITE_ADDRESS")?0:t.includes("OWNER")?1:-1,Bnt=t=>{const e=new Nnt({columnTemplates:[]}),i=JSON.parse(window.localStorage.getItem("imaps_table_template")),n=["OBJECTID","PARCELPK","GlobalID"],r=["SITE_ADDRESS","OWNER","REID","PIN_NUM","PIN_EXT"];return r.forEach(s=>{const o=t.popupTemplate.fieldInfos.find(l=>l.fieldName===s);o.fieldName==="SITE_ADDRESS"&&(o.label="Address");const a=new ote({label:o.label,fieldName:o.fieldName,visible:i?i.includes(o.fieldName):r.includes(o.fieldName),editable:!1,initialSortPriority:Unt(o.fieldName),direction:"asc"});e.columnTemplates.push(a)}),t.popupTemplate.fieldInfos.forEach(s=>{!n.includes(s.fieldName)&&!r.includes(s.fieldName)&&e.columnTemplates.push(new ote({label:s.label,fieldName:s.fieldName,visible:i?i.includes(s.fieldName):r.includes(s.fieldName),editable:!1}))}),e},Hnt=async(t,e)=>{if(e)try{const i=await e.layer.queryFeatures({where:"1=1",returnGeometry:!0});await e.layer.applyEdits({deleteFeatures:i.features}),await e.layer.applyEdits({addFeatures:t}),requestAnimationFrame(()=>{e.refresh()}),nve(e,e.grid._grid)}catch(i){console.log(i)}},nve=(t,e)=>{setTimeout(()=>{var n;const i=t.container.querySelector(".esri-feature-table__title");i&&(i.textContent="Selected Properties: "+((n=e==null?void 0:e.items)==null?void 0:n.length))},100)},Gnt=async t=>{const e=await t.layer.queryFeatures({where:"1=1",outFields:["*"]});let i="";t.tableTemplate.columnTemplates.forEach(a=>{i+=`${a.label},`}),i+=`\r
`,e.features.forEach(a=>{t.tableTemplate.columnTemplates.forEach(l=>{a.attributes[l.fieldName]?l.fieldName.toLowerCase().includes("date")?i+=`"${new Date(a.attributes[l.fieldName]).toDateString()}",`:l.fieldName.toLowerCase().includes("acres")?i+=`"${parseFloat(a.attributes[l.fieldName]).toFixed(2)}",`:i+=`"${a.attributes[l.fieldName]}",`:i+='"",'}),i+=`\r
`});let n=new Date().toISOString();n=n.replaceAll(":","").replaceAll("-","");const r=`imaps_export_${n}.csv`,s=new Blob([i],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");if(o.download!==void 0){const a=URL.createObjectURL(s);o.setAttribute("href",a),o.setAttribute("download",r),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}};function qnt(t){const e=le.useRef(),i=le.useRef(!1),[n,r]=le.useState();return le.useEffect(()=>(i.current||(i.current=!0,znt(e.current,t.view,t.featureSelected).then(s=>{r(s),t.featureTableSet(s)})),()=>{}),[]),le.useEffect(()=>{n&&Hnt(t.condos,n)},[t.condos]),re("div",{ref:e})}const Wnt=gl.memo(qnt);var nt;(function(t){t.AsyncNotEnabled="AsyncNotEnabled",t.ModulesNotSupported="ModulesNotSupported",t.CircularModules="CircularModules",t.NeverReach="NeverReach",t.UnsupportedHashType="UnsupportedHashType",t.InvalidParameter="InvalidParameter",t.UnexpectedToken="UnexpectedToken",t.Unrecognised="Unrecognised",t.UnrecognisedType="UnrecognisedType",t.MaximumCallDepth="MaximumCallDepth",t.BooleanConditionRequired="BooleanConditionRequired",t.TypeNotAllowedInFeature="TypeNotAllowedInFeature",t.KeyMustBeString="KeyMustBeString",t.WrongNumberOfParameters="WrongNumberOfParameters",t.CallNonFunction="CallNonFunction",t.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",t.NoFunctionInDictionary="NoFunctionInDictionary",t.NoFunctionInArray="NoFunctionInArray",t.AssignModuleFunction="AssignModuleFunction",t.LogicExpressionOrAnd="LogicExpressionOrAnd",t.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",t.FuncionNotFound="FunctionNotFound",t.InvalidMemberAccessKey="InvalidMemberAccessKey",t.UnsupportedUnaryOperator="UnsupportUnaryOperator",t.InvalidIdentifier="InvalidIdentifier",t.MemberOfNull="MemberOfNull",t.UnsupportedOperator="UnsupportedOperator",t.Cancelled="Cancelled",t.ModuleAccessorMustBeString="ModuleAccessorMustBeString",t.ModuleExportNotFound="ModuleExportNotFound",t.Immutable="Immutable",t.OutOfBounds="OutOfBounds",t.IllegalResult="IllegalResult",t.FieldNotFound="FieldNotFound",t.PortalRequired="PortalRequired",t.LogicError="LogicError",t.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",t.KeyAccessorMustBeString="KeyAccessorMustBeString",t.WrongSpatialReference="WrongSpatialReference"})(nt||(nt={}));const rve={[nt.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[nt.LogicError]:"Logic error - {reason}",[nt.NeverReach]:"Encountered unreachable logic",[nt.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[nt.ModuleAccessorMustBeString]:"Module accessor must be a string",[nt.ModuleExportNotFound]:"Module has no export with provided identifier",[nt.ModulesNotSupported]:"Current profile does not support modules",[nt.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[nt.FuncionNotFound]:"Function not found",[nt.FieldNotFound]:"Key not found - {key}",[nt.CircularModules]:"Circular module dependencies are not allowed",[nt.Cancelled]:"Execution cancelled",[nt.UnsupportedHashType]:"Type not supported in hash function",[nt.IllegalResult]:"Value is not a supported return type",[nt.PortalRequired]:"Portal is required",[nt.InvalidParameter]:"Invalid parameter",[nt.WrongNumberOfParameters]:"Call with wrong number of parameters",[nt.Unrecognised]:"Unrecognised code structure",[nt.UnrecognisedType]:"Unrecognised type",[nt.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[nt.BooleanConditionRequired]:"Conditions must use booleans",[nt.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[nt.NoFunctionInArray]:"Arrays cannot contain functions.",[nt.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[nt.KeyAccessorMustBeString]:"Accessor must be a string",[nt.KeyMustBeString]:"Object keys must be a string",[nt.Immutable]:"Object is immutable",[nt.InvalidParameter]:"Invalid parameter",[nt.UnexpectedToken]:"Unexpected token",[nt.MemberOfNull]:"Cannot access property of null object",[nt.MaximumCallDepth]:"Exceeded maximum function depth",[nt.OutOfBounds]:"Out of bounds",[nt.InvalidIdentifier]:"Identifier not recognised",[nt.FuncionNotFound]:"Function not found",[nt.CallNonFunction]:"Expression is not a function",[nt.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[nt.AssignModuleFunction]:"Cannot assign function to module variable",[nt.UnsupportedUnaryOperator]:"Unsupported unary operator",[nt.UnsupportedOperator]:"Unsupported operator",[nt.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[nt.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&"};let Jnt=class extends Error{constructor(...e){super(...e)}},ate=class sve extends Jnt{constructor(e,i){super(cH(i)+e.message,{cause:e}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,sve),i&&i.loc&&(this.loc=i.loc)}},hSt=class ove extends Error{constructor(e,i,n,r){super("Execution error - "+cH(n)+y1(rve[i],r)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,ove),n&&n.loc&&(this.loc=n.loc)}};function cH(t){var e,i;return t&&t.loc?`Line : ${(e=t.loc.start)==null?void 0:e.line}, ${(i=t.loc.start)==null?void 0:i.column}: `:""}let pSt=class ave extends Error{constructor(e,i,n,r){super("Compilation error - "+cH(n)+y1(rve[i],r)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,ave),n&&n.loc&&(this.loc=n.loc)}},fSt=class lve extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,lve)}};function y1(t,e){try{if(!e)return t;for(const i in e){let n=e[i];n||(n=""),t=t.replace("{"+i+"}",e[i])}}catch{}return t}function mSt(t,e,i){return i.declaredRootClass==="esri.arcade.arcadeexecutionerror"||i.declaredRootClass==="esri.arcade.arcadecompilationerror"?i.loc===null&&e&&e.loc?new ate(i,{cause:i}):i:(i.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||i.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||i.declaredRootClass,e&&e.loc?new ate(i,{cause:i}):i)}var GO;(function(t){t.UnrecognisedUri="UnrecognisedUri",t.UnsupportedUriProtocol="UnsupportedUriProtocol"})(GO||(GO={}));const Ynt={[GO.UnrecognisedUri]:"Unrecognised uri - {uri}",[GO.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let gSt=class cve extends Error{constructor(e,i){super(y1(Ynt[e],i)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,cve)}},gf=class{};var qO;gf.instance=new Nc("Etc/UTC"),function(t){t.TimeZoneNotRecognised="TimeZoneNotRecognised"}(qO||(qO={}));const Znt={[qO.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};let Knt=class uve extends Error{constructor(e,i){super(y1(Znt[e],i)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,uve)}},s5=class er{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,i=1,n=1,r=0,s=0,o=0,a=0,l){if(isNaN(e)||isNaN(i)||isNaN(n)||isNaN(r)||isNaN(s)||isNaN(o)||isNaN(a))return null;let u=0;const h=Oe.local(e,i).daysInMonth;n<1&&(u=n-1,n=1),n>h&&(u=n-h,n=h);let p=0;i>12?(p=i-12,i=12):i<1&&(p=i-1,i=1);let f=0;s>59?(f=s-59,s=59):s<0&&(f=s,s=0);let g=0;o>59?(g=o-59,o=59):o<0&&(g=o,o=0);let v=0;a>999?(v=a-999,a=999):a<0&&(v=a,a=0);let b=Oe.fromObject({day:n,year:e,month:i,hour:r,minute:s,second:o,millisecond:a},{zone:xk(l)});return p!==0&&(b=b.plus({months:p})),u!==0&&(b=b.plus({days:u})),f!==0&&(b=b.plus({minutes:f})),g!==0&&(b=b.plus({seconds:g})),v!==0&&(b=b.plus({milliseconds:v})),new er(b)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,i){const n=xk(i);return e.isUnknownTimeZone||n===gf.instance?er.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,n):new er(e._date.setZone(i))}static dateJSToArcadeDate(e){return new er(Oe.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,i="system"){return new er(Oe.fromJSDate(e,{zone:i}))}static unknownEpochToArcadeDate(e){return new er(Oe.fromMillis(e,{zone:gf.instance}))}static unknownDateJSToArcadeDate(e){return new er(Oe.fromMillis(e.getTime(),{zone:gf.instance}))}static epochToArcadeDate(e,i="system"){return new er(Oe.fromMillis(e,{zone:i}))}static dateTimeToArcadeDate(e){return new er(e)}changeTimeZone(e){const i=xk(e);return er.dateTimeToArcadeDate(this._date.setZone(i))}static dateTimeAndZoneToArcadeDate(e,i){const n=xk(i);return e.zone===gf.instance||n===gf.instance?er.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,n):new er(e.setZone(n))}static nowToArcadeDate(e){return new er(Oe.fromJSDate(new Date,{zone:e}))}static nowUTCToArcadeDate(){return new er(Oe.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===er.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===gf.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";const e=this.zone;return e.type==="fixed"?e.fixed===0?"utc":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new er(this._date.plus(e))}diff(e,i="milliseconds"){return this._date.diff(e._date,i)[i]}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toFormat(e,i){return this._date.toFormat(e,i)}toJSDate(){return this._date.toJSDate()}toSQLString(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new er(this._date.toUTC())}toLocal(){return new er(this._date.toLocal())}toString(){return this.toISOString(!0)}};function xk(t){if(t instanceof u1)return t;if(t.toLowerCase()==="system")return"system";if(t.toLowerCase()==="utc")return"utc";if(t.toLowerCase()==="unknown")return gf.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(t)){const i=Gr.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(i)return i}const e=Nc.create(t);if(!e.isValid)throw new Knt(qO.TimeZoneNotRecognised);return e}let Xnt=class{constructor(e=[]){this._elements=e}length(){return this._elements.length}get(e){return this._elements[e]}toArray(){const e=[];for(let i=0;i<this.length();i++)e.push(this.get(i));return e}},GE=null;function Qnt(t,e,i,n={}){const r=e.elementType,s="value",o=r.type==="array"?[{name:s,type:r.type,elementType:r.elementType}]:r.type==="dictionary"?[{name:s,type:r.type,properties:r.properties}]:[{name:s,type:r.type}];return new Xnt(t.map(a=>{const l={};return uH(l,o,{[s]:a},i,n),l[s]}))}function ert(t,e,i={}){const n=t instanceof ZI?new Ph({source:t.features,geometryType:t.geometryType,fields:t.fields,spatialReference:t.spatialReference}):t;return e.constructFeatureSet(n,i.spatialReference,null,!0,i.lruCache,i.interceptor)}function trt(t,e,i={}){const{spatialReference:n,interceptor:r,lruCache:s}=i;return typeof t=="string"?e.createFeatureSetCollectionFromService(t,n,s,r):e.createFeatureSetCollectionFromMap(t,n,s,r)}function irt(t,e,i,n={}){const r={};return uH(r,e.properties,t,i,n),new GE.Dictionary(r)}function uH(t,e,i,n,r={}){var o,a;const s={};for(const l of Object.keys(i))s[l.toLowerCase()]=i[l];for(const l of e){const u=l.name.toLowerCase();if(r.variablesPreProcessed)t[u]=s[u];else switch(l.type){case"array":{const h=s[u];t[u]=Qnt(h,l,n,r);break}case"feature":{const h=s[u];t[u]=h==null?null:GE.Feature.createFromGraphic(h,r==null?void 0:r.timeReference);break}case"featureSet":{const h=s[u];t[u]=n?ert(h,n,r):null;break}case"featureSetCollection":{const h=s[u];t[u]=n?trt(h,n,r):null;break}case"dictionary":{const h=s[u];t[u]=irt(h,l,n,r);break}case"date":{const h=s[u];t[u]=h?h instanceof s5?h:(o=r==null?void 0:r.timeReference)!=null&&o.timeZone?s5.dateJSAndZoneToArcadeDate(h,(a=r==null?void 0:r.timeReference)==null?void 0:a.timeZone):s5.dateJSToArcadeDate(h):null;break}case"geometry":case"boolean":case"text":case"number":t[u]=s[u]}}}function dve(t,e){for(const i of t)e.push(i),i.type==="dictionary"&&dve(i.properties,e);return e}function lte(t,e,i,n,r){const{spatialReference:s,interceptor:o,lruCache:a,console:l,abortSignal:u,timeReference:h,services:p={portal:zi.getDefault()}}=i,f={vars:{},spatialReference:s,interceptor:o,timeReference:h,lrucache:a,useAsync:r,services:p,console:l,abortSignal:u};return e&&uH(f.vars,t.variables,e,n,i),f}function WO(t,e){switch(e.getArcadeType(t)){case"number":case"text":case"boolean":case"point":case"polygon":case"polyline":case"multipoint":case"extent":return t;case"date":return t.toJSDate();case"feature":{const i=(t.type,t),n="geometry"in i?i.geometry():null,r="readAttributes"in i?i.readAttributes():i.attributes;return new en({geometry:n,attributes:r})}case"dictionary":{const i=t,n=i.attributes,r={};for(const s of Object.keys(n))r[s]=WO(i.field(s),e);return r}case"array":return("toArray"in t?t.toArray():t).map(i=>WO(i,e))}return t}async function nrt(t,e,i={}){GE||(GE=await Rc());const{arcade:n,arcadeUtils:r}=GE,{loadScriptDependencies:s,referencesMember:o,scriptIsAsync:a}=n,l=dve(e.variables,[]),u=l.filter(C=>C.type==="featureSet"||C.type==="featureSetCollection").map(C=>C.name.toLowerCase()),h=n.parseScript(t,u);if(!h)throw new N("arcade:invalid-script","Unable to create SyntaxTree");const p=r.extractFieldNames(h),f=n.scriptTouchesGeometry(h),g=l.map(C=>C.name.toLowerCase()).filter(C=>o(h,C)),v=a(h,u);await s(h,v,u);const b={vars:{},spatialReference:null,useAsync:v};for(const C of g)b.vars[C]="any";const{lruCache:_}=i,w=n.compileScript(h,b),S=n.featureSetUtils();return{execute:(C,$={})=>{if(v)throw new N("arcade:invalid-execution-mode","Cannot execute the script in synchronous mode");const M=w(lte(e,C,{lruCache:_,...$},S,v));return $.rawOutput?M:WO(M,r)},executeAsync:async(C,$={})=>{const M=await w(lte(e,C,{lruCache:_,...$},S,v));return $.rawOutput?M:WO(M,r)},isAsync:v,variablesUsed:g,fieldsUsed:p,geometryUsed:f,syntaxTree:h}}const rrt=[{group:{title:"Electoral",layers:["Precincts","US House of Representatives Districts","NC House of Representatives Districts","NC Senate Districts","School Board Districts","Board of Commissioners Districts","Superior Court Districts","Raleigh City Council","Morrisville Town Council Districts"]}},{group:{title:"Environmental",layers:["Floodplain","Soils","Critical Watersheds","Water Supply Watersheds"]}},{group:{title:"Planning",layers:["Angier Zoning","Apex Zoning","Cary Zoning","County Zoning","Fuquay-Varina Zoning","Holly Springs Zoning","Morrisville Zoning","Knightdale Zoning","Rolesville Zoning","Wake Forest Zoning","Wendell Zoning","Zebulon Zoning","Corporate Limits","Planning Jurisdictions","Subdivisions","Development Plans"]}},{group:{title:"Public Safety",layers:["Raleigh Police Districts","Sheriff Zones","Fire Insurance Districts","Fire Response Zones","EMS Franchise Districts","EMS Response Zones","Garner Police Beats"]}},{group:{title:"Solid Waste",layers:["Cary Collection Routes","Raleigh Solid Waste Collection Routes"]}}],hve=[{name:"mailing-address",title:"mailing-address",expression:`When(
            IsEmpty($feature.ADDR3),$feature.ADDR1 + 
            TextFormatting.NewLine + 
            $feature.ADDR2,$feature.ADDR1 + 
            TextFormatting.NewLine + 
            $feature.ADDR2 + 
            TextFormatting.NewLine + 
            $feature.ADDR3)`},{name:"site-address",title:"site-address",expression:`When(
            $feature.STMISC == '1/2', 
            replace($feature.SITE_ADDRESS, ' ', ' 1/2 ', false), 
            $feature.SITE_ADDRESS
        )`},{name:"property-values",title:"property-values",expression:`"Building Value"+TextFormatting.NewLine+
        "$"+$feature.BLDG_VAL+TextFormatting.NewLine+
        "Land Value"+TextFormatting.NewLine+
        "$"+$feature.LAND_VAL+TextFormatting.NewLine+
        "Total Value"+TextFormatting.NewLine+
        "$"+$feature.TOTAL_VALUE_ASSD`},{name:"pin",title:"PIN",expression:`var num = $feature.PIN_NUM;
        var ext = $feature.PIN_EXT;
        return When(ext == '000',num,num+' '+ext);`},{name:"build_val",title:"Building Value",expression:`var value = $feature.BLDG_VAL;
        When(IsEmpty(value),'--', '$'+Text(value, '#,###'));`},{name:"land_val",title:"Land Value",expression:`var value = $feature.LAND_VAL;
        When(IsEmpty(value),'--', '$'+Text(value, '#,###'));`},{name:"total_val",title:"Total Value",expression:`var value = $feature.TOTAL_VALUE_ASSD;
        When(IsEmpty(value),'--', '$'+Text(value, '#,###'));`},{name:"sale_price",title:"Sale Price",expression:"var value = $feature.TOTSALPRICE;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));"},{name:"city",title:"City",expression:"var city = $feature.CITY_DECODE;When(IsEmpty(city),'', Proper(city));"},{name:"township",title:"Township",expression:"var ts = $feature.TOWNSHIP_DECODE;When(IsEmpty(ts),'', Proper(ts));"},{name:"jurisdiction",title:"Jurisdiction",expression:`var juris = $feature.PLANNING_JURISDICTION;When(" +
        juris == 'RA', 'Raleigh',
        juris == 'CA', 'Cary',
        juris == 'AP', 'Apex',
        juris == 'AN', 'Angier',
        juris == 'CL', 'Clayton',
        juris == 'DU', 'Durham',
        juris == 'FV', 'Fuquay-Varina',
        juris == 'GA', 'Garner',
        juris == 'HS', 'Holly Springs',
        juris == 'KN', 'Knightdale',
        juris == 'MO', 'Morrisville',
        juris == 'RO', 'Rolesville',
        juris == 'WF', 'Wake Forest',
        juris == 'WE', 'Wendell',
        juris == 'ZB', 'Zebulon',
        juris == 'WC', 'Wake County',
        " '');`},{name:"general",title:"general",expression:`"PIN"+
        TextFormatting.NewLine+
        $feature.PIN_NUM+" "+
        $feature.PIN_EXT+
        TextFormatting.NewLine+
        "REID"+
        TextFormatting.NewLine+
        $feature.REID+
        TextFormatting.NewLine+
        "City"+
        TextFormatting.NewLine+
        Proper($feature.CITY_DECODE)+
        TextFormatting.NewLine+
        "Jurisdiction"+
        TextFormatting.NewLine+' +
        $feature.PLANNING_JURISDICTION+
        TextFormatting.NewLine+"Township"+
        TextFormatting.NewLine+Proper($feature.TOWNSHIP_DECODE)+
        "Map Name"+TextFormatting.NewLine+
        $feature.MAP_NAME+
        TextFormatting.NewLine+
        "Land Class"+TextFormatting.NewLine+
        Proper($feature.LAND_CLASS_DECODE)`}],srt=le.lazy(()=>q(()=>import("./Services-2b03730e.js"),["assets/Services-2b03730e.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js"])),ort=le.lazy(()=>q(()=>import("./AddressTable-604b8382.js"),["assets/AddressTable-604b8382.js","assets/AddressTable-2ab09ec7.css"])),cte=le.lazy(()=>q(()=>import("./NextPropertyButton-d52c4df5.js"),[])),rL=async(t,e)=>await(await nrt(t,{variables:[{name:"$feature",type:"feature"}]})).executeAsync({$feature:e}),Kf=(t,e)=>{const i=document.createElement("calcite-button");return i.setAttribute("scale","m"),i.setAttribute("width","full"),i.setAttribute("appearance","outline"),i.setAttribute("icon-start",t),i.setAttribute("rel","noreferrer"),i.textContent=e,i},art=()=>new Em({outFields:["*"],creator:async t=>{const e=document.createElement("div");e.setAttribute("style","display: flex;flex-direction: row;justify-content: space-around;");const i=await rL(`var portal = Portal("https://ral.maps.arcgis.com"); 
      if ($feature.CITY_DECODE == "RALEIGH - DURHAM COUNTY") { 
        var fs = FeatureSetByPortalItem(portal, "ed698c7ae43c4394b517990b1922aaba"); 
        var f= First(Filter(fs,"SITE_ADDRE = '" + $feature.SITE_ADDRESS + "'"));
        return Concatenate("https://maps.durhamnc.gov/?pid=",f.PARCEL_ID);}`,t.graphic);if(i){const n=Kf("home","Durham County");n.onclick=()=>{window.open(i,"durham")},n.textContent="Durham County",e.append(n)}return e}}),lrt=()=>new Em({outFields:["OBJECTID","REID"],creator:crt}),crt=async t=>{var i,n,r;const e=document.createElement("div");if(e.setAttribute("style","display: flex;flex-direction: row;justify-content: space-around;"),(i=t.graphic.getAttribute("CITY_DECODE"))!=null&&i.includes("DURHAM COUNTY")){const s=Kf("file-text","Deeds");return s.onclick=()=>{window.open(`https://rodweb.dconc.gov/web/web/integration/search?field_BookPageID_DOT_Volume=${t.graphic.getAttribute("DEED_BOOK")}&field_BookPageID_DOT_Page=${t.graphic.getAttribute("DEED_PAGE")}`,"deedwindow")},e.append(s),e}else{const s=await t.graphic.layer.queryRelatedFeatures({relationshipId:(n=t.graphic.layer.relationships.find(l=>l.name==="CONDO_BOOKS"))==null?void 0:n.id,objectIds:[t.graphic.getAttribute("OBJECTID")],outFields:["BOM_DOC_NUM","DEED_DOC_NUM"]}),o=s[t.graphic.getAttribute("OBJECTID")].features[0].getAttribute("DEED_DOC_NUM"),a=s[t.graphic.getAttribute("OBJECTID")].features[0].getAttribute("BOM_DOC_NUM");if(!((r=t.graphic.getAttribute("CITY_DECODE"))!=null&&r.includes("DURHAM COUNTY"))||!t.graphic.getAttribute("CITY_DECODE")){if(o){const l=Kf("file-text","Deeds");l.onclick=()=>{window.open("https://rodcrpi.wakegov.com/booksweb/pdfview.aspx?docid="+o+"&RecordDate=","deedwindow")},e.append(l)}if(a){const l=Kf("map","Book of Maps");l.onclick=()=>{window.open("https://rodcrpi.wakegov.com/booksweb/pdfview.aspx?docid="+a+"&RecordDate=","bomwindow")},e.append(l)}}return e}},urt=t=>new Em({outFields:["PIN_NUM"],creator:e=>drt(e,t)}),drt=async(t,e)=>{let i=e.map.allLayers.find(s=>{var o;return(o=s==null?void 0:s.title)==null?void 0:o.includes("Wells")});i||(i=new Ph({portalItem:{id:"ef42e9e1d1eb4689bf90b592c2f6c419"}}));let n=await i.queryFeatures({where:`PIN_NUM = '${t.graphic.attributes.PIN_NUM}'`,returnGeometry:!1});const r=document.createElement("div");if(r.setAttribute("style","display: flex;flex-direction: row;justify-content: space-around;"),n.features.length){const s=n.features[0].getAttribute("PIN_NUM"),o=Kf("link","Wells");o.onclick=()=>{window.open("https://maps.wakegov.com/water-analysis/index.html#/?pin="+s,"wells")},r.append(o)}if(i=new Ph({portalItem:{id:"bb3eb1f6cc774bdda560554381a4c06f"}}),n=await i.queryFeatures({where:`PIN_NUM = '${t.graphic.attributes.PIN_NUM}'`,returnGeometry:!1}),n.features.length){const s=n.features[0].getAttribute("PIN_NUM"),o=Kf("link","Septic");o.onclick=()=>{window.open("https://maps.wakegov.com/septic/index.html#/?pin="+s,"septic")},r.append(o)}return r},hrt=()=>new Em({outFields:["*"],creator:async t=>{const e=document.createElement("div");e.setAttribute("style","display: flex;flex-direction: row;justify-content: space-around;");const i=Kf("link","Google Maps");i.onclick=()=>{const s=t.graphic.geometry.centroid.latitude,o=t.graphic.geometry.centroid.longitude,a=`https://www.google.com/maps/@${s-.0006721930485},${o-196467158e-13},68a,35y,49.52t/data=!3m1!1e3`;window.open(a,"googlewindow")},e.append(i);const n=Kf("home","Tax Page"),r=await rL(`var portal = Portal("https://ral.maps.arcgis.com"); 
      if ($feature.CITY_DECODE == "RALEIGH - DURHAM COUNTY") { 
        var fs = FeatureSetByPortalItem(portal, "ed698c7ae43c4394b517990b1922aaba"); 
        var f= First(Filter(fs,"SITE_ADDRE = '" + $feature.SITE_ADDRESS + "'"));
        return Concatenate("https://property.spatialest.com/nc/durham/#/property/",f.PARCEL_ID);
      } else {
        return Concatenate("https://services.wake.gov/realestate/Account.asp?id=", $feature.REID);
      }`,t.graphic);return n.onclick=()=>{window.open(r,"taxwindow")},n.textContent="Tax Page",e.append(n),e}}),prt=async t=>{const e=await rL(`var portal = Portal("https://ral.maps.arcgis.com"); 
    if ($feature.CITY_DECODE == "RALEIGH - DURHAM COUNTY") { 
      var fs = FeatureSetByPortalItem(portal, "ed698c7ae43c4394b517990b1922aaba"); 
      var f= First(Filter(fs,"SITE_ADDRE = '" + $feature.SITE_ADDRESS + "'"));
      return Concatenate("https://image-cdn.spatialest.com/image/durham-images/lrg/",f.PARCEL_ID,".JPG");}`,t),i=new Request(e);try{if((await fetch(i)).ok)return e}catch{console.log("no photo available")}},frt=t=>new Em({outFields:["*"],creator:e=>{const i=document.createElement("service-accordion");return i!=null&&i.hasChildNodes()||Bw(i).render(re(le.Suspense,{fallback:"",children:re(srt,{view:t,graphic:e.graphic})})),i.setAttribute("selection-mode","single"),i.setAttribute("icon-type","chevron"),rrt.forEach(n=>{const r=document.createElement("calcite-accordion-item");r.setAttribute("item-title",n.group.title),i.append(r)}),i}}),mrt=(t,e,i,n)=>new Em({outFields:["*"],creator:async r=>{var a;const s=document.createElement("div"),o=(a=hve.find(l=>l.title==="site-address"))==null?void 0:a.expression;if(o){const l=await rL(o,e),u=Bw(s);n&&u.render(qe("div",{className:"feature-title",children:[i.length>1&&re(le.Suspense,{fallback:"",children:re(cte,{view:t,icon:"caret-left",text:"Previous",featureTable:n})}),re("h2",{children:l}),re(le.Suspense,{fallback:"",children:i.length>1&&re(cte,{view:t,icon:"caret-right",text:"Next",featureTable:n})})]}))}return s}}),grt=t=>new Em({outFields:["*"],creator:e=>{const i=document.createElement("div");i.setAttribute("style","max-height: 500px;min-height: 100px");const n=document.createElement("h2");n.textContent="Addresses",i.append(n);const r=document.createElement("div");return i.append(r),t.graphics.removeMany(t.graphics.filter(s=>s.getAttribute("type")==="address")),r!=null&&r.hasChildNodes()||Bw(r).render(re(le.Suspense,{fallback:"",children:re(ort,{view:t,property:e.graphic})})),i}}),pve=(t,e,i,n,r)=>new Cm({expressionInfos:hve,fieldInfos:yrt(e).map(o=>({fieldName:o.fieldName,label:o.label,visible:["SITE_ADDRESS","OWNER","PIN_NUM","PIN_EXT","REID"].includes(o.fieldName)})),content:[mrt(t,i,n,r),art(),hrt(),urt(t),{type:"text",text:"<h2>General</h1>"},{type:"fields",fieldInfos:[{fieldName:"expression/pin",label:"PIN"},{fieldName:"REID",label:"REID"},{fieldName:"expression/city",label:"City"},{fieldName:"expression/jurisdiction",label:"Jurisdiction"},{fieldName:"expression/township",label:"Township"},{fieldName:"MAP_NAME",label:"Map Name"},{fieldName:"LAND_CLASS_DECODE",label:"Land Class"}]},{type:"text",text:"<h2>Owner</h1>"},{type:"text",text:"{OWNER}<br/>{expression/mailing-address}"},{type:"text",text:"<h2>Valuation</h1>"},{type:"fields",fieldInfos:[{fieldName:"expression/build_val"},{fieldName:"expression/land_val"},{fieldName:"expression/total_val"},{fieldName:"BILLING_CLASS_DECODE",label:"Billing Class"}]},{type:"text",text:"<h2>Last Sale</h1>"},{type:"fields",fieldInfos:[{fieldName:"SALE_DATE",format:{dateFormat:"short-date"},label:"Date Sold"},{fieldName:"expression/sale_price"}]},{type:"text",text:"<h2>Deeds</h1>"},{type:"fields",fieldInfos:[{fieldName:"DEED_BOOK",label:"Book"},{fieldName:"DEED_PAGE",label:"Page"},{fieldName:"DEED_DATE",format:{dateFormat:"short-date"},label:"Deed Date"},{fieldName:"DEED_ACRES",format:{places:2},label:"Deed Acres"},{fieldName:"PROPDESC",label:"Property Description"}]},lrt(),i.getAttribute("HEATEDAREA")?{type:"text",text:"<h2>Building</h1>"}:{type:"text",text:""},i.getAttribute("HEATEDAREA")?{type:"fields",fieldInfos:[{fieldName:"HEATEDAREA",format:{digitSeparator:!0},label:"Heated Area"},{fieldName:"YEAR_BUILT",format:{digitSeparator:!1},label:"Year Built"},{fieldName:"DESIGN_STYLE_DECODE",label:"Design/Style"},{fieldName:"TYPE_USE_DECODE",label:"Use Type"},{fieldName:"TOTSTRUCTS",label:"Total Structures"},{fieldName:"TOTUNITS",label:"Total Units"}]}:{type:"text",text:""},{type:"media",mediaInfos:[]},{type:"text",text:"<h2>Services</h1>"},frt(t),grt(t)]}),yrt=t=>{let e=[];t.fields.forEach(a=>{e.push(new Yw({fieldName:a.name,label:a.alias,visible:["SITE_ADDRESS","OWNER","PIN_NUM","PIN_EXT","REID"].includes(a.name)}))});const i=e.find(a=>a.fieldName==="PIN_EXT"),n=e.find(a=>a.fieldName==="PIN_NUM"),r=e.find(a=>a.fieldName==="REID"),s=e.find(a=>a.fieldName==="OWNER"),o=e.find(a=>a.fieldName==="SITE_ADDRESS");return e=e.filter(a=>!["SITE_ADDRESS","OWNER","PIN_NUM","PIN_EXT","REID"].includes(a.fieldName)),e.unshift(i),e.unshift(n),e.unshift(r),e.unshift(s),e.unshift(o),e},vrt=async t=>{var s,o;const e=(s=t.layer)==null?void 0:s.relationships.find(a=>a.name==="CONDO_PHOTOS"),i=[],n=t.layer,r=await(n==null?void 0:n.queryRelatedFeatures({relationshipId:e==null?void 0:e.id,objectIds:[t.getAttribute("OBJECTID")],outFields:["*"],where:"STATUS = 'A'"}));for(const a in r)t.setAttribute("OBJECTID",a),r[a].features.reverse().forEach(l=>{i.push({title:"",type:"image",caption:"",value:{sourceURL:`https://services.wake.gov/realestate/photos/mvideo/${l.getAttribute("IMAGEDIR")}/${l.getAttribute("IMAGENAME")}`}})});if((o=t.getAttribute("CITY_DECODE"))!=null&&o.includes("DURHAM COUNTY")){const a=await prt(t);i.push({title:"",type:"image",caption:"",value:{sourceURL:a}})}return i},brt=(t,e)=>new Tfe({container:t,view:e}),_rt=async(t,e,i,n)=>{const r=await vrt(e);e.popupTemplate=pve(t.view,e.layer,e,i,n);const s=e.popupTemplate.content.find(o=>(o==null?void 0:o.type)==="media");s.mediaInfos=r,t&&(t.graphic=e),requestAnimationFrame(()=>{var o,a;(a=(o=document.querySelector(".esri-feature"))==null?void 0:o.parentElement)==null||a.scrollTo({top:0,behavior:"smooth"})})};function wrt(t){const e=le.useRef(!1),i=le.useRef(null),[n,r]=le.useState();return le.useEffect(()=>(e.current||(e.current=!0,r(brt(i.current,t.view))),()=>{n&&(n==null||n.destroy())}),[]),le.useEffect(()=>{var a;let s="";if(n&&t.feature){s=t.feature.getAttribute("PIN_NUM");const l=n==null?void 0:n.view.map.allTables.find(u=>u.title.includes("Condo"));t.feature.layer=l,t.feature.popupTemplate=pve(n==null?void 0:n.view,l,t.feature,t.condos,t.featureTable),_rt(n,t.feature,t.condos,t.featureTable)}else n&&(n.graphic=null);const o=new URL(window.location);o.searchParams.delete("pin"),s!==""&&o.searchParams.set("pin",s),((a=window.history.state)==null?void 0:a.pins)!==s&&window.history.pushState({pins:s},"",o)},[t.feature,t.featureTable]),re("div",{ref:i})}const xrt=gl.memo(wrt),Srt=async(t,e)=>{const i=e.map.allLayers.find(s=>s.title.includes("Property")&&s.type==="feature"),n=e.map.allTables.find(s=>s.title.includes("Condo")&&s.type==="feature");i.outFields=["PIN_NUM","OBJECTID"];const r=await(i==null?void 0:i.queryFeatures({geometry:t,returnGeometry:!0,outFields:["PIN_NUM","OBJECTID"]}));if(r.features.length)return await Ert(e,r,i,n)},Ert=async(t,e,i,n)=>await Crt(i,e,n),Crt=async(t,e,i)=>{try{const n=e.features.map(o=>o.getObjectId()),r=await t.queryRelatedFeatures({objectIds:n,relationshipId:Irt(t,"PROPERTY_CONDO"),outFields:["*"]}),s=new ZI({features:[]});for(let[o]of Object.entries(r))r[o].features.forEach(a=>{var l;a.geometry=(l=e.features.find(u=>u.getObjectId().toString()===o))==null?void 0:l.geometry,a.layer=i,s.features.push(a)});return s}catch(n){console.log(n)}},Irt=(t,e)=>{var i;return(i=t.relationships.find(n=>n.name===e))==null?void 0:i.id},Trt=t=>{t.graphics.removeMany(t.graphics.filter(e=>e.getAttribute("type")==="address"))},krt={title:"Property Search Tips",tips:[{title:"Click and Hold to Select",text:"Click and hold on a property to select it from the map."},{title:"Search Categories",text:"Select a search category to get more results as you type"},{title:"New Layout",text:"The property information is now displayed in an easier to read layout.  Deeds, photos and service have all been moved into a single display."},{title:"Display Additional Columns",text:"In the new version, you can now display more columns on the property list. "}]},$rt=t=>{const[e,i]=le.useState([]),n=le.useRef(),[r,s]=le.useState(),o=le.useRef(!1),[a,l]=le.useState(!0),[u,h]=le.useState(!1),[p,f]=le.useState("list"),[g,v]=le.useState(!1),[b,_]=le.useState();le.useEffect(()=>{o.current||(o.current=!0,setTimeout(()=>{var k,D,z;(z=(D=(k=document.querySelector(".property calcite-tab-nav"))==null?void 0:k.shadowRoot)==null?void 0:D.querySelector(".tab-nav"))==null||z.setAttribute("style","overflow: hidden")},100))},[t.view]),le.useEffect(()=>{t.geometry&&t.view?Srt(t.geometry,t.view).then(k=>{i(k.features),n.current=k.features,k.features.length===1?(l(!1),f("info"),s(k.features[0]),t.selected(k.features[0],k.features)):(l(!0),f("list"),s(void 0),t.selected(void 0,k.features))}):(l(!0),f("list"),s(void 0),t.selected(void 0,[]),i([]))},[t.geometry]);const w=le.useCallback(k=>{i(k),n.current=k,k.length===1?(l(!1),f("info"),s(k[0]),t.selected(k[0],k)):(l(!0),f("list"),s(void 0),t.selected(void 0,k))},[n.current,e,t.selected]),S=le.useCallback(k=>{s(k),t.selected(k,n.current),f("info"),l(!1)},[t.selected,r]),C=le.useCallback(k=>{s(k)},[r]),$=le.useCallback(k=>{s(void 0),i([]),f("list"),l(!0),t.selected(null,[]),Trt(k)},[]);le.useEffect(()=>{v(t.isActive)},[t.isActive]);const M=le.useCallback(k=>{t.panelDismissed()},[]),P=le.useCallback(k=>{t.showTips(krt)},[]);return{condos:e,feature:r,infoDisabled:a,searching:u,setSearching:h,activeTab:p,isActive:g,condosSelected:w,featureSelected:S,panelDismissed:M,clearSearch:$,tipsClicked:P,featureChanged:C,featureTable:b,setFeatureTable:_}};function Art(t){const{condos:e,feature:i,infoDisabled:n,searching:r,setSearching:s,activeTab:o,isActive:a,condosSelected:l,featureSelected:u,panelDismissed:h,clearSearch:p,tipsClicked:f,featureTable:g,setFeatureTable:v}=$rt(t);return qe(fIe,{id:"search-panel",heading:"Property Search",hidden:!a,closed:a?void 0:!0,closable:!0,onCalcitePanelClose:h,children:[re(Vl,{id:"tip",icon:"lightbulb",text:"Tips",slot:"header-actions-end",onClick:f}),re(ua,{label:"Show Tip",referenceElement:"tip",closeOnClick:!0,children:"Show Tip"}),qe("div",{className:"property",children:[t.view&&qe("div",{className:"row",children:[re(nXe,{view:t.view,searchingChanged:b=>s(b),condosSelected:l}),re(Xk,{id:"clearSelection",iconEnd:"trash",appearance:"transparent",scale:"m",kind:"neutral",onClick:()=>{p(t.view)}}),re(ua,{referenceElement:"clearSelection",label:"Clear Selection",closeOnClick:!0,children:"Clear Selection"})]}),qe(vIe,{position:"bottom",layout:"center",scale:"l",children:[qe(yIe,{slot:"title-group",children:[re(Hq,{selected:o==="list"?!0:void 0,children:"List"}),re(Hq,{disabled:n===!0?!0:void 0,selected:o==="info"?!0:void 0,children:"Info"})]}),re(Bq,{children:t.view&&re(Wnt,{view:t.view,condos:e,featureSelected:u,featureTableSet:b=>v(b)})}),re(Bq,{children:t.view&&re(xrt,{view:t.view,feature:i,condos:e,featureTable:g})}),re(gse,{loading:!0,hidden:r?void 0:!0})]})]})]})}const Mrt=gl.memo(Art),Db=(t,e,i,n,r,s)=>{var a,l;const o=document.getElementById(`${t}-panel`);debugger;if(o){const u=o.querySelector("calcite-action");u&&(u.icon="chevron-up"),(l=(a=o==null?void 0:o.shadowRoot)==null?void 0:a.querySelector(".content-container"))==null||l.setAttribute("style","display:flex")}i(e===t?"":t),s(e===t?"":t),window.innerWidth<735&&(n(""),r(""))},kx=(t,e,i,n,r,s)=>{n(e===t?"":t),r(e===t?"":t),window.innerWidth<735&&(i(""),s(""))},Ort=(t,e)=>{var i,n,r,s;e.icon==="chevron-up"?((n=(i=t==null?void 0:t.shadowRoot)==null?void 0:i.querySelector(".content-container"))==null||n.setAttribute("style","display:none"),e.icon="chevron-down"):e.icon==="chevron-down"&&((s=(r=t==null?void 0:t.shadowRoot)==null?void 0:r.querySelector(".content-container"))==null||s.setAttribute("style","display:flex"),e.icon="chevron-up")},bSt=t=>{Ort(t.target.parentElement,t.target)},Prt=(t,e,i,n)=>{const r=Date.now(),s=document.querySelector(".esri-ui-top-right"),o=document.querySelector(".tools");return s==null||s.append(o),t.when(async()=>{e(t),Rrt(t,i,r,n);const a=new URL(window.location);a.searchParams.get("config")&&a.searchParams.get("config")==="puma"&&(await Lrt()||(aU("To view utility layers, you must be connected to the city network or connected through VPN. You will be redirected to the public iMAPS.","Not on City Network or VPN.",n,i),setTimeout(()=>{window.location.href="https://coraleigh.github.io/imaps"},1e4)))}),t},Rrt=async(t,e,i,n)=>{const r=t.map.allLayers.find(o=>o.title.includes("Property")&&o.type!=="group");if(!t.map.allTables.filter(o=>o.title.includes("Condo")||o.title.includes("Address")||o.title.includes("Photo")).length||!r)aU("The property layer did not load, please report this issue to the iMAPS Helpdesk.","Property Layer Did Not Load",n,e);else try{const o=await t.whenLayerView(r);await jo(()=>!o.updating),e(!1),console.log(Date.now()-i)}catch(o){console.log(o),aU("The property layer did not load, please report this issue to the iMAPS Helpdesk.","Property Layer Did Not Load",n,e)}},Lrt=async()=>{try{return await fetch("https://gis.raleighnc.gov"),!0}catch(t){return console.log(t),!1}},aU=(t,e,i,n)=>{i({show:!0,autoClose:!1,duration:"long",kind:"danger",icon:"error",title:e,message:t,link:{text:"",url:"",show:!1}}),n(!1)},Drt=(t,e)=>{t.activeTool=null,e("")},Frt=(t,e)=>{const i=[];return e.filter(r=>i.includes(r.getAttribute("PIN_NUM"))?!1:(t&&r.getAttribute("PIN_NUM")===t.getAttribute("PIN_NUM")?r.setAttribute("selected",1):r.setAttribute("selected",2),i.push(r.getAttribute("PIN_NUM")),!0))};function Nrt(t){const[e,i]=le.useState("search"),[n,r]=le.useState("");return le.useEffect(()=>{i(t.activePanel)},[t.activePanel]),le.useEffect(()=>{r(t.activeTool)},[t.activeTool]),qe(uIe,{slot:"action-bar",position:"end",children:[qe(jq,{children:[re(Vl,{id:"propertySearch",icon:"search",text:"Property Search",active:e==="search"?!0:void 0,onClick:()=>kx("search",e,r,i,t.activePanelChanged,t.activeToolChanged)}),re(ua,{closeOnClick:!0,referenceElement:"propertySearch",label:"Property Search",children:"Property Search"}),re(Vl,{id:"locationSearch",icon:"pin",text:"Location Search",active:e==="location"?!0:void 0,onClick:()=>{kx("location",e,r,i,t.activePanelChanged,t.activeToolChanged)}}),re(ua,{closeOnClick:!0,referenceElement:"locationSearch",label:"Location Search",children:"Location Search"}),re(Vl,{id:"layerList",icon:"layers",text:"Layers",active:e==="layers"?!0:void 0,onClick:()=>{kx("layers",e,r,i,t.activePanelChanged,t.activeToolChanged)}}),re(ua,{closeOnClick:!0,referenceElement:"layerList",label:"Layer List",children:"Layers"}),re(Vl,{id:"legend",icon:"legend",text:"Legend",active:e==="legend"?!0:void 0,onClick:()=>{kx("legend",e,r,i,t.activePanelChanged,t.activeToolChanged)}}),re(ua,{closeOnClick:!0,referenceElement:"legend",label:"Legend",children:"Legend"}),re(Vl,{id:"basemaps",icon:"basemap",text:"Basemaps",active:e==="basemaps"?!0:void 0,onClick:()=>{kx("basemaps",e,r,i,t.activePanelChanged,t.activeToolChanged)}}),re(ua,{closeOnClick:!0,referenceElement:"basemaps",label:"Basemaps",children:"Basemaps"})]}),qe(jq,{children:[re(Vl,{id:"propertySelect",icon:"select",text:"Property Select",active:n==="select"?!0:void 0,onClick:()=>Db("select",n,r,i,t.activePanelChanged,t.activeToolChanged)}),re(ua,{closeOnClick:!0,referenceElement:"propertySelect",label:"Property Select",children:"Property Select"}),re(Vl,{id:"measure",icon:"measure",text:"Measure",active:n==="measure"?!0:void 0,onClick:()=>{Db("measure",n,r,i,t.activePanelChanged,t.activeToolChanged)}}),re(ua,{closeOnClick:!0,referenceElement:"measure",label:"Measure",children:"Measure"}),re(Vl,{id:"sketch",icon:"pencil",text:"Sketch",active:n==="sketch"?!0:void 0,onClick:()=>{Db("sketch",n,r,i,t.activePanelChanged,t.activeToolChanged)}}),re(ua,{closeOnClick:!0,referenceElement:"sketch",label:"Sketch",children:"Sketch"}),re(Vl,{id:"bookmarks",icon:"bookmark",text:"Bookmarks",active:n==="bookmarks"?!0:void 0,onClick:()=>{Db("bookmarks",n,r,i,t.activePanelChanged,t.activeToolChanged)}}),re(ua,{closeOnClick:!0,referenceElement:"bookmarks",label:"Bookmarks",children:"Bookmarks"}),re(Vl,{id:"print",icon:"print",text:"Print",active:n==="print"?!0:void 0,onClick:()=>Db("print",n,r,i,t.activePanelChanged,t.activeToolChanged)}),re(ua,{closeOnClick:!0,referenceElement:"print",label:"Print",children:"Print"})]})]})}const zrt=gl.memo(Nrt);let Bd=class extends Whe(vfe(qC)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new r0,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,i){return super.on(e,i)}graphicChanged(e){this.emit("graphic-update",e)}};c([d({type:Khe})],Bd.prototype,"elevationInfo",void 0),c([d(zV(r0,"graphics"))],Bd.prototype,"graphics",void 0),c([d({type:["show","hide"]})],Bd.prototype,"listMode",void 0),c([d()],Bd.prototype,"screenSizePerspectiveEnabled",void 0),c([d({readOnly:!0})],Bd.prototype,"type",void 0),c([d({constructOnly:!0})],Bd.prototype,"internal",void 0),Bd=c([O("esri.layers.GraphicsLayer")],Bd);const fve=Bd;function o5(t){switch(t){case Ut.SUPPORTED:break;case Ut.GRAPHICS_LAYER_MISSING:return"not owned by a graphics layer";case Ut.GEOMETRY_MISSING:return"no geometry";case Ut.GEOMETRY_TYPE_UNSUPPORTED:return"the geometry type is not supported";case Ut.ELEVATION_MODE_UNSUPPORTED:return"the elevation mode is not supported";case Ut.SYMBOL_TYPE_UNSUPPORTED:return"the symbol type is not supported"}return""}var Ut;(function(t){t[t.SUPPORTED=0]="SUPPORTED",t[t.GRAPHICS_LAYER_MISSING=1]="GRAPHICS_LAYER_MISSING",t[t.GEOMETRY_MISSING=2]="GEOMETRY_MISSING",t[t.GEOMETRY_TYPE_UNSUPPORTED=3]="GEOMETRY_TYPE_UNSUPPORTED",t[t.ELEVATION_MODE_UNSUPPORTED=4]="ELEVATION_MODE_UNSUPPORTED",t[t.SYMBOL_TYPE_UNSUPPORTED=5]="SYMBOL_TYPE_UNSUPPORTED"})(Ut||(Ut={}));function mve(t){return t?_n:Grt}function jrt(t,e){return U(e)||!e.mode?mve(t).mode:e.mode}function Vrt(t,e){return A(e)?e:mve(t)}function gve(t,e){return jrt(!!A(t)&&t.hasZ,e)}function wSt(t,e){return Vrt(!!A(t)&&!!t.hasZ,e)}function sL(t){const e=hH(t);return gve(t.geometry,e)}function xSt(t){const e=hH(t),i=gve(t.geometry,e);return{mode:i,offset:A(e)&&i!=="on-the-ground"?xs(e.offset,0)*RVe(xs(e.unit,"meters")):0}}function dH(t){if(sL(t)==="on-the-ground")return!1;const e=hH(t),i=A(e)&&e.featureExpressionInfo?e.featureExpressionInfo.expression:null;return!(!i||i==="0")}function hH(t){return t.layer&&"elevationInfo"in t.layer?t.layer.elevationInfo:null}function SSt(t,e,i){if(U(i)||!i.mode)return;const n=t.hasZ?t.z:0,r=A(i.offset)?i.offset:0;switch(i.mode){case"absolute-height":return n-r;case"on-the-ground":return 0;case"relative-to-ground":return n-(xs(e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"ground"),0)+r);case"relative-to-scene":return n-(xs(e.elevationProvider.getElevation(t.x,t.y,n,t.spatialReference,"scene"),0)+r)}}function Urt(t,e,i,n=null){return vve(t,e.x,e.y,e.hasZ?e.z:0,e.spatialReference,i,n)}function yve(t,e,i,n,r=null){return vve(t,e[0],e[1],e.length>2?e[2]:0,i,n,r)}function vve(t,e,i,n,r,s,o=null){if(U(s))return;const a=A(o)?o.mode:"absolute-height";if(a==="on-the-ground")return 0;const{absoluteZ:l}=Brt(e,i,n,r,t,s);return Hrt(l,e,i,n,r,t,o,a)}function Brt(t,e,i,n,r,s){const o=A(s.offset)?s.offset:0;switch(s.mode){case"absolute-height":return{absoluteZ:i+o,elevation:0};case"on-the-ground":{const a=xs(r.elevationProvider.getElevation(t,e,0,n,"ground"),0);return{absoluteZ:a,elevation:a}}case"relative-to-ground":{const a=xs(r.elevationProvider.getElevation(t,e,i,n,"ground"),0);return{absoluteZ:i+a+o,elevation:a}}case"relative-to-scene":{const a=xs(r.elevationProvider.getElevation(t,e,i,n,"scene"),0);return{absoluteZ:i+a+o,elevation:a}}}}function Hrt(t,e,i,n,r,s,o,a){const l=A(o)&&A(o.offset)?o.offset:0;switch(a){case"absolute-height":return t-l;case"relative-to-ground":return t-(xs(s.elevationProvider.getElevation(e,i,n,r,"ground"),0)+l);case"relative-to-scene":return t-(xs(s.elevationProvider.getElevation(e,i,n,r,"scene"),0)+l)}}function ESt(t,e){if(U(e))return!1;const{mode:i}=e;return A(i)&&(t==="scene"&&i==="relative-to-scene"||t==="ground"&&i!=="absolute-height")}const _n={mode:"absolute-height",offset:0},Grt={mode:"on-the-ground",offset:null};function qrt(t){var e;if(((e=t.layer)==null?void 0:e.type)!=="graphics")return Ut.GRAPHICS_LAYER_MISSING;if(U(t.geometry))return Ut.GEOMETRY_MISSING;switch(t.geometry.type){case"polygon":case"point":case"polyline":case"mesh":break;default:return Ut.GEOMETRY_TYPE_UNSUPPORTED}return sL(t)!=="on-the-ground"&&dH(t)?Ut.ELEVATION_MODE_UNSUPPORTED:Ut.SUPPORTED}var lU;let nf=lU=class extends Ws{constructor(...t){super(...t),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}normalizeCtorArgs(t,e){let i;if(t&&t.center)i=t;else{if(t&&t.rings)return super.normalizeCtorArgs(t,e);i={center:t}}return{...super.normalizeCtorArgs(),...i,...e}}initialize(){const t=this.center,e=this.numberOfPoints;if(this.hasZ=(t==null?void 0:t.hasZ)??!1,this.rings.length!==0||!t)return;const i=kt(this.radius,this.radiusUnit,"meters"),n=t.spatialReference;let r,s="geographic";if(n.isWebMercator?s="webMercator":((n.wkid&&R[n.wkid])!=null||n.wkt&&n.wkt.indexOf("PROJCS")===0)&&(s="projected"),this.geodesic){let o;switch(s){case"webMercator":o=sh(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":o=t}r=this._createGeodesicCircle(o,i,e),s==="webMercator"&&(r=Tc(r))}else{let o;s==="webMercator"||s==="projected"?o=i/this._convert2Meters(1,t.spatialReference):s==="geographic"&&(o=Roe(i,"meters",H8(t.spatialReference).radius)),r=this._createPlanarCircle(t,o,e)}this.spatialReference=r.spatialReference,this.addRing(r.rings[0])}clone(){const{center:t,numberOfPoints:e,radius:i,radiusUnit:n,geodesic:r}=this;return new lU({center:t==null?void 0:t.clone(),numberOfPoints:e,radius:i,radiusUnit:n,geodesic:r})}_createGeodesicCircle(t,e,i){let n=0;const r=[];for(;n<360;){const s=[0,0],o=[t.x,t.y];wA(s,o,n,e),this.hasZ&&s.push(t.z),r.push(s),n+=360/i}return r.push(r[0]),new Ws(r)}_createPlanarCircle(t,e,i){const n=[],r=2*Math.PI/i;for(let s=0;s<i;++s){const o=r*s,a=[t.x+Math.cos(-o)*e,t.y+Math.sin(-o)*e];this.hasZ&&a.push(t.z),n.push(a)}return n.push(n[0]),new Ws({spatialReference:t.spatialReference,rings:[n]})}_convert2Meters(t,e){let i;if(e.wkid&&R[e.wkid]!=null)i=R.values[R[e.wkid]];else{const n=e.wkt,r=n.lastIndexOf(",")+1,s=n.lastIndexOf("]]");i=parseFloat(n.substring(r,s))}return t*i}};c([d({type:Ve})],nf.prototype,"center",void 0),c([d()],nf.prototype,"geodesic",void 0),c([d()],nf.prototype,"numberOfPoints",void 0),c([d()],nf.prototype,"radius",void 0),c([d()],nf.prototype,"radiusUnit",void 0),nf=lU=c([O("esri.geometry.Circle")],nf);const Wrt=nf;function Sk(t){return bve(t).result}function CSt(t){return bve(t).geometry}function bve(t){var e;return((e=t.layer)==null?void 0:e.type)!=="graphics"?{result:Ut.GRAPHICS_LAYER_MISSING,geometry:null}:U(t.geometry)?{result:Ut.GEOMETRY_MISSING,geometry:null}:sL(t)!=="on-the-ground"&&dH(t)?{result:Ut.ELEVATION_MODE_UNSUPPORTED,geometry:null}:t.geometry.type!=="point"&&t.geometry.type!=="polyline"&&(t.geometry.type!=="polygon"||t.geometry instanceof Wrt)?{result:Ut.GEOMETRY_TYPE_UNSUPPORTED,geometry:null}:{result:Ut.SUPPORTED,geometry:t.geometry}}function Jrt(t){var i;if(((i=t.layer)==null?void 0:i.type)!=="graphics")return Ut.GRAPHICS_LAYER_MISSING;if(U(t.geometry))return Ut.GEOMETRY_MISSING;switch(t.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return Ut.SUPPORTED;default:return Ut.GEOMETRY_TYPE_UNSUPPORTED}const e=A(t.symbol)&&t.symbol.type==="point-3d"&&t.symbol.symbolLayers;return e&&e.length>0&&e.some(n=>n.type==="object")?sL(t)!=="on-the-ground"&&dH(t)?Ut.ELEVATION_MODE_UNSUPPORTED:Ut.SUPPORTED:Ut.SYMBOL_TYPE_UNSUPPORTED}function ute(t,e,i){if(!e||!t||!t.map)return;const{map:n}=t,r=n.layers.find(s=>s===e);r||n.add(e,i),r&&i!=null&&n.layers.reorder(r,i)}function ISt(t,e){return t.allLayerViews.find(i=>{const n=i.layer;return n===e||"sublayers"in n&&A(n.sublayers)&&n.sublayers.includes(e)})}const Tn={redo:"r",undo:"z",center:"Alt",constraint:"Shift",cancel:"Escape",delete:["Backspace","Delete"],complete:"Enter",vertexAdd:"f",pan:" "},dte={toggle:"Control"};let AA=class extends _e{constructor(e){super(e),this.enabled=!1}};c([d({type:Boolean,nonNullable:!0})],AA.prototype,"enabled",void 0),AA=c([O("esri.views.interactive.sketch.SketchLabelOptions")],AA);const _ve=AA;let qE=class extends _e{constructor(e){super(e),this.mode="absolute-height"}toJSON(){return{mode:this.mode}}};c([d({type:String,nonNullable:!0})],qE.prototype,"mode",void 0),qE=c([O("esri.widgets.Sketch.SketchTooltipOptions.ElevationOptions")],qE);let yo=class extends _e{constructor(){super(...arguments),this.distance=!0,this.elevation=!0,this.size=!0,this.scale=!0,this.rotation=!0,this.orientation=!0,this.totalLength=!0,this.area=!0,this.radius=!0,this.helpMessage=!1}toJSON(){return{distance:this.distance,size:this.size,scale:this.scale,rotation:this.rotation,orientation:this.orientation,totalLength:this.totalLength,area:this.area,radius:this.radius}}};c([d({type:Boolean,nonNullable:!0})],yo.prototype,"distance",void 0),c([d({type:Boolean,nonNullable:!0})],yo.prototype,"elevation",void 0),c([d({type:Boolean,nonNullable:!0})],yo.prototype,"size",void 0),c([d({type:Boolean,nonNullable:!0})],yo.prototype,"scale",void 0),c([d({type:Boolean,nonNullable:!0})],yo.prototype,"rotation",void 0),c([d({type:Boolean,nonNullable:!0})],yo.prototype,"orientation",void 0),c([d({type:Boolean,nonNullable:!0})],yo.prototype,"totalLength",void 0),c([d({type:Boolean,nonNullable:!0})],yo.prototype,"area",void 0),c([d({type:Boolean,nonNullable:!0})],yo.prototype,"radius",void 0),c([d({type:Boolean,nonNullable:!0})],yo.prototype,"helpMessage",void 0),yo=c([O("esri.widgets.Sketch.SketchTooltipOptions.VisibleElements")],yo);let ay=class extends _e{constructor(e){super(e),this.enabled=!1,this.elevation=new qE,this.visibleElements=new yo,this.visualVariables=null}toJSON(){return{enabled:this.enabled,elevation:this.elevation,visibleElements:this.visibleElements}}};c([d({type:Boolean,nonNullable:!0})],ay.prototype,"enabled",void 0),c([d({type:qE,nonNullable:!0})],ay.prototype,"elevation",void 0),c([d({type:yo,nonNullable:!0})],ay.prototype,"visibleElements",void 0),c([d()],ay.prototype,"visualVariables",void 0),ay=c([O("esri.widgets.Sketch.SketchTooltipOptions")],ay);const wve=ay;let Sc=class extends Y{constructor(){super(...arguments),this.enabled=!0}};c([d({type:Boolean})],Sc.prototype,"enabled",void 0),Sc=c([O("esri.views.interactive.snapping.Settings.DefaultSnappingAlgorithm")],Sc);let gi=class extends Y{constructor(e){super(e),this.lineSnapper=new Sc,this.parallelLineSnapper=new Sc,this.rightAngleSnapper=new Sc,this.rightAngleTriangleSnapper=new Sc,this.shortLineThreshold=15,this.distance=5,this.pointThreshold=1e-6,this.intersectionParallelLineThreshold=1e-6,this.parallelLineThreshold=1e-6,this.verticalLineThreshold=.1,this.touchSensitivityMultiplier=1.5,this.pointOnLineThreshold=1e-6,this.orange=new Se([255,127,0]),this.orangeTransparent=new Se([255,127,0,.5]),this.lineHintWidthReference=3,this.lineHintWidthTarget=3,this.lineHintFadedExtensions=.3,this.parallelLineHintWidth=2,this.parallelLineHintLength=24,this.parallelLineHintOffset=1.5,this.rightAngleHintSize=24,this.rightAngleHintOutlineSize=1.5,this.satisfiesConstraintScreenThreshold=1}};c([d({type:Sc,constructOnly:!0,nonNullable:!0,json:{write:!0}})],gi.prototype,"lineSnapper",void 0),c([d({type:Sc,constructOnly:!0,nonNullable:!0,json:{write:!0}})],gi.prototype,"parallelLineSnapper",void 0),c([d({type:Sc,constructOnly:!0,nonNullable:!0,json:{write:!0}})],gi.prototype,"rightAngleSnapper",void 0),c([d({type:Sc,constructOnly:!0,nonNullable:!0,json:{write:!0}})],gi.prototype,"rightAngleTriangleSnapper",void 0),c([d({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],gi.prototype,"shortLineThreshold",void 0),c([d({type:Number,nonNullable:!0,range:{min:-1,max:50,step:1},json:{write:!0}})],gi.prototype,"distance",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],gi.prototype,"pointThreshold",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],gi.prototype,"intersectionParallelLineThreshold",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],gi.prototype,"parallelLineThreshold",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],gi.prototype,"verticalLineThreshold",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],gi.prototype,"touchSensitivityMultiplier",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1e-5},json:{write:!0}})],gi.prototype,"pointOnLineThreshold",void 0),c([d({type:Se,nonNullable:!0})],gi.prototype,"orange",void 0),c([d({type:Se,nonNullable:!0})],gi.prototype,"orangeTransparent",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],gi.prototype,"lineHintWidthReference",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],gi.prototype,"lineHintWidthTarget",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{write:!0}})],gi.prototype,"lineHintFadedExtensions",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:10},json:{write:!0}})],gi.prototype,"parallelLineHintWidth",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:50},json:{write:!0}})],gi.prototype,"parallelLineHintLength",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],gi.prototype,"parallelLineHintOffset",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:46},json:{write:!0}})],gi.prototype,"rightAngleHintSize",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:6},json:{write:!0}})],gi.prototype,"rightAngleHintOutlineSize",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:5},json:{write:!0}})],gi.prototype,"satisfiesConstraintScreenThreshold",void 0),gi=c([O("esri.views.interactive.snapping.Settings.Defaults")],gi);const xh=new gi;var Cr;(function(t){t[t.FEATURE=1]="FEATURE",t[t.SELF=2]="SELF",t[t.ALL=3]="ALL"})(Cr||(Cr={}));const v1=(t,e,i)=>[e,i],Sl=(t,e,i)=>[e,i,t[2]],b1=(t,e,i)=>[e,i,t[2],t[3]];function hte(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance]:[1,1],translate:A(t.extent)?[t.extent.xmin,t.extent.ymax]:[0,0]}:null}function uI({scale:t,translate:e},i){return Math.round((i-e[0])/t[0])}function dI({scale:t,translate:e},i){return Math.round((e[1]-i)/t[1])}function pH(t,e,i){const n=[];let r,s,o,a;for(let l=0;l<i.length;l++){const u=i[l];l>0?(o=uI(t,u[0]),a=dI(t,u[1]),o===r&&a===s||(n.push(e(u,o-r,a-s)),r=o,s=a)):(r=uI(t,u[0]),s=dI(t,u[1]),n.push(e(u,r,s)))}return n.length>0?n:null}function Yrt(t,e,i,n){return pH(t,i?n?b1:Sl:n?Sl:v1,e)}function Zrt(t,e,i,n){const r=[],s=i?n?b1:Sl:n?Sl:v1;for(let o=0;o<e.length;o++){const a=pH(t,s,e[o]);a&&a.length>=3&&r.push(a)}return r.length?r:null}function Krt(t,e,i,n){const r=[],s=i?n?b1:Sl:n?Sl:v1;for(let o=0;o<e.length;o++){const a=pH(t,s,e[o]);a&&a.length>=2&&r.push(a)}return r.length?r:null}function xve({scale:t,translate:e},i){return i*t[0]+e[0]}function Sve({scale:t,translate:e},i){return e[1]-i*t[1]}function Eve(t,e,i){const n=new Array(i.length);if(!i.length)return n;const[r,s]=t.scale;let o=xve(t,i[0][0]),a=Sve(t,i[0][1]);n[0]=e(i[0],o,a);for(let l=1;l<i.length;l++){const u=i[l];o+=u[0]*r,a-=u[1]*s,n[l]=e(u,o,a)}return n}function Cve(t,e,i){const n=new Array(i.length);for(let r=0;r<i.length;r++)n[r]=Eve(t,e,i[r]);return n}function Xrt(t,e,i,n){return Eve(t,i?n?b1:Sl:n?Sl:v1,e)}function Qrt(t,e,i,n){return Cve(t,i?n?b1:Sl:n?Sl:v1,e)}function est(t,e,i,n){return Cve(t,i?n?b1:Sl:n?Sl:v1,e)}function tst(t,e,i,n,r){return e.xmin=uI(t,i.xmin),e.ymin=dI(t,i.ymin),e.xmax=uI(t,i.xmax),e.ymax=dI(t,i.ymax),e!==i&&(n&&(e.zmin=i.zmin,e.zmax=i.zmax),r&&(e.mmin=i.mmin,e.mmax=i.mmax)),e}function ist(t,e,i,n,r){return e.points=Yrt(t,i.points,n,r)??[],e}function nst(t,e,i,n,r){return e.x=uI(t,i.x),e.y=dI(t,i.y),e!==i&&(n&&(e.z=i.z),r&&(e.m=i.m)),e}function rst(t,e,i,n,r){const s=Zrt(t,i.rings,n,r);return s?(e.rings=s,e):null}function sst(t,e,i,n,r){const s=Krt(t,i.paths,n,r);return s?(e.paths=s,e):null}function PSt(t,e){return t&&e?NP(e)?nst(t,{},e,!1,!1):MI(e)?sst(t,{},e,!1,!1):ph(e)?rst(t,{},e,!1,!1):FP(e)?ist(t,{},e,!1,!1):AI(e)?tst(t,{},e,!1,!1):null:null}function RSt(t,e,i,n,r){return A(i)&&(e.points=Xrt(t,i.points,n,r)),e}function LSt(t,e,i,n,r){return U(i)||(e.x=xve(t,i.x),e.y=Sve(t,i.y),e!==i&&(n&&(e.z=i.z),r&&(e.m=i.m))),e}function DSt(t,e,i,n,r){return A(i)&&(e.rings=est(t,i.rings,n,r)),e}function FSt(t,e,i,n,r){return A(i)&&(e.paths=Qrt(t,i.paths,n,r)),e}function ost(t,e){const i=Ive[t.toLowerCase()];if(i==null)throw new Error("Function Not Recognised");if(e.length<i.minParams||e.length>i.maxParams)throw new Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return i.evaluate(e)}function ast(t,e){const i=Ive[t.toLowerCase()];return i!=null&&e>=i.minParams&&e<=i.maxParams}const Ive={min:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.min.apply(Math,t[0])},max:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.max.apply(Math,t[0])},avg:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Tve(t[0])},sum:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:lst(t[0])},stddev:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.sqrt(pte(t[0]))},count:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:t[0].length},var:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:pte(t[0])}};function Tve(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}function lst(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i];return e}function pte(t){const e=Tve(t),i=t.length;let n=0;for(const r of t)n+=(r-e)**2;return i>1?n/(i-1):0}var _r;(function(t){t.InvalidFunctionParameters="InvalidFunctionParameters",t.UnsupportedSqlFunction="UnsupportedSqlFunction",t.UnsupportedOperator="UnsupportedOperator",t.UnsupportedSyntax="UnsupportedSyntax",t.UnsupportedIsRhs="UnsupportedIsRhs",t.UnsupportedIsLhs="UnsupportedIsLhs",t.InvalidDataType="InvalidDataType",t.CannotCastValue="CannotCastValue",t.MissingStatisticParameters="MissingStatisticParameters"})(_r||(_r={}));const cst={[_r.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[_r.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[_r.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[_r.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[_r.UnsupportedOperator]:"Unsupported operator - {operator}",[_r.UnsupportedSyntax]:"Unsupported syntax - {node}",[_r.UnsupportedSqlFunction]:"Sql function not found = {function}",[_r.InvalidDataType]:"Invalid sql data type",[_r.CannotCastValue]:"Cannot cast value to the required data type"};let ly=class kve extends Error{constructor(e,i){super(y1(cst[e],i)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,kve)}};var cc;(function(t){t.NeverReach="NeverReach",t.NotImplemented="NotImplemented",t.Cancelled="Cancelled",t.InvalidStatResponse="InvalidStatResponse",t.InvalidRequest="InvalidRequest",t.RequestFailed="RequestFailed",t.MissingFeatures="MissingFeatures",t.AggregationFieldNotFound="AggregationFieldNotFound",t.DataElementsNotFound="DataElementsNotFound"})(cc||(cc={}));const ust={[cc.Cancelled]:"Cancelled",[cc.InvalidStatResponse]:"Invalid statistics response from service",[cc.InvalidRequest]:"Invalid request",[cc.RequestFailed]:"Request failed - {reason}",[cc.MissingFeatures]:"Missing features",[cc.AggregationFieldNotFound]:"Aggregation field not found",[cc.DataElementsNotFound]:"Data elements not found on service",[cc.NeverReach]:"Encountered unreachable logic",[cc.NotImplemented]:"Not implemented"};let NSt=class $ve extends Error{constructor(e,i){super(y1(ust[e],i)),this.declaredRootClass="esri.arcade.featureset.support.featureseterror",Error.captureStackTrace&&Error.captureStackTrace(this,$ve)}},th=class wu{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static _fixDefaults(e){if(e.precision!==null||e.secondary!==null)throw new Error("Primary and Secondary SqlInterval qualifiers not supported")}static _parseSecondsComponent(e,i){if(i.includes(".")){const n=i.split(".");e.second=parseFloat(n[0]),e.millis=parseInt(n[1],10)}else e.second=parseFloat(i)}static createFromMilliseconds(e){const i=new wu;return i.second=e/1e3,i}static createFromValueAndQualifer(e,i,n){let r=null;const s=new wu;if(s.op=n==="-"?"-":"+",i.type==="interval-period"){wu._fixDefaults(i);const o=new RegExp("^[0-9]{1,}$");if(i.period==="year"||i.period==="month")throw new Error("Year-Month Intervals not supported");if(i.period==="second"){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(e))throw new Error("Illegal Interval");wu._parseSecondsComponent(s,e)}else{if(!o.test(e))throw new Error("Illegal Interval");s[i.period]=parseFloat(e)}}else{if(wu._fixDefaults(i.start),wu._fixDefaults(i.end),i.start.period==="year"||i.start.period==="month")throw new Error("Year-Month Intervals not supported");if(i.end.period==="year"||i.end.period==="month")throw new Error("Year-Month Intervals not supported");switch(i.start.period){case"day":switch(i.end.period){case"hour":if(r=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!r.test(e))throw new Error("Illegal Interval");s[i.start.period]=parseFloat(e.split(" ")[0]),s[i.end.period]=parseFloat(e.split(" ")[1]);break;case"minute":if(r=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!r.test(e))throw new Error("Illegal Interval");{s[i.start.period]=parseFloat(e.split(" ")[0]);const o=e.split(" ")[1].split(":");s.hour=parseFloat(o[0]),s.minute=parseFloat(o[1])}break;case"second":if(r=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new Error("Illegal Interval");{s[i.start.period]=parseFloat(e.split(" ")[0]);const o=e.split(" ")[1].split(":");s.hour=parseFloat(o[0]),s.minute=parseFloat(o[1]),wu._parseSecondsComponent(s,o[2])}break;default:throw new Error("Invalid Interval.")}break;case"hour":switch(i.end.period){case"minute":if(r=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!r.test(e))throw new Error("Illegal Interval");s.hour=parseFloat(e.split(":")[0]),s.minute=parseFloat(e.split(":")[1]);break;case"second":if(r=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new Error("Illegal Interval");{const o=e.split(":");s.hour=parseFloat(o[0]),s.minute=parseFloat(o[1]),wu._parseSecondsComponent(s,o[2])}break;default:throw new Error("Invalid Interval.")}break;case"minute":if(i.end.period!=="second")throw new Error("Invalid Interval.");if(r=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!r.test(e))throw new Error("Illegal Interval");{const o=e.split(":");s.minute=parseFloat(o[0]),wu._parseSecondsComponent(s,o[1])}break;default:throw new Error("Invalid Interval.")}}return s}valueInMilliseconds(){return(this.op==="-"?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}};function fH(t,e){const i=Ave[t.toLowerCase()];if(i==null)throw new Error("Function Not Recognised");if(e.length<i.minParams||e.length>i.maxParams)throw new Error(`Invalid Parameter count for call to ${t.toUpperCase()}`);return i.evaluate(e)}function dst(t,e){const i=Ave[t.toLowerCase()];return i!=null&&e>=i.minParams&&e<=i.maxParams}function hst(t){return typeof t=="string"||t instanceof String}function pst(t){return t instanceof Date}function fte(t){const e=new Date(t.getTime());return e.setHours(0,0,0,0),e}function mte(t,e){if(pst(t))return e?fte(t):t;if(hst(t)){const i=Oe.fromSQL(t);if(i.isValid)return e?fte(i.toJSDate()):i.toJSDate()}throw new ly(_r.CannotCastValue)}const Ave={extract:{minParams:2,maxParams:2,evaluate:([t,e])=>{if(e==null)return null;if(e instanceof Date)switch(t.toUpperCase()){case"SECOND":return e.getSeconds();case"MINUTE":return e.getMinutes();case"HOUR":return e.getHours();case"DAY":return e.getDate();case"MONTH":return e.getMonth()+1;case"YEAR":return e.getFullYear()}throw new Error("Invalid Parameter for call to EXTRACT")}},substring:{minParams:2,maxParams:3,evaluate:t=>{if(t.length===2){const[e,i]=t;return e==null||i==null?null:e.toString().substring(i-1)}if(t.length===3){const[e,i,n]=t;return e==null||i==null||n==null?null:n<=0?"":e.toString().substring(i-1,i+n-1)}}},position:{minParams:2,maxParams:2,evaluate:([t,e])=>t==null||e==null?null:e.indexOf(t)+1},trim:{minParams:2,maxParams:3,evaluate:t=>{const e=t.length===3,i=e?t[1]:" ",n=e?t[2]:t[1];if(i==null||n==null)return null;const r=`(${Ise(i)})`;switch(t[0]){case"BOTH":return n.replace(new RegExp(`^${r}*|${r}*$`,"g"),"");case"LEADING":return n.replace(new RegExp(`^${r}*`,"g"),"");case"TRAILING":return n.replace(new RegExp(`${r}*$`,"g"),"")}throw new Error("Invalid Parameter for call to TRIM")}},abs:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.abs(t[0])},ceiling:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.ceil(t[0])},floor:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.floor(t[0])},log:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.log(t[0])},log10:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.log(t[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.sin(t[0])},cos:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.cos(t[0])},tan:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.tan(t[0])},asin:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.asin(t[0])},acos:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.acos(t[0])},atan:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.atan(t[0])},sign:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:t[0]>0?1:t[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:t=>t[0]==null||t[1]==null?null:t[0]**t[1]},mod:{minParams:2,maxParams:2,evaluate:t=>t[0]==null||t[1]==null?null:t[0]%t[1]},round:{minParams:1,maxParams:2,evaluate:t=>{const e=t[0],i=t.length===2?10**t[1]:1;return e==null?null:Math.round(e*i)/i}},truncate:{minParams:1,maxParams:2,evaluate:t=>t[0]==null?null:t.length===1?parseInt(t[0].toFixed(0),10):parseFloat(t[0].toFixed(t[1]))},char_length:{minParams:1,maxParams:1,evaluate:t=>typeof t[0]=="string"||t[0]instanceof String?t[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:t=>{let e="";for(let i=0;i<t.length;i++){if(t[i]==null)return null;e+=t[i].toString()}return e}},lower:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:t[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:t[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:t=>{for(const e of t)if(e!==null)return e;return null}},cosh:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.cosh(t[0])},sinh:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.sinh(t[0])},tanh:{minParams:1,maxParams:1,evaluate:t=>t[0]==null?null:Math.tanh(t[0])},nullif:{minParams:2,maxParams:2,evaluate:t=>{const e=t[0],i=t[1];return(e instanceof Date?e.valueOf():e)===(i instanceof Date?i.valueOf():i)?null:e}},cast:{minParams:2,maxParams:2,evaluate:t=>{const e=t[0],i=t[1];if(e===null)return null;switch(i.type){case"integer":{const n=parseInt(e,10);if(isNaN(n))throw new ly(_r.CannotCastValue);return n}case"smallint":{const n=parseInt(e,10);if(isNaN(n))throw new ly(_r.CannotCastValue);if(n>32767||n<-32767)throw new ly(_r.CannotCastValue);return n}case"float":case"real":{const n=parseFloat(e);if(isNaN(n))throw new ly(_r.CannotCastValue);return n}case"date":return mte(e,!0);case"timestamp":return mte(e,!1);case"varchar":{const n=e.toString();if(n.length>i.size)throw new ly(_r.CannotCastValue);return n}default:throw new ly(_r.InvalidDataType)}}}};var gte,yte,cU={};yte=function(){function t(r,s){function o(){this.constructor=r}o.prototype=s.prototype,r.prototype=new o}function e(r,s,o,a){var l=Error.call(this,r);return Object.setPrototypeOf&&Object.setPrototypeOf(l,e.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function i(r,s,o){return o=o||" ",r.length>s?r:(s-=r.length,r+(o+=o.repeat(s)).slice(0,s))}function n(r,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,u={start:QH},h=QH,p="!",f="=",g=">=",v=">",b="<=",_="<>",w="<",S="!=",C="+",$="-",M="||",P="*",k="/",D="@",z="'",B="N'",j="''",K=".",ie="null",te="true",me="false",Ie="in",Me="is",oe="like",ge="escape",he="not",et="and",wt="or",pr="between",xn="from",fr="for",Ar="substring",Qs="extract",Tl="trim",Fm="position",E1="timestamp",Nm="date",C1="leading",W0="trailing",I1="both",T1="cast",J0="as",Y0="integer",k1="smallint",$1="float",kl="real",Wh="varchar",Z0="to",K0="interval",zm="year",jm="month",Vm="day",Ho="hour",X0="minute",bL="second",_L="case",wL="end",xL="when",SL="then",EL="else",CL=",",IL="(",TL=")",v2="`",kL=/^[A-Za-z_\x80-\uFFFF]/,$L=/^[A-Za-z0-9_]/,AL=/^[A-Za-z0-9_.\x80-\uFFFF]/,b2=/^[^']/,ML=/^[0-9]/,OL=/^[eE]/,PL=/^[+\-]/,RL=/^[ \t\n\r]/,_2=/^[^`]/,LL=Ae("!",!1),w2=Ae("=",!1),DL=Ae(">=",!1),FL=Ae(">",!1),NL=Ae("<=",!1),Z=Ae("<>",!1),di=Ae("<",!1),Q0=Ae("!=",!1),eo=Ae("+",!1),Um=Ae("-",!1),$e=Ae("||",!1),ev=Ae("*",!1),Sn=Ae("/",!1),Bm=nd([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),zL=nd([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),$l=nd([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),x2=Ae("@",!1),A1=Ae("'",!1),Ye=Ae("N'",!1),S2=Ae("''",!1),M1=nd(["'"],!0,!1),jL=Ae(".",!1),VL=nd([["0","9"]],!1,!1),O1=nd(["e","E"],!1,!1),UL=nd(["+","-"],!1,!1),P1=Ae("NULL",!0),En=Ae("TRUE",!0),BL=Ae("FALSE",!0),E2=Ae("IN",!0),HL=Ae("IS",!0),GL=Ae("LIKE",!0),qL=Ae("ESCAPE",!0),WL=Ae("NOT",!0),JL=Ae("AND",!0),to=Ae("OR",!0),YL=Ae("BETWEEN",!0),ZL=Ae("FROM",!0),V=Ae("FOR",!0),ne=Ae("SUBSTRING",!0),ce=Ae("EXTRACT",!0),tt=Ae("TRIM",!0),Vn=Ae("POSITION",!0),wi=Ae("TIMESTAMP",!0),io=Ae("DATE",!0),tv=Ae("LEADING",!0),O_e=Ae("TRAILING",!0),P_e=Ae("BOTH",!0),R_e=Ae("CAST",!0),L_e=Ae("AS",!0),D_e=Ae("INTEGER",!0),F_e=Ae("SMALLINT",!0),N_e=Ae("FLOAT",!0),z_e=Ae("REAL",!0),j_e=Ae("VARCHAR",!0),V_e=Ae("TO",!0),U_e=Ae("INTERVAL",!0),B_e=Ae("YEAR",!0),H_e=Ae("MONTH",!0),G_e=Ae("DAY",!0),q_e=Ae("HOUR",!0),W_e=Ae("MINUTE",!0),J_e=Ae("SECOND",!0),Y_e=Ae("CASE",!0),Z_e=Ae("END",!0),K_e=Ae("WHEN",!0),X_e=Ae("THEN",!0),Q_e=Ae("ELSE",!0),ewe=Ae(",",!1),twe=Ae("(",!1),iwe=Ae(")",!1),nwe=nd([" ","	",`
`,"\r"],!1,!1),JH=Ae("`",!1),YH=nd(["`"],!0,!1),rwe=function(y){return y},swe=function(y,E){var T={type:"expression-list"},F=CSe(y,E);return T.value=F,T},owe=function(y,E){return D1(y,E)},awe=function(y,E){return D1(y,E)},lwe=function(y){return SSe("NOT",y)},cwe=function(y,E){return E==""||E==null||E==null?y:E.type=="arithmetic"?D1(y,E.tail):$G(E.op,y,E.right,E.escape)},uwe=function(y){return{type:"arithmetic",tail:y}},dwe=function(y,E){return{op:y+"NOT",right:E}},hwe=function(y,E){return{op:y,right:E}},pwe=function(y,E,T){return{op:"NOT"+y,right:{type:"expression-list",value:[E,T]}}},fwe=function(y,E,T){return{op:y,right:{type:"expression-list",value:[E,T]}}},mwe=function(y){return y[0]+" "+y[2]},gwe=function(y){return y[0]+" "+y[2]},ywe=function(y,E,T){return{op:y,right:E,escape:T.value}},vwe=function(y,E){return{op:y,right:E,escape:""}},bwe=function(y,E){return{op:y,right:E}},_we=function(y){return{op:y,right:{type:"expression-list",value:[]}}},wwe=function(y,E){return{op:y,right:E}},xwe=function(y,E){return D1(y,E)},Swe=function(y,E){return D1(y,E)},Ewe=function(y){return y.paren=!0,y},Cwe=function(y){return/^CURRENT_DATE$/i.test(y)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(y)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:y}},Iwe=function(y){return y},Twe=function(y,E){return y+E.join("")},kwe=function(y,E){return y+E.join("")},$we=function(y){return{type:"parameter",value:y[1]}},Awe=function(y,E){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:y},E]}}},Mwe=function(y,E,T){return{type:"function",name:"substring",args:{type:"expression-list",value:T?[y,E,T[2]]:[y,E]}}},Owe=function(y,E){return{type:"function",name:"cast",args:{type:"expression-list",value:[y,E]}}},Pwe=function(){return{type:"data-type",value:{type:"integer"}}},Rwe=function(){return{type:"data-type",value:{type:"smallint"}}},Lwe=function(){return{type:"data-type",value:{type:"float"}}},Dwe=function(){return{type:"data-type",value:{type:"real"}}},Fwe=function(){return{type:"data-type",value:{type:"date"}}},Nwe=function(){return{type:"data-type",value:{type:"timestamp"}}},zwe=function(y){return{type:"data-type",value:{type:"varchar",size:parseInt(y)}}},jwe=function(y,E,T){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:y??"BOTH"},E,T]}}},Vwe=function(y,E){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:y??"BOTH"},E]}}},Uwe=function(y,E){return{type:"function",name:"position",args:{type:"expression-list",value:[y,E]}}},Bwe=function(y,E){return{type:"function",name:y,args:E||{type:"expression-list",value:[]}}},Hwe=function(y){return{type:"timestamp",value:y.value}},Gwe=function(y,E,T){return{type:"interval",value:E,qualifier:T,op:y}},qwe=function(y,E){return{type:"interval",value:y,qualifier:E,op:""}},Wwe=function(y,E){return{type:"interval-qualifier",start:y,end:E}},Jwe=function(y,E){return{type:"interval-period",period:y.value,precision:E,secondary:null}},Ywe=function(y){return{type:"interval-period",period:y.value,precision:null,secondary:null}},Zwe=function(y){return{type:"interval-period",period:y.value,precision:null,secondary:null}},Kwe=function(y,E){return{type:"interval-period",period:"second",precision:y,secondary:E}},Xwe=function(y){return{type:"interval-period",period:"second",precision:y,secondary:null}},Qwe=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},e1e=function(y,E){return{type:"interval-period",period:y.value,precision:E,secondary:null}},t1e=function(y){return{type:"interval-period",period:y.value,precision:null,secondary:null}},i1e=function(y,E){return{type:"interval-period",period:"second",precision:y,secondary:E}},n1e=function(y){return{type:"interval-period",period:"second",precision:y,secondary:null}},r1e=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},s1e=function(){return{type:"string",value:"day"}},o1e=function(){return{type:"string",value:"hour"}},a1e=function(){return{type:"string",value:"minute"}},l1e=function(){return{type:"string",value:"month"}},c1e=function(){return{type:"string",value:"year"}},u1e=function(y){return parseFloat(y)},d1e=function(y){return parseFloat(y)},h1e=function(y){return{type:"date",value:y.value}},p1e=function(){return{type:"null",value:null}},f1e=function(){return{type:"boolean",value:!0}},m1e=function(){return{type:"boolean",value:!1}},ZH=function(){return"'"},g1e=function(y){return{type:"string",value:y.join("")}},y1e=function(y,E){return{type:"case-expression",format:"simple",operand:y,clauses:E,else:null}},v1e=function(y,E,T){return{type:"case-expression",format:"simple",operand:y,clauses:E,else:T.value}},b1e=function(y){return{type:"case-expression",format:"searched",clauses:y,else:null}},_1e=function(y,E){return{type:"case-expression",format:"searched",clauses:y,else:E.value}},w1e=function(y,E){return{type:"when-clause",operand:y,value:E}},x1e=function(y,E){return{type:"when-clause",operand:y,value:E}},S1e=function(y){return{type:"else-clause",value:y}},E1e=function(y){return{type:"number",value:y}},C1e=function(y,E,T){return parseFloat(y+E+T)},I1e=function(y,E){return parseFloat(y+E)},T1e=function(y,E){return parseFloat(y+E)},k1e=function(y){return parseFloat(y)},$1e=function(y,E){return y[0]+E},A1e=function(y){return"."+(y??"")},M1e=function(y,E){return y+E},O1e=function(y){return y.join("")},P1e=function(y,E){return"e"+(E===null?"":E)},R1e=function(){return"IN"},L1e=function(){return"IS"},D1e=function(){return"LIKE"},F1e=function(){return"ESCAPE"},N1e=function(){return"NOT"},z1e=function(){return"AND"},j1e=function(){return"OR"},V1e=function(){return"BETWEEN"},U1e=function(){return"FROM"},B1e=function(){return"FOR"},H1e=function(){return"SUBSTRING"},G1e=function(){return"EXTRACT"},q1e=function(){return"TRIM"},W1e=function(){return"POSITION"},J1e=function(){return"TIMESTAMP"},Y1e=function(){return"DATE"},Z1e=function(){return"LEADING"},K1e=function(){return"TRAILING"},X1e=function(){return"BOTH"},Q1e=function(){return"CAST"},exe=function(){return"AS"},txe=function(){return"INTEGER"},ixe=function(){return"SMALLINT"},nxe=function(){return"FLOAT"},rxe=function(){return"REAL"},sxe=function(){return"VARCHAR"},oxe=function(){return"TO"},axe=function(){return"INTERVAL"},lxe=function(){return"YEAR"},cxe=function(){return"MONTH"},uxe=function(){return"DAY"},dxe=function(){return"HOUR"},hxe=function(){return"MINUTE"},pxe=function(){return"SECOND"},fxe=function(){return"CASE"},mxe=function(){return"END"},gxe=function(){return"WHEN"},yxe=function(){return"THEN"},vxe=function(){return"ELSE"},bxe=function(y){return y},_xe=function(y){return y.join("")},x=0,C2=[{line:1,column:1}],Bc=0,KL=[],J=0;if("startRule"in s){if(!(s.startRule in u))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');h=u[s.startRule]}function Ae(y,E){return{type:"literal",text:y,ignoreCase:E}}function nd(y,E,T){return{type:"class",parts:y,inverted:E,ignoreCase:T}}function wxe(){return{type:"end"}}function KH(y){var E,T=C2[y];if(T)return T;for(E=y-1;!C2[E];)E--;for(T={line:(T=C2[E]).line,column:T.column};E<y;)r.charCodeAt(E)===10?(T.line++,T.column=1):T.column++,E++;return C2[y]=T,T}function XH(y,E){var T=KH(y),F=KH(E);return{source:l,start:{offset:y,line:T.line,column:T.column},end:{offset:E,line:F.line,column:F.column}}}function ve(y){x<Bc||(x>Bc&&(Bc=x,KL=[]),KL.push(y))}function xxe(y,E,T){return new e(e.buildMessage(y,E),y,E,T)}function QH(){var y,E;return y=x,Q(),(E=nn())!==a?(Q(),y=rwe(E)):(x=y,y=a),y}function eG(){var y,E,T,F,xe,gt,oi,Ri;if(y=x,(E=nn())!==a){for(T=[],F=x,xe=Q(),(gt=L2())!==a?(oi=Q(),(Ri=nn())!==a?F=xe=[xe,gt,oi,Ri]:(x=F,F=a)):(x=F,F=a);F!==a;)T.push(F),F=x,xe=Q(),(gt=L2())!==a?(oi=Q(),(Ri=nn())!==a?F=xe=[xe,gt,oi,Ri]:(x=F,F=a)):(x=F,F=a);y=swe(E,T)}else x=y,y=a;return y}function nn(){var y,E,T,F,xe,gt,oi,Ri;if(y=x,(E=XL())!==a){for(T=[],F=x,xe=Q(),(gt=mG())!==a?(oi=Q(),(Ri=XL())!==a?F=xe=[xe,gt,oi,Ri]:(x=F,F=a)):(x=F,F=a);F!==a;)T.push(F),F=x,xe=Q(),(gt=mG())!==a?(oi=Q(),(Ri=XL())!==a?F=xe=[xe,gt,oi,Ri]:(x=F,F=a)):(x=F,F=a);y=owe(E,T)}else x=y,y=a;return y}function XL(){var y,E,T,F,xe,gt,oi,Ri;if(y=x,(E=I2())!==a){for(T=[],F=x,xe=Q(),(gt=O2())!==a?(oi=Q(),(Ri=I2())!==a?F=xe=[xe,gt,oi,Ri]:(x=F,F=a)):(x=F,F=a);F!==a;)T.push(F),F=x,xe=Q(),(gt=O2())!==a?(oi=Q(),(Ri=I2())!==a?F=xe=[xe,gt,oi,Ri]:(x=F,F=a)):(x=F,F=a);y=awe(E,T)}else x=y,y=a;return y}function I2(){var y,E,T,F,xe;return y=x,(E=L1())===a&&(E=x,r.charCodeAt(x)===33?(T=p,x++):(T=a,J===0&&ve(LL)),T!==a?(F=x,J++,r.charCodeAt(x)===61?(xe=f,x++):(xe=a,J===0&&ve(w2)),J--,xe===a?F=void 0:(x=F,F=a),F!==a?E=T=[T,F]:(x=E,E=a)):(x=E,E=a)),E!==a?(T=Q(),(F=I2())!==a?y=lwe(F):(x=y,y=a)):(x=y,y=a),y===a&&(y=Sxe()),y}function Sxe(){var y,E,T;return y=x,(E=rd())!==a?(Q(),(T=Exe())===a&&(T=null),y=cwe(E,T)):(x=y,y=a),y}function Exe(){var y;return(y=Cxe())===a&&(y=$xe())===a&&(y=Txe())===a&&(y=Ixe())===a&&(y=kxe()),y}function Cxe(){var y,E,T,F,xe,gt;if(y=[],E=x,T=Q(),(F=tG())!==a?(xe=Q(),(gt=rd())!==a?E=T=[T,F,xe,gt]:(x=E,E=a)):(x=E,E=a),E!==a)for(;E!==a;)y.push(E),E=x,T=Q(),(F=tG())!==a?(xe=Q(),(gt=rd())!==a?E=T=[T,F,xe,gt]:(x=E,E=a)):(x=E,E=a);else y=a;return y!==a&&(y=uwe(y)),y}function tG(){var y;return r.substr(x,2)===g?(y=g,x+=2):(y=a,J===0&&ve(DL)),y===a&&(r.charCodeAt(x)===62?(y=v,x++):(y=a,J===0&&ve(FL)),y===a&&(r.substr(x,2)===b?(y=b,x+=2):(y=a,J===0&&ve(NL)),y===a&&(r.substr(x,2)===_?(y=_,x+=2):(y=a,J===0&&ve(Z)),y===a&&(r.charCodeAt(x)===60?(y=w,x++):(y=a,J===0&&ve(di)),y===a&&(r.charCodeAt(x)===61?(y=f,x++):(y=a,J===0&&ve(w2)),y===a&&(r.substr(x,2)===S?(y=S,x+=2):(y=a,J===0&&ve(Q0)))))))),y}function Ixe(){var y,E,T,F;return y=x,(E=pG())!==a?(Q(),(T=L1())!==a?(Q(),(F=rd())!==a?y=dwe(E,F):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,(E=pG())!==a?(Q(),(T=rd())!==a?y=hwe(E,T):(x=y,y=a)):(x=y,y=a)),y}function Txe(){var y,E,T,F,xe,gt;return y=x,(E=L1())!==a?(Q(),(T=gG())!==a?(Q(),(F=rd())!==a?(Q(),(xe=O2())!==a?(Q(),(gt=rd())!==a?y=pwe(T,F,gt):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,(E=gG())!==a?(Q(),(T=rd())!==a?(Q(),(F=O2())!==a?(Q(),(xe=rd())!==a?y=fwe(E,T,xe):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)),y}function iG(){var y,E,T,F,xe;return y=x,E=x,(T=L1())!==a?(F=Q(),(xe=fG())!==a?E=T=[T,F,xe]:(x=E,E=a)):(x=E,E=a),E!==a&&(E=mwe(E)),(y=E)===a&&(y=fG()),y}function QL(){var y,E,T,F,xe;return y=x,E=x,(T=L1())!==a?(F=Q(),(xe=s3())!==a?E=T=[T,F,xe]:(x=E,E=a)):(x=E,E=a),E!==a&&(E=gwe(E)),(y=E)===a&&(y=s3()),y}function kxe(){var y,E,T,F;return y=x,(E=iG())!==a?(Q(),(T=iv())!==a?(Q(),sSe()!==a?(Q(),(F=r3())!==a?y=ywe(E,T,F):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,(E=iG())!==a?(Q(),(T=iv())!==a?y=vwe(E,T):(x=y,y=a)):(x=y,y=a)),y}function $xe(){var y,E,T,F;return y=x,(E=QL())!==a?(Q(),(T=Mr())!==a?(Q(),(F=eG())!==a?(Q(),Or()!==a?y=bwe(E,F):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,(E=QL())!==a?(Q(),(T=Mr())!==a?(Q(),(F=Or())!==a?y=_we(E):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,(E=QL())!==a?(Q(),(T=n3())!==a?y=wwe(E,T):(x=y,y=a)):(x=y,y=a))),y}function rd(){var y,E,T,F,xe,gt,oi,Ri;if(y=x,(E=e3())!==a){for(T=[],F=x,xe=Q(),(gt=nG())!==a?(oi=Q(),(Ri=e3())!==a?F=xe=[xe,gt,oi,Ri]:(x=F,F=a)):(x=F,F=a);F!==a;)T.push(F),F=x,xe=Q(),(gt=nG())!==a?(oi=Q(),(Ri=e3())!==a?F=xe=[xe,gt,oi,Ri]:(x=F,F=a)):(x=F,F=a);y=xwe(E,T)}else x=y,y=a;return y}function nG(){var y;return r.charCodeAt(x)===43?(y=C,x++):(y=a,J===0&&ve(eo)),y===a&&(r.charCodeAt(x)===45?(y=$,x++):(y=a,J===0&&ve(Um)),y===a&&(r.substr(x,2)===M?(y=M,x+=2):(y=a,J===0&&ve($e)))),y}function e3(){var y,E,T,F,xe,gt,oi,Ri;if(y=x,(E=t3())!==a){for(T=[],F=x,xe=Q(),(gt=rG())!==a?(oi=Q(),(Ri=t3())!==a?F=xe=[xe,gt,oi,Ri]:(x=F,F=a)):(x=F,F=a);F!==a;)T.push(F),F=x,xe=Q(),(gt=rG())!==a?(oi=Q(),(Ri=t3())!==a?F=xe=[xe,gt,oi,Ri]:(x=F,F=a)):(x=F,F=a);y=Swe(E,T)}else x=y,y=a;return y}function rG(){var y;return r.charCodeAt(x)===42?(y=P,x++):(y=a,J===0&&ve(ev)),y===a&&(r.charCodeAt(x)===47?(y=k,x++):(y=a,J===0&&ve(Sn))),y}function t3(){var y,E;return(y=Vxe())===a&&(y=Pxe())===a&&(y=Rxe())===a&&(y=Fxe())===a&&(y=Nxe())===a&&(y=Lxe())===a&&(y=zxe())===a&&(y=Zxe())===a&&(y=Axe())===a&&(y=n3())===a&&(y=x,Mr()!==a?(Q(),(E=nn())!==a?(Q(),Or()!==a?y=Ewe(E):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)),y}function Axe(){var y;return(y=Mxe())!==a&&(y=Cwe(y)),y}function Mxe(){var y;return(y=Oxe())!==a&&(y=Iwe(y)),y}function Oxe(){var y,E,T,F;if(y=x,(E=i3())!==a){for(T=[],F=oG();F!==a;)T.push(F),F=oG();y=Twe(E,T)}else x=y,y=a;return y}function sG(){var y,E,T,F;if(y=x,(E=i3())!==a){for(T=[],F=Qe();F!==a;)T.push(F),F=Qe();y=kwe(E,T)}else x=y,y=a;return y}function i3(){var y;return kL.test(r.charAt(x))?(y=r.charAt(x),x++):(y=a,J===0&&ve(Bm)),y}function Qe(){var y;return $L.test(r.charAt(x))?(y=r.charAt(x),x++):(y=a,J===0&&ve(zL)),y}function oG(){var y;return AL.test(r.charAt(x))?(y=r.charAt(x),x++):(y=a,J===0&&ve($l)),y}function n3(){var y,E,T;return y=x,r.charCodeAt(x)===64?(E=D,x++):(E=a,J===0&&ve(x2)),E!==a&&(T=sG())!==a?y=E=[E,T]:(x=y,y=a),y!==a&&(y=$we(y)),y}function Pxe(){var y,E,T;return y=x,lSe()!==a?(Q(),Mr()!==a?(Q(),(E=jxe())!==a?(Q(),o3()!==a?(Q(),(T=nn())!==a?(Q(),Or()!==a?y=Awe(E,T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y}function Rxe(){var y,E,T,F,xe,gt,oi;return y=x,aSe()!==a?(Q(),Mr()!==a?(Q(),(E=nn())!==a?(Q(),o3()!==a?(Q(),(T=nn())!==a?(Q(),F=x,(xe=oSe())!==a?(gt=Q(),(oi=nn())!==a?F=xe=[xe,gt,oi,Q()]:(x=F,F=a)):(x=F,F=a),F===a&&(F=null),(xe=Or())!==a?y=Mwe(E,T,F):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y}function Lxe(){var y,E,T;return y=x,pSe()!==a?(Q(),Mr()!==a?(Q(),(E=nn())!==a?(Q(),fSe()!==a?(Q(),(T=Dxe())!==a?(Q(),Or()!==a?y=Owe(E,T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y}function Dxe(){var y,E,T;return y=x,(E=mSe())!==a&&(E=Pwe()),(y=E)===a&&(y=x,(E=gSe())!==a&&(E=Rwe()),(y=E)===a&&(y=x,(E=ySe())!==a&&(E=Lwe()),(y=E)===a&&(y=x,(E=vSe())!==a&&(E=Dwe()),(y=E)===a&&(y=x,(E=bG())!==a&&(E=Fwe()),(y=E)===a&&(y=x,(E=vG())!==a&&(E=Nwe()),(y=E)===a&&(y=x,(E=bSe())!==a?(Q(),Mr()!==a?(Q(),(T=Hm())!==a?(Q(),Or()!==a?y=zwe(T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a))))))),y}function Fxe(){var y,E,T,F;return y=x,yG()!==a?(Q(),Mr()!==a?(Q(),(E=aG())===a&&(E=null),Q(),(T=nn())!==a?(Q(),o3()!==a?(Q(),(F=nn())!==a?(Q(),Or()!==a?y=jwe(E,T,F):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,yG()!==a?(Q(),Mr()!==a?(Q(),(E=aG())===a&&(E=null),Q(),(T=nn())!==a?(Q(),Or()!==a?y=Vwe(E,T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)),y}function aG(){var y;return(y=uSe())===a&&(y=dSe())===a&&(y=hSe()),y}function Nxe(){var y,E,T;return y=x,cSe()!==a?(Q(),Mr()!==a?(Q(),(E=nn())!==a?(Q(),s3()!==a?(Q(),(T=nn())!==a?(Q(),Or()!==a?y=Uwe(E,T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y}function zxe(){var y,E,T;return y=x,(E=xSe())!==a?(Q(),Mr()!==a?(Q(),(T=eG())===a&&(T=null),Q(),Or()!==a?y=Bwe(E,T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y}function jxe(){var y;return(y=wG())===a&&(y=xG())===a&&(y=SG())===a&&(y=EG())===a&&(y=CG())===a&&(y=Gm()),y}function Vxe(){var y;return(y=r3())===a&&(y=Qxe())===a&&(y=Yxe())===a&&(y=Jxe())===a&&(y=Wxe())===a&&(y=Uxe())===a&&(y=Bxe()),y}function Uxe(){var y,E;return y=x,vG()!==a?(Q(),(E=iv())!==a?y=Hwe(E):(x=y,y=a)):(x=y,y=a),y}function Bxe(){var y,E,T,F;return y=x,_G()!==a?(Q(),r.charCodeAt(x)===45?(E=$,x++):(E=a,J===0&&ve(Um)),E===a&&(r.charCodeAt(x)===43?(E=C,x++):(E=a,J===0&&ve(eo))),E!==a?(Q(),(T=iv())!==a?(Q(),(F=lG())!==a?y=Gwe(E,T,F):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,_G()!==a?(Q(),(E=iv())!==a?(Q(),(T=lG())!==a?y=qwe(E,T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)),y}function lG(){var y,E,T;return y=x,(E=Hxe())!==a?(Q(),_Se()!==a?(Q(),(T=Gxe())!==a?y=Wwe(E,T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=qxe()),y}function Hxe(){var y,E,T;return y=x,(E=R1())!==a?(Q(),Mr()!==a?(Q(),(T=k2())!==a?(Q(),Or()!==a?y=Jwe(E,T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,(E=R1())!==a&&(E=Ywe(E)),y=E),y}function Gxe(){var y,E,T,F;return y=x,(E=R1())!==a&&(E=Zwe(E)),(y=E)===a&&(y=x,(E=Gm())!==a?(Q(),Mr()!==a?(Q(),(T=k2())!==a?(Q(),L2()!==a?(Q(),(F=T2())!==a?(Q(),Or()!==a?y=Kwe(T,F):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,(E=Gm())!==a?(Q(),Mr()!==a?(Q(),(T=k2())!==a?(Q(),Or()!==a?y=Xwe(T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,(E=Gm())!==a&&(E=Qwe()),y=E))),y}function qxe(){var y,E,T,F;return y=x,(E=R1())!==a?(Q(),Mr()!==a?(Q(),(T=T2())!==a?(Q(),Or()!==a?y=e1e(E,T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,(E=R1())!==a&&(E=t1e(E)),(y=E)===a&&(y=x,(E=Gm())!==a?(Q(),Mr()!==a?(Q(),(T=k2())!==a?(Q(),L2()!==a?(Q(),(F=T2())!==a?(Q(),Or()!==a?y=i1e(T,F):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,(E=Gm())!==a?(Q(),Mr()!==a?(Q(),(T=T2())!==a?(Q(),Or()!==a?y=n1e(T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y===a&&(y=x,(E=Gm())!==a&&(E=r1e()),y=E)))),y}function R1(){var y,E;return y=x,(E=SG())!==a&&(E=s1e()),(y=E)===a&&(y=x,(E=EG())!==a&&(E=o1e()),(y=E)===a&&(y=x,(E=CG())!==a&&(E=a1e()),(y=E)===a&&(y=x,(E=xG())!==a&&(E=l1e()),(y=E)===a&&(y=x,(E=wG())!==a&&(E=c1e()),y=E)))),y}function T2(){var y;return(y=Hm())!==a&&(y=u1e(y)),y}function k2(){var y;return(y=Hm())!==a&&(y=d1e(y)),y}function Wxe(){var y,E;return y=x,bG()!==a?(Q(),(E=iv())!==a?y=h1e(E):(x=y,y=a)):(x=y,y=a),y}function Jxe(){var y;return(y=iSe())!==a&&(y=p1e()),y}function Yxe(){var y,E;return y=x,(E=nSe())!==a&&(E=f1e()),(y=E)===a&&(y=x,(E=rSe())!==a&&(E=m1e()),y=E),y}function iv(){var y;return(y=r3())===a&&(y=n3()),y}function r3(){var y,E,T,F,xe;if(y=x,r.charCodeAt(x)===39?(E=z,x++):(E=a,J===0&&ve(A1)),E===a&&(r.substr(x,2)===B?(E=B,x+=2):(E=a,J===0&&ve(Ye))),E!==a){for(T=[],F=x,r.substr(x,2)===j?(xe=j,x+=2):(xe=a,J===0&&ve(S2)),xe!==a&&(xe=ZH()),(F=xe)===a&&(b2.test(r.charAt(x))?(F=r.charAt(x),x++):(F=a,J===0&&ve(M1)));F!==a;)T.push(F),F=x,r.substr(x,2)===j?(xe=j,x+=2):(xe=a,J===0&&ve(S2)),xe!==a&&(xe=ZH()),(F=xe)===a&&(b2.test(r.charAt(x))?(F=r.charAt(x),x++):(F=a,J===0&&ve(M1)));r.charCodeAt(x)===39?(F=z,x++):(F=a,J===0&&ve(A1)),F!==a?y=g1e(T):(x=y,y=a)}else x=y,y=a;return y}function Zxe(){var y;return(y=Kxe())===a&&(y=Xxe()),y}function Kxe(){var y,E,T,F,xe;if(y=x,P2()!==a)if(Q(),(E=nn())!==a){for(Q(),T=[],F=A2();F!==a;)T.push(F),F=A2();F=Q(),(xe=R2())!==a?y=y1e(E,T):(x=y,y=a)}else x=y,y=a;else x=y,y=a;if(y===a)if(y=x,P2()!==a)if(Q(),(E=nn())!==a){for(Q(),T=[],F=A2();F!==a;)T.push(F),F=A2();F=Q(),(xe=cG())!==a?(Q(),R2()!==a?y=v1e(E,T,xe):(x=y,y=a)):(x=y,y=a)}else x=y,y=a;else x=y,y=a;return y}function Xxe(){var y,E,T,F;if(y=x,P2()!==a){for(Q(),E=[],T=$2();T!==a;)E.push(T),T=$2();T=Q(),(F=R2())!==a?y=b1e(E):(x=y,y=a)}else x=y,y=a;if(y===a)if(y=x,P2()!==a){for(Q(),E=[],T=$2();T!==a;)E.push(T),T=$2();T=Q(),(F=cG())!==a?(Q(),R2()!==a?y=_1e(E,F):(x=y,y=a)):(x=y,y=a)}else x=y,y=a;return y}function $2(){var y,E,T;return y=x,IG()!==a?(Q(),(E=nn())!==a?(Q(),TG()!==a?(Q(),(T=nn())!==a?y=w1e(E,T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y}function A2(){var y,E,T;return y=x,IG()!==a?(Q(),(E=nn())!==a?(Q(),TG()!==a?(Q(),(T=nn())!==a?y=x1e(E,T):(x=y,y=a)):(x=y,y=a)):(x=y,y=a)):(x=y,y=a),y}function cG(){var y,E;return y=x,wSe()!==a?(Q(),(E=nn())!==a?y=S1e(E):(x=y,y=a)):(x=y,y=a),y}function Qxe(){var y,E,T,F;return y=x,(E=eSe())!==a?(T=x,J++,F=i3(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=E1e(E):(x=y,y=a)):(x=y,y=a),y}function eSe(){var y,E,T,F;return y=x,(E=M2())!==a&&(T=uG())!==a&&(F=dG())!==a?y=C1e(E,T,F):(x=y,y=a),y===a&&(y=x,(E=M2())!==a&&(T=uG())!==a?y=I1e(E,T):(x=y,y=a),y===a&&(y=x,(E=M2())!==a&&(T=dG())!==a?y=T1e(E,T):(x=y,y=a),y===a&&(y=x,(E=M2())!==a&&(E=k1e(E)),y=E))),y}function M2(){var y,E,T;return(y=Hm())===a&&(y=x,r.charCodeAt(x)===45?(E=$,x++):(E=a,J===0&&ve(Um)),E===a&&(r.charCodeAt(x)===43?(E=C,x++):(E=a,J===0&&ve(eo))),E!==a&&(T=Hm())!==a?y=$1e(E,T):(x=y,y=a)),y}function uG(){var y,E,T;return y=x,r.charCodeAt(x)===46?(E=K,x++):(E=a,J===0&&ve(jL)),E!==a?((T=Hm())===a&&(T=null),y=A1e(T)):(x=y,y=a),y}function dG(){var y,E,T;return y=x,(E=tSe())!==a&&(T=Hm())!==a?y=M1e(E,T):(x=y,y=a),y}function Hm(){var y,E;if(y=[],(E=hG())!==a)for(;E!==a;)y.push(E),E=hG();else y=a;return y!==a&&(y=O1e(y)),y}function hG(){var y;return ML.test(r.charAt(x))?(y=r.charAt(x),x++):(y=a,J===0&&ve(VL)),y}function tSe(){var y,E,T;return y=x,OL.test(r.charAt(x))?(E=r.charAt(x),x++):(E=a,J===0&&ve(O1)),E!==a?(PL.test(r.charAt(x))?(T=r.charAt(x),x++):(T=a,J===0&&ve(UL)),T===a&&(T=null),y=P1e(E,T)):(x=y,y=a),y}function iSe(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===ie?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(P1)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=E=[E,T]:(x=y,y=a)):(x=y,y=a),y}function nSe(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===te?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(En)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=E=[E,T]:(x=y,y=a)):(x=y,y=a),y}function rSe(){var y,E,T,F;return y=x,r.substr(x,5).toLowerCase()===me?(E=r.substr(x,5),x+=5):(E=a,J===0&&ve(BL)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=E=[E,T]:(x=y,y=a)):(x=y,y=a),y}function s3(){var y,E,T,F;return y=x,r.substr(x,2).toLowerCase()===Ie?(E=r.substr(x,2),x+=2):(E=a,J===0&&ve(E2)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=R1e():(x=y,y=a)):(x=y,y=a),y}function pG(){var y,E,T,F;return y=x,r.substr(x,2).toLowerCase()===Me?(E=r.substr(x,2),x+=2):(E=a,J===0&&ve(HL)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=L1e():(x=y,y=a)):(x=y,y=a),y}function fG(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===oe?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(GL)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=D1e():(x=y,y=a)):(x=y,y=a),y}function sSe(){var y,E,T,F;return y=x,r.substr(x,6).toLowerCase()===ge?(E=r.substr(x,6),x+=6):(E=a,J===0&&ve(qL)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=F1e():(x=y,y=a)):(x=y,y=a),y}function L1(){var y,E,T,F;return y=x,r.substr(x,3).toLowerCase()===he?(E=r.substr(x,3),x+=3):(E=a,J===0&&ve(WL)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=N1e():(x=y,y=a)):(x=y,y=a),y}function O2(){var y,E,T,F;return y=x,r.substr(x,3).toLowerCase()===et?(E=r.substr(x,3),x+=3):(E=a,J===0&&ve(JL)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=z1e():(x=y,y=a)):(x=y,y=a),y}function mG(){var y,E,T,F;return y=x,r.substr(x,2).toLowerCase()===wt?(E=r.substr(x,2),x+=2):(E=a,J===0&&ve(to)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=j1e():(x=y,y=a)):(x=y,y=a),y}function gG(){var y,E,T,F;return y=x,r.substr(x,7).toLowerCase()===pr?(E=r.substr(x,7),x+=7):(E=a,J===0&&ve(YL)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=V1e():(x=y,y=a)):(x=y,y=a),y}function o3(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===xn?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(ZL)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=U1e():(x=y,y=a)):(x=y,y=a),y}function oSe(){var y,E,T,F;return y=x,r.substr(x,3).toLowerCase()===fr?(E=r.substr(x,3),x+=3):(E=a,J===0&&ve(V)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=B1e():(x=y,y=a)):(x=y,y=a),y}function aSe(){var y,E,T,F;return y=x,r.substr(x,9).toLowerCase()===Ar?(E=r.substr(x,9),x+=9):(E=a,J===0&&ve(ne)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=H1e():(x=y,y=a)):(x=y,y=a),y}function lSe(){var y,E,T,F;return y=x,r.substr(x,7).toLowerCase()===Qs?(E=r.substr(x,7),x+=7):(E=a,J===0&&ve(ce)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=G1e():(x=y,y=a)):(x=y,y=a),y}function yG(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===Tl?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(tt)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=q1e():(x=y,y=a)):(x=y,y=a),y}function cSe(){var y,E,T,F;return y=x,r.substr(x,8).toLowerCase()===Fm?(E=r.substr(x,8),x+=8):(E=a,J===0&&ve(Vn)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=W1e():(x=y,y=a)):(x=y,y=a),y}function vG(){var y,E,T,F;return y=x,r.substr(x,9).toLowerCase()===E1?(E=r.substr(x,9),x+=9):(E=a,J===0&&ve(wi)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=J1e():(x=y,y=a)):(x=y,y=a),y}function bG(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===Nm?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(io)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=Y1e():(x=y,y=a)):(x=y,y=a),y}function uSe(){var y,E,T,F;return y=x,r.substr(x,7).toLowerCase()===C1?(E=r.substr(x,7),x+=7):(E=a,J===0&&ve(tv)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=Z1e():(x=y,y=a)):(x=y,y=a),y}function dSe(){var y,E,T,F;return y=x,r.substr(x,8).toLowerCase()===W0?(E=r.substr(x,8),x+=8):(E=a,J===0&&ve(O_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=K1e():(x=y,y=a)):(x=y,y=a),y}function hSe(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===I1?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(P_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=X1e():(x=y,y=a)):(x=y,y=a),y}function pSe(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===T1?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(R_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=Q1e():(x=y,y=a)):(x=y,y=a),y}function fSe(){var y,E,T,F;return y=x,r.substr(x,2).toLowerCase()===J0?(E=r.substr(x,2),x+=2):(E=a,J===0&&ve(L_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=exe():(x=y,y=a)):(x=y,y=a),y}function mSe(){var y,E,T,F;return y=x,r.substr(x,7).toLowerCase()===Y0?(E=r.substr(x,7),x+=7):(E=a,J===0&&ve(D_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=txe():(x=y,y=a)):(x=y,y=a),y}function gSe(){var y,E,T,F;return y=x,r.substr(x,8).toLowerCase()===k1?(E=r.substr(x,8),x+=8):(E=a,J===0&&ve(F_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=ixe():(x=y,y=a)):(x=y,y=a),y}function ySe(){var y,E,T,F;return y=x,r.substr(x,5).toLowerCase()===$1?(E=r.substr(x,5),x+=5):(E=a,J===0&&ve(N_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=nxe():(x=y,y=a)):(x=y,y=a),y}function vSe(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===kl?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(z_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=rxe():(x=y,y=a)):(x=y,y=a),y}function bSe(){var y,E,T,F;return y=x,r.substr(x,7).toLowerCase()===Wh?(E=r.substr(x,7),x+=7):(E=a,J===0&&ve(j_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=sxe():(x=y,y=a)):(x=y,y=a),y}function _Se(){var y,E,T,F;return y=x,r.substr(x,2).toLowerCase()===Z0?(E=r.substr(x,2),x+=2):(E=a,J===0&&ve(V_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=oxe():(x=y,y=a)):(x=y,y=a),y}function _G(){var y,E,T,F;return y=x,r.substr(x,8).toLowerCase()===K0?(E=r.substr(x,8),x+=8):(E=a,J===0&&ve(U_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=axe():(x=y,y=a)):(x=y,y=a),y}function wG(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===zm?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(B_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=lxe():(x=y,y=a)):(x=y,y=a),y}function xG(){var y,E,T,F;return y=x,r.substr(x,5).toLowerCase()===jm?(E=r.substr(x,5),x+=5):(E=a,J===0&&ve(H_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=cxe():(x=y,y=a)):(x=y,y=a),y}function SG(){var y,E,T,F;return y=x,r.substr(x,3).toLowerCase()===Vm?(E=r.substr(x,3),x+=3):(E=a,J===0&&ve(G_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=uxe():(x=y,y=a)):(x=y,y=a),y}function EG(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===Ho?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(q_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=dxe():(x=y,y=a)):(x=y,y=a),y}function CG(){var y,E,T,F;return y=x,r.substr(x,6).toLowerCase()===X0?(E=r.substr(x,6),x+=6):(E=a,J===0&&ve(W_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=hxe():(x=y,y=a)):(x=y,y=a),y}function Gm(){var y,E,T,F;return y=x,r.substr(x,6).toLowerCase()===bL?(E=r.substr(x,6),x+=6):(E=a,J===0&&ve(J_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=pxe():(x=y,y=a)):(x=y,y=a),y}function P2(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===_L?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(Y_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=fxe():(x=y,y=a)):(x=y,y=a),y}function R2(){var y,E,T,F;return y=x,r.substr(x,3).toLowerCase()===wL?(E=r.substr(x,3),x+=3):(E=a,J===0&&ve(Z_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=mxe():(x=y,y=a)):(x=y,y=a),y}function IG(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===xL?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(K_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=gxe():(x=y,y=a)):(x=y,y=a),y}function TG(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===SL?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(X_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=yxe():(x=y,y=a)):(x=y,y=a),y}function wSe(){var y,E,T,F;return y=x,r.substr(x,4).toLowerCase()===EL?(E=r.substr(x,4),x+=4):(E=a,J===0&&ve(Q_e)),E!==a?(T=x,J++,F=Qe(),J--,F===a?T=void 0:(x=T,T=a),T!==a?y=vxe():(x=y,y=a)):(x=y,y=a),y}function L2(){var y;return r.charCodeAt(x)===44?(y=CL,x++):(y=a,J===0&&ve(ewe)),y}function Mr(){var y;return r.charCodeAt(x)===40?(y=IL,x++):(y=a,J===0&&ve(twe)),y}function Or(){var y;return r.charCodeAt(x)===41?(y=TL,x++):(y=a,J===0&&ve(iwe)),y}function Q(){var y,E;for(y=[],E=kG();E!==a;)y.push(E),E=kG();return y}function kG(){var y;return RL.test(r.charAt(x))?(y=r.charAt(x),x++):(y=a,J===0&&ve(nwe)),y}function xSe(){var y,E,T,F;if(y=x,(E=sG())!==a&&(E=bxe(E)),(y=E)===a)if(y=x,r.charCodeAt(x)===96?(E=v2,x++):(E=a,J===0&&ve(JH)),E!==a){if(T=[],_2.test(r.charAt(x))?(F=r.charAt(x),x++):(F=a,J===0&&ve(YH)),F!==a)for(;F!==a;)T.push(F),_2.test(r.charAt(x))?(F=r.charAt(x),x++):(F=a,J===0&&ve(YH));else T=a;T!==a?(r.charCodeAt(x)===96?(F=v2,x++):(F=a,J===0&&ve(JH)),F!==a?y=_xe(T):(x=y,y=a)):(x=y,y=a)}else x=y,y=a;return y}function SSe(y,E){return{type:"unary-expression",operator:y,expr:E}}function $G(y,E,T,F){var xe={type:"binary-expression",operator:y,left:E,right:T};return F!==void 0&&(xe.escape=F),xe}function ESe(y,E){for(var T=[y],F=0;F<E.length;F++)T.push(E[F][3]);return T}function CSe(y,E,T){return ESe(y,E)}function D1(y,E){for(var T=y,F=0;F<E.length;F++)T=$G(E[F][1],T,E[F][3]);return T}if((o=h())!==a&&x===r.length)return o;throw o!==a&&x<r.length&&ve(wxe()),xxe(KL,Bc<r.length?r.charAt(Bc):null,Bc<r.length?XH(Bc,Bc+1):XH(Bc,Bc))}return t(e,Error),e.prototype.format=function(r){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<r.length;o++)if(r[o].source===this.location.source){a=r[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,u=this.location.source+":"+l.line+":"+l.column;if(a){var h=this.location.end,p=i("",l.line.toString().length," "),f=a[l.line-1],g=(l.line===h.line?h.column:f.length+1)-l.column||1;s+=`
 --> `+u+`
`+p+` |
`+l.line+" | "+f+`
`+p+" | "+i("",l.column-1," ")+i("",g,"^")}else s+=`
 at `+u}return s},e.buildMessage=function(r,s){var o={literal:function(g){return'"'+l(g.text)+'"'},class:function(g){var v=g.parts.map(function(b){return Array.isArray(b)?u(b[0])+"-"+u(b[1]):u(b)});return"["+(g.inverted?"^":"")+v.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(g){return g.description}};function a(g){return g.charCodeAt(0).toString(16).toUpperCase()}function l(g){return g.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+a(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+a(v)})}function u(g){return g.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+a(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+a(v)})}function h(g){return o[g.type](g)}function p(g){var v,b,_=g.map(h);if(_.sort(),_.length>0){for(v=1,b=1;v<_.length;v++)_[v-1]!==_[v]&&(_[b]=_[v],b++);_.length=b}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function f(g){return g?'"'+l(g)+'"':"end of input"}return"Expected "+p(r)+" but "+f(s)+" found."},{SyntaxError:e,parse:n}},(gte={get exports(){return cU},set exports(t){cU=t}}).exports&&(gte.exports=yte());let fst=class{static parse(e){return cU.parse(e)}};const Mve=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,mst=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,gst=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,yst=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,vst=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,bst=new Set(["current_timestamp","current_date","current_time"]);function lg(t,e){return(t+="").length>=e?t:new Array(e-t.length+1).join("0")+t}function $x(t,e,i="0",n="0",r="0",s="0",o="",a="0",l="0"){if(o==="+"||o==="-"){const u=`${lg(parseInt(t,10),4)}-${lg(parseInt(e,10),2)}-${lg(parseInt(i,10),2)}`;let h="";parseFloat(s)<10&&(h="0");const p=`${lg(parseInt(n,10),2)}:${lg(parseInt(r,10),2)}:${h+parseFloat(s).toString()}`,f=`${o}${lg(parseInt(a,10),2)}:${lg(parseInt(l,10),2)}`;return new Date(u+"T"+p+f)}return new Date(parseInt(t,10),parseInt(e,10)-1,parseInt(i,10),parseInt(n,10),parseInt(r,10),parseFloat(s))}let _st=class{static makeBool(e){return Rve(e)}static featureValue(e,i,n,r){return zve(e,i,n,r)}static equalsNull(e){return e===null}static applyLike(e,i,n){return pU(e,i,n)}static ensureArray(e){return dU(e)}static applyIn(e,i){return hU(e,i)}static currentDate(){const e=new Date;return e.setHours(0,0,0,0),e}static makeSqlInterval(e,i,n){return th.createFromValueAndQualifer(e,i,n)}static convertInterval(e){return e instanceof th?e.valueInMilliseconds():e}static currentTimestamp(){return new Date}static compare(e,i,n){return Fve(e,i,n)}static calculate(e,i,n){return Nve(e,i,n)}static makeComparable(e){return Kd(e)}static evaluateFunction(e,i){return fH(e,i)}static lookup(e,i){const n=i[e];return n===void 0?null:n}static between(e,i){return e==null||i[0]==null||i[1]==null?null:e>=i[0]&&e<=i[1]}static notbetween(e,i){return e==null||i[0]==null||i[1]==null?null:e<i[0]||e>i[1]}static ternaryNot(e){return MA(e)}static ternaryAnd(e,i){return Lve(e,i)}static ternaryOr(e,i){return Dve(e,i)}},Ove=class Pve{constructor(e,i){this.fieldsIndex=i,this._datefields={},this.parameters={},this._hasDateFunctions=void 0,this.parseTree=fst.parse(e);const{isStandardized:n,isAggregate:r,referencedFieldNames:s}=this._extractExpressionInfo(i);this._referencedFieldNames=s,this.isStandardized=n,this.isAggregate=r}static create(e,i){return new Pve(e,i)}get fieldNames(){return this._referencedFieldNames}testSet(e,i=cy){const n={};for(const r of this.fieldNames)n[r]=e.map(s=>i.getAttribute(s,r));return!!this._evaluateNode(this.parseTree,{attributes:n},cy)}calculateValue(e,i=cy){const n=this._evaluateNode(this.parseTree,e,i);return n instanceof th?n.valueInMilliseconds()/864e5:n}calculateValueCompiled(e,i=cy){return this.parseTree._compiledVersion!=null?this.parseTree._compiledVersion(e,this.parameters,i,this._datefields):ee("esri-csp-restrictions")?this.calculateValue(e,i):(this._compileMe(),this.parseTree._compiledVersion(e,this.parameters,i,this._datefields))}testFeature(e,i=cy){return!!this._evaluateNode(this.parseTree,e,i)}testFeatureCompiled(e,i=cy){return this.parseTree._compiledVersion!=null?!!this.parseTree._compiledVersion(e,this.parameters,i,this._datefields):ee("esri-csp-restrictions")?this.testFeature(e,i):(this._compileMe(),!!this.parseTree._compiledVersion(e,this.parameters,i,this._datefields))}get hasDateFunctions(){return this._hasDateFunctions!=null||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,e=>{e.type==="current-time"?this._hasDateFunctions=!0:e.type==="function"&&(this._hasDateFunctions=this._hasDateFunctions||bst.has(e.name.toLowerCase()))})),this._hasDateFunctions}getFunctions(){const e=new Set;return this._visitAll(this.parseTree,i=>{i.type==="function"&&e.add(i.name.toLowerCase())}),Array.from(e)}getExpressions(){const e=new Map;return this._visitAll(this.parseTree,i=>{if(i.type==="function"){const n=i.name.toLowerCase(),r=i.args.value[0];if(r.type==="column-reference"){const s=r.column,o=`${n}-${s}`;e.has(o)||e.set(o,{aggregateType:n,field:s})}}}),[...e.values()]}getVariables(){const e=new Set;return this._visitAll(this.parseTree,i=>{i.type==="parameter"&&e.add(i.value.toLowerCase())}),Array.from(e)}_compileMe(){const e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","datefields",e).bind(_st)}_extractExpressionInfo(e){const i=[],n=new Set;let r=!0,s=!0;return this._visitAll(this.parseTree,o=>{switch(o.type){case"column-reference":{const a=e==null?void 0:e.get(o.column);let l,u;a?l=u=a.name??"":(u=o.column,l=u.toLowerCase()),a&&a.name&&(a.type==="date"||a.type==="esriFieldTypeDate")&&(this._datefields[a.name]=1),n.has(l)||(n.add(l),i.push(u)),o.column=u;break}case"function":{const{name:a,args:l}=o,u=l.value.length;r&&(r=dst(a,u)),s&&(s=ast(a,u));break}}}),{referencedFieldNames:Array.from(i),isStandardized:r,isAggregate:s}}_visitAll(e,i){if(e!=null)switch(i(e),e.type){case"when-clause":this._visitAll(e.operand,i),this._visitAll(e.value,i);break;case"case-expression":for(const n of e.clauses)this._visitAll(n,i);e.format==="simple"&&this._visitAll(e.operand,i),e.else!==null&&this._visitAll(e.else,i);break;case"expression-list":for(const n of e.value)this._visitAll(n,i);break;case"unary-expression":this._visitAll(e.expr,i);break;case"binary-expression":this._visitAll(e.left,i),this._visitAll(e.right,i);break;case"function":this._visitAll(e.args,i)}}evaluateNodeToJavaScript(e){switch(e.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case"case-expression":{let i="";if(e.format==="simple"){const n="this.makeComparable("+this.evaluateNodeToJavaScript(e.operand)+")";i="( ";for(let r=0;r<e.clauses.length;r++)i+=" ("+n+" === this.makeComparable("+this.evaluateNodeToJavaScript(e.clauses[r].operand)+")) ? ("+this.evaluateNodeToJavaScript(e.clauses[r].value)+") : ";e.else!==null?i+=this.evaluateNodeToJavaScript(e.else):i+="null",i+=" )"}else{i="( ";for(let n=0;n<e.clauses.length;n++)i+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[n].operand)+")===true ? ("+this.evaluateNodeToJavaScript(e.clauses[n].value)+") : ";e.else!==null?i+=this.evaluateNodeToJavaScript(e.else):i+="null",i+=" )"}return i}case"parameter":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+",lookups)";case"expression-list":{let i="[";for(const n of e.value)i!=="["&&(i+=","),i+=this.evaluateNodeToJavaScript(n);return i+="]",i}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case"binary-expression":switch(e.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"IS":if(e.right.type!=="null")throw new Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case"ISNOT":if(e.right.type!=="null")throw new Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+")"}throw new Error("Not Supported Operator "+e.operator);case"null":case"boolean":case"string":case"number":return JSON.stringify(e.value);case"date":return"(new Date("+vte(e.value).getTime().toString()+"))";case"timestamp":return"(new Date("+uU(e.value).getTime().toString()+"))";case"current-time":return e.mode==="date"?"this.currentDate()":"this.currentTimestamp()";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(e.column)+",datefields,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+")"}throw new Error("Unsupported sql syntax "+e.type)}_evaluateNode(e,i,n){switch(e.type){case"interval":{const r=this._evaluateNode(e.value,i,n);return th.createFromValueAndQualifer(r,e.qualifier,e.op)}case"case-expression":if(e.format==="simple"){const r=Kd(this._evaluateNode(e.operand,i,n));for(let s=0;s<e.clauses.length;s++)if(r===Kd(this._evaluateNode(e.clauses[s].operand,i,n)))return this._evaluateNode(e.clauses[s].value,i,n);if(e.else!==null)return this._evaluateNode(e.else,i,n)}else{for(let r=0;r<e.clauses.length;r++)if(Rve(this._evaluateNode(e.clauses[r].operand,i,n)))return this._evaluateNode(e.clauses[r].value,i,n);if(e.else!==null)return this._evaluateNode(e.else,i,n)}return null;case"parameter":return this.parameters[e.value.toLowerCase()];case"expression-list":{const r=[];for(const s of e.value)r.push(this._evaluateNode(s,i,n));return r}case"unary-expression":return MA(this._evaluateNode(e.expr,i,n));case"binary-expression":switch(e.operator){case"AND":return Lve(this._evaluateNode(e.left,i,n),this._evaluateNode(e.right,i,n));case"OR":return Dve(this._evaluateNode(e.left,i,n),this._evaluateNode(e.right,i,n));case"IS":if(e.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(e.left,i,n)===null;case"ISNOT":if(e.right.type!=="null")throw new Error("Unsupported RHS for IS");return this._evaluateNode(e.left,i,n)!==null;case"IN":{const r=dU(this._evaluateNode(e.right,i,n));return hU(this._evaluateNode(e.left,i,n),r)}case"NOT IN":{const r=dU(this._evaluateNode(e.right,i,n));return MA(hU(this._evaluateNode(e.left,i,n),r))}case"BETWEEN":{const r=this._evaluateNode(e.left,i,n),s=this._evaluateNode(e.right,i,n);return r==null||s[0]==null||s[1]==null?null:r>=Kd(s[0])&&r<=Kd(s[1])}case"NOTBETWEEN":{const r=this._evaluateNode(e.left,i,n),s=this._evaluateNode(e.right,i,n);return r==null||s[0]==null||s[1]==null?null:r<Kd(s[0])||r>Kd(s[1])}case"LIKE":return pU(this._evaluateNode(e.left,i,n),this._evaluateNode(e.right,i,n),e.escape);case"NOT LIKE":return MA(pU(this._evaluateNode(e.left,i,n),this._evaluateNode(e.right,i,n),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return Fve(e.operator,this._evaluateNode(e.left,i,n),this._evaluateNode(e.right,i,n));case"-":case"+":case"*":case"/":case"||":return Nve(e.operator,this._evaluateNode(e.left,i,n),this._evaluateNode(e.right,i,n))}case"null":case"boolean":case"string":case"number":return e.value;case"date":return vte(e.value);case"timestamp":return uU(e.value);case"current-time":{const r=new Date;return e.mode==="date"&&r.setHours(0,0,0,0),r}case"column-reference":return zve(i,e.column,this._datefields,n);case"data-type":return e.value;case"function":{const r=this._evaluateNode(e.args,i,n);return this.isAggregate?ost(e.name,r):fH(e.name,r)}}throw new Error("Unsupported sql syntax "+e.type)}};function uU(t){let e=mst.exec(t);if(e!==null){const[,i,n,r,s,o,a]=e;return $x(i,n,r,s,o,a)}if(e=gst.exec(t),e!==null){const[,i,n,r,s,o,a,l,u,h]=e;return $x(i,n,r,s,o,a,l,u,h)}if(e=yst.exec(t),e!==null){const[,i,n,r,s,o,a,l,u]=e;return $x(i,n,r,s,o,"0",a,l,u)}if(e=vst.exec(t),e!==null){const[,i,n,r,s,o]=e;return $x(i,n,r,s,o)}if(e=Mve.exec(t),e!==null){const[,i,n,r]=e;return $x(i,n,r)}throw new Error("SQL Invalid Timestamp")}function vte(t){const e=Mve.exec(t);if(e===null)try{return uU(t)}catch{throw new Error("SQL Invalid Date")}const[,i,n,r]=e;return new Date(parseInt(i,10),parseInt(n,10)-1,parseInt(r,10))}function Rve(t){return t===!0}function dU(t){return Array.isArray(t)?t:[t]}function MA(t){return t!==null?t!==!0:null}function Lve(t,e){return t!=null&&e!=null?t===!0&&e===!0:t!==!1&&e!==!1&&null}function Dve(t,e){return t!=null&&e!=null?t===!0||e===!0:t===!0||e===!0||null}function hU(t,e){if(t==null)return null;let i=!1;for(const n of e)if(n==null)i=null;else if(t===n){i=!0;break}return i}const bte="-[]/{}()*+?.\\^$|";var Sy;function wst(t,e){const i=e;let n="",r=Sy.Normal;for(let s=0;s<t.length;s++){const o=t.charAt(s);switch(r){case Sy.Normal:o===i?r=Sy.Escaped:bte.includes(o)?n+="\\"+o:n+=o==="%"?".*":o==="_"?".":o;break;case Sy.Escaped:bte.includes(o)?n+="\\"+o:n+=o,r=Sy.Normal}}return new RegExp("^"+n+"$","m")}function pU(t,e,i){return t==null?null:wst(e,i).test(t)}function Kd(t){return t instanceof Date?t.valueOf():t}function Fve(t,e,i){if(e==null||i==null)return null;const n=Kd(e),r=Kd(i);switch(t){case"<>":return n!==r;case"=":return n===r;case">":return n>r;case"<":return n<r;case">=":return n>=r;case"<=":return n<=r}}function Nve(t,e,i){if(t==="||")return fH("concat",[e,i]);if(e instanceof th)if(i instanceof Date)switch(t){case"+":return new Date(e.valueInMilliseconds()+i.getTime());case"-":return e.valueInMilliseconds()-i.getTime();case"*":return e.valueInMilliseconds()*i.getTime();case"/":return e.valueInMilliseconds()/i.getTime()}else if(i instanceof th)switch(t){case"+":return th.createFromMilliseconds(e.valueInMilliseconds()+i.valueInMilliseconds());case"-":return th.createFromMilliseconds(e.valueInMilliseconds()-i.valueInMilliseconds());case"*":return e.valueInMilliseconds()*i.valueInMilliseconds();case"/":return e.valueInMilliseconds()/i.valueInMilliseconds()}else e=e.valueInMilliseconds();else if(i instanceof th)if(e instanceof Date)switch(t){case"+":return new Date(i.valueInMilliseconds()+e.getTime());case"-":return new Date(e.getTime()-i.valueInMilliseconds());case"*":return e.getTime()*i.valueInMilliseconds();case"/":return e.getTime()/i.valueInMilliseconds()}else i=i.valueInMilliseconds();else if(e instanceof Date&&typeof i=="number")switch(i=24*i*60*60*1e3,e=e.getTime(),t){case"+":return new Date(e+i);case"-":return new Date(e-i);case"*":return new Date(e*i);case"/":return new Date(e/i)}else if(i instanceof Date&&typeof e=="number")switch(e=24*e*60*60*1e3,i=i.getTime(),t){case"+":return new Date(e+i);case"-":return new Date(e-i);case"*":return new Date(e*i);case"/":return new Date(e/i)}switch(t){case"+":return e+i;case"-":return e-i;case"*":return e*i;case"/":return e/i}}function xst(t){return t&&typeof t.attributes=="object"}function zve(t,e,i,n){const r=n.getAttribute(t,e);return r!=null&&i[e]===1?new Date(r):r}(function(t){t[t.Normal=0]="Normal",t[t.Escaped=1]="Escaped"})(Sy||(Sy={}));const cy={getAttribute:(t,e)=>(xst(t)?t.attributes:t)[e]},jve=Object.freeze(Object.defineProperty({__proto__:null,WhereClause:Ove,defaultAttributeAdapter:cy},Symbol.toStringTag,{value:"Module"}));let Sst=class{constructor(e,i){this._cache=new W4(e),this._invalidCache=new W4(i)}get(e,i){const n=`${i.uid}:${e}`,r=this._cache.get(n);if(r)return r;if(this._invalidCache.get(n)!==void 0)return null;try{const s=Ove.create(e,i);return this._cache.put(n,s),s}catch{return this._invalidCache.put(n,null),null}}};const mH=new Sst(50,500),Xf="feature-store:unsupported-query",Vve=" as ",Est=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong","esriFieldTypeDate"]);function USt(t,e){if(!e)return!0;const i=mH.get(e,t);if(!i)throw new N(Xf,"invalid SQL expression",{where:e});if(!i.isStandardized)throw new N(Xf,"where clause is not standard",{where:e});return gH(t,i.fieldNames,"where clause contains missing fields"),!0}function BSt(t,e,i){if(!e)return!0;const n=mH.get(e,t);if(!n)throw new N(Xf,"invalid SQL expression",{having:e});if(!n.isAggregate)throw new N(Xf,"having does not contain a valid aggregate function",{having:e});const r=n.fieldNames;if(gH(t,r,"having contains missing fields"),!n.getExpressions().every(s=>{var u;const{aggregateType:o,field:a}=s,l=(u=t.get(a))==null?void 0:u.name;return i.some(h=>{var v;const{onStatisticField:p,statisticType:f}=h;return((v=t.get(p))==null?void 0:v.name)===l&&f.toLowerCase().trim()===o})}))throw new N(Xf,"expressions in having should also exist in outStatistics",{having:e});return!0}function eE(t,e){return t?mH.get(t,e):null}function gH(t,e,i,n=!0){const r=[];for(const s of e)if(s!=="*"&&!t.has(s))if(n){const o=Uve(s);try{const a=eE(o,t);if(!a)throw new N(Xf,"invalid SQL expression",{where:o});if(!a.isStandardized)throw new N(Xf,"expression is not standard",{clause:a});gH(t,a.fieldNames,"expression contains missing fields")}catch(a){const l=a&&a.details;if(l&&(l.clause||l.where))throw a;l&&l.missingFields?r.push(...l.missingFields):r.push(s)}}else r.push(s);if(r.length)throw new N(Xf,i,{missingFields:r})}function Uve(t){return t.split(Vve)[0]}function Cst(t){return t.split(Vve)[1]}function HSt(t,e){const i=e.get(t);return!!i&&!Est.has(i.type)}const _te=new Fe({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),wte=new Fe({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let ac=class extends Y{constructor(e){super(e),this.type="class-breaks-definition",this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null}set standardDeviationInterval(e){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",e)}set definedInterval(e){this.classificationMethod==="defined-interval"&&this._set("definedInterval",e)}};c([Ce({classBreaksDef:"class-breaks-definition"})],ac.prototype,"type",void 0),c([d({json:{write:!0}})],ac.prototype,"breakCount",void 0),c([d({json:{write:!0}})],ac.prototype,"classificationField",void 0),c([d({type:String,json:{read:_te.read,write:_te.write}})],ac.prototype,"classificationMethod",void 0),c([d({json:{write:!0}})],ac.prototype,"normalizationField",void 0),c([d({json:{read:wte.read,write:wte.write}})],ac.prototype,"normalizationType",void 0),c([d({value:null,json:{write:!0}})],ac.prototype,"standardDeviationInterval",null),c([d({value:null,json:{write:!0}})],ac.prototype,"definedInterval",null),ac=c([O("esri.rest.support.ClassBreaksDefinition")],ac);const Ist=ac,Tst=se.getLogger("esri.rest.support.generateRendererUtils");function Iv(t,e){return Number(t.toFixed(e))}function kst(t){const{normalizationTotal:e}=t;return{classBreaks:$st(t),normalizationTotal:e}}function $st(t){const e=t.definition,{classificationMethod:i,normalizationType:n,definedInterval:r}=e,s=e.breakCount??1,o=[];let a=t.values;if(a.length===0)return[];a=a.sort((h,p)=>h-p);const l=a[0],u=a[a.length-1];if(i==="equal-interval")if(a.length>=s){const h=(u-l)/s;let p=l;for(let f=1;f<s;f++){const g=Iv(l+f*h,6);o.push({minValue:p,maxValue:g,label:ro(p,g,n)}),p=g}o.push({minValue:p,maxValue:u,label:ro(p,u,n)})}else a.forEach(h=>{o.push({minValue:h,maxValue:h,label:ro(h,h,n)})});else if(i==="natural-breaks"){const h=Ast(a),p=t.valueFrequency||h.valueFrequency,f=Mst(h.uniqueValues,p,s);let g=l;for(let v=1;v<s;v++)if(h.uniqueValues.length>v){const b=Iv(h.uniqueValues[f[v]],6);o.push({minValue:g,maxValue:b,label:ro(g,b,n)}),g=b}o.push({minValue:g,maxValue:u,label:ro(g,u,n)})}else if(i==="quantile")if(a.length>=s&&l!==u){let h=l,p=Math.ceil(a.length/s),f=0;for(let g=1;g<s;g++){let v=p+f-1;v>a.length&&(v=a.length-1),v<0&&(v=0),o.push({minValue:h,maxValue:a[v],label:ro(h,a[v],n)}),h=a[v],f+=p,p=Math.ceil((a.length-f)/(s-g))}o.push({minValue:h,maxValue:u,label:ro(h,u,n)})}else{let h=-1;for(let p=0;p<a.length;p++){const f=a[p];f!==h&&(h=f,o.push({minValue:h,maxValue:f,label:ro(h,f,n)}),h=f)}}else if(i==="standard-deviation"){const h=Rst(a),p=Lst(a,h);if(p===0)o.push({minValue:a[0],maxValue:a[0],label:ro(a[0],a[0],n)});else{const f=Pst(l,u,s,h,p)*p;let g=0,v=l;for(let _=s;_>=1;_--){const w=Iv(h-(_-.5)*f,6);o.push({minValue:v,maxValue:w,label:ro(v,w,n)}),v=w,g++}let b=Iv(h+.5*f,6);o.push({minValue:v,maxValue:b,label:ro(v,b,n)}),v=b,g++;for(let _=1;_<=s;_++)b=g===2*s?u:Iv(h+(_+.5)*f,6),o.push({minValue:v,maxValue:b,label:ro(v,b,n)}),v=b,g++}}else if(i==="defined-interval"){if(!r)return o;const h=a[0],p=a[a.length-1],f=Math.ceil((p-h)/r);let g=h;for(let v=1;v<f;v++){const b=Iv(h+v*r,6);o.push({minValue:g,maxValue:b,label:ro(g,b,n)}),g=b}o.push({minValue:g,maxValue:p,label:ro(g,p,n)})}return o}function ro(t,e,i){let n=null;return n=t===e?i&&i==="percent-of-total"?t+"%":t.toString():i&&i==="percent-of-total"?t+"% - "+e+"%":t+" - "+e,n}function Ast(t){const e=[],i=[];let n=Number.MIN_VALUE,r=1,s=-1;for(let o=0;o<t.length;o++){const a=t[o];a===n?(r++,i[s]=r):a!==null&&(e.push(a),n=a,r=1,i.push(r),s++)}return{uniqueValues:e,valueFrequency:i}}function Mst(t,e,i){const n=t.length,r=[];i>n&&(i=n);for(let o=0;o<i;o++)r.push(Math.round(o*n/i-1));r.push(n-1);let s=xte(r,t,e,i);return Ost(s.mean,s.sdcm,r,t,e,i)&&(s=xte(r,t,e,i)),r}function xte(t,e,i,n){let r=[],s=[],o=[],a=0;const l=[],u=[];for(let g=0;g<n;g++){const v=p_(g,t,e,i);l.push(v.sbMean),u.push(v.sbSdcm),a+=u[g]}let h,p=a,f=!0;for(;f||a<p;){f=!1,r=[];for(let g=0;g<n;g++)r.push(t[g]);for(let g=0;g<n;g++)for(let v=t[g]+1;v<=t[g+1];v++)if(h=e[v],g>0&&v!==t[g+1]&&Math.abs(h-l[g])>Math.abs(h-l[g-1]))t[g]=v;else if(g<n-1&&t[g]!==v-1&&Math.abs(h-l[g])>Math.abs(h-l[g+1])){t[g+1]=v-1;break}p=a,a=0,s=[],o=[];for(let g=0;g<n;g++){s.push(l[g]),o.push(u[g]);const v=p_(g,t,e,i);l[g]=v.sbMean,u[g]=v.sbSdcm,a+=u[g]}}if(a>p){for(let g=0;g<n;g++)t[g]=r[g],l[g]=s[g],u[g]=o[g];a=p}return{mean:l,sdcm:u}}function Ost(t,e,i,n,r,s){let o=0,a=0,l=0,u=0,h=!0;for(let p=0;p<2&&h;p++){p===0&&(h=!1);for(let f=0;f<s-1;f++)for(;i[f+1]+1!==i[f+2];){i[f+1]=i[f+1]+1;const g=p_(f,i,n,r);l=g.sbMean,o=g.sbSdcm;const v=p_(f+1,i,n,r);if(u=v.sbMean,a=v.sbSdcm,!(o+a<e[f]+e[f+1])){i[f+1]=i[f+1]-1;break}e[f]=o,e[f+1]=a,t[f]=l,t[f+1]=u,h=!0}for(let f=s-1;f>0;f--)for(;i[f]!==i[f-1]+1;){i[f]=i[f]-1;const g=p_(f-1,i,n,r);l=g.sbMean,o=g.sbSdcm;const v=p_(f,i,n,r);if(u=v.sbMean,a=v.sbSdcm,!(o+a<e[f-1]+e[f])){i[f]=i[f]+1;break}e[f-1]=o,e[f]=a,t[f-1]=l,t[f]=u,h=!0}}return h}function Pst(t,e,i,n,r){let s=Math.max(n-t,e-n)/r/i;return s=s>=1?1:s>=.5?.5:.25,s}function Rst(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i];return e/=t.length,e}function Lst(t,e){let i=0;for(let n=0;n<t.length;n++){const r=t[n];i+=(r-e)*(r-e)}return i/=t.length,Math.sqrt(i)}function p_(t,e,i,n){let r=0,s=0;for(let l=e[t]+1;l<=e[t+1];l++){const u=n[l];r+=i[l]*u,s+=u}s<=0&&Tst.warn("Exception in Natural Breaks calculation");const o=r/s;let a=0;for(let l=e[t]+1;l<=e[t+1];l++)a+=n[l]*(i[l]-o)**2;return{sbMean:o,sbSdcm:a}}const Dst="<Null>",Fst="equal-interval",Nst=1,zst=5,jst=10,Vst=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,Ste=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),Ust=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function Sf(t){return t==null||typeof t=="string"&&!t?Dst:t}function Bve(t){const e=t.normalizationField!=null||t.normalizationType!=null,i=t.minValue!=null||t.maxValue!=null,n=!!t.sqlExpression&&t.supportsSQLExpression;return!e&&!i&&!n}function Ete(t){const e=t.returnDistinct?[...new Set(t.values)]:t.values,i=e.filter(r=>r!=null).length,n={count:i};return t.supportsNullCount&&(n.nullcount=e.length-i),t.percentileParams&&(n.median=yH(e,t.percentileParams)),n}function fU(t){const{values:e,useSampleStdDev:i,supportsNullCount:n}=t;let r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=null,a=null,l=null,u=null,h=0;const p=t.minValue==null?-1/0:t.minValue,f=t.maxValue==null?1/0:t.maxValue;for(const v of e)Number.isFinite(v)?v>=p&&v<=f&&(o=o===null?v:o+v,r=Math.min(r,v),s=Math.max(s,v),h++):typeof v=="string"&&h++;if(h&&o!=null){a=o/h;let v=0;for(const b of e)Number.isFinite(b)&&b>=p&&b<=f&&(v+=(b-a)**2);u=i?h>1?v/(h-1):0:h>0?v/h:0,l=Math.sqrt(u)}else r=null,s=null;const g={avg:a,count:h,max:s,min:r,stddev:l,sum:o,variance:u};return n&&(g.nullcount=e.length-h),t.percentileParams&&(g.median=yH(e,t.percentileParams)),g}function yH(t,e){const{fieldType:i,value:n,orderBy:r,isDiscrete:s}=e,o=Hve(i,r==="desc");if((t=[...t].filter(g=>g!=null).sort((g,v)=>o(g,v))).length===0)return null;if(n<=0)return t[0];if(n>=1)return t[t.length-1];const a=(t.length-1)*n,l=Math.floor(a),u=l+1,h=a%1,p=t[l],f=t[u];return u>=t.length||s||typeof p=="string"||typeof f=="string"?p:p*(1-h)+f*h}function Hve(t,e){const i=e?1:-1,n=Bst(e),r=Cte(e);if(!(t&&["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...Ste].includes(t)))return(s,o)=>typeof s=="number"&&typeof o=="number"?n(s,o):typeof s=="string"&&typeof o=="string"?r(s,o):i;if(t==="esriFieldTypeDate")return(s,o)=>{const a=new Date(s).getTime(),l=new Date(o).getTime();return isNaN(a)||isNaN(l)?i:n(a,l)};if(Ste.has(t))return(s,o)=>n(s,o);if(t==="esriFieldTypeString")return(s,o)=>r(s,o);if(t==="esriFieldTypeGUID"||t==="esriFieldTypeGlobalID"){const s=Cte(e);return(o,a)=>s(Ite(o),Ite(a))}return e?(s,o)=>1:(s,o)=>-1}function JO(t,e,i){if(i){if(t==null)return e==null?0:1;if(e==null)return-1}else{if(t==null)return e==null?0:-1;if(e==null)return 1}return null}function Cte(t){return t?(e,i)=>{const n=JO(e,i,!0);return n??((e=e.toUpperCase())>(i=i.toUpperCase())?-1:e<i?1:0)}:(e,i)=>{const n=JO(e,i,!1);return n??((e=e.toUpperCase())<(i=i.toUpperCase())?-1:e>i?1:0)}}function Bst(t){return t?(e,i)=>{const n=JO(e,i,!0);return n??i-e}:(e,i)=>{const n=JO(e,i,!1);return n??e-i}}function Ite(t){return t.substr(24,12)+t.substr(19,4)+t.substr(16,2)+t.substr(14,2)+t.substr(11,2)+t.substr(9,2)+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)+t.substr(0,2)}function Hst(t,e){let i;for(i in t)Ust.includes(i)&&(Number.isFinite(t[i])||(t[i]=null));return e&&["avg","stddev","variance"].forEach(n=>{t[n]!=null&&(t[n]=Math.ceil(t[n]))}),t}function Gst(t){const e={};for(let i of t)(i==null||typeof i=="string"&&i.trim()==="")&&(i=null),e[i]==null?e[i]={count:1,data:i}:e[i].count++;return{count:e}}function a5(t){return(t==null?void 0:t.type)!=="coded-value"?[]:t.codedValues.map(e=>e.code)}function qst(t,e,i,n){const r=t.count,s=[];if(i&&e){const o=[],a=a5(e[0]);for(const l of a)if(e[1]){const u=a5(e[1]);for(const h of u)if(e[2]){const p=a5(e[2]);for(const f of p)o.push(`${Sf(l)}${n}${Sf(h)}${n}${Sf(f)}`)}else o.push(`${Sf(l)}${n}${Sf(h)}`)}else o.push(l);for(const l of o)r.hasOwnProperty(l)||(r[l]={data:l,count:0})}for(const o in r){const a=r[o];s.push({value:a.data,count:a.count,label:a.label})}return{uniqueValueInfos:s}}function Wst(t,e,i,n){let r=null;switch(e){case"log":t!==0&&(r=Math.log(t)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(n)&&n!==0&&(r=t/n*100);break;case"field":Number.isFinite(i)&&i!==0&&(r=t/i);break;case"natural-log":t>0&&(r=Math.log(t));break;case"square-root":t>0&&(r=t**.5)}return r}function Gve(t,e){const i=Yst({field:e.field,normalizationType:e.normalizationType,normalizationField:e.normalizationField,classificationMethod:e.classificationMethod,standardDeviationInterval:e.standardDeviationInterval,breakCount:e.numClasses||zst});return t=Jst(t,e.minValue,e.maxValue),kst({definition:i,values:t,normalizationTotal:e.normalizationTotal})}function Jst(t,e,i){const n=e??-1/0,r=i??1/0;return t.filter(s=>Number.isFinite(s)&&s>=n&&s<=r)}function Yst(t){const{breakCount:e,field:i,normalizationField:n,normalizationType:r}=t,s=t.classificationMethod||Fst,o=s==="standard-deviation"?t.standardDeviationInterval||Nst:void 0;return new Ist({breakCount:e,classificationField:i,classificationMethod:s,normalizationField:r==="field"?n:void 0,normalizationType:r,standardDeviationInterval:o})}function Zst(t,e){let i=t.classBreaks;const n=i.length,r=i[0].minValue,s=i[n-1].maxValue,o=e==="standard-deviation",a=Vst;return i=i.map(l=>{var p;const u=l.label,h={minValue:l.minValue,maxValue:l.maxValue,label:u};if(o&&u){const f=((p=u.match(a))==null?void 0:p.map(g=>+g.trim()))??[];f.length===2?(h.minStdDev=f[0],h.maxStdDev=f[1],f[0]<0&&f[1]>0&&(h.hasAvg=!0)):f.length===1&&(u.includes("<")?(h.minStdDev=null,h.maxStdDev=f[0]):u.includes(">")&&(h.minStdDev=f[0],h.maxStdDev=null))}return h}),{minValue:r,maxValue:s,classBreakInfos:i,normalizationTotal:t.normalizationTotal}}function Kst(t,e){const i=Xst(t,e),n=i.intervals,r=i.min??0,s=i.max??0,o=n.map((a,l)=>({minValue:n[l][0],maxValue:n[l][1],count:0}));for(const a of t)if(a!=null&&a>=r&&a<=s){const l=Qst(n,a);l>-1&&o[l].count++}return{bins:o,minValue:r,maxValue:s,normalizationTotal:e.normalizationTotal}}function Xst(t,e){const{field:i,classificationMethod:n,standardDeviationInterval:r,normalizationType:s,normalizationField:o,normalizationTotal:a,minValue:l,maxValue:u}=e,h=e.numBins||jst;let p=null,f=null,g=null;if((!n||n==="equal-interval")&&!s){if(l!=null&&u!=null)p=l,f=u;else{const v=fU({values:t,minValue:l,maxValue:u,useSampleStdDev:!s,supportsNullCount:Bve({normalizationType:s,normalizationField:o,minValue:l,maxValue:u})});p=v.min??null,f=v.max??null}g=eot(p??0,f??0,h)}else{const{classBreaks:v}=Gve(t,{field:i,normalizationType:s,normalizationField:o,normalizationTotal:a,classificationMethod:n,standardDeviationInterval:r,minValue:l,maxValue:u,numClasses:h});p=v[0].minValue,f=v[v.length-1].maxValue,g=v.map(b=>[b.minValue,b.maxValue])}return{min:p,max:f,intervals:g}}function Qst(t,e){let i=-1;for(let n=t.length-1;n>=0;n--)if(e>=t[n][0]){i=n;break}return i}function eot(t,e,i){const n=(e-t)/i,r=[];let s,o=t;for(let a=1;a<=i;a++)s=o+n,s=Number(s.toFixed(16)),r.push([o,a===i?e:s]),o=s;return r}let Ek=class{constructor(e,i,n){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=e.returnDistinctValues??!1,this.fieldsIndex=n,this.featureAdapter=i;const r=e.outFields;if(r&&!r.includes("*")){this.outFields=r;let s=0;for(const o of r){const a=Uve(o),l=this.fieldsIndex.get(a),u=l?null:eE(a,n),h=l?l.name:Cst(o)||"FIELD_EXP_"+s++;this._fieldDataCache.set(o,{alias:h,clause:u})}}}countDistinctValues(e){return this.returnDistinctValues?(e.forEach(i=>this.getAttributes(i)),this._returnDistinctMap.size):e.length}getAttributes(e){const i=this._processAttributesForOutFields(e);return this._processAttributesForDistinctValues(i)}getFieldValue(e,i,n){var o;const r=n?n.name:i;let s=null;return this._fieldDataCache.has(r)?s=(o=this._fieldDataCache.get(r))==null?void 0:o.clause:n||(s=eE(i,this.fieldsIndex),this._fieldDataCache.set(r,{alias:r,clause:s})),n?this.featureAdapter.getAttribute(e,r):s==null?void 0:s.calculateValue(e,this.featureAdapter)}getDataValue(e,i){const n=i.normalizationType,r=i.normalizationTotal;let s=i.field&&this.getFieldValue(e,i.field,this.fieldsIndex.get(i.field));if(i.field2&&(s=`${Sf(s)}${i.fieldDelimiter}${Sf(this.getFieldValue(e,i.field2,this.fieldsIndex.get(i.field2)))}`,i.field3&&(s=`${s}${i.fieldDelimiter}${Sf(this.getFieldValue(e,i.field3,this.fieldsIndex.get(i.field3)))}`)),n&&Number.isFinite(s)){const o=n==="field"&&i.normalizationField?this.getFieldValue(e,i.normalizationField,this.fieldsIndex.get(i.normalizationField)):null;s=Wst(s,n,o,r)}return s}getExpressionValue(e,i,n,r){const s={attributes:this.featureAdapter.getAttributes(e),layer:{fields:this.fieldsIndex.fields}},o=r.createExecContext(s,n);return r.executeFunction(i,o)}getExpressionValues(e,i,n,r){const s={fields:this.fieldsIndex.fields};return e.map(o=>{const a={attributes:this.featureAdapter.getAttributes(o),layer:s},l=r.createExecContext(a,n);return r.executeFunction(i,l)})}validateItem(e,i){var n,r;return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:eE(i,this.fieldsIndex)}),((r=(n=this._fieldDataCache.get(i))==null?void 0:n.clause)==null?void 0:r.testFeature(e,this.featureAdapter))??!1}validateItems(e,i){var n,r;return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:eE(i,this.fieldsIndex)}),((r=(n=this._fieldDataCache.get(i))==null?void 0:n.clause)==null?void 0:r.testSet(e,this.featureAdapter))??!1}_processAttributesForOutFields(e){const i=this.outFields;if(!i||!i.length)return this.featureAdapter.getAttributes(e);const n={};for(const r of i){const{alias:s,clause:o}=this._fieldDataCache.get(r);n[s]=o?o.calculateValue(e,this.featureAdapter):this.featureAdapter.getAttribute(e,s)}return n}_processAttributesForDistinctValues(e){if(U(e)||!this.returnDistinctValues)return e;const i=this.outFields,n=[];if(i)for(const o of i){const{alias:a}=this._fieldDataCache.get(o);n.push(e[a])}else for(const o in e)n.push(e[o]);const r=`${(i||["*"]).join(",")}=${n.join(",")}`;let s=this._returnDistinctMap.get(r)||0;return this._returnDistinctMap.set(r,++s),s>1?null:e}};const qve={convertToGEGeometry:tot,exportPoint:not,exportPolygon:sot,exportPolyline:aot,exportMultipoint:cot,exportExtent:dot};function tot(t,e){return e==null?null:t.convertJSONToGeometry(e)}let iot=class{constructor(e,i,n){this.x=e,this.y=i,this.spatialReference=n,this.z=void 0,this.m=void 0}};function not(t,e,i){const n=new iot(t.getPointX(e),t.getPointY(e),i),r=t.hasZ(e),s=t.hasM(e);return r&&(n.z=t.getPointZ(e)),s&&(n.m=t.getPointM(e)),n}let rot=class{constructor(e,i,n,r){this.rings=e,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}};function sot(t,e,i){return new rot(t.exportPaths(e),i,t.hasZ(e),t.hasM(e))}let oot=class{constructor(e,i,n,r){this.paths=e,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}};function aot(t,e,i){return new oot(t.exportPaths(e),i,t.hasZ(e),t.hasM(e))}let lot=class{constructor(e,i,n,r){this.points=e,this.spatialReference=i,this.hasZ=void 0,this.hasM=void 0,n&&(this.hasZ=n),r&&(this.hasM=r)}};function cot(t,e,i){return new lot(t.exportPoints(e),i,t.hasZ(e),t.hasM(e))}let uot=class{constructor(e,i,n,r,s){this.xmin=e,this.ymin=i,this.xmax=n,this.ymax=r,this.spatialReference=s,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}};function dot(t,e,i){const n=t.hasZ(e),r=t.hasM(e),s=new uot(t.getXMin(e),t.getYMin(e),t.getXMax(e),t.getYMax(e),i);if(n){const o=t.getZExtent(e);s.zmin=o.vmin,s.zmax=o.vmax}if(r){const o=t.getMExtent(e);s.mmin=o.vmin,s.mmax=o.vmax}return s}const l5=[0,0];function Wve(t,e){if(!e)return null;if("x"in e){const i={x:0,y:0};return[i.x,i.y]=t(e.x,e.y,l5),e.z!=null&&(i.z=e.z),e.m!=null&&(i.m=e.m),i}if("xmin"in e){const i={xmin:0,ymin:0,xmax:0,ymax:0};return[i.xmin,i.ymin]=t(e.xmin,e.ymin,l5),[i.xmax,i.ymax]=t(e.xmax,e.ymax,l5),e.hasZ&&(i.zmin=e.zmin,i.zmax=e.zmax,i.hasZ=!0),e.hasM&&(i.mmin=e.mmin,i.mmax=e.mmax,i.hasM=!0),i}return"rings"in e?{rings:Tte(e.rings,t),hasM:e.hasM,hasZ:e.hasZ}:"paths"in e?{paths:Tte(e.paths,t),hasM:e.hasM,hasZ:e.hasZ}:"points"in e?{points:Jve(e.points,t),hasM:e.hasM,hasZ:e.hasZ}:null}function Tte(t,e){const i=[];for(const n of t)i.push(Jve(n,e));return i}function Jve(t,e){const i=[];for(const n of t){const r=e(n[0],n[1],[0,0]);i.push(r),n.length>2&&r.push(n[2]),n.length>3&&r.push(n[3])}return i}async function Yve(t,e){if(!t||!e)return;const i=Array.isArray(t)?t.map(n=>A(n.geometry)?n.geometry.spatialReference:null).filter(A):[t];await B9(i.map(n=>({source:n,dest:e})))}const Zve=Wve.bind(null,My),Kve=Wve.bind(null,T_);function YO(t,e,i,n){if(!t||(i||(i=e,e=t.spatialReference),!vn(e)||!vn(i)||ui(e,i)))return t;if(I_(e,i)){const r=zu(i)?Zve(t):Kve(t);return r.spatialReference=i,r}return NM(qve,[t],e,i,null,n)[0]}let hot=class{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(e,i,n){if(!e||!e.length||!i||!n||ui(i,n))return e;const r={geometries:e,inSpatialReference:i,outSpatialReference:n,resolve:null};return this._jobs.push(r),new Promise(s=>{r.resolve=s,this._timer===null&&(this._timer=setTimeout(this._process,10))})}_process(){this._timer=null;const e=this._jobs.shift();if(!e)return;const{geometries:i,inSpatialReference:n,outSpatialReference:r,resolve:s}=e;I_(n,r)?zu(r)?s(i.map(Zve)):s(i.map(Kve)):s(NM(qve,i,n,r,null,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};const pot=new hot;function QSt(t,e,i){return pot.push(t,e,i)}function fot(t,e,i){return{objectId:t,target:e,distance:i,type:"vertex"}}function mot(t,e,i,n,r,s=!1){return{objectId:t,target:e,distance:i,type:"edge",start:n,end:r,draped:s}}const got=new Fe({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),kte=Object.freeze({}),$te=new Vo,yot=new Vo,mU=new Vo,md={esriGeometryPoint:mj,esriGeometryPolyline:AB,esriGeometryPolygon:MB,esriGeometryMultipoint:$B};function Ate(t,e,i,n=t.hasZ,r=t.hasM){if(U(e))return null;const s=t.hasZ&&n,o=t.hasM&&r;if(i){const a=BC(mU,e,t.hasZ,t.hasM,"esriGeometryPoint",i,n,r);return mj(a,s,o)}return mj(e,s,o)}function c5(t,e,i,n,r,s,o=e,a=i){var p,f,g;const l=e&&o,u=i&&a,h=A(n)?"coords"in n?n:n.geometry:null;if(U(h))return null;if(r){let v=c4e(yot,h,e,i,t,r,o,a);return s&&(v=BC(mU,v,l,u,t,s)),((p=md[t])==null?void 0:p.call(md,v,l,u))??null}if(s){const v=BC(mU,h,e,i,t,s,o,a);return((f=md[t])==null?void 0:f.call(md,v,l,u))??null}return d4e($te,h,e,i,o,a),((g=md[t])==null?void 0:g.call(md,$te,l,u))??null}async function eEt(t,e,i){const{outFields:n,orderByFields:r,groupByFieldsForStatistics:s,outStatistics:o}=t;if(n)for(let a=0;a<n.length;a++)n[a]=n[a].trim();if(r)for(let a=0;a<r.length;a++)r[a]=r[a].trim();if(s)for(let a=0;a<s.length;a++)s[a]=s[a].trim();if(o)for(let a=0;a<o.length;a++)o[a].onStatisticField&&(o[a].onStatisticField=o[a].onStatisticField.trim());return t.geometry&&!t.outSR&&(t.outSR=t.geometry.spatialReference),vot(t,e,i)}async function vot(t,e,i){var s;if(!t)return null;let{where:n}=t;if(t.where=n=n&&n.trim(),(!n||/^1 *= *1$/.test(n)||e&&e===n)&&(t.where=null),!t.geometry)return t;let r=await _ot(t);if(t.distance=0,t.units=null,t.spatialRel==="esriSpatialRelEnvelopeIntersects"){const{spatialReference:o}=t.geometry;r=XN(r),r.spatialReference=o}if(r){await Yve(r.spatialReference,i),r=bot(r,i);const o=(await SB(Yr(r)))[0];if(U(o))throw kte;const a="quantizationParameters"in t&&((s=t.quantizationParameters)==null?void 0:s.tolerance)||"maxAllowableOffset"in t&&t.maxAllowableOffset||0,l=a&&Xve(r,i)?{densificationStep:8*a}:void 0,u=o.toJSON(),h=await YO(u,u.spatialReference,i,l);if(!h)throw kte;h.spatialReference=i,t.geometry=h}return t}function Xve(t,e){if(!t)return!1;const i=t.spatialReference;return(AI(t)||ph(t)||MI(t))&&!ui(i,e)&&!Gu(i,e)}function bot(t,e){const i=t.spatialReference;return Xve(t,e)&&AI(t)?{spatialReference:i,rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]}:t}async function _ot(t){const{distance:e,units:i}=t,n=t.geometry;if(e==null||"vertexAttributes"in n)return n;const r=n.spatialReference,s=i?got.fromJSON(i):qw(r),o=r&&(PP(r)||zu(r))?n:await Yve(r,WN).then(()=>YO(n,WN));return(await wot())(o.spatialReference,o,e,s)}async function wot(){return(await q(()=>import("./geometryEngineJSON-f583f472.js"),["assets/geometryEngineJSON-f583f472.js","assets/geometryEngineBase-e1a33b0a.js","assets/geometryEngineJSON-eda070ea.js"])).geodesicBuffer}function u5(t){return t&&Qve in t?JSON.parse(JSON.stringify(t,xot)):t}const Qve="_geVersion",xot=(t,e)=>t!==Qve?e:void 0;let tEt=class{constructor(e,i,n){this.items=e,this.query=i,this.geometryType=n.geometryType,this.hasM=n.hasM,this.hasZ=n.hasZ,this.fieldsIndex=n.fieldsIndex,this.objectIdField=n.objectIdField,this.spatialReference=n.spatialReference,this.featureAdapter=n.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const e=new Ek(this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return e.countDistinctValues(this.items);const{groupByFieldsForStatistics:i,having:n,outStatistics:r}=this.query;if(!(i==null?void 0:i.length))return 1;const o=new Map,a=new Map,l=new Set;for(const u of r){const{statisticType:h}=u,p=h!=="exceedslimit"?u.onStatisticField:void 0;if(!a.has(p)){const g=[];for(const v of i){const b=this._getAttributeValues(e,v,o);g.push(b)}a.set(p,this._calculateUniqueValues(g,e.returnDistinctValues))}const f=a.get(p);for(const g in f){const{data:v,items:b}=f[g],_=v.join(",");n&&!e.validateItems(b,n)||l.add(_)}}return l.size}async createQueryResponse(){let e;if(this.query.outStatistics?e=this.query.outStatistics.some(i=>i.statisticType==="exceedslimit")?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query):e=this._createFeatureQueryResponse(this.query),this.query.returnQueryGeometry){const i=this.query.geometry;vn(this.query.outSR)&&!ui(i.spatialReference,this.query.outSR)?e.queryGeometry=u5({spatialReference:this.query.outSR,...YO(i,i.spatialReference,this.query.outSR)}):e.queryGeometry=u5({spatialReference:this.query.outSR,...i})}return e}createSnappingResponse(e,i){const n=this.featureAdapter,r=Mte(this.hasZ,this.hasM),{point:s,mode:o}=e,a=typeof e.distance=="number"?e.distance:e.distance.x,l=typeof e.distance=="number"?e.distance:e.distance.y,u={candidates:[]},h=this.geometryType==="esriGeometryPolygon",p=this._getPointCreator(o,this.spatialReference,i),f=new Ote(null,0),g=new Ote(null,0),v={x:0,y:0,z:0};for(const b of this.items){const _=n.getGeometry(b);if(U(_))continue;const{coords:w,lengths:S}=_;if(f.coords=w,g.coords=w,e.types&Rw.EDGE){let C=0;for(let $=0;$<S.length;$++){const M=S[$];for(let P=0;P<M;P++,C+=r){const k=f;if(k.coordsIndex=C,P!==M-1){const D=g;D.coordsIndex=C+r;const z=v;Sot(v,s,k,D);const B=(s.x-z.x)/a,j=(s.y-z.y)/l,K=B*B+j*j;K<=1&&u.candidates.push(mot(n.getObjectId(b),p(z),Math.sqrt(K),p(k),p(D)))}}}}if(e.types&Rw.VERTEX){const C=h?w.length-r:w.length;for(let $=0;$<C;$+=r){const M=f;M.coordsIndex=$;const P=(s.x-M.x)/a,k=(s.y-M.y)/l,D=P*P+k*k;D<=1&&u.candidates.push(fot(n.getObjectId(b),p(M),Math.sqrt(D)))}}}return u.candidates.sort((b,_)=>b.distance-_.distance),u}_getPointCreator(e,i,n){const r=A(n)&&!ui(i,n)?a=>YO(a,i,n):a=>a,{hasZ:s}=this,o=0;return e==="3d"?s?({x:a,y:l,z:u})=>r({x:a,y:l,z:u}):({x:a,y:l})=>r({x:a,y:l,z:o}):({x:a,y:l})=>r({x:a,y:l})}async createSummaryStatisticsResponse(e){const{field:i,valueExpression:n,normalizationField:r,normalizationType:s,normalizationTotal:o,minValue:a,maxValue:l,scale:u}=e,h=this.fieldsIndex.isDateField(i),p=await this._getDataValues({field:i,valueExpression:n,normalizationField:r,normalizationType:s,normalizationTotal:o,scale:u}),f=Bve({normalizationType:s,normalizationField:r,minValue:a,maxValue:l}),g=this.fieldsIndex.get(i),v={value:.5,fieldType:g==null?void 0:g.type},b=wC(g)?Ete({values:p,supportsNullCount:f,percentileParams:v}):fU({values:p,minValue:a,maxValue:l,useSampleStdDev:!s,supportsNullCount:f,percentileParams:v});return Hst(b,h)}async createUniqueValuesResponse(e){const{field:i,valueExpression:n,domains:r,returnAllCodedValues:s,scale:o}=e,a=await this._getDataValues({field:i,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,valueExpression:n,scale:o}),l=Gst(a);return qst(l,r,s,e.fieldDelimiter)}async createClassBreaksResponse(e){const{field:i,valueExpression:n,normalizationField:r,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:l,minValue:u,maxValue:h,numClasses:p,scale:f}=e,g=await this._getDataValues({field:i,valueExpression:n,normalizationField:r,normalizationType:s,normalizationTotal:o,scale:f}),v=Gve(g,{field:i,normalizationField:r,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:l,minValue:u,maxValue:h,numClasses:p});return Zst(v,a)}async createHistogramResponse(e){const{field:i,valueExpression:n,normalizationField:r,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:l,minValue:u,maxValue:h,numBins:p,scale:f}=e,g=await this._getDataValues({field:i,valueExpression:n,normalizationField:r,normalizationType:s,normalizationTotal:o,scale:f});return Kst(g,{field:i,normalizationField:r,normalizationType:s,normalizationTotal:o,classificationMethod:a,standardDeviationInterval:l,minValue:u,maxValue:h,numBins:p})}_sortFeatures(e,i,n){if(e.length>1&&i&&i.length)for(const r of i.reverse()){const s=r.split(" "),o=s[0],a=this.fieldsIndex.get(o),l=!!s[1]&&s[1].toLowerCase()==="desc",u=Hve(a==null?void 0:a.type,l);e.sort((h,p)=>{const f=n(h,o,a),g=n(p,o,a);return u(f,g)})}}_createFeatureQueryResponse(e){const i=this.items,{geometryType:n,hasM:r,hasZ:s,objectIdField:o,spatialReference:a}=this,{outFields:l,outSR:u,quantizationParameters:h,resultRecordCount:p,resultOffset:f,returnZ:g,returnM:v}=e,b=p!=null&&i.length>(f||0)+p,_=l&&(l.includes("*")?[...this.fieldsIndex.fields]:l.map(w=>this.fieldsIndex.get(w)));return{exceededTransferLimit:b,features:this._createFeatures(e,i),fields:_,geometryType:n,hasM:r&&v,hasZ:s&&g,objectIdFieldName:o,spatialReference:u5(u||a),transform:h&&hte(h)||null}}_createFeatures(e,i){const n=new Ek(e,this.featureAdapter,this.fieldsIndex),{hasM:r,hasZ:s}=this,{orderByFields:o,quantizationParameters:a,returnGeometry:l,returnCentroid:u,maxAllowableOffset:h,resultOffset:p,resultRecordCount:f,returnZ:g=!1,returnM:v=!1}=e,b=s&&g,_=r&&v;let w=[],S=0;const C=[...i];if(this._sortFeatures(C,o,(M,P,k)=>n.getFieldValue(M,P,k)),l||u){const M=hte(a)??void 0;if(l&&!u)for(const P of C)w[S++]={attributes:n.getAttributes(P),geometry:c5(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(P),h,M,b,_)};else if(!l&&u)for(const P of C)w[S++]={attributes:n.getAttributes(P),centroid:Ate(this,this.featureAdapter.getCentroid(P,this),M)};else for(const P of C)w[S++]={attributes:n.getAttributes(P),centroid:Ate(this,this.featureAdapter.getCentroid(P,this),M),geometry:c5(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(P),h,M,b,_)}}else for(const M of C){const P=n.getAttributes(M);P&&(w[S++]={attributes:P})}const $=p||0;if(f!=null){const M=$+f;w=w.slice($,Math.min(w.length,M))}return w}_createExceedsLimitQueryResponse(e){let i=!1,n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(const o of e.outStatistics??[])if(o.statisticType==="exceedslimit"){n=o.maxPointCount!=null?o.maxPointCount:Number.POSITIVE_INFINITY,r=o.maxRecordCount!=null?o.maxRecordCount:Number.POSITIVE_INFINITY,s=o.maxVertexCount!=null?o.maxVertexCount:Number.POSITIVE_INFINITY;break}if(this.geometryType==="esriGeometryPoint")i=this.items.length>n;else if(this.items.length>r)i=!0;else{const o=Mte(this.hasZ,this.hasM),a=this.featureAdapter;i=this.items.reduce((l,u)=>{const h=a.getGeometry(u);return l+(A(h)&&h.coords.length||0)},0)/o>s}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(i)}}]}}async _createStatisticsQueryResponse(e){const i={attributes:{}},n=[],r=new Map,s=new Map,o=new Map,a=new Map,l=new Ek(e,this.featureAdapter,this.fieldsIndex),u=e.outStatistics,{groupByFieldsForStatistics:h,having:p,orderByFields:f}=e,g=h&&h.length,v=!!g,b=v?h[0]:null,_=v&&!this.fieldsIndex.get(b);for(const S of u??[]){const{outStatisticFieldName:C,statisticType:$}=S,M=S,P=$!=="exceedslimit"?S.onStatisticField:void 0,k=$==="percentile_disc"||$==="percentile_cont",D=$==="EnvelopeAggregate"||$==="CentroidAggregate"||$==="ConvexHullAggregate",z=v&&g===1&&(P===b||_)&&$==="count";if(v){if(!o.has(P)){const j=[];for(const K of h){const ie=this._getAttributeValues(l,K,r);j.push(ie)}o.set(P,this._calculateUniqueValues(j,!D&&l.returnDistinctValues))}const B=o.get(P);for(const j in B){const{count:K,data:ie,items:te,itemPositions:me}=B[j],Ie=ie.join(",");if(!p||l.validateItems(te,p)){const Me=a.get(Ie)||{attributes:{}};if(D){Me.aggregateGeometries||(Me.aggregateGeometries={});const{aggregateGeometries:ge,outStatisticFieldName:he}=await this._getAggregateGeometry(M,te);Me.aggregateGeometries[he]=ge}else{let ge=null;if(z)ge=K;else{const he=this._getAttributeValues(l,P,r),et=me.map(wt=>he[wt]);ge=k&&"statisticParameters"in M?this._getPercentileValue(M,et):this._getStatisticValue(M,et,null,l.returnDistinctValues)}Me.attributes[C]=ge}let oe=0;h.forEach((ge,he)=>Me.attributes[this.fieldsIndex.get(ge)?ge:"EXPR_"+ ++oe]=ie[he]),a.set(Ie,Me)}}}else if(D){i.aggregateGeometries||(i.aggregateGeometries={});const{aggregateGeometries:B,outStatisticFieldName:j}=await this._getAggregateGeometry(M,this.items);i.aggregateGeometries[j]=B}else{const B=this._getAttributeValues(l,P,r);i.attributes[C]=k&&"statisticParameters"in M?this._getPercentileValue(M,B):this._getStatisticValue(M,B,s,l.returnDistinctValues)}n.push({name:C,alias:C,type:"esriFieldTypeDouble"})}const w=v?Array.from(a.values()):[i];return this._sortFeatures(w,f,(S,C)=>S.attributes[C]),{fields:n,features:w}}async _getAggregateGeometry(e,i){const n=await q(()=>import("./geometryEngineJSON-f583f472.js"),["assets/geometryEngineJSON-f583f472.js","assets/geometryEngineBase-e1a33b0a.js","assets/geometryEngineJSON-eda070ea.js"]),{statisticType:r,outStatisticFieldName:s}=e,{featureAdapter:o,spatialReference:a,geometryType:l,hasZ:u,hasM:h}=this,p=i.map(v=>c5(l,u,h,o.getGeometry(v))),f=n.convexHull(a,p,!0)[0],g={aggregateGeometries:null,outStatisticFieldName:null};if(r==="EnvelopeAggregate"){const v=f?Y8(f):XN(n.union(a,p));g.aggregateGeometries={...v,spatialReference:a},g.outStatisticFieldName=s||"extent"}else if(r==="CentroidAggregate"){const v=f?Woe(f):Ike(XN(n.union(a,p)));g.aggregateGeometries={x:v[0],y:v[1],spatialReference:a},g.outStatisticFieldName=s||"centroid"}else r==="ConvexHullAggregate"&&(g.aggregateGeometries=f,g.outStatisticFieldName=s||"convexHull");return g}_getStatisticValue(e,i,n,r){const{onStatisticField:s,statisticType:o}=e;let a=null;return a=n!=null&&n.has(s)?n.get(s):wC(this.fieldsIndex.get(s))?Ete({values:i,returnDistinct:r}):fU({values:r?[...new Set(i)]:i,minValue:null,maxValue:null,useSampleStdDev:!0}),n&&n.set(s,a),a[o==="var"?"variance":o]}_getPercentileValue(e,i){const{onStatisticField:n,statisticParameters:r,statisticType:s}=e,{value:o,orderBy:a}=r,l=this.fieldsIndex.get(n);return yH(i,{value:o,orderBy:a,fieldType:l==null?void 0:l.type,isDiscrete:s==="percentile_disc"})}_getAttributeValues(e,i,n){if(n.has(i))return n.get(i);const r=this.fieldsIndex.get(i),s=this.items.map(o=>e.getFieldValue(o,i,r));return n.set(i,s),s}_getAttributeDataValues(e,i){return this.items.map(n=>e.getDataValue(n,{field:i.field,field2:i.field2,field3:i.field3,fieldDelimiter:i.fieldDelimiter,normalizationField:i.normalizationField,normalizationType:i.normalizationType,normalizationTotal:i.normalizationTotal}))}async _getAttributeExpressionValues(e,i,n){const{arcadeUtils:r}=await Rc(),s=r.createFunction(i),o=n&&r.getViewInfo(n);return e.getExpressionValues(this.items,s,o,r)}_calculateUniqueValues(e,i){const n={},r=this.items,s=r.length;for(let o=0;o<s;o++){const a=r[o],l=[];for(const h of e)l.push(h[o]);const u=l.join(",");n[u]==null?n[u]={count:1,data:l,items:[a],itemPositions:[o]}:(i||n[u].count++,n[u].items.push(a),n[u].itemPositions.push(o))}return n}async _getDataValues(e){const i=new Ek(this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:n,field:r,normalizationField:s,normalizationType:o,normalizationTotal:a,scale:l}=e,u=n?{viewingMode:"map",scale:l,spatialReference:this.query.outSR||this.spatialReference}:null;return n?this._getAttributeExpressionValues(i,n,u):this._getAttributeDataValues(i,{field:r,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,normalizationField:s,normalizationType:o,normalizationTotal:a})}};function Sot(t,e,i,n){const r=n.x-i.x,s=n.y-i.y,o=r*r+s*s,a=(e.x-i.x)*r+(e.y-i.y)*s,l=Math.min(1,Math.max(0,a/o));t.x=i.x+r*l,t.y=i.y+s*l}function Mte(t,e){return t?e?4:3:e?3:2}var Rw;(function(t){t[t.NONE=0]="NONE",t[t.EDGE=1]="EDGE",t[t.VERTEX=2]="VERTEX"})(Rw||(Rw={}));let Ote=class{constructor(e,i){this.coords=e,this.coordsIndex=i}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}},rEt=class{constructor(e,i,n){this.uid=e,this.geometry=i,this.attributes=n,this.visible=!0,this.objectId=null,this.centroid=null}};function oEt(t){return A(t.geometry)}let aEt=class{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}};function l0(t,e,i,n){return{x:t,y:e,z:i,hasZ:i!=null,hasM:!1,spatialReference:n,type:"point"}}function cEt(t){if(U(t))return 0;switch(t.type){case"point":return 1;case"polyline":{let e=0;for(const i of t.paths)e+=i.length;return e}case"polygon":{let e=0;for(const i of t.rings)e+=i.length;return e}case"multipoint":return t.points.length;case"extent":return 2;case"mesh":{const e=t.vertexAttributes&&t.vertexAttributes.position;return e?e.length/3:0}default:return}}function uEt(t,e){switch(OMe(e),t.type==="mesh"&&(t=t.extent),t.type){case"point":e[0]=e[3]=t.x,e[1]=e[4]=t.y,t.hasZ&&(e[2]=e[5]=t.z);break;case"polyline":for(let i=0;i<t.paths.length;i++)Q3(e,t.paths[i],!!t.hasZ);break;case"polygon":for(let i=0;i<t.rings.length;i++)Q3(e,t.rings[i],!!t.hasZ);break;case"multipoint":Q3(e,t.points,!!t.hasZ);break;case"extent":e[0]=t.xmin,e[1]=t.ymin,e[3]=t.xmax,e[4]=t.ymax,t.zmin!=null&&(e[2]=t.zmin),t.zmax!=null&&(e[5]=t.zmax)}}function dEt(t,e){switch(kMe(e),t.type==="mesh"&&(t=t.extent),t.type){case"point":e[0]=e[2]=t.x,e[1]=e[3]=t.y;break;case"polyline":for(let i=0;i<t.paths.length;i++)X3(e,t.paths[i]);break;case"polygon":for(let i=0;i<t.rings.length;i++)X3(e,t.rings[i]);break;case"multipoint":X3(e,t.points);break;case"extent":e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax}}function hEt(t,e){return t.objectId!=null?t.objectId:t.attributes&&e?t.attributes[e]:null}function pEt(t){return t}function ebe(t){return $h(t)}function fEt(t,e,i){return Ro(t,e,i)}function vi(t,e,i){return U(t)?null:tE(i.coordinateHelper.vectorToDehydratedPoint(t,Eot),e,i)}function tE(t,e,i){if(U(t))return null;if(U(e))return Ro(t.x,t.y,t.z??0);if(e.type==="2d")return Ro(t.x,t.y,0);const{elevationInfo:n}=i,r=Urt(e,t,n,_n)??0;return Ro(t.x,t.y,r)}function Pte(t,e,{z:i,m:n,spatialReference:r,elevationInfo:s}){if(i==null&&n==null){const l=l0(t[0],t[1],void 0,r);return n!=null&&(l.m=n,l.hasM=!0),l}if(U(e)||e.type==="2d"){const l=l0(t[0],t[1],i,r);return n!=null&&(l.m=n,l.hasM=!0),l}const o=yve(e,t,r,_n,s)??0,a=l0(t[0],t[1],o,r);return n!=null&&(a.m=n,a.hasM=!0),a}function mEt(t,e){return l0(t[0],t[1],t[2],e)}const Eot=l0(0,0,0,null);function d5(t,e){return t[0]*e[1]-t[1]*e[0]}function Cot(t,e,i){const n=Mm(i,e)/hm(i);return m1(t,i,n)}function h5(t,e,i,n,r=i){return zn(B_,n,i),zn(gU,e,r),Cot(ZO,gU,B_),g7(t,r,ZO)}function Iot(t,e,i,n){zn(B_,e,i);const r=n/Sw(B_);return yh(t,i,B_,r)}function gEt(t,e){const i=t.start,n=t.end,r=e.start,s=e.end,o=zn(B_,n,i),a=zn(kot,s,r),l=d5(o,a);if(Math.abs(l)<=Tot)return[];const u=zn(gU,i,r),h=d5(a,u)/l,p=d5(o,u)/l;if(h>=0){if(p>=0||e.type===jn.LINE)return[yh(ZO,i,o,h)]}else if(t.type===jn.LINE&&(p>=0||e.type===jn.LINE))return[yh(ZO,i,o,h)];return[]}var jn;(function(t){t[t.RAY=0]="RAY",t[t.LINE=1]="LINE"})(jn||(jn={}));const Tot=1e-6,B_=Ct(),kot=Ct(),gU=Ct(),ZO=Ct();function yU({start:t,end:e,type:i},n,r){const s=[],o=zn(B0,e,t),a=zn(_1,t,n),l=hm(o),u=2*Mm(o,a),h=u*u-4*l*(hm(a)-r*r);if(h===0){const p=-u/(2*l);(i===Mc.PLANE||p>=0)&&s.push(yh(Ct(),t,o,p))}else if(h>0){const p=Math.sqrt(h),f=(-u+p)/(2*l);(i===Mc.PLANE||f>=0)&&s.push(yh(Ct(),t,o,f));const g=(-u-p)/(2*l);(i===Mc.PLANE||g>=0)&&s.push(yh(Ct(),t,o,g))}return s}function vU(t,e){const i=t.start,n=t.end,r=zn(B0,n,i),s=Ah(_1,-r[1],r[0],0),o=e.start,a=e.end,l=ya(bH,a,o),u=cl(l,s),h=Ah(rbe,i[0],i[1],0),p=ya(sbe,h,o),f=cl(p,s);if(Math.abs(u)<Ec)return[];const g=qf(obe,o,l,f/u);if(e.type===jn.RAY){const v=ya(XO,g,o);if(cl(v,l)<-Ec)return[]}if(t.type===Mc.HALF_PLANE){const v=jR(XO,g,i);if(Mm(v,r)<-Ec)return[]}return[$h(g)]}function bU(t,e){return _U(KO(_H,e[2],t),e)}function tbe(t,e){const n=nbe(KO(_H,0,t),KO(Mot,0,e)),r=[];for(const s of n)r.push(Mme(s));return r}function ibe(t,e){return vH(t,KO(_H,t[2],e))}function $ot(t,e,i){const n=zn(B0,t,e),r=i/Sw(n),s=yh(Et(),e,n,r);return s[2]=t[2],s}function vH(t,{start:e,end:i,type:n}){const r=ya(B0,t,e),s=ya(_1,i,e),o=cl(r,s)/cl(s,s);return qf(Et(),e,s,n===jn.RAY?Math.max(o,0):o)}function Rte({start:t,end:e,type:i},n,r){const s=[],o=HP(B0,e,t),a=zn(_1,t,n),l=hm(o),u=2*Mm(o,a),h=u*u-4*l*(hm(a)-r*r);if(h===0){const p=-u/(2*l);(i===jn.LINE||p>=0)&&s.push(qf(Et(),t,o,p))}else if(h>0){const p=Math.sqrt(h),f=(-u+p)/(2*l);(i===jn.LINE||f>=0)&&s.push(qf(Et(),t,o,f));const g=(-u-p)/(2*l);(i===jn.LINE||g>=0)&&s.push(qf(Et(),t,o,g))}return s}function nbe(t,e){const i=t.start,n=t.end,r=e.start,s=e.end,o=ya(B0,n,i),a=ya(_1,s,r),l=ya(bH,r,i),u=CM(rbe,o,a),h=cl(l,u);if(!k_(h,0,Ec))return[];const p=IM(u);if(k_(p,0,Ec))return[];const f=CM(sbe,l,a),g=cl(f,u)/p,v=qf(obe,i,o,g);if(t.type===jn.RAY){const b=ya(XO,v,i);if(cl(o,b)<-Ec)return[]}if(e.type===jn.RAY){const b=ya(XO,v,r);if(cl(a,b)<-Ec)return[]}return[$h(v)]}function _U({start:t,end:e,type:i},n){const r=ya(B0,n,t),s=ya(_1,e,t),o=CM(bH,s,r);if(IM(o)/IM(s)<Ec)switch(i){case jn.LINE:return[$h(n)];case jn.RAY:return cl(s,r)<-Ec?[]:[$h(n)]}return[]}function Lte(t,e,i){return k_(zc(i,t),e*e,Ec)?[$h(i)]:[]}function KO(t,e,{start:i,end:n,type:r}){return Ah(t.start,i[0],i[1],e),Ah(t.end,n[0],n[1],e),t.type=Aot[r],t}var Mc;(function(t){t[t.PLANE=0]="PLANE",t[t.HALF_PLANE=1]="HALF_PLANE"})(Mc||(Mc={}));const Aot={[Mc.PLANE]:jn.LINE,[Mc.HALF_PLANE]:jn.RAY},Ec=1e-6,B0=Et(),_1=Et(),bH=Et(),rbe=Et(),sbe=Et(),obe=Et(),XO=Et(),_H={start:Et(),end:Et(),type:jn.LINE},Mot={start:Et(),end:Et(),type:jn.LINE};let H0=class{intersect(e){return Lot(this,e)}};class Oot extends H0{constructor(e){super(),this.point=e}equals(e){return f_(e)&&Fn(this.point,e.point)}closestTo(){return ebe(this.point)}}let abe=class extends H0{constructor(e,i,n){super(),this.start=e,this.end=i,this.type=n,this.lineLike={start:this.start,end:this.end,type:this.type}}equals(e){return Ey(e)&&this.type===e.type&&Fn(this.start,e.start)&&Fn(this.end,e.end)}closestTo(e){const i=vH(e,this.lineLike);return i}},Pot=class extends abe{constructor(e,i){super(e,i,jn.LINE)}};class oL extends H0{constructor(e,i,n){super(),this.intersection=e,this.first=i,this.second=n}equals(e){return e instanceof oL&&this.first.equals(e.first)&&this.second.equals(e.second)}closestTo(){return ebe(this.intersection)}}let p5=class lbe extends H0{constructor(e,i,n){super(),this.basePoint=e,this.first=i,this.second=n}equals(e){return e instanceof lbe&&this.first.equals(e.first)&&this.second.equals(e.second)}closestTo(e){const i=this.basePoint;return Ro(i[0],i[1],e[2])}},cbe=class extends H0{constructor(e,i){super(),this.center=e,this.radius=i}equals(e){return m_(e)&&this.center[0]===e.center[0]&&this.center[1]===e.center[1]&&this.radius===e.radius}closestTo(e){const i=$ot(e,this.center,this.radius);return i}},wH=class extends H0{constructor(e,i,n){super(),this.start=e,this.end=i,this.type=n,this.planeLike={start:e,end:i,type:n}}equals(e){return Cy(e)&&this.type===e.type&&Fn(this.start,e.start)&&Fn(this.end,e.end)}closestTo(e){return ibe(e,this.planeLike)}closestEndTo(e){const{start:i,end:n}=this;return Math.sign(Mm(zn(Fot,n,i),zn(Not,e,i)))>0?n:i}};class ube extends wH{constructor(e,i){super(e,i,Mc.HALF_PLANE)}}let dbe=class extends wH{constructor(e,i){super(e,i,Mc.PLANE)}},hbe=class extends H0{constructor(e,i,n){super(),this.start=e,this.end=i,this.getZ=n,this.planeLike={start:e,end:i,type:Mc.HALF_PLANE}}equals(e){return Iy(e)&&Fn(this.start,e.start)&&Fn(this.end,e.end)&&this.getZ===e.getZ}closestTo(e){return Rot(this,e)}addIfOnTheGround(e,i){for(const n of i){const r=xs(this.getZ(n[0],n[1],n[2]),0);Math.abs(n[2]-r)<Ec&&(n[2]=r,e.push(n))}}};function Rot(t,e){const i=ibe(e,t.planeLike);return i[2]=t.getZ(e[0],e[1],e[2])??pbe,i}function Lot(t,e){let i=[];if(f_(t)){const{point:n}=t;Ey(e)?i=_U(e.lineLike,n):m_(e)?i=Lte(e.center,e.radius,n):Cy(e)?i=bU(e.planeLike,n):Iy(e)&&(i=Ax(e,t))}else if(Ey(t)){const{lineLike:n}=t;f_(e)?i=_U(n,e.point):Ey(e)?i=nbe(n,e.lineLike):m_(e)?i=Rte(n,e.center,e.radius):Cy(e)?i=vU(e.planeLike,n):Iy(e)&&(i=Ax(e,t))}else if(m_(t)){const{center:n,radius:r}=t;if(Ey(e))i=Rte(e.lineLike,n,r);else if(f_(e))i=Lte(n,r,e.point);else{if(Cy(e))return yU(e.planeLike,n,r).map(s=>new p5(s,t,e));Iy(e)&&(i=Ax(e,t))}}else if(Cy(t)){const{planeLike:n}=t;if(Cy(e))return tbe(n,e.planeLike).map(r=>new p5(r,t,e));if(f_(e))i=bU(n,e.point);else if(Ey(e))i=vU(n,e.lineLike);else{if(m_(e))return yU(n,e.center,e.radius).map(r=>new p5(r,t,e));Iy(e)&&(i=Ax(e,t))}}else Iy(t)&&(i=Ax(t,e));return Dot(i,t,e)}function Ax(t,e){const{planeLike:i,getZ:n}=t,r=[];if(f_(e))t.addIfOnTheGround(r,bU(i,e.point));else if(Ey(e))t.addIfOnTheGround(r,vU(i,e.lineLike));else if(m_(e))for(const[s,o]of yU(i,e.center,e.radius)){const a=n(s,o,0);A(a)&&r.push(Ro(s,o,a))}else if(Cy(e)||Iy(e))for(const[s,o]of tbe(i,e.planeLike)){const a=n(s,o,0)??pbe;r.push(Ro(s,o,a))}return r}function Dot(t,e,i){return t.map(n=>new oL(n,e,i))}function f_(t){return t instanceof Oot}function Ey(t){return t instanceof abe}function m_(t){return t instanceof cbe}function Cy(t){return t instanceof wH}function Iy(t){return t instanceof hbe}const Fot=Ct(),Not=Ct(),pbe=0;function G0(t,e){const i=t.x-e.x,n=t.y-e.y;return i*i+n*n}function zot(t,e){return Math.sqrt(G0(t,e))}function xH(t,e){e.sort((i,n)=>kC(i.targetPoint,t)-kC(n.targetPoint,t))}var El;function EEt({point:t,distance:e,types:i,coordinateHelper:{spatialReference:n}},r,s){return{point:l0(t[0],t[1],t[2],n.toJSON()),mode:r,distance:e,types:i,query:A(s)?s.toJSON():{where:"1=1"}}}function QO(t,e,i){return{left:vi(t.leftVertex.pos,e,i),right:vi(t.rightVertex.pos,e,i)}}function CEt(t){return t.createQuery()}function jot(t,e=()=>{}){const i=X(()=>({view:t.view,snappingOptions:t.snappingOptions}),({view:n,snappingOptions:r})=>{const s="snapping-toggle",o=ri.TOOL;if(t.removeHandles(s),n&&A(r)){const a=[n.on("key-down",l=>{l.key!==dte.toggle||l.repeat||(r.enabledToggled=!0,e())},o),n.on("key-up",l=>{l.key===dte.toggle&&(r.enabledToggled=!1,e())},o),n.on("pointer-move",l=>{const u=l.native.ctrlKey;r.enabledToggled!==u&&(r.enabledToggled=u,e())},o)];t.addHandles(a,s)}},Io);t.addHandles(i)}(function(t){t[t.TARGET=0]="TARGET",t[t.REFERENCE=1]="REFERENCE",t[t.REFERENCE_EXTENSION=2]="REFERENCE_EXTENSION"})(El||(El={}));class w1{constructor(e,i,n,r){this.targetPoint=e,this.constraint=i,this.isDraped=n,this.domain=r}}let SH=class extends w1{constructor({targetPoint:e,objectId:i,constraint:n,isDraped:r}){super(e,n,r,Cr.FEATURE),this.objectId=i}},aL=class{constructor(e,i){this.isDraped=e,this.domain=i}},Ju=class fbe extends aL{constructor(e,i,n,r,s=Cr.ALL,o=!0,a=!0){super(r,s),this.type=e,this.lineStart=i,this.lineEnd=n,this.fadeLeft=o,this.fadeRight=a}equals(e){return e instanceof fbe&&this.type===e.type&&Fn(this.lineStart,e.lineStart)&&Fn(this.lineEnd,e.lineEnd)&&this.fadeLeft===e.fadeLeft&&this.fadeRight===e.fadeRight}get length(){return p9(this.lineStart,this.lineEnd)}},Vot=class extends SH{constructor(e){super({...e,isDraped:!0,constraint:new hbe(e.edgeStart,e.edgeEnd,e.getGroundElevation)})}get hints(){return[new Ju(El.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},Uot=class extends SH{constructor(e){super({...e,constraint:new Pot(e.edgeStart,e.edgeEnd)})}get hints(){return[new Ju(El.REFERENCE,this.constraint.start,this.constraint.end,this.isDraped,this.domain)]}},mbe=class gbe extends aL{constructor(e,i,n,r,s=Cr.ALL){super(r,s),this.previousVertex=e,this.centerVertex=i,this.nextVertex=n}equals(e){return e instanceof gbe&&Fn(this.previousVertex,e.previousVertex)&&Fn(this.centerVertex,e.centerVertex)&&Fn(this.nextVertex,e.nextVertex)}},ybe=class extends w1{constructor({targetPoint:e,constraint:i,previousVertex:n,otherVertex:r,otherVertexType:s,objectId:o,isDraped:a}){super(e,i,a,Cr.SELF),this.previousVertex=n,this.otherVertex=r,this.otherVertexType=s,this.objectId=o}get hints(){const e=this.previousVertex,i=this.otherVertexType===Lw.CENTER?this.otherVertex:this.targetPoint,n=this.otherVertexType===Lw.CENTER?this.targetPoint:this.otherVertex;return[new Ju(El.TARGET,i,n,this.isDraped,this.domain),new Ju(El.REFERENCE,e,i,this.isDraped,this.domain),new mbe(this.previousVertex,i,n,this.isDraped,this.domain)]}};var Lw;(function(t){t[t.NEXT=0]="NEXT",t[t.CENTER=1]="CENTER"})(Lw||(Lw={}));function Bot(t,e,i,n,r=Et()){const s=TC(wU,t);return s[2]=yve(n,s,e,i)||0,n.renderCoordsHelper.toRenderCoords(s,e,r),r}function Ss(t,e,i,n){return n.type==="2d"?(Ck.x=t[0],Ck.y=t[1],Ck.spatialReference=e,n.toScreen(Ck)):(Bot(t,e,i,n,wU),n.state.camera.projectToScreen(wU,f5),Nn(f5[0],f5[1]))}const Ck=l0(0,0,0,null),wU=Et(),f5=uMe();let rf=class extends mw{get updating(){return EI(this.snappingSources,({snappingSource:e})=>e.updating)||this.updatingHandles.updating}get snappingSources(){const e=this._get("snappingSources")||new Map,i=new Map;if(A(this.options)&&A(this.options.featureSources))for(const n of this.options.featureSources.items){const r=n.layer.uid,s=e.get(r);if(s){e.delete(r),i.set(r,s);continue}if(!n.layer.loaded){this.updatingHandles.addPromise(n.layer.load());continue}const o=this._createSourceInfo(n);A(o)&&i.set(r,o)}for(const[,n]of e)n.destroy();return i}constructor(e){super(e),this.options=null,this._domain=Cr.FEATURE,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){this.updatingHandles.add(()=>this.snappingSources,()=>this.notifyChange("updating"),Bu),A(this.view)&&this.handles.add([this.view.on("layerview-create",e=>this._updateLayerView(e.layer,e.layerView)),this.view.on("layerview-destroy",e=>this._updateLayerView(e.layer,null))])}_updateLayerView(e,i){for(const[,n]of this.snappingSources)n.snappingSource.layerSource.layer===e&&(n.layerView=i)}destroy(){this._set("options",null);for(const[,e]of this.snappingSources)e.destroy()}async fetchCandidates(e,i,n,r){var u;if(!(i&this._domain)||U(this.options)||!this.options.effectiveFeatureEnabled)return[];const s=[],o=this._computeScreenSizeDistanceParameters(e,n),a={distance:o,mode:((u=this.view)==null?void 0:u.type)??"2d",point:e,coordinateHelper:n.coordinateHelper,types:this._types};for(const[,{snappingSource:h,layerView:p}]of this.snappingSources)!h.layerSource.enabled||A(p)&&p.suspended||s.push(h.fetchCandidates(a,r).then(f=>f.filter(g=>!this._candidateIsExcluded(h,g,n.excludeFeature))));const l=(await roe(s)).flat();return this._addRightAngleCandidates(l,e,o,n),Xi(r),xH(e,l),l}_addRightAngleCandidates(e,i,n,r){var p,f,g,v,b,_,w,S;const s=A(r.vertexHandle)?(f=(p=r.vertexHandle.rightEdge)==null?void 0:p.rightVertex)==null?void 0:f.pos:A(r.editGeometryOperations)&&r.editGeometryOperations.data.type==="polygon"?(v=(g=r.editGeometryOperations.data.components[0])==null?void 0:g.getFirstVertex())==null?void 0:v.pos:null,o=A(r.vertexHandle)?(_=(b=r.vertexHandle.leftEdge)==null?void 0:b.leftVertex)==null?void 0:_.pos:A(r.editGeometryOperations)?(S=(w=r.editGeometryOperations.data.components[0])==null?void 0:w.getLastVertex())==null?void 0:S.pos:null,{view:a}=this,l=vi(s,a,r),u=vi(o,a,r),h=e.length;for(let C=0;C<h;C++)this._addRightAngleCandidate(e[C],u,i,n,e),this._addRightAngleCandidate(e[C],l,i,n,e)}_addRightAngleCandidate(e,i,n,r,s){if(U(i)||!Got(e))return;const o=e.constraint.closestTo(i),a=(o[0]-n[0])/r.x,l=(o[1]-n[1])/r.y,{start:u,end:h}=e.constraint;if(a*a+l*l<=1){const p=new ybe({targetPoint:o,otherVertex:i,otherVertexType:Lw.NEXT,previousVertex:zc(o,u)>zc(o,h)?u:h,constraint:new ube(i,o),objectId:e.objectId,isDraped:e.isDraped});s.push(p)}}_computeScreenSizeDistanceParameters(e,i){let n=A(this.options)?this.options.distance*(i.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;return U(this.view)?{x:n,y:n,z:n,distance:n}:this.view.type==="2d"?(n*=this.view.resolution,{x:n,y:n,z:n,distance:n}):this._computeScreenSizeDistanceParameters3D(e,n,this.view,i)}_computeScreenSizeDistanceParameters3D(e,i,n,r){const{spatialReference:s}=r;n.renderCoordsHelper.toRenderCoords(e,s,Dte);const o=n.state.camera.computeScreenPixelSizeAt(Dte),a=o*n.renderCoordsHelper.unitInMeters/n.mapCoordsHelper.unitInMeters,l=i*a,u=Ss(e,s,_n,n),h=u?m5(u,e,a,0,0,n,r):0,p=u?m5(u,e,0,a,0,n,r):0,f=u?m5(u,e,0,0,a,n,r):0;return{x:h===0?0:l/h,y:p===0?0:l/p,z:f===0?0:l/f,distance:o*i}}get _types(){return Rw.EDGE|Rw.VERTEX}_candidateIsExcluded(e,i,n){if(U(n))return!1;const r=this._getCandidateObjectId(i);if(U(r))return!1;const s=e.layerSource.layer;return s.type==="graphics"?n.uid===r:n.sourceLayer===s&&!(!n.attributes||!("objectIdField"in s))&&n.attributes[s.objectIdField]===r}_getCandidateObjectId(e){return e instanceof SH?e.objectId:null}_createSourceInfo(e){const i=this._createFeatureSnappingSourceType(e);if(U(i))return null;if("loading"in i)return this.updatingHandles.addPromise(i.loading.then(()=>{this.destroyed||this.notifyChange("snappingSources")})),null;const n=A(this.view)?this.view.allLayerViews.find(r=>r.layer===e.layer):null;return new Hot(i.source,n)}_createFeatureSnappingSourceType(e){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null}_createFeatureSnappingSourceSceneLayer(e){const{view:i}=this;if(U(i)||i.type!=="3d")return null;const n=this._getSourceModule("scene");return A(n.module)?{source:new n.module.SceneLayerSnappingSource({layerSource:e,view:i})}:{loading:n.loader}}_createFeatureSnappingSourceFeatureLayer(e){var i;switch((i=e.layer.source)==null?void 0:i.type){case"feature-layer":case"oriented-imagery":{const n=this._getSourceModule("featureService");return A(n.module)?{source:new n.module.FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:n.loader}}case"memory":case"csv":case"geojson":case"wfs":{if(e.layer.geometryType==="mesh")return null;const n=this._getSourceModule("featureCollection");return A(n.module)?{source:new n.module.FeatureCollectionSnappingSource({layerSource:e,view:this.view})}:{loading:n.loader}}}return null}_createFeatureSnappingSourceGraphicsLayer(e){const i=this._getSourceModule("graphics");return A(i.module)?{source:new i.module.GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:i.loader}}_createFeatureSnappingSourceMapNotesLayer(e){const i=this._getSourceModule("notes");return A(i.module)?{source:new i.module.GraphicsSnappingSource({getGraphicsLayers:()=>A(e.layer.sublayers)?e.layer.sublayers.toArray():[],spatialReference:this.spatialReference,view:this.view,layerSource:e})}:{loading:i.loader}}_getSourceModule(e){const i=this._sourceModules[e];if(U(i.loader)){const n=this._loadSourceModule(e).then(r=>{i.module=r});return i.loader=n,{module:i.module,loader:n}}return{module:i.module,loader:i.loader}}_loadSourceModule(e){const i=this.updatingHandles;switch(e){case"featureService":return i.addPromise(q(()=>import("./FeatureServiceSnappingSource-b4e02dd3.js"),["assets/FeatureServiceSnappingSource-b4e02dd3.js","assets/boundedPlane-694974c2.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/lineSegment-63c436ff.js","assets/plane-163fe497.js","assets/queryEngineUtils-83638ebc.js","assets/VertexSnappingCandidate-1b55cea6.js","assets/PointSnappingHint-f32d61d8.js","assets/WorkerHandle-e4c415d7.js"]));case"featureCollection":return i.addPromise(q(()=>import("./FeatureCollectionSnappingSource-196327dd.js"),["assets/FeatureCollectionSnappingSource-196327dd.js","assets/queryEngineUtils-83638ebc.js","assets/VertexSnappingCandidate-1b55cea6.js","assets/PointSnappingHint-f32d61d8.js","assets/symbologySnappingCandidates-2dcea371.js"]));case"graphics":case"notes":return i.addPromise(q(()=>import("./GraphicsSnappingSource-b06b3ebb.js"),["assets/GraphicsSnappingSource-b06b3ebb.js","assets/normalizeUtilsSync-6c0d8ec3.js","assets/FeatureStore-54ae2bff.js","assets/BoundsStore-99d6d491.js","assets/PooledRBush-5d91c5ae.js","assets/optimizedFeatureQueryEngineAdapter-042e303f.js","assets/centroid-9716b441.js","assets/QueryEngine-641ba8a0.js","assets/QueryEngineCapabilities-42e44ded.js","assets/timeSupport-10aa9f55.js","assets/queryEngineUtils-83638ebc.js","assets/VertexSnappingCandidate-1b55cea6.js","assets/PointSnappingHint-f32d61d8.js","assets/symbologySnappingCandidates-2dcea371.js"]));case"scene":return i.addPromise(q(()=>import("./SceneLayerSnappingSource-b51635c4.js"),["assets/SceneLayerSnappingSource-b51635c4.js","assets/WorkerHandle-e4c415d7.js","assets/workerHelper-82d53ebe.js","assets/BufferView-48b69dc1.js","assets/InterleavedLayout-fd66e391.js","assets/types-e1c0a5bf.js","assets/edgeProcessing-472acca0.js","assets/deduplicate-37ec4dbf.js","assets/Indices-679d5379.js","assets/VertexAttribute-15d1866a.js","assets/glUtil-7a9be557.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/VertexSnappingCandidate-1b55cea6.js","assets/PointSnappingHint-f32d61d8.js"]))}}};c([d({constructOnly:!0})],rf.prototype,"spatialReference",void 0),c([d({constructOnly:!0})],rf.prototype,"view",void 0),c([d()],rf.prototype,"options",void 0),c([d({readOnly:!0})],rf.prototype,"updating",null),c([d({readOnly:!0})],rf.prototype,"snappingSources",null),rf=c([O("esri.views.interactive.snapping.FeatureSnappingEngine")],rf);let Hot=class{constructor(e,i){this.snappingSource=e,this.layerView=i,this.handles=new wn;const n=this.snappingSource.layerSource.layer;if("refresh"in n){const r=n;this.handles.add(r.on("refresh",()=>e.refresh()))}this.handles.add([X(()=>e.updating,r=>e.layerSource.updating=r,Io),X(()=>e.availability,r=>e.layerSource.availability=r,Io)])}destroy(){this.snappingSource.destroy(),this.handles.destroy()}};function Got(t){return(t instanceof Uot||t instanceof Vot)&&!qot(t)}function qot({constraint:{start:t,end:e}}){const i=kC(t,e),n=zc(t,e);return i<Ra()||n/i<Jot}function m5(t,e,i,n,r,s,{spatialReference:o}){const a=TC(Wot,e);a[0]+=i,a[1]+=n,a[2]+=r;const l=Ss(a,o,_n,s);return l?zot(l,t):1/0}const Dte=Et(),Wot=Et(),Jot=1e-4;let lL=class{constructor(e,i){this.view=e,this.options=i,this.squaredShortLineThreshold=xh.shortLineThreshold*xh.shortLineThreshold}snap(e,i){return A(i.vertexHandle)?i.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(e,i):this.snapNewVertex(e,i)}edgeExceedsShortLineThreshold(e,i){return this.exceedsShortLineThreshold(vi(e.leftVertex.pos,this.view,i),vi(e.rightVertex.pos,this.view,i),i)}exceedsShortLineThreshold(e,i,{spatialReference:n}){return this.squaredShortLineThreshold===0||G0(Ss(i,n,_n,this.view),Ss(e,n,_n,this.view))>this.squaredShortLineThreshold}isVertical(e,i){return zc(e,i)<xh.verticalLineThreshold}squaredProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:i}=this.options,n=e*i;return n*n}},Yot=class extends w1{constructor({lineStart:e,lineEnd:i,targetPoint:n,isDraped:r}){super(n,new dbe(e,i),r,Cr.SELF),this._referenceLineHint=new Ju(El.REFERENCE_EXTENSION,e,i,r,this.domain)}get hints(){return[this._referenceLineHint,new Ju(El.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}},Zot=class extends lL{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],r=n.edges.length,s=[];if(r<1)return s;const{spatialReference:o}=i,a=Ss(e,o,_n,this.view),{view:l}=this,u=n.edges[r-1];let h=u;do{if(this.edgeExceedsShortLineThreshold(h,i)){const p=QO(h,l,i);this._processCandidateProposal(p.left,p.right,e,a,i,s)}h=h.leftVertex.leftEdge}while(h&&h!==u);return s}snapExistingVertex(e,i){const n=[],r=i.vertexHandle,s=r.component;if(s.edges.length<2)return n;const{view:o}=this,{spatialReference:a}=i,l=Ss(e,a,_n,o),u=r.leftEdge,h=r.rightEdge;u&&h&&this.edgeExceedsShortLineThreshold(u,i)&&this.edgeExceedsShortLineThreshold(h,i)&&this._processCandidateProposal(vi(u.leftVertex.pos,o,i),vi(h.rightVertex.pos,o,i),e,l,i,n);const p=s.edges[0];let f=p;do{if(f!==r.leftEdge&&f!==r.rightEdge&&this.edgeExceedsShortLineThreshold(f,i)){const g=QO(f,o,i);this._processCandidateProposal(g.left,g.right,e,l,i,n)}f=f.rightVertex.rightEdge}while(f&&f!==p);return n}_processCandidateProposal(e,i,n,r,s,o){var h;const{spatialReference:a,pointer:l}=s,u=vH(n,{start:e,end:i,type:jn.LINE});G0(r,Ss(u,a,_n,this.view))<this.squaredProximityThreshold(l)&&o.push(new Yot({lineStart:e,lineEnd:i,targetPoint:u,isDraped:((h=s.elevationInfo)==null?void 0:h.mode)==="on-the-ground"}))}},Kot=class vbe extends aL{constructor(e,i,n,r=Cr.ALL){super(n,r),this.lineStart=e,this.lineEnd=i}equals(e){return e instanceof vbe&&Fn(this.lineStart,e.lineStart)&&Fn(this.lineEnd,e.lineEnd)}},Xot=class extends w1{constructor({referenceLine:e,lineStart:i,targetPoint:n,isDraped:r}){const s=$h(i),{left:o,right:a}=e;HP(s,Vae(s,s,a),o),super(n,new dbe(i,s),r,Cr.SELF),this._referenceLines=[{edge:e,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new Ju(El.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new Kot(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(e=>new Ju(El.REFERENCE,e.edge.left,e.edge.right,this.isDraped,this.domain,e.fadeLeft,e.fadeRight))]}addReferenceLine(e){const i={edge:e,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(n=>{Fn(e.right,n.edge.left)&&(n.fadeLeft=!1,i.fadeRight=!1),Fn(e.right,n.edge.right)&&(n.fadeRight=!1,i.fadeRight=!1),Fn(e.left,n.edge.right)&&(n.fadeRight=!1,i.fadeLeft=!1),Fn(e.left,n.edge.left)&&(n.fadeLeft=!1,i.fadeLeft=!1)}),this._referenceLines.push(i)}};class Qot extends lL{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],r=n.edges.length,s=n.vertices.length,o=[];if(r<2)return o;const{view:a}=this,l=Ss(e,i.spatialReference,_n,a),u=vi(n.vertices[s-1].pos,a,i),h=vi(n.vertices[0].pos,a,i),p=n.edges[r-1];let f=p;do{if(this.edgeExceedsShortLineThreshold(f,i)){const g=QO(f,a,i);this._checkEdgeForParallelLines(g,u,e,l,i,o),this._checkEdgeForParallelLines(g,h,e,l,i,o)}f=f.leftVertex.leftEdge}while(f&&f!==p);return o}snapExistingVertex(e,i){const n=[],r=i.vertexHandle,s=r.component;if(s.edges.length<3)return n;const{view:o}=this,a=Ss(e,i.spatialReference,_n,o),l=r.leftEdge,u=r.rightEdge,h=s.vertices[0],p=vi(h.pos,o,i),f=s.vertices.length,g=s.vertices[f-1],v=vi(g.pos,o,i),b=s.edges[0];let _=b;do{if(_!==l&&_!==u&&this.edgeExceedsShortLineThreshold(_,i)){const w=QO(_,o,i);l&&this._checkEdgeForParallelLines(w,vi(l.leftVertex.pos,o,i),e,a,i,n),u&&this._checkEdgeForParallelLines(w,vi(u.rightVertex.pos,o,i),e,a,i,n),r===h?this._checkEdgeForParallelLines(w,v,e,a,i,n):r===g&&this._checkEdgeForParallelLines(w,p,e,a,i,n)}_=_.rightVertex.rightEdge}while(_&&_!==b);return n}_checkEdgeForParallelLines(e,i,n,r,s,o){var f;const a=e.left,l=e.right;if(h5(cg,i,a,l),zc(cg,i)<xh.parallelLineThreshold)return;h5(cg,n,a,l,i);const{spatialReference:u,pointer:h}=s,p=Ro(cg[0],cg[1],n[2]);if(G0(r,Ss(p,u,_n,this.view))<this.squaredProximityThreshold(h)){if(this.isVertical(p,i)||this.isVertical(a,l)||this._parallelToPreviousCandidate(e,o))return;o.push(new Xot({referenceLine:e,lineStart:i,targetPoint:p,isDraped:((f=s.elevationInfo)==null?void 0:f.mode)==="on-the-ground"}))}}_parallelToPreviousCandidate(e,i){const n=e.left,r=e.right;for(const s of i)if(h5(cg,r,s.constraint.start,s.constraint.end,n),zc(cg,r)<xh.parallelLineThreshold)return s.addReferenceLine(e),!0;return!1}}const cg=Ct();class eat extends lL{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],r=n.vertices.length,s=[];if(r<2)return s;const{view:o}=this,a=Ss(e,i.spatialReference,_n,o),l=n.vertices[r-1];if(this.edgeExceedsShortLineThreshold(l.leftEdge,i)){const h=vi(l.pos,o,i),p=vi(l.leftEdge.leftVertex.pos,o,i);this._checkForSnappingCandidate(s,p,h,e,a,i)}const u=n.vertices[0];if(this.edgeExceedsShortLineThreshold(u.rightEdge,i)){const h=vi(u.pos,o,i),p=vi(u.rightEdge.rightVertex.pos,o,i);this._checkForSnappingCandidate(s,p,h,e,a,i)}return s}snapExistingVertex(e,i){const n=[],r=i.vertexHandle;if(r.component.vertices.length<3)return n;const{view:s}=this,o=Ss(e,i.spatialReference,_n,s),a=r.leftEdge,l=r.rightEdge;if(a&&a.leftVertex.leftEdge){const u=a.leftVertex.leftEdge;if(this.edgeExceedsShortLineThreshold(u,i)){const h=vi(u.rightVertex.pos,s,i),p=vi(u.leftVertex.pos,s,i);this._checkForSnappingCandidate(n,p,h,e,o,i)}}if(l&&l.rightVertex.rightEdge){const u=l.rightVertex.rightEdge;if(this.edgeExceedsShortLineThreshold(u,i)){const h=vi(u.leftVertex.pos,s,i),p=vi(u.rightVertex.pos,s,i);this._checkForSnappingCandidate(n,p,h,e,o,i)}}return n}_checkForSnappingCandidate(e,i,n,r,s,o){var f;const{spatialReference:a,pointer:l}=o;zn(Ik,n,i);const u=Ah(tat,Ik[1],-Ik[0],0),h=Mm(u,zn(Ik,r,n))/hm(u),p=yh($h(r),n,u,h);if(G0(s,Ss(p,a,_n,this.view))<this.squaredProximityThreshold(l)){if(this.isVertical(p,n)||this.isVertical(n,i))return;const g=qf(Et(),n,u,Math.sign(h));e.push(new ybe({targetPoint:p,constraint:new ube(n,g),previousVertex:i,otherVertex:n,otherVertexType:Lw.CENTER,isDraped:((f=o.elevationInfo)==null?void 0:f.mode)==="on-the-ground"}))}}}const Ik=Ct(),tat=Et();let iat=class extends w1{constructor({targetPoint:e,point1:i,point2:n,isDraped:r}){super(e,new cbe(qae(Et(),i,n,.5),.5*U0(i,n)),r,Cr.SELF),this._p1=i,this._p2=n}get hints(){return[new Ju(El.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new Ju(El.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new mbe(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}};class nat extends lL{snapNewVertex(e,i){const n=i.editGeometryOperations.data.components[0],r=[],s=n.vertices.length;if(i.editGeometryOperations.data.type!=="polygon"||s<2)return r;const{view:o}=this,a=n.vertices[0],l=n.vertices[s-1],u=vi(a.pos,o,i),h=vi(l.pos,o,i);return this._processCandidateProposal(u,h,e,i,r),r}snapExistingVertex(e,i){const n=[],r=i.vertexHandle,s=r.component;if(s.edges.length<2||i.editGeometryOperations.data.type==="polyline"&&(r.index===0||r.index===s.vertices.length-1))return n;const{view:o}=this,a=vi(r.leftEdge.leftVertex.pos,o,i),l=vi(r.rightEdge.rightVertex.pos,o,i);return this._processCandidateProposal(a,l,e,i,n),n}_processCandidateProposal(e,i,n,r,s){var g;if(!this.exceedsShortLineThreshold(e,i,r))return;const o=Ame(rat,e,i,.5),a=.5*U0(e,i),l=Et();Iot(l,n,o,a),l[2]=n[2];const u=l,{spatialReference:h,pointer:p}=r,f=Ss(n,h,_n,this.view);if(G0(f,Ss(u,h,_n,this.view))<this.squaredProximityThreshold(p)){if(this.isVertical(e,u)||this.isVertical(u,i))return;s.push(new iat({targetPoint:u,point1:e,point2:i,isDraped:((g=r.elevationInfo)==null?void 0:g.mode)==="on-the-ground"}))}}}const rat=Ct();let Fb=class extends _e{constructor(t){super(t),this.updating=!1,this._snappers=new we,this._domain=Cr.SELF}initialize(){this._snappers.push(new Qot(this.view,this.options),new Zot(this.view,this.options),new eat(this.view,this.options),new nat(this.view,this.options))}set options(t){this._set("options",t);for(const e of this._snappers)e.options=t}async fetchCandidates(t,e,i){if(!(e&this._domain&&this.options.effectiveSelfEnabled))return[];const n=[];for(const r of this._snappers.items)for(const s of r.snap(t,i))n.push(s);return xH(t,n),n}};c([d({readOnly:!0})],Fb.prototype,"updating",void 0),c([d({constructOnly:!0})],Fb.prototype,"view",void 0),c([d()],Fb.prototype,"options",null),Fb=c([O("esri.views.interactive.snapping.SelfSnappingEngine")],Fb);function sat(t,e){return[new Fb({view:t,options:e}),new rf({view:t,options:e,spatialReference:t.spatialReference})]}let uy=class extends _e{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1}};c([d({constructOnly:!0})],uy.prototype,"layer",void 0),c([d()],uy.prototype,"enabled",void 0),c([d()],uy.prototype,"updating",void 0),c([d()],uy.prototype,"availability",void 0),uy=c([O("esri.views.interactive.snapping.FeatureSnappingLayerSource")],uy);const oat=uy;let la=class extends _e{constructor(t){super(t),this.enabled=!1,this.enabledToggled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.featureSources=new we,this.distance=xh.distance,this.touchSensitivityMultiplier=xh.touchSensitivityMultiplier}get effectiveEnabled(){return this.enabledToggled?!this.enabled:this.enabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}};c([d()],la.prototype,"enabled",void 0),c([d()],la.prototype,"enabledToggled",void 0),c([d()],la.prototype,"selfEnabled",void 0),c([d()],la.prototype,"featureEnabled",void 0),c([d({type:we.ofType(oat)})],la.prototype,"featureSources",void 0),c([d()],la.prototype,"distance",void 0),c([d()],la.prototype,"touchSensitivityMultiplier",void 0),c([d({readOnly:!0})],la.prototype,"effectiveEnabled",null),c([d({readOnly:!0})],la.prototype,"effectiveSelfEnabled",null),c([d({readOnly:!0})],la.prototype,"effectiveFeatureEnabled",null),la=c([O("esri.views.interactive.snapping.SnappingOptions")],la);const EH=la;class CH extends aL{constructor(e,i,n=Cr.ALL){super(i,n),this.intersectionPoint=e}equals(e){return e instanceof CH&&Fn(this.intersectionPoint,e.intersectionPoint)}}class Tk extends w1{constructor(e,i,n,r){super(e,new oL(e,i.constraint,n.constraint),r,Cr.ALL),this.first=i,this.second=n}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new CH(this.targetPoint,this.isDraped,this.domain)]}}let lc=class extends $r.EventedMixin(mw){constructor(t){super(t),this.options=new EH,this.snappingEnginesFactory=sat,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Wd.MAIN}initialize(){this.handles.add([X(()=>{const{effectiveFeatureEnabled:t,effectiveSelfEnabled:e,touchSensitivityMultiplier:i,distance:n}=this.options;return{effectiveFeatureEnabled:t,effectiveSelfEnabled:e,touchSensitivityMultiplier:i,distance:n}},()=>{this.doneSnapping(),this.emit("changed")},Bu),X(()=>this.options,t=>{for(const e of this._engines)e.options=t},Bu),X(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:t,snappingEnginesFactory:e})=>this._recreateEngines(t,e),Io)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(t=>t.updating)}_recreateEngines(t,e){if(this._destroyEngines(),!t)return;const{view:i,options:n}=this;this._engines=e(i,n)}_destroyEngines(){for(const t of this._engines)t.destroy();this._engines=[]}get _squaredMouseProximityTreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:t,touchSensitivityMultiplier:e}=this.options,i=t*e;return i*i}get _squaredSatisfiesConstraintThreshold(){return xh.satisfiesConstraintScreenThreshold*xh.satisfiesConstraintScreenThreshold}async snap(t){return aat(t)?this._snapMultiPoint(t):this._snapSinglePoint(t)}update(t){const{point:e,context:i}=t;this._removeVisualization();const n=this._currentMainCandidate;if(U(n))return e;const r=this._selectUpdateInput(t);if(U(r))return e;const{spatialReference:s}=i,o=Hu(r,s);if(U(o))return e;const{view:a}=this,{elevationInfo:l,visualizer:u}=i,h=[],p=tE(o,a,i),f=n.constraint.closestTo(p);if(!this._arePointsWithinScreenThreshold(p,f,i))return this._resetSnappingState(),e;n.targetPoint=f,h.push(...n.hints);for(const g of this._currentOtherActiveCandidates)g.targetPoint=f,h.push(...g.hints);return A(u)&&this.handles.add(u.draw(h,{spatialReference:s,elevationInfo:lat(i),view:a,selfSnappingZ:i.selfSnappingZ}),kk),Pte(f,a,{z:e.z,m:e.m,spatialReference:e.spatialReference,elevationInfo:l})}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:t,scenePoint:e}){switch(this._currentSnappedType){case Wd.MAIN:return t;case Wd.SCENE:return e}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Wd.MAIN}_removeVisualization(){this.handles.remove(kk)}async _snapSinglePoint({point:t,context:e,signal:i}){const{view:n}=this,r=tE(t,n,e),s=await this._fetchCandidates(r,Cr.ALL,e,i);return this._createSnapResult(r,Wd.MAIN,s,n,e,{z:t.z,m:t.m,spatialReference:t.spatialReference,elevationInfo:e.elevationInfo},i)}async _snapMultiPoint({point:t,scenePoint:e,context:i,signal:n}){const{view:r}=this,{coordinateHelper:s,spatialReference:o}=i;await B9(e.spatialReference,o);const a=Hu(e,o),l=tE(a,r,i),u=await this._fetchCandidates(l,Cr.FEATURE,i,n);if(u.length>0){const f=await this._fetchCandidates(l,Cr.SELF,i,n);return this._createSnapResult(l,Wd.SCENE,[...u,...f],r,i,{z:a.z,m:a.m,spatialReference:a.spatialReference,elevationInfo:i.elevationInfo},n)}const h=tE(t,r,i),p=await this._fetchCandidates(h,Cr.SELF,i,n);return this._createSnapResult(h,Wd.MAIN,p,r,i,{z:s.hasZ()&&t.hasZ?t.z??0:void 0,m:s.hasM()&&t.hasM?t.m??0:void 0,spatialReference:t.spatialReference,elevationInfo:i.elevationInfo},n)}async _fetchCandidates(t,e,i,n){return(await Promise.all(this._engines.map(r=>r.fetchCandidates(t,e,i,n)))).flat()}_createSnapResult(t,e,i,n,r,s,o){return{get valid(){return!$a(o)},apply:()=>{const{spatialReference:a}=r,{snappedPoint:l,hints:u}=this._processCandidates(t,e,i,r);return this._removeVisualization(),A(r.visualizer)&&this.handles.add(r.visualizer.draw(u,{spatialReference:a,elevationInfo:_n,view:n,selfSnappingZ:r.selfSnappingZ}),kk),Pte(l,n,s)}}}_processCandidates(t,e,i,n){if(i.length<1)return this.doneSnapping(),{snappedPoint:t,hints:[]};this._currentSnappedType!==e&&this._resetSnappingState(),xH(t,i);const r=this._currentMainCandidate;if(A(r)){const s=this._findOldConstraintInNewCandidates(r,i);if(s>=0){if(!(i[s]instanceof Tk))return this._intersectWithOtherCandidates(s,i,t,e,n);if(this._arePointsWithinScreenThreshold(t,r.targetPoint,n))return this._updateSnappingCandidate(r,e,i,n)}}return this._intersectWithOtherCandidates(0,i,t,e,n)}_findOldConstraintInNewCandidates(t,e){return t instanceof Tk?this._findOldCandidateIndex(e,t.first)>=0&&this._findOldCandidateIndex(e,t.second)>=0?0:-1:this._findOldCandidateIndex(e,t)}_intersectWithOtherCandidates(t,e,i,n,r){const{coordinateHelper:s}=r,o=e[t],a=[];for(let l=0;l<e.length;++l){if(l===t)continue;const u=e[l];for(const h of o.constraint.intersect(u.constraint)){const p=h.closestTo(o.targetPoint);a.push([new Tk(p,o,u,u.isDraped),this._squaredScreenDistance(i,p,s)])}}return a.length>0&&(a.sort((l,u)=>l[1]-u[1]),a[0][1]<this._squaredPointProximityThreshold(r.pointer))?this._updateSnappingCandidate(a[0][0],n,e,r):this._updateSnappingCandidate(o,n,e,r)}_updateSnappingCandidate(t,e,i,n){this.doneSnapping(),this._currentMainCandidate=t,this._currentSnappedType=e;const r=this._currentMainCandidate.targetPoint,s=[];s.push(...t.hints);for(const o of i){if(t instanceof Tk){if(o.constraint.equals(t.first.constraint)||o.constraint.equals(t.second.constraint))continue}else if(o.constraint.equals(t.constraint))continue;const a=o.constraint.closestTo(r);this._squaredScreenDistance(a,r,n.coordinateHelper)<this._squaredSatisfiesConstraintThreshold&&(o.targetPoint=r,this._currentOtherActiveCandidates.push(o),s.push(...o.hints))}return{snappedPoint:r,hints:s}}_squaredPointProximityThreshold(t){return t==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityTreshold}_arePointsWithinScreenThreshold(t,e,i){return this._squaredScreenDistance(t,e,i.coordinateHelper)<this._squaredPointProximityThreshold(i.pointer)}_squaredScreenDistance(t,e,i){return G0(this._toScreen(t,i),this._toScreen(e,i))}_toScreen(t,e){return Ss(t,e.spatialReference,_n,this.view)}_findOldCandidateIndex(t,e){let i=-1;for(let n=0;n<t.length;++n)if(e.constraint.equals(t[n].constraint)){i=n;break}return i}get test(){return{visualizationsActive:this.handles.has(kk),engines:this._engines}}};var Wd;c([d({constructOnly:!0})],lc.prototype,"view",void 0),c([d()],lc.prototype,"options",void 0),c([d({readOnly:!0})],lc.prototype,"updating",null),c([d()],lc.prototype,"snappingEnginesFactory",void 0),c([d()],lc.prototype,"_engines",void 0),c([d()],lc.prototype,"_squaredMouseProximityTreshold",null),c([d()],lc.prototype,"_squaredTouchProximityThreshold",null),c([d()],lc.prototype,"_squaredSatisfiesConstraintThreshold",null),lc=c([O("esri.views.interactive.snapping.SnappingManager")],lc),function(t){t[t.MAIN=0]="MAIN",t[t.SCENE=1]="SCENE"}(Wd||(Wd={}));const kk="visualization-handle";function aat(t){return A(t.scenePoint)}function lat({coordinateHelper:t,elevationInfo:e}){return t.hasZ()?_n:e}function cat(t){return A(t)&&t.type==="graphic"}function uat(t){return t.find(cat)??null}let zr=class extends $r.EventedAccessor{constructor(t){super(t),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(t){this.history.redo=[],this.history.undo.push(t)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){var t;(t=this.activeComponent)==null||t.reset()}refreshComponent(){const t=this.activeComponent;t&&(t.type!=="box"&&t.type!=="reshape"&&t.type!=="graphic-mover"||t.refresh())}set undo(t){this._set("undo",()=>{this.canUndo()&&t()})}set redo(t){this._set("redo",()=>{this.canRedo()&&t()})}};c([d()],zr.prototype,"activeComponent",void 0),c([d()],zr.prototype,"cancelled",void 0),c([d()],zr.prototype,"history",void 0),c([d()],zr.prototype,"tool",null),c([d()],zr.prototype,"type",void 0),c([d()],zr.prototype,"canUndo",null),c([d()],zr.prototype,"canRedo",null),c([d()],zr.prototype,"onEnd",void 0),c([d()],zr.prototype,"undo",null),c([d()],zr.prototype,"redo",null),c([d()],zr.prototype,"toggleTool",void 0),c([d()],zr.prototype,"addToSelection",void 0),c([d()],zr.prototype,"removeFromSelection",void 0),zr=c([O("esri.widgets.Sketch.support.OperationHandle")],zr);let OA=class extends zr{};c([d()],OA.prototype,"activeComponent",void 0),OA=c([O("esri.widgets.Sketch.support.CreateOperationHandle")],OA);let Xd=class extends zr{};c([d()],Xd.prototype,"activeComponent",void 0),Xd=c([O("esri.widgets.Sketch.support.UpdateOperationHandle")],Xd);const Fte={defaultZ:0},$k={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,tool:"transform"};let Xt=class extends $r.EventedAccessor{constructor(t){super(t),this._numUpdating=0,this._handles=new wn,this._internalGraphicsLayer=new fve({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandles=new wn,this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.labelOptions=new _ve,this.layer=null,this.pointSymbol=new $c({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new Lc({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new Is({color:[130,130,130,1],width:2}),this._snappingManager=null,this.tooltipOptions=new wve,this.updateGraphics=new we,this.updateOnGraphicClick=!0,this.updatePointSymbol=new $c({size:10,color:[0,200,255,.5],outline:{color:"black",width:1}}),this.updatePolygonSymbol=new Lc({color:[12,207,255,.2],outline:{join:"round",color:[12,207,255],width:2}}),this.updatePolylineSymbol=new Is({color:[12,207,255],width:2}),this.vertexSymbol=new $c({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalAutoOpenEnabled=null,this.defaultCreateOptions=Fte,this.defaultUpdateOptions=$k,this.snappingOptions=new EH}initialize(){this._handles.add([ji(()=>{var t,e;return(e=(t=this.view)==null?void 0:t.map)==null?void 0:e.layers},"change",t=>{t.removed.includes(this.layer)&&this.cancel()}),ji(()=>{var t;return(t=this.layer)==null?void 0:t.graphics},"change",t=>{if(A(this._operationHandle))for(const e of t.removed)this.updateGraphics.includes(e)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(e):this._operationHandle.cancel())}),X(()=>{var t;return((t=this.layer)==null?void 0:t.elevationInfo)??null},t=>{t!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=t)},Io),X(()=>this.view,t=>{si(this._snappingManager),t&&(this._snappingManager=new lc({view:t,options:this.snappingOptions}),t.type==="2d"?q(()=>import("./editingTools-2a6b293b.js"),["assets/editingTools-2a6b293b.js","assets/SnappingVisualizer2D-5966049f.js","assets/enums-55085e26.js","assets/settings-f7d68114.js","assets/SnappingContext-ecb67583.js","assets/PointSnappingHint-f32d61d8.js","assets/plane-163fe497.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/editPlaneUtils-ef789242.js","assets/automaticLengthMeasurementUtils-24277b5b.js","assets/getDefaultUnitForView-7806ca44.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/drawSurfaces-e8a20056.js","assets/quat-b06529da.js","assets/SnappingDragPipelineStep-53254785.js","assets/hydratedFeatures-cb62cc9c.js","assets/drawUtils-b49928b5.js","assets/SnappingOperation-470d0ac7.js","assets/automaticAreaMeasurementUtils-97f55f2e.js","assets/earcut-61f7b102.js","assets/triangle-82cfef35.js","assets/lineSegment-63c436ff.js","assets/boundedPlane-694974c2.js","assets/analysisThemeUtils-87c5d5ce.js","assets/colorUtils-14347c9c.js","assets/GraphicManipulator-a454be56.js","assets/drapedUtils-476a1deb.js"]):t.type==="3d"&&(q(()=>import("./editingTools-6ae22292.js").then(e=>e.e),["assets/editingTools-6ae22292.js","assets/automaticLengthMeasurementUtils-24277b5b.js","assets/getDefaultUnitForView-7806ca44.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/dragEventPipeline3D-3e3eb4f6.js","assets/vec4f32-0d1b2306.js","assets/Octree-20f758fd.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/plane-163fe497.js","assets/Util-778b7564.js","assets/lineSegment-63c436ff.js","assets/NativeLineMaterial-2bc2eb58.js","assets/interfaces-736d93d7.js","assets/basicInterfaces-04e01328.js","assets/enums-64ab819c.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/VertexColor.glsl-15c5c3e9.js","assets/requestImageUtils-1d4d3276.js","assets/OrderIndependentTransparency-92d1201d.js","assets/triangle-82cfef35.js","assets/Indices-679d5379.js","assets/VertexAttribute-15d1866a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/quat-b06529da.js","assets/vec3f32-ad1dc57f.js","assets/BufferView-48b69dc1.js","assets/VertexElementDescriptor-2925c6af.js","assets/NestedMap-1b5db22e.js","assets/InterleavedLayout-fd66e391.js","assets/types-e1c0a5bf.js","assets/boundedPlane-694974c2.js","assets/glUtil-7a9be557.js","assets/DoubleArray-60426e22.js","assets/hydratedFeatures-cb62cc9c.js","assets/floatRGBA-42e02ec2.js","assets/SnappingContext-ecb67583.js","assets/PointSnappingHint-f32d61d8.js","assets/SnappingDragPipelineStep-53254785.js","assets/drawUtils-b49928b5.js","assets/line-8be04f30.js","assets/triangulationUtils-33b1c075.js","assets/earcut-61f7b102.js","assets/deduplicate-37ec4dbf.js","assets/editPlaneUtils-ef789242.js","assets/drawSurfaces-e8a20056.js","assets/SnappingOperation-470d0ac7.js","assets/automaticAreaMeasurementUtils-97f55f2e.js","assets/GraphicManipulator-a454be56.js","assets/drapedUtils-476a1deb.js","assets/TranslateTooltipInfos-7c5f6653.js","assets/axisAngleDegrees-fd3200b6.js","assets/persistable-a921308b.js","assets/resourceExtension-32d7128f.js","assets/ExtentTooltipInfos-3beaa5d2.js"]),q(()=>import("./GraphicsLayerView3D-80c073a9.js").then(e=>e.G),["assets/GraphicsLayerView3D-80c073a9.js","assets/NativeLineMaterial-2bc2eb58.js","assets/interfaces-736d93d7.js","assets/basicInterfaces-04e01328.js","assets/enums-64ab819c.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/VertexColor.glsl-15c5c3e9.js","assets/requestImageUtils-1d4d3276.js","assets/OrderIndependentTransparency-92d1201d.js","assets/Util-778b7564.js","assets/mat4f64-65d35099.js","assets/triangle-82cfef35.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/quatf64-3363c48e.js","assets/lineSegment-63c436ff.js","assets/Indices-679d5379.js","assets/VertexAttribute-15d1866a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/quat-b06529da.js","assets/vec3f32-ad1dc57f.js","assets/BufferView-48b69dc1.js","assets/VertexElementDescriptor-2925c6af.js","assets/NestedMap-1b5db22e.js","assets/Octree-20f758fd.js","assets/plane-163fe497.js","assets/InterleavedLayout-fd66e391.js","assets/types-e1c0a5bf.js","assets/boundedPlane-694974c2.js","assets/glUtil-7a9be557.js","assets/DoubleArray-60426e22.js","assets/hydratedFeatures-cb62cc9c.js","assets/floatRGBA-42e02ec2.js","assets/rendererConversion-8f553846.js","assets/optimizedFeatureQueryEngineAdapter-042e303f.js","assets/centroid-9716b441.js","assets/edgeUtils-75bffd37.js","assets/earcut-61f7b102.js","assets/vec33-c2c00d51.js","assets/triangulationUtils-33b1c075.js","assets/deduplicate-37ec4dbf.js","assets/objectResourceUtils-47ea1727.js","assets/DefaultMaterial_COLOR_GAMMA-56d85834.js","assets/resourceUtils-905695c0.js","assets/symbolColorUtils-6f138364.js","assets/callExpressionWithFeature-cd5f0a91.js","assets/line-8be04f30.js","assets/MeshComponent-3a0e5485.js","assets/imageUtils-c2d0d1ae.js","assets/projection-210bf221.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/PooledRBush-5d91c5ae.js","assets/geometryServiceUtils-92f77436.js","assets/LayerView-4221c2d8.js"])))},Io),X(()=>{var t;return(t=this.view)==null?void 0:t.spatialReference},(t,e)=>{t&&e&&!t.equals(e)&&this.cancel()})]),jot(this)}destroy(){this.cancel(),this._handles=si(this._handles),this._viewHandles=si(this._viewHandles),this._removeDefaultLayer(),this._snappingManager=si(this._snappingManager),this._set("view",null),this.emit("destroy")}get _defaultUpdateTool(){var t;return((t=this.view)==null?void 0:t.type)==="3d"?"move":"transform"}get updating(){return this._numUpdating>0||A(this._snappingManager)&&this._snappingManager.updating}get activeTool(){var t;return((t=this._operationHandle)==null?void 0:t.tool)??null}get activeComponent(){var t;return((t=this._operationHandle)==null?void 0:t.activeComponent)??null}get createGraphic(){return!A(this.activeComponent)||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(t){this._set("defaultCreateOptions",{...Fte,...t})}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(t){this._set("defaultUpdateOptions",{...$k,...t,reshapeOptions:{...$k.reshapeOptions,...t==null?void 0:t.reshapeOptions}})}set snappingOptions(t){A(this._snappingManager)&&(this._snappingManager.options=t),this._set("snappingOptions",t)}get state(){var i;const t=!(!((i=this.view)!=null&&i.ready)||!this.layer),e=this._operationHandle;return t&&e?"active":t?"ready":"disabled"}get view(){return this._get("view")}set view(t){const e=this._get("view");if(e){const{container:n,map:r}=e;n&&(e.cursor=null),r&&r.remove(this._internalGraphicsLayer),this._viewHandles.removeAll(),this.cancel()}const i="view-ready";this._handles.remove(i),t&&this._handles.add(Ys(()=>t.ready,n=>{this._viewHandles.removeAll(),n&&this._viewHandles.add(this._generateViewHandles(t))},Io),i),this._set("view",t)}cancel(){this._moduleLoaderAbortController=Ky(this._moduleLoaderAbortController),this._viewReadyAbortController=Ky(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){const{state:t,updateGraphics:e}=this;if(t==="active"&&e.length){const{activeTool:i,layer:n}=this,r=e.toArray();n.removeMany(r),this.cancel(),this._emitDeleteEvent({graphics:r,tool:i})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){const t=this.updateGraphics.map(e=>e.clone()).toArray();return this.layer.addMany(t),this.emit("duplicate",{graphics:t,type:"duplicate"}),t}return[]}async create(t,e){this.cancel(),await this._waitViewReady();const{view:i,layer:n}=this;if(!i||this.state==="disabled")throw n||this._logMissingLayer(),li();if(A(i.activeTool)&&(i.activeTool=null),!t)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");ute(i,this._internalGraphicsLayer);const r=await this._setupCreateOperation(t,e);if(U(r)||this.destroyed)return void i.map.remove(this._internalGraphicsLayer);const s=()=>{if(r===this._operationHandle){const o=this.createGraphic,a=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view&&this.view.map&&this.view.map.remove(this._internalGraphicsLayer),r.cancelled||o==null||n.add(o),this.emit("create",{graphic:o,state:a?"cancel":"complete",tool:t,toolEventInfo:null,type:"create"})}};r.on("complete",s),this._operationHandle=r,i.ready&&i.focus()}async update(t,e){this.cancel(),await this._waitViewReady();const{layer:i,view:n,state:r}=this;if(!n||r==="disabled")throw i||this._logMissingLayer(),li();A(n.activeTool)&&(n.activeTool=null);const s=Array.isArray(t)?t:[t];if(t==null||!s||!s.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(s.some(a=>a.layer!==i?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):!!U(a.geometry)&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;const o=await this._setupUpdateOperation(s,e);this.destroyed||U(o)||kn(o)||(ute(n,this._internalGraphicsLayer),this._setUpdateOperationHandle(o,e),this.emit("update",{graphics:s,state:"start",aborted:!1,tool:o.tool,toolEventInfo:null,type:"update"}))}async _updateSpatialReference(t){const e=this.view;if(e){this._beginAsyncOperation(),t=Array.isArray(t)?t:[t];for(const i of t)A(i.geometry)&&i.geometry.type!=="mesh"&&!ui(i.geometry.spatialReference,e.spatialReference)&&(Gu(i.geometry.spatialReference,e.spatialReference)||om()||await am(),i.geometry=Hu(i.geometry,e.spatialReference));this._endAsyncOperation()}else this._logMissingView()}undo(){var t;this.canUndo()&&((t=this._operationHandle)==null||t.undo())}redo(){var t;this.canRedo()&&((t=this._operationHandle)==null||t.redo())}canUndo(){return!(!this._operationHandle||!this._operationHandle.canUndo())}canRedo(){return!(!this._operationHandle||!this._operationHandle.canRedo())}toggleUpdateTool(){this._operationHandle&&this._operationHandle.toggleTool&&this._operationHandle.toggleTool()}async _getFirstHit(t){const e=this.view;if(!e)return this._logMissingView(),null;if(e.type==="2d"){const r=[];e.map.allLayers.forEach(o=>{o.type!=="vector-tile"&&o.type!=="imagery"||r.push(o)});const s=await e.hitTest(t,{exclude:r});return uat(s.results)}const i=[e.map.ground];e.map.allLayers.forEach(r=>{r.type==="integrated-mesh"&&i.push(r)});const n=await e.hitTest(t,{exclude:i});if(n.results.length>0){const r=n.results[0];if(A(r)&&r.type==="graphic"&&r.graphic&&(!n.ground.mapPoint||e.map.ground.opacity<1||n.ground.distance-xs(r.distance,0)>-Math.min(3*n.ground.distance,e.viewingMode==="global"?H8(e.renderCoordsHelper.spatialReference).radius/e.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return r}return null}_generateViewHandles(t){return[t.on("immediate-click",async e=>{var s;const i=this.state==="active"&&((s=this._operationHandle)==null?void 0:s.type)==="create";if(this.state==="disabled"||i||!this.updateOnGraphicClick)return;this._beginAsyncOperation();const n=await e.async(()=>this._getFirstHit(el(e)));let r=null;if(A(n)){const o=n.graphic;this.updateGraphics.includes(o)||o.layer===this.layer?(e.stopPropagation(),r=o):t.type!=="2d"||this._isComponentGraphic(o)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();A(r)&&!this.updateGraphics.includes(r)&&await this.update([r],{...this.defaultUpdateOptions,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions}}),this._endAsyncOperation()},ri.WIDGET)]}async _setupCreateOperation(t,e){const i=this.view;if(!i)return this._logMissingView(),null;const n={hasZ:i.type==="3d",...this.defaultCreateOptions,...e},r=await this._setupDrawGraphicTool(t,i,n);return U(r)?null:(i.tools.add(r),i.activeTool=r,this._setupCreateOperationHandle(r))}async _setupDrawGraphicTool(t,e,i){if(t==="multipoint"&&e.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!e)return this._logMissingView(),null;const n=t!=="rectangle",r=t!=="rectangle",s={view:e,mode:t==="rectangle"||t==="circle"?"hybrid":"click",...i,snapToScene:!1,geometryType:t,graphicSymbol:this._getGraphicSymbolFromTool(t),snappingManager:this._snappingManager,forceUniformSize:r,centered:n};return e.type==="2d"?this._makeDrawGraphicTool2D(s):this._makeDrawGraphicTool3D(s)}async _makeDrawGraphicTool2D(t){const e=await this._requireModule(q(()=>import("./editingTools-2a6b293b.js"),["assets/editingTools-2a6b293b.js","assets/SnappingVisualizer2D-5966049f.js","assets/enums-55085e26.js","assets/settings-f7d68114.js","assets/SnappingContext-ecb67583.js","assets/PointSnappingHint-f32d61d8.js","assets/plane-163fe497.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/editPlaneUtils-ef789242.js","assets/automaticLengthMeasurementUtils-24277b5b.js","assets/getDefaultUnitForView-7806ca44.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/drawSurfaces-e8a20056.js","assets/quat-b06529da.js","assets/SnappingDragPipelineStep-53254785.js","assets/hydratedFeatures-cb62cc9c.js","assets/drawUtils-b49928b5.js","assets/SnappingOperation-470d0ac7.js","assets/automaticAreaMeasurementUtils-97f55f2e.js","assets/earcut-61f7b102.js","assets/triangle-82cfef35.js","assets/lineSegment-63c436ff.js","assets/boundedPlane-694974c2.js","assets/analysisThemeUtils-87c5d5ce.js","assets/colorUtils-14347c9c.js","assets/GraphicManipulator-a454be56.js","assets/drapedUtils-476a1deb.js"]));return kn(e)||this.destroyed?null:new e.module.DrawGraphicTool2D({...t,activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:hat(t.geometryType)?this.activeFillSymbol:null,tooltipOptions:this.tooltipOptions})}async _makeDrawGraphicTool3D(t){const e=await this._requireModule(q(()=>import("./editingTools-6ae22292.js").then(n=>n.e),["assets/editingTools-6ae22292.js","assets/automaticLengthMeasurementUtils-24277b5b.js","assets/getDefaultUnitForView-7806ca44.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/dragEventPipeline3D-3e3eb4f6.js","assets/vec4f32-0d1b2306.js","assets/Octree-20f758fd.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/plane-163fe497.js","assets/Util-778b7564.js","assets/lineSegment-63c436ff.js","assets/NativeLineMaterial-2bc2eb58.js","assets/interfaces-736d93d7.js","assets/basicInterfaces-04e01328.js","assets/enums-64ab819c.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/VertexColor.glsl-15c5c3e9.js","assets/requestImageUtils-1d4d3276.js","assets/OrderIndependentTransparency-92d1201d.js","assets/triangle-82cfef35.js","assets/Indices-679d5379.js","assets/VertexAttribute-15d1866a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/quat-b06529da.js","assets/vec3f32-ad1dc57f.js","assets/BufferView-48b69dc1.js","assets/VertexElementDescriptor-2925c6af.js","assets/NestedMap-1b5db22e.js","assets/InterleavedLayout-fd66e391.js","assets/types-e1c0a5bf.js","assets/boundedPlane-694974c2.js","assets/glUtil-7a9be557.js","assets/DoubleArray-60426e22.js","assets/hydratedFeatures-cb62cc9c.js","assets/floatRGBA-42e02ec2.js","assets/SnappingContext-ecb67583.js","assets/PointSnappingHint-f32d61d8.js","assets/SnappingDragPipelineStep-53254785.js","assets/drawUtils-b49928b5.js","assets/line-8be04f30.js","assets/triangulationUtils-33b1c075.js","assets/earcut-61f7b102.js","assets/deduplicate-37ec4dbf.js","assets/editPlaneUtils-ef789242.js","assets/drawSurfaces-e8a20056.js","assets/SnappingOperation-470d0ac7.js","assets/automaticAreaMeasurementUtils-97f55f2e.js","assets/GraphicManipulator-a454be56.js","assets/drapedUtils-476a1deb.js","assets/TranslateTooltipInfos-7c5f6653.js","assets/axisAngleDegrees-fd3200b6.js","assets/persistable-a921308b.js","assets/resourceExtension-32d7128f.js","assets/ExtentTooltipInfos-3beaa5d2.js"]));if(kn(e)||this.destroyed)return null;const{elevationInfo:i}=this.layer;return new e.module.DrawGraphicTool3D({...t,elevationInfo:i,snapToScene:!A(i)||i.mode==="absolute-height",labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions})}_setupCreateOperationHandle(t){const e=this.view;if(!e)return this._logMissingView(),null;let i=null;const n=t.forceUniformSize,r=t.centered,s=[e.on("key-down",a=>{if(a.key===Tn.pan)a.stopPropagation(),a.repeat||(t.enabled=!1);else if(a.key===Tn.complete)a.stopPropagation(),t.completeCreateOperation();else if(a.key!==Tn.vertexAdd||a.repeat)a.key===Tn.undo?(a.stopPropagation(),o.undo()):a.key===Tn.redo?(a.stopPropagation(),o.redo()):a.key!==Tn.constraint||t.geometryType!=="rectangle"&&t.geometryType!=="circle"||a.repeat?a.key===Tn.center&&(a.repeat||(t.centered=!r,a.stopPropagation())):(t.forceUniformSize=!n,a.stopPropagation());else{const l=t.drawOperation.geometryType;l!=="polyline"&&l!=="polygon"&&l!=="multipoint"||(a.stopPropagation(),t.drawOperation.commitStagedVertex())}},ri.WIDGET),e.on("key-up",a=>{a.key===Tn.pan?t.enabled=!0:a.key!==Tn.constraint||t.geometryType!=="rectangle"&&t.geometryType!=="circle"?a.key===Tn.center&&(t.centered=r,a.stopPropagation()):(t.forceUniformSize=n,a.stopPropagation())},ri.WIDGET),t.on("vertex-add",a=>{switch(i=U(i)?"start":"active",a.operation){case"apply":this.emit("create",{graphic:t.graphic,state:i,tool:this.activeTool,toolEventInfo:a,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[t.graphic],tool:t.geometryType});break;case"redo":this._emitRedoEvent({graphics:[t.graphic],tool:t.geometryType})}}),t.on("cursor-update",a=>{t.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:t.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:a.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),t.on("vertex-remove",a=>{switch(a.operation){case"apply":this.emit("create",{graphic:t.graphic,state:"active",tool:this.activeTool,toolEventInfo:a,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[t.graphic],tool:t.geometryType});break;case"redo":this._emitRedoEvent({graphics:[t.graphic],tool:t.geometryType})}}),t.on("complete",a=>{this._set("createGraphic",a.graphic),i="complete",a.aborted?o&&o.cancel():o&&o.complete()}),X(()=>this._getGraphicSymbolFromTool(t.geometryType),a=>{t.graphicSymbol=a})],o=new OA({activeComponent:t,tool:t.geometryType,type:"create",onEnd:()=>{var a;s.forEach(l=>l.remove()),s.length=0,(a=e.tools)==null||a.remove(t)},undo:()=>{t.canUndo&&t.undo()},redo:()=>{t.canRedo&&t.redo()},canUndo:()=>t.canUndo,canRedo:()=>t.canRedo});return o}_getGraphicSymbolFromTool(t){switch(t){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol}}async _setupUpdateOperation(t,e){const{layer:i,view:n}=this;if(!n)return this._logMissingView(),null;const r={tool:this._defaultUpdateTool,...this.defaultUpdateOptions,...e,reshapeOptions:{...this.defaultUpdateOptions.reshapeOptions,...e==null?void 0:e.reshapeOptions}};let s=r.tool;for(const o of t)i.remove(o),i.add(o);if(n.type==="3d"){if(t.length===0)return null;switch(s){case"move":return this._setupMove3DOperation(t,r,n,s);case"reshape":{if(t.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const o=Sk(t[0]);return o===Ut.SUPPORTED?this._setupReshape3DOperation(t[0],r,n):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${o5(o)}).`),null)}case"transform":return this._setupGraphicTransform3DOperation(t,r,n)}}switch(s){case"move":return this._setupMove2DOperation(t,r,n);case"reshape":{if(t.length>1)return this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null;const o=Sk(t[0]);return o===Ut.SUPPORTED?this._setupTransformOrReshape2DOperation(t,s,r,n):(this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${o5(o)}).`),null)}case"transform":if(t.length===1){const o=tw(t[0].geometry,"type");o!=="point"&&o!=="multipoint"||(s="reshape")}return this._setupTransformOrReshape2DOperation(t,s,r,n)}}async _setupMove3DOperation(t,e,i,n,r=!1){for(const u of t){const h=qrt(u);if(h!==Ut.SUPPORTED)return this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${o5(h)}).`),null}const s=await this._requireModule(q(()=>import("./editingTools-6ae22292.js").then(u=>u.e),["assets/editingTools-6ae22292.js","assets/automaticLengthMeasurementUtils-24277b5b.js","assets/getDefaultUnitForView-7806ca44.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/dragEventPipeline3D-3e3eb4f6.js","assets/vec4f32-0d1b2306.js","assets/Octree-20f758fd.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/plane-163fe497.js","assets/Util-778b7564.js","assets/lineSegment-63c436ff.js","assets/NativeLineMaterial-2bc2eb58.js","assets/interfaces-736d93d7.js","assets/basicInterfaces-04e01328.js","assets/enums-64ab819c.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/VertexColor.glsl-15c5c3e9.js","assets/requestImageUtils-1d4d3276.js","assets/OrderIndependentTransparency-92d1201d.js","assets/triangle-82cfef35.js","assets/Indices-679d5379.js","assets/VertexAttribute-15d1866a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/quat-b06529da.js","assets/vec3f32-ad1dc57f.js","assets/BufferView-48b69dc1.js","assets/VertexElementDescriptor-2925c6af.js","assets/NestedMap-1b5db22e.js","assets/InterleavedLayout-fd66e391.js","assets/types-e1c0a5bf.js","assets/boundedPlane-694974c2.js","assets/glUtil-7a9be557.js","assets/DoubleArray-60426e22.js","assets/hydratedFeatures-cb62cc9c.js","assets/floatRGBA-42e02ec2.js","assets/SnappingContext-ecb67583.js","assets/PointSnappingHint-f32d61d8.js","assets/SnappingDragPipelineStep-53254785.js","assets/drawUtils-b49928b5.js","assets/line-8be04f30.js","assets/triangulationUtils-33b1c075.js","assets/earcut-61f7b102.js","assets/deduplicate-37ec4dbf.js","assets/editPlaneUtils-ef789242.js","assets/drawSurfaces-e8a20056.js","assets/SnappingOperation-470d0ac7.js","assets/automaticAreaMeasurementUtils-97f55f2e.js","assets/GraphicManipulator-a454be56.js","assets/drapedUtils-476a1deb.js","assets/TranslateTooltipInfos-7c5f6653.js","assets/axisAngleDegrees-fd3200b6.js","assets/persistable-a921308b.js","assets/resourceExtension-32d7128f.js","assets/ExtentTooltipInfos-3beaa5d2.js"]));if(kn(s))return s;const o=new s.module.GraphicMoveTool({view:i,enableZ:e.enableZ,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});i.tools.add(o),o.graphics.addMany(t),r||this.updateGraphics.addMany(t);const a=[],l=new Xd({activeComponent:o,tool:n,type:"update",onEnd:()=>{var u;a.forEach(h=>h.remove()),a.length=0,(u=i.tools)==null||u.remove(o),o.destroyed||o.destroy()},undo:()=>{Ak(l,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n})},redo:()=>{Mk(l,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n})},addToSelection:u=>{this.updateGraphics.push(u),o.graphics.push(u),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[u],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:u=>{const h=this.updateGraphics.indexOf(u);l.history.undo.forEach(p=>p.updates.splice(h,1)),l.history.redo.forEach(p=>p.updates.splice(h,1)),this.updateGraphics.remove(u),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[u],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?o.graphics.remove(u):l.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||e.toggleToolOnClick===!1||n!=="transform")return;const u=this.updateGraphics.getItemAt(0);if(Sk(u)!==Ut.SUPPORTED)return;const h=await this._setupReshape3DOperation(u,e,i,!0);kn(h)||(l.onEnd(),l.destroy(),this._setUpdateOperationHandle(h,e))}});return a.push(...this._getHandlesForComponent(l,e),i.on("immediate-click",u=>this._getCommonUpdateOperationClickHandlers(l,u,e),ri.WIDGET),i.on("key-down",u=>{this._getCommonUpdateOperationKeyDownHandlers(l,u)},ri.WIDGET)),l}_setupGraphicTransform3DOperation(t,e,i,n=!1){if(t.length===1&&Jrt(t[0])===Ut.SUPPORTED){const r=t[0],s=r.geometry;if(A(s)&&(s.type==="point"||s.type==="mesh"))return this._setupPointTransform3DOperation(r,e,i);if(A(s)&&(s.type==="polygon"||s.type==="polyline"))return this._setupPolyTransform3DOperation(r,e,i,n)}return this._setupMove3DOperation(t,e,i,"transform",n)}async _setupPointTransform3DOperation(t,e,i){const n="transform",{enableRotation:r,enableScaling:s,enableZ:o}=e,a=await this._requireModule(q(()=>import("./editingTools-6ae22292.js").then(p=>p.e),["assets/editingTools-6ae22292.js","assets/automaticLengthMeasurementUtils-24277b5b.js","assets/getDefaultUnitForView-7806ca44.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/dragEventPipeline3D-3e3eb4f6.js","assets/vec4f32-0d1b2306.js","assets/Octree-20f758fd.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/plane-163fe497.js","assets/Util-778b7564.js","assets/lineSegment-63c436ff.js","assets/NativeLineMaterial-2bc2eb58.js","assets/interfaces-736d93d7.js","assets/basicInterfaces-04e01328.js","assets/enums-64ab819c.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/VertexColor.glsl-15c5c3e9.js","assets/requestImageUtils-1d4d3276.js","assets/OrderIndependentTransparency-92d1201d.js","assets/triangle-82cfef35.js","assets/Indices-679d5379.js","assets/VertexAttribute-15d1866a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/quat-b06529da.js","assets/vec3f32-ad1dc57f.js","assets/BufferView-48b69dc1.js","assets/VertexElementDescriptor-2925c6af.js","assets/NestedMap-1b5db22e.js","assets/InterleavedLayout-fd66e391.js","assets/types-e1c0a5bf.js","assets/boundedPlane-694974c2.js","assets/glUtil-7a9be557.js","assets/DoubleArray-60426e22.js","assets/hydratedFeatures-cb62cc9c.js","assets/floatRGBA-42e02ec2.js","assets/SnappingContext-ecb67583.js","assets/PointSnappingHint-f32d61d8.js","assets/SnappingDragPipelineStep-53254785.js","assets/drawUtils-b49928b5.js","assets/line-8be04f30.js","assets/triangulationUtils-33b1c075.js","assets/earcut-61f7b102.js","assets/deduplicate-37ec4dbf.js","assets/editPlaneUtils-ef789242.js","assets/drawSurfaces-e8a20056.js","assets/SnappingOperation-470d0ac7.js","assets/automaticAreaMeasurementUtils-97f55f2e.js","assets/GraphicManipulator-a454be56.js","assets/drapedUtils-476a1deb.js","assets/TranslateTooltipInfos-7c5f6653.js","assets/axisAngleDegrees-fd3200b6.js","assets/persistable-a921308b.js","assets/resourceExtension-32d7128f.js","assets/ExtentTooltipInfos-3beaa5d2.js"]));if(kn(a))return a;const l=new a.module.GraphicTransformTool({graphic:t,view:i,enableRotation:r,enableScaling:s,enableZ:o,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions});i.tools.add(l),this.updateGraphics.add(t);const u=[],h=new Xd({activeComponent:l,tool:n,type:"update",onEnd:()=>{var p;u.forEach(f=>f.remove()),u.length=0,(p=i.tools)==null||p.remove(l),l.destroyed||l.destroy()},undo:()=>{Ak(h,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:n})},redo:()=>{Mk(h,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:n})},addToSelection:async p=>{this.updateGraphics.add(p),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[p],removed:[],type:"selection-change"},type:"update"});const f=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);kn(f)||(h.onEnd(),h.destroy(),this._setUpdateOperationHandle(f,e))},removeFromSelection:p=>{this.updateGraphics.remove(p),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[p],type:"selection-change"},type:"update"}),h.complete()},toggleTool:()=>{}});return u.push(...this._getHandlesForComponent(h,e),i.on("immediate-click",p=>this._getCommonUpdateOperationClickHandlers(h,p,e),ri.WIDGET),i.on("key-down",p=>{this._getCommonUpdateOperationKeyDownHandlers(h,p)},ri.WIDGET)),h}async _setupPolyTransform3DOperation(t,e,i,n=!1){const r="transform",{enableRotation:s,enableScaling:o,enableZ:a,preserveAspectRatio:l}=e,u=await this._requireModule(q(()=>import("./editingTools-6ae22292.js").then(g=>g.e),["assets/editingTools-6ae22292.js","assets/automaticLengthMeasurementUtils-24277b5b.js","assets/getDefaultUnitForView-7806ca44.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/dragEventPipeline3D-3e3eb4f6.js","assets/vec4f32-0d1b2306.js","assets/Octree-20f758fd.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/plane-163fe497.js","assets/Util-778b7564.js","assets/lineSegment-63c436ff.js","assets/NativeLineMaterial-2bc2eb58.js","assets/interfaces-736d93d7.js","assets/basicInterfaces-04e01328.js","assets/enums-64ab819c.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/VertexColor.glsl-15c5c3e9.js","assets/requestImageUtils-1d4d3276.js","assets/OrderIndependentTransparency-92d1201d.js","assets/triangle-82cfef35.js","assets/Indices-679d5379.js","assets/VertexAttribute-15d1866a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/quat-b06529da.js","assets/vec3f32-ad1dc57f.js","assets/BufferView-48b69dc1.js","assets/VertexElementDescriptor-2925c6af.js","assets/NestedMap-1b5db22e.js","assets/InterleavedLayout-fd66e391.js","assets/types-e1c0a5bf.js","assets/boundedPlane-694974c2.js","assets/glUtil-7a9be557.js","assets/DoubleArray-60426e22.js","assets/hydratedFeatures-cb62cc9c.js","assets/floatRGBA-42e02ec2.js","assets/SnappingContext-ecb67583.js","assets/PointSnappingHint-f32d61d8.js","assets/SnappingDragPipelineStep-53254785.js","assets/drawUtils-b49928b5.js","assets/line-8be04f30.js","assets/triangulationUtils-33b1c075.js","assets/earcut-61f7b102.js","assets/deduplicate-37ec4dbf.js","assets/editPlaneUtils-ef789242.js","assets/drawSurfaces-e8a20056.js","assets/SnappingOperation-470d0ac7.js","assets/automaticAreaMeasurementUtils-97f55f2e.js","assets/GraphicManipulator-a454be56.js","assets/drapedUtils-476a1deb.js","assets/TranslateTooltipInfos-7c5f6653.js","assets/axisAngleDegrees-fd3200b6.js","assets/persistable-a921308b.js","assets/resourceExtension-32d7128f.js","assets/ExtentTooltipInfos-3beaa5d2.js"]));if(kn(u))return u;const h=new u.module.ExtentTransformTool({graphic:t,view:i,enableRotation:s,enableScaling:o,enableZ:a,preserveAspectRatio:l,tooltipOptions:this.tooltipOptions});i.tools.add(h),n||this.updateGraphics.add(t);const p=[],f=new Xd({activeComponent:h,tool:r,type:"update",onEnd:()=>{var g;p.forEach(v=>v.remove()),p.length=0,(g=i.tools)==null||g.remove(h),h.destroyed||h.destroy()},canUndo:()=>h.canUndo,undo:()=>{h.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},canRedo:()=>h.canRedo,redo:()=>{h.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async g=>{this.updateGraphics.add(g),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[g],removed:[],type:"selection-change"},type:"update"});const v=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);kn(v)||(f.onEnd(),f.destroy(),this._setUpdateOperationHandle(v,e))},removeFromSelection:g=>{this.updateGraphics.remove(g),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[g],type:"selection-change"},type:"update"}),f.complete()},toggleTool:async()=>{if(this.updateGraphics.length!==1||e.toggleToolOnClick===!1)return;const g=this.updateGraphics.getItemAt(0);if(Sk(g)!==Ut.SUPPORTED)return;const v=await this._setupReshape3DOperation(g,e,i,!0);kn(v)||(f.onEnd(),f.destroy(),this._setUpdateOperationHandle(v,e))}});return p.push(...this._getHandlesForComponent(f,e),i.on("immediate-click",g=>this._getCommonUpdateOperationClickHandlers(f,g,e),ri.WIDGET),i.on("key-down",g=>this._getCommonUpdateOperationKeyDownHandlers(f,g),ri.WIDGET),i.on("key-down",g=>{g.key!==Tn.constraint||g.repeat||(h.preserveAspectRatio=!h.preserveAspectRatio,g.stopPropagation())},ri.WIDGET),i.on("key-up",g=>{g.key===Tn.constraint&&(h.preserveAspectRatio=!h.preserveAspectRatio,g.stopPropagation())},ri.WIDGET)),f}async _setupMove2DOperation(t,e,i){const n="move";this.updateGraphics.addMany(t),await this._updateSpatialReference(t);const r=await this._getGraphicMover(t,e,i);if(kn(r))return r;const s=new Xd({activeComponent:r,tool:n,type:"update",onEnd:()=>{var u;this._displayDefaultCursor(),l.forEach(h=>h.remove()),a.forEach(h=>h.remove()),l=[],a=[],r.destroy(),(u=this._internalGraphicsLayer)==null||u.removeMany([...this.updateGraphics.toArray()])},undo:()=>{const u=this.updateGraphics.toArray();Ak(s,u),s.refreshComponent(),this._emitUndoEvent({graphics:u,tool:n})},redo:()=>{const u=this.updateGraphics.toArray();Mk(s,u),s.refreshComponent(),this._emitRedoEvent({graphics:u,tool:n})},addToSelection:async u=>{await this._updateSpatialReference(u),this.updateGraphics.push(u),r.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[u],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:u=>{const h=this.updateGraphics.indexOf(u);s.history.undo.forEach(f=>f.updates.splice(h,1)),s.history.redo.forEach(f=>f.updates.splice(h,1)),this.updateGraphics.remove(u);const p=this.updateGraphics.toArray();this.emit("update",{graphics:p,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[u],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?r.graphics=p:s.complete()}});let o=!1,a=[i.on("immediate-click",u=>this._getCommonUpdateOperationClickHandlers(s,u,e),ri.WIDGET),i.on("key-down",u=>{this._getCommonUpdateOperationKeyDownHandlers(s,u),u.key!==Tn.constraint||u.repeat||(o=!0,r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},ri.WIDGET),i.on("key-up",u=>{u.key===Tn.constraint&&o&&(o=!1,r.enableMoveAllGraphics=!r.enableMoveAllGraphics)},ri.WIDGET)],l=this._getHandlesForComponent(s,e);return s}async _setupReshape3DOperation(t,e,i,n=!1){const r="reshape",s=await this._requireModule(q(()=>import("./editingTools-6ae22292.js").then(h=>h.e),["assets/editingTools-6ae22292.js","assets/automaticLengthMeasurementUtils-24277b5b.js","assets/getDefaultUnitForView-7806ca44.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/dragEventPipeline3D-3e3eb4f6.js","assets/vec4f32-0d1b2306.js","assets/Octree-20f758fd.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/plane-163fe497.js","assets/Util-778b7564.js","assets/lineSegment-63c436ff.js","assets/NativeLineMaterial-2bc2eb58.js","assets/interfaces-736d93d7.js","assets/basicInterfaces-04e01328.js","assets/enums-64ab819c.js","assets/VertexArrayObject-867c589c.js","assets/Texture-8a965b0b.js","assets/VertexColor.glsl-15c5c3e9.js","assets/requestImageUtils-1d4d3276.js","assets/OrderIndependentTransparency-92d1201d.js","assets/triangle-82cfef35.js","assets/Indices-679d5379.js","assets/VertexAttribute-15d1866a.js","assets/doublePrecisionUtils-e3c3d0d8.js","assets/quat-b06529da.js","assets/vec3f32-ad1dc57f.js","assets/BufferView-48b69dc1.js","assets/VertexElementDescriptor-2925c6af.js","assets/NestedMap-1b5db22e.js","assets/InterleavedLayout-fd66e391.js","assets/types-e1c0a5bf.js","assets/boundedPlane-694974c2.js","assets/glUtil-7a9be557.js","assets/DoubleArray-60426e22.js","assets/hydratedFeatures-cb62cc9c.js","assets/floatRGBA-42e02ec2.js","assets/SnappingContext-ecb67583.js","assets/PointSnappingHint-f32d61d8.js","assets/SnappingDragPipelineStep-53254785.js","assets/drawUtils-b49928b5.js","assets/line-8be04f30.js","assets/triangulationUtils-33b1c075.js","assets/earcut-61f7b102.js","assets/deduplicate-37ec4dbf.js","assets/editPlaneUtils-ef789242.js","assets/drawSurfaces-e8a20056.js","assets/SnappingOperation-470d0ac7.js","assets/automaticAreaMeasurementUtils-97f55f2e.js","assets/GraphicManipulator-a454be56.js","assets/drapedUtils-476a1deb.js","assets/TranslateTooltipInfos-7c5f6653.js","assets/axisAngleDegrees-fd3200b6.js","assets/persistable-a921308b.js","assets/resourceExtension-32d7128f.js","assets/ExtentTooltipInfos-3beaa5d2.js"]));if(kn(s))return s;const o=e.reshapeOptions,a=new s.module.GraphicReshapeTool({view:i,graphic:t,enableZVertex:e.enableZ&&(o==null?void 0:o.vertexOperation)==="move",enableZShape:e.enableZ&&(o==null?void 0:o.shapeOperation)==="move",enableMoveGraphic:(o==null?void 0:o.shapeOperation)==="move"||(o==null?void 0:o.shapeOperation)==="move-xy",enableMidpoints:(o==null?void 0:o.edgeOperation)==="split",enableEdgeOffset:(o==null?void 0:o.edgeOperation)==="offset",snappingManager:this._snappingManager,labelOptions:this.labelOptions,tooltipOptions:this.tooltipOptions});i.tools.add(a),n||this.updateGraphics.add(t);const l=[],u=new Xd({activeComponent:a,tool:r,type:"update",onEnd:()=>{var h;l.forEach(p=>p.remove()),l.length=0,(h=i.tools)==null||h.remove(a),a.destroyed||a.destroy()},canUndo:()=>a.canUndo,undo:()=>{a.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r})},canRedo:()=>a.canRedo,redo:()=>{a.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r})},addToSelection:async h=>{this.updateGraphics.add(h),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[h],removed:[],type:"selection-change"},type:"update"});const p=await this._setupMove3DOperation(this.updateGraphics.toArray(),e,i,"transform",!0);kn(p)||(u.onEnd(),u.destroy(),this._setUpdateOperationHandle(p,e))},removeFromSelection:h=>{this.updateGraphics.remove(h),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[h],type:"selection-change"},type:"update"}),u.complete()},toggleTool:async()=>{if(e.toggleToolOnClick===!1)return;const h=await this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),e,i,!0);kn(h)||(u.onEnd(),u.destroy(),this._setUpdateOperationHandle(h,e))}});return l.push(...this._getHandlesForComponent(u,e),i.on("immediate-click",h=>this._getCommonUpdateOperationClickHandlers(u,h,e),ri.WIDGET),i.on("key-down",h=>{this._getCommonUpdateOperationKeyDownHandlers(u,h)},ri.WIDGET)),u}async _setupTransformOrReshape2DOperation(t,e,i,n){this.updateGraphics.addMany(t),await this._updateSpatialReference(t);const r=e==="transform"?await this._getBox(t,i,n):await this._getReshape(t,i,n);if(kn(r))return r;const s=new Xd({activeComponent:r,type:"update",onEnd:()=>{a.forEach(l=>l.remove()),o.forEach(l=>l.remove()),a=[],o=[],s.activeComponent&&!s.activeComponent.destroyed&&s.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{Ak(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},redo:()=>{Mk(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},addToSelection:async l=>{let u=s.activeComponent;if((u==null?void 0:u.type)==="reshape"){const h=[...this.updateGraphics,l];this.updateGraphics.removeAll();const p=await this._setupMove2DOperation(h,i,n);if(kn(p))return;s.onEnd(),s.destroy(),this._setUpdateOperationHandle(p,i)}else this.updateGraphics.add(l),u.graphics=this.updateGraphics.toArray(),u.refresh(),s.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[l],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:async l=>{const u=this.updateGraphics.indexOf(l);s.history.undo.forEach(p=>p.updates.splice(u,1)),s.history.redo.forEach(p=>p.updates.splice(u,1)),this.updateGraphics.remove(l);const h=this.updateGraphics.toArray();if(h.length===0)s.complete();else{const p=h[0].geometry;h.length!==1||!A(p)||p.type!=="point"&&p.type!=="multipoint"?s.activeComponent.graphics=h:s.toggleTool()}this.emit("update",{graphics:h,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[l],type:"selection-change"},type:"update"})},toggleTool:async()=>{var p;if(this.updateGraphics.length>1)return;const l=this.updateGraphics.getItemAt(0),u=l.geometry;if(A(u)&&(s.tool==="reshape"&&(u.type==="point"||u.type==="multipoint")||s.tool==="transform"&&u.type==="extent"))return;let h=null;s.tool==="transform"?h=await this._getReshape([l],i,n):s.tool==="reshape"&&(h=await this._getBox([l],i,n)),kn(h)||((p=s.activeComponent)==null||p.destroy(),s.activeComponent=h,s.activeComponent&&(a.forEach(f=>f.remove()),a=this._getHandlesForComponent(s,i)))}});let o=[n.on("immediate-click",l=>this._getCommonUpdateOperationClickHandlers(s,l,i),ri.WIDGET),n.on("key-down",l=>{if(this._getCommonUpdateOperationKeyDownHandlers(s,l),l.key===Tn.constraint&&!l.repeat&&s){const u=s.activeComponent;u&&u.type==="box"&&(u.preserveAspectRatio=!u.preserveAspectRatio)}},ri.WIDGET),n.on("key-up",l=>{if(l.key===Tn.constraint&&s){const u=s.activeComponent;u&&u.type==="box"&&(u.preserveAspectRatio=!u.preserveAspectRatio)}},ri.WIDGET)],a=this._getHandlesForComponent(s,i);return s}async _getGraphicMover(t,e,i){const{enableMoveAllGraphics:n}=e,r=await this._requireModule(q(()=>import("./GraphicMover-440493fe.js").then(s=>s.G),["assets/GraphicMover-440493fe.js","assets/drawUtils-b49928b5.js","assets/GraphicManipulator-a454be56.js","assets/drapedUtils-476a1deb.js"]));return kn(r)?r:new r.module.default({enableMoveAllGraphics:n,highlightsEnabled:!0,indicatorsEnabled:!1,graphics:t,view:i,callbacks:{onGraphicMoveStart:({dx:s,dy:o,graphic:a})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:s,dy:o,mover:a,type:"move-start"},type:"update"})},onGraphicMove:({dx:s,dy:o,graphic:a})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:s,dy:o,mover:a,type:"move"},type:"update"}),onGraphicMoveStop:({dx:s,dy:o,graphic:a})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:s,dy:o,mover:a,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})}async _getBox(t,e,i){const{enableRotation:n,enableScaling:r,preserveAspectRatio:s}=e,o=await this._requireModule(q(()=>import("./Box-9390bbfa.js"),["assets/Box-9390bbfa.js","assets/automaticLengthMeasurementUtils-24277b5b.js","assets/getDefaultUnitForView-7806ca44.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/drawUtils-b49928b5.js","assets/GraphicMover-440493fe.js","assets/GraphicManipulator-a454be56.js","assets/drapedUtils-476a1deb.js","assets/settings-f7d68114.js","assets/ExtentTooltipInfos-3beaa5d2.js","assets/TranslateTooltipInfos-7c5f6653.js"]));return kn(o)?o:new o.module.default({graphics:t,enableRotation:n,enableScaling:r,preserveAspectRatio:s,layer:this._internalGraphicsLayer,view:i,tooltipOptions:this.tooltipOptions,callbacks:{onMoveStart:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...a},type:"update"}),onMove:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...a},type:"update"}),onMoveStop:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...a},type:"update"}),onScaleStart:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...a},type:"update"}),onScale:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...a},type:"update"}),onScaleStop:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...a},type:"update"}),onRotateStart:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...a},type:"update"}),onRotate:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...a},type:"update"}),onRotateStop:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...a},type:"update"})}})}async _getReshape(t,e,i){var o,a;const n=((o=e.reshapeOptions)==null?void 0:o.edgeOperation)==="split",r=((a=e.reshapeOptions)==null?void 0:a.shapeOperation)==="move",s=await this._requireModule(q(()=>import("./Reshape-6570e993.js"),["assets/Reshape-6570e993.js","assets/automaticLengthMeasurementUtils-24277b5b.js","assets/getDefaultUnitForView-7806ca44.js","assets/spatialReferenceEllipsoidUtils-3814fa95.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/SnappingVisualizer2D-5966049f.js","assets/enums-55085e26.js","assets/settings-f7d68114.js","assets/SnappingContext-ecb67583.js","assets/PointSnappingHint-f32d61d8.js","assets/plane-163fe497.js","assets/sphere-3ae2d2df.js","assets/mat3f64-221ce671.js","assets/mat4f64-65d35099.js","assets/quatf64-3363c48e.js","assets/drawUtils-b49928b5.js","assets/GraphicMover-440493fe.js","assets/GraphicManipulator-a454be56.js","assets/drapedUtils-476a1deb.js","assets/TranslateTooltipInfos-7c5f6653.js","assets/automaticAreaMeasurementUtils-97f55f2e.js","assets/earcut-61f7b102.js","assets/triangle-82cfef35.js","assets/lineSegment-63c436ff.js"]));return kn(s)?s:new s.module.default({enableMidpoints:n,enableMovement:r,graphic:t[0],layer:this._internalGraphicsLayer,snappingManager:this._snappingManager,tooltipOptions:this.tooltipOptions,view:i,callbacks:{onReshapeStart:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onReshape:l=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{...l},type:"update"}),onReshapeStop:({mover:l,type:u})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:l,type:u},type:"update"}),onMoveStart:({dx:l,dy:u,mover:h,type:p})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:u,mover:h,type:p},type:"update"}),onMove:({dx:l,dy:u,mover:h,type:p})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:u,mover:h,type:p},type:"update"}),onMoveStop:({dx:l,dy:u,mover:h,type:p})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:l,dy:u,mover:h,type:p},type:"update"}),onVertexAdd:({added:l,type:u,vertices:h})=>{const p=l.map(f=>SW(f.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:p,vertices:h,type:u},type:"update"})},onVertexRemove:({removed:l,type:u,vertices:h})=>{const p=l.map(f=>SW(f.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:p,vertices:h,type:u},type:"update"})}}})}_getHandlesForComponent(t,e){const i=t.activeComponent;if(!i)return[];switch(i.type){case"graphic-mover":return[i.on("graphic-click",({graphic:n,viewEvent:r})=>{var s;(s=r.native)!=null&&s.shiftKey&&(r.stopPropagation(),t.removeFromSelection(n))}),i.on("graphic-move-start",n=>t.addToHistory(gd(n.allGraphics)))];case"box":return[i.on("graphic-click",n=>this._onTransformOrReshape2DGraphicClick(t,e,n)),i.on("move-start",n=>t.addToHistory(gd(n.graphics))),i.on("rotate-start",n=>t.addToHistory(gd(n.graphics))),i.on("scale-start",n=>t.addToHistory(gd(n.graphics)))];case"reshape":return[i.on("graphic-click",n=>this._onTransformOrReshape2DGraphicClick(t,e,n)),i.on("move-start",n=>t.addToHistory(gd([n.mover]))),i.on("reshape-start",n=>t.addToHistory(gd([n.graphic]))),i.on("vertex-add",n=>t.addToHistory(gd([n.oldGraphic]))),i.on("vertex-remove",n=>t.addToHistory(gd([n.oldGraphic])))];case"move-3d":return[i.on("graphic-move-start",n=>{t.addToHistory(gd(n.allGraphics)),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:n.allGraphics.length>0?n.allGraphics[0]:null,type:"move-start"},type:"update"})}),i.on("graphic-move",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:n.dx,dy:n.dy,mover:n.allGraphics.length>0?n.allGraphics[0]:null,type:"move"},type:"update"})}),i.on("graphic-move-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:n.allGraphics.length>0?n.allGraphics[0]:null,type:"move-stop"},type:"update"})}),i.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.graphic],t,e):t.toggleTool()})];case"transform-3d":return[i.on("record-undo",({record:n})=>{t.addToHistory({updates:[n]})}),i.on("graphic-translate-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move-start"},type:"update"})}),i.on("graphic-translate-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move-stop"},type:"update"})}),i.on("graphic-rotate-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,angle:n.angle,type:"rotate-start"},type:"update"})}),i.on("graphic-rotate-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,angle:n.angle,type:"rotate-stop"},type:"update"})}),i.on("graphic-scale-start",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale-start"},type:"update"})}),i.on("graphic-scale-stop",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale-stop"},type:"update"})}),i.on("graphic-translate",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,dx:n.dxScreen,dy:n.dyScreen,type:"move"},type:"update"})}),i.on("graphic-rotate",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,angle:n.angle,type:"rotate"},type:"update"})}),i.on("graphic-scale",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:n.graphic,xScale:n.xScale,yScale:n.yScale,type:"scale"},type:"update"})}),i.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.graphic],t,e):t.toggleTool()})];case"reshape-3d":return[i.on("reshape",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),i.on("move",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),i.on("vertex-add",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),i.on("vertex-remove",n=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:n,type:"update"})}),i.on("immediate-click",n=>{n.shiftKey?this._toggleSelection([n.graphic],t,e):t.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(t,e,i){var s;const{graphic:n,viewEvent:r}=i;return(s=r.native)!=null&&s.shiftKey&&n.layer===this.layer?(r.stopPropagation(),t.removeFromSelection(n)):e.toggleToolOnClick?(r.stopPropagation(),t.toggleTool()):void 0}_setUpdateOperationHandle(t,e){var r;this._operationHandle=t;const i=(r=this.view)==null?void 0:r.map;this._disablePopup(e);const n=()=>{if(t===this._operationHandle){const s=this.updateGraphics.toArray(),o=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),i&&i.remove(this._internalGraphicsLayer),this._restorePopup(e),this.emit("update",{graphics:s,state:"complete",aborted:t.cancelled,tool:o,toolEventInfo:null,type:"update"})}};t.on("complete",n)}async _getCommonUpdateOperationClickHandlers(t,e,i){const n=el(e),r=await e.async(()=>this._getFirstHit(n));if(U(r))return void t.complete();if(e.native.shiftKey&&this._toggleSelection([r.graphic],t,i))return void e.stopPropagation();this.updateGraphics.includes(r.graphic)?e.stopPropagation():t.complete()}_toggleSelection(t,e,i){const n=!!i.multipleSelectionEnabled;return t.some(r=>r!=null&&!(!n||r.layer!==this.layer)&&(this.updateGraphics.includes(r)?e.removeFromSelection(r):e.addToSelection(r),!0))}_getCommonUpdateOperationKeyDownHandlers(t,e){if(!t)return;const i=e.key;i===Tn.undo&&t.canUndo()?(e.stopPropagation(),t.undo()):i===Tn.redo&&t.canRedo()?(e.stopPropagation(),t.redo()):i===Tn.cancel?(e.stopPropagation(),t.cancel()):this.allowDeleteKey&&Tn.delete.includes(i)&&this._onDeleteKey(e)}_onDeleteKey(t){if(!this._operationHandle||this._operationHandle.type!=="update")return;const e=this.activeComponent,i=this.updateGraphics.toArray();U(e)||e.type==="reshape-3d"||(e.type!=="reshape"||i.length===1&&tw(i[0].geometry,"type")==="point")&&(t.stopPropagation(),this.delete())}_removeDefaultLayer(){var t,e;this._internalGraphicsLayer&&((e=(t=this.view)==null?void 0:t.map)==null||e.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=si(this._internalGraphicsLayer))}_isComponentGraphic(t){const{activeComponent:e}=this;return!(!t||U(e))&&(t.attributes&&t.attributes.esriSketchTool||e.type==="draw-2d"&&e.graphic===t||(e.type==="box"||e.type==="reshape")&&e.isUIGraphic(t))}_displayPointerCursor(){this.view&&this.view.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view&&this.view.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view&&this.view.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(t,e,i){se.getLogger(this.declaredClass).error(new N(t,e,i))}async _requireModule(t){const e=new AbortController;this._moduleLoaderAbortController=e;const i=await t;return this._moduleLoaderAbortController!==e||e.signal.aborted?{requireError:"aborted"}:{module:i}}_emitUndoEvent(t){this.emit("undo",{...t,type:"undo"})}_emitRedoEvent(t){this.emit("redo",{...t,type:"redo"})}_emitDeleteEvent(t){this.emit("delete",{...t,type:"delete"})}get test(){return{operationHandle:this._operationHandle,defaultUpdateOptions:$k}}wait(){return jo(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(t){var e,i;return((e=this.view)==null?void 0:e.type)!=="3d"||this.updateOnGraphicClick||(((i=t)==null?void 0:i.toggleToolOnClick)??!1)}_disablePopup(t){var i;if(!this._disablePopupEnabled(t))return;const e=(i=this.view)==null?void 0:i.popup;e&&U(this._originalAutoOpenEnabled)&&(this._originalAutoOpenEnabled=e.autoOpenEnabled,e.autoOpenEnabled=!1)}_restorePopup(t){var i;if(!this._disablePopupEnabled(t))return;const e=(i=this.view)==null?void 0:i.popup;e&&A(this._originalAutoOpenEnabled)&&(e.autoOpenEnabled=this._originalAutoOpenEnabled,this._originalAutoOpenEnabled=null)}async _waitViewReady(){const t=this.view;t?(Ky(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,await D8(jo(()=>t==null?void 0:t.ready),this._viewReadyAbortController.signal)):this._logMissingView()}_logMissingView(){this._logError("sketch:missing-property",Nte("view"))}_logMissingLayer(){this._logError(dat,Nte("layer"))}};c([d()],Xt.prototype,"updating",null),c([d()],Xt.prototype,"_operationHandle",void 0),c([d({readOnly:!0})],Xt.prototype,"activeTool",null),c([d()],Xt.prototype,"activeFillSymbol",void 0),c([d()],Xt.prototype,"activeLineSymbol",void 0),c([d()],Xt.prototype,"activeVertexSymbol",void 0),c([d()],Xt.prototype,"allowDeleteKey",void 0),c([d({readOnly:!0})],Xt.prototype,"createGraphic",null),c([d()],Xt.prototype,"defaultCreateOptions",null),c([d()],Xt.prototype,"defaultUpdateOptions",null),c([d({type:_ve,nonNullable:!0})],Xt.prototype,"labelOptions",void 0),c([d()],Xt.prototype,"layer",void 0),c([d({types:_o})],Xt.prototype,"pointSymbol",void 0),c([d({types:_o})],Xt.prototype,"polygonSymbol",void 0),c([d({types:_o})],Xt.prototype,"polylineSymbol",void 0),c([d({type:EH,nonNullable:!0})],Xt.prototype,"snappingOptions",null),c([d()],Xt.prototype,"_snappingManager",void 0),c([d({readOnly:!0})],Xt.prototype,"state",null),c([d({type:wve,nonNullable:!0})],Xt.prototype,"tooltipOptions",void 0),c([d({readOnly:!0})],Xt.prototype,"updateGraphics",void 0),c([d()],Xt.prototype,"updateOnGraphicClick",void 0),c([d({types:_o})],Xt.prototype,"updatePointSymbol",void 0),c([d({types:_o})],Xt.prototype,"updatePolygonSymbol",void 0),c([d({types:_o})],Xt.prototype,"updatePolylineSymbol",void 0),c([d({types:_o})],Xt.prototype,"vertexSymbol",void 0),c([d({value:null})],Xt.prototype,"view",null),Xt=c([O("esri.widgets.Sketch.SketchViewModel")],Xt);const dat="sketch:missing-property",Nte=t=>`Property '${t}' is missing on SketchViewModel.`;function hat(t){return t==="polygon"||t==="rectangle"||t==="circle"}function Ak(t,e){bbe("undo",t.history.undo,t.history.redo,e)}function Mk(t,e){bbe("redo",t.history.redo,t.history.undo,e)}function bbe(t,e,i,n){const r=e.pop();if(!r)return;const s=r.updates,o=[];n.forEach((a,l)=>{const u=s[l];u!=null&&("geometry"in u&&A(u.geometry)&&(o.push({geometry:a.geometry}),a.geometry=u.geometry),"symbol"in u&&A(u.symbol)&&(o.push({symbol:a.symbol}),a.symbol=u.symbol),"undo"in u&&(o.push(u),u[t](a)))}),i.push({updates:o})}function gd(t){return{updates:t.map(e=>({geometry:e.geometry}))}}function kn(t){return"requireError"in t&&t.requireError==="aborted"}const pat=Xt,fat=(t,e)=>{if(!window.matchMedia("(pointer:coarse)").matches){let i=!1,n;window.addEventListener("keydown",r=>{var o,a,l,u,h,p,f,g,v,b;let s;(r.key==="‰"||r.key==="Ç"||r.key==="Å"||r.key==="Ò")&&(r.preventDefault(),i||(r.key==="‰"&&(s="rectangle"),r.key==="Ç"&&(s="circle"),r.key==="Å"&&(s="polygon"),r.key==="Ò"&&(s="polyline"),i=!0,n=new pat({view:t,layer:new fve,defaultCreateOptions:{mode:"hybrid"}}),s&&(n==null||n.create(s)),n.on("create",_=>{_.state==="complete"&&(e(_.graphic.geometry),s&&(n==null||n.create(s)))}))),r.key==="π"&&((o=document.getElementById("propertySearch"))==null||o.click()),r.key==="Â"&&((a=document.getElementById("measure"))==null||a.click()),r.key==="¬"&&((l=document.getElementById("layerList"))==null||l.click()),r.key==="∏"&&((u=document.getElementById("print"))==null||u.click()),r.key==="∫"&&((h=document.getElementById("basemaps"))==null||h.click()),r.key==="©"&&((p=document.getElementById("legend"))==null||p.click()),r.key===""&&((f=document.getElementById("sketch"))==null||f.click()),r.key==="Í"&&((g=document.getElementById("propertySelect"))==null||g.click()),r.key==="ø"&&((v=document.getElementById("locationSearch"))==null||v.click()),r.key==="ı"&&((b=document.getElementById("bookmarks"))==null||b.click()),window.addEventListener("keyup",_=>{(_.key==="‰"||_.key==="Ç"||_.key==="Å"||_.key==="Ò")&&(n==null||n.cancel(),i=!1,n==null||n.destroy())})})}},mat=()=>{const[t,e]=le.useState("search"),[i,n]=le.useState(""),r=le.useRef(!1),[s,o]=le.useState(!0),[a,l]=le.useState(),[u,h]=le.useState(!1),[p,f]=le.useState(()=>["search"]),[g,v]=le.useState(()=>[]),[b,_]=le.useState(),w=le.useRef(),[S,C]=le.useState([]),[$,M]=le.useState(void 0),[P,k]=le.useState(),[D,z]=le.useState();le.useEffect(()=>{S&&(e("search"),f(he=>[...he,"search"]))},[S]),le.useEffect(()=>{r.current||(window.addEventListener("resize",()=>{window.innerWidth<700?(e(""),h(!0)):h(!1)}),window.innerWidth<700&&(e(""),h(!0)),r.current=!0,(async et=>{const pr=await(await fetch(et)).json();l(pr.alert)})("./config.json"))},[]);const B=le.useCallback(he=>{w.current=he,fat(he,M),Prt(he,_,o,l)},[]),j=le.useCallback(he=>{M(he)},[]),K=le.useCallback(he=>{he&&(Drt(he,n),Db("",i,n,e,ie,te))},[]),ie=le.useCallback(he=>{z(void 0),e(he),p.includes(he)||f([...p,he])},[p]),te=le.useCallback(he=>{z(void 0),n(he),g.includes(he)||v([...g,he])},[g]),me=le.useCallback(he=>{e("")},[]),Ie=le.useCallback(he=>{n("")},[]),Me=le.useCallback((he,et)=>{k(he),C(Frt(he,et))},[]);return{activePanel:t,activeTool:i,contentBehind:u,view:b,activePanelChanged:ie,activeToolChanged:te,geometry:$,propertySelected:Me,loadedPanels:p,panelDismissed:me,loadedTools:g,toolDismissed:Ie,loading:s,alertSet:he=>{l(he)},selectedProperty:P,mapCallback:B,geometryCallback:j,properties:S,widgetCallback:K,alert:a,tipsCallback:he=>{z(et=>{if((et==null?void 0:et.title)!==(he==null?void 0:he.title))return{...D,title:he.title,tips:he.tips}})},tips:D}};function gat(t){var r;const e=le.useRef(null),[i,n]=le.useState();return le.useEffect(()=>{n(t.tips),setTimeout(()=>{var s,o;if(e.current&&(console.log((s=t.tips)==null?void 0:s.title),e.current.shadowRoot)){const a=e.current.shadowRoot.querySelector(".heading");a&&(a.innerHTML=(o=t.tips)==null?void 0:o.title)}},100)},[t.tips]),re(wIe,{ref:e,closed:i===void 0?!0:void 0,children:re(_Ie,{children:(r=t.tips)==null?void 0:r.tips.map(s=>re(bIe,{heading:s.title,children:s.text},s.title))})})}function yat(t){var n;const[e,i]=le.useState();return le.useEffect(()=>{i(t.alert)},[t.alert]),qe(dIe,{open:e==null?void 0:e.show,onCalciteAlertClose:()=>{e&&(e.show=!1)},kind:e==null?void 0:e.kind,autoClose:e!=null&&e.autoClose?!0:void 0,autoCloseDuration:e==null?void 0:e.duration,label:"",children:[re("div",{slot:"title",children:e==null?void 0:e.title}),re("div",{slot:"message",children:e==null?void 0:e.message}),((n=e==null?void 0:e.link)==null?void 0:n.show)&&re("a",{slot:"link",href:e==null?void 0:e.link.url,children:e==null?void 0:e.link.text})]})}const vat=gl.memo(yat),bat=le.lazy(()=>q(()=>import("./Location-614bdc6a.js"),["assets/Location-614bdc6a.js","assets/Location-d7203703.css"])),_at=le.lazy(()=>q(()=>import("./Layers-0a241cb2.js"),["assets/Layers-0a241cb2.js","assets/sortable.esm-be94e56d.js","assets/Layers-9642d87b.css"])),wat=le.lazy(()=>q(()=>import("./Legend-5be826d1.js"),["assets/Legend-5be826d1.js","assets/Legend-7f0de163.js","assets/EffectView-529d0ac5.js","assets/ExportImageParameters-1aee1bfb.js","assets/floorFilterUtils-080a7cd2.js","assets/sublayerUtils-01d185f7.js","assets/pixelRangeUtils-03719dd8.js","assets/rendererConversion-8f553846.js"])),xat=le.lazy(()=>q(()=>import("./Basemaps-de320a46.js"),["assets/Basemaps-de320a46.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/Util-778b7564.js","assets/interfaces-736d93d7.js","assets/VectorTileLayer-af66d225.js","assets/ArcGISCachedService-985db020.js","assets/TilemapCache-e9fc1d5f.js","assets/jsonContext-c42fadc4.js","assets/StyleRepository-3b0d9deb.js","assets/StyleDefinition-fbc907c2.js","assets/enums-55085e26.js","assets/enums-fb086c25.js","assets/enums-64ab819c.js","assets/VertexElementDescriptor-2925c6af.js","assets/GeometryUtils-53652037.js","assets/definitions-19bfb61c.js","assets/Basemaps-b7156fed.css"])),Sat=le.lazy(()=>q(()=>import("./Select-2778b071.js"),["assets/Select-2778b071.js","assets/geometryEngine-d3b24b56.js","assets/geometryEngineBase-e1a33b0a.js","assets/hydrated-e67bc681.js","assets/Select-5da0cdaf.css"])),Eat=le.lazy(()=>q(()=>import("./Measure-c1bb6472.js").then(t=>t.M),["assets/Measure-c1bb6472.js","assets/getDefaultUnitForView-7806ca44.js","assets/Measure-5c0f5fa9.css"])),Cat=le.lazy(()=>q(()=>import("./Sketch-1c6a8bfc.js"),["assets/Sketch-1c6a8bfc.js","assets/MapNotesLayer-3b2f5f8c.js","assets/objectIdUtils-789e911a.js","assets/Sketch-7456582b.css"])),Iat=le.lazy(()=>q(()=>import("./Bookmarks-9d585458.js"),["assets/Bookmarks-9d585458.js","assets/sortable.esm-be94e56d.js","assets/Bookmarks-e18c4004.css"])),Tat=le.lazy(()=>q(()=>import("./Print-4a0a61c1.js"),["assets/Print-4a0a61c1.js","assets/floorFilterUtils-080a7cd2.js","assets/GPMessage-992ebbbd.js","assets/Print-a50a74a0.css"]));function kat(){const{activePanel:t,activeTool:e,contentBehind:i,view:n,activePanelChanged:r,activeToolChanged:s,geometry:o,propertySelected:a,loadedPanels:l,panelDismissed:u,loadedTools:h,toolDismissed:p,loading:f,alertSet:g,selectedProperty:v,mapCallback:b,geometryCallback:_,properties:w,widgetCallback:S,alert:C,tipsCallback:$,tips:M}=mat();return qe("div",{children:[qe(mIe,{contentBehind:i?!0:void 0,children:[re(QZe,{}),re(Uq,{slot:"panel-start",position:"start",hidden:!0}),qe(Uq,{className:"custom-width",slot:"panel-end",position:"end",resizable:!0,collapsed:t==="",children:[n&&re(zrt,{view:n,activePanelChanged:r,activeToolChanged:s,activePanel:t,activeTool:e,expandable:i?!0:void 0}),n&&l.includes("search")&&re(Mrt,{view:n,geometry:o,selected:a,isActive:t==="search",panelDismissed:u,showTips:$}),n&&l.includes("location")&&re(le.Suspense,{fallback:null,children:re(bat,{view:n,panelDismissed:u,isActive:t==="location",showTips:$})}),n&&l.includes("layers")&&re(le.Suspense,{fallback:null,children:re(_at,{view:n,panelDismissed:u,isActive:t==="layers",showTips:$})}),n&&l.includes("legend")&&re(le.Suspense,{fallback:null,children:re(wat,{view:n,panelDismissed:u,isActive:t==="legend",showTips:$})}),n&&l.includes("basemaps")&&re(le.Suspense,{fallback:null,children:re(xat,{view:n,panelDismissed:u,isActive:t==="basemaps",showTips:$,alertSet:g})})]}),qe("div",{className:"tools esri-component",children:[n&&h.includes("select")&&re(le.Suspense,{fallback:null,children:re(Sat,{view:n,selectedProperty:v,geometrySet:_,toolDismissed:p,isActive:e==="select",showTips:$})}),n&&h.includes("measure")&&re(le.Suspense,{fallback:null,children:re(Eat,{view:n,toolDismissed:p,isActive:e==="measure",showTips:$})}),n&&h.includes("sketch")&&re(le.Suspense,{fallback:null,children:re(Cat,{view:n,toolDismissed:p,isActive:e==="sketch",showTips:$})}),n&&h.includes("bookmarks")&&re(le.Suspense,{fallback:null,children:re(Iat,{view:n,toolDismissed:p,isActive:e==="bookmarks",showTips:$})}),n&&h.includes("print")&&re(le.Suspense,{fallback:null,children:re(Tat,{view:n,exportUrl:"https://maps.raleighnc.gov/print/rest/services/Geoprocessing/ExportWebMapPro/GPServer/Export%20Web%20Map",selectedProperty:v,toolDismissed:p,isActive:e==="print",showTips:$})})]}),re(KZe,{mapId:"95092428774c4b1fb6a3b6f5fed9fbc4",mapViewSet:b,geometrySet:_,properties:w,widgetActivated:S}),re(gse,{loading:!0,hidden:f?void 0:!0})]}),re(gat,{tips:M}),re(vat,{alert:C})]})}function $at(){return re("div",{className:"App",children:re(kat,{})})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function Aat(){}function lr(t,e=!1){if(t.disabled){t.el.setAttribute("tabindex","-1"),t.el.setAttribute("aria-disabled","true"),t.el.contains(document.activeElement)&&document.activeElement.blur(),t.el.click=Aat;return}t.el.click=HTMLElement.prototype.click,typeof e=="function"?t.el.setAttribute("tabindex",e.call(t)?"0":"-1"):e===!0?t.el.setAttribute("tabindex","0"):e===!1&&t.el.removeAttribute("tabindex"),t.el.removeAttribute("aria-disabled")}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const _be=new WeakMap,wbe=new WeakMap;function Ui(t){wbe.set(t,new Promise(e=>_be.set(t,e)))}function Bi(t){_be.get(t)()}function Hi(t){return wbe.get(t)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function Yu(t){return t==="Enter"||t===" "}const Wy=["0","1","2","3","4","5","6","7","8","9"];/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function Pi(t,e,i){const n=Mat(t);return new n(e,i)}function Mat(t){class e extends window.MutationObserver{constructor(n){super(n),this.observedEntry=[],this.callback=n}observe(n,r){return this.observedEntry.push({target:n,options:r}),super.observe(n,r)}unobserve(n){const r=this.observedEntry.filter(s=>s.target!==n);this.observedEntry=[],this.callback(super.takeRecords(),this),this.disconnect(),r.forEach(s=>this.observe(s.target,s.options))}}return function(){return t==="intersection"?window.IntersectionObserver:t==="mutation"?e:window.ResizeObserver}()}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Oat=new RegExp("-","g"),Pat=new RegExp("\\.?0+$");class jt{constructor(e){if(this.add=r=>jt.fromBigInt(this.value+new jt(r).value),this.subtract=r=>jt.fromBigInt(this.value-new jt(r).value),this.multiply=r=>jt._divRound(this.value*new jt(r).value,jt.SHIFT),this.divide=r=>jt._divRound(this.value*jt.SHIFT,new jt(r).value),e instanceof jt)return e;const[i,n]=String(e).split(".").concat("");this.value=BigInt(i+n.padEnd(jt.DECIMALS,"0").slice(0,jt.DECIMALS))+BigInt(jt.ROUNDED&&n[jt.DECIMALS]>="5"),this.isNegative=e.charAt(0)==="-"}getIntegersAndDecimals(){const e=this.value.toString().replace(Oat,"").padStart(jt.DECIMALS+1,"0"),i=e.slice(0,-jt.DECIMALS),n=e.slice(-jt.DECIMALS).replace(Pat,"");return{integers:i,decimals:n}}toString(){const{integers:e,decimals:i}=this.getIntegersAndDecimals();return`${this.isNegative?"-":""}${e}${i.length?"."+i:""}`}formatToParts(e){const{integers:i,decimals:n}=this.getIntegersAndDecimals(),r=e.numberFormatter.formatToParts(BigInt(i));return this.isNegative&&r.unshift({type:"minusSign",value:e.minusSign}),n.length&&(r.push({type:"decimal",value:e.decimal}),n.split("").forEach(s=>r.push({type:"fraction",value:s}))),r}format(e){const{integers:i,decimals:n}=this.getIntegersAndDecimals(),r=`${this.isNegative?e.minusSign:""}${e.numberFormatter.format(BigInt(i))}`,s=n.length?`${e.decimal}${n.split("").map(o=>e.numberFormatter.format(Number(o))).join("")}`:"";return`${r}${s}`}}jt.DECIMALS=100;jt.ROUNDED=!0;jt.SHIFT=BigInt("1"+"0".repeat(jt.DECIMALS));jt._divRound=(t,e)=>jt.fromBigInt(t/e+(jt.ROUNDED?t*BigInt(2)/e%BigInt(2):BigInt(0)));jt.fromBigInt=t=>Object.assign(Object.create(jt.prototype),{value:t});function Iu(t){return!(!t||isNaN(Number(t)))}function Rat(t){return!t||!jat(t)?"":eP(t,e=>{let i=!1;const n=e.split("").filter((r,s)=>r.match(/\./g)&&!i?(i=!0,!0):r.match(/\-/g)&&s===0?!0:Wy.includes(r)).reduce((r,s)=>r+s);return Iu(n)?new jt(n).toString():""})}const Lat=/^([-0])0+(?=\d)/,Dat=/(?!^\.)\.$/,Fat=/(?!^-)-/g,Nat=/^-\b0\b\.?0*$/,zat=t=>eP(t,e=>{const i=e.replace(Fat,"").replace(Dat,"").replace(Lat,"$1");return Iu(i)?Nat.test(i)?i:new jt(i).toString():e});function eP(t,e){if(!t)return t;const i=t.toLowerCase().indexOf("e")+1;return i?t.replace(/[eE]*$/g,"").substring(0,i).concat(t.slice(i).replace(/[eE]/g,"")).split(/[eE]/).map((n,r)=>e(r===1?n.replace(/\./g,""):n)).join("e").replace(/^e/,"1e"):e(t)}function jat(t){return Wy.some(e=>t.includes(e))}const pm="en",Vat=["ar","bg","bs","ca","cs","da","de","el",pm,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],Uat=["ar","bg","bs","ca","cs","da","de","de-CH","el",pm,"en-AU","en-CA","en-GB","es","es-MX","et","fi","fr","fr-CH","he","hi","hr","hu","id","it","it-CH","ja","ko","lt","lv","mk","no","nl","pl","pt","pt-PT","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-CN","zh-HK","zh-TW"],Bat=["arab","arabext","bali","beng","deva","fullwide","gujr","guru","hanidec","khmr","knda","laoo","latn","limb","mlym","mong","mymr","orya","tamldec","telu","thai","tibt"],xbe=t=>Bat.includes(t),g5=new Intl.NumberFormat().resolvedOptions().numberingSystem,IH=g5==="arab"||!xbe(g5)?"latn":g5,Hat=t=>xbe(t)?t:IH;function TH(t,e="cldr"){const i=e==="cldr"?Uat:Vat;return t?i.includes(t)?t:(t=t.toLowerCase(),t==="nb"?"no":e==="t9n"&&t==="pt"?"pt-BR":(t.includes("-")&&(t=t.replace(/(\w+)-(\w+)/,(n,r,s)=>`${r}-${s.toUpperCase()}`),i.includes(t)||(t=t.split("-")[0])),t==="zh"?"zh-CN":i.includes(t)?t:(console.warn(`Translations for the "${t}" locale are not available and will fall back to the default, English (en).`),pm))):pm}const hI=new Set;function hn(t){Gat(t),hI.size===0&&(PA==null||PA.observe(document.documentElement,{attributes:!0,attributeFilter:["lang"],subtree:!0})),hI.add(t)}function Gat(t){t.effectiveLocale=qat(t)}function pn(t){hI.delete(t),hI.size===0&&PA.disconnect()}const PA=Pi("mutation",t=>{t.forEach(e=>{const i=e.target;hI.forEach(n=>{if(!QDe(i,n.el))return;const s=Qu(n.el,"[lang]");if(!s){n.effectiveLocale=pm;return}const o=s.lang;n.effectiveLocale=s.hasAttribute("lang")&&o===""?pm:o})})});function qat(t){var e;return t.el.lang||((e=Qu(t.el,"[lang]"))==null?void 0:e.lang)||document.documentElement.lang||pm}class Wat{constructor(){this.delocalize=e=>this._numberFormatOptions?eP(e,i=>i.trim().replace(new RegExp(`[${this._minusSign}]`,"g"),"-").replace(new RegExp(`[${this._group}]`,"g"),"").replace(new RegExp(`[${this._decimal}]`,"g"),".").replace(new RegExp(`[${this._digits.join("")}]`,"g"),this._getDigitIndex)):e,this.localize=e=>this._numberFormatOptions?eP(e,i=>Iu(i.trim())?new jt(i.trim()).format(this).replace(new RegExp(`[${this._actualGroup}]`,"g"),this._group):i):e}get group(){return this._group}get decimal(){return this._decimal}get minusSign(){return this._minusSign}get digits(){return this._digits}get numberFormatter(){return this._numberFormatter}get numberFormatOptions(){return this._numberFormatOptions}set numberFormatOptions(e){if(e.locale=TH(e==null?void 0:e.locale),e.numberingSystem=Hat(e==null?void 0:e.numberingSystem),!this._numberFormatOptions&&e.locale===pm&&e.numberingSystem===IH&&Object.keys(e).length===2||JSON.stringify(this._numberFormatOptions)===JSON.stringify(e))return;this._numberFormatOptions=e,this._numberFormatter=new Intl.NumberFormat(this._numberFormatOptions.locale,this._numberFormatOptions),this._digits=[...new Intl.NumberFormat(this._numberFormatOptions.locale,{useGrouping:!1,numberingSystem:this._numberFormatOptions.numberingSystem}).format(9876543210)].reverse();const i=new Map(this._digits.map((r,s)=>[r,s])),n=new Intl.NumberFormat(this._numberFormatOptions.locale).formatToParts(-123456789e-1);this._actualGroup=n.find(r=>r.type==="group").value,this._group=this._actualGroup.trim().length===0?" ":this._actualGroup,this._decimal=n.find(r=>r.type==="decimal").value,this._minusSign=n.find(r=>r.type==="minusSign").value,this._getDigitIndex=r=>i.get(r)}}const Lt=new Wat;/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Ok={};async function Jat(t,e){const i=`${e}_${t}`;return Ok[i]||(Ok[i]=fetch(K9(`./assets/${e}/t9n/messages_${t}.json`)).then(n=>(n.ok||zte(),n.json())).catch(()=>zte())),Ok[i]}function zte(){throw new Error("could not fetch component message bundle")}function kH(t){t.messages={...t.defaultMessages,...t.messageOverrides}}async function cr(t){t.defaultMessages=await Sbe(t,t.effectiveLocale),kH(t)}async function Sbe(t,e){const{el:i}=t,r=i.tagName.toLowerCase().replace("calcite-","");return Jat(TH(e,"t9n"),r)}async function ur(t,e){t.defaultMessages=await Sbe(t,e),kH(t)}function dr(t){t.onMessagesChange=Yat}function hr(t){t.onMessagesChange=void 0}function Yat(){kH(this)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Zat={icon:"icon",flipRtl:"flip-rtl"},y5={},v5={},Ebe={s:16,m:24,l:32};async function Kat({icon:t,scale:e}){const i=Ebe[e],n=Xat(t),r=n.charAt(n.length-1)==="F",o=`${r?n.substring(0,n.length-1):n}${i}${r?"F":""}`;if(y5[o])return y5[o];v5[o]||(v5[o]=fetch(K9(`./assets/icon/${o}.json`)).then(l=>l.json()).catch(()=>(console.error(`"${o}" is not a valid calcite-ui-icon name`),"")));const a=await v5[o];return y5[o]=a,a}function Xat(t){const e=!isNaN(Number(t.charAt(0))),i=t.split("-");if(i.length>0){const r=/[a-z]/i;t=i.map((s,o)=>s.replace(r,function(l,u){return o===0&&u===0?l:l.toUpperCase()})).join("")}return e?`i${t}`:t}const Qat="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:inline-flex;color:var(--calcite-ui-icon-color)}:host([scale=s]){block-size:1rem;inline-size:1rem;min-inline-size:1rem;min-block-size:1rem}:host([scale=m]){block-size:1.5rem;inline-size:1.5rem;min-inline-size:1.5rem;min-block-size:1.5rem}:host([scale=l]){block-size:2rem;inline-size:2rem;min-inline-size:2rem;min-block-size:2rem}.flip-rtl{transform:scaleX(-1)}.svg{display:block}",elt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.icon=null,this.flipRtl=!1,this.scale="m",this.textLabel=void 0,this.pathData=void 0,this.visible=!1}connectedCallback(){this.waitUntilVisible(()=>{this.visible=!0,this.loadIconPathData()})}disconnectedCallback(){var t;(t=this.intersectionObserver)==null||t.disconnect(),this.intersectionObserver=null}async componentWillLoad(){this.loadIconPathData()}render(){const{el:t,flipRtl:e,pathData:i,scale:n,textLabel:r}=this,s=Kr(t),o=Ebe[n],a=!!r,l=[].concat(i||"");return I(Ft,{"aria-hidden":Vi(!a),"aria-label":a?r:null,role:a?"img":null},I("svg",{"aria-hidden":"true",class:{[Zat.flipRtl]:s==="rtl"&&e,svg:!0},fill:"currentColor",height:"100%",viewBox:`0 0 ${o} ${o}`,width:"100%",xmlns:"http://www.w3.org/2000/svg"},l.map(u=>typeof u=="string"?I("path",{d:u}):I("path",{d:u.d,opacity:"opacity"in u?u.opacity:1}))))}async loadIconPathData(){const{icon:t,scale:e,visible:i}=this;!t||!i||(this.pathData=await Kat({icon:t,scale:e}))}waitUntilVisible(t){if(this.intersectionObserver=Pi("intersection",e=>{e.forEach(i=>{i.isIntersecting&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null,t())})},{rootMargin:"50px"}),!this.intersectionObserver){t();return}this.intersectionObserver.observe(this.el)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{icon:["loadIconPathData"],scale:["loadIconPathData"]}}static get style(){return Qat}},[1,"calcite-icon",{icon:[513],flipRtl:[516,"flip-rtl"],scale:[513],textLabel:[1,"text-label"],pathData:[32],visible:[32]}]);function ni(){if(typeof customElements>"u")return;["calcite-icon"].forEach(e=>{switch(e){case"calcite-icon":customElements.get(e)||customElements.define(e,elt);break}})}ni();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const tlt='@charset "UTF-8";@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:relative;margin-inline:auto;display:none;align-items:center;justify-content:center;opacity:1;min-block-size:var(--calcite-loader-size);font-size:var(--calcite-loader-font-size);stroke:var(--calcite-ui-brand);stroke-width:3;fill:none;transform:scale(1, 1);animation:loader-color-shift calc(var(--calcite-internal-animation-timing-slow) * 2) alternate-reverse infinite linear;padding-block:var(--calcite-loader-padding, 4rem)}:host([scale=s]){--calcite-loader-font-size:var(--calcite-font-size--2);--calcite-loader-size:2rem;--calcite-loader-size-inline:0.75rem}:host([scale=m]){--calcite-loader-font-size:var(--calcite-font-size-0);--calcite-loader-size:4rem;--calcite-loader-size-inline:1rem}:host([scale=l]){--calcite-loader-font-size:var(--calcite-font-size-2);--calcite-loader-size:6rem;--calcite-loader-size-inline:1.5rem}:host([no-padding]){padding-block:0px}:host{display:flex}.loader__text{display:block;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;color:var(--calcite-ui-text-1);margin-block-start:calc(var(--calcite-loader-size) + 1.5rem)}.loader__percentage{position:absolute;display:block;text-align:center;color:var(--calcite-ui-text-1);font-size:var(--calcite-loader-font-size);inline-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);line-height:0.25;transform:scale(1, 1)}.loader__svgs{position:absolute;overflow:visible;opacity:1;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);inset-inline-start:50%;margin-inline-start:calc(var(--calcite-loader-size) / 2 * -1);transform:scale(1, 1)}.loader__svg{position:absolute;inset-block-start:0px;transform-origin:center;overflow:visible;inset-inline-start:0;inline-size:var(--calcite-loader-size);block-size:var(--calcite-loader-size);animation-iteration-count:infinite;animation-timing-function:linear;animation-name:loader-clockwise}@supports (display: grid){.loader__svg--1{animation-name:loader-offset-1}.loader__svg--2{animation-name:loader-offset-2}.loader__svg--3{animation-name:loader-offset-3}}:host([type=determinate]){animation:none;stroke:var(--calcite-ui-border-3)}:host([type=determinate]) .loader__svg--3{animation:none;stroke:var(--calcite-ui-brand);stroke-dasharray:150.79632;transform:rotate(-90deg);transition:all var(--calcite-internal-animation-timing-fast) linear}:host([inline]){position:relative;margin:0px;animation:none;stroke:currentColor;stroke-width:2;padding-block:0px;block-size:var(--calcite-loader-size-inline);min-block-size:var(--calcite-loader-size-inline);inline-size:var(--calcite-loader-size-inline);margin-inline-end:calc(var(--calcite-loader-size-inline) * 0.5);vertical-align:calc(var(--calcite-loader-size-inline) * -1 * 0.2)}:host([inline]) .loader__svgs{inset-block-start:0px;margin:0px;inset-inline-start:0;inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([inline]) .loader__svg{inline-size:var(--calcite-loader-size-inline);block-size:var(--calcite-loader-size-inline)}:host([complete]){opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity var(--calcite-internal-animation-timing-medium) linear 1000ms, transform var(--calcite-internal-animation-timing-medium) linear 1000ms}:host([complete]) .loader__svgs{opacity:0;transform:scale(0.75, 0.75);transform-origin:center;transition:opacity calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms, transform calc(180ms * var(--calcite-internal-duration-factor)) linear 800ms}:host([complete]) .loader__percentage{color:var(--calcite-ui-brand);transform:scale(1.05, 1.05);transform-origin:center;transition:color var(--calcite-internal-animation-timing-medium) linear, transform var(--calcite-internal-animation-timing-medium) linear}.loader__svg--1{stroke-dasharray:27.9252444444% 139.6262222222%;animation-duration:calc(var(--calcite-internal-animation-timing-slow) * 2.4)}@keyframes loader-offset-1{0%{stroke-dasharray:27.9252444444% 251.3272%;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222% 139.6262222222%;stroke-dashoffset:-83.7757333333%}100%{stroke-dasharray:27.9252444444% 251.3272%;stroke-dashoffset:-279.2524444444%}}.loader__svg--2{stroke-dasharray:55.8504888889% 139.6262222222%;animation-duration:calc(var(--calcite-internal-animation-timing-slow) * 3.2)}@keyframes loader-offset-2{0%{stroke-dasharray:55.8504888889% 223.4019555556%;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222% 139.6262222222%;stroke-dashoffset:-97.7383555556%}100%{stroke-dasharray:55.8504888889% 223.4019555556%;stroke-dashoffset:-279.2524444444%}}.loader__svg--3{stroke-dasharray:13.9626222222% 139.6262222222%;animation-duration:calc(var(--calcite-internal-animation-timing-slow) * 3.867)}@keyframes loader-offset-3{0%{stroke-dasharray:13.9626222222% 265.2898222222%;stroke-dashoffset:0}50%{stroke-dasharray:139.6262222222% 139.6262222222%;stroke-dashoffset:-76.7944222222%}100%{stroke-dasharray:13.9626222222% 265.2898222222%;stroke-dashoffset:-279.2524444444%}}@keyframes loader-color-shift{0%{stroke:var(--calcite-ui-brand)}33%{stroke:var(--calcite-ui-brand-press)}66%{stroke:var(--calcite-ui-brand-hover)}100%{stroke:var(--calcite-ui-brand)}}@keyframes loader-clockwise{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}',ilt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inline=!1,this.label=void 0,this.scale="m",this.type=void 0,this.value=0,this.text=""}render(){const{el:t,inline:e,label:i,scale:n,text:r,type:s,value:o}=this,a=t.id||Ts(),l=.45,u=e?this.getInlineSize(n):this.getSize(n),h=u*l,p=`0 0 ${u} ${u}`,f=s==="determinate",g=2*h*Math.PI,v=o/100*g,b=g-v,_=Math.floor(o),w={"aria-valuenow":_,"aria-valuemin":0,"aria-valuemax":100,complete:_===100},S={r:h,cx:u/2,cy:u/2},C={"stroke-dasharray":`${v} ${b}`};return I(Ft,{"aria-label":i,id:a,role:"progressbar",...f?w:{}},I("div",{class:"loader__svgs"},I("svg",{"aria-hidden":"true",class:"loader__svg loader__svg--1",viewBox:p},I("circle",{...S})),I("svg",{"aria-hidden":"true",class:"loader__svg loader__svg--2",viewBox:p},I("circle",{...S})),I("svg",{"aria-hidden":"true",class:"loader__svg loader__svg--3",viewBox:p,...f?{style:C}:{}},I("circle",{...S}))),r&&I("div",{class:"loader__text"},r),f&&I("div",{class:"loader__percentage"},o))}getSize(t){return{s:32,m:56,l:80}[t]}getInlineSize(t){return{s:12,m:16,l:20}[t]}get el(){return this}static get style(){return tlt}},[1,"calcite-loader",{inline:[516],label:[1],scale:[513],type:[513],value:[2],text:[1]}]);function Bo(){if(typeof customElements>"u")return;["calcite-loader"].forEach(e=>{switch(e){case"calcite-loader":customElements.get(e)||customElements.define(e,ilt);break}})}Bo();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const yd={button:"button",buttonTextVisible:"button--text-visible",buttonCompact:"button--compact",indicatorText:"indicator-text",iconContainer:"icon-container",slotContainer:"slot-container",slotContainerHidden:"slot-container--hidden",textContainer:"text-container",textContainerVisible:"text-container--visible"},nlt={tooltip:"tooltip"},rlt='@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:flex;background-color:transparent;--calcite-action-indicator-color:var(--calcite-ui-brand)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.button{position:relative;margin:0px;display:flex;inline-size:auto;cursor:pointer;align-items:center;justify-content:flex-start;border-style:none;background-color:var(--calcite-ui-foreground-1);fill:var(--calcite-ui-text-3);font-family:var(--calcite-sans-family);font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-3);outline-color:transparent;text-align:unset;flex:1 0 auto}.button:hover{background-color:var(--calcite-ui-foreground-2);fill:var(--calcite-ui-text-1);color:var(--calcite-ui-text-1)}.button:focus{background-color:var(--calcite-ui-foreground-2);fill:var(--calcite-ui-text-1);color:var(--calcite-ui-text-1);outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.button:active{background-color:var(--calcite-ui-foreground-3)}.button .icon-container{pointer-events:none;margin:0px;display:flex;align-items:center;justify-content:center;min-inline-size:1rem;min-block-size:1rem}.button .text-container{margin:0px;inline-size:0px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5rem;opacity:0;transition-property:opacity;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-property:margin;transition-property:inline-size}.button .text-container--visible{inline-size:auto;flex:1 1 auto;opacity:1}:host([scale=s]) .button{padding-inline:0.5rem;padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=s]) .button--text-visible .icon-container{margin-inline-end:0.5rem}:host([scale=m]) .button{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=m]) .button--text-visible .icon-container{margin-inline-end:0.75rem}:host([scale=l]) .button{padding:1.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-normal)}:host([scale=l]) .button--text-visible .icon-container{margin-inline-end:1rem}:host([alignment=center]) .button{justify-content:center}:host([alignment=end]) .button{justify-content:flex-end}:host([alignment=center]) .button .text-container--visible,:host([alignment=end]) .button .text-container--visible{flex:0 1 auto}:host([scale=s][compact]) .button,:host([scale=m][compact]) .button,:host([scale=l][compact]) .button{padding-inline:0px}.slot-container{display:flex}.slot-container--hidden{display:none}.button--text-visible{inline-size:100%}:host([active]) .button,:host([active]) .button:hover,:host([active]) .button:focus,:host([active][loading]) .button{background-color:var(--calcite-ui-foreground-3);fill:var(--calcite-ui-text-1);color:var(--calcite-ui-text-1)}:host([active]) .button:active{background-color:var(--calcite-ui-foreground-1)}:host([appearance=transparent]) .button{background-color:transparent;transition-property:box-shadow;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host([appearance=transparent]) .button:hover,:host([appearance=transparent]) .button:focus{background-color:transparent;box-shadow:0 0 0 2px var(--calcite-ui-border-1) inset}:host([active][appearance=transparent]) .button,:host([active][appearance=transparent]) .button:hover,:host([active][appearance=transparent]) .button:focus{background-color:var(--calcite-ui-foreground-3);fill:var(--calcite-ui-text-1);color:var(--calcite-ui-text-1)}:host([appearance=transparent][loading]) .button,:host([appearance=transparent][disabled]) .button{background-color:transparent}:host([loading]) .button,:host([loading]) .button:hover,:host([loading]) .button:focus{background-color:var(--calcite-ui-foreground-1)}:host([loading]) .button .text-container,:host([loading]) .button:hover .text-container,:host([loading]) .button:focus .text-container{opacity:var(--calcite-ui-opacity-disabled)}:host([loading]) calcite-loader[inline]{color:var(--calcite-ui-text-3);margin-inline-end:0px}:host([disabled]) .button,:host([disabled]) .button:hover,:host([disabled]) .button:focus{cursor:default;background-color:var(--calcite-ui-foreground-1);opacity:var(--calcite-ui-opacity-disabled)}:host([disabled][active]) .button,:host([disabled][active]) .button:hover,:host([disabled][active]) .button:focus{background-color:var(--calcite-ui-foreground-3);opacity:var(--calcite-ui-opacity-disabled)}:host([indicator]) .button::after{content:"";position:absolute;block-size:0.5rem;inline-size:0.5rem;border-radius:9999px;border-width:2px;background-color:var(--calcite-action-indicator-color);border-color:var(--calcite-ui-foreground-1);inset-block-end:0.75rem;inset-inline-end:0.75rem}:host([indicator]) .button--text-visible::after{inset-block-end:auto}:host([indicator]) .button--text-visible .text-container--visible{margin-inline-end:1rem}:host([indicator]) .button:hover::after,:host([indicator]) .button:focus::after{border-color:var(--calcite-ui-foreground-1)}:host([indicator][scale=s]) .button::after{inset-block-end:0.25rem;inset-inline-end:0.25rem}:host([indicator][scale=s]) .button--text-visible::after{inset-block-end:auto;inset-inline-end:0.5rem}:host([indicator][active]) .button::after{border-color:var(--calcite-ui-foreground-3)}.indicator-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}',slt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=Pi("mutation",()=>t1(this)),this.guid=`calcite-action-${Ts()}`,this.indicatorId=`${this.guid}-indicator`,this.buttonId=`${this.guid}-button`,this.handleTooltipSlotChange=t=>{const i=t.target.assignedElements({flatten:!0}).filter(n=>n==null?void 0:n.matches("calcite-tooltip"))[0];i&&(i.referenceElement=this.buttonEl)},this.active=!1,this.alignment=void 0,this.appearance="solid",this.compact=!1,this.disabled=!1,this.icon=void 0,this.iconFlipRtl=!1,this.indicator=!1,this.label=void 0,this.loading=!1,this.scale="m",this.text=void 0,this.textEnabled=!1,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0}onMessagesChange(){}effectiveLocaleChange(){ur(this,this.effectiveLocale)}connectedCallback(){var t;hn(this),dr(this),(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0})}async componentWillLoad(){Ui(this),await cr(this)}componentDidLoad(){Bi(this)}disconnectedCallback(){var t;pn(this),hr(this),(t=this.mutationObserver)==null||t.disconnect()}componentDidRender(){lr(this)}async setFocus(){var t;await Hi(this),(t=this.buttonEl)==null||t.focus()}renderTextContainer(){const{text:t,textEnabled:e}=this,i={[yd.textContainer]:!0,[yd.textContainerVisible]:e};return t?I("div",{class:i,key:"text-container"},t):null}renderIndicatorText(){const{indicator:t,messages:e,indicatorId:i,buttonId:n}=this;return I("div",{"aria-labelledby":n,"aria-live":"polite",class:yd.indicatorText,id:i,role:"region"},t?e.indicator:null)}renderIconContainer(){var f;const{loading:t,icon:e,scale:i,el:n,iconFlipRtl:r}=this,s=i==="l"?"m":"s",o=i==="l"?"l":"m",a=t?I("calcite-loader",{inline:!0,label:this.messages.loading,scale:o}):null,l=e?I("calcite-icon",{flipRtl:r,icon:e,scale:s}):null,u=a||l,h=u||((f=n.children)==null?void 0:f.length),p=I("div",{class:{[yd.slotContainer]:!0,[yd.slotContainerHidden]:t}},I("slot",null));return h?I("div",{"aria-hidden":"true",class:yd.iconContainer,key:"icon-container"},u,p):null}render(){const{active:t,compact:e,disabled:i,loading:n,textEnabled:r,label:s,text:o,indicator:a,indicatorId:l,buttonId:u,messages:h}=this,p=`${s||o}${a?` (${h.indicator})`:""}`,f={[yd.button]:!0,[yd.buttonTextVisible]:r,[yd.buttonCompact]:e};return I(Ft,null,I("button",{"aria-busy":Vi(n),"aria-controls":a?l:null,"aria-disabled":Vi(i),"aria-label":p,"aria-pressed":Vi(t),class:f,disabled:i,id:u,ref:g=>this.buttonEl=g},this.renderIconContainer(),this.renderTextContainer()),I("slot",{name:nlt.tooltip,onSlotchange:this.handleTooltipSlotChange}),this.renderIndicatorText())}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return rlt}},[1,"calcite-action",{active:[516],alignment:[513],appearance:[513],compact:[516],disabled:[516],icon:[1],iconFlipRtl:[516,"icon-flip-rtl"],indicator:[516],label:[1],loading:[516],scale:[513],text:[1],textEnabled:[516,"text-enabled"],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]}]);function Gh(){if(typeof customElements>"u")return;["calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-action":customElements.get(e)||customElements.define(e,slt);break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-loader":customElements.get(e)||Bo();break}})}Gh();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const jte=new Set;let H_;const Cbe={childList:!0};function ed(t){H_||(H_=Pi("mutation",Ibe)),H_.observe(t.el,Cbe)}function td(t){jte.delete(t.el),Ibe(H_.takeRecords()),H_.disconnect();for(const[e]of jte.entries())H_.observe(e,Cbe)}function Ibe(t){t.forEach(({target:e})=>{t1(e)})}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function tP(t,e){return(t+e)%e}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */var Tbe=typeof global=="object"&&global&&global.Object===Object&&global,olt=typeof self=="object"&&self&&self.Object===Object&&self,$H=Tbe||olt||Function("return this")(),Dw=$H.Symbol,kbe=Object.prototype,alt=kbe.hasOwnProperty,llt=kbe.toString,Mx=Dw?Dw.toStringTag:void 0;function clt(t){var e=alt.call(t,Mx),i=t[Mx];try{t[Mx]=void 0;var n=!0}catch{}var r=llt.call(t);return n&&(e?t[Mx]=i:delete t[Mx]),r}var ult=Object.prototype,dlt=ult.toString;function hlt(t){return dlt.call(t)}var plt="[object Null]",flt="[object Undefined]",Vte=Dw?Dw.toStringTag:void 0;function cL(t){return t==null?t===void 0?flt:plt:Vte&&Vte in Object(t)?clt(t):hlt(t)}function uL(t){return t!=null&&typeof t=="object"}var mlt="[object Symbol]";function $be(t){return typeof t=="symbol"||uL(t)&&cL(t)==mlt}var glt=/\s/;function ylt(t){for(var e=t.length;e--&&glt.test(t.charAt(e)););return e}var vlt=/^\s+/;function blt(t){return t&&t.slice(0,ylt(t)+1).replace(vlt,"")}function Fw(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Ute=0/0,_lt=/^[-+]0x[0-9a-f]+$/i,wlt=/^0b[01]+$/i,xlt=/^0o[0-7]+$/i,Slt=parseInt;function Bte(t){if(typeof t=="number")return t;if($be(t))return Ute;if(Fw(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Fw(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=blt(t);var i=wlt.test(t);return i||xlt.test(t)?Slt(t.slice(2),i?2:8):_lt.test(t)?Ute:+t}var b5=function(){return $H.Date.now()},Elt="Expected a function",Clt=Math.max,Ilt=Math.min;function pI(t,e,i){var n,r,s,o,a,l,u=0,h=!1,p=!1,f=!0;if(typeof t!="function")throw new TypeError(Elt);e=Bte(e)||0,Fw(i)&&(h=!!i.leading,p="maxWait"in i,s=p?Clt(Bte(i.maxWait)||0,e):s,f="trailing"in i?!!i.trailing:f);function g(P){var k=n,D=r;return n=r=void 0,u=P,o=t.apply(D,k),o}function v(P){return u=P,a=setTimeout(w,e),h?g(P):o}function b(P){var k=P-l,D=P-u,z=e-k;return p?Ilt(z,s-D):z}function _(P){var k=P-l,D=P-u;return l===void 0||k>=e||k<0||p&&D>=s}function w(){var P=b5();if(_(P))return S(P);a=setTimeout(w,b(P))}function S(P){return a=void 0,f&&n?g(P):(n=r=void 0,o)}function C(){a!==void 0&&clearTimeout(a),u=0,n=l=r=a=void 0}function $(){return a===void 0?o:S(b5())}function M(){var P=b5(),k=_(P);if(n=arguments,r=this,l=P,k){if(a===void 0)return v(l);if(p)return clearTimeout(a),a=setTimeout(w,e),g(l)}return a===void 0&&(a=setTimeout(w,e)),o}return M.cancel=C,M.flush=$,M}function Lu(t){return t.split("-")[1]}function AH(t){return t==="y"?"height":"width"}function Dh(t){return t.split("-")[0]}function p2(t){return["top","bottom"].includes(Dh(t))?"x":"y"}function Hte(t,e,i){let{reference:n,floating:r}=t;const s=n.x+n.width/2-r.width/2,o=n.y+n.height/2-r.height/2,a=p2(e),l=AH(a),u=n[l]/2-r[l]/2,h=Dh(e),p=a==="x";let f;switch(h){case"top":f={x:s,y:n.y-r.height};break;case"bottom":f={x:s,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:o};break;case"left":f={x:n.x-r.width,y:o};break;default:f={x:n.x,y:n.y}}switch(Lu(e)){case"start":f[a]-=u*(i&&p?-1:1);break;case"end":f[a]+=u*(i&&p?-1:1);break}return f}const Tlt=async(t,e,i)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:o}=i,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:r}),{x:h,y:p}=Hte(u,n,l),f=n,g={},v=0;for(let b=0;b<a.length;b++){const{name:_,fn:w}=a[b],{x:S,y:C,data:$,reset:M}=await w({x:h,y:p,initialPlacement:n,placement:f,strategy:r,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});if(h=S??h,p=C??p,g={...g,[_]:{...g[_],...$}},M&&v<=50){v++,typeof M=="object"&&(M.placement&&(f=M.placement),M.rects&&(u=M.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:r}):M.rects),{x:h,y:p}=Hte(u,f,l)),b=-1;continue}}return{x:h,y:p,placement:f,strategy:r,middlewareData:g}};function klt(t){return{top:0,right:0,bottom:0,left:0,...t}}function Abe(t){return typeof t!="number"?klt(t):{top:t,right:t,bottom:t,left:t}}function xU(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function fI(t,e){var i;e===void 0&&(e={});const{x:n,y:r,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:f=!1,padding:g=0}=e,v=Abe(g),_=a[f?p==="floating"?"reference":"floating":p],w=xU(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(_)))==null||i?_:_.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:h,strategy:l})),S=p==="floating"?{...o.floating,x:n,y:r}:o.reference,C=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),$=await(s.isElement==null?void 0:s.isElement(C))?await(s.getScale==null?void 0:s.getScale(C))||{x:1,y:1}:{x:1,y:1},M=xU(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:S,offsetParent:C,strategy:l}):S);return{top:(w.top-M.top+v.top)/$.y,bottom:(M.bottom-w.bottom+v.bottom)/$.y,left:(w.left-M.left+v.left)/$.x,right:(M.right-w.right+v.right)/$.x}}const $lt=Math.min,Alt=Math.max;function SU(t,e,i){return Alt(t,$lt(e,i))}const Mlt=t=>({name:"arrow",options:t,async fn(e){const{element:i,padding:n=0}=t||{},{x:r,y:s,placement:o,rects:a,platform:l}=e;if(i==null)return{};const u=Abe(n),h={x:r,y:s},p=p2(o),f=AH(p),g=await l.getDimensions(i),v=p==="y"?"top":"left",b=p==="y"?"bottom":"right",_=a.reference[f]+a.reference[p]-h[p]-a.floating[f],w=h[p]-a.reference[p],S=await(l.getOffsetParent==null?void 0:l.getOffsetParent(i));let C=S?p==="y"?S.clientHeight||0:S.clientWidth||0:0;C===0&&(C=a.floating[f]);const $=_/2-w/2,M=u[v],P=C-g[f]-u[b],k=C/2-g[f]/2+$,D=SU(M,k,P),B=Lu(o)!=null&&k!=D&&a.reference[f]/2-(k<M?u[v]:u[b])-g[f]/2<0?k<M?M-k:P-k:0;return{[p]:h[p]-B,data:{[p]:D,centerOffset:k-D}}}}),Mbe=["top","right","bottom","left"],Gte=Mbe.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),Olt={left:"right",right:"left",bottom:"top",top:"bottom"};function iP(t){return t.replace(/left|right|bottom|top/g,e=>Olt[e])}function Obe(t,e,i){i===void 0&&(i=!1);const n=Lu(t),r=p2(t),s=AH(r);let o=r==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=iP(o)),{main:o,cross:iP(o)}}const Plt={start:"end",end:"start"};function nP(t){return t.replace(/start|end/g,e=>Plt[e])}function Rlt(t,e,i){return(t?[...i.filter(r=>Lu(r)===t),...i.filter(r=>Lu(r)!==t)]:i.filter(r=>Dh(r)===r)).filter(r=>t?Lu(r)===t||(e?nP(r)!==r:!1):!0)}const Llt=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var i,n,r;const{rects:s,middlewareData:o,placement:a,platform:l,elements:u}=e,{crossAxis:h=!1,alignment:p,allowedPlacements:f=Gte,autoAlignment:g=!0,...v}=t,b=p!==void 0||f===Gte?Rlt(p||null,g,f):f,_=await fI(e,v),w=((i=o.autoPlacement)==null?void 0:i.index)||0,S=b[w];if(S==null)return{};const{main:C,cross:$}=Obe(S,s,await(l.isRTL==null?void 0:l.isRTL(u.floating)));if(a!==S)return{reset:{placement:b[0]}};const M=[_[Dh(S)],_[C],_[$]],P=[...((n=o.autoPlacement)==null?void 0:n.overflows)||[],{placement:S,overflows:M}],k=b[w+1];if(k)return{data:{index:w+1,overflows:P},reset:{placement:k}};const D=P.map(j=>{const K=Lu(j.placement);return[j.placement,K&&h?j.overflows.slice(0,2).reduce((ie,te)=>ie+te,0):j.overflows[0],j.overflows]}).sort((j,K)=>j[1]-K[1]),B=((r=D.filter(j=>j[2].slice(0,Lu(j[0])?2:3).every(K=>K<=0))[0])==null?void 0:r[0])||D[0][0];return B!==a?{data:{index:w+1,overflows:P},reset:{placement:B}}:{}}}};function Dlt(t){const e=iP(t);return[nP(t),e,nP(e)]}function Flt(t,e,i){const n=["left","right"],r=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return i?e?r:n:e?n:r;case"left":case"right":return e?s:o;default:return[]}}function Nlt(t,e,i,n){const r=Lu(t);let s=Flt(Dh(t),i==="start",n);return r&&(s=s.map(o=>o+"-"+r),e&&(s=s.concat(s.map(nP)))),s}const qte=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var i;const{placement:n,middlewareData:r,rects:s,initialPlacement:o,platform:a,elements:l}=e,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...b}=t,_=Dh(n),w=Dh(o)===o,S=await(a.isRTL==null?void 0:a.isRTL(l.floating)),C=p||(w||!v?[iP(o)]:Dlt(o));!p&&g!=="none"&&C.push(...Nlt(o,v,g,S));const $=[o,...C],M=await fI(e,b),P=[];let k=((i=r.flip)==null?void 0:i.overflows)||[];if(u&&P.push(M[_]),h){const{main:j,cross:K}=Obe(n,s,S);P.push(M[j],M[K])}if(k=[...k,{placement:n,overflows:P}],!P.every(j=>j<=0)){var D,z;const j=(((D=r.flip)==null?void 0:D.index)||0)+1,K=$[j];if(K)return{data:{index:j,overflows:k},reset:{placement:K}};let ie=(z=k.filter(te=>te.overflows[0]<=0).sort((te,me)=>te.overflows[1]-me.overflows[1])[0])==null?void 0:z.placement;if(!ie)switch(f){case"bestFit":{var B;const te=(B=k.map(me=>[me.placement,me.overflows.filter(Ie=>Ie>0).reduce((Ie,Me)=>Ie+Me,0)]).sort((me,Ie)=>me[1]-Ie[1])[0])==null?void 0:B[0];te&&(ie=te);break}case"initialPlacement":ie=o;break}if(n!==ie)return{reset:{placement:ie}}}return{}}}};function Wte(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Jte(t){return Mbe.some(e=>t[e]>=0)}const zlt=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{strategy:i="referenceHidden",...n}=t,{rects:r}=e;switch(i){case"referenceHidden":{const s=await fI(e,{...n,elementContext:"reference"}),o=Wte(s,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Jte(o)}}}case"escaped":{const s=await fI(e,{...n,altBoundary:!0}),o=Wte(s,r.floating);return{data:{escapedOffsets:o,escaped:Jte(o)}}}default:return{}}}}};async function jlt(t,e){const{placement:i,platform:n,elements:r}=t,s=await(n.isRTL==null?void 0:n.isRTL(r.floating)),o=Dh(i),a=Lu(i),l=p2(i)==="x",u=["left","top"].includes(o)?-1:1,h=s&&l?-1:1,p=typeof e=="function"?e(t):e;let{mainAxis:f,crossAxis:g,alignmentAxis:v}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...p};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*h,y:f*u}:{x:f*u,y:g*h}}const Vlt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:i,y:n}=e,r=await jlt(e,t);return{x:i+r.x,y:n+r.y,data:r}}}};function Ult(t){return t==="x"?"y":"x"}const Blt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:i,y:n,placement:r}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:_=>{let{x:w,y:S}=_;return{x:w,y:S}}},...l}=t,u={x:i,y:n},h=await fI(e,l),p=p2(Dh(r)),f=Ult(p);let g=u[p],v=u[f];if(s){const _=p==="y"?"top":"left",w=p==="y"?"bottom":"right",S=g+h[_],C=g-h[w];g=SU(S,g,C)}if(o){const _=f==="y"?"top":"left",w=f==="y"?"bottom":"right",S=v+h[_],C=v-h[w];v=SU(S,v,C)}const b=a.fn({...e,[p]:g,[f]:v});return{...b,data:{x:b.x-i,y:b.y-n}}}}};function _a(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Zu(t){return _a(t).getComputedStyle(t)}const Yte=Math.min,WE=Math.max,rP=Math.round;function Pbe(t){const e=Zu(t);let i=parseFloat(e.width),n=parseFloat(e.height);const r=t.offsetWidth,s=t.offsetHeight,o=rP(i)!==r||rP(n)!==s;return o&&(i=r,n=s),{width:i,height:n,fallback:o}}function fm(t){return Lbe(t)?(t.nodeName||"").toLowerCase():""}let Pk;function Rbe(){if(Pk)return Pk;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(Pk=t.brands.map(e=>e.brand+"/"+e.version).join(" "),Pk):navigator.userAgent}function Ku(t){return t instanceof _a(t).HTMLElement}function Oc(t){return t instanceof _a(t).Element}function Lbe(t){return t instanceof _a(t).Node}function Zte(t){if(typeof ShadowRoot>"u")return!1;const e=_a(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function dL(t){const{overflow:e,overflowX:i,overflowY:n,display:r}=Zu(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+i)&&!["inline","contents"].includes(r)}function Hlt(t){return["table","td","th"].includes(fm(t))}function MH(t){const e=/firefox/i.test(Rbe()),i=Zu(t),n=i.backdropFilter||i.WebkitBackdropFilter;return i.transform!=="none"||i.perspective!=="none"||(n?n!=="none":!1)||e&&i.willChange==="filter"||e&&(i.filter?i.filter!=="none":!1)||["transform","perspective"].some(r=>i.willChange.includes(r))||["paint","layout","strict","content"].some(r=>{const s=i.contain;return s!=null?s.includes(r):!1})}function OH(){return/^((?!chrome|android).)*safari/i.test(Rbe())}function PH(t){return["html","body","#document"].includes(fm(t))}function Dbe(t){return Oc(t)?t:t.contextElement}const Fbe={x:1,y:1};function G_(t){const e=Dbe(t);if(!Ku(e))return Fbe;const i=e.getBoundingClientRect(),{width:n,height:r,fallback:s}=Pbe(e);let o=(s?rP(i.width):i.width)/n,a=(s?rP(i.height):i.height)/r;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}function O0(t,e,i,n){var r,s;e===void 0&&(e=!1),i===void 0&&(i=!1);const o=t.getBoundingClientRect(),a=Dbe(t);let l=Fbe;e&&(n?Oc(n)&&(l=G_(n)):l=G_(t));const u=a?_a(a):window,h=OH()&&i;let p=(o.left+(h&&((r=u.visualViewport)==null?void 0:r.offsetLeft)||0))/l.x,f=(o.top+(h&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/l.y,g=o.width/l.x,v=o.height/l.y;if(a){const b=_a(a),_=n&&Oc(n)?_a(n):n;let w=b.frameElement;for(;w&&n&&_!==b;){const S=G_(w),C=w.getBoundingClientRect(),$=getComputedStyle(w);C.x+=(w.clientLeft+parseFloat($.paddingLeft))*S.x,C.y+=(w.clientTop+parseFloat($.paddingTop))*S.y,p*=S.x,f*=S.y,g*=S.x,v*=S.y,p+=C.x,f+=C.y,w=_a(w).frameElement}}return{width:g,height:v,top:f,right:p+g,bottom:f+v,left:p,x:p,y:f}}function Pm(t){return((Lbe(t)?t.ownerDocument:t.document)||window.document).documentElement}function hL(t){return Oc(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Glt(t){let{rect:e,offsetParent:i,strategy:n}=t;const r=Ku(i),s=Pm(i);if(i===s)return e;let o={scrollLeft:0,scrollTop:0},a={x:1,y:1};const l={x:0,y:0};if((r||!r&&n!=="fixed")&&((fm(i)!=="body"||dL(s))&&(o=hL(i)),Ku(i))){const u=O0(i);a=G_(i),l.x=u.x+i.clientLeft,l.y=u.y+i.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function Nbe(t){return O0(Pm(t)).left+hL(t).scrollLeft}function qlt(t){const e=Pm(t),i=hL(t),n=t.ownerDocument.body,r=WE(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=WE(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let o=-i.scrollLeft+Nbe(t);const a=-i.scrollTop;return Zu(n).direction==="rtl"&&(o+=WE(e.clientWidth,n.clientWidth)-r),{width:r,height:s,x:o,y:a}}function mI(t){if(fm(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Zte(t)&&t.host||Pm(t);return Zte(e)?e.host:e}function zbe(t){const e=mI(t);return PH(e)?e.ownerDocument.body:Ku(e)&&dL(e)?e:zbe(e)}function JE(t,e){var i;e===void 0&&(e=[]);const n=zbe(t),r=n===((i=t.ownerDocument)==null?void 0:i.body),s=_a(n);return r?e.concat(s,s.visualViewport||[],dL(n)?n:[]):e.concat(n,JE(n))}function Wlt(t,e){const i=_a(t),n=Pm(t),r=i.visualViewport;let s=n.clientWidth,o=n.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;const u=OH();(!u||u&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a,y:l}}function Jlt(t,e){const i=O0(t,!0,e==="fixed"),n=i.top+t.clientTop,r=i.left+t.clientLeft,s=Ku(t)?G_(t):{x:1,y:1},o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=r*s.x,u=n*s.y;return{width:o,height:a,x:l,y:u}}function Kte(t,e,i){let n;if(e==="viewport")n=Wlt(t,i);else if(e==="document")n=qlt(Pm(t));else if(Oc(e))n=Jlt(e,i);else{const o={...e};if(OH()){var r,s;const a=_a(t);o.x-=((r=a.visualViewport)==null?void 0:r.offsetLeft)||0,o.y-=((s=a.visualViewport)==null?void 0:s.offsetTop)||0}n=o}return xU(n)}function Ylt(t,e){const i=e.get(t);if(i)return i;let n=JE(t).filter(a=>Oc(a)&&fm(a)!=="body"),r=null;const s=Zu(t).position==="fixed";let o=s?mI(t):t;for(;Oc(o)&&!PH(o);){const a=Zu(o),l=MH(o);a.position==="fixed"?r=null:(s?!l&&!r:!l&&a.position==="static"&&!!r&&["absolute","fixed"].includes(r.position))?n=n.filter(p=>p!==o):r=a,o=mI(o)}return e.set(t,n),n}function Zlt(t){let{element:e,boundary:i,rootBoundary:n,strategy:r}=t;const o=[...i==="clippingAncestors"?Ylt(e,this._c):[].concat(i),n],a=o[0],l=o.reduce((u,h)=>{const p=Kte(e,h,r);return u.top=WE(p.top,u.top),u.right=Yte(p.right,u.right),u.bottom=Yte(p.bottom,u.bottom),u.left=WE(p.left,u.left),u},Kte(e,a,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Klt(t){return Ku(t)?Pbe(t):t.getBoundingClientRect()}function Xte(t,e){return!Ku(t)||Zu(t).position==="fixed"?null:e?e(t):t.offsetParent}function Xlt(t){let e=mI(t);for(;Ku(e)&&!PH(e);){if(MH(e))return e;e=mI(e)}return null}function Qte(t,e){const i=_a(t);let n=Xte(t,e);for(;n&&Hlt(n)&&Zu(n).position==="static";)n=Xte(n,e);return n&&(fm(n)==="html"||fm(n)==="body"&&Zu(n).position==="static"&&!MH(n))?i:n||Xlt(t)||i}function Qlt(t,e,i){const n=Ku(e),r=Pm(e),s=O0(t,!0,i==="fixed",e);let o={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(n||!n&&i!=="fixed")if((fm(e)!=="body"||dL(r))&&(o=hL(e)),Ku(e)){const l=O0(e,!0);a.x=l.x+e.clientLeft,a.y=l.y+e.clientTop}else r&&(a.x=Nbe(r));return{x:s.left+o.scrollLeft-a.x,y:s.top+o.scrollTop-a.y,width:s.width,height:s.height}}const EU={getClippingRect:Zlt,convertOffsetParentRelativeRectToViewportRelativeRect:Glt,isElement:Oc,getDimensions:Klt,getOffsetParent:Qte,getDocumentElement:Pm,getScale:G_,async getElementRects(t){let{reference:e,floating:i,strategy:n}=t;const r=this.getOffsetParent||Qte,s=this.getDimensions;return{reference:Qlt(e,await r(i),n),floating:{x:0,y:0,...await s(i)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>Zu(t).direction==="rtl"};function ect(t,e,i,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=n,l=r&&!a,u=l||s?[...Oc(t)?JE(t):t.contextElement?JE(t.contextElement):[],...JE(e)]:[];u.forEach(v=>{l&&v.addEventListener("scroll",i,{passive:!0}),s&&v.addEventListener("resize",i)});let h=null;if(o){let v=!0;h=new ResizeObserver(()=>{v||i(),v=!1}),Oc(t)&&!a&&h.observe(t),!Oc(t)&&t.contextElement&&!a&&h.observe(t.contextElement),h.observe(e)}let p,f=a?O0(t):null;a&&g();function g(){const v=O0(t);f&&(v.x!==f.x||v.y!==f.y||v.width!==f.width||v.height!==f.height)&&i(),f=v,p=requestAnimationFrame(g)}return i(),()=>{var v;u.forEach(b=>{l&&b.removeEventListener("scroll",i),s&&b.removeEventListener("resize",i)}),(v=h)==null||v.disconnect(),h=null,a&&cancelAnimationFrame(p)}}const tct=(t,e,i)=>{const n=new Map,r={platform:EU,...i},s={...r.platform,_c:n};return Tlt(t,e,{...r,platform:s})},ict=globalThis.calciteComponentsConfig,nct={floatingUINonChromiumPositioningFix:!0,...ict},rct=sct();async function sct(){function t(){return navigator.userAgentData}function e(){const n=t();return n!=null&&n.brands?n.brands.map(({brand:r,version:s})=>`${r}/${s}`).join(" "):navigator.userAgent}function i(){const n=t();return n!=null&&n.brands?!!n.brands.find(({brand:r,version:s})=>(r==="Google Chrome"||r==="Chromium")&&Number(s)>=109):!!navigator.userAgent.split(" ").find(r=>{const[s,o]=r.split("/");return s==="Chrome"&&parseInt(o)>=109})}if(nct.floatingUINonChromiumPositioningFix&&(/firefox|safari/i.test(e())||i())){const{offsetParent:n}=await q(()=>import("./utils4-dd22d174.js"),[]),r=EU.getOffsetParent;EU.getOffsetParent=s=>r(s,n)}}const jbe="data-placement",eie=100,tie=["top","bottom","right","left","top-start","top-end","bottom-start","bottom-end","right-start","right-end","left-start","left-end"],RH="bottom-start",jc={animation:"calcite-floating-ui-anim",animationActive:"calcite-floating-ui-anim--active"};function oct({placement:t,flipDisabled:e,flipPlacements:i,offsetDistance:n,offsetSkidding:r,arrowEl:s,type:o}){const a=[Blt(),zlt()];if(o==="menu")return[...a,qte({fallbackPlacements:i||["top-start","top","top-end","bottom-start","bottom","bottom-end"]})];if(o==="popover"||o==="tooltip"){const l=[...a,Vlt({mainAxis:typeof n=="number"?n:0,crossAxis:typeof r=="number"?r:0})];return t==="auto"||t==="auto-start"||t==="auto-end"?l.push(Llt({alignment:t==="auto-start"?"start":t==="auto-end"?"end":null})):e||l.push(qte(i?{fallbackPlacements:i}:{})),s&&l.push(Mlt({element:s})),l}return[]}function pL(t,e){const i=t.filter(n=>tie.includes(n));return i.length!==t.length&&console.warn(`${e.tagName}: Invalid value found in: flipPlacements. Try any of these: ${tie.map(n=>`"${n}"`).join(", ").trim()}`,{el:e}),i}function act(t,e){const i=["left","right"];return Kr(t)==="rtl"&&i.reverse(),e.replace(/leading/gi,i[0]).replace(/trailing/gi,i[1])}async function f2(t,e,i=!1){if(t.open)return i?lct(e):Vbe(e)}const lct=pI(Vbe,eie,{leading:!0,maxWait:eie});async function Vbe({referenceEl:t,floatingEl:e,overlayPositioning:i="absolute",placement:n,flipDisabled:r,flipPlacements:s,offsetDistance:o,offsetSkidding:a,includeArrow:l=!1,arrowEl:u,type:h}){var $;if(!t||!e||l&&!u)return null;await rct;const{x:p,y:f,placement:g,strategy:v,middlewareData:b}=await tct(t,e,{strategy:i,placement:n==="auto"||n==="auto-start"||n==="auto-end"?void 0:act(e,n),middleware:oct({placement:n,flipDisabled:r,flipPlacements:s,offsetDistance:o,offsetSkidding:a,arrowEl:u,type:h})});if(b!=null&&b.arrow){const{x:M,y:P}=b.arrow;Object.assign(u.style,{left:M!=null?`${M}px`:"",top:P!=null?`${P}px`:""})}const w=(($=b==null?void 0:b.hide)==null?void 0:$.referenceHidden)?"hidden":null,S=w?"none":null;e.setAttribute(jbe,g);const C=`translate(${Math.round(p)}px,${Math.round(f)}px)`;Object.assign(e.style,{visibility:w,pointerEvents:S,position:v,top:"0",left:"0",transform:C})}const CU=new WeakMap;function mm(t,e,i){if(!i||!e)return;x1(t,e,i);const n=t.overlayPositioning;Object.assign(i.style,{visibility:"hidden",pointerEvents:"none",position:n}),n==="absolute"&&Bbe(i);const r=ect;CU.set(t,r(e,i,()=>t.reposition()))}function x1(t,e,i){if(!i||!e)return;LH(i).removeEventListener("transitionend",DH);const n=CU.get(t);n&&n(),CU.delete(t)}const iie=4,Ube=Math.ceil(Math.hypot(iie,iie));function P0(t){!t||t.style.position!=="absolute"||LH(t).addEventListener("transitionend",DH)}function LH(t){return t.shadowRoot||t}function DH(t){const e=t.target;if(t.propertyName==="opacity"&&e.classList.contains(jc.animation)){const i=cct(e);Bbe(i),LH(i).removeEventListener("transitionend",DH)}}function Bbe(t){t.style.transform="",t.style.top="0",t.style.left="0"}function cct(t){return Qu(t,`[${jbe}]`)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 *//*!
* focus-trap 7.2.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function nie(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function rie(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?nie(Object(i),!0).forEach(function(n){uct(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):nie(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function uct(t,e,i){return e=hct(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function dct(t,e){if(typeof t!="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hct(t){var e=dct(t,"string");return typeof e=="symbol"?e:String(e)}var sie={activateTrap:function(e,i){if(e.length>0){var n=e[e.length-1];n!==i&&n.pause()}var r=e.indexOf(i);r===-1||e.splice(r,1),e.push(i)},deactivateTrap:function(e,i){var n=e.indexOf(i);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},pct=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},fct=function(e){return e.key==="Escape"||e.key==="Esc"||e.keyCode===27},YE=function(e){return e.key==="Tab"||e.keyCode===9},mct=function(e){return YE(e)&&!e.shiftKey},gct=function(e){return YE(e)&&e.shiftKey},oie=function(e){return setTimeout(e,0)},aie=function(e,i){var n=-1;return e.every(function(r,s){return i(r)?(n=s,!1):!0}),n},Ox=function(e){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return typeof e=="function"?e.apply(void 0,n):e},Rk=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},yct=[],vct=function(e,i){var n=(i==null?void 0:i.document)||document,r=(i==null?void 0:i.trapStack)||yct,s=rie({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:mct,isKeyBackward:gct},i),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},a,l=function(k,D,z){return k&&k[D]!==void 0?k[D]:s[z||D]},u=function(k){return o.containerGroups.findIndex(function(D){var z=D.container,B=D.tabbableNodes;return z.contains(k)||B.find(function(j){return j===k})})},h=function(k){var D=s[k];if(typeof D=="function"){for(var z=arguments.length,B=new Array(z>1?z-1:0),j=1;j<z;j++)B[j-1]=arguments[j];D=D.apply(void 0,B)}if(D===!0&&(D=void 0),!D){if(D===void 0||D===!1)return D;throw new Error("`".concat(k,"` was specified but was not a node, or did not return a node"))}var K=D;if(typeof D=="string"&&(K=n.querySelector(D),!K))throw new Error("`".concat(k,"` as selector refers to no known node"));return K},p=function(){var k=h("initialFocus");if(k===!1)return!1;if(k===void 0)if(u(n.activeElement)>=0)k=n.activeElement;else{var D=o.tabbableGroups[0],z=D&&D.firstTabbableNode;k=z||h("fallbackFocus")}if(!k)throw new Error("Your focus-trap needs to have at least one focusable element");return k},f=function(){if(o.containerGroups=o.containers.map(function(k){var D=wue(k,s.tabbableOptions),z=YDe(k,s.tabbableOptions);return{container:k,tabbableNodes:D,focusableNodes:z,firstTabbableNode:D.length>0?D[0]:null,lastTabbableNode:D.length>0?D[D.length-1]:null,nextTabbableNode:function(j){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,ie=z.findIndex(function(te){return te===j});if(!(ie<0))return K?z.slice(ie+1).find(function(te){return _T(te,s.tabbableOptions)}):z.slice(0,ie).reverse().find(function(te){return _T(te,s.tabbableOptions)})}}}),o.tabbableGroups=o.containerGroups.filter(function(k){return k.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},g=function P(k){if(k!==!1&&k!==n.activeElement){if(!k||!k.focus){P(p());return}k.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=k,pct(k)&&k.select()}},v=function(k){var D=h("setReturnFocus",k);return D||(D===!1?!1:k)},b=function(k){var D=Rk(k);if(!(u(D)>=0)){if(Ox(s.clickOutsideDeactivates,k)){a.deactivate({returnFocus:s.returnFocusOnDeactivate&&!pD(D,s.tabbableOptions)});return}Ox(s.allowOutsideClick,k)||k.preventDefault()}},_=function(k){var D=Rk(k),z=u(D)>=0;z||D instanceof Document?z&&(o.mostRecentlyFocusedNode=D):(k.stopImmediatePropagation(),g(o.mostRecentlyFocusedNode||p()))},w=function(k){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,z=Rk(k);f();var B=null;if(o.tabbableGroups.length>0){var j=u(z),K=j>=0?o.containerGroups[j]:void 0;if(j<0)D?B=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:B=o.tabbableGroups[0].firstTabbableNode;else if(D){var ie=aie(o.tabbableGroups,function(ge){var he=ge.firstTabbableNode;return z===he});if(ie<0&&(K.container===z||pD(z,s.tabbableOptions)&&!_T(z,s.tabbableOptions)&&!K.nextTabbableNode(z,!1))&&(ie=j),ie>=0){var te=ie===0?o.tabbableGroups.length-1:ie-1,me=o.tabbableGroups[te];B=me.lastTabbableNode}else YE(k)||(B=K.nextTabbableNode(z,!1))}else{var Ie=aie(o.tabbableGroups,function(ge){var he=ge.lastTabbableNode;return z===he});if(Ie<0&&(K.container===z||pD(z,s.tabbableOptions)&&!_T(z,s.tabbableOptions)&&!K.nextTabbableNode(z))&&(Ie=j),Ie>=0){var Me=Ie===o.tabbableGroups.length-1?0:Ie+1,oe=o.tabbableGroups[Me];B=oe.firstTabbableNode}else YE(k)||(B=K.nextTabbableNode(z))}}else B=h("fallbackFocus");B&&(YE(k)&&k.preventDefault(),g(B))},S=function(k){if(fct(k)&&Ox(s.escapeDeactivates,k)!==!1){k.preventDefault(),a.deactivate();return}(s.isKeyForward(k)||s.isKeyBackward(k))&&w(k,s.isKeyBackward(k))},C=function(k){var D=Rk(k);u(D)>=0||Ox(s.clickOutsideDeactivates,k)||Ox(s.allowOutsideClick,k)||(k.preventDefault(),k.stopImmediatePropagation())},$=function(){if(o.active)return sie.activateTrap(r,a),o.delayInitialFocusTimer=s.delayInitialFocus?oie(function(){g(p())}):g(p()),n.addEventListener("focusin",_,!0),n.addEventListener("mousedown",b,{capture:!0,passive:!1}),n.addEventListener("touchstart",b,{capture:!0,passive:!1}),n.addEventListener("click",C,{capture:!0,passive:!1}),n.addEventListener("keydown",S,{capture:!0,passive:!1}),a},M=function(){if(o.active)return n.removeEventListener("focusin",_,!0),n.removeEventListener("mousedown",b,!0),n.removeEventListener("touchstart",b,!0),n.removeEventListener("click",C,!0),n.removeEventListener("keydown",S,!0),a};return a={get active(){return o.active},get paused(){return o.paused},activate:function(k){if(o.active)return this;var D=l(k,"onActivate"),z=l(k,"onPostActivate"),B=l(k,"checkCanFocusTrap");B||f(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=n.activeElement,D&&D();var j=function(){B&&f(),$(),z&&z()};return B?(B(o.containers.concat()).then(j,j),this):(j(),this)},deactivate:function(k){if(!o.active)return this;var D=rie({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},k);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,M(),o.active=!1,o.paused=!1,sie.deactivateTrap(r,a);var z=l(D,"onDeactivate"),B=l(D,"onPostDeactivate"),j=l(D,"checkCanReturnFocus"),K=l(D,"returnFocus","returnFocusOnDeactivate");z&&z();var ie=function(){oie(function(){K&&g(v(o.nodeFocusedBeforeActivation)),B&&B()})};return K&&j?(j(v(o.nodeFocusedBeforeActivation)).then(ie,ie),this):(ie(),this)},pause:function(){return o.paused||!o.active?this:(o.paused=!0,M(),this)},unpause:function(){return!o.paused||!o.active?this:(o.paused=!1,f(),$(),this)},updateContainerElements:function(k){var D=[].concat(k).filter(Boolean);return o.containers=D.map(function(z){return typeof z=="string"?n.querySelector(z):z}),o.active&&f(),this}},a.updateContainerElements(e),a};const bct=[];function Hbe(t){const{focusTrapEl:e}=t;if(!e)return;e.tabIndex==null&&(e.tabIndex=-1);const i={clickOutsideDeactivates:!0,document:e.ownerDocument,escapeDeactivates:!1,fallbackFocus:e,setReturnFocus:n=>(qu(n),!1),tabbableOptions:xue,trapStack:bct};t.focusTrap=vct(e,i)}function sP(t){var e;t.focusTrapDisabled||(e=t.focusTrap)==null||e.activate()}function q_(t){var e;(e=t.focusTrap)==null||e.deactivate()}function Gbe(t){var e;(e=t.focusTrap)==null||e.updateContainerElements(t.focusTrapEl)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const RA=new WeakMap;function _ct(t){t.propertyName===this.openTransitionProp&&t.target===this.transitionEl&&(this.open?this.onBeforeOpen():this.onBeforeClose())}function wct(t){t.propertyName===this.openTransitionProp&&t.target===this.transitionEl&&(this.open?this.onOpen():this.onClose())}function lie(t,e=!1){PDe(()=>{if(t.transitionEl){const i=getComputedStyle(t.transitionEl).transition.split(" "),n=i.findIndex(s=>s===t.openTransitionProp);i[n+1]==="0s"?((e?t[t.transitionProp]:t.open)?t.onBeforeOpen():t.onBeforeClose(),(e?t[t.transitionProp]:t.open)?t.onOpen():t.onClose()):(t.transitionEl.addEventListener("transitionstart",()=>{(e?t[t.transitionProp]:t.open)?t.onBeforeOpen():t.onBeforeClose()},{once:!0}),t.transitionEl.addEventListener("transitionend",()=>{(e?t[t.transitionProp]:t.open)?t.onOpen():t.onClose()},{once:!0}))}})}function Cl(t){if(q0(t),t.transitionEl){const e=_ct.bind(t),i=wct.bind(t);RA.set(t,[t.transitionEl,e,i]),t.transitionEl.addEventListener("transitionstart",e),t.transitionEl.addEventListener("transitionend",i)}}function q0(t){if(!RA.has(t))return;const[e,i,n]=RA.get(t);e.removeEventListener("transitionstart",i),e.removeEventListener("transitionend",n),RA.delete(t)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function xct(t){return Math.min(Math.max(Math.ceil(t),1),6)}const m2=(t,e)=>{const i=t.level?`h${t.level}`:"div";return delete t.level,I(i,{...t},e)};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Yc={container:"container",arrow:"arrow",imageContainer:"image-container",closeButtonContainer:"close-button-container",closeButton:"close-button",content:"content",hasHeader:"has-header",header:"header",headerContent:"header-content",heading:"heading"},Sct="auto",cie="aria-controls",uie="aria-expanded";class Ect{constructor(){this.registeredElements=new Map,this.registeredElementCount=0,this.queryPopover=e=>{const{registeredElements:i}=this,n=e.find(r=>i.has(r));return i.get(n)},this.togglePopovers=e=>{const i=e.composedPath(),n=this.queryPopover(i);n&&!n.triggerDisabled&&(n.open=!n.open),Array.from(this.registeredElements.values()).filter(r=>r!==n&&r.autoClose&&r.open&&!i.includes(r)).forEach(r=>r.open=!1)},this.keyHandler=e=>{e.defaultPrevented||(e.key==="Escape"?this.closeAllPopovers():Yu(e.key)&&this.togglePopovers(e))},this.clickHandler=e=>{Lo(e)&&this.togglePopovers(e)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}closeAllPopovers(){Array.from(this.registeredElements.values()).forEach(e=>e.open=!1)}addListeners(){document.addEventListener("pointerdown",this.clickHandler,{capture:!0}),document.addEventListener("keydown",this.keyHandler,{capture:!0})}removeListeners(){document.removeEventListener("pointerdown",this.clickHandler,{capture:!0}),document.removeEventListener("keydown",this.keyHandler,{capture:!0})}}const Cct='@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{--calcite-floating-ui-z-index:var(--calcite-popover-z-index, 900);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:1;border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{transform:translateY(-5px)}:host([data-placement^=top]) .calcite-floating-ui-anim{transform:translateY(5px)}:host([data-placement^=left]) .calcite-floating-ui-anim{transform:translateX(5px)}:host([data-placement^=right]) .calcite-floating-ui-anim{transform:translateX(-5px)}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.arrow,.arrow::before{position:absolute;inline-size:8px;block-size:8px;z-index:-1}.arrow::before{content:"";--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transform:rotate(45deg);background:var(--calcite-ui-foreground-1)}:host([data-placement^=top]) .arrow{inset-block-end:-4px}:host([data-placement^=bottom]) .arrow{inset-block-start:-4px}:host([data-placement^=right]) .arrow,:host([data-placement^=left]) .arrow{direction:ltr;text-align:start}:host([data-placement^=left]) .arrow{inset-inline-end:-4px}:host([data-placement^=right]) .arrow{inset-inline-start:-4px}:host([scale=s]) .heading{padding-inline:0.75rem;padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .heading{padding-inline:1rem;padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .heading{padding-inline:1.25rem;padding-block:1rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host{pointer-events:none}:host([open]){pointer-events:initial}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);background-color:var(--calcite-ui-foreground-1)}.arrow::before{outline:1px solid var(--calcite-ui-border-3)}.header{display:flex;flex:1 1 auto;align-items:stretch;justify-content:flex-start;border-width:0px;border-block-end-width:1px;border-style:solid;background-color:var(--calcite-ui-foreground-1);border-block-end-color:var(--calcite-ui-border-3)}.heading{margin:0px;display:block;flex:1 1 auto;align-self:center;white-space:normal;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1);word-wrap:break-word;word-break:break-word}.container{position:relative;display:flex;block-size:100%;flex-direction:row;flex-wrap:nowrap;border-radius:0.25rem;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-1)}.container.has-header{flex-direction:column}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;align-self:center;word-wrap:break-word;word-break:break-word}.close-button-container{display:flex;overflow:hidden;flex:0 0 auto;border-start-end-radius:0.25rem;border-end-end-radius:0.25rem}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%}',die=new Ect,Ict=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePopoverBeforeClose=ue(this,"calcitePopoverBeforeClose",6),this.calcitePopoverClose=ue(this,"calcitePopoverClose",6),this.calcitePopoverBeforeOpen=ue(this,"calcitePopoverBeforeOpen",6),this.calcitePopoverOpen=ue(this,"calcitePopoverOpen",6),this.guid=`calcite-popover-${Ts()}`,this.openTransitionProp="opacity",this.hasLoaded=!1,this.setTransitionEl=t=>{this.transitionEl=t,Cl(this),this.focusTrapEl=t,Hbe(this)},this.setFilteredPlacements=()=>{const{el:t,flipPlacements:e}=this;this.filteredFlipPlacements=e?pL(e,t):null},this.setUpReferenceElement=(t=!0)=>{this.removeReferences(),this.effectiveReferenceElement=this.getReferenceElement(),mm(this,this.effectiveReferenceElement,this.el);const{el:e,referenceElement:i,effectiveReferenceElement:n}=this;t&&i&&!n&&console.warn(`${e.tagName}: reference-element id "${i}" was not found.`,{el:e}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.setExpandedAttr=()=>{const{effectiveReferenceElement:t,open:e}=this;t&&"setAttribute"in t&&t.setAttribute(uie,Vi(e))},this.addReferences=()=>{const{effectiveReferenceElement:t}=this;if(!t)return;const e=this.getId();"setAttribute"in t&&t.setAttribute(cie,e),die.registerElement(t,this.el),this.setExpandedAttr()},this.removeReferences=()=>{const{effectiveReferenceElement:t}=this;t&&("removeAttribute"in t&&(t.removeAttribute(cie),t.removeAttribute(uie)),die.unregisterElement(t))},this.hide=()=>{this.open=!1},this.storeArrowEl=t=>{this.arrowEl=t,this.reposition(!0)},this.autoClose=!1,this.closable=!1,this.flipDisabled=!1,this.focusTrapDisabled=!1,this.pointerDisabled=!1,this.flipPlacements=void 0,this.heading=void 0,this.headingLevel=void 0,this.label=void 0,this.messageOverrides=void 0,this.messages=void 0,this.offsetDistance=Ube,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement=Sct,this.referenceElement=void 0,this.scale="m",this.triggerDisabled=!1,this.effectiveLocale="",this.effectiveReferenceElement=void 0,this.defaultMessages=void 0}handlefocusTrapDisabled(t){this.open&&(t?q_(this):sP(this))}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}onMessagesChange(){}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(t){t?this.reposition(!0):P0(this.el),this.setExpandedAttr()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement(),this.reposition(!0)}effectiveLocaleChange(){ur(this,this.effectiveLocale)}connectedCallback(){this.setFilteredPlacements(),hn(this),dr(this),Cl(this),this.setUpReferenceElement(this.hasLoaded)}async componentWillLoad(){await cr(this),Ui(this)}componentDidLoad(){Bi(this),this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.reposition(),this.hasLoaded=!0}disconnectedCallback(){this.removeReferences(),pn(this),hr(this),x1(this,this.effectiveReferenceElement,this.el),q0(this),q_(this)}async reposition(t=!1){const{el:e,effectiveReferenceElement:i,placement:n,overlayPositioning:r,flipDisabled:s,filteredFlipPlacements:o,offsetDistance:a,offsetSkidding:l,arrowEl:u}=this;return f2(this,{floatingEl:e,referenceEl:i,overlayPositioning:r,placement:n,flipDisabled:s,flipPlacements:o,offsetDistance:a,offsetSkidding:l,includeArrow:!this.pointerDisabled,arrowEl:u,type:"popover"},t)}async setFocus(){await Hi(this),t1(this.el),nB(this.focusTrapEl)}async updateFocusTrapElements(){Gbe(this)}getReferenceElement(){const{referenceElement:t,el:e}=this;return(typeof t=="string"?iB(e,{id:t}):t)||null}onBeforeOpen(){this.calcitePopoverBeforeOpen.emit()}onOpen(){this.calcitePopoverOpen.emit(),sP(this)}onBeforeClose(){this.calcitePopoverBeforeClose.emit()}onClose(){this.calcitePopoverClose.emit(),q_(this)}renderCloseButton(){const{messages:t,closable:e}=this;return e?I("div",{class:Yc.closeButtonContainer,key:Yc.closeButtonContainer},I("calcite-action",{class:Yc.closeButton,onClick:this.hide,ref:i=>this.closeButtonEl=i,scale:this.scale,text:t.close},I("calcite-icon",{icon:"x",scale:this.scale==="l"?"m":this.scale}))):null}renderHeader(){const{heading:t,headingLevel:e}=this,i=t?I(m2,{class:Yc.heading,level:e},t):null;return i?I("div",{class:Yc.header,key:Yc.header},i,this.renderCloseButton()):null}render(){const{effectiveReferenceElement:t,heading:e,label:i,open:n,pointerDisabled:r}=this,s=t&&n,o=!s,a=r?null:I("div",{class:Yc.arrow,ref:this.storeArrowEl});return I(Ft,{"aria-hidden":Vi(o),"aria-label":i,"aria-live":"polite","calcite-hydrated-hidden":o,id:this.getId(),role:"dialog"},I("div",{class:{[jc.animation]:!0,[jc.animationActive]:s},ref:this.setTransitionEl},a,I("div",{class:{[Yc.hasHeader]:!!e,[Yc.container]:!0}},this.renderHeader(),I("div",{class:Yc.content},I("slot",null)),e?null:this.renderCloseButton())))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{focusTrapDisabled:["handlefocusTrapDisabled"],flipPlacements:["flipPlacementsHandler"],messageOverrides:["onMessagesChange"],offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Cct}},[1,"calcite-popover",{autoClose:[516,"auto-close"],closable:[1540],flipDisabled:[516,"flip-disabled"],focusTrapDisabled:[516,"focus-trap-disabled"],pointerDisabled:[516,"pointer-disabled"],flipPlacements:[16],heading:[1],headingLevel:[514,"heading-level"],label:[1],messageOverrides:[1040],messages:[1040],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],scale:[513],triggerDisabled:[516,"trigger-disabled"],effectiveLocale:[32],effectiveReferenceElement:[32],defaultMessages:[32],reposition:[64],setFocus:[64],updateFocusTrapElements:[64]}]);function S1(){if(typeof customElements>"u")return;["calcite-popover","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-popover":customElements.get(e)||customElements.define(e,Ict);break;case"calcite-action":customElements.get(e)||Gh();break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-loader":customElements.get(e)||Bo();break}})}S1();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const hie={menu:"menu",defaultTrigger:"default-trigger"},Nw={tooltip:"tooltip",trigger:"trigger"},Tct={menu:"ellipsis"},kct="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{box-sizing:border-box;display:flex;flex-direction:column;background-color:var(--calcite-ui-foreground-1);font-size:var(--calcite-font-size-1);color:var(--calcite-ui-text-2)}.menu ::slotted(calcite-action){margin:0.125rem;display:flex;outline-color:transparent}.menu ::slotted(calcite-action[active]){outline:2px solid var(--calcite-ui-brand);outline-offset:0px}.default-trigger{position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}slot[name=trigger]::slotted(calcite-action),calcite-action::slotted([slot=trigger]){position:relative;block-size:100%;flex:0 1 auto;align-self:stretch}.menu{flex-direction:column;flex-wrap:nowrap;outline:2px solid transparent;outline-offset:2px}",$ct=["ArrowUp","ArrowDown","End","Home"],Act=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionMenuOpen=ue(this,"calciteActionMenuOpen",6),this.actionElements=[],this.guid=`calcite-action-menu-${Ts()}`,this.menuId=`${this.guid}-menu`,this.menuButtonId=`${this.guid}-menu-button`,this.connectMenuButtonEl=()=>{const{menuButtonId:t,menuId:e,open:i,label:n}=this,r=this.slottedMenuButtonEl||this.defaultMenuButtonEl;this.menuButtonEl!==r&&(this.disconnectMenuButtonEl(),this.menuButtonEl=r,this.setTooltipReferenceElement(),r&&(r.active=i,r.setAttribute("aria-controls",e),r.setAttribute("aria-expanded",Vi(i)),r.setAttribute("aria-haspopup","true"),r.id||(r.id=t),r.label||(r.label=n),r.text||(r.text=n),r.addEventListener("pointerdown",this.menuButtonClick),r.addEventListener("keydown",this.menuButtonKeyDown)))},this.disconnectMenuButtonEl=()=>{const{menuButtonEl:t}=this;t&&(t.removeEventListener("pointerdown",this.menuButtonClick),t.removeEventListener("keydown",this.menuButtonKeyDown))},this.setMenuButtonEl=t=>{const e=t.target.assignedElements({flatten:!0}).filter(i=>i==null?void 0:i.matches("calcite-action"));this.slottedMenuButtonEl=e[0],this.connectMenuButtonEl()},this.setDefaultMenuButtonEl=t=>{this.defaultMenuButtonEl=t,this.connectMenuButtonEl()},this.handleCalciteActionClick=()=>{this.open=!1,this.setFocus()},this.menuButtonClick=t=>{Lo(t)&&this.toggleOpen()},this.updateTooltip=t=>{const e=t.target.assignedElements({flatten:!0}).filter(i=>i==null?void 0:i.matches("calcite-tooltip"));this.tooltipEl=e[0],this.setTooltipReferenceElement()},this.setTooltipReferenceElement=()=>{const{tooltipEl:t,expanded:e,menuButtonEl:i,open:n}=this;t&&(t.referenceElement=!e&&!n?i:null)},this.updateAction=(t,e)=>{const{guid:i,activeMenuItemIndex:n}=this,r=`${i}-action-${e}`;t.tabIndex=-1,t.setAttribute("role","menuitem"),t.id||(t.id=r),t.active=e===n},this.updateActions=t=>{t==null||t.forEach(this.updateAction)},this.handleDefaultSlotChange=t=>{const e=t.target.assignedElements({flatten:!0}).filter(i=>i==null?void 0:i.matches("calcite-action"));this.actionElements=e},this.menuButtonKeyDown=t=>{const{key:e}=t,{actionElements:i,activeMenuItemIndex:n,open:r}=this;if(i.length){if(Yu(e)){if(t.preventDefault(),!r){this.toggleOpen();return}const s=i[n];s?s.click():this.toggleOpen(!1)}if(e==="Tab"){this.open=!1;return}if(e==="Escape"){this.toggleOpen(!1),t.preventDefault();return}this.handleActionNavigation(t,e,i)}},this.handleActionNavigation=(t,e,i)=>{if(!this.isValidKey(e,$ct))return;if(t.preventDefault(),!this.open){this.toggleOpen(),(e==="Home"||e==="ArrowDown")&&(this.activeMenuItemIndex=0),(e==="End"||e==="ArrowUp")&&(this.activeMenuItemIndex=i.length-1);return}e==="Home"&&(this.activeMenuItemIndex=0),e==="End"&&(this.activeMenuItemIndex=i.length-1);const n=this.activeMenuItemIndex;e==="ArrowUp"&&(this.activeMenuItemIndex=tP(Math.max(n-1,-1),i.length)),e==="ArrowDown"&&(this.activeMenuItemIndex=tP(n+1,i.length))},this.toggleOpenEnd=()=>{this.setFocus(),this.el.removeEventListener("calcitePopoverOpen",this.toggleOpenEnd)},this.toggleOpen=(t=!this.open)=>{this.el.addEventListener("calcitePopoverOpen",this.toggleOpenEnd),this.open=t},this.expanded=!1,this.flipPlacements=void 0,this.label=void 0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.scale=void 0,this.menuButtonEl=void 0,this.activeMenuItemIndex=-1}componentWillLoad(){Ui(this)}componentDidLoad(){Bi(this)}disconnectedCallback(){this.disconnectMenuButtonEl()}expandedHandler(){this.open=!1,this.setTooltipReferenceElement()}openHandler(t){this.activeMenuItemIndex=this.open?0:-1,this.menuButtonEl&&(this.menuButtonEl.active=t),this.calciteActionMenuOpen.emit(),this.setTooltipReferenceElement()}closeCalciteActionMenuOnClick(t){!Lo(t)||t.composedPath().includes(this.el)||(this.open=!1)}activeMenuItemIndexHandler(){this.updateActions(this.actionElements)}async setFocus(){await Hi(this),qu(this.menuButtonEl)}renderMenuButton(){const{label:t,scale:e,expanded:i}=this;return I("slot",{name:Nw.trigger,onSlotchange:this.setMenuButtonEl},I("calcite-action",{class:hie.defaultTrigger,icon:Tct.menu,ref:this.setDefaultMenuButtonEl,scale:e,text:t,textEnabled:i}))}renderMenuItems(){const{actionElements:t,activeMenuItemIndex:e,open:i,menuId:n,menuButtonEl:r,label:s,placement:o,overlayPositioning:a,flipPlacements:l}=this,u=t[e],h=(u==null?void 0:u.id)||null;return I("calcite-popover",{flipPlacements:l,focusTrapDisabled:!0,label:s,offsetDistance:0,open:i,overlayPositioning:a,placement:o,pointerDisabled:!0,referenceElement:r},I("div",{"aria-activedescendant":h,"aria-labelledby":r==null?void 0:r.id,class:hie.menu,id:n,onClick:this.handleCalciteActionClick,role:"menu",tabIndex:-1},I("slot",{onSlotchange:this.handleDefaultSlotChange})))}render(){return I($m,null,this.renderMenuButton(),this.renderMenuItems(),I("slot",{name:Nw.tooltip,onSlotchange:this.updateTooltip}))}isValidKey(t,e){return!!e.find(i=>i===t)}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],open:["openHandler"],activeMenuItemIndex:["activeMenuItemIndexHandler"]}}static get style(){return kct}},[1,"calcite-action-menu",{expanded:[516],flipPlacements:[16],label:[1],open:[1540],overlayPositioning:[513,"overlay-positioning"],placement:[513],scale:[513],menuButtonEl:[32],activeMenuItemIndex:[32],setFocus:[64]},[[9,"pointerdown","closeCalciteActionMenuOnClick"]]]);function g2(){if(typeof customElements>"u")return;["calcite-action-menu","calcite-action","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-menu":customElements.get(e)||customElements.define(e,Act);break;case"calcite-action":customElements.get(e)||Gh();break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-loader":customElements.get(e)||Bo();break;case"calcite-popover":customElements.get(e)||S1();break}})}g2();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Jy={menuActions:"menu-actions",menuTooltip:"menu-tooltip"},Mct={menu:"ellipsis"},Oct='@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:flex;flex-direction:column;padding:0px;--calcite-action-group-columns:3}:host([columns="1"]){--calcite-action-group-columns:1}:host([columns="2"]){--calcite-action-group-columns:2}:host([columns="3"]){--calcite-action-group-columns:3}:host([columns="4"]){--calcite-action-group-columns:4}:host([columns="5"]){--calcite-action-group-columns:5}:host([columns="6"]){--calcite-action-group-columns:6}:host(:first-child){padding-block-start:0px}:host([layout=horizontal]){flex-direction:row}:host([layout=grid]){display:grid;place-content:stretch;gap:1px;background-color:var(--calcite-ui-background);padding:1px;grid-template-columns:repeat(var(--calcite-action-group-columns), auto)}',Pct=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.setMenuOpen=t=>{this.menuOpen=!!t.target.open},this.expanded=!1,this.layout="vertical",this.columns=void 0,this.menuOpen=!1,this.scale=void 0,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0}expandedHandler(){this.menuOpen=!1}onMessagesChange(){}effectiveLocaleChange(){ur(this,this.effectiveLocale)}connectedCallback(){hn(this),dr(this),ed(this)}disconnectedCallback(){pn(this),hr(this),td(this)}async componentWillLoad(){await cr(this)}renderTooltip(){const{el:t}=this;return Wr(t,Jy.menuTooltip)?I("slot",{name:Jy.menuTooltip,slot:Nw.tooltip}):null}renderMenu(){const{el:t,expanded:e,menuOpen:i,scale:n,layout:r,messages:s}=this;return Wr(t,Jy.menuActions)?I("calcite-action-menu",{expanded:e,flipPlacements:["left","right"],label:s.more,onCalciteActionMenuOpen:this.setMenuOpen,open:i,placement:r==="horizontal"?"bottom-start":"leading-start",scale:n},I("calcite-action",{icon:Mct.menu,scale:n,slot:Nw.trigger,text:s.more,textEnabled:e}),I("slot",{name:Jy.menuActions}),this.renderTooltip()):null}render(){return I($m,null,I("slot",null),this.renderMenu())}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expanded:["expandedHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Oct}},[17,"calcite-action-group",{expanded:[516],layout:[513],columns:[514],menuOpen:[1540,"menu-open"],scale:[513],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32]}]);function qbe(){if(typeof customElements>"u")return;["calcite-action-group","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-group":customElements.get(e)||customElements.define(e,Pct);break;case"calcite-action":customElements.get(e)||Gh();break;case"calcite-action-menu":customElements.get(e)||g2();break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-loader":customElements.get(e)||Bo();break;case"calcite-popover":customElements.get(e)||S1();break}})}qbe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Rct=150,Lct=2,pie=t=>t.reduce((e,i)=>e+i,0)/t.length,Dct=t=>{const e=t==null?void 0:t.length;return{actionWidth:e?pie(t.map(i=>i.clientWidth||0)):0,actionHeight:e?pie(t.map(i=>i.clientHeight||0)):0}},Fct=({width:t,actionWidth:e,layout:i,height:n,actionHeight:r,groupCount:s})=>{const o=i==="horizontal"?t:n,a=i==="horizontal"?e:r;return Math.floor((o-s*Lct)/a)},Nct=({layout:t,actionCount:e,actionWidth:i,width:n,actionHeight:r,height:s,groupCount:o})=>Math.max(e-Fct({width:n,actionWidth:i,layout:t,height:s,actionHeight:r,groupCount:o}),0),FH=t=>Array.from(t.querySelectorAll("calcite-action")).filter(e=>e.closest("calcite-action-menu")?e.slot===Nw.trigger:!0),zct=({actionGroups:t,expanded:e,overflowCount:i})=>{let n=i;t.reverse().forEach(r=>{let s=0;const o=FH(r).reverse();o.forEach(a=>{a.slot===Jy.menuActions&&(a.removeAttribute("slot"),a.textEnabled=e)}),n>0&&o.some(a=>(o.filter(u=>!u.slot).length>1&&o.length>2&&!a.closest("calcite-action-menu")&&(a.textEnabled=!0,a.setAttribute("slot",Jy.menuActions),s++,s>1&&n--),n<1)),t1(r)})},fie={chevronsLeft:"chevrons-left",chevronsRight:"chevrons-right"};function jct(t,e){var i;return t||((i=e.closest("calcite-shell-panel"))==null?void 0:i.position)||"start"}function _5({parent:t,expanded:e}){FH(t).filter(i=>i.slot!==Jy.menuActions).forEach(i=>i.textEnabled=e),t.querySelectorAll("calcite-action-group, calcite-action-menu").forEach(i=>i.expanded=e)}const Vct=({tooltip:t,referenceElement:e,expanded:i,ref:n})=>(t&&(t.referenceElement=!i&&e?e:null),n&&n(e),e),Uct=({expanded:t,intlExpand:e,intlCollapse:i,toggle:n,el:r,position:s,tooltip:o,ref:a,scale:l})=>{const u=Kr(r)==="rtl",h=t?i:e,p=[fie.chevronsLeft,fie.chevronsRight];u&&p.reverse();const f=jct(s,r)==="end",g=f?p[1]:p[0],v=f?p[0]:p[1];return I("calcite-action",{icon:t?g:v,onClick:n,ref:_=>Vct({tooltip:o,referenceElement:_,expanded:t,ref:a}),scale:l,text:h,textEnabled:t})};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Bct={actionGroupBottom:"action-group--bottom"},Px={bottomActions:"bottom-actions",expandTooltip:"expand-tooltip"},Hct="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{pointer-events:auto;display:inline-flex;align-self:stretch;background:transparent;--calcite-action-bar-expanded-max-width:auto}:host([layout=vertical]){flex-direction:column}:host([layout=horizontal]){flex-direction:row}:host([layout=vertical][overflow-actions-disabled]){overflow-y:auto}:host([layout=horizontal][overflow-actions-disabled]){overflow-x:auto}:host([layout=vertical][expanded]){max-inline-size:var(--calcite-action-bar-expanded-max-width)}::slotted(calcite-action-group){border-width:0px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3)}:host([layout=horizontal]) ::slotted(calcite-action-group){border-width:0px;border-inline-end-width:1px;border-style:solid}::slotted(calcite-action-group:last-child){border-block-end-width:0px;border-inline-end-width:0px}.action-group--bottom{flex-grow:1;justify-content:flex-end;padding-block-end:0px;padding-inline-end:0px}",Gct=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteActionBarToggle=ue(this,"calciteActionBarToggle",6),this.mutationObserver=Pi("mutation",()=>{const{el:t,expanded:e}=this;_5({parent:t,expanded:e}),this.conditionallyOverflowActions()}),this.resizeObserver=Pi("resize",t=>this.resizeHandlerEntries(t)),this.actionMenuOpenHandler=t=>{if(t.target.menuOpen){const e=t.composedPath();Array.from(this.el.querySelectorAll("calcite-action-group")).forEach(i=>{e.includes(i)||(i.menuOpen=!1)})}},this.resizeHandlerEntries=t=>{t.forEach(this.resizeHandler)},this.resizeHandler=t=>{const{width:e,height:i}=t.contentRect;this.resize({width:e,height:i})},this.resize=pI(({width:t,height:e})=>{const{el:i,expanded:n,expandDisabled:r,layout:s}=this;if(s==="vertical"&&!e||s==="horizontal"&&!t)return;const o=FH(i),a=r?o.length:o.length+1,l=Array.from(i.querySelectorAll("calcite-action-group")),u=Wr(i,Px.bottomActions)||!r?l.length+1:l.length,{actionHeight:h,actionWidth:p}=Dct(o),f=Nct({layout:s,actionCount:a,actionHeight:h,actionWidth:p,height:e,width:t,groupCount:u});zct({actionGroups:l,expanded:n,overflowCount:f})},Rct),this.conditionallyOverflowActions=()=>{this.overflowActionsDisabled||this.overflowActions()},this.toggleExpand=()=>{this.expanded=!this.expanded,this.calciteActionBarToggle.emit()},this.setExpandToggleRef=t=>{this.expandToggleEl=t},this.expandDisabled=!1,this.expanded=!1,this.layout="vertical",this.overflowActionsDisabled=!1,this.position=void 0,this.scale=void 0,this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale=void 0,this.defaultMessages=void 0}expandHandler(){this.conditionallyOverflowActions()}expandedHandler(t){_5({parent:this.el,expanded:t}),this.conditionallyOverflowActions()}overflowDisabledHandler(t){t?this.resizeObserver.disconnect():this.resizeObserver.observe(this.el)}onMessagesChange(){}effectiveLocaleChange(){ur(this,this.effectiveLocale)}componentDidLoad(){Bi(this),this.conditionallyOverflowActions()}connectedCallback(){var i,n;const{el:t,expanded:e}=this;hn(this),dr(this),_5({parent:t,expanded:e}),(i=this.mutationObserver)==null||i.observe(t,{childList:!0,subtree:!0}),this.overflowActionsDisabled||(n=this.resizeObserver)==null||n.observe(t),this.conditionallyOverflowActions(),ed(this)}async componentWillLoad(){Ui(this),await cr(this)}disconnectedCallback(){var t,e;(t=this.mutationObserver)==null||t.disconnect(),(e=this.resizeObserver)==null||e.disconnect(),td(this),pn(this),hr(this)}async overflowActions(){this.resize({width:this.el.clientWidth,height:this.el.clientHeight})}async setFocus(){var t;await Hi(this),(t=this.el)==null||t.focus()}renderBottomActionGroup(){const{expanded:t,expandDisabled:e,el:i,position:n,toggleExpand:r,scale:s,layout:o,messages:a}=this,l=Wr(i,Px.expandTooltip),u=e?null:I(Uct,{el:i,expanded:t,intlCollapse:a.collapse,intlExpand:a.expand,position:n,ref:this.setExpandToggleRef,scale:s,toggle:r,tooltip:l});return Wr(i,Px.bottomActions)||u?I("calcite-action-group",{class:Bct.actionGroupBottom,layout:o,scale:s},I("slot",{name:Px.bottomActions}),I("slot",{name:Px.expandTooltip}),u):null}render(){return I(Ft,{onCalciteActionMenuOpen:this.actionMenuOpenHandler},I("slot",null),this.renderBottomActionGroup())}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{expandDisabled:["expandHandler"],expanded:["expandedHandler"],overflowActionsDisabled:["overflowDisabledHandler"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Hct}},[17,"calcite-action-bar",{expandDisabled:[516,"expand-disabled"],expanded:[1540],layout:[513],overflowActionsDisabled:[516,"overflow-actions-disabled"],position:[513],scale:[513],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],overflowActions:[64],setFocus:[64]}]);function qct(){if(typeof customElements>"u")return;["calcite-action-bar","calcite-action","calcite-action-group","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover"].forEach(e=>{switch(e){case"calcite-action-bar":customElements.get(e)||customElements.define(e,Gct);break;case"calcite-action":customElements.get(e)||Gh();break;case"calcite-action-group":customElements.get(e)||qbe();break;case"calcite-action-menu":customElements.get(e)||g2();break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-loader":customElements.get(e)||Bo();break;case"calcite-popover":customElements.get(e)||S1();break}})}qct();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Tv={main:"main",content:"content",contentBehind:"content--behind",footer:"footer",positionedSlotWrapper:"positioned-slot-wrapper",container:"container"},ug={centerRow:"center-row",panelStart:"panel-start",panelEnd:"panel-end",header:"header",footer:"footer",alerts:"alerts",modals:"modals"},Wct="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:absolute;inset:0px;display:flex;block-size:100%;inline-size:100%;flex-direction:column;overflow:hidden;--calcite-shell-tip-spacing:26vw}.main{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;flex-direction:row;justify-content:space-between;overflow:hidden}.content{display:flex;block-size:100%;inline-size:100%;flex-direction:column;flex-wrap:nowrap;overflow:auto}.content ::slotted(calcite-shell-center-row),.content ::slotted(calcite-panel),.content ::slotted(calcite-flow){flex:1 1 auto;align-self:stretch;max-block-size:unset}.content--behind{position:absolute;inset:0px;border-width:0px;z-index:calc(1 - 1);display:initial}::slotted(calcite-shell-center-row){inline-size:unset}::slotted(.header .heading){font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-normal)}slot[name=panel-end]::slotted(calcite-shell-panel){margin-inline-start:auto}::slotted(calcite-shell-panel),::slotted(calcite-shell-center-row){position:relative;z-index:1}::slotted(calcite-panel),::slotted(calcite-flow){border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-ui-border-3)}slot[name=center-row]::slotted(calcite-shell-center-row:not([detached])){border-inline-start-width:1px;border-inline-end-width:1px;border-color:var(--calcite-ui-border-3)}::slotted(calcite-tip-manager){position:absolute;z-index:500;box-sizing:border-box}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}::slotted(calcite-tip-manager){animation:in-up var(--calcite-internal-animation-timing-slow) ease-in-out;border-radius:0.25rem;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);inset-block-end:0.5rem;inset-inline:var(--calcite-shell-tip-spacing)}.position-wrapper{position:absolute;pointer-events:none;inset:0}",Jct=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.handleHeaderSlotChange=t=>{this.hasHeader=!!r_(t)},this.handleFooterSlotChange=t=>{this.hasFooter=!!r_(t)},this.handleAlertsSlotChange=t=>{var e;this.hasAlerts=!!r_(t),(e=F4(t))==null||e.map(i=>{i.nodeName==="CALCITE-ALERT"&&(i.slottedInShell=!0)})},this.handleModalsSlotChange=t=>{var e;this.hasModals=!!r_(t),(e=F4(t))==null||e.map(i=>{i.nodeName==="CALCITE-MODAL"&&(i.slottedInShell=!0)})},this.contentBehind=!1,this.hasHeader=!1,this.hasFooter=!1,this.hasAlerts=!1,this.hasModals=!1}connectedCallback(){ed(this)}disconnectedCallback(){td(this)}renderHeader(){return I("div",{hidden:!this.hasHeader},I("slot",{key:"header",name:ug.header,onSlotchange:this.handleHeaderSlotChange}))}renderFooter(){return I("div",{class:Tv.footer,hidden:!this.hasFooter,key:"footer"},I("slot",{name:ug.footer,onSlotchange:this.handleFooterSlotChange}))}renderAlerts(){return I("div",{hidden:!this.hasAlerts},I("slot",{key:"alerts",name:ug.alerts,onSlotchange:this.handleAlertsSlotChange}))}renderModals(){return I("div",{hidden:!this.hasModals},I("slot",{key:"modals",name:ug.modals,onSlotchange:this.handleModalsSlotChange}))}renderContent(){const t=I("slot",{key:"default-slot"}),e=I("slot",{key:"center-row-slot",name:ug.centerRow}),i="content-container";return this.contentBehind?[I("div",{class:{[Tv.content]:!0,[Tv.contentBehind]:!0},key:i},t),e]:[I("div",{class:Tv.content,key:i},t,e)]}renderMain(){return I("div",{class:Tv.main},I("slot",{name:ug.panelStart}),this.renderContent(),I("slot",{name:ug.panelEnd}))}renderPositionedSlots(){return I("div",{class:Tv.positionedSlotWrapper},this.renderAlerts(),this.renderModals())}render(){return I($m,null,this.renderHeader(),this.renderMain(),this.renderFooter(),this.renderPositionedSlots())}get el(){return this}static get style(){return Wct}},[1,"calcite-shell",{contentBehind:[516,"content-behind"],hasHeader:[32],hasFooter:[32],hasAlerts:[32],hasModals:[32]}]);function Yct(){if(typeof customElements>"u")return;["calcite-shell"].forEach(e=>{switch(e){case"calcite-shell":customElements.get(e)||customElements.define(e,Jct);break}})}Yct();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const NH=(t,e,i)=>Math.max(e,Math.min(t,i)),g_=t=>{const e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const kv={container:"container",content:"content",contentHeader:"content__header",contentBody:"content__body",contentDetached:"content--detached",separator:"separator"},w5={actionBar:"action-bar",header:"header"},Zct="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{pointer-events:none;display:flex;flex:0 1 auto;align-items:stretch;--calcite-shell-panel-detached-max-height:unset}:host([width-scale=s]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 12vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 300px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 150px)}:host([width-scale=m]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 20vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 420px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 240px)}:host([width-scale=l]) .content{--calcite-shell-panel-width-internal:var(--calcite-shell-panel-width, 45vw);--calcite-shell-panel-max-width-internal:var(--calcite-shell-panel-max-width, 680px);--calcite-shell-panel-min-width-internal:var(--calcite-shell-panel-min-width, 340px)}:host([detached-height-scale=s]) .content--detached{--calcite-shell-panel-detached-max-height-internal:var(--calcite-shell-panel-detached-max-height, 40vh)}:host([detached-height-scale=m]) .content--detached{--calcite-shell-panel-detached-max-height-internal:var(--calcite-shell-panel-detached-max-height, 60vh)}:host([detached-height-scale=l]) .content--detached{--calcite-shell-panel-detached-max-height-internal:var(--calcite-shell-panel-detached-max-height, 80vh)}.container{pointer-events:none;box-sizing:border-box;display:flex;flex:1 1 auto;align-items:stretch;background-color:transparent;font-size:var(--calcite-font-size--1);color:var(--calcite-ui-text-2)}.container *{box-sizing:border-box}:host(:hover) .separator:not(:hover):not(:focus),:host(:focus-within) .separator:not(:hover):not(:focus){opacity:1;background-color:var(--calcite-ui-border-3)}.separator{pointer-events:auto;position:absolute;inset-block:0px;display:flex;block-size:100%;inline-size:0.125rem;background-color:transparent;opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;cursor:col-resize;outline:none}.separator:hover{opacity:1;background-color:var(--calcite-ui-border-2)}.separator:focus{background-color:var(--calcite-ui-brand);opacity:1}:host([position=start]) .separator{inset-inline-end:-2px}:host([position=end]) .separator{inset-inline-start:-2px}::slotted(calcite-panel),::slotted(calcite-flow){block-size:100%;inline-size:100%;flex:1 1 auto;max-block-size:unset;max-inline-size:unset}::slotted(.calcite-match-height){display:flex;flex:1 1 auto;overflow:hidden}.content{pointer-events:auto;display:flex;flex-direction:column;flex-wrap:nowrap;align-items:stretch;align-self:stretch;background-color:var(--calcite-ui-background);padding:0px;inline-size:var(--calcite-shell-panel-width-internal);max-inline-size:var(--calcite-shell-panel-max-width-internal);min-inline-size:var(--calcite-shell-panel-min-width-internal);transition:max-block-size var(--calcite-animation-timing), max-inline-size var(--calcite-animation-timing)}.content__header{display:flex;flex:0 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch}.content__body{display:flex;flex:1 1 auto;flex-direction:column;overflow:hidden}.content--detached{margin-inline:0.5rem;margin-block:0.5rem auto;block-size:auto;overflow:hidden;border-radius:0.25rem;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);max-block-size:var(--calcite-shell-panel-detached-max-height-internal)}.content--detached ::slotted(calcite-panel),.content--detached ::slotted(calcite-flow){max-block-size:unset}:host([position=start]) .content--detached ::slotted(calcite-panel),:host([position=start]) .content--detached ::slotted(calcite-flow),:host([position=end]) .content--detached ::slotted(calcite-panel),:host([position=end]) .content--detached ::slotted(calcite-flow){border-style:none}.content[hidden]{display:none}slot[name=action-bar]::slotted(calcite-action-bar),.content ::slotted(calcite-flow),.content ::slotted(calcite-panel:not([closed])){border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3)}:host([position=start]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=start]) .content ::slotted(calcite-flow),:host([position=start]) .content ::slotted(calcite-panel){border-inline-start:none}:host([position=end]) slot[name=action-bar]::slotted(calcite-action-bar),:host([position=end]) .content ::slotted(calcite-flow),:host([position=end]) .content ::slotted(calcite-panel){border-inline-end:none}",Kct=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.initialContentWidth=null,this.initialClientX=null,this.contentWidthMax=null,this.contentWidthMin=null,this.step=1,this.stepMultiplier=10,this.storeContentEl=t=>{this.contentEl=t},this.getKeyAdjustedWidth=t=>{const{key:e}=t,{el:i,step:n,stepMultiplier:r,contentWidthMin:s,contentWidthMax:o,initialContentWidth:a,position:l}=this,u=n*r;["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown"].indexOf(e)>-1&&t.preventDefault();const p=Kr(i),f=["ArrowLeft","ArrowRight"],g=p==="rtl"&&f.includes(e)?-1:1;if(e==="ArrowUp"||(l==="end"?e===f[0]:e===f[1])){const _=t.shiftKey?u:n;return a+g*_}if(e==="ArrowDown"||(l==="end"?e===f[1]:e===f[0])){const _=t.shiftKey?u:n;return a-g*_}return typeof s=="number"&&e==="Home"?s:typeof o=="number"&&e==="End"?o:e==="PageDown"?a-u:e==="PageUp"?a+u:null},this.separatorKeyDown=t=>{this.setInitialContentWidth();const e=this.getKeyAdjustedWidth(t);typeof e=="number"&&this.setContentWidth(e)},this.separatorPointerMove=t=>{t.preventDefault();const{el:e,initialContentWidth:i,position:n,initialClientX:r}=this,s=t.clientX-r,a=Kr(e)==="rtl"?-1:1,l=n==="end"?-a*s:a*s,u=i+l;this.setContentWidth(u)},this.separatorPointerUp=t=>{Lo(t)&&(t.preventDefault(),document.removeEventListener("pointerup",this.separatorPointerUp),document.removeEventListener("pointermove",this.separatorPointerMove))},this.setInitialContentWidth=()=>{var t;this.initialContentWidth=(t=this.contentEl)==null?void 0:t.getBoundingClientRect().width},this.separatorPointerDown=t=>{if(!Lo(t))return;t.preventDefault();const{separatorEl:e}=this;e&&document.activeElement!==e&&e.focus(),this.setInitialContentWidth(),this.initialClientX=t.clientX,document.addEventListener("pointerup",this.separatorPointerUp),document.addEventListener("pointermove",this.separatorPointerMove)},this.connectSeparator=t=>{this.disconnectSeparator(),this.separatorEl=t,t.addEventListener("pointerdown",this.separatorPointerDown)},this.disconnectSeparator=()=>{var t;(t=this.separatorEl)==null||t.removeEventListener("pointerdown",this.separatorPointerDown)},this.collapsed=!1,this.detached=!1,this.detachedHeightScale="l",this.widthScale="m",this.position=void 0,this.resizable=!1,this.messages=void 0,this.messageOverrides=void 0,this.contentWidth=null,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}connectedCallback(){ed(this),hn(this),dr(this)}async componentWillLoad(){await cr(this)}disconnectedCallback(){td(this),this.disconnectSeparator(),pn(this),hr(this)}componentDidLoad(){this.updateAriaValues()}effectiveLocaleChange(){ur(this,this.effectiveLocale)}renderHeader(){const{el:t}=this;return Wr(t,w5.header)?I("div",{class:kv.contentHeader,key:"header"},I("slot",{name:w5.header})):null}render(){const{collapsed:t,detached:e,position:i,initialContentWidth:n,contentWidth:r,contentWidthMax:s,contentWidthMin:o,resizable:a}=this,l=!e&&a,u=I("div",{class:{[kv.content]:!0,[kv.contentDetached]:e},hidden:t,key:"content",ref:this.storeContentEl,style:l&&r?{width:`${r}px`}:null},this.renderHeader(),I("div",{class:kv.contentBody},I("slot",null))),h=l?I("div",{"aria-label":this.messages.resize,"aria-orientation":"horizontal","aria-valuemax":s,"aria-valuemin":o,"aria-valuenow":r??n,class:kv.separator,key:"separator",onKeyDown:this.separatorKeyDown,ref:this.connectSeparator,role:"separator",tabIndex:0,"touch-action":"none"}):null,f=[I("slot",{key:"action-bar",name:w5.actionBar}),u,h];return i==="end"&&f.reverse(),I("div",{class:{[kv.container]:!0}},f)}setContentWidth(t){const{contentWidthMax:e,contentWidthMin:i}=this,n=Math.round(t);this.contentWidth=typeof e=="number"&&typeof i=="number"?NH(n,i,e):n}updateAriaValues(){const{contentEl:t}=this,e=t&&getComputedStyle(t);if(!e)return;const i=parseInt(e.getPropertyValue("max-width"),10),n=parseInt(e.getPropertyValue("min-width"),10),r=parseInt(e.getPropertyValue("width"),10);typeof r=="number"&&!isNaN(r)&&(this.initialContentWidth=r),typeof i=="number"&&!isNaN(i)&&(this.contentWidthMax=i),typeof n=="number"&&!isNaN(n)&&(this.contentWidthMin=n),t1(this)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Zct}},[1,"calcite-shell-panel",{collapsed:[516],detached:[516],detachedHeightScale:[513,"detached-height-scale"],widthScale:[513,"width-scale"],position:[513],resizable:[516],messages:[1040],messageOverrides:[1040],contentWidth:[32],defaultMessages:[32],effectiveLocale:[32]}]);function Xct(){if(typeof customElements>"u")return;["calcite-shell-panel"].forEach(e=>{switch(e){case"calcite-shell-panel":customElements.get(e)||customElements.define(e,Kct);break}})}Xct();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const mie={scrim:"scrim",content:"content"},Qct="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:absolute;inset:0px;z-index:700;display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-scrim-background-internal))}.content{padding:1rem}",eut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}effectiveLocaleChange(){ur(this,this.effectiveLocale)}connectedCallback(){hn(this),dr(this)}async componentWillLoad(){await cr(this)}disconnectedCallback(){pn(this),hr(this)}render(){const{el:t,loading:e,messages:i}=this,n=t.innerHTML.trim().length>0,r=e?I("calcite-loader",{label:i.loading}):null,s=n?I("div",{class:mie.content},I("slot",null)):null;return I("div",{class:mie.scrim},r,s)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Qct}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32]}]);function fL(){if(typeof customElements>"u")return;["calcite-scrim","calcite-loader"].forEach(e=>{switch(e){case"calcite-scrim":customElements.get(e)||customElements.define(e,eut);break;case"calcite-loader":customElements.get(e)||Bo();break}})}fL();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const as={backButton:"back-button",container:"container",header:"header",heading:"heading",summary:"summary",description:"description",headerContent:"header-content",headerActions:"header-actions",headerActionsEnd:"header-actions--end",headerActionsStart:"header-actions--start",contentWrapper:"content-wrapper",contentContainer:"content-container",contentHeight:"content-height",fabContainer:"fab-container",footer:"footer"},gie={close:"x",menu:"ellipsis",backLeft:"chevron-left",backRight:"chevron-right"},So={headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerActions:"footer-actions"},tut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{position:relative;display:flex;block-size:100%;inline-size:100%;flex:1 1 auto;overflow:hidden;--calcite-min-header-height:calc(var(--calcite-icon-size) * 3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-ui-text-2);color:var(--calcite-ui-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}.container{margin:0px;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;background-color:var(--calcite-ui-background);padding:0px;transition:max-block-size var(--calcite-animation-timing), inline-size var(--calcite-animation-timing)}.container[hidden]{display:none}.header{border-block-end:1px solid;position:sticky;inset-block-start:0px;z-index:400;inline-size:100%;align-items:stretch;justify-content:flex-start;background-color:var(--calcite-ui-foreground-1);border-block-end-color:var(--calcite-ui-border-3);flex:0 0 auto}.header-content{display:flex;flex-direction:column;overflow:hidden;padding-inline:0.75rem;padding-block:0.875rem;margin-inline-end:auto}.header-content .heading,.header-content .description{display:block;overflow-wrap:break-word;padding:0px}.header-content .heading{margin-inline:0px;margin-block:0px 0.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;font-weight:var(--calcite-font-weight-medium)}.header-content .heading:only-child{margin-block-end:0px}.header-content .description{font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-ui-text-2)}.back-button{border-width:0px;border-style:solid;border-color:var(--calcite-ui-border-3);border-inline-end-width:1px}.header-actions{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:stretch}.header-actions--end{margin-inline-start:auto}.content-wrapper{overflow:auto}.content-height{block-size:100%}.content-container{display:flex;flex:1 1 auto;flex-direction:column;flex-wrap:nowrap;align-items:stretch;background-color:var(--calcite-ui-background)}.footer{border-block-start:1px solid;position:sticky;inset-block-end:0px;display:flex;inline-size:100%;justify-content:space-evenly;background-color:var(--calcite-ui-foreground-1);border-block-start-color:var(--calcite-ui-border-3);flex:0 0 auto;min-block-size:3rem;padding:0.5rem}.fab-container{position:sticky;inset-block-end:0px;z-index:300;margin-block:0px;margin-inline:auto;display:block;padding:0.5rem;inset-inline:0;inline-size:-moz-fit-content;inline-size:fit-content}[hidden]{display:none}",iut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calcitePanelClose=ue(this,"calcitePanelClose",6),this.calcitePanelScroll=ue(this,"calcitePanelScroll",6),this.resizeObserver=Pi("resize",()=>this.resizeHandler()),this.resizeHandler=()=>{const{panelScrollEl:t}=this;!t||typeof t.scrollHeight!="number"||typeof t.offsetHeight!="number"||(t.tabIndex=t.scrollHeight>t.offsetHeight?0:-1)},this.setContainerRef=t=>{this.containerEl=t},this.setCloseRef=t=>{this.closeButtonEl=t},this.setBackRef=t=>{this.backButtonEl=t},this.panelKeyDownHandler=t=>{this.closable&&t.key==="Escape"&&!t.defaultPrevented&&(this.close(),t.preventDefault())},this.close=()=>{this.closed=!0,this.calcitePanelClose.emit()},this.panelScrollHandler=()=>{this.calcitePanelScroll.emit()},this.handleHeaderActionsStartSlotChange=t=>{const e=t.target.assignedElements({flatten:!0});this.hasStartActions=!!e.length},this.handleHeaderActionsEndSlotChange=t=>{const e=t.target.assignedElements({flatten:!0});this.hasEndActions=!!e.length},this.handleHeaderMenuActionsSlotChange=t=>{const e=t.target.assignedElements({flatten:!0});this.hasMenuItems=!!e.length},this.handleHeaderContentSlotChange=t=>{const e=t.target.assignedElements({flatten:!0});this.hasHeaderContent=!!e.length},this.handleFooterSlotChange=t=>{const e=t.target.assignedElements({flatten:!0});this.hasFooterContent=!!e.length},this.handleFooterActionsSlotChange=t=>{const e=t.target.assignedElements({flatten:!0});this.hasFooterActions=!!e.length},this.handleFabSlotChange=t=>{const e=t.target.assignedElements({flatten:!0});this.hasFab=!!e.length},this.setPanelScrollEl=t=>{var e,i;this.panelScrollEl=t,(e=this.resizeObserver)==null||e.disconnect(),t&&((i=this.resizeObserver)==null||i.observe(t),this.resizeHandler())},this.closed=!1,this.disabled=!1,this.closable=!1,this.headingLevel=void 0,this.loading=!1,this.heading=void 0,this.description=void 0,this.menuOpen=!1,this.messageOverrides=void 0,this.messages=void 0,this.hasStartActions=!1,this.hasEndActions=!1,this.hasMenuItems=!1,this.hasHeaderContent=!1,this.hasFooterContent=!1,this.hasFooterActions=!1,this.hasFab=!1,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}connectedCallback(){hn(this),dr(this)}async componentWillLoad(){Ui(this),await cr(this)}componentDidLoad(){Bi(this)}componentDidRender(){lr(this)}disconnectedCallback(){var t;pn(this),hr(this),(t=this.resizeObserver)==null||t.disconnect()}effectiveLocaleChange(){ur(this,this.effectiveLocale)}async setFocus(){await Hi(this),nB(this.containerEl)}async scrollContentTo(t){var e;(e=this.panelScrollEl)==null||e.scrollTo(t)}renderHeaderContent(){const{heading:t,headingLevel:e,description:i,hasHeaderContent:n}=this,r=t?I(m2,{class:as.heading,level:e},t):null,s=i?I("span",{class:as.description},i):null;return!n&&(r||s)?I("div",{class:as.headerContent,key:"header-content"},r,s):null}renderHeaderSlottedContent(){return I("div",{class:as.headerContent,hidden:!this.hasHeaderContent,key:"slotted-header-content"},I("slot",{name:So.headerContent,onSlotchange:this.handleHeaderContentSlotChange}))}renderHeaderStartActions(){const{hasStartActions:t}=this;return I("div",{class:{[as.headerActionsStart]:!0,[as.headerActions]:!0},hidden:!t,key:"header-actions-start"},I("slot",{name:So.headerActionsStart,onSlotchange:this.handleHeaderActionsStartSlotChange}))}renderHeaderActionsEnd(){const{close:t,hasEndActions:e,messages:i,closable:n}=this,r=i.close,s=n?I("calcite-action",{"aria-label":r,icon:gie.close,onClick:t,ref:this.setCloseRef,text:r}):null,o=I("slot",{name:So.headerActionsEnd,onSlotchange:this.handleHeaderActionsEndSlotChange}),a=e||s;return I("div",{class:{[as.headerActionsEnd]:!0,[as.headerActions]:!0},hidden:!a,key:"header-actions-end"},o,s)}renderMenu(){const{hasMenuItems:t,messages:e,menuOpen:i}=this;return I("calcite-action-menu",{flipPlacements:["top","bottom"],hidden:!t,key:"menu",label:e.options,open:i,placement:"bottom-end"},I("calcite-action",{icon:gie.menu,slot:Nw.trigger,text:e.options}),I("slot",{name:So.headerMenuActions,onSlotchange:this.handleHeaderMenuActionsSlotChange}))}renderHeaderNode(){const{hasHeaderContent:t,hasStartActions:e,hasEndActions:i,closable:n,hasMenuItems:r}=this,s=this.renderHeaderContent(),o=t||s||e||i||n||r;return I("header",{class:as.header,hidden:!o},this.renderHeaderStartActions(),this.renderHeaderSlottedContent(),s,this.renderHeaderActionsEnd(),this.renderMenu())}renderFooterNode(){const{hasFooterContent:t,hasFooterActions:e}=this,i=t||e;return I("footer",{class:as.footer,hidden:!i},I("slot",{key:"footer-slot",name:So.footer,onSlotchange:this.handleFooterSlotChange}),I("slot",{key:"footer-actions-slot",name:So.footerActions,onSlotchange:this.handleFooterActionsSlotChange}))}renderContent(){const{hasFab:t}=this,e=I("slot",{key:"default-slot"}),i=t?I("section",{class:as.contentContainer},e):e;return I("div",{class:{[as.contentWrapper]:!0,[as.contentContainer]:!t,[as.contentHeight]:t},onScroll:this.panelScrollHandler,ref:this.setPanelScrollEl},i,this.renderFab())}renderFab(){return I("div",{class:as.fabContainer,hidden:!this.hasFab},I("slot",{name:So.fab,onSlotchange:this.handleFabSlotChange}))}render(){const{loading:t,panelKeyDownHandler:e,closed:i,closable:n}=this,r=I("article",{"aria-busy":Vi(t),class:as.container,hidden:i,onKeyDown:e,ref:this.setContainerRef,tabIndex:n?0:-1},this.renderHeaderNode(),this.renderContent(),this.renderFooterNode());return I($m,null,t?I("calcite-scrim",{loading:t}):null,r)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return tut}},[1,"calcite-panel",{closed:[1540],disabled:[516],closable:[1540],headingLevel:[514,"heading-level"],loading:[516],heading:[1],description:[1],menuOpen:[516,"menu-open"],messageOverrides:[1040],messages:[1040],hasStartActions:[32],hasEndActions:[32],hasMenuItems:[32],hasHeaderContent:[32],hasFooterContent:[32],hasFooterActions:[32],hasFab:[32],defaultMessages:[32],effectiveLocale:[32],setFocus:[64],scrollContentTo:[64]}]);function Wbe(){if(typeof customElements>"u")return;["calcite-panel","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-popover","calcite-scrim"].forEach(e=>{switch(e){case"calcite-panel":customElements.get(e)||customElements.define(e,iut);break;case"calcite-action":customElements.get(e)||Gh();break;case"calcite-action-menu":customElements.get(e)||g2();break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-loader":customElements.get(e)||Bo();break;case"calcite-popover":customElements.get(e)||S1();break;case"calcite-scrim":customElements.get(e)||fL();break}})}Wbe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */var zw;(function(t){t.brand="lightbulb",t.danger="exclamationMarkTriangle",t.info="information",t.success="checkCircle",t.warning="exclamationMarkTriangle"})(zw||(zw={}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const mp={title:"title",close:"close",imageContainer:"image-container",chipIcon:"chip-icon",closeIcon:"close-icon",contentSlotted:"content--slotted",container:"container",imageSlotted:"image--slotted"},nut={image:"image"},rut={close:"x"},sut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([scale=s]){block-size:1.5rem;font-size:var(--calcite-font-size--2);--calcite-chip-spacing-unit-l:0.5rem;--calcite-chip-spacing-unit-s:0.25rem}:host([scale=s]) .image-container{block-size:1.25rem;inline-size:1.25rem;padding-inline-start:0.125rem}:host([scale=m]){block-size:2rem;font-size:var(--calcite-font-size--1);--calcite-chip-spacing-unit-l:0.75rem;--calcite-chip-spacing-unit-s:calc(0.75rem / 2)}:host([scale=m]) .image-container{block-size:1.5rem;inline-size:1.5rem;padding-inline-start:0.25rem}:host([scale=l]){block-size:2.75rem;font-size:var(--calcite-font-size-0);--calcite-chip-spacing-unit-l:1rem;--calcite-chip-spacing-unit-s:0.5rem}:host([scale=l]) .image-container{block-size:2rem;inline-size:2rem;padding-inline-start:0.5rem}:host{box-sizing:border-box;display:inline-flex;cursor:default;align-items:center;border-radius:9999px;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-1);font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}.container{display:inline-flex;block-size:100%;max-inline-size:100%;align-items:center}.title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-block:0}.content--slotted .title{padding-inline:var(--calcite-chip-spacing-unit-l)}:host([closable][icon]) .container:not(.content--slotted) .title{padding-inline:0 var(--calcite-chip-spacing-unit-s)}:host(:not([closable])) .container:not(.content--slotted) .chip-icon{margin-inline:auto}.container:not(.image--slotted) .image-container{display:none}:host([scale=s][closable]) .container:not(.content--slotted) .image-container{margin-inline-end:0.125rem}:host([scale=m][closable]) .container:not(.content--slotted) .image-container{margin-inline-end:0.25rem}:host([scale=l][closable]) .container:not(.content--slotted) .image-container{margin-inline-end:0.5rem}:host([scale=s]:not([closable])) .container:not(.content--slotted){block-size:1.5rem;inline-size:1.5rem}:host([scale=s]:not([closable])) .container:not(.content--slotted) .image-container{padding-inline:0.125rem}:host([scale=m]:not([closable])) .container:not(.content--slotted){block-size:2rem;inline-size:2rem}:host([scale=m]:not([closable])) .container:not(.content--slotted) .image-container{padding-inline:0.25rem}:host([scale=l]:not([closable])) .container:not(.content--slotted){block-size:2.75rem;inline-size:2.75rem}:host([scale=l]:not([closable])) .container:not(.content--slotted) .image-container{padding-inline:calc(0.75rem / 2)}:host([closable]) .content--slotted .title{padding-inline:var(--calcite-chip-spacing-unit-l) var(--calcite-chip-spacing-unit-s)}:host([scale=s]) button{inline-size:1rem;block-size:1rem;margin-inline-end:0.125rem}:host([scale=m]) button{inline-size:1.5rem;block-size:1.5rem;margin-inline-end:0.25rem}:host([scale=l]) button{inline-size:2rem;block-size:2rem;margin-inline-end:0.5rem}button{margin:0px;cursor:pointer;align-items:center;border-style:none;background-color:transparent;color:var(--calcite-ui-text-1);outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;-webkit-appearance:none;display:flex;border-radius:50%;padding-inline:var(--calcite-chip-spacing-unit-s);color:inherit;align-content:center;justify-content:center;--calcite-chip-transparent-hover:var(--calcite-button-transparent-hover);--calcite-chip-transparent-press:var(--calcite-button-transparent-press)}button:hover{background-color:var(--calcite-chip-transparent-hover)}button:focus{background-color:var(--calcite-chip-transparent-hover);outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}button:active{background-color:var(--calcite-chip-transparent-press)}.image-container{display:inline-flex;overflow:hidden}slot[name=image]::slotted(*){display:flex;block-size:100%;inline-size:100%;overflow:hidden;border-radius:50%}.chip-icon{position:relative;margin-block:0px;display:inline-flex;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);margin-inline-end:0;margin-inline-start:var(--calcite-chip-spacing-unit-l)}:host([kind=neutral]){border-color:transparent;background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1)}:host([kind=neutral]) button,:host([kind=neutral]) .close-icon{color:var(--calcite-ui-text-3)}:host([kind=neutral]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-ui-text-3))}:host([kind=inverse]){border-color:transparent;background-color:var(--calcite-ui-inverse);color:var(--calcite-ui-text-inverse)}:host([kind=inverse]) button,:host([kind=inverse]) .close-icon{color:var(--calcite-ui-text-inverse)}:host([kind=inverse]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-ui-text-inverse))}:host([kind=brand]){border-color:transparent;background-color:var(--calcite-ui-brand);color:var(--calcite-ui-text-inverse)}:host([kind=brand]) button,:host([kind=brand]) .close-icon{color:var(--calcite-ui-text-inverse)}:host([kind=brand]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-ui-text-inverse))}:host([appearance=outline-fill]),:host([appearance=outline]){background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-1)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) .close-icon,:host([appearance=outline]) button,:host([appearance=outline]) .close-icon{color:var(--calcite-ui-text-3)}:host([appearance=outline-fill]) .chip-icon,:host([appearance=outline]) .chip-icon{color:var(--calcite-ui-icon-color, var(--calcite-ui-text-3))}:host([appearance=outline-fill]){background-color:var(--calcite-ui-foreground-1)}:host([appearance=outline]){background-color:transparent}:host([kind=neutral][appearance=outline-fill]),:host([kind=neutral][appearance=outline]){border-color:var(--calcite-ui-border-1)}:host([kind=inverse][appearance=outline-fill]),:host([kind=inverse][appearance=outline]){border-color:var(--calcite-ui-border-inverse)}:host([kind=brand][appearance=outline-fill]),:host([kind=brand][appearance=outline]){border-color:var(--calcite-ui-brand)}:host([kind=brand][appearance=solid]) button,:host([kind=inverse][appearance=solid]) button{outline-color:var(--calcite-ui-text-inverse)}:host([closed]){display:none}",out=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteChipClose=ue(this,"calciteChipClose",6),this.closeClickHandler=t=>{t.preventDefault(),this.calciteChipClose.emit(),this.closed=!0},this.handleSlotImageChange=t=>{this.hasImage=r_(t)},this.mutationObserver=Pi("mutation",()=>this.updateHasContent()),this.guid=Ts(),this.appearance="solid",this.kind="neutral",this.closable=!1,this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.value=void 0,this.closed=!1,this.messageOverrides=void 0,this.messages=void 0,this.defaultMessages=void 0,this.effectiveLocale=void 0,this.hasContent=!1,this.hasImage=!1}onMessagesChange(){}effectiveLocaleChange(){ur(this,this.effectiveLocale)}connectedCallback(){ed(this),hn(this),dr(this),this.setupTextContentObserver()}componentDidLoad(){Bi(this)}disconnectedCallback(){td(this),pn(this),hr(this)}async componentWillLoad(){Ui(this),await cr(this),this.updateHasContent()}async setFocus(){var t;await Hi(this),(t=this.closeButton)==null||t.focus()}updateHasContent(){var e,i;const t=this.el.textContent.trim().length>0||this.el.childNodes.length>0;this.hasContent=this.el.childNodes.length>0&&((e=this.el.childNodes[0])==null?void 0:e.nodeName)==="#text"?((i=this.el.textContent)==null?void 0:i.trim().length)>0:t}setupTextContentObserver(){var t;(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0})}renderChipImage(){return I("div",{class:mp.imageContainer,key:"image"},I("slot",{name:nut.image,onSlotchange:this.handleSlotImageChange}))}render(){const t=I("calcite-icon",{class:mp.chipIcon,flipRtl:this.iconFlipRtl,icon:this.icon,scale:this.scale==="l"?"m":"s"}),e=I("button",{"aria-describedby":this.guid,"aria-label":this.messages.dismissLabel,class:mp.close,onClick:this.closeClickHandler,ref:i=>this.closeButton=i},I("calcite-icon",{class:mp.closeIcon,icon:rut.close,scale:this.scale==="l"?"m":"s"}));return I("div",{class:{[mp.container]:!0,[mp.contentSlotted]:this.hasContent,[mp.imageSlotted]:this.hasImage}},this.renderChipImage(),this.icon?t:null,I("span",{class:mp.title,id:this.guid},I("slot",null)),this.closable?e:null)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return sut}},[1,"calcite-chip",{appearance:[513],kind:[513],closable:[1540],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],value:[8],closed:[1540],messageOverrides:[1040],messages:[1040],defaultMessages:[32],effectiveLocale:[32],hasContent:[32],hasImage:[32],setFocus:[64]}]);function zH(){if(typeof customElements>"u")return;["calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-chip":customElements.get(e)||customElements.define(e,out);break;case"calcite-icon":customElements.get(e)||ni();break}})}zH();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const x5={slow:14e3,medium:1e4,fast:6e3},Lk={actionsEnd:"actions-end",title:"title",message:"message",link:"link"},yie={actionsEnd:"actions-end",container:"container",close:"alert-close",slottedInShell:"slotted-in-shell"},aut='@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([scale=s]){--calcite-alert-width:40em;--calcite-alert-spacing-token-small:0.5rem;--calcite-alert-spacing-token-large:0.75rem}:host([scale=s]) slot[name=title]::slotted(*),:host([scale=s]) *::slotted([slot=title]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) slot[name=message]::slotted(*),:host([scale=s]) *::slotted([slot=message]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) slot[name=link]::slotted(*),:host([scale=s]) *::slotted([slot=link]){font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .alert-queue-count{margin-inline:0.5rem}:host([scale=s]) .container{--calcite-alert-min-height:3.5rem}:host([scale=s]) .alert-close{padding:0.5rem}:host([scale=m]){--calcite-alert-width:50em;--calcite-alert-spacing-token-small:0.75rem;--calcite-alert-spacing-token-large:1rem}:host([scale=m]) slot[name=title]::slotted(*),:host([scale=m]) *::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) slot[name=message]::slotted(*),:host([scale=m]) *::slotted([slot=message]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) slot[name=link]::slotted(*),:host([scale=m]) *::slotted([slot=link]){font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) .alert-queue-count{margin-inline:0.75rem}:host([scale=m]) .container{--calcite-alert-min-height:4.1875rem}:host([scale=l]){--calcite-alert-width:60em;--calcite-alert-spacing-token-small:1rem;--calcite-alert-spacing-token-large:1.25rem}:host([scale=l]) slot[name=title]::slotted(*),:host([scale=l]) *::slotted([slot=title]){margin-block-end:0.25rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) slot[name=message]::slotted(*),:host([scale=l]) *::slotted([slot=message]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) slot[name=link]::slotted(*),:host([scale=l]) *::slotted([slot=link]){font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) .alert-queue-count{margin-inline:1rem}:host([scale=l]) .container{--calcite-alert-min-height:5.625rem}:host{--calcite-alert-edge-distance:2rem;display:block}:host .container{pointer-events:none;position:fixed;z-index:500;margin-block:0px;margin-inline:auto;display:flex;align-items:center;justify-content:center;background-color:var(--calcite-ui-foreground-1);opacity:0;--tw-shadow:0 6px 20px -4px rgba(0, 0, 0, 0.1), 0 4px 12px -2px rgba(0, 0, 0, 0.08);--tw-shadow-colored:0 6px 20px -4px var(--tw-shadow-color), 0 4px 12px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);border-radius:var(--calcite-border-radius);border-block-start:0px solid transparent;border-inline:1px solid var(--calcite-ui-border-3);border-block-end:1px solid var(--calcite-ui-border-3);min-block-size:var(--calcite-alert-min-height);inline-size:var(--calcite-alert-width);max-inline-size:calc(100% - (var(--calcite-alert-edge-distance) * 2 + 2px));max-block-size:0;transition:var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), all var(--calcite-animation-timing) ease-in-out}:host .container.bottom,:host .container.top{inset-inline-end:0;inset-inline-start:0}:host .container[class*=bottom]{transform:translate3d(0, var(--calcite-alert-edge-distance), 0);inset-block-end:var(--calcite-alert-edge-distance)}:host .container[class*=top]{transform:translate3d(0, calc(-1 * var(--calcite-alert-edge-distance)), 0);inset-block-start:var(--calcite-alert-edge-distance)}:host .container[class*=-start]{inset-inline-start:var(--calcite-alert-edge-distance);inset-inline-end:auto}:host .container[class*=-end]{inset-inline-end:var(--calcite-alert-edge-distance);inset-inline-start:auto}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}[hidden]{display:none}.container{display:flex;inline-size:100%;align-items:center;justify-content:center}.alert-close{outline-color:transparent}.alert-close:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}:host([open]) .container:not(.queued){max-block-size:100%;border-block-start-width:2px;opacity:1;pointer-events:initial}:host([open]) .container:not(.queued)[class*=bottom]{transform:translate3d(0, calc(-1 * var(--calcite-alert-edge-distance)), inherit)}:host([open]) .container:not(.queued)[class*=top]{transform:translate3d(0, var(--calcite-alert-edge-distance), inherit)}slot[name=title]::slotted(*),*::slotted([slot=title]){font-size:var(--calcite-font-size-0);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}slot[name=message]::slotted(*),*::slotted([slot=message]){margin:0px;display:inline;font-size:var(--calcite-font-size--1);line-height:1.375;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-ui-text-2);margin-inline-end:0.5rem}slot[name=link]::slotted(*),*::slotted([slot=link]){display:inline-flex;color:var(--calcite-ui-text-link)}.alert-content{transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-inline:var(--calcite-alert-spacing-token-large);flex:0 0 auto;display:flex;flex-direction:column;overflow-wrap:break-word;background-color:var(--calcite-ui-foreground-1);flex:1 1 0;min-inline-size:0;padding-block:var(--calcite-alert-spacing-token-small);padding-inline:0 var(--calcite-alert-spacing-token-small);border-radius:var(--calcite-border-radius)}.alert-content:first-of-type:not(:only-child){padding-inline-start:var(--calcite-alert-spacing-token-large)}.alert-content:only-child{padding:var(--calcite-alert-spacing-token-small)}.alert-icon{transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-block:var(--calcite-alert-spacing-token-small);padding-inline:var(--calcite-alert-spacing-token-large);flex:0 0 auto;display:flex;align-items:center;align-self:stretch;background-color:var(--calcite-ui-foreground-1);padding-block:0px;border-start-start-radius:var(--calcite-border-radius);border-end-start-radius:var(--calcite-border-radius)}.alert-close{transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-block:var(--calcite-alert-spacing-token-small);padding-inline:var(--calcite-alert-spacing-token-large);flex:0 0 auto;cursor:pointer;align-self:stretch;overflow:hidden;border-style:none;background-color:var(--calcite-ui-foreground-1);padding-block:0px;color:var(--calcite-ui-text-3);outline:2px solid transparent;outline-offset:2px;border-end-end-radius:var(--calcite-border-radius);border-start-end-radius:var(--calcite-border-radius)}.alert-close:hover,.alert-close:focus{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1)}.alert-close:open{background-color:var(--calcite-ui-foreground-3)}.alert-queue-count{visibility:hidden;display:flex;cursor:default;align-items:center;justify-content:space-around;align-self:stretch;overflow:hidden;background-color:var(--calcite-ui-foreground-1);text-align:center;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-2);opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline:0px solid transparent;border-start-end-radius:0}.alert-queue-count.active{visibility:visible;opacity:1}:host([auto-close])>.alert-queue-count{border-inline-end:0px solid transparent}.alert-dismiss-progress{position:absolute;display:block;inline-size:100%;overflow:hidden;inset-inline:0;inset-block-start:-2px;block-size:2px;border-radius:var(--calcite-border-radius) var(--calcite-border-radius) 0 0}.alert-dismiss-progress:after{position:absolute;inset-block-start:0px;display:block;block-size:2px;content:"";background-color:var(--calcite-alert-dismiss-progress-background);inset-inline-end:0}.actions-end{display:flex;align-self:stretch}:host([kind=brand]) .container{border-block-start-color:var(--calcite-ui-brand)}:host([kind=brand]) .container .alert-icon{color:var(--calcite-ui-brand)}:host([kind=info]) .container{border-block-start-color:var(--calcite-ui-info)}:host([kind=info]) .container .alert-icon{color:var(--calcite-ui-info)}:host([kind=danger]) .container{border-block-start-color:var(--calcite-ui-danger)}:host([kind=danger]) .container .alert-icon{color:var(--calcite-ui-danger)}:host([kind=success]) .container{border-block-start-color:var(--calcite-ui-success)}:host([kind=success]) .container .alert-icon{color:var(--calcite-ui-success)}:host([kind=warning]) .container{border-block-start-color:var(--calcite-ui-warning)}:host([kind=warning]) .container .alert-icon{color:var(--calcite-ui-warning)}:host([auto-close-duration=fast]) .alert-dismiss-progress:after{animation:dismissProgress 6000ms ease-out}:host(:hover[auto-close-duration=fast]) .alert-dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=medium]) .alert-dismiss-progress:after{animation:dismissProgress 10000ms ease-out}:host(:hover[auto-close-duration=medium]) .alert-dismiss-progress:after{animation-play-state:paused}:host([auto-close-duration=slow]) .alert-dismiss-progress:after{animation:dismissProgress 14000ms ease-out}:host(:hover[auto-close-duration=slow]) .alert-dismiss-progress:after{animation-play-state:paused}@keyframes dismissProgress{0%{inline-size:0px;opacity:0.75}100%{inline-size:100%;opacity:1}}.container.slotted-in-shell{position:absolute}',lut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteAlertBeforeClose=ue(this,"calciteAlertBeforeClose",6),this.calciteAlertClose=ue(this,"calciteAlertClose",6),this.calciteAlertBeforeOpen=ue(this,"calciteAlertBeforeOpen",6),this.calciteAlertOpen=ue(this,"calciteAlertOpen",6),this.calciteInternalAlertSync=ue(this,"calciteInternalAlertSync",6),this.calciteInternalAlertRegister=ue(this,"calciteInternalAlertRegister",6),this.autoCloseTimeoutId=null,this.totalOpenTime=0,this.totalHoverTime=0,this.openTransitionProp="opacity",this.setTransitionEl=t=>{this.transitionEl=t,Cl(this)},this.closeAlert=()=>{this.autoCloseTimeoutId=null,this.queued=!1,this.open=!1,this.queue=this.queue.filter(t=>t!==this.el),this.determineActiveAlert(),this.calciteInternalAlertSync.emit({queue:this.queue})},this.actionsEndSlotChangeHandler=t=>{this.hasEndActions=r_(t)},this.handleMouseOver=()=>{window.clearTimeout(this.autoCloseTimeoutId),this.totalOpenTime=Date.now()-this.initialOpenTime,this.lastMouseOverBegin=Date.now()},this.handleMouseLeave=()=>{const t=Date.now()-this.lastMouseOverBegin,e=x5[this.autoCloseDuration]-this.totalOpenTime+this.totalHoverTime;this.totalHoverTime=this.totalHoverTime?t+this.totalHoverTime:t,this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),e)},this.open=!1,this.autoClose=!1,this.autoCloseDuration=this.autoClose?"medium":null,this.kind="brand",this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.numberingSystem=void 0,this.placement="bottom",this.scale="m",this.messages=void 0,this.messageOverrides=void 0,this.slottedInShell=void 0,this.effectiveLocale="",this.defaultMessages=void 0,this.hasEndActions=!1,this.queue=[],this.queueLength=0,this.queued=!1,this.requestedIcon=void 0}openHandler(){this.open&&!this.queued&&this.calciteInternalAlertRegister.emit(),this.open||(this.queue=this.queue.filter(t=>t!==this.el),this.calciteInternalAlertSync.emit({queue:this.queue}))}onMessagesChange(){}updateRequestedIcon(){this.requestedIcon=fw(zw,this.icon,this.kind)}updateDuration(){this.autoClose&&this.autoCloseTimeoutId&&(window.clearTimeout(this.autoCloseTimeoutId),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),x5[this.autoCloseDuration]))}connectedCallback(){hn(this),dr(this),this.open&&!this.queued&&(this.openHandler(),this.calciteInternalAlertRegister.emit()),Cl(this)}async componentWillLoad(){Ui(this),this.requestedIcon=fw(zw,this.icon,this.kind),await cr(this)}componentDidLoad(){Bi(this)}disconnectedCallback(){window.clearTimeout(this.autoCloseTimeoutId),window.clearTimeout(this.queueTimeout),q0(this),pn(this),hr(this),this.slottedInShell=!1}render(){const{hasEndActions:t}=this,e=I("button",{"aria-label":this.messages.close,class:"alert-close",onClick:this.closeAlert,ref:b=>this.closeButton=b,type:"button"},I("calcite-icon",{icon:"x",scale:this.scale==="l"?"m":"s"}));Lt.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,signDisplay:"always"};const i=this.queueLength>2?this.queueLength-1:1,n=Lt.numberFormatter.format(i),r=I("div",{class:`${this.queueLength>1?"active ":""}alert-queue-count`},I("calcite-chip",{scale:this.scale,value:n},n)),{open:s,autoClose:o,label:a,placement:l,queued:u,requestedIcon:h,iconFlipRtl:p}=this,f=o?"alert":"alertdialog",g=!s,v=I("slot",{key:"actionsEndSlot",name:Lk.actionsEnd,onSlotchange:this.actionsEndSlotChangeHandler});return I(Ft,{"aria-hidden":Vi(g),"aria-label":a,"calcite-hydrated-hidden":g,role:f},I("div",{class:{container:!0,queued:u,[l]:!0,[yie.slottedInShell]:this.slottedInShell},onPointerEnter:this.autoClose&&this.autoCloseTimeoutId?this.handleMouseOver:null,onPointerLeave:this.autoClose&&this.autoCloseTimeoutId?this.handleMouseLeave:null,ref:this.setTransitionEl},h?I("div",{class:"alert-icon"},I("calcite-icon",{flipRtl:p,icon:h,scale:this.scale==="l"?"m":"s"})):null,I("div",{class:"alert-content"},I("slot",{name:Lk.title}),I("slot",{name:Lk.message}),I("slot",{name:Lk.link})),I("div",{class:yie.actionsEnd,hidden:!t},v),this.queueLength>1?r:null,e,s&&!u&&o?I("div",{class:"alert-dismiss-progress"}):null))}alertSync(t){this.queue!==t.detail.queue&&(this.queue=t.detail.queue),this.queueLength=this.queue.length,this.determineActiveAlert(),t.stopPropagation()}alertRegister(){this.open&&!this.queue.includes(this.el)&&(this.queued=!0,this.queue.push(this.el)),this.calciteInternalAlertSync.emit({queue:this.queue}),this.determineActiveAlert()}async setFocus(){await Hi(this);const t=Wr(this.el,{selector:"calcite-link"});!this.closeButton&&!t||(t?t.setFocus():this.closeButton&&this.closeButton.focus())}effectiveLocaleChange(){ur(this,this.effectiveLocale)}determineActiveAlert(){var t;if(((t=this.queue)==null?void 0:t[0])===this.el)this.openAlert(),this.autoClose&&!this.autoCloseTimeoutId&&(this.initialOpenTime=Date.now(),this.autoCloseTimeoutId=window.setTimeout(()=>this.closeAlert(),x5[this.autoCloseDuration]));else return}onBeforeOpen(){this.calciteAlertBeforeOpen.emit()}onOpen(){this.calciteAlertOpen.emit()}onBeforeClose(){this.calciteAlertBeforeClose.emit()}onClose(){this.calciteAlertClose.emit()}openAlert(){window.clearTimeout(this.queueTimeout),this.queueTimeout=window.setTimeout(()=>this.queued=!1,300)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{open:["openHandler"],messageOverrides:["onMessagesChange"],icon:["updateRequestedIcon"],kind:["updateRequestedIcon"],autoCloseDuration:["updateDuration"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return aut}},[1,"calcite-alert",{open:[1540],autoClose:[516,"auto-close"],autoCloseDuration:[513,"auto-close-duration"],kind:[513],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],numberingSystem:[513,"numbering-system"],placement:[513],scale:[513],messages:[1040],messageOverrides:[1040],slottedInShell:[1028,"slotted-in-shell"],effectiveLocale:[32],defaultMessages:[32],hasEndActions:[32],queue:[32],queueLength:[32],queued:[32],requestedIcon:[32],setFocus:[64]},[[8,"calciteInternalAlertSync","alertSync"],[8,"calciteInternalAlertRegister","alertRegister"]]]);function cut(){if(typeof customElements>"u")return;["calcite-alert","calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-alert":customElements.get(e)||customElements.define(e,lut);break;case"calcite-chip":customElements.get(e)||zH();break;case"calcite-icon":customElements.get(e)||ni();break}})}cut();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Jbe="calciteInternalLabelClick",mL="calciteInternalLabelConnected",oP="calciteInternaLabelDisconnected",vie="calcite-label",aP=new WeakMap,gI=new WeakMap,lP=new WeakMap,W_=new Set,uut=t=>{const{id:e}=t,i=e&&iB(t,{selector:`${vie}[for="${e}"]`});if(i)return i;const n=Qu(t,vie);return!n||dut(n,t)?null:n};function dut(t,e){let i;const n="custom-element-ancestor-check",r=o=>{o.stopImmediatePropagation();const a=o.composedPath();i=a.slice(a.indexOf(e),a.indexOf(t))};return t.addEventListener(n,r,{once:!0}),e.dispatchEvent(new CustomEvent(n,{composed:!0,bubbles:!0})),t.removeEventListener(n,r),i.filter(o=>o!==e&&o!==t).filter(o=>{var a;return(a=o.tagName)==null?void 0:a.includes("-")}).length>0}function id(t){const e=uut(t.el);if(aP.has(e)||!e&&W_.has(t))return;const i=fut.bind(t);if(e){t.labelEl=e;const n=hut.bind(t);aP.set(t.labelEl,n),t.labelEl.addEventListener(Jbe,n),W_.delete(t),document.removeEventListener(mL,gI.get(t)),lP.set(t,i),document.addEventListener(oP,i)}else W_.has(t)||(i(),document.removeEventListener(oP,lP.get(t)))}function qh(t){if(W_.delete(t),document.removeEventListener(mL,gI.get(t)),document.removeEventListener(oP,lP.get(t)),gI.delete(t),lP.delete(t),!t.labelEl)return;const e=aP.get(t.labelEl);t.labelEl.removeEventListener(Jbe,e),aP.delete(t.labelEl)}function Vc(t){var e,i;return t.label||((i=(e=t.labelEl)==null?void 0:e.textContent)==null?void 0:i.trim())||""}function hut(t){this.disabled||this.el.contains(t.detail.sourceEvent.target)||this.onLabelClick(t)}function put(){W_.has(this)&&id(this)}function fut(){W_.add(this);const t=gI.get(this)||put.bind(this);gI.set(this,t),document.addEventListener(mL,t)}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const mut={container:"container"},gut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:flex}:host([alignment=start]){text-align:start}:host([alignment=end]){text-align:end}:host([alignment=center]){text-align:center}:host([scale=s]) .container{gap:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.5rem)}:host([scale=m]) .container{gap:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-block-end:var(--calcite-label-margin-bottom, 0.75rem)}:host([scale=l]) .container{gap:0.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-block-end:var(--calcite-label-margin-bottom, 1rem)}:host .container{margin-inline:0px;margin-block-start:0px;inline-size:100%;line-height:1.375;color:var(--calcite-ui-text-1)}:host([layout=default]) .container{display:flex;flex-direction:column}:host([layout=inline]) .container,:host([layout=inline-space-between]) .container{display:flex;flex-direction:row;align-items:center;gap:0.5rem}:host([layout=inline][scale=l]) .container{gap:0.75rem}:host([layout=inline-space-between]) .container{justify-content:space-between}:host([disabled])>.container{pointer-events:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) ::slotted(*){pointer-events:none}:host([disabled]) ::slotted(*[disabled]),:host([disabled]) ::slotted(*[disabled] *){--tw-bg-opacity:1}:host([disabled]) ::slotted(calcite-input-message:not([active])){--tw-bg-opacity:0}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}",yut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalLabelClick=ue(this,"calciteInternalLabelClick",2),this.labelClickHandler=t=>{this.calciteInternalLabelClick.emit({sourceEvent:t})},this.alignment="start",this.for=void 0,this.scale="m",this.layout="default"}connectedCallback(){document.dispatchEvent(new CustomEvent(mL))}disconnectedCallback(){document.dispatchEvent(new CustomEvent(oP))}render(){return I(Ft,{onClick:this.labelClickHandler},I("div",{class:mut.container},I("slot",null)))}get el(){return this}static get style(){return gut}},[1,"calcite-label",{alignment:[513],for:[513],scale:[513],layout:[513]}]);function vut(){if(typeof customElements>"u")return;["calcite-label"].forEach(e=>{switch(e){case"calcite-label":customElements.get(e)||customElements.define(e,yut);break}})}vut();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const IU="hidden-form-input";function jH(t){return"checked"in t}const TU=new WeakMap,VH=new WeakSet;function but(t,e){const i="calciteInternalFormComponentRegister";let n=!1;return t.addEventListener(i,r=>{n=r.composedPath().some(s=>VH.has(s)),r.stopPropagation()},{once:!0}),e.dispatchEvent(new CustomEvent(i,{bubbles:!0,composed:!0})),n}function gL(t){const{formEl:e}=t;return e?("requestSubmit"in e?e.requestSubmit():e.submit(),!0):!1}function _ut(t){var e;(e=t.formEl)==null||e.reset()}function Rm(t){const{el:e,value:i}=t,n=Qu(e,"form");if(!n||but(n,e))return;t.formEl=n,t.defaultValue=i,jH(t)&&(t.defaultChecked=t.checked);const r=(t.onFormReset||wut).bind(t);n.addEventListener("reset",r),TU.set(t.el,r),VH.add(e)}function wut(){if(jH(this)){this.checked=this.defaultChecked;return}this.value=this.defaultValue}function Lm(t){const{el:e,formEl:i}=t;if(!i)return;const n=TU.get(e);i.removeEventListener("reset",n),TU.delete(e),t.formEl=null,VH.delete(e)}function UH(t,e){t.defaultValue=e}const Ybe=t=>{t.target.dispatchEvent(new CustomEvent("calciteInternalHiddenInputChange",{bubbles:!0}))},bie=t=>t.removeEventListener("change",Ybe);function xut(t){const{el:e,formEl:i,name:n,value:r}=t,{ownerDocument:s}=e,o=e.querySelectorAll(`input[slot="${IU}"]`);if(!i||!n){o.forEach(p=>{bie(p),p.remove()});return}const a=Array.isArray(r)?r:[r],l=[],u=new Set;o.forEach(p=>{const f=a.find(g=>g==p.value);f!=null?(u.add(f),_ie(t,p,f)):l.push(p)});let h;a.forEach(p=>{if(u.has(p))return;let f=l.pop();f||(f=s.createElement("input"),f.slot=IU),h||(h=s.createDocumentFragment()),h.append(f),f.addEventListener("change",Ybe),_ie(t,f,p)}),h&&e.append(h),l.forEach(p=>{bie(p),p.remove()})}function _ie(t,e,i){var a;const{defaultValue:n,disabled:r,name:s,required:o}=t;e.defaultValue=n,e.disabled=r,e.name=s,e.required=o,e.tabIndex=-1,jH(t)?(e.checked=t.checked,e.defaultChecked=t.defaultChecked,e.value=t.checked?i||"on":""):e.value=i||"",(a=t.syncHiddenFormInput)==null||a.call(t,e)}const Dm=({component:t})=>(xut(t),I("slot",{name:IU}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Sut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([scale=s]) .container{block-size:0.75rem}:host([scale=s]) .track{block-size:0.75rem;inline-size:1.5rem}:host([scale=s]) .handle{block-size:0.5rem;inline-size:0.5rem}:host([scale=m]) .container{block-size:1rem}:host([scale=m]) .track{block-size:1rem;inline-size:2rem}:host([scale=m]) .handle{block-size:0.75rem;inline-size:0.75rem}:host([scale=l]) .container{block-size:1.5rem}:host([scale=l]) .track{block-size:1.5rem;inline-size:3rem}:host([scale=l]) .handle{block-size:1.25rem;inline-size:1.25rem}:host{position:relative;display:inline-block;inline-size:auto;cursor:pointer;-webkit-user-select:none;user-select:none;vertical-align:middle;tap-highlight-color:transparent}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host{inline-size:auto;outline-color:transparent}.track{pointer-events:none;position:relative;box-sizing:border-box;display:inline-block;border-radius:9999px;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-2);background-color:var(--calcite-ui-foreground-2);vertical-align:top;transition-property:all;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.handle{pointer-events:none;position:absolute;display:block;border-radius:9999px;border-width:2px;border-style:solid;border-color:var(--calcite-ui-border-input);background-color:var(--calcite-ui-foreground-1);transition-property:all;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);inset-block-start:-1px;inset-inline:-1px auto}:host(:hover) .handle,:host(:focus) .handle{border-color:var(--calcite-ui-brand);box-shadow:inset 0 0 0 1px var(--calcite-ui-brand)}:host([checked]) .track{border-color:var(--calcite-ui-brand-hover);background-color:var(--calcite-ui-brand)}:host([checked]) .handle{border-color:var(--calcite-ui-brand);inset-inline:auto -1px}:host([checked]:hover) .track{border-color:var(--calcite-ui-brand-hover);background-color:var(--calcite-ui-brand)}:host([checked]:hover) .handle{border-color:var(--calcite-ui-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-brand-hover)}@media (forced-colors: active){:host([checked]) .track{background-color:canvasText}}.container:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}",Eut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteSwitchChange=ue(this,"calciteSwitchChange",6),this.keyDownHandler=t=>{!this.disabled&&Yu(t.key)&&(this.toggle(),t.preventDefault())},this.clickHandler=()=>{this.toggle()},this.setSwitchEl=t=>{this.switchEl=t},this.disabled=!1,this.label=void 0,this.name=void 0,this.scale="m",this.checked=!1,this.value=void 0}async setFocus(){await Hi(this),qu(this.switchEl)}syncHiddenFormInput(t){t.type="checkbox"}onLabelClick(){this.disabled||(this.toggle(),this.setFocus())}toggle(){this.checked=!this.checked,this.calciteSwitchChange.emit()}connectedCallback(){id(this),Rm(this)}componentWillLoad(){Ui(this)}componentDidLoad(){Bi(this)}disconnectedCallback(){qh(this),Lm(this)}componentDidRender(){lr(this)}render(){return I(Ft,{onClick:this.clickHandler,onKeyDown:this.keyDownHandler},I("div",{"aria-checked":Vi(this.checked),"aria-label":Vc(this),class:"container",ref:this.setSwitchEl,role:"switch",tabIndex:0},I("div",{class:"track"},I("div",{class:"handle"})),I(Dm,{component:this})))}get el(){return this}static get style(){return Sut}},[1,"calcite-switch",{disabled:[516],label:[1],name:[513],scale:[513],checked:[1540],value:[8],setFocus:[64]}]);function Cut(){if(typeof customElements>"u")return;["calcite-switch"].forEach(e=>{switch(e){case"calcite-switch":customElements.get(e)||customElements.define(e,Eut);break}})}Cut();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Iut={dropdownTrigger:"trigger"},Tut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:inline-flex;flex:0 1 auto}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host .calcite-dropdown-wrapper{--calcite-floating-ui-z-index:600;display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.calcite-dropdown-wrapper .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:1;border-radius:0.25rem}.calcite-dropdown-wrapper[data-placement^=bottom] .calcite-floating-ui-anim{transform:translateY(-5px)}.calcite-dropdown-wrapper[data-placement^=top] .calcite-floating-ui-anim{transform:translateY(5px)}.calcite-dropdown-wrapper[data-placement^=left] .calcite-floating-ui-anim{transform:translateX(5px)}.calcite-dropdown-wrapper[data-placement^=right] .calcite-floating-ui-anim{transform:translateX(-5px)}.calcite-dropdown-wrapper[data-placement] .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([open]) .calcite-dropdown-wrapper{visibility:visible}:host .calcite-dropdown-content{max-block-size:45vh;inline-size:auto;overflow-y:auto;overflow-x:hidden;background-color:var(--calcite-ui-foreground-1);inline-size:var(--calcite-dropdown-width)}.calcite-trigger-container{position:relative;display:flex;flex:1 1 auto}@media (forced-colors: active){:host([open]) .calcite-dropdown-wrapper{border:1px solid canvasText}}:host([width=s]){--calcite-dropdown-width:12rem}:host([width=m]){--calcite-dropdown-width:14rem}:host([width=l]){--calcite-dropdown-width:16rem}",kut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownSelect=ue(this,"calciteDropdownSelect",6),this.calciteDropdownBeforeClose=ue(this,"calciteDropdownBeforeClose",6),this.calciteDropdownClose=ue(this,"calciteDropdownClose",6),this.calciteDropdownBeforeOpen=ue(this,"calciteDropdownBeforeOpen",6),this.calciteDropdownOpen=ue(this,"calciteDropdownOpen",6),this.items=[],this.groups=[],this.mutationObserver=Pi("mutation",()=>this.updateItems()),this.resizeObserver=Pi("resize",t=>this.resizeObserverCallback(t)),this.openTransitionProp="opacity",this.guid=`calcite-dropdown-${Ts()}`,this.defaultAssignedElements=[],this.slotChangeHandler=t=>{this.defaultAssignedElements=t.target.assignedElements({flatten:!0}),this.updateItems()},this.setFilteredPlacements=()=>{const{el:t,flipPlacements:e}=this;this.filteredFlipPlacements=e?pL(e,t):null},this.updateTriggers=t=>{this.triggers=t.target.assignedElements({flatten:!0}),this.reposition(!0)},this.updateItems=()=>{this.items=this.groups.map(t=>Array.from(t==null?void 0:t.querySelectorAll("calcite-dropdown-item"))).reduce((t,e)=>[...t,...e],[]),this.updateSelectedItems(),this.reposition(!0)},this.updateGroups=t=>{const e=t.target.assignedElements({flatten:!0}).filter(i=>i==null?void 0:i.matches("calcite-dropdown-group"));this.groups=e,this.updateItems()},this.resizeObserverCallback=t=>{t.forEach(e=>{const{target:i}=e;i===this.referenceEl?this.setDropdownWidth():i===this.scrollerEl&&this.setMaxScrollerHeight()})},this.setDropdownWidth=()=>{const{referenceEl:t,scrollerEl:e}=this,i=t==null?void 0:t.clientWidth;!i||!e||(e.style.minWidth=`${i}px`)},this.setMaxScrollerHeight=()=>{const{scrollerEl:t}=this;if(!t)return;this.reposition(!0);const e=this.getMaxScrollerHeight();t.style.maxHeight=e>0?`${e}px`:"",this.reposition(!0)},this.setScrollerAndTransitionEl=t=>{this.resizeObserver.observe(t),this.scrollerEl=t,this.transitionEl=t,Cl(this)},this.setReferenceEl=t=>{this.referenceEl=t,mm(this,this.referenceEl,this.floatingEl),this.resizeObserver.observe(t)},this.setFloatingEl=t=>{this.floatingEl=t,mm(this,this.referenceEl,this.floatingEl)},this.keyDownHandler=t=>{if(t.target!==this.referenceEl)return;const{defaultPrevented:i,key:n}=t;if(!i){if(this.open){if(n==="Escape"){this.closeCalciteDropdown(),t.preventDefault();return}else if(t.shiftKey&&n==="Tab"){this.closeCalciteDropdown(),t.preventDefault();return}}Yu(n)?(this.openCalciteDropdown(),t.preventDefault()):n==="Escape"&&(this.closeCalciteDropdown(),t.preventDefault())}},this.focusOnFirstActiveOrFirstItem=()=>{this.getFocusableElement(this.items.find(t=>t.selected)||this.items[0])},this.toggleOpenEnd=()=>{this.focusOnFirstActiveOrFirstItem(),this.el.removeEventListener("calciteDropdownOpen",this.toggleOpenEnd)},this.openCalciteDropdown=()=>{this.open=!this.open,this.open&&this.el.addEventListener("calciteDropdownOpen",this.toggleOpenEnd)},this.open=!1,this.closeOnSelectDisabled=!1,this.disabled=!1,this.flipPlacements=void 0,this.maxItems=0,this.overlayPositioning="absolute",this.placement=RH,this.scale="m",this.selectedItems=[],this.type="click",this.width=void 0}openHandler(t){if(!this.disabled){t?this.reposition(!0):P0(this.floatingEl);return}t||P0(this.floatingEl),this.open=!1}handleDisabledChange(t){t||(this.open=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}maxItemsHandler(){this.setMaxScrollerHeight()}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}connectedCallback(){var t;(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0}),this.setFilteredPlacements(),this.reposition(!0),this.open&&this.openHandler(this.open),Cl(this)}componentDidLoad(){this.reposition(!0)}componentDidRender(){lr(this)}disconnectedCallback(){var t,e;(t=this.mutationObserver)==null||t.disconnect(),x1(this,this.referenceEl,this.floatingEl),(e=this.resizeObserver)==null||e.disconnect(),q0(this)}render(){const{open:t,guid:e}=this;return I(Ft,null,I("div",{class:"calcite-trigger-container",id:`${e}-menubutton`,onClick:this.openCalciteDropdown,onKeyDown:this.keyDownHandler,ref:this.setReferenceEl},I("slot",{"aria-controls":`${e}-menu`,"aria-expanded":Vi(t),"aria-haspopup":"menu",name:Iut.dropdownTrigger,onSlotchange:this.updateTriggers})),I("div",{"aria-hidden":Vi(!t),class:"calcite-dropdown-wrapper",ref:this.setFloatingEl},I("div",{"aria-labelledby":`${e}-menubutton`,class:{["calcite-dropdown-content"]:!0,[jc.animation]:!0,[jc.animationActive]:t},id:`${e}-menu`,ref:this.setScrollerAndTransitionEl,role:"menu"},I("slot",{onSlotchange:this.updateGroups}))))}async reposition(t=!1){const{floatingEl:e,referenceEl:i,placement:n,overlayPositioning:r,filteredFlipPlacements:s}=this;return f2(this,{floatingEl:e,referenceEl:i,overlayPositioning:r,placement:n,flipPlacements:s,type:"menu"},t)}closeCalciteDropdownOnClick(t){!Lo(t)||!this.open||t.composedPath().includes(this.el)||this.closeCalciteDropdown(!1)}closeCalciteDropdownOnEvent(t){this.closeCalciteDropdown(),t.stopPropagation()}closeCalciteDropdownOnOpenEvent(t){t.composedPath().includes(this.el)||(this.open=!1)}mouseEnterHandler(){this.type==="hover"&&this.openCalciteDropdown()}mouseLeaveHandler(){this.type==="hover"&&this.closeCalciteDropdown()}calciteInternalDropdownItemKeyEvent(t){const{keyboardEvent:e}=t.detail,i=e.target;switch(e.key){case"Tab":this.items.indexOf(i)===this.items.length-1&&!e.shiftKey?this.closeCalciteDropdown():this.items.indexOf(i)===0&&e.shiftKey&&this.closeCalciteDropdown();break;case"ArrowDown":ah(this.items,i,"next");break;case"ArrowUp":ah(this.items,i,"previous");break;case"Home":ah(this.items,i,"first");break;case"End":ah(this.items,i,"last");break}t.stopPropagation()}handleItemSelect(t){this.updateSelectedItems(),t.stopPropagation(),this.calciteDropdownSelect.emit(),(!this.closeOnSelectDisabled||t.detail.requestedDropdownGroup.selectionMode==="none")&&this.closeCalciteDropdown(),t.stopPropagation()}onBeforeOpen(){this.calciteDropdownBeforeOpen.emit()}onOpen(){this.calciteDropdownOpen.emit()}onBeforeClose(){this.calciteDropdownBeforeClose.emit()}onClose(){this.calciteDropdownClose.emit()}updateSelectedItems(){this.selectedItems=this.items.filter(t=>t.selected)}getMaxScrollerHeight(){const{maxItems:t,items:e}=this;let i=0,n=0,r;return this.groups.forEach(s=>{t>0&&i<t&&Array.from(s.children).forEach((o,a)=>{a===0&&(isNaN(r)&&(r=o.offsetTop),n+=r),i<t&&(n+=o.offsetHeight,i+=1)})}),e.length>t?n:0}closeCalciteDropdown(t=!0){this.open=!1,t&&qu(this.triggers[0])}getFocusableElement(t){if(!t)return;const e=t.attributes.isLink?t.shadowRoot.querySelector("a"):t;qu(e)}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{open:["openHandler"],disabled:["handleDisabledChange"],flipPlacements:["flipPlacementsHandler"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"]}}static get style(){return Tut}},[17,"calcite-dropdown",{open:[1540],closeOnSelectDisabled:[516,"close-on-select-disabled"],disabled:[516],flipPlacements:[16],maxItems:[514,"max-items"],overlayPositioning:[513,"overlay-positioning"],placement:[513],scale:[513],selectedItems:[1040],type:[513],width:[513],reposition:[64]},[[9,"pointerdown","closeCalciteDropdownOnClick"],[0,"calciteInternalDropdownCloseRequest","closeCalciteDropdownOnEvent"],[8,"calciteDropdownOpen","closeCalciteDropdownOnOpenEvent"],[1,"pointerenter","mouseEnterHandler"],[1,"pointerleave","mouseLeaveHandler"],[0,"calciteInternalDropdownItemKeyEvent","calciteInternalDropdownItemKeyEvent"],[0,"calciteInternalDropdownItemSelect","handleItemSelect"]]]);function $ut(){if(typeof customElements>"u")return;["calcite-dropdown"].forEach(e=>{switch(e){case"calcite-dropdown":customElements.get(e)||customElements.define(e,kut);break}})}$ut();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const S5={containerSmall:"container--s",containerMedium:"container--m",containerLarge:"container--l"},Aut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:relative;display:block}.container{text-align:start}.container--s{font-size:var(--calcite-font-size--2);line-height:1rem}.container--s .dropdown-title{padding:0.5rem}.container--m{font-size:var(--calcite-font-size--1);line-height:1rem}.container--m .dropdown-title{padding:0.75rem}.container--l{font-size:var(--calcite-font-size-0);line-height:1.25rem}.container--l .dropdown-title{padding:1rem}.dropdown-title{margin-block-end:-1px;display:block;cursor:default;overflow-wrap:break-word;border-width:0px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-2)}.dropdown-separator{display:block;block-size:1px;background-color:var(--calcite-ui-border-3)}",Mut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalDropdownItemChange=ue(this,"calciteInternalDropdownItemChange",6),this.groupTitle=void 0,this.selectionMode="single",this.scale=void 0}componentWillLoad(){this.groupPosition=this.getGroupPosition()}render(){const t=this.scale||Hr(this.el,"scale","m"),e=this.groupTitle?I("span",{"aria-hidden":"true",class:"dropdown-title"},this.groupTitle):null,i=this.groupPosition>0?I("div",{class:"dropdown-separator",role:"separator"}):null;return I(Ft,{"aria-label":this.groupTitle,role:"group"},I("div",{class:{container:!0,[S5.containerSmall]:t==="s",[S5.containerMedium]:t==="m",[S5.containerLarge]:t==="l"},title:this.groupTitle},i,e,I("slot",null)))}updateActiveItemOnChange(t){this.requestedDropdownGroup=t.detail.requestedDropdownGroup,this.requestedDropdownItem=t.detail.requestedDropdownItem,this.calciteInternalDropdownItemChange.emit({requestedDropdownGroup:this.requestedDropdownGroup,requestedDropdownItem:this.requestedDropdownItem})}getGroupPosition(){return Array.prototype.indexOf.call(this.el.parentElement.querySelectorAll("calcite-dropdown-group"),this.el)}static get delegatesFocus(){return!0}get el(){return this}static get style(){return Aut}},[17,"calcite-dropdown-group",{groupTitle:[513,"group-title"],selectionMode:[513,"selection-mode"],scale:[513]},[[0,"calciteInternalDropdownItemSelect","updateActiveItemOnChange"]]]);function Out(){if(typeof customElements>"u")return;["calcite-dropdown-group"].forEach(e=>{switch(e){case"calcite-dropdown-group":customElements.get(e)||customElements.define(e,Mut);break}})}Out();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Va={containerLink:"container--link",containerSmall:"container--s",containerMedium:"container--m",containerLarge:"container--l",containerMulti:"container--multi-selection",containerSingle:"container--single-selection",containerNone:"container--none-selection",icon:"dropdown-item-icon",iconEnd:"dropdown-item-icon-end",iconStart:"dropdown-item-icon-start",itemContent:"dropdown-item-content",link:"dropdown-link"},Put="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}.container--s{padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;padding-inline-end:0.5rem;padding-inline-start:1.5rem}.container--m{padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;padding-inline-end:0.75rem;padding-inline-start:2rem}.container--l{padding-block:0.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;padding-inline-end:1rem;padding-inline-start:2.5rem}.container--s.container--none-selection{padding-inline-start:0.25rem}.container--s.container--none-selection .dropdown-link{padding-inline-start:0px}.container--m.container--none-selection{padding-inline-start:0.5rem}.container--m.container--none-selection .dropdown-link{padding-inline-start:0px}.container--l.container--none-selection{padding-inline-start:0.75rem}.container--l.container--none-selection .dropdown-link{padding-inline-start:0px}:host{position:relative;display:flex;flex-grow:1;align-items:center}.container{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-ui-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);text-align:start}.dropdown-item-content{flex:1 1 auto;padding-block:0.125rem;padding-inline-end:auto;padding-inline-start:0.25rem}:host,.container--link a{outline-color:transparent}:host(:focus){outline:2px solid transparent;outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.container--link{padding:0px}.container--link a{position:relative;display:flex;flex-grow:1;cursor:pointer;align-items:center;color:var(--calcite-ui-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.container--s .dropdown-link{padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem;padding-inline-end:0.5rem;padding-inline-start:1.5rem}.container--m .dropdown-link{padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem;padding-inline-end:0.75rem;padding-inline-start:2rem}.container--l .dropdown-link{padding-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;padding-inline-end:1rem;padding-inline-start:2.5rem}:host(:hover) .container,:host(:active) .container{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1);text-decoration-line:none}:host(:hover) .container--link .dropdown-link,:host(:active) .container--link .dropdown-link{color:var(--calcite-ui-text-1)}:host(:focus) .container{color:var(--calcite-ui-text-1);text-decoration-line:none}:host(:active) .container{background-color:var(--calcite-ui-foreground-3)}:host(:hover) .container:before,:host(:active) .container:before,:host(:focus) .container:before{opacity:1}:host([selected]) .container:not(.container--none-selection),:host([selected]) .container--link .dropdown-link{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}:host([selected]) .container:not(.container--none-selection):before,:host([selected]) .container--link .dropdown-link:before{opacity:1;color:var(--calcite-ui-brand)}:host([selected]) .container:not(.container--none-selection) calcite-icon,:host([selected]) .container--link .dropdown-link calcite-icon{color:var(--calcite-ui-brand)}.container--multi-selection:before,.container--none-selection:before{display:none}.container--s:before{inset-inline-start:0.5rem}.container--m:before{inset-inline-start:0.75rem}.container--l:before{inset-inline-start:1rem}.dropdown-item-icon{position:absolute;opacity:0;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transform:scale(0.9)}.container--s .dropdown-item-icon{inset-inline-start:0.25rem}.container--m .dropdown-item-icon{inset-inline-start:0.5rem}.container--l .dropdown-item-icon{inset-inline-start:0.75rem}:host(:hover) .dropdown-item-icon{color:var(--calcite-ui-border-1);opacity:1}:host([selected]) .dropdown-item-icon{color:var(--calcite-ui-brand);opacity:1}.container--s .dropdown-item-icon-start{margin-inline-end:0.5rem;margin-inline-start:0.25rem}.container--s .dropdown-item-icon-end{margin-inline-start:0.5rem}.container--m .dropdown-item-icon-start{margin-inline-end:0.75rem;margin-inline-start:0.25rem}.container--m .dropdown-item-icon-end{margin-inline-start:0.75rem}.container--l .dropdown-item-icon-start{margin-inline-end:1rem;margin-inline-start:0.25rem}.container--l .dropdown-item-icon-end{margin-inline-start:1rem}",Rut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDropdownItemSelect=ue(this,"calciteDropdownItemSelect",6),this.calciteInternalDropdownItemSelect=ue(this,"calciteInternalDropdownItemSelect",6),this.calciteInternalDropdownItemKeyEvent=ue(this,"calciteInternalDropdownItemKeyEvent",6),this.calciteInternalDropdownCloseRequest=ue(this,"calciteInternalDropdownCloseRequest",6),this.scale="m",this.selected=!1,this.iconFlipRtl=void 0,this.iconStart=void 0,this.iconEnd=void 0,this.href=void 0,this.label=void 0,this.rel=void 0,this.target=void 0}async setFocus(){var t;await Hi(this),(t=this.el)==null||t.focus()}componentWillLoad(){Ui(this),this.initialize()}componentDidLoad(){Bi(this)}connectedCallback(){this.initialize()}render(){const t=Hr(this.el,"scale",this.scale),e=I("calcite-icon",{class:Va.iconStart,flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:t==="l"?"m":"s"}),i=I("span",{class:Va.itemContent},I("slot",null)),n=I("calcite-icon",{class:Va.iconEnd,flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:t==="l"?"m":"s"}),r=this.iconStart&&this.iconEnd?[e,i,n]:this.iconStart?[e,i]:this.iconEnd?[i,n]:i,s=this.href?I("a",{"aria-label":this.label,class:Va.link,href:this.href,ref:l=>this.childLink=l,rel:this.rel,tabIndex:-1,target:this.target},r):r,o=this.href?null:this.selectionMode==="single"?"menuitemradio":this.selectionMode==="multiple"?"menuitemcheckbox":"menuitem",a=this.selectionMode!=="none"?Vi(this.selected):null;return I(Ft,{"aria-checked":a,role:o,tabindex:"0"},I("div",{class:{container:!0,[Va.containerLink]:!!this.href,[Va.containerSmall]:t==="s",[Va.containerMedium]:t==="m",[Va.containerLarge]:t==="l",[Va.containerMulti]:this.selectionMode==="multiple",[Va.containerSingle]:this.selectionMode==="single",[Va.containerNone]:this.selectionMode==="none"}},this.selectionMode!=="none"?I("calcite-icon",{class:Va.icon,icon:this.selectionMode==="multiple"?"check":"bullet-point",scale:t==="l"?"m":"s"}):null,s))}onClick(){this.emitRequestedItem()}keyDownHandler(t){switch(t.key){case" ":case"Enter":this.emitRequestedItem(),this.href&&this.childLink.click(),t.preventDefault();break;case"Escape":this.calciteInternalDropdownCloseRequest.emit(),t.preventDefault();break;case"Tab":this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:t});break;case"ArrowUp":case"ArrowDown":case"Home":case"End":t.preventDefault(),this.calciteInternalDropdownItemKeyEvent.emit({keyboardEvent:t});break}}updateActiveItemOnChange(t){t.composedPath().includes(this.parentDropdownGroupEl)&&(this.requestedDropdownGroup=t.detail.requestedDropdownGroup,this.requestedDropdownItem=t.detail.requestedDropdownItem,this.determineActiveItem()),t.stopPropagation()}initialize(){this.selectionMode=Hr(this.el,"selection-mode","single"),this.parentDropdownGroupEl=this.el.closest("calcite-dropdown-group"),this.selectionMode==="none"&&(this.selected=!1)}determineActiveItem(){switch(this.selectionMode){case"multiple":this.el===this.requestedDropdownItem&&(this.selected=!this.selected);break;case"single":this.el===this.requestedDropdownItem?this.selected=!0:this.requestedDropdownGroup===this.parentDropdownGroupEl&&(this.selected=!1);break;case"none":this.selected=!1;break}}emitRequestedItem(){this.calciteDropdownItemSelect.emit(),this.calciteInternalDropdownItemSelect.emit({requestedDropdownItem:this.el,requestedDropdownGroup:this.parentDropdownGroupEl})}get el(){return this}static get style(){return Put}},[1,"calcite-dropdown-item",{selected:[1540],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],iconEnd:[513,"icon-end"],href:[513],label:[1],rel:[513],target:[513],setFocus:[64]},[[0,"click","onClick"],[0,"keydown","keyDownHandler"],[16,"calciteInternalDropdownItemChange","updateActiveItemOnChange"]]]);function Lut(){if(typeof customElements>"u")return;["calcite-dropdown-item","calcite-icon"].forEach(e=>{switch(e){case"calcite-dropdown-item":customElements.get(e)||customElements.define(e,Rut);break;case"calcite-icon":customElements.get(e)||ni();break}})}Lut();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */(function(t){if(typeof t.requestSubmit=="function")return;t.requestSubmit=function(n){n?(e(n,this),n.click()):(n=document.createElement("input"),n.type="submit",n.hidden=!0,this.appendChild(n),n.click(),this.removeChild(n))};function e(n,r){n instanceof HTMLElement||i(TypeError,"parameter 1 is not of type 'HTMLElement'"),n.type=="submit"||i(TypeError,"The specified element is not a submit button"),n.form==r||i(DOMException,"The specified element is not owned by this form element","NotFoundError")}function i(n,r,s){throw new n("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+r+".",s)}})(HTMLFormElement.prototype);const Zo={buttonLoader:"calcite-button--loader",content:"content",contentSlotted:"content--slotted",icon:"icon",iconStart:"icon--start",iconEnd:"icon--end",loadingIn:"loading-in",loadingOut:"loading-out",iconStartEmpty:"icon-start-empty",iconEndEmpty:"icon-end-empty",buttonPadding:"button-padding",buttonPaddingShrunk:"button-padding--shrunk"},Dut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:inline-block;inline-size:auto;vertical-align:middle}:host([round]){border-radius:50px}:host([round]) a,:host([round]) button{border-radius:50px}:host button,:host a{outline-color:transparent}:host button:focus,:host a:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}:host button,:host a{--calcite-button-content-margin-internal:0.5rem;--calcite-button-padding-x-internal:7px;--calcite-button-padding-y-internal:3px;padding-block:var(--calcite-button-padding-y-internal);padding-inline:var(--calcite-button-padding-x-internal);position:relative;box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-user-select:none;user-select:none;-webkit-appearance:none;appearance:none;align-items:center;justify-content:center;border-radius:0px;border-style:none;text-align:center;font-family:inherit;font-weight:var(--calcite-font-weight-normal);text-decoration-line:none;transition:color var(--calcite-animation-timing) ease-in-out, background-color var(--calcite-animation-timing) ease-in-out, box-shadow var(--calcite-animation-timing) ease-in-out, outline-color var(--calcite-internal-animation-timing-fast) ease-in-out}:host button:hover,:host a:hover{text-decoration-line:none}.content{display:flex;flex-basis:auto;margin-inline:var(--calcite-button-content-margin-internal)}.icon-start-empty .content{margin-inline-start:unset}.icon-end-empty .content{margin-inline-end:unset}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-content-margin-internal:0.75rem}:host([scale=l]) button,:host([scale=l]) a{--calcite-button-content-margin-internal:1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}:host([alignment=center]:not([width=auto])) a,:host([alignment=center]:not([width=auto])) button{justify-content:center}:host([alignment=start]:not([width=auto])) a,:host([alignment=start]:not([width=auto])) button{justify-content:flex-start}:host([alignment=end]:not([width=auto])) a,:host([alignment=end]:not([width=auto])) button{justify-content:flex-end}:host([alignment*=space-between]:not([width=auto])) a,:host([alignment*=space-between]:not([width=auto])) button{justify-content:space-between}:host([alignment=icon-start-space-between]:not([width=auto])) .icon--start{margin-inline-end:auto}:host([alignment=icon-start-space-between]:not([width=auto])) a,:host([alignment=icon-start-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=icon-end-space-between]:not([width=auto])) .icon--end{margin-inline-start:auto}:host([alignment=icon-end-space-between]:not([width=auto])) a,:host([alignment=icon-end-space-between]:not([width=auto])) button{text-align:unset}:host([alignment=center]) a:not(.content--slotted) .icon--start+.icon--end,:host([alignment=center]) button:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:var(--calcite-button-content-margin-internal)}.icon{position:relative;margin:0px;display:inline-flex;font-weight:var(--calcite-font-weight-normal);line-height:inherit}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([loading]){pointer-events:none}:host([loading]) button,:host([loading]) a{pointer-events:none;opacity:var(--calcite-ui-opacity-disabled)}@keyframes loader-in{0%{inline-size:0;opacity:0;transform:scale(0.5)}100%{inline-size:1em;opacity:1;transform:scale(1)}}@keyframes loader-out{0%{inline-size:1em;opacity:1;transform:scale(1)}100%{inline-size:0;opacity:0;transform:scale(0.5)}}.calcite-button--loader{display:flex}.calcite-button--loader calcite-loader{margin:0px;transition:inline-size var(--calcite-internal-animation-timing-slow) ease-in-out, opacity var(--calcite-internal-animation-timing-slow) ease-in-out, transform var(--calcite-internal-animation-timing-slow) ease-in-out}.calcite-button--loader calcite-loader.loading-in{animation-name:loader-in;animation-duration:var(--calcite-internal-animation-timing-slow)}.calcite-button--loader calcite-loader.loading-out{animation-name:loader-out;animation-duration:var(--calcite-internal-animation-timing-slow)}:host([loading]) button.content--slotted .calcite-button--loader calcite-loader,:host([loading]) a.content--slotted .calcite-button--loader calcite-loader{margin-inline-end:var(--calcite-button-content-margin-internal)}:host([loading]) button:not(.content--slotted) .icon--start,:host([loading]) button:not(.content--slotted) .icon--end,:host([loading]) a:not(.content--slotted) .icon--start,:host([loading]) a:not(.content--slotted) .icon--end{display:none}:host([appearance]) button,:host([appearance]) a{border-width:1px;border-style:solid;border-color:transparent}:host([kind=brand]) button,:host([kind=brand]) a{background-color:var(--calcite-ui-brand);color:var(--calcite-ui-text-inverse)}:host([kind=brand]) button:hover,:host([kind=brand]) button:focus,:host([kind=brand]) a:hover,:host([kind=brand]) a:focus{background-color:var(--calcite-ui-brand-hover)}:host([kind=brand]) button:active,:host([kind=brand]) a:active{background-color:var(--calcite-ui-brand-press)}:host([kind=brand]) button calcite-loader,:host([kind=brand]) a calcite-loader{color:var(--calcite-ui-text-inverse)}:host([kind=danger]) button,:host([kind=danger]) a{background-color:var(--calcite-ui-danger);color:var(--calcite-ui-text-inverse)}:host([kind=danger]) button:hover,:host([kind=danger]) button:focus,:host([kind=danger]) a:hover,:host([kind=danger]) a:focus{background-color:var(--calcite-ui-danger-hover)}:host([kind=danger]) button:active,:host([kind=danger]) a:active{background-color:var(--calcite-ui-danger-press)}:host([kind=danger]) button calcite-loader,:host([kind=danger]) a calcite-loader{color:var(--calcite-ui-text-inverse)}:host([kind=neutral]) button,:host([kind=neutral]) a{background-color:var(--calcite-ui-foreground-3);color:var(--calcite-ui-text-1)}:host([kind=neutral]) button:hover,:host([kind=neutral]) button:focus,:host([kind=neutral]) a:hover,:host([kind=neutral]) a:focus{background-color:var(--calcite-ui-foreground-2)}:host([kind=neutral]) button:active,:host([kind=neutral]) a:active{background-color:var(--calcite-ui-foreground-1)}:host([kind=neutral]) button calcite-loader,:host([kind=neutral]) a calcite-loader{color:var(--calcite-ui-text-1)}:host([kind=inverse]) button,:host([kind=inverse]) a{color:var(--calcite-ui-text-inverse);background-color:var(--calcite-ui-inverse)}:host([kind=inverse]) button:hover,:host([kind=inverse]) button:focus,:host([kind=inverse]) a:hover,:host([kind=inverse]) a:focus{background-color:var(--calcite-ui-inverse-hover)}:host([kind=inverse]) button:active,:host([kind=inverse]) a:active{background-color:var(--calcite-ui-inverse-press)}:host([kind=inverse]) button calcite-loader,:host([kind=inverse]) a calcite-loader{color:var(--calcite-ui-text-inverse)}:host([appearance=outline-fill]) button,:host([appearance=outline-fill]) a{border-width:1px;border-style:solid;background-color:var(--calcite-ui-foreground-1);box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline-fill][kind=brand]) button,:host([appearance=outline-fill][kind=brand]) a{border-color:var(--calcite-ui-brand);background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-brand)}:host([appearance=outline-fill][kind=brand]) button:hover,:host([appearance=outline-fill][kind=brand]) a:hover{border-color:var(--calcite-ui-brand-hover);color:var(--calcite-ui-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-brand-hover)}:host([appearance=outline-fill][kind=brand]) button:focus,:host([appearance=outline-fill][kind=brand]) a:focus{border-color:var(--calcite-ui-brand);color:var(--calcite-ui-brand);box-shadow:inset 0 0 0 2px var(--calcite-ui-brand)}:host([appearance=outline-fill][kind=brand]) button:active,:host([appearance=outline-fill][kind=brand]) a:active{border-color:var(--calcite-ui-brand-press);color:var(--calcite-ui-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-brand-press)}:host([appearance=outline-fill][kind=brand]) button calcite-loader,:host([appearance=outline-fill][kind=brand]) a calcite-loader{color:var(--calcite-ui-brand)}:host([appearance=outline-fill][kind=danger]) button,:host([appearance=outline-fill][kind=danger]) a{border-color:var(--calcite-ui-danger);background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-danger)}:host([appearance=outline-fill][kind=danger]) button:hover,:host([appearance=outline-fill][kind=danger]) a:hover{border-color:var(--calcite-ui-danger-hover);color:var(--calcite-ui-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-danger-hover)}:host([appearance=outline-fill][kind=danger]) button:focus,:host([appearance=outline-fill][kind=danger]) a:focus{border-color:var(--calcite-ui-danger);color:var(--calcite-ui-danger);box-shadow:inset 0 0 0 2px var(--calcite-ui-danger)}:host([appearance=outline-fill][kind=danger]) button:active,:host([appearance=outline-fill][kind=danger]) a:active{border-color:var(--calcite-ui-danger-press);color:var(--calcite-ui-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-danger-press)}:host([appearance=outline-fill][kind=danger]) button calcite-loader,:host([appearance=outline-fill][kind=danger]) a calcite-loader{color:var(--calcite-ui-danger)}:host([appearance=outline-fill][kind=neutral]) button,:host([appearance=outline-fill][kind=neutral]) a{background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-1);border-color:var(--calcite-ui-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:hover,:host([appearance=outline-fill][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-ui-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:focus,:host([appearance=outline-fill][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button:active,:host([appearance=outline-fill][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3)}:host([appearance=outline-fill][kind=neutral]) button calcite-loader,:host([appearance=outline-fill][kind=neutral]) a calcite-loader{color:var(--calcite-ui-text-1)}:host([appearance=outline-fill][kind=inverse]) button,:host([appearance=outline-fill][kind=inverse]) a{background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-1);border-color:var(--calcite-ui-inverse)}:host([appearance=outline-fill][kind=inverse]) button:hover,:host([appearance=outline-fill][kind=inverse]) a:hover{border-color:var(--calcite-ui-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-inverse-hover)}:host([appearance=outline-fill][kind=inverse]) button:focus,:host([appearance=outline-fill][kind=inverse]) a:focus{border-color:var(--calcite-ui-inverse);box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse)}:host([appearance=outline-fill][kind=inverse]) button:active,:host([appearance=outline-fill][kind=inverse]) a:active{border-color:var(--calcite-ui-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse-press)}:host([appearance=outline-fill][kind=inverse]) button calcite-loader,:host([appearance=outline-fill][kind=inverse]) a calcite-loader{color:var(--calcite-ui-text-1)}:host([appearance=outline]) button,:host([appearance=outline]) a{border-width:1px;border-style:solid;background-color:transparent;box-shadow:inset 0 0 0 1px transparent}:host([appearance=outline][kind=brand]) button,:host([appearance=outline][kind=brand]) a{border-color:var(--calcite-ui-brand);background-color:transparent;color:var(--calcite-ui-brand)}:host([appearance=outline][kind=brand]) button:hover,:host([appearance=outline][kind=brand]) a:hover{border-color:var(--calcite-ui-brand-hover);color:var(--calcite-ui-brand-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-brand-hover)}:host([appearance=outline][kind=brand]) button:focus,:host([appearance=outline][kind=brand]) a:focus{border-color:var(--calcite-ui-brand);color:var(--calcite-ui-brand);box-shadow:inset 0 0 0 2px var(--calcite-ui-brand)}:host([appearance=outline][kind=brand]) button:active,:host([appearance=outline][kind=brand]) a:active{border-color:var(--calcite-ui-brand-press);color:var(--calcite-ui-brand-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-brand-press)}:host([appearance=outline][kind=brand]) button calcite-loader,:host([appearance=outline][kind=brand]) a calcite-loader{color:var(--calcite-ui-brand)}:host([appearance=outline][kind=danger]) button,:host([appearance=outline][kind=danger]) a{border-color:var(--calcite-ui-danger);background-color:transparent;color:var(--calcite-ui-danger)}:host([appearance=outline][kind=danger]) button:hover,:host([appearance=outline][kind=danger]) a:hover{border-color:var(--calcite-ui-danger-hover);color:var(--calcite-ui-danger-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-danger-hover)}:host([appearance=outline][kind=danger]) button:focus,:host([appearance=outline][kind=danger]) a:focus{border-color:var(--calcite-ui-danger);color:var(--calcite-ui-danger);box-shadow:inset 0 0 0 2px var(--calcite-ui-danger)}:host([appearance=outline][kind=danger]) button:active,:host([appearance=outline][kind=danger]) a:active{border-color:var(--calcite-ui-danger-press);color:var(--calcite-ui-danger-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-danger-press)}:host([appearance=outline][kind=danger]) button calcite-loader,:host([appearance=outline][kind=danger]) a calcite-loader{color:var(--calcite-ui-danger)}:host([appearance=outline][kind=neutral]) button,:host([appearance=outline][kind=neutral]) a{background-color:transparent;color:var(--calcite-ui-text-1);border-color:var(--calcite-ui-border-1)}:host([appearance=outline][kind=neutral]) button:hover,:host([appearance=outline][kind=neutral]) a:hover{box-shadow:inset 0 0 0 1px var(--calcite-ui-foreground-3)}:host([appearance=outline][kind=neutral]) button:focus,:host([appearance=outline][kind=neutral]) a:focus{box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3)}:host([appearance=outline][kind=neutral]) button:active,:host([appearance=outline][kind=neutral]) a:active{box-shadow:inset 0 0 0 2px var(--calcite-ui-foreground-3)}:host([appearance=outline][kind=neutral]) button calcite-loader,:host([appearance=outline][kind=neutral]) a calcite-loader{color:var(--calcite-ui-text-1)}:host([appearance=outline][kind=inverse]) button,:host([appearance=outline][kind=inverse]) a{background-color:transparent;color:var(--calcite-ui-text-1);border-color:var(--calcite-ui-inverse)}:host([appearance=outline][kind=inverse]) button:hover,:host([appearance=outline][kind=inverse]) a:hover{border-color:var(--calcite-ui-inverse-hover);box-shadow:inset 0 0 0 1px var(--calcite-ui-inverse-hover)}:host([appearance=outline][kind=inverse]) button:focus,:host([appearance=outline][kind=inverse]) a:focus{border-color:var(--calcite-ui-inverse);box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse)}:host([appearance=outline][kind=inverse]) button:active,:host([appearance=outline][kind=inverse]) a:active{border-color:var(--calcite-ui-inverse-press);box-shadow:inset 0 0 0 2px var(--calcite-ui-inverse-press)}:host([appearance=outline][kind=inverse]) button calcite-loader,:host([appearance=outline][kind=inverse]) a calcite-loader{color:var(--calcite-ui-text-1)}:host([appearance=outline-fill][split-child=primary]) button,:host([appearance=outline][split-child=primary]) button{border-inline-end-width:0;border-inline-start-width:1px}:host([appearance=outline-fill][split-child=secondary]) button,:host([appearance=outline][split-child=secondary]) button{border-inline-start-width:0;border-inline-end-width:1px}:host([appearance=transparent]:not(.enable-editing-button)) button,:host([appearance=transparent]:not(.enable-editing-button)) a{background-color:transparent}:host([appearance=transparent]:not(.enable-editing-button)) button:hover,:host([appearance=transparent]:not(.enable-editing-button)) button:focus,:host([appearance=transparent]:not(.enable-editing-button)) a:hover,:host([appearance=transparent]:not(.enable-editing-button)) a:focus{background-color:var(--calcite-button-transparent-hover)}:host([appearance=transparent]:not(.enable-editing-button)) button:active,:host([appearance=transparent]:not(.enable-editing-button)) a:active{background-color:var(--calcite-button-transparent-press)}:host([appearance=transparent][kind=brand]) button,:host([appearance=transparent][kind=brand]) a{color:var(--calcite-ui-brand)}:host([appearance=transparent][kind=brand]) button:hover,:host([appearance=transparent][kind=brand]) a:hover{color:var(--calcite-ui-brand-hover)}:host([appearance=transparent][kind=brand]) button:focus,:host([appearance=transparent][kind=brand]) a:focus{color:var(--calcite-ui-brand)}:host([appearance=transparent][kind=brand]) button:active,:host([appearance=transparent][kind=brand]) a:active{color:var(--calcite-ui-brand-press)}:host([appearance=transparent][kind=brand]) button calcite-loader,:host([appearance=transparent][kind=brand]) a calcite-loader{color:var(--calcite-ui-brand)}:host([appearance=transparent][kind=danger]) button,:host([appearance=transparent][kind=danger]) a{color:var(--calcite-ui-danger)}:host([appearance=transparent][kind=danger]) button:hover,:host([appearance=transparent][kind=danger]) a:hover{color:var(--calcite-ui-danger-hover)}:host([appearance=transparent][kind=danger]) button:focus,:host([appearance=transparent][kind=danger]) a:focus{color:var(--calcite-ui-danger)}:host([appearance=transparent][kind=danger]) button:active,:host([appearance=transparent][kind=danger]) a:active{color:var(--calcite-ui-danger-press)}:host([appearance=transparent][kind=danger]) button calcite-loader,:host([appearance=transparent][kind=danger]) a calcite-loader{color:var(--calcite-ui-danger)}:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) button,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) a,:host([appearance=transparent][kind=neutral]:not(.cancel-editing-button)) calcite-loader{color:var(--calcite-ui-text-1)}:host([appearance=transparent][kind=neutral].cancel-editing-button) button{border-block-start-width:1px;border-block-end-width:1px;color:var(--calcite-ui-text-3);border-block-start-color:var(--calcite-ui-border-input);border-block-end-color:var(--calcite-ui-border-input);border-block-style:solid}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:not(.content--slotted){--calcite-button-padding-y-internal:0}:host([appearance=transparent][kind=neutral].cancel-editing-button) button:hover{color:var(--calcite-ui-text-1)}:host([appearance=transparent][kind=neutral].enable-editing-button) button{background-color:transparent}:host(.confirm-changes-button) button:focus,:host(.cancel-editing-button) button:focus,:host(.enable-editing-button) button:focus{outline-offset:-2px}:host([appearance=transparent][kind=inverse]) button,:host([appearance=transparent][kind=inverse]) a,:host([appearance=transparent][kind=inverse]) calcite-loader{color:var(--calcite-ui-text-inverse)}:host([scale=s]) button.content--slotted,:host([scale=s]) a.content--slotted{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s][appearance=transparent]) button.content--slotted,:host([scale=s][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.5rem}:host([scale=s]) button,:host([scale=s]) a{--calcite-button-padding-y-internal:3px}:host([scale=m]) button.content--slotted,:host([scale=m]) a.content--slotted{--calcite-button-padding-x-internal:11px;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) button,:host([scale=m]) a{--calcite-button-padding-y-internal:7px}:host([scale=m][appearance=transparent]) button.content--slotted,:host([scale=m][appearance=transparent]) a.content--slotted{--calcite-button-padding-x-internal:0.75rem}:host([scale=l]) button.content--slotted,:host([scale=l]) a.content--slotted{--calcite-button-padding-x-internal:15px;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) .button-padding{--calcite-button-padding-x-internal:1rem;--calcite-button-padding-y-internal:11px}:host([scale=l]) .button-padding--shrunk{--calcite-button-padding-y-internal:9px}:host([scale=s]) button:not(.content--slotted),:host([scale=s]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:3px;inline-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:1.5rem}:host([scale=m]) button:not(.content--slotted),:host([scale=m]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:7px;inline-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2rem}:host([scale=l]) button:not(.content--slotted),:host([scale=l]) a:not(.content--slotted){--calcite-button-padding-x-internal:0.125rem;--calcite-button-padding-y-internal:9px;inline-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;min-block-size:2.75rem}:host([scale=l][appearance=transparent]) button:not(.content--slotted),:host([scale=l][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-y-internal:0.625rem}:host([scale=s][icon-start][icon-end]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:23px;block-size:1.5rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=s][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=s][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:1.5rem}:host([scale=m][icon-start][icon-end]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:2rem;block-size:2rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=m][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:33px}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end]) a:not(.content--slotted){--calcite-button-padding-x-internal:43px;block-size:2.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l][icon-start][icon-end]) button:not(.content--slotted) .icon--start+.icon--end,:host([scale=l][icon-start][icon-end]) a:not(.content--slotted) .icon--start+.icon--end{margin-inline-start:1rem}:host([scale=l][icon-start][icon-end][appearance=transparent]) button:not(.content--slotted),:host([scale=l][icon-start][icon-end][appearance=transparent]) a:not(.content--slotted){--calcite-button-padding-x-internal:2.75rem}",Fut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.mutationObserver=Pi("mutation",()=>this.updateHasContent()),this.handleClick=()=>{const{type:t}=this;this.href||(t==="submit"?gL(this):t==="reset"&&_ut(this))},this.alignment="center",this.appearance="solid",this.label=void 0,this.kind="brand",this.disabled=!1,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.loading=!1,this.name=void 0,this.rel=void 0,this.round=!1,this.scale="m",this.splitChild=!1,this.target=void 0,this.type="button",this.width="auto",this.messages=void 0,this.messageOverrides=void 0,this.hasContent=!1,this.hasLoader=!1,this.effectiveLocale="",this.defaultMessages=void 0}loadingChanged(t,e){t&&!e&&(this.hasLoader=!0),!t&&e&&window.setTimeout(()=>{this.hasLoader=!1},300)}onMessagesChange(){}async connectedCallback(){hn(this),dr(this),this.hasLoader=this.loading,this.setupTextContentObserver(),id(this),this.formEl=Qu(this.el,"form")}disconnectedCallback(){var t;(t=this.mutationObserver)==null||t.disconnect(),qh(this),pn(this),hr(this),this.formEl=null}async componentWillLoad(){Ui(this),this.updateHasContent(),await cr(this)}componentDidLoad(){Bi(this)}componentDidRender(){lr(this)}render(){const t=this.href?"a":"button",e=t,i=this.hasLoader?I("div",{class:Zo.buttonLoader},I("calcite-loader",{class:this.loading?Zo.loadingIn:Zo.loadingOut,inline:!0,label:this.messages.loading,scale:this.scale==="l"?"m":"s"})):null,n=!this.iconStart&&!this.iconEnd,r=I("calcite-icon",{class:{[Zo.icon]:!0,[Zo.iconStart]:!0},flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:this.scale==="l"?"m":"s"}),s=I("calcite-icon",{class:{[Zo.icon]:!0,[Zo.iconEnd]:!0},flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:this.scale==="l"?"m":"s"}),o=I("span",{class:Zo.content},I("slot",null));return I(e,{"aria-label":Vc(this),class:{[Zo.buttonPadding]:n,[Zo.buttonPaddingShrunk]:!n,[Zo.contentSlotted]:this.hasContent,[Zo.iconStartEmpty]:!this.iconStart,[Zo.iconEndEmpty]:!this.iconEnd},disabled:this.disabled||this.loading,href:t==="a"&&this.href,name:t==="button"&&this.name,onClick:this.handleClick,ref:a=>this.childEl=a,rel:t==="a"&&this.rel,tabIndex:this.disabled||this.loading?-1:null,target:t==="a"&&this.target,type:t==="button"&&this.type},i,this.iconStart?r:null,this.hasContent?o:null,this.iconEnd?s:null)}async setFocus(){var t;await Hi(this),(t=this.childEl)==null||t.focus()}effectiveLocaleChange(){ur(this,this.effectiveLocale)}updateHasContent(){var e,i;const t=this.el.textContent.trim().length>0||this.el.childNodes.length>0;this.hasContent=this.el.childNodes.length===1&&((e=this.el.childNodes[0])==null?void 0:e.nodeName)==="#text"?((i=this.el.textContent)==null?void 0:i.trim().length)>0:t}setupTextContentObserver(){var t;(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0})}onLabelClick(){this.handleClick(),this.setFocus()}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{loading:["loadingChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Dut}},[1,"calcite-button",{alignment:[513],appearance:[513],label:[1],kind:[513],disabled:[516],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],loading:[516],name:[513],rel:[513],round:[516],scale:[513],splitChild:[520,"split-child"],target:[513],type:[1537],width:[513],messages:[1040],messageOverrides:[1040],hasContent:[32],hasLoader:[32],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]}]);function Zbe(){if(typeof customElements>"u")return;["calcite-button","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-button":customElements.get(e)||customElements.define(e,Fut);break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-loader":customElements.get(e)||Bo();break}})}Zbe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Wt={modal:"modal",modalOpen:"modal--open",title:"title",header:"header",footer:"footer",scrim:"scrim",back:"back",close:"close",secondary:"secondary",primary:"primary",overflowHidden:"overflow-hidden",container:"container",content:"content",contentNoFooter:"content--no-footer",slottedInShell:"slotted-in-shell",openingIdle:"modal--opening-idle",openingActive:"modal--opening-active",closingIdle:"modal--closing-idle",closingActive:"modal--closing-active"},Nut={close:"x"},vd={content:"content",header:"header",back:"back",secondary:"secondary",primary:"primary"},zut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:absolute;inset:0px;z-index:700;display:flex;opacity:0;visibility:hidden !important;transition:visibility 0ms linear var(--calcite-internal-animation-timing-slow), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88);--calcite-modal-scrim-background-internal:rgba(0, 0, 0, 0.85)}.container{position:fixed;inset:0px;z-index:700;display:flex;align-items:center;justify-content:center;overflow-y:hidden;color:var(--calcite-ui-text-2);opacity:0;visibility:hidden !important;transition:visibility 0ms linear var(--calcite-internal-animation-timing-slow), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88)}:host([scale=s]){--calcite-modal-padding-internal:0.75rem;--calcite-modal-padding-large-internal:1rem;--calcite-modal-title-text-internal:var(--calcite-font-size-1);--calcite-modal-content-text-internal:var(--calcite-font-size--1)}:host([scale=m]){--calcite-modal-padding-internal:1rem;--calcite-modal-padding-large-internal:1.25rem;--calcite-modal-title-text-internal:var(--calcite-font-size-2);--calcite-modal-content-text-internal:var(--calcite-font-size-0)}:host([scale=l]){--calcite-modal-padding-internal:1.25rem;--calcite-modal-padding-large-internal:1.5rem;--calcite-modal-title-text-internal:var(--calcite-font-size-3);--calcite-modal-content-text-internal:var(--calcite-font-size-1)}.scrim{--calcite-scrim-background:var(--calcite-modal-scrim-background, var(--calcite-modal-scrim-background-internal));position:fixed;inset:0px;display:flex;overflow-y:hidden}.modal{pointer-events:none;z-index:800;float:none;margin:1.5rem;box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;overflow:hidden;border-radius:0.25rem;background-color:var(--calcite-ui-foreground-1);opacity:0;--tw-shadow:0 2px 12px -4px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.16);--tw-shadow-colored:0 2px 12px -4px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);-webkit-overflow-scrolling:touch;visibility:hidden;transition:transform var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), visibility 0ms linear var(--calcite-internal-animation-timing-slow), opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88);--calcite-modal-hidden-position:translate3d(0, 20px, 0);--calcite-modal-shown-position:translate3d(0, 0, 0)}.modal--opening-idle{transform:var(--calcite-modal-hidden-position)}.modal--opening-active{transform:var(--calcite-modal-shown-position)}.modal--closing-idle{transform:var(--calcite-modal-shown-position)}.modal--closing-active{transform:var(--calcite-modal-hidden-position)}:host([open]){opacity:1;visibility:visible !important;transition-delay:0ms}:host([open]) .container{opacity:1;visibility:visible !important;transition-delay:0ms}:host([open]) .container .modal--open{pointer-events:auto;visibility:visible;opacity:1;transition:transform var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), visibility 0ms linear, opacity var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), max-inline-size var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88), max-block-size var(--calcite-internal-animation-timing-slow) cubic-bezier(0.215, 0.44, 0.42, 0.88);transition-delay:0ms}.header{z-index:400;display:flex;min-inline-size:0px;max-inline-size:100%;border-start-start-radius:0.25rem;border-start-end-radius:0.25rem;border-width:0px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);background-color:var(--calcite-ui-foreground-1);flex:0 0 auto}.close{order:2;margin:0px;cursor:pointer;-webkit-appearance:none;appearance:none;border-style:none;background-color:transparent;color:var(--calcite-ui-text-3);outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-block:var(--calcite-modal-padding-internal);padding-inline:var(--calcite-modal-padding-internal);flex:0 0 auto}.close calcite-icon{pointer-events:none;vertical-align:-2px}.close:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.close:hover,.close:focus,.close:active{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1)}.title{order:1;display:flex;min-inline-size:0px;align-items:center;flex:1 1 auto;padding-block:var(--calcite-modal-padding-internal);padding-inline:var(--calcite-modal-padding-large-internal)}slot[name=header]::slotted(*),*::slotted([slot=header]){margin:0px;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-ui-text-1);font-size:var(--calcite-modal-title-text-internal)}.content{position:relative;box-sizing:border-box;display:block;block-size:100%;overflow:auto;padding:0px;max-block-size:100%;background-color:var(--calcite-modal-content-background, var(--calcite-ui-foreground-1));padding-block:var(--calcite-modal-content-padding, var(--calcite-modal-padding-internal));padding-inline:var(--calcite-modal-content-padding, var(--calcite-modal-padding-internal))}.content--no-footer{border-end-end-radius:0.25rem;border-end-start-radius:0.25rem}slot[name=content]::slotted(*),*::slotted([slot=content]){font-size:var(--calcite-modal-context-text-internal)}.footer{z-index:400;margin-block-start:auto;box-sizing:border-box;display:flex;inline-size:100%;justify-content:space-between;border-end-end-radius:0.25rem;border-end-start-radius:0.25rem;border-width:0px;border-block-start-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);background-color:var(--calcite-ui-foreground-1);flex:0 0 auto;padding-block:var(--calcite-modal-padding-internal);padding-inline:var(--calcite-modal-padding-large-internal)}.footer--hide-back .back,.footer--hide-secondary .secondary{display:none}.back{display:block;margin-inline-end:auto}.secondary{margin-inline:0.25rem;display:block}slot[name=primary]{display:block}:host([width=small]) .modal{inline-size:auto}:host([width=s]) .modal{max-block-size:100%;max-inline-size:100%;inline-size:var(--calcite-modal-width, 32rem);block-size:var(--calcite-modal-height, auto)}@media screen and (max-width: 35rem){:host([width=s]) .modal{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%}:host([width=s]) .content{flex:1 1 auto;max-block-size:unset}:host([width=s][docked]) .container{align-items:flex-end}}:host([width=m]) .modal{max-block-size:100%;max-inline-size:100%;inline-size:var(--calcite-modal-width, 48rem);block-size:var(--calcite-modal-height, auto)}@media screen and (max-width: 51rem){:host([width=m]) .modal{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%}:host([width=m]) .content{flex:1 1 auto;max-block-size:unset}:host([width=m][docked]) .container{align-items:flex-end}}:host([width=l]) .modal{max-block-size:100%;max-inline-size:100%;inline-size:var(--calcite-modal-width, 94rem);block-size:var(--calcite-modal-height, auto)}@media screen and (max-width: 97rem){:host([width=l]) .modal{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%}:host([width=l]) .content{flex:1 1 auto;max-block-size:unset}:host([width=l][docked]) .container{align-items:flex-end}}:host([fullscreen]) .modal{margin:0px;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;border-radius:0px;--calcite-modal-hidden-position:translate3D(0, 20px, 0) scale(0.95);--calcite-modal-shown-position:translate3D(0, 0, 0) scale(1)}:host([fullscreen]) .content{max-block-size:100%;flex:1 1 auto}:host([open][fullscreen]) .header{border-radius:0}:host([open][fullscreen]) .footer{border-radius:0}:host([docked]) .modal{block-size:var(--calcite-modal-height, auto)}:host([docked]) .content{block-size:auto;flex:1 1 auto}:host([kind=brand]) .modal{border-color:var(--calcite-ui-brand)}:host([kind=danger]) .modal{border-color:var(--calcite-ui-danger)}:host([kind=info]) .modal{border-color:var(--calcite-ui-info)}:host([kind=success]) .modal{border-color:var(--calcite-ui-success)}:host([kind=warning]) .modal{border-color:var(--calcite-ui-warning)}:host([kind=brand]) .modal,:host([kind=danger]) .modal,:host([kind=info]) .modal,:host([kind=success]) .modal,:host([kind=warning]) .modal{border-width:0px;border-block-start-width:4px;border-style:solid}:host([kind=brand]) .header,:host([kind=danger]) .header,:host([kind=info]) .header,:host([kind=success]) .header,:host([kind=warning]) .header{border-radius:0.25rem;border-end-end-radius:0px;border-end-start-radius:0px}@media screen and (max-width: 860px){slot[name=header]::slotted(*),*::slotted([slot=header]){font-size:var(--calcite-font-size-1)}.footer{position:sticky;inset-block-end:0px}}@media screen and (max-width: 480px){.footer{flex-direction:column}.back,.secondary{margin:0px;margin-block-end:0.25rem}}.container.slotted-in-shell{position:absolute;pointer-events:auto}.container.slotted-in-shell calcite-scrim{position:absolute}",jut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteModalBeforeClose=ue(this,"calciteModalBeforeClose",6),this.calciteModalClose=ue(this,"calciteModalClose",6),this.calciteModalBeforeOpen=ue(this,"calciteModalBeforeOpen",6),this.calciteModalOpen=ue(this,"calciteModalOpen",6),this.mutationObserver=Pi("mutation",()=>{this.updateFooterVisibility()}),this.cssVarObserver=Pi("mutation",()=>{this.updateSizeCssVars()}),this.openTransitionProp="opacity",this.setTransitionEl=t=>{this.transitionEl=t,this.focusTrapEl=t,Hbe(this)},this.openEnd=()=>{this.setFocus(),this.el.removeEventListener("calciteModalOpen",this.openEnd)},this.handleOutsideClose=()=>{this.outsideCloseDisabled||this.close()},this.close=()=>this.beforeClose(this.el).then(()=>{this.open=!1,this.isOpen=!1,this.removeOverflowHiddenClass()}),this.updateFooterVisibility=()=>{this.hasFooter=!!Wr(this.el,[vd.back,vd.primary,vd.secondary])},this.updateSizeCssVars=()=>{this.cssWidth=getComputedStyle(this.el).getPropertyValue("--calcite-modal-width"),this.cssHeight=getComputedStyle(this.el).getPropertyValue("--calcite-modal-height")},this.open=!1,this.beforeClose=()=>Promise.resolve(),this.closeButtonDisabled=!1,this.focusTrapDisabled=!1,this.outsideCloseDisabled=!1,this.docked=void 0,this.escapeDisabled=!1,this.scale="m",this.width="m",this.fullscreen=void 0,this.kind=void 0,this.messages=void 0,this.messageOverrides=void 0,this.slottedInShell=void 0,this.cssWidth=void 0,this.cssHeight=void 0,this.hasFooter=!0,this.isOpen=!1,this.effectiveLocale=void 0,this.defaultMessages=void 0}handlefocusTrapDisabled(t){this.open&&(t?q_(this):sP(this))}onMessagesChange(){}async componentWillLoad(){await cr(this),Ui(this),this.open&&(lie(this),requestAnimationFrame(()=>this.openModal()))}componentDidLoad(){Bi(this)}connectedCallback(){var t,e;(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0}),(e=this.cssVarObserver)==null||e.observe(this.el,{attributeFilter:["style"]}),this.updateFooterVisibility(),this.updateSizeCssVars(),ed(this),hn(this),dr(this)}disconnectedCallback(){var t,e;this.removeOverflowHiddenClass(),(t=this.mutationObserver)==null||t.disconnect(),(e=this.cssVarObserver)==null||e.disconnect(),td(this),q_(this),pn(this),hr(this),this.slottedInShell=!1}render(){return I(Ft,{"aria-describedby":this.contentId,"aria-labelledby":this.titleId,"aria-modal":"true",role:"dialog"},I("div",{class:{[Wt.container]:!0,[Wt.slottedInShell]:this.slottedInShell}},I("calcite-scrim",{class:Wt.scrim,onClick:this.handleOutsideClose}),this.renderStyle(),I("div",{class:{[Wt.modal]:!0,[Wt.modalOpen]:this.isOpen},ref:this.setTransitionEl},I("div",{class:Wt.header},this.renderCloseButton(),I("header",{class:Wt.title},I("slot",{name:Wt.header}))),I("div",{class:{[Wt.content]:!0,[Wt.contentNoFooter]:!this.hasFooter},ref:t=>this.modalContent=t},I("slot",{name:vd.content})),this.renderFooter())))}renderFooter(){return this.hasFooter?I("div",{class:Wt.footer,key:"footer"},I("span",{class:Wt.back},I("slot",{name:vd.back})),I("span",{class:Wt.secondary},I("slot",{name:vd.secondary})),I("span",{class:Wt.primary},I("slot",{name:vd.primary}))):null}renderCloseButton(){return this.closeButtonDisabled?null:I("button",{"aria-label":this.messages.close,class:Wt.close,key:"button",onClick:this.close,ref:t=>this.closeButtonEl=t,title:this.messages.close},I("calcite-icon",{icon:Nut.close,scale:this.scale==="s"?"s":this.scale==="m"?"m":this.scale==="l"?"l":null}))}renderStyle(){if(!this.fullscreen&&(this.cssWidth||this.cssHeight))return I("style",null,`.${Wt.container} {
              ${this.docked&&this.cssWidth?"align-items: center !important;":""}
            }
            .${Wt.modal} {
              block-size: ${this.cssHeight?this.cssHeight:"auto"} !important;
              ${this.cssWidth?`inline-size: ${this.cssWidth} !important;`:""}
              ${this.cssWidth?`max-inline-size: ${this.cssWidth} !important;`:""}
              ${this.docked?"border-radius: var(--calcite-border-radius) !important;":""}
            }
            @media screen and (max-width: ${this.cssWidth}) {
              .${Wt.container} {
                ${this.docked?"align-items: flex-end !important;":""}
              }
              .${Wt.modal} {
                max-block-size: 100% !important;
                inline-size: 100% !important;
                max-inline-size: 100% !important;
                min-inline-size: 100% !important;
                margin: 0 !important;
                ${this.docked?"":"block-size: 100% !important;"}
                ${this.docked?"":"border-radius: 0 !important;"}
                ${this.docked?"border-radius: var(--calcite-border-radius) var(--calcite-border-radius) 0 0 !important;":""}
              }
            }
          `)}effectiveLocaleChange(){ur(this,this.effectiveLocale)}handleEscape(t){this.open&&!this.escapeDisabled&&t.key==="Escape"&&!t.defaultPrevented&&(this.close(),t.preventDefault())}async setFocus(){await Hi(this),nB(this.focusTrapEl)}async updateFocusTrapElements(){Gbe(this)}async scrollContent(t=0,e=0){this.modalContent&&(this.modalContent.scrollTo?this.modalContent.scrollTo({top:t,left:e,behavior:"smooth"}):(this.modalContent.scrollTop=t,this.modalContent.scrollLeft=e))}onBeforeOpen(){this.transitionEl.classList.add(Wt.openingActive),this.calciteModalBeforeOpen.emit()}onOpen(){this.transitionEl.classList.remove(Wt.openingIdle,Wt.openingActive),this.calciteModalOpen.emit(),sP(this)}onBeforeClose(){this.transitionEl.classList.add(Wt.closingActive),this.calciteModalBeforeClose.emit()}onClose(){this.transitionEl.classList.remove(Wt.closingIdle,Wt.closingActive),this.calciteModalClose.emit(),q_(this)}async toggleModal(t){var e,i;lie(this),t?((e=this.transitionEl)==null||e.classList.add(Wt.openingIdle),this.openModal()):((i=this.transitionEl)==null||i.classList.add(Wt.closingIdle),this.close())}openModal(){this.el.addEventListener("calciteModalOpen",this.openEnd),this.open=!0,this.isOpen=!0;const t=Wr(this.el,vd.header),e=Wr(this.el,vd.content);this.titleId=BJ(t),this.contentId=BJ(e),this.slottedInShell||document.documentElement.classList.add(Wt.overflowHidden)}removeOverflowHiddenClass(){document.documentElement.classList.remove(Wt.overflowHidden)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{focusTrapDisabled:["handlefocusTrapDisabled"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"],open:["toggleModal"]}}static get style(){return zut}},[1,"calcite-modal",{open:[1540],beforeClose:[16],closeButtonDisabled:[516,"close-button-disabled"],focusTrapDisabled:[516,"focus-trap-disabled"],outsideCloseDisabled:[516,"outside-close-disabled"],docked:[516],escapeDisabled:[516,"escape-disabled"],scale:[513],width:[513],fullscreen:[516],kind:[513],messages:[1040],messageOverrides:[1040],slottedInShell:[1028,"slotted-in-shell"],cssWidth:[32],cssHeight:[32],hasFooter:[32],isOpen:[32],effectiveLocale:[32],defaultMessages:[32],setFocus:[64],updateFocusTrapElements:[64],scrollContent:[64]},[[8,"keydown","handleEscape"]]]);function Vut(){if(typeof customElements>"u")return;["calcite-modal","calcite-icon","calcite-loader","calcite-scrim"].forEach(e=>{switch(e){case"calcite-modal":customElements.get(e)||customElements.define(e,jut);break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-loader":customElements.get(e)||Bo();break;case"calcite-scrim":customElements.get(e)||fL();break}})}Vut();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Uut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([selected]) section,:host([selected]) .container{display:block}:host{display:none;block-size:100%;inline-size:100%}:host([selected]){display:block;block-size:100%;inline-size:100%;overflow:auto}section,.container{display:none;block-size:100%;inline-size:100%}:host([scale=s]){padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){font-size:var(--calcite-font-size-0);line-height:1.25rem;padding-block:13px}",But=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalTabRegister=ue(this,"calciteInternalTabRegister",6),this.guid=`calcite-tab-title-${Ts()}`,this.tab=void 0,this.selected=!1,this.scale="m",this.labeledBy=void 0}render(){const t=this.el.id||this.guid;return I(Ft,{"aria-labelledby":this.labeledBy,id:t},I("div",{class:"container",role:"tabpanel",tabIndex:this.selected?0:-1},I("section",null,I("slot",null))))}connectedCallback(){this.parentTabsEl=this.el.closest("calcite-tabs")}componentDidLoad(){this.calciteInternalTabRegister.emit()}componentWillRender(){var t;this.scale=(t=this.parentTabsEl)==null?void 0:t.scale}disconnectedCallback(){var t;(t=document.body)==null||t.dispatchEvent(new CustomEvent("calciteTabUnregister",{detail:this.el}))}internalTabChangeHandler(t){t.composedPath().find(i=>i.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===t.detail.tab:this.getTabIndex().then(i=>{this.selected=i===t.detail.tab}),t.stopPropagation())}async getTabIndex(){return Array.prototype.indexOf.call(tB(this.el.parentElement.children).filter(t=>t.matches("calcite-tab")),this.el)}async updateAriaInfo(t=[],e=[]){this.labeledBy=e[t.indexOf(this.el.id)]||null}get el(){return this}static get style(){return Uut}},[1,"calcite-tab",{tab:[513],selected:[1540],scale:[1537],labeledBy:[32],getTabIndex:[64],updateAriaInfo:[64]},[[16,"calciteInternalTabChange","internalTabChangeHandler"]]]);function Kbe(){if(typeof customElements>"u")return;["calcite-tab"].forEach(e=>{switch(e){case"calcite-tab":customElements.get(e)||customElements.define(e,But);break}})}Kbe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Hut={titleGroup:"title-group"},Gut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:flex;flex-direction:column}:host([bordered]){box-shadow:inset 0 1px 0 var(--calcite-ui-border-1);background-color:var(--calcite-ui-foreground-1)}:host([bordered]:not([position=bottom])) ::slotted(calcite-tab-nav){margin-block-end:-1px}:host([bordered][position=bottom]){box-shadow:inset 0 1px 0 var(--calcite-ui-border-1), inset 0 -1px 0 var(--calcite-ui-border-1)}:host([bordered]) section{border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-1)}:host([bordered][scale=s]) section{padding:0.75rem}:host([bordered][scale=m]) section{padding:0.5rem}:host([bordered][scale=l]) section{padding:1rem}:host([position=bottom]){flex-direction:column-reverse}section{display:flex;flex-grow:1;overflow:hidden;border-block-start-width:1px;border-block-start-color:var(--calcite-ui-border-1);border-block-start-style:solid}:host([position=bottom]) section{flex-direction:column-reverse;border-block-start-width:0px;border-block-end-width:1px;border-block-end-color:var(--calcite-ui-border-1)}:host([position=bottom]:not([bordered])) section{border-block-end-style:solid}@media (forced-colors: active){:host([bordered]) section{border-block-start-width:0px;border-block-end-width:1px}:host([position=bottom][bordered]) section{border-block-start-width:1px;border-block-end-width:0px}}",qut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.layout="inline",this.position="top",this.scale="m",this.bordered=!1,this.titles=[],this.tabs=[]}render(){return I($m,null,I("slot",{name:Hut.titleGroup}),I("section",null,I("slot",null)))}calciteInternalTabTitleRegister(t){this.titles=[...this.titles,t.target],this.registryHandler(),t.stopPropagation()}calciteTabTitleUnregister(t){this.titles=this.titles.filter(e=>e!==t.detail),this.registryHandler(),t.stopPropagation()}calciteInternalTabRegister(t){this.tabs=[...this.tabs,t.target],this.registryHandler(),t.stopPropagation()}calciteTabUnregister(t){this.tabs=this.tabs.filter(e=>e!==t.detail),this.registryHandler(),t.stopPropagation()}async registryHandler(){let t,e;if(this.tabs.some(i=>i.tab)||this.titles.some(i=>i.tab))t=this.tabs.sort((i,n)=>i.tab.localeCompare(n.tab)).map(i=>i.id),e=this.titles.sort((i,n)=>i.tab.localeCompare(n.tab)).map(i=>i.id);else{const i=await Promise.all(this.tabs.map(r=>r.getTabIndex())),n=await Promise.all(this.titles.map(r=>r.getTabIndex()));t=i.reduce((r,s,o)=>(r[s]=this.tabs[o].id,r),[]),e=n.reduce((r,s,o)=>(r[s]=this.titles[o].id,r),[])}this.tabs.forEach(i=>i.updateAriaInfo(t,e)),this.titles.forEach(i=>i.updateAriaInfo(t,e))}get el(){return this}static get style(){return Gut}},[1,"calcite-tabs",{layout:[513],position:[513],scale:[513],bordered:[1540],titles:[32],tabs:[32]},[[0,"calciteInternalTabTitleRegister","calciteInternalTabTitleRegister"],[16,"calciteTabTitleUnregister","calciteTabTitleUnregister"],[0,"calciteInternalTabRegister","calciteInternalTabRegister"],[16,"calciteTabUnregister","calciteTabUnregister"]]]);function Xbe(){if(typeof customElements>"u")return;["calcite-tabs"].forEach(e=>{switch(e){case"calcite-tabs":customElements.get(e)||customElements.define(e,qut);break}})}Xbe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Wut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:relative;display:flex}:host([scale=s]){min-block-size:1.5rem}:host([scale=m]){min-block-size:2rem}:host([scale=l]){min-block-size:2.75rem}.tab-nav{display:flex;inline-size:100%;justify-content:flex-start;overflow:auto}.tab-nav-active-indicator-container{position:absolute;inset-inline:0px;inset-block-end:0px;block-size:0.125rem;inline-size:100%;overflow:hidden}.tab-nav-active-indicator{position:absolute;inset-block-end:0px;display:block;block-size:0.125rem;background-color:var(--calcite-ui-brand);transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms;transition-timing-function:cubic-bezier(0, 0, 0.2, 1)}:host([position=bottom]) .tab-nav-active-indicator{inset-block-end:unset;inset-block-start:0px}:host([position=bottom]) .tab-nav-active-indicator-container{inset-block-end:unset;inset-block-start:0px}:host([bordered]) .tab-nav-active-indicator-container{inset-block-end:unset}:host([bordered][position=bottom]) .tab-nav-active-indicator-container{inset-block-end:0;inset-block-start:unset}@media (forced-colors: active){.tab-nav-active-indicator{background-color:highlight}}",Jut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTabChange=ue(this,"calciteTabChange",6),this.calciteInternalTabChange=ue(this,"calciteInternalTabChange",6),this.animationActiveDuration=.3,this.resizeObserver=Pi("resize",()=>{this.activeIndicatorEl&&(this.activeIndicatorEl.style.transitionDuration="0s",this.updateActiveWidth(),this.updateOffsetPosition())}),this.handleTabFocus=(t,e,i)=>{ah(this.enabledTabTitles,e,i),t.stopPropagation(),t.preventDefault()},this.handleContainerScroll=()=>{this.activeIndicatorEl.style.transitionDuration="0s",this.updateOffsetPosition()},this.storageId=void 0,this.syncId=void 0,this.selectedTitle=null,this.scale="m",this.layout="inline",this.position="bottom",this.bordered=!1,this.indicatorOffset=void 0,this.indicatorWidth=void 0,this.selectedTabId=void 0}async selectedTabIdChanged(){localStorage&&this.storageId&&this.selectedTabId!==void 0&&this.selectedTabId!==null&&localStorage.setItem(`calcite-tab-nav-${this.storageId}`,JSON.stringify(this.selectedTabId)),this.calciteInternalTabChange.emit({tab:this.selectedTabId}),this.selectedTitle=await this.getTabTitleById(this.selectedTabId)}selectedTitleChanged(){this.updateOffsetPosition(),this.updateActiveWidth(),this.activeIndicatorEl.style.transitionDuration=`${this.animationActiveDuration}s`}connectedCallback(){var t;this.parentTabsEl=this.el.closest("calcite-tabs"),(t=this.resizeObserver)==null||t.observe(this.el)}disconnectedCallback(){var t;(t=this.resizeObserver)==null||t.disconnect()}componentWillLoad(){const t=`calcite-tab-nav-${this.storageId}`;if(localStorage&&this.storageId&&localStorage.getItem(t)){const e=JSON.parse(localStorage.getItem(t));this.selectedTabId=e}}componentWillRender(){const{parentTabsEl:t}=this;this.layout=t==null?void 0:t.layout,this.position=t==null?void 0:t.position,this.scale=t==null?void 0:t.scale,this.bordered=t==null?void 0:t.bordered,this.selectedTitle&&this.updateOffsetPosition()}componentDidRender(){this.tabTitles.length&&this.tabTitles.every(t=>!t.selected)&&!this.selectedTabId&&this.tabTitles[0].getTabIdentifier().then(t=>{this.calciteInternalTabChange.emit({tab:t})})}render(){const t=Kr(this.el),e=`${this.indicatorWidth}px`,i=`${this.indicatorOffset}px`,n=t!=="rtl"?{width:e,left:i}:{width:e,right:i};return I(Ft,{role:"tablist"},I("div",{class:"tab-nav",onScroll:this.handleContainerScroll,ref:r=>this.tabNavEl=r},I("div",{class:"tab-nav-active-indicator-container",ref:r=>this.activeIndicatorContainerEl=r},I("div",{class:"tab-nav-active-indicator",ref:r=>this.activeIndicatorEl=r,style:n})),I("slot",null)))}focusPreviousTabHandler(t){this.handleTabFocus(t,t.target,"previous")}focusNextTabHandler(t){this.handleTabFocus(t,t.target,"next")}focusFirstTabHandler(t){this.handleTabFocus(t,t.target,"first")}focusLastTabHandler(t){this.handleTabFocus(t,t.target,"last")}internalActivateTabHandler(t){this.selectedTabId=t.detail.tab?t.detail.tab:this.getIndexOfTabTitle(t.target),t.stopPropagation(),t.preventDefault()}activateTabHandler(t){this.calciteTabChange.emit(),t.stopPropagation(),t.preventDefault()}updateTabTitles(t){t.target.selected&&(this.selectedTabId=t.detail)}globalInternalTabChangeHandler(t){this.syncId&&t.target!==this.el&&t.target.syncId===this.syncId&&this.selectedTabId!==t.detail.tab&&(this.selectedTabId=t.detail.tab),t.stopPropagation()}iconStartChangeHandler(){this.updateActiveWidth()}updateOffsetPosition(){var s,o,a,l,u;const t=Kr(this.el),e=(s=this.activeIndicatorContainerEl)==null?void 0:s.offsetWidth,i=(o=this.selectedTitle)==null?void 0:o.offsetLeft,n=(a=this.selectedTitle)==null?void 0:a.offsetWidth,r=e-(i+n);this.indicatorOffset=t!=="rtl"?i-((l=this.tabNavEl)==null?void 0:l.scrollLeft):r+((u=this.tabNavEl)==null?void 0:u.scrollLeft)}updateActiveWidth(){var t;this.indicatorWidth=(t=this.selectedTitle)==null?void 0:t.offsetWidth}getIndexOfTabTitle(t,e=this.tabTitles){return e.indexOf(t)}async getTabTitleById(t){return Promise.all(this.tabTitles.map(e=>e.getTabIdentifier())).then(e=>this.tabTitles[e.indexOf(t)])}get tabTitles(){return HJ(this.el,"calcite-tab-title")}get enabledTabTitles(){return HJ(this.el,"calcite-tab-title:not([disabled])")}get el(){return this}static get watchers(){return{selectedTabId:["selectedTabIdChanged"],selectedTitle:["selectedTitleChanged"]}}static get style(){return Wut}},[1,"calcite-tab-nav",{storageId:[513,"storage-id"],syncId:[513,"sync-id"],selectedTitle:[1040],scale:[1537],layout:[1537],position:[1537],bordered:[1540],indicatorOffset:[1026,"indicator-offset"],indicatorWidth:[1026,"indicator-width"],selectedTabId:[32]},[[0,"calciteInternalTabsFocusPrevious","focusPreviousTabHandler"],[0,"calciteInternalTabsFocusNext","focusNextTabHandler"],[0,"calciteInternalTabsFocusFirst","focusFirstTabHandler"],[0,"calciteInternalTabsFocusLast","focusLastTabHandler"],[0,"calciteInternalTabsActivate","internalActivateTabHandler"],[0,"calciteTabsActivate","activateTabHandler"],[0,"calciteInternalTabTitleRegister","updateTabTitles"],[16,"calciteInternalTabChange","globalInternalTabChangeHandler"],[0,"calciteInternalTabIconChanged","iconStartChangeHandler"]]]);function Qbe(){if(typeof customElements>"u")return;["calcite-tab-nav"].forEach(e=>{switch(e){case"calcite-tab-nav":customElements.get(e)||customElements.define(e,Jut);break}})}Qbe();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const $v={container:"container",containerHasText:"container--has-text",iconEnd:"icon-end",iconStart:"icon-start",iconPresent:"icon-present",titleIcon:"calcite-tab-title--icon"},Yut="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:block;flex:0 1 auto;outline:2px solid transparent;outline-offset:2px;margin-inline-start:0px;margin-inline-end:1.25rem}:host([layout=center]){margin-block:0px;margin-inline:1.25rem;text-align:center;flex-basis:12rem;margin:auto}:host([position=bottom]) .container{border-block-end-width:0px;border-block-start-width:2px;border-block-start-color:transparent;border-block-start-style:solid}:host .container{outline-color:transparent}:host(:focus) .container{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}:host(:active) a,:host(:focus) a,:host(:hover) a{border-color:var(--calcite-ui-border-2);color:var(--calcite-ui-text-1);text-decoration-line:none}:host([selected]) .container{border-color:transparent;color:var(--calcite-ui-text-1)}:host([disabled]) .container{pointer-events:none;opacity:0.5}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]){margin-inline-end:1rem}:host([scale=s]) .container{padding-block:0.25rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) .container{padding-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){margin-inline-end:1.5rem}:host([scale=l]) .container{padding-block:0.625rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}.container{box-sizing:border-box;display:flex;block-size:100%;inline-size:100%;cursor:pointer;-webkit-appearance:none;appearance:none;justify-content:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-block-end-width:2px;padding-inline:0px;font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-ui-text-3);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-block-end-color:transparent;border-block-end-style:solid}.calcite-tab-title--icon{position:relative;margin:0px;display:inline-flex;align-self:center}.calcite-tab-title--icon svg{transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.container--has-text{padding:0.25rem}.container--has-text .calcite-tab-title--icon.icon-start{margin-inline-end:0.5rem}.container--has-text .calcite-tab-title--icon.icon-end{margin-inline-start:0.5rem}:host([icon-start][icon-end]) .calcite-tab-title--icon:first-child{margin-inline-end:0.5rem}:host([bordered]){margin-inline-end:0}:host([bordered][selected]){box-shadow:inset 0px -2px var(--calcite-ui-foreground-1)}:host([bordered][selected][position=bottom]){box-shadow:inset 0 2px 0 var(--calcite-ui-foreground-1)}:host([bordered]:hover) .container,:host([bordered]:focus) .container,:host([bordered]:active) .container{position:relative}:host([bordered]:hover) .container{background-color:var(--calcite-button-transparent-hover)}:host([bordered]) .container{border-block-end-style:unset;border-inline-start:1px solid transparent;border-inline-end:1px solid transparent}:host([bordered][position=bottom]) .container{border-block-start-style:unset}:host([selected][bordered]) .container{border-inline-start-color:var(--calcite-ui-border-1);border-inline-end-color:var(--calcite-ui-border-1)}:host([bordered]) .container{padding-inline:0.75rem}:host([bordered][scale=s]) .container{padding-inline:0.5rem}:host([bordered][scale=l]) .container{padding-inline:1rem}:host([bordered][scale=l]) .icon-present{padding-block:11px}@media (forced-colors: active){:host{outline-width:0;outline-offset:0}:host(:focus) .container{outline-color:highlight}:host([bordered]) .container{border-block-end-style:solid}:host([bordered][position=bottom]) .container{border-block-start-style:solid}:host([bordered][selected]) .container{border-block-end-style:none}:host([bordered][position=bottom][selected]) .container{border-block-start-style:none}}",Zut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTabsActivate=ue(this,"calciteTabsActivate",6),this.calciteInternalTabsActivate=ue(this,"calciteInternalTabsActivate",6),this.calciteInternalTabsFocusNext=ue(this,"calciteInternalTabsFocusNext",6),this.calciteInternalTabsFocusPrevious=ue(this,"calciteInternalTabsFocusPrevious",6),this.calciteInternalTabsFocusFirst=ue(this,"calciteInternalTabsFocusFirst",6),this.calciteInternalTabsFocusLast=ue(this,"calciteInternalTabsFocusLast",6),this.calciteInternalTabTitleRegister=ue(this,"calciteInternalTabTitleRegister",6),this.calciteInternalTabIconChanged=ue(this,"calciteInternalTabIconChanged",6),this.mutationObserver=Pi("mutation",()=>this.updateHasText()),this.resizeObserver=Pi("resize",()=>{this.calciteInternalTabIconChanged.emit()}),this.guid=`calcite-tab-title-${Ts()}`,this.selected=!1,this.disabled=!1,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.layout=void 0,this.position=void 0,this.scale=void 0,this.bordered=!1,this.tab=void 0,this.controls=void 0,this.hasText=!1}selectedHandler(){this.selected&&this.emitActiveTab(!1)}connectedCallback(){this.setupTextContentObserver(),this.parentTabNavEl=this.el.closest("calcite-tab-nav"),this.parentTabsEl=this.el.closest("calcite-tabs")}disconnectedCallback(){var t,e,i;(t=this.mutationObserver)==null||t.disconnect(),(e=document.body)==null||e.dispatchEvent(new CustomEvent("calciteTabTitleUnregister",{detail:this.el})),(i=this.resizeObserver)==null||i.disconnect()}componentWillLoad(){this.updateHasText(),this.tab&&this.selected&&this.emitActiveTab(!1)}componentWillRender(){this.parentTabsEl&&(this.layout=this.parentTabsEl.layout,this.position=this.parentTabsEl.position,this.scale=this.parentTabsEl.scale,this.bordered=this.parentTabsEl.bordered),!this.parentTabsEl&&this.parentTabNavEl&&(this.position=Hr(this.parentTabNavEl,"position",this.position),this.scale=Hr(this.parentTabNavEl,"scale",this.scale))}render(){const t=this.el.id||this.guid,e=I("calcite-icon",{class:{[$v.titleIcon]:!0,[$v.iconStart]:!0},flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:this.scale==="l"?"m":"s"}),i=I("calcite-icon",{class:{[$v.titleIcon]:!0,[$v.iconEnd]:!0},flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:this.scale==="l"?"m":"s"});return I(Ft,{"aria-controls":this.controls,"aria-selected":Vi(this.selected),id:t,role:"tab",tabIndex:this.selected?0:-1},I("div",{class:{container:!0,[$v.iconPresent]:this.iconStart||this.iconEnd?!0:null,[$v.containerHasText]:this.hasText},ref:n=>{var r;return(r=this.resizeObserver)==null?void 0:r.observe(n)}},this.iconStart?e:null,I("slot",null),this.iconEnd?i:null))}async componentDidLoad(){this.calciteInternalTabTitleRegister.emit(await this.getTabIdentifier())}componentDidRender(){lr(this,()=>this.selected)}internalTabChangeHandler(t){t.composedPath().find(i=>i.tagName==="CALCITE-TABS")===this.parentTabsEl&&(this.tab?this.selected=this.tab===t.detail.tab:this.getTabIndex().then(i=>{this.selected=i===t.detail.tab}),t.stopPropagation())}onClick(){this.emitActiveTab()}keyDownHandler(t){switch(t.key){case" ":case"Enter":this.emitActiveTab(),t.preventDefault();break;case"ArrowRight":t.preventDefault(),Kr(this.el)==="ltr"?this.calciteInternalTabsFocusNext.emit():this.calciteInternalTabsFocusPrevious.emit();break;case"ArrowLeft":t.preventDefault(),Kr(this.el)==="ltr"?this.calciteInternalTabsFocusPrevious.emit():this.calciteInternalTabsFocusNext.emit();break;case"Home":t.preventDefault(),this.calciteInternalTabsFocusFirst.emit();break;case"End":t.preventDefault(),this.calciteInternalTabsFocusLast.emit();break}}async getTabIndex(){return Array.prototype.indexOf.call(this.el.parentElement.querySelectorAll("calcite-tab-title"),this.el)}async getTabIdentifier(){return this.tab?this.tab:this.getTabIndex()}async updateAriaInfo(t=[],e=[]){this.controls=t[e.indexOf(this.el.id)]||null}updateHasText(){this.hasText=this.el.textContent.trim().length>0}setupTextContentObserver(){var t;(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0})}emitActiveTab(t=!0){if(this.disabled)return;const e={tab:this.tab};this.calciteInternalTabsActivate.emit(e),t&&this.calciteTabsActivate.emit()}get el(){return this}static get watchers(){return{selected:["selectedHandler"]}}static get style(){return Yut}},[1,"calcite-tab-title",{selected:[1540],disabled:[516],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],layout:[1537],position:[1537],scale:[1537],bordered:[1540],tab:[513],controls:[32],hasText:[32],getTabIndex:[64],getTabIdentifier:[64],updateAriaInfo:[64]},[[16,"calciteInternalTabChange","internalTabChangeHandler"],[0,"click","onClick"],[0,"keydown","keyDownHandler"]]]);function e_e(){if(typeof customElements>"u")return;["calcite-tab-title","calcite-icon"].forEach(e=>{switch(e){case"calcite-tab-title":customElements.get(e)||customElements.define(e,Zut);break;case"calcite-icon":customElements.get(e)||ni();break}})}e_e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Kut='@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:relative;display:flex;inline-size:100%;min-inline-size:-moz-fit-content;min-inline-size:fit-content;flex-direction:row;flex-wrap:wrap;align-items:stretch;justify-content:space-between}:host([layout=vertical]){flex:1 1 auto;flex-direction:column}:host([layout=horizontal]){display:grid;grid-template-areas:"items" "content"}',Xut=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteStepperItemChange=ue(this,"calciteStepperItemChange",6),this.calciteInternalStepperItemChange=ue(this,"calciteInternalStepperItemChange",6),this.itemMap=new Map,this.items=[],this.enabledItems=[],this.icon=!1,this.layout="horizontal",this.numbered=!1,this.numberingSystem=void 0,this.selectedItem=null,this.scale="m"}componentDidLoad(){typeof this.currentPosition!="number"&&this.calciteInternalStepperItemChange.emit({position:0})}render(){return I("slot",{onSlotchange:t=>{const e=t.currentTarget.assignedElements().filter(n=>(n==null?void 0:n.tagName)==="CALCITE-STEPPER-ITEM"),i=Array(e.length).fill("1fr").join(" ");this.el.style.gridTemplateAreas=i,this.el.style.gridTemplateColumns=i}})}calciteInternalStepperItemKeyEvent(t){const e=t.detail.item,i=t.target;switch(e.key){case"ArrowDown":case"ArrowRight":ah(this.enabledItems,i,"next");break;case"ArrowUp":case"ArrowLeft":ah(this.enabledItems,i,"previous");break;case"Home":ah(this.enabledItems,i,"first");break;case"End":ah(this.enabledItems,i,"last");break}t.stopPropagation()}registerItem(t){const e=t.target,{content:i,position:n}=t.detail;this.itemMap.set(e,{position:n,content:i}),this.items=this.sortItems(),this.enabledItems=this.filterItems(),t.stopPropagation()}updateItem(t){const{position:e}=t.detail;typeof e=="number"&&(this.currentPosition=e,this.selectedItem=t.target),this.calciteInternalStepperItemChange.emit({position:e})}handleUserRequestedStepperItemSelect(){this.calciteStepperItemChange.emit()}async nextStep(){const t=this.getEnabledStepIndex(this.currentPosition+1,"next");typeof t=="number"&&this.updateStep(t)}async prevStep(){const t=this.getEnabledStepIndex(this.currentPosition-1,"previous");typeof t=="number"&&this.updateStep(t)}async goToStep(t){const e=t-1;this.currentPosition!==e&&this.updateStep(e)}async startStep(){const t=this.getEnabledStepIndex(0,"next");typeof t=="number"&&this.updateStep(t)}async endStep(){const t=this.getEnabledStepIndex(this.items.length-1,"previous");typeof t=="number"&&this.updateStep(t)}getEnabledStepIndex(t,e="next"){var s;const{items:i,currentPosition:n}=this;let r=t;for(;(s=i[r])!=null&&s.disabled;)r=r+(e==="previous"?-1:1);return r!==n&&r<i.length&&r>=0?r:null}updateStep(t){this.currentPosition=t,this.calciteInternalStepperItemChange.emit({position:t})}sortItems(){const{itemMap:t}=this;return Array.from(t.keys()).sort((e,i)=>t.get(e).position-t.get(i).position)}filterItems(){return this.items.filter(t=>!t.disabled)}get el(){return this}static get style(){return Kut}},[1,"calcite-stepper",{icon:[516],layout:[513],numbered:[516],numberingSystem:[513,"numbering-system"],selectedItem:[1040],scale:[513],nextStep:[64],prevStep:[64],goToStep:[64],startStep:[64],endStep:[64]},[[0,"calciteInternalStepperItemKeyEvent","calciteInternalStepperItemKeyEvent"],[0,"calciteInternalStepperItemRegister","registerItem"],[0,"calciteInternalStepperItemSelect","updateItem"],[0,"calciteInternalUserRequestedStepperItemSelect","handleUserRequestedStepperItemSelect"]]]);function Qut(){if(typeof customElements>"u")return;["calcite-stepper"].forEach(e=>{switch(e){case"calcite-stepper":customElements.get(e)||customElements.define(e,Xut);break}})}Qut();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const edt="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([layout=horizontal][disabled]) .stepper-item-header,:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([scale=s]){--calcite-stepper-item-spacing-unit-s:0.25rem;--calcite-stepper-item-spacing-unit-m:0.75rem;--calcite-stepper-item-spacing-unit-l:1rem;font-size:var(--calcite-font-size--1);line-height:1rem;margin-inline-end:0.25rem}:host([scale=s]) .stepper-item-description{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){--calcite-stepper-item-spacing-unit-s:0.5rem;--calcite-stepper-item-spacing-unit-m:1rem;--calcite-stepper-item-spacing-unit-l:1.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;margin-inline-end:0.5rem}:host([scale=m]) .stepper-item-description{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){--calcite-stepper-item-spacing-unit-s:0.75rem;--calcite-stepper-item-spacing-unit-m:1.25rem;--calcite-stepper-item-spacing-unit-l:1.5rem;font-size:var(--calcite-font-size-1);line-height:1.5rem;margin-inline-end:0.75rem}:host([scale=l]) .stepper-item-description{font-size:var(--calcite-font-size-0);line-height:1.25rem}:host{position:relative;display:flex;flex-grow:1;flex-direction:column;align-self:flex-start;margin-block-end:var(--calcite-stepper-item-spacing-unit-s)}:host .container{position:relative;display:flex;flex-grow:1;cursor:pointer;flex-direction:column;border-width:0px;border-block-start-width:2px;border-style:solid;border-color:var(--calcite-ui-border-3);color:var(--calcite-ui-text-3);text-decoration-line:none;outline:2px solid transparent;outline-offset:2px;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host{outline-color:transparent}:host(:focus){outline:2px solid var(--calcite-ui-brand);outline-offset:2px}:host .stepper-item-header{display:flex;cursor:pointer;align-items:flex-start}:host .stepper-item-content,:host .stepper-item-header{transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);padding-block:var(--calcite-stepper-item-spacing-unit-l);padding-inline-end:var(--calcite-stepper-item-spacing-unit-m);text-align:start}:host .stepper-item-header *{display:inline-flex;align-items:center;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host .stepper-item-content{display:none;inline-size:100%;flex-direction:column;font-size:var(--calcite-font-size--2);line-height:1.375}:host .stepper-item-icon{margin-inline-end:var(--calcite-stepper-item-spacing-unit-m);margin-block-start:1px;display:inline-flex;block-size:0.75rem;flex-shrink:0;align-self:flex-start;color:var(--calcite-ui-text-3);opacity:var(--calcite-ui-opacity-disabled);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host .stepper-item-header-text{flex-direction:column;text-align:initial;margin-inline-end:auto}:host .stepper-item-heading,:host .stepper-item-description{display:flex;inline-size:100%}:host .stepper-item-heading{margin-block-end:0.25rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-2)}:host .stepper-item-description{color:var(--calcite-ui-text-3)}:host .stepper-item-number{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-3);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);margin-inline-end:var(--calcite-stepper-item-spacing-unit-m)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([complete]) .container{border-color:rgba(0, 122, 194, 0.5)}:host([complete]) .container .stepper-item-icon{color:var(--calcite-ui-brand)}:host([error]) .container{border-block-start-color:var(--calcite-ui-danger)}:host([error]) .container .stepper-item-number{color:var(--calcite-ui-danger)}:host([error]) .container .stepper-item-icon{opacity:1;color:var(--calcite-ui-danger)}:host(:hover:not([disabled]):not([selected])) .container,:host(:focus:not([disabled]):not([selected])) .container{border-block-start-color:var(--calcite-ui-brand)}:host(:hover:not([disabled]):not([selected])) .container .stepper-item-heading,:host(:focus:not([disabled]):not([selected])) .container .stepper-item-heading{color:var(--calcite-ui-text-1)}:host(:hover:not([disabled]):not([selected])) .container .stepper-item-description,:host(:focus:not([disabled]):not([selected])) .container .stepper-item-description{color:var(--calcite-ui-text-2)}:host([error]:hover:not([disabled]):not([selected])) .container,:host([error]:focus:not([disabled]):not([selected])) .container{border-block-start-color:var(--calcite-ui-danger-hover)}:host([selected]) .container{border-block-start-color:var(--calcite-ui-brand)}:host([selected]) .container .stepper-item-heading{color:var(--calcite-ui-text-1)}:host([selected]) .container .stepper-item-description{color:var(--calcite-ui-text-2)}:host([selected]) .container .stepper-item-number{color:var(--calcite-ui-brand)}:host([selected]) .container .stepper-item-icon{color:var(--calcite-ui-brand);opacity:1}:host([selected]) .container .stepper-item-content{display:flex}:host([layout=vertical]) .container{margin-inline:0px;margin-block-start:0px;flex:1 1 auto;border-block-start-width:0px;border-style:solid;border-color:var(--calcite-ui-border-3);padding-block:0px;border-inline-start-width:2px;padding-inline-start:var(--calcite-stepper-item-spacing-unit-l)}:host([layout=vertical]) .container .stepper-item-icon{order:3;margin-block:1px 0px;padding-inline-start:var(--calcite-stepper-item-spacing-unit-s);margin-inline-start:auto}:host([layout=vertical]) .container .stepper-item-header{padding-inline-end:0px}:host([layout=vertical]) .container .stepper-item-content{padding:0px}:host([layout=vertical][complete]) .container{border-color:rgba(0, 122, 194, 0.5)}:host([layout=vertical][complete]:hover:not([disabled]):not([selected])) .container,:host([layout=vertical][complete]:focus:not([disabled]):not([selected])) .container{border-color:var(--calcite-ui-brand)}:host([layout=vertical][error]) .container{border-color:var(--calcite-ui-danger)}:host([layout=vertical][selected]) .container{border-color:var(--calcite-ui-brand)}:host([layout=vertical][selected]) .container .stepper-item-content:not(:empty){margin-block-end:var(--calcite-stepper-item-spacing-unit-l)}:host([layout=vertical]:hover:not([disabled]):not([selected])) .container,:host([layout=vertical]:focus:not([disabled]):not([selected])) .container{border-color:rgba(0, 122, 194, 0.5)}:host([layout=vertical][error]:hover:not([disabled]):not([selected])) .container,:host([layout=vertical][error]:focus:not([disabled]):not([selected])) .container{border-color:var(--calcite-ui-danger-hover)}:host([layout=horizontal]){display:contents}:host([layout=horizontal]) .container{display:contents}:host([layout=horizontal]) .stepper-item-header{border-width:0px;border-block-start-width:2px;border-style:solid;border-color:var(--calcite-ui-border-3);outline-color:transparent;grid-row:items;margin-inline-end:0.5rem;margin-block-end:var(--calcite-stepper-item-spacing-unit-s)}:host([layout=horizontal]) .stepper-item-header:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}:host([layout=horizontal]) .stepper-item-content{cursor:auto;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);padding-block:0;padding-inline-end:var(--calcite-stepper-item-spacing-unit-m);text-align:start}:host([layout=horizontal][selected]) .stepper-item-content{grid-area:2/1/2/-1}:host([layout=horizontal][scale=s]) .stepper-item-header{margin-inline-end:0.25rem;margin-block-end:var(--calcite-stepper-item-spacing-unit-s)}:host([layout=horizontal][scale=l]) .stepper-item-header{margin-inline-end:0.75rem;margin-block-end:var(--calcite-stepper-item-spacing-unit-s)}:host([layout=horizontal][complete]) .stepper-item-header{border-color:rgba(0, 122, 194, 0.5)}:host([layout=horizontal][complete]:hover:not([disabled]):not([selected])) .stepper-item-header,:host([layout=horizontal][complete]:focus:not([disabled]):not([selected])) .stepper-item-header{border-color:var(--calcite-ui-brand)}:host([layout=horizontal][error]) .stepper-item-header{border-color:var(--calcite-ui-danger)}:host([layout=horizontal][selected]) .stepper-item-header{border-color:var(--calcite-ui-brand)}:host([layout=horizontal]:hover:not([disabled]):not([selected])) .stepper-item-header,:host([layout=horizontal]:focus:not([disabled]):not([selected])) .stepper-item-header{border-color:rgba(0, 122, 194, 0.5)}:host([layout=horizontal][error]:hover:not([disabled]):not([selected])) .stepper-item-header,:host([layout=horizontal][error]:focus:not([disabled]):not([selected])) .stepper-item-header{border-color:var(--calcite-ui-danger-hover)}@media (forced-colors: active){:host .container{outline-width:0;outline-offset:0}:host(:focus),:host(:focus-visible){outline-color:canvasText}:host([selected]) .container{border-block-start-color:highlight}:host([selected]) .container .stepper-item-number{color:highlight}:host([selected]) .container .stepper-item-icon{color:highlight}:host([layout=vertical][selected]) .container{border-color:highlight}}",tdt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalStepperItemKeyEvent=ue(this,"calciteInternalStepperItemKeyEvent",6),this.calciteInternalStepperItemSelect=ue(this,"calciteInternalStepperItemSelect",6),this.calciteInternalUserRequestedStepperItemSelect=ue(this,"calciteInternalUserRequestedStepperItemSelect",6),this.calciteInternalStepperItemRegister=ue(this,"calciteInternalStepperItemRegister",6),this.keyDownHandler=t=>{if(!this.disabled&&t.target===this.el)switch(t.key){case" ":case"Enter":this.emitUserRequestedItem(),t.preventDefault();break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Home":case"End":this.calciteInternalStepperItemKeyEvent.emit({item:t}),t.preventDefault();break}},this.handleItemClick=t=>{this.layout==="horizontal"&&t.composedPath().some(e=>{var i;return(i=e.classList)==null?void 0:i.contains("stepper-item-content")})||this.emitUserRequestedItem()},this.emitUserRequestedItem=()=>{if(this.emitRequestedItem(),!this.disabled){const t=this.itemPosition;this.calciteInternalUserRequestedStepperItemSelect.emit({position:t})}},this.emitRequestedItem=()=>{if(!this.disabled){const t=this.itemPosition;this.calciteInternalStepperItemSelect.emit({position:t})}},this.selected=!1,this.complete=!1,this.error=!1,this.disabled=!1,this.heading=void 0,this.description=void 0,this.layout="horizontal",this.icon=!1,this.iconFlipRtl=!1,this.numbered=!1,this.scale="m",this.effectiveLocale=""}selectedHandler(){this.selected&&this.emitRequestedItem()}disabledWatcher(){this.registerStepperItem()}effectiveLocaleWatcher(t){var e;Lt.numberFormatOptions={locale:t,numberingSystem:(e=this.parentStepperEl)==null?void 0:e.numberingSystem,useGrouping:!1}}connectedCallback(){hn(this)}componentWillLoad(){Ui(this),this.icon=Hr(this.el,"icon",!1),this.numbered=Hr(this.el,"numbered",!1),this.layout=Hr(this.el,"layout",!1),this.scale=Hr(this.el,"scale","m"),this.parentStepperEl=this.el.parentElement,this.itemPosition=this.getItemPosition(),this.registerStepperItem(),this.selected&&this.emitRequestedItem()}componentDidLoad(){Bi(this)}componentDidRender(){lr(this,!0)}disconnectedCallback(){pn(this)}render(){return I(Ft,{"aria-expanded":Vi(this.selected),onClick:this.handleItemClick,onKeyDown:this.keyDownHandler},I("div",{class:"container"},I("div",{class:"stepper-item-header",ref:t=>this.headerEl=t,tabIndex:this.layout==="horizontal"&&!this.disabled?0:null},this.icon?this.renderIcon():null,this.numbered?I("div",{class:"stepper-item-number"},this.renderNumbers(),"."):null,I("div",{class:"stepper-item-header-text"},I("span",{class:"stepper-item-heading"},this.heading),I("span",{class:"stepper-item-description"},this.description))),I("div",{class:"stepper-item-content"},I("slot",null))))}updateActiveItemOnChange(t){(t.target===this.parentStepperEl||t.composedPath().includes(this.parentStepperEl))&&(this.selectedPosition=t.detail.position,this.determineSelectedItem())}async setFocus(){var t;await Hi(this),(t=this.layout==="vertical"?this.el:this.headerEl)==null||t.focus()}renderIcon(){const t=this.selected?"circleF":this.error?"exclamationMarkCircleF":this.complete?"checkCircleF":"circle";return I("calcite-icon",{class:"stepper-item-icon",flipRtl:this.iconFlipRtl,icon:t,scale:"s"})}determineSelectedItem(){this.selected=!this.disabled&&this.itemPosition===this.selectedPosition}registerStepperItem(){this.calciteInternalStepperItemRegister.emit({position:this.itemPosition})}getItemPosition(){var t;return Array.from((t=this.parentStepperEl)==null?void 0:t.querySelectorAll("calcite-stepper-item")).indexOf(this.el)}renderNumbers(){var t;return Lt.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:(t=this.parentStepperEl)==null?void 0:t.numberingSystem,useGrouping:!1},Lt.numberFormatter.format(this.itemPosition+1)}get el(){return this}static get watchers(){return{selected:["selectedHandler"],disabled:["disabledWatcher"],effectiveLocale:["effectiveLocaleWatcher"]}}static get style(){return edt}},[1,"calcite-stepper-item",{selected:[1540],complete:[516],error:[516],disabled:[516],heading:[1],description:[1],layout:[1537],icon:[1028],iconFlipRtl:[516,"icon-flip-rtl"],numbered:[1028],scale:[1537],effectiveLocale:[32],setFocus:[64]},[[16,"calciteInternalStepperItemChange","updateActiveItemOnChange"]]]);function idt(){if(typeof customElements>"u")return;["calcite-stepper-item","calcite-icon"].forEach(e=>{switch(e){case"calcite-stepper-item":customElements.get(e)||customElements.define(e,tdt);break;case"calcite-icon":customElements.get(e)||ni();break}})}idt();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function ndt(t,e){for(var i=-1,n=t==null?0:t.length,r=Array(n);++i<n;)r[i]=e(t[i],i,t);return r}var t_e=Array.isArray,rdt=1/0,wie=Dw?Dw.prototype:void 0,xie=wie?wie.toString:void 0;function i_e(t){if(typeof t=="string")return t;if(t_e(t))return ndt(t,i_e)+"";if($be(t))return xie?xie.call(t):"";var e=t+"";return e=="0"&&1/t==-rdt?"-0":e}function sdt(t){return t}var odt="[object AsyncFunction]",adt="[object Function]",ldt="[object GeneratorFunction]",cdt="[object Proxy]";function udt(t){if(!Fw(t))return!1;var e=cL(t);return e==adt||e==ldt||e==odt||e==cdt}var ddt=9007199254740991,hdt=/^(?:0|[1-9]\d*)$/;function pdt(t,e){var i=typeof t;return e=e??ddt,!!e&&(i=="number"||i!="symbol"&&hdt.test(t))&&t>-1&&t%1==0&&t<e}var fdt=9007199254740991;function n_e(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=fdt}function mdt(t){return t!=null&&n_e(t.length)&&!udt(t)}var gdt=Object.prototype;function ydt(t){var e=t&&t.constructor,i=typeof e=="function"&&e.prototype||gdt;return t===i}function vdt(t,e){for(var i=-1,n=Array(t);++i<t;)n[i]=e(i);return n}var bdt="[object Arguments]";function Sie(t){return uL(t)&&cL(t)==bdt}var r_e=Object.prototype,_dt=r_e.hasOwnProperty,wdt=r_e.propertyIsEnumerable,xdt=Sie(function(){return arguments}())?Sie:function(t){return uL(t)&&_dt.call(t,"callee")&&!wdt.call(t,"callee")};function Sdt(){return!1}var s_e=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Eie=s_e&&typeof module=="object"&&module&&!module.nodeType&&module,Edt=Eie&&Eie.exports===s_e,Cie=Edt?$H.Buffer:void 0,Cdt=Cie?Cie.isBuffer:void 0,Idt=Cdt||Sdt,Tdt="[object Arguments]",kdt="[object Array]",$dt="[object Boolean]",Adt="[object Date]",Mdt="[object Error]",Odt="[object Function]",Pdt="[object Map]",Rdt="[object Number]",Ldt="[object Object]",Ddt="[object RegExp]",Fdt="[object Set]",Ndt="[object String]",zdt="[object WeakMap]",jdt="[object ArrayBuffer]",Vdt="[object DataView]",Udt="[object Float32Array]",Bdt="[object Float64Array]",Hdt="[object Int8Array]",Gdt="[object Int16Array]",qdt="[object Int32Array]",Wdt="[object Uint8Array]",Jdt="[object Uint8ClampedArray]",Ydt="[object Uint16Array]",Zdt="[object Uint32Array]",Ti={};Ti[Udt]=Ti[Bdt]=Ti[Hdt]=Ti[Gdt]=Ti[qdt]=Ti[Wdt]=Ti[Jdt]=Ti[Ydt]=Ti[Zdt]=!0;Ti[Tdt]=Ti[kdt]=Ti[jdt]=Ti[$dt]=Ti[Vdt]=Ti[Adt]=Ti[Mdt]=Ti[Odt]=Ti[Pdt]=Ti[Rdt]=Ti[Ldt]=Ti[Ddt]=Ti[Fdt]=Ti[Ndt]=Ti[zdt]=!1;function Kdt(t){return uL(t)&&n_e(t.length)&&!!Ti[cL(t)]}function Xdt(t){return function(e){return t(e)}}var o_e=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ZE=o_e&&typeof module=="object"&&module&&!module.nodeType&&module,Qdt=ZE&&ZE.exports===o_e,E5=Qdt&&Tbe.process,Iie=function(){try{var t=ZE&&ZE.require&&ZE.require("util").types;return t||E5&&E5.binding&&E5.binding("util")}catch{}}(),Tie=Iie&&Iie.isTypedArray,eht=Tie?Xdt(Tie):Kdt,tht=Object.prototype,iht=tht.hasOwnProperty;function nht(t,e){var i=t_e(t),n=!i&&xdt(t),r=!i&&!n&&Idt(t),s=!i&&!n&&!r&&eht(t),o=i||n||r||s,a=o?vdt(t.length,String):[],l=a.length;for(var u in t)(e||iht.call(t,u))&&!(o&&(u=="length"||r&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||pdt(u,l)))&&a.push(u);return a}function rht(t){var e=[];if(t!=null)for(var i in Object(t))e.push(i);return e}var sht=Object.prototype,oht=sht.hasOwnProperty;function aht(t){if(!Fw(t))return rht(t);var e=ydt(t),i=[];for(var n in t)n=="constructor"&&(e||!oht.call(t,n))||i.push(n);return i}function lht(t){return mdt(t)?nht(t,!0):aht(t)}function cht(t){return t==null?"":i_e(t)}function uht(t){return function(e,i,n){for(var r=-1,s=Object(e),o=n(e),a=o.length;a--;){var l=o[t?a:++r];if(i(s[l],l,s)===!1)break}return e}}var dht=uht();function hht(t){return typeof t=="function"?t:sdt}var a_e=/[\\^$.*+?()[\]{}|]/g,pht=RegExp(a_e.source);function fht(t){return t=cht(t),t&&pht.test(t)?t.replace(a_e,"\\$&"):t}function mht(t,e){return t==null?t:dht(t,hht(e),lht)}const ght=(t,e)=>{const i=fht(e),n=new RegExp(i,"i");t.length===0&&console.warn(`No data was passed to the filter function.
    The data argument should be an array of objects`);const r=(o,a)=>{if(o!=null&&o.constant||o!=null&&o.filterDisabled)return!0;let l=!1;return mht(o,u=>{typeof u=="function"||u==null||(Array.isArray(u)||typeof u=="object"&&u!==null?r(u,a)&&(l=!0):a.test(u)&&(l=!0))}),l};return t.filter(o=>r(o,n))};/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const kU="CALCITE-COMBOBOX-ITEM",BH="CALCITE-COMBOBOX-ITEM-GROUP",$U=`${kU}, ${BH}`;function yht(t){var n,r;const e=(n=t.parentElement)==null?void 0:n.closest($U),i=(r=e==null?void 0:e.parentElement)==null?void 0:r.closest($U);return[e,i].filter(s=>s)}function kie(t){var e;return((e=t.ancestors)==null?void 0:e.filter(i=>i.nodeName==="CALCITE-COMBOBOX-ITEM"))||[]}function vht(t){return tB(t.querySelectorAll("calcite-combobox-item"))}function $ie(t){return tB(t.querySelectorAll("calcite-combobox-item")).filter(i=>i.selected).length>0}function bht(t){return document.evaluate("ancestor::calcite-combobox-item",t,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const _ht="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{position:relative;display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]){font-size:var(--calcite-font-size--2);--calcite-combobox-item-spacing-unit-l:0.5rem;--calcite-combobox-item-spacing-unit-s:0.25rem;--calcite-combobox-input-height:1.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);--calcite-combobox-item-spacing-unit-l:0.75rem;--calcite-combobox-item-spacing-unit-s:0.5rem;--calcite-combobox-input-height:2rem}:host([scale=l]){font-size:var(--calcite-font-size-0);--calcite-combobox-item-spacing-unit-l:1rem;--calcite-combobox-item-spacing-unit-s:0.75rem;--calcite-combobox-input-height:2.75rem}.wrapper{display:flex;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-input);background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-1);outline-color:transparent;padding-block:calc(var(--calcite-combobox-item-spacing-unit-s) / 4);padding-inline:var(--calcite-combobox-item-spacing-unit-l)}:host(:focus-within) .wrapper,.wrapper--active{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.wrapper--single{padding-block:0;padding-inline:var(--calcite-combobox-item-spacing-unit-l);cursor:pointer;flex-wrap:nowrap}.grid-input{display:flex;flex-grow:1;flex-wrap:wrap;align-items:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px}.input{flex-grow:1;-webkit-appearance:none;appearance:none;border-style:none;background-color:transparent;padding:0px;font-family:inherit;color:var(--calcite-ui-text-1);font-size:inherit;block-size:var(--calcite-combobox-input-height);line-height:var(--calcite-combobox-input-height);min-inline-size:120px;margin-block-end:var(--calcite-combobox-item-spacing-unit-s)}.input:focus{outline:2px solid transparent;outline-offset:2px}.input--transparent{opacity:0}.input--single{margin-block:0px;padding:0px}.wrapper--active .input-single{cursor:text}.input--hidden{pointer-events:none;inline-size:0px;min-inline-size:0px;opacity:0}.input--icon{padding-block:0;padding-inline:var(--calcite-combobox-item-spacing-unit-l)}.input-wrap{display:flex;flex-grow:1}.input-wrap--single{flex:1 1 0%;overflow:hidden}.label{pointer-events:none;display:flex;max-inline-size:100%;flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px;font-weight:var(--calcite-font-weight-normal);block-size:var(--calcite-combobox-input-height);line-height:var(--calcite-combobox-input-height)}.label--icon{padding-inline:var(--calcite-combobox-item-spacing-unit-l)}.icon-end,.icon-start{display:flex;inline-size:1rem;cursor:pointer;align-items:center}.icon-end{flex:none}.floating-ui-container{--calcite-floating-ui-z-index:600;display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.floating-ui-container .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:1;border-radius:0.25rem}.floating-ui-container[data-placement^=bottom] .calcite-floating-ui-anim{transform:translateY(-5px)}.floating-ui-container[data-placement^=top] .calcite-floating-ui-anim{transform:translateY(5px)}.floating-ui-container[data-placement^=left] .calcite-floating-ui-anim{transform:translateX(5px)}.floating-ui-container[data-placement^=right] .calcite-floating-ui-anim{transform:translateX(-5px)}.floating-ui-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}.floating-ui-container--active{visibility:visible}@media (forced-colors: active){.wrapper,.floating-ui-container--active{border:1px solid canvasText}}.screen-readers-only{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.list-container{max-block-size:45vh;overflow-y:auto;background-color:var(--calcite-ui-foreground-1);inline-size:var(--calcite-dropdown-width)}.list{margin:0px;display:block;padding:0px}.list--hide{block-size:0px;overflow:hidden}.chip{margin-block:calc(var(--calcite-combobox-item-spacing-unit-s) / 4);margin-inline:0 var(--calcite-combobox-item-spacing-unit-s);max-inline-size:100%}.chip--active{background-color:var(--calcite-ui-foreground-3)}.item{display:block}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}",wht=t=>t.tagName===BH,Aie="combobox-item-",Mie="combobox-chip-",Oie="combobox-label-",Dk="combobox-listbox-",Pie="combobox-input-",xht=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteComboboxChange=ue(this,"calciteComboboxChange",6),this.calciteComboboxFilterChange=ue(this,"calciteComboboxFilterChange",6),this.calciteComboboxChipClose=ue(this,"calciteComboboxChipClose",6),this.calciteComboboxBeforeClose=ue(this,"calciteComboboxBeforeClose",6),this.calciteComboboxClose=ue(this,"calciteComboboxClose",6),this.calciteComboboxBeforeOpen=ue(this,"calciteComboboxBeforeOpen",6),this.calciteComboboxOpen=ue(this,"calciteComboboxOpen",6),this.placement=RH,this.internalValueChangeFlag=!1,this.textInput=null,this.mutationObserver=Pi("mutation",()=>this.updateItems()),this.resizeObserver=Pi("resize",()=>this.setMaxScrollerHeight()),this.guid=Ts(),this.inputHeight=0,this.ignoreSelectedEventsFlag=!1,this.openTransitionProp="opacity",this.setFilteredPlacements=()=>{const{el:t,flipPlacements:e}=this;this.filteredFlipPlacements=e?pL(e,t):null},this.getValue=()=>{const t=this.selectedItems.map(e=>{var i;return(i=e==null?void 0:e.value)==null?void 0:i.toString()});return t!=null&&t.length?t.length>1?t:t[0]:""},this.onLabelClick=()=>{this.setFocus()},this.keydownHandler=t=>{const{key:e}=t;switch(e){case"Tab":this.activeChipIndex=-1,this.activeItemIndex=-1,this.allowCustomValues&&this.text?(this.addCustomChip(this.text,!0),t.preventDefault()):this.open&&(this.open=!1,t.preventDefault());break;case"ArrowLeft":this.previousChip(),t.preventDefault();break;case"ArrowRight":this.nextChip(),t.preventDefault();break;case"ArrowUp":t.preventDefault(),this.shiftActiveItemIndex(-1),this.comboboxInViewport()||this.el.scrollIntoView();break;case"ArrowDown":t.preventDefault(),this.open||(this.open=!0),this.shiftActiveItemIndex(1),this.comboboxInViewport()||this.el.scrollIntoView();break;case" ":this.textInput.value||(t.preventDefault(),this.open=!0,this.shiftActiveItemIndex(1));break;case"Home":if(!this.open)return;t.preventDefault(),this.updateActiveItemIndex(0),this.scrollToActiveItem(),this.comboboxInViewport()||this.el.scrollIntoView();break;case"End":if(!this.open)return;t.preventDefault(),this.updateActiveItemIndex(this.filteredItems.length-1),this.scrollToActiveItem(),this.comboboxInViewport()||this.el.scrollIntoView();break;case"Escape":this.open=!1,t.preventDefault();break;case"Enter":this.activeItemIndex>-1?(this.toggleSelection(this.filteredItems[this.activeItemIndex]),t.preventDefault()):this.activeChipIndex>-1?(this.removeActiveChip(),t.preventDefault()):this.allowCustomValues&&this.text?(this.addCustomChip(this.text,!0),t.preventDefault()):t.defaultPrevented||gL(this)&&t.preventDefault();break;case"Delete":case"Backspace":this.activeChipIndex>-1?(t.preventDefault(),this.removeActiveChip()):!this.text&&this.isMulti()&&(t.preventDefault(),this.removeLastChip());break}},this.toggleCloseEnd=()=>{this.open=!1,this.el.removeEventListener("calciteComboboxClose",this.toggleCloseEnd)},this.toggleOpenEnd=()=>{this.open=!1,this.el.removeEventListener("calciteComboboxOpen",this.toggleOpenEnd)},this.setMaxScrollerHeight=async()=>{const{listContainerEl:t,open:e,referenceEl:i}=this;if(!t||!e)return;await this.reposition(!0);const n=this.getMaxScrollerHeight();t.style.maxHeight=n>0?`${n}px`:"",t.style.minWidth=`${i.clientWidth}px`,await this.reposition(!0)},this.calciteChipCloseHandler=t=>{this.open=!1;const e=this.items.find(i=>i===t);e&&this.toggleSelection(e,!1),this.calciteComboboxChipClose.emit()},this.clickHandler=t=>{t.composedPath().some(e=>e.tagName==="CALCITE-CHIP")||(this.open=!this.open,this.updateActiveItemIndex(0),this.setFocus())},this.setInactiveIfNotContained=t=>{const e=t.composedPath();!this.open||e.includes(this.el)||e.includes(this.referenceEl)||(this.allowCustomValues&&this.text.trim().length&&this.addCustomChip(this.text),this.selectionMode==="single"&&(this.textInput&&(this.textInput.value=""),this.text="",this.filterItems(""),this.updateActiveItemIndex(-1)),this.open=!1)},this.setFloatingEl=t=>{this.floatingEl=t,mm(this,this.referenceEl,this.floatingEl)},this.setContainerEl=t=>{this.resizeObserver.observe(t),this.listContainerEl=t,this.transitionEl=t,Cl(this)},this.setReferenceEl=t=>{this.referenceEl=t,mm(this,this.referenceEl,this.floatingEl)},this.inputHandler=t=>{const e=t.target.value;this.text=e,this.filterItems(e),e&&(this.activeChipIndex=-1)},this.filterItems=(()=>{const t=(e,i)=>e&&i.some(({label:n,value:r})=>wht(e)?r===e.label:r===e.textLabel||r===e.value||n===e.textLabel||n===e.value);return pI(e=>{const i=ght(this.data,e);this.getCombinedItems().forEach(r=>{const s=!t(r,i);r.hidden=s;const[o,a]=r.ancestors;(t(o,i)||t(a,i))&&(r.hidden=!1),s||r.ancestors.forEach(l=>l.hidden=!1)}),this.filteredItems=this.getfilteredItems(),this.calciteComboboxFilterChange.emit()},100)})(),this.internalComboboxChangeEvent=()=>{this.calciteComboboxChange.emit()},this.emitComboboxChange=pI(this.internalComboboxChangeEvent,0),this.updateItems=()=>{this.items=this.getItems(),this.groupItems=this.getGroupItems(),this.data=this.getData(),this.selectedItems=this.getSelectedItems(),this.filteredItems=this.getfilteredItems(),this.needsIcon=this.getNeedsIcon(),this.allowCustomValues||this.setMaxScrollerHeight()},this.scrollToActiveItem=()=>{const t=this.filteredItems[this.activeItemIndex];if(!t)return;const e=this.calculateSingleItemHeight(t),{offsetHeight:i,scrollTop:n}=this.listContainerEl;i+n<t.offsetTop+e?this.listContainerEl.scrollTop=t.offsetTop-i+e:t.offsetTop<n&&(this.listContainerEl.scrollTop=t.offsetTop)},this.comboboxFocusHandler=()=>{var t;(t=this.textInput)==null||t.focus()},this.comboboxBlurHandler=t=>{this.setInactiveIfNotContained(t)},this.open=!1,this.disabled=!1,this.label=void 0,this.placeholder=void 0,this.placeholderIcon=void 0,this.placeholderIconFlipRtl=!1,this.maxItems=0,this.name=void 0,this.allowCustomValues=void 0,this.overlayPositioning="absolute",this.required=!1,this.selectionMode="multiple",this.scale="m",this.value=null,this.flipPlacements=void 0,this.messages=void 0,this.messageOverrides=void 0,this.selectedItems=[],this.filteredItems=[],this.items=[],this.groupItems=[],this.needsIcon=void 0,this.activeItemIndex=-1,this.activeChipIndex=-1,this.activeDescendant="",this.text="",this.effectiveLocale=void 0,this.defaultMessages=void 0}openHandler(t){if(t||P0(this.floatingEl),this.disabled){this.open=!1;return}this.setMaxScrollerHeight()}handleDisabledChange(t){t||(this.open=!1)}maxItemsHandler(){this.setMaxScrollerHeight()}overlayPositioningHandler(){this.reposition(!0)}valueHandler(t){if(!this.internalValueChangeFlag){const e=this.getItems();Array.isArray(t)?e.forEach(i=>i.selected=t.includes(i.value)):t?e.forEach(i=>i.selected=t===i.value):e.forEach(i=>i.selected=!1),this.updateItems()}}onMessagesChange(){}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}selectedItemsHandler(){this.internalValueChangeFlag=!0,this.value=this.getValue(),this.internalValueChangeFlag=!1}documentClickHandler(t){Lo(t)&&this.setInactiveIfNotContained(t)}calciteComboboxItemChangeHandler(t){if(this.ignoreSelectedEventsFlag)return;const e=t.target,i=this.filteredItems.indexOf(e);this.updateActiveItemIndex(i),this.toggleSelection(e,e.selected)}async reposition(t=!1){const{floatingEl:e,referenceEl:i,placement:n,overlayPositioning:r,filteredFlipPlacements:s}=this;return f2(this,{floatingEl:e,referenceEl:i,overlayPositioning:r,placement:n,flipPlacements:s,type:"menu"},t)}async setFocus(){var t;await Hi(this),(t=this.textInput)==null||t.focus(),this.activeChipIndex=-1,this.activeItemIndex=-1}connectedCallback(){var t;hn(this),dr(this),this.internalValueChangeFlag=!0,this.value=this.getValue(),this.internalValueChangeFlag=!1,(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0}),id(this),Rm(this),Cl(this),this.setFilteredPlacements(),this.reposition(!0),this.open&&this.openHandler(this.open)}async componentWillLoad(){Ui(this),this.updateItems(),await cr(this)}componentDidLoad(){UH(this,this.getValue()),this.reposition(!0),Bi(this)}componentDidRender(){this.el.offsetHeight!==this.inputHeight&&(this.reposition(!0),this.inputHeight=this.el.offsetHeight),lr(this)}disconnectedCallback(){var t,e;(t=this.mutationObserver)==null||t.disconnect(),(e=this.resizeObserver)==null||e.disconnect(),qh(this),Lm(this),x1(this,this.referenceEl,this.floatingEl),q0(this),pn(this),hr(this)}textHandler(){this.updateActiveItemIndex(-1)}effectiveLocaleChange(){ur(this,this.effectiveLocale)}comboboxInViewport(){const t=this.el.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.right<=(window.innerWidth||document.documentElement.clientWidth)&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)}onBeforeOpen(){this.calciteComboboxBeforeOpen.emit()}onOpen(){this.calciteComboboxOpen.emit()}onBeforeClose(){this.calciteComboboxBeforeClose.emit()}onClose(){this.calciteComboboxClose.emit()}getMaxScrollerHeight(){const t=this.getCombinedItems().filter(r=>!r.hidden),{maxItems:e}=this;let i=0,n=0;return t.length>e&&t.forEach(r=>{if(i<e&&e>0){const s=this.calculateSingleItemHeight(r);s>0&&(n+=s,i++)}}),n}calculateSingleItemHeight(t){if(!t)return;let e=t.offsetHeight;return Array.from(t.querySelectorAll($U)).map(n=>n==null?void 0:n.offsetHeight).forEach(n=>{e-=n}),e}getCombinedItems(){return[...this.groupItems,...this.items]}toggleSelection(t,e=!t.selected){t&&(this.isMulti()?(t.selected=e,this.updateAncestors(t),this.selectedItems=this.getSelectedItems(),this.emitComboboxChange(),this.resetText(),this.filterItems("")):(this.ignoreSelectedEventsFlag=!0,this.items.forEach(i=>i.selected=i===t?e:!1),this.ignoreSelectedEventsFlag=!1,this.selectedItems=this.getSelectedItems(),this.emitComboboxChange(),this.textInput&&(this.textInput.value=t.textLabel),this.open=!1,this.updateActiveItemIndex(-1),this.resetText(),this.filterItems("")))}updateAncestors(t){if(this.selectionMode!=="ancestors")return;const e=kie(t),i=vht(t);t.selected?e.forEach(n=>{n.selected=!0}):(i.forEach(n=>n.selected=!1),[...e].forEach(n=>{$ie(n)||(n.selected=!1)}))}getfilteredItems(){return this.items.filter(t=>!t.hidden)}getSelectedItems(){if(!this.isMulti()){const t=this.items.find(({selected:e})=>e);return t?[t]:[]}return this.items.filter(t=>t.selected&&(this.selectionMode!=="ancestors"||!$ie(t))).sort((t,e)=>{const i=this.selectedItems.indexOf(t),n=this.selectedItems.indexOf(e);return i>-1&&n>-1?i-n:n-i})}getData(){return this.items.map(t=>({filterDisabled:t.filterDisabled,value:t.value,label:t.textLabel}))}getNeedsIcon(){return this.selectionMode==="single"&&this.items.some(t=>t.icon)}resetText(){this.textInput&&(this.textInput.value=""),this.text=""}getItems(){return Array.from(this.el.querySelectorAll(kU)).filter(e=>!e.disabled)}getGroupItems(){return Array.from(this.el.querySelectorAll(BH))}addCustomChip(t,e){const i=this.items.find(n=>n.textLabel===t);if(i)this.toggleSelection(i,!0);else{this.isMulti()||this.toggleSelection(this.selectedItems[this.selectedItems.length-1],!1);const n=document.createElement(kU);n.value=t,n.textLabel=t,n.selected=!0,this.el.appendChild(n),this.resetText(),e&&this.setFocus(),this.updateItems(),this.filterItems(""),this.emitComboboxChange()}}removeActiveChip(){this.toggleSelection(this.selectedItems[this.activeChipIndex],!1),this.setFocus()}removeLastChip(){this.toggleSelection(this.selectedItems[this.selectedItems.length-1],!1),this.setFocus()}previousChip(){if(this.text)return;const t=this.selectedItems.length-1,e=this.activeChipIndex;this.activeChipIndex=e===-1?t:Math.max(e-1,0),this.updateActiveItemIndex(-1),this.focusChip()}nextChip(){if(this.text||this.activeChipIndex===-1)return;const t=this.selectedItems.length-1,e=this.activeChipIndex+1;e>t?(this.activeChipIndex=-1,this.setFocus()):(this.activeChipIndex=e,this.focusChip()),this.updateActiveItemIndex(-1)}focusChip(){var i;const t=(i=this.selectedItems[this.activeChipIndex])==null?void 0:i.guid,e=t?this.referenceEl.querySelector(`#${Mie}${t}`):null;e==null||e.setFocus()}shiftActiveItemIndex(t){const{length:e}=this.filteredItems,i=(this.activeItemIndex+e+t)%e;this.updateActiveItemIndex(i),this.scrollToActiveItem()}updateActiveItemIndex(t){this.activeItemIndex=t;let e=null;this.filteredItems.forEach((i,n)=>{n===t?(i.active=!0,e=`${Aie}${i.guid}`):i.active=!1}),this.activeDescendant=e,this.activeItemIndex>-1&&(this.activeChipIndex=-1)}isMulti(){return this.selectionMode!=="single"}renderChips(){const{activeChipIndex:t,scale:e,selectionMode:i,messages:n}=this;return this.selectedItems.map((r,s)=>{const o={chip:!0,"chip--active":t===s},l=[...[...kie(r)].reverse(),r].map(h=>h.textLabel),u=i!=="ancestors"?r.textLabel:l.join(" / ");return I("calcite-chip",{class:o,closable:!0,icon:r.icon,iconFlipRtl:r.iconFlipRtl,id:r.guid?`${Mie}${r.guid}`:null,key:r.textLabel,messageOverrides:{dismissLabel:n.removeTag},onCalciteChipClose:()=>this.calciteChipCloseHandler(r),scale:e,title:u,value:r.value},u)})}renderInput(){const{guid:t,disabled:e,placeholder:i,selectionMode:n,selectedItems:r,open:s}=this,o=n==="single",a=r[0],l=!s&&o&&!!a;return I("span",{class:{"input-wrap":!0,"input-wrap--single":o}},l&&I("span",{class:{label:!0,"label--icon":!!(a!=null&&a.icon)},key:"label"},a.textLabel),I("input",{"aria-activedescendant":this.activeDescendant,"aria-autocomplete":"list","aria-controls":`${Dk}${t}`,"aria-label":Vc(this),class:{input:!0,"input--single":!0,"input--transparent":this.activeChipIndex>-1,"input--hidden":l,"input--icon":!!this.placeholderIcon},disabled:e,id:`${Pie}${t}`,key:"input",onBlur:this.comboboxBlurHandler,onFocus:this.comboboxFocusHandler,onInput:this.inputHandler,placeholder:i,ref:u=>this.textInput=u,type:"text"}))}renderListBoxOptions(){return this.filteredItems.map(t=>I("li",{"aria-selected":Vi(t.selected),id:t.guid?`${Aie}${t.guid}`:null,role:"option",tabindex:"-1"},t.textLabel))}renderFloatingUIContainer(){const{setFloatingEl:t,setContainerEl:e,open:i}=this,n={"list-container":!0,[jc.animation]:!0,[jc.animationActive]:i};return I("div",{"aria-hidden":"true",class:{"floating-ui-container":!0,"floating-ui-container--active":i},ref:t},I("div",{class:n,ref:e},I("ul",{class:{list:!0,"list--hide":!i}},I("slot",null))))}renderIconStart(){const{selectedItems:t,placeholderIcon:e,selectionMode:i,placeholderIconFlipRtl:n}=this,r=t[0],s=r==null?void 0:r.icon,o=i==="single";return(!this.open&&r?!!s&&o:!!this.placeholderIcon&&(!r||o))&&I("span",{class:"icon-start"},I("calcite-icon",{class:"selected-icon",flipRtl:this.open&&r?r.iconFlipRtl:n,icon:!this.open&&r?s:e,scale:"s"}))}renderIconEnd(){const{open:t}=this;return I("span",{class:"icon-end"},I("calcite-icon",{icon:t?"chevron-up":"chevron-down",scale:"s"}))}render(){const{guid:t,label:e,open:i}=this,n=this.selectionMode==="single";return I(Ft,{onClick:this.comboboxFocusHandler},I("div",{"aria-autocomplete":"list","aria-controls":`${Dk}${t}`,"aria-expanded":Vi(i),"aria-haspopup":"listbox","aria-label":Vc(this),"aria-live":"polite","aria-owns":`${Dk}${t}`,class:{wrapper:!0,"wrapper--single":n||!this.selectedItems.length,"wrapper--active":i},onClick:this.clickHandler,onKeyDown:this.keydownHandler,ref:this.setReferenceEl,role:"combobox"},I("div",{class:"grid-input"},this.renderIconStart(),!n&&this.renderChips(),I("label",{class:"screen-readers-only",htmlFor:`${Pie}${t}`,id:`${Oie}${t}`},e),this.renderInput()),this.renderIconEnd()),I("ul",{"aria-labelledby":`${Oie}${t}`,"aria-multiselectable":"true",class:"screen-readers-only",id:`${Dk}${t}`,role:"listbox",tabIndex:-1},this.renderListBoxOptions()),this.renderFloatingUIContainer(),I(Dm,{component:this}))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{open:["openHandler"],disabled:["handleDisabledChange"],maxItems:["maxItemsHandler"],overlayPositioning:["overlayPositioningHandler"],value:["valueHandler"],messageOverrides:["onMessagesChange"],flipPlacements:["flipPlacementsHandler"],selectedItems:["selectedItemsHandler"],text:["textHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return _ht}},[1,"calcite-combobox",{open:[1540],disabled:[516],label:[1],placeholder:[1],placeholderIcon:[513,"placeholder-icon"],placeholderIconFlipRtl:[516,"placeholder-icon-flip-rtl"],maxItems:[514,"max-items"],name:[513],allowCustomValues:[516,"allow-custom-values"],overlayPositioning:[513,"overlay-positioning"],required:[516],selectionMode:[513,"selection-mode"],scale:[513],value:[1025],flipPlacements:[16],messages:[1040],messageOverrides:[1040],selectedItems:[1040],filteredItems:[1040],items:[32],groupItems:[32],needsIcon:[32],activeItemIndex:[32],activeChipIndex:[32],activeDescendant:[32],text:[32],effectiveLocale:[32],defaultMessages:[32],reposition:[64],setFocus:[64]},[[5,"pointerdown","documentClickHandler"],[0,"calciteComboboxItemChange","calciteComboboxItemChangeHandler"]]]);function Sht(){if(typeof customElements>"u")return;["calcite-combobox","calcite-chip","calcite-icon"].forEach(e=>{switch(e){case"calcite-combobox":customElements.get(e)||customElements.define(e,xht);break;case"calcite-chip":customElements.get(e)||zH();break;case"calcite-icon":customElements.get(e)||ni();break}})}Sht();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Ko={icon:"icon",iconActive:"icon--active",iconIndent:"icon--indent",custom:"icon--custom",dot:"icon--dot",single:"label--single",label:"label",active:"label--active",selected:"label--selected",title:"title",textContainer:"text-container"},Eht=`@charset "UTF-8";@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-combobox-item-spacing-unit-l:0.5rem;--calcite-combobox-item-spacing-unit-s:0.25rem;--calcite-combobox-item-spacing-indent:0.5rem;--calcite-combobox-item-selector-icon-size:1rem}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-combobox-item-spacing-unit-l:0.75rem;--calcite-combobox-item-spacing-unit-s:0.5rem;--calcite-combobox-item-spacing-indent:0.75rem;--calcite-combobox-item-selector-icon-size:1rem}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-combobox-item-spacing-unit-l:1rem;--calcite-combobox-item-spacing-unit-s:0.625rem;--calcite-combobox-item-spacing-indent:1rem;--calcite-combobox-item-selector-icon-size:1.5rem}.container{--calcite-combobox-item-indent-value:calc(
    var(--calcite-combobox-item-spacing-indent) * var(--calcite-combobox-item-spacing-indent-multiplier)
  )}:host(:focus){--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host,ul{margin:0px;display:flex;flex-direction:column;padding:0px}:host(:focus),ul:focus{outline:2px solid transparent;outline-offset:2px}.label{position:relative;box-sizing:border-box;display:flex;inline-size:100%;min-inline-size:100%;cursor:pointer;align-items:center;color:var(--calcite-ui-text-3);text-decoration-line:none;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);outline-color:transparent;word-wrap:break-word;word-break:break-word;padding-block:var(--calcite-combobox-item-spacing-unit-s);padding-inline:var(--calcite-combobox-item-spacing-unit-l)}:host([disabled]) .label{cursor:default}.label--selected{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}.label--active{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.label:hover,.label:active{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1);text-decoration-line:none;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.title{padding-block:0;padding-inline:var(--calcite-combobox-item-spacing-unit-l)}.icon{display:inline-flex;opacity:0;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);color:var(--calcite-ui-border-1)}.icon--indent{padding-inline-start:var(--calcite-combobox-item-indent-value)}.icon--custom{margin-block-start:-1px;padding-inline-start:var(--calcite-combobox-item-spacing-unit-l);color:var(--calcite-ui-text-3)}.icon--active{color:var(--calcite-ui-text-1)}.icon--dot{display:flex;justify-content:center;min-inline-size:var(--calcite-combobox-item-selector-icon-size)}.icon--dot:before{text-align:start;content:"•"}.label--active .icon{opacity:1}.label--selected .icon{opacity:1;color:var(--calcite-ui-brand)}:host(:hover[disabled]) .icon{opacity:1}`,Cht=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteComboboxItemChange=ue(this,"calciteComboboxItemChange",6),this.scale="m",this.itemClickHandler=t=>{t.preventDefault(),this.toggleSelected()},this.disabled=!1,this.selected=!1,this.active=!1,this.ancestors=void 0,this.guid=Ts(),this.icon=void 0,this.iconFlipRtl=!1,this.textLabel=void 0,this.value=void 0,this.filterDisabled=void 0}selectedWatchHandler(){this.calciteComboboxItemChange.emit()}connectedCallback(){this.ancestors=yht(this.el),this.scale=Hr(this.el,"scale",this.scale),ed(this)}disconnectedCallback(){td(this)}componentDidRender(){lr(this)}toggleSelected(t){this.disabled||(this.selected=typeof t=="boolean"?t:!this.selected)}renderIcon(t){return this.icon?I("calcite-icon",{class:{[Ko.custom]:!!this.icon,[Ko.iconActive]:this.icon&&this.selected,[Ko.iconIndent]:!0},flipRtl:this.iconFlipRtl,icon:this.icon||t,key:"icon",scale:this.scale==="l"?"m":"s"}):null}renderSelectIndicator(t,e){return t?I("span",{class:{[Ko.icon]:!0,[Ko.dot]:!0,[Ko.iconIndent]:!0}}):I("calcite-icon",{class:{[Ko.icon]:!0,[Ko.iconActive]:this.selected,[Ko.iconIndent]:!0},flipRtl:this.iconFlipRtl,icon:e,key:"indicator",scale:this.scale==="l"?"m":"s"})}renderChildren(){return Wr(this.el)?I("ul",{key:"default-slot-container"},I("slot",null)):null}render(){const t=Hr(this.el,"selection-mode","multiple")==="single",e=t&&!this.disabled,i=t?"dot":"check",n=this.disabled?"circle-disallowed":i,r={[Ko.label]:!0,[Ko.selected]:this.selected,[Ko.active]:this.active,[Ko.single]:t},s=bht(this.el);return I(Ft,{"aria-hidden":"true"},I("div",{class:`container scale--${this.scale}`,style:{"--calcite-combobox-item-spacing-indent-multiplier":`${s}`}},I("li",{class:r,id:this.guid,onClick:this.itemClickHandler},this.renderSelectIndicator(e,n),this.renderIcon(n),I("span",{class:"title"},this.textLabel)),this.renderChildren()))}get el(){return this}static get watchers(){return{selected:["selectedWatchHandler"]}}static get style(){return Eht}},[1,"calcite-combobox-item",{disabled:[516],selected:[1540],active:[516],ancestors:[1040],guid:[513],icon:[513],iconFlipRtl:[516,"icon-flip-rtl"],textLabel:[513,"text-label"],value:[8],filterDisabled:[516,"filter-disabled"]}]);function Iht(){if(typeof customElements>"u")return;["calcite-combobox-item","calcite-icon"].forEach(e=>{switch(e){case"calcite-combobox-item":customElements.get(e)||customElements.define(e,Cht);break;case"calcite-icon":customElements.get(e)||ni();break}})}Iht();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function Tht(t,e,i){const n=e[0]-t[0],r=i[0]-e[0],s=e[1]-t[1],o=i[1]-e[1],a=s/(n||r<0&&0),l=o/(r||n<0&&0),u=(a*r+l*n)/(n+r);return(Math.sign(a)+Math.sign(l))*Math.min(Math.abs(a),Math.abs(l),.5*Math.abs(u))||0}function Rie(t,e,i){const n=e[0]-t[0],r=e[1]-t[1];return n?(3*r/n-i)/2:i}function Lie(t,e,i,n,r){const[s,o]=t,[a,l]=e,u=(a-s)/3,h=r([s+u,o+u*i]).join(","),p=r([a-u,l-u*n]).join(","),f=r([a,l]).join(",");return`C ${h} ${p} ${f}`}function kht({width:t,height:e,min:i,max:n}){const r=n[0]-i[0],s=n[1]-i[1];return o=>{const a=(o[0]-i[0])/r*t,l=e-o[1]/s*e;return[a,l]}}function $ht(t){const[e,i]=t[0],n=[e,i],r=[e,i];return t.reduce(({min:s,max:o},[a,l])=>({min:[Math.min(s[0],a),Math.min(s[1],l)],max:[Math.max(o[0],a),Math.max(o[1],l)]}),{min:n,max:r})}function Aht({data:t,min:e,max:i,t:n}){if(t.length===0)return"";const[r,s]=n(t[0]),[o,a]=n(e),[l]=n(i);let u,h,p;const f=t.reduce((b,_,w)=>{if(h=t[w-2],p=t[w-1],w>1){const S=Tht(h,p,_),C=u===void 0?Rie(h,p,S):u,$=Lie(h,p,C,S,n);return u=S,`${b} ${$}`}return b},`M ${o},${a} L ${o},${s} L ${r},${s}`),g=t[t.length-1],v=Lie(p,g,u,Rie(p,g,u),n);return`${f} ${v} L ${l},${a} Z`}const Mht="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:block;block-size:100%}.svg{fill:currentColor;stroke:transparent;margin:0px;display:block;block-size:100%;inline-size:100%;padding:0px}.svg .graph-path--highlight{fill:var(--calcite-ui-brand);opacity:0.5}",Oht=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.graphId=`calcite-graph-${Ts()}`,this.resizeObserver=Pi("resize",()=>t1(this)),this.data=[],this.colorStops=void 0,this.highlightMin=void 0,this.highlightMax=void 0,this.min=void 0,this.max=void 0}connectedCallback(){var t;(t=this.resizeObserver)==null||t.observe(this.el)}disconnectedCallback(){var t;(t=this.resizeObserver)==null||t.disconnect()}render(){const{data:t,colorStops:e,el:i,highlightMax:n,highlightMin:r,min:s,max:o}=this,a=this.graphId,{clientHeight:l,clientWidth:u}=i;if(!t||t.length===0)return I("svg",{"aria-hidden":"true",class:"svg",height:l,preserveAspectRatio:"none",viewBox:`0 0 ${u} ${l}`,width:u});const{min:h,max:p}=$ht(t);let f=h,g=p;(s<h[0]||s>h[0])&&(f=[s,0]),(o>p[0]||o<p[0])&&(g=[o,p[1]]);const v=kht({min:f,max:g,width:u,height:l}),[b]=v([r,g[1]]),[_]=v([n,g[1]]),w=Aht({data:t,min:h,max:p,t:v}),S=e?`url(#linear-gradient-${a})`:void 0;return I("svg",{"aria-hidden":"true",class:"svg",height:l,preserveAspectRatio:"none",viewBox:`0 0 ${u} ${l}`,width:u},e?I("defs",null,I("linearGradient",{id:`linear-gradient-${a}`,x1:"0",x2:"1",y1:"0",y2:"0"},e.map(({offset:C,color:$,opacity:M})=>I("stop",{offset:`${C*100}%`,"stop-color":$,"stop-opacity":M})))):null,r!==void 0?[I("mask",{height:"100%",id:`${a}1`,width:"100%",x:"0%",y:"0%"},I("path",{d:`
            M 0,0
            L ${b-1},0
            L ${b-1},${l}
            L 0,${l}
            Z
          `,fill:"white"})),I("mask",{height:"100%",id:`${a}2`,width:"100%",x:"0%",y:"0%"},I("path",{d:`
            M ${b+1},0
            L ${_-1},0
            L ${_-1},${l}
            L ${b+1}, ${l}
            Z
          `,fill:"white"})),I("mask",{height:"100%",id:`${a}3`,width:"100%",x:"0%",y:"0%"},I("path",{d:`
                M ${_+1},0
                L ${u},0
                L ${u},${l}
                L ${_+1}, ${l}
                Z
              `,fill:"white"})),I("path",{class:"graph-path",d:w,fill:S,mask:`url(#${a}1)`}),I("path",{class:"graph-path--highlight",d:w,fill:S,mask:`url(#${a}2)`}),I("path",{class:"graph-path",d:w,fill:S,mask:`url(#${a}3)`})]:I("path",{class:"graph-path",d:w,fill:S}))}get el(){return this}static get style(){return Mht}},[1,"calcite-graph",{data:[16],colorStops:[16],highlightMin:[2,"highlight-min"],highlightMax:[2,"highlight-max"],min:[514],max:[514]}]);function l_e(){if(typeof customElements>"u")return;["calcite-graph"].forEach(e=>{switch(e){case"calcite-graph":customElements.get(e)||customElements.define(e,Oht);break}})}l_e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Av={handleLabel:"handle__label",handleLabelMinValue:"handle__label--minValue",handleLabelValue:"handle__label--value",tickMin:"tick__label--min",tickMax:"tick__label--max"},Pht=`@charset "UTF-8";@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}.scale--s{--calcite-slider-handle-size:0.625rem;--calcite-slider-handle-extension-height:0.4rem;--calcite-slider-container-font-size:var(--calcite-font-size--3)}.scale--s .handle__label,.scale--s .tick__label{line-height:.75rem}.scale--m{--calcite-slider-handle-size:0.875rem;--calcite-slider-handle-extension-height:0.5rem;--calcite-slider-container-font-size:var(--calcite-font-size--2)}.scale--m .handle__label,.scale--m .tick__label{line-height:1rem}.scale--l{--calcite-slider-handle-size:1rem;--calcite-slider-handle-extension-height:0.65rem;--calcite-slider-container-font-size:var(--calcite-font-size--1)}.scale--l .handle__label,.scale--l .tick__label{line-height:1rem}.handle__label,.tick__label{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-2);font-size:var(--calcite-slider-container-font-size)}:host{display:block}.container{position:relative;display:block;overflow-wrap:normal;word-break:normal;padding-inline:calc(var(--calcite-slider-handle-size) * 0.5);padding-block:calc(var(--calcite-slider-handle-size) * 0.5);margin-block:calc(var(--calcite-slider-handle-size) * 0.5);margin-inline:0;--calcite-slider-full-handle-height:calc(
    var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height)
  )}:host([disabled]) .track__range,:host([disabled]) .tick--active{background-color:var(--calcite-ui-text-3)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.375rem}.scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.5rem}.scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-0.55rem}:host([precise]:not([has-histogram])) .container .thumb--value{--calcite-slider-thumb-y-offset:calc(var(--calcite-slider-full-handle-height) * -1)}.thumb-container{position:relative;max-inline-size:100%}.thumb{--calcite-slider-thumb-x-offset:calc(var(--calcite-slider-handle-size) * 0.5);position:absolute;margin:0px;display:flex;cursor:pointer;flex-direction:column;align-items:center;border-style:none;background-color:transparent;padding:0px;font-family:inherit;outline:2px solid transparent;outline-offset:2px;transform:translate(var(--calcite-slider-thumb-x-offset), var(--calcite-slider-thumb-y-offset))}.thumb .handle__label.static,.thumb .handle__label.transformed{position:absolute;inset-block:0px;opacity:0}.thumb .handle__label.hyphen::after{content:"—";display:inline-block;inline-size:1em}.thumb .handle__label.hyphen--wrap{display:flex}.thumb .handle{box-sizing:border-box;border-radius:9999px;background-color:var(--calcite-ui-foreground-1);outline-color:transparent;block-size:var(--calcite-slider-handle-size);inline-size:var(--calcite-slider-handle-size);box-shadow:0 0 0 2px var(--calcite-ui-text-3) inset;transition:border var(--calcite-internal-animation-timing-medium) ease, background-color var(--calcite-internal-animation-timing-medium) ease, box-shadow var(--calcite-animation-timing) ease}.thumb .handle-extension{inline-size:0.125rem;block-size:var(--calcite-slider-handle-extension-height);background-color:var(--calcite-ui-text-3)}.thumb:hover .handle{box-shadow:0 0 0 3px var(--calcite-ui-brand) inset}.thumb:hover .handle-extension{background-color:var(--calcite-ui-brand)}.thumb:focus .handle{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.thumb:focus .handle-extension{background-color:var(--calcite-ui-brand)}.thumb.thumb--minValue{transform:translate(calc(var(--calcite-slider-thumb-x-offset) * -1), var(--calcite-slider-thumb-y-offset))}.thumb.thumb--precise{--calcite-slider-thumb-y-offset:-0.125rem}:host([label-handles]) .thumb{--calcite-slider-thumb-x-offset:50%}:host([label-handles]):host(:not([has-histogram])) .scale--s .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-1.4375rem}:host([label-handles]):host(:not([has-histogram])) .scale--m .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-1.875rem}:host([label-handles]):host(:not([has-histogram])) .scale--l .thumb:not(.thumb--precise){--calcite-slider-thumb-y-offset:-2rem}:host([has-histogram][label-handles]) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--minValue.thumb--precise .handle__label{margin-block-start:0.5em}:host(:not([has-histogram]):not([precise])) .handle__label,:host([label-handles]:not([has-histogram])) .thumb--value .handle__label{margin-block-end:0.5em}:host([label-handles][precise]):host(:not([has-histogram])) .scale--s .thumb--value{--calcite-slider-thumb-y-offset:-2.075rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--m .thumb--value{--calcite-slider-thumb-y-offset:-2.75rem}:host([label-handles][precise]):host(:not([has-histogram])) .scale--l .thumb--value{--calcite-slider-thumb-y-offset:-3.0625rem}.thumb:focus .handle,.thumb--active .handle{background-color:var(--calcite-ui-brand);box-shadow:0 0 8px 0 rgba(0, 0, 0, 0.16)}.thumb:hover.thumb--precise:after,.thumb:focus.thumb--precise:after,.thumb--active.thumb--precise:after{background-color:var(--calcite-ui-brand)}.track{position:relative;block-size:0.125rem;border-radius:0px;background-color:var(--calcite-ui-border-2);transition:all var(--calcite-internal-animation-timing-medium) ease-in}.track__range{position:absolute;inset-block-start:0px;block-size:0.125rem;background-color:var(--calcite-ui-brand)}.container--range .track__range:hover{cursor:ew-resize}.container--range .track__range:after{position:absolute;inline-size:100%;content:"";inset-block-start:calc(var(--calcite-slider-full-handle-height) * 0.5 * -1);block-size:calc(var(--calcite-slider-handle-size) + var(--calcite-slider-handle-extension-height))}@media (forced-colors: active){.thumb{outline-width:0;outline-offset:0}.handle{outline:2px solid transparent;outline-offset:2px}.thumb:focus .handle,.thumb .handle-extension,.thumb:hover .handle-extension,.thumb:focus .handle-extension,.thumb:active .handle-extension{background-color:canvasText}.track{background-color:canvasText}.track__range{background-color:highlight}}.tick{position:absolute;block-size:0.25rem;inline-size:0.125rem;border-width:1px;border-style:solid;background-color:var(--calcite-ui-border-input);border-color:var(--calcite-ui-foreground-1);inset-block-start:-2px;pointer-events:none;margin-inline-start:calc(-1 * 0.125rem)}.tick--active{background-color:var(--calcite-ui-brand)}.tick__label{pointer-events:none;margin-block-start:0.875rem;display:flex;justify-content:center}.tick__label--min{transition:opacity var(--calcite-animation-timing)}.tick__label--max{transition:opacity var(--calcite-internal-animation-timing-fast)}:host([has-histogram][label-handles]) .tick__label--min,:host([has-histogram][label-handles]) .tick__label--max,:host([has-histogram][precise]) .tick__label--min,:host([has-histogram][precise]) .tick__label--max{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-ui-text-3)}.graph{color:var(--calcite-ui-foreground-3);block-size:48px}:host([label-ticks][ticks]) .container{padding-block-end:calc(0.875rem + var(--calcite-slider-container-font-size))}:host([has-histogram]):host([precise][label-handles]) .container{padding-block-end:calc(var(--calcite-slider-full-handle-height) + 1em)}:host([has-histogram]):host([label-handles]:not([precise])) .container{padding-block-end:calc(var(--calcite-slider-handle-size) * 0.5 + 1em)}:host([has-histogram]):host([precise]:not([label-handles])) .container{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container{padding-block-start:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([precise]:not([label-handles])) .container--range{padding-block-end:var(--calcite-slider-full-handle-height)}:host(:not([has-histogram])):host([label-handles]:not([precise])) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container{padding-block-start:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}:host(:not([has-histogram])):host([label-handles][precise]) .container--range{padding-block-end:calc(var(--calcite-slider-full-handle-height) + var(--calcite-slider-container-font-size) + 4px)}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}`;function so(t){return Array.isArray(t)}const Rht=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteSliderInput=ue(this,"calciteSliderInput",6),this.calciteSliderChange=ue(this,"calciteSliderChange",6),this.activeProp="value",this.guid=`calcite-slider-${Ts()}`,this.dragUpdate=t=>{if(t.preventDefault(),this.dragProp){const e=this.translate(t.clientX||t.pageX);if(so(this.value)&&this.dragProp==="minMaxValue")if(this.minValueDragRange&&this.maxValueDragRange&&this.minMaxValueRange){const i=e-this.minValueDragRange,n=e+this.maxValueDragRange;n<=this.max&&i>=this.min&&n-i===this.minMaxValueRange&&this.setValue({minValue:this.clamp(i,"minValue"),maxValue:this.clamp(n,"maxValue")})}else this.minValueDragRange=e-this.minValue,this.maxValueDragRange=this.maxValue-e,this.minMaxValueRange=this.maxValue-this.minValue;else this.setValue({[this.dragProp]:this.clamp(e,this.dragProp)})}},this.pointerUpDragEnd=t=>{Lo(t)&&this.dragEnd(t)},this.dragEnd=t=>{this.removeDragListeners(),this.focusActiveHandle(t.clientX),this.lastDragPropValue!=this[this.dragProp]&&this.emitChange(),this.dragProp=null,this.lastDragPropValue=null,this.minValueDragRange=null,this.maxValueDragRange=null,this.minMaxValueRange=null},this.storeTrackRef=t=>{this.trackEl=t},this.determineGroupSeparator=t=>{if(typeof t=="number")return Lt.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},Lt.localize(t.toString())},this.disabled=!1,this.groupSeparator=!1,this.hasHistogram=!1,this.histogram=void 0,this.histogramStops=void 0,this.labelHandles=!1,this.labelTicks=!1,this.max=100,this.maxLabel=void 0,this.maxValue=void 0,this.min=0,this.minLabel=void 0,this.minValue=void 0,this.mirrored=!1,this.name=void 0,this.numberingSystem=void 0,this.pageStep=void 0,this.precise=!1,this.required=!1,this.snap=!1,this.step=1,this.ticks=void 0,this.value=0,this.scale="m",this.effectiveLocale="",this.minMaxValueRange=null,this.minValueDragRange=null,this.maxValueDragRange=null,this.tickValues=[]}histogramWatcher(t){this.hasHistogram=!!t}valueHandler(){this.setMinMaxFromValue()}minMaxValueHandler(){this.setValueFromMinMax()}connectedCallback(){hn(this),this.setMinMaxFromValue(),this.setValueFromMinMax(),id(this),Rm(this)}disconnectedCallback(){qh(this),Lm(this),pn(this),this.removeDragListeners()}componentWillLoad(){Ui(this),this.tickValues=this.generateTickValues(),so(this.value)||(this.value=this.clamp(this.value)),UH(this,this.value),this.snap&&!so(this.value)&&(this.value=this.getClosestStep(this.value)),this.histogram&&(this.hasHistogram=!0)}componentDidLoad(){Bi(this)}componentDidRender(){this.labelHandles&&(this.adjustHostObscuredHandleLabel("value"),so(this.value)&&(this.adjustHostObscuredHandleLabel("minValue"),this.precise&&!this.hasHistogram||this.hyphenateCollidingRangeHandleLabels())),this.hideObscuredBoundingTickLabels(),lr(this)}render(){const t=this.el.id||this.guid,e=so(this.value)?"maxValue":"value",i=so(this.value)?this.maxValue:this.value,n=this.determineGroupSeparator(i),r=this.determineGroupSeparator(this.minValue),s=this.minValue||this.min,o=this.shouldUseMinValue(),a=this.getUnitInterval(o?this.minValue:s)*100,l=this.getUnitInterval(i)*100,u=this.shouldMirror(),h=`${u?100-a:a}%`,p=`${u?l:100-l}%`,f=so(this.value),g=`${Av.handleLabel} ${Av.handleLabelMinValue}`,v=`${Av.handleLabel} ${Av.handleLabelValue}`,b=I("div",{"aria-disabled":this.disabled,"aria-label":f?this.maxLabel:this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":i,class:{thumb:!0,"thumb--value":!0,"thumb--active":this.lastDragProp!=="minMaxValue"&&this.dragProp===e},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp=e,onPointerDown:j=>this.pointerDownDragStart(j,e),ref:j=>this.maxHandle=j,role:"slider",style:{right:p},tabIndex:0},I("div",{class:"handle"})),_=I("div",{"aria-disabled":this.disabled,"aria-label":f?this.maxLabel:this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":i,class:{thumb:!0,"thumb--value":!0,"thumb--active":this.lastDragProp!=="minMaxValue"&&this.dragProp===e},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp=e,onPointerDown:j=>this.pointerDownDragStart(j,e),ref:j=>this.maxHandle=j,role:"slider",style:{right:p},tabIndex:0},I("span",{"aria-hidden":"true",class:v},n),I("span",{"aria-hidden":"true",class:`${v} static`},n),I("span",{"aria-hidden":"true",class:`${v} transformed`},n),I("div",{class:"handle"})),w=I("div",{"aria-disabled":this.disabled,"aria-label":f?this.maxLabel:this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":i,class:{thumb:!0,"thumb--value":!0,"thumb--active":this.lastDragProp!=="minMaxValue"&&this.dragProp===e},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp=e,onPointerDown:j=>this.pointerDownDragStart(j,e),ref:j=>this.maxHandle=j,role:"slider",style:{right:p},tabIndex:0},I("div",{class:"handle"}),I("span",{"aria-hidden":"true",class:v},n),I("span",{"aria-hidden":"true",class:`${v} static`},n),I("span",{"aria-hidden":"true",class:`${v} transformed`},n)),S=I("div",{"aria-disabled":this.disabled,"aria-label":f?this.maxLabel:this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":i,class:{thumb:!0,"thumb--value":!0,"thumb--active":this.lastDragProp!=="minMaxValue"&&this.dragProp===e,"thumb--precise":!0},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp=e,onPointerDown:j=>this.pointerDownDragStart(j,e),ref:j=>this.maxHandle=j,role:"slider",style:{right:p},tabIndex:0},I("div",{class:"handle"}),I("div",{class:"handle-extension"})),C=I("div",{"aria-disabled":this.disabled,"aria-label":f?this.maxLabel:this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":i,class:{thumb:!0,"thumb--value":!0,"thumb--active":this.lastDragProp!=="minMaxValue"&&this.dragProp===e,"thumb--precise":!0},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp=e,onPointerDown:j=>this.pointerDownDragStart(j,e),ref:j=>this.maxHandle=j,role:"slider",style:{right:p},tabIndex:0},I("div",{class:"handle-extension"}),I("div",{class:"handle"})),$=I("div",{"aria-disabled":this.disabled,"aria-label":f?this.maxLabel:this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":i,class:{thumb:!0,"thumb--value":!0,"thumb--active":this.lastDragProp!=="minMaxValue"&&this.dragProp===e,"thumb--precise":!0},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp=e,onPointerDown:j=>this.pointerDownDragStart(j,e),ref:j=>this.maxHandle=j,role:"slider",style:{right:p},tabIndex:0},I("span",{"aria-hidden":"true",class:v},n),I("span",{"aria-hidden":"true",class:`${v} static`},n),I("span",{"aria-hidden":"true",class:`${v} transformed`},n),I("div",{class:"handle"}),I("div",{class:"handle-extension"})),M=I("div",{"aria-disabled":this.disabled,"aria-label":f?this.maxLabel:this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":i,class:{thumb:!0,"thumb--value":!0,"thumb--active":this.lastDragProp!=="minMaxValue"&&this.dragProp===e,"thumb--precise":!0},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp=e,onPointerDown:j=>this.pointerDownDragStart(j,e),ref:j=>this.maxHandle=j,role:"slider",style:{right:p},tabIndex:0},I("div",{class:"handle-extension"}),I("div",{class:"handle"}),I("span",{"aria-hidden":"true",class:v},n),I("span",{"aria-hidden":"true",class:`${v} static`},n),I("span",{"aria-hidden":"true",class:`${v} transformed`},n)),P=I("div",{"aria-disabled":this.disabled,"aria-label":this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.minValue,class:{thumb:!0,"thumb--minValue":!0,"thumb--active":this.dragProp==="minValue"},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp="minValue",onPointerDown:j=>this.pointerDownDragStart(j,"minValue"),ref:j=>this.minHandle=j,role:"slider",style:{left:h},tabIndex:0},I("div",{class:"handle"})),k=I("div",{"aria-disabled":this.disabled,"aria-label":this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.minValue,class:{thumb:!0,"thumb--minValue":!0,"thumb--active":this.dragProp==="minValue"},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp="minValue",onPointerDown:j=>this.pointerDownDragStart(j,"minValue"),ref:j=>this.minHandle=j,role:"slider",style:{left:h},tabIndex:0},I("span",{"aria-hidden":"true",class:g},r),I("span",{"aria-hidden":"true",class:`${g} static`},r),I("span",{"aria-hidden":"true",class:`${g} transformed`},r),I("div",{class:"handle"})),D=I("div",{"aria-disabled":this.disabled,"aria-label":this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.minValue,class:{thumb:!0,"thumb--minValue":!0,"thumb--active":this.dragProp==="minValue"},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp="minValue",onPointerDown:j=>this.pointerDownDragStart(j,"minValue"),ref:j=>this.minHandle=j,role:"slider",style:{left:h},tabIndex:0},I("div",{class:"handle"}),I("span",{"aria-hidden":"true",class:g},r),I("span",{"aria-hidden":"true",class:`${g} static`},r),I("span",{"aria-hidden":"true",class:`${g} transformed`},r)),z=I("div",{"aria-disabled":this.disabled,"aria-label":this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.minValue,class:{thumb:!0,"thumb--minValue":!0,"thumb--active":this.dragProp==="minValue","thumb--precise":!0},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp="minValue",onPointerDown:j=>this.pointerDownDragStart(j,"minValue"),ref:j=>this.minHandle=j,role:"slider",style:{left:h},tabIndex:0},I("div",{class:"handle-extension"}),I("div",{class:"handle"})),B=I("div",{"aria-disabled":this.disabled,"aria-label":this.minLabel,"aria-orientation":"horizontal","aria-valuemax":this.max,"aria-valuemin":this.min,"aria-valuenow":this.minValue,class:{thumb:!0,"thumb--minValue":!0,"thumb--active":this.dragProp==="minValue","thumb--precise":!0},onBlur:()=>this.activeProp=null,onFocus:()=>this.activeProp="minValue",onPointerDown:j=>this.pointerDownDragStart(j,"minValue"),ref:j=>this.minHandle=j,role:"slider",style:{left:h},tabIndex:0},I("div",{class:"handle-extension"}),I("div",{class:"handle"}),I("span",{"aria-hidden":"true",class:g},r),I("span",{"aria-hidden":"true",class:`${g} static`},r),I("span",{"aria-hidden":"true",class:`${g} transformed`},r));return I(Ft,{id:t,onTouchStart:this.handleTouchStart},I("div",{"aria-label":Vc(this),class:{container:!0,["container--range"]:f,[`scale--${this.scale}`]:!0}},this.renderGraph(),I("div",{class:"track",ref:this.storeTrackRef},I("div",{class:"track__range",onPointerDown:j=>this.pointerDownDragStart(j,"minMaxValue"),style:{left:`${u?100-l:a}%`,right:`${u?a:100-l}%`}}),I("div",{class:"ticks"},this.tickValues.map(j=>{const K=`${this.getUnitInterval(j)*100}%`;let ie=j>=s&&j<=i;return o&&(ie=j>=this.minValue&&j<=this.maxValue),I("span",{class:{tick:!0,"tick--active":ie},style:{left:u?"":K,right:u?K:""}},this.renderTickLabel(j))}))),I("div",{class:"thumb-container"},!this.precise&&!this.labelHandles&&f&&P,!this.hasHistogram&&!this.precise&&this.labelHandles&&f&&k,this.precise&&!this.labelHandles&&f&&z,this.precise&&this.labelHandles&&f&&B,this.hasHistogram&&!this.precise&&this.labelHandles&&f&&D,!this.precise&&!this.labelHandles&&b,!this.hasHistogram&&!this.precise&&this.labelHandles&&_,!this.hasHistogram&&this.precise&&!this.labelHandles&&S,this.hasHistogram&&this.precise&&!this.labelHandles&&C,!this.hasHistogram&&this.precise&&this.labelHandles&&$,this.hasHistogram&&!this.precise&&this.labelHandles&&w,this.hasHistogram&&this.precise&&this.labelHandles&&M,I(Dm,{component:this}))))}renderGraph(){return this.histogram?I("calcite-graph",{class:"graph",colorStops:this.histogramStops,data:this.histogram,highlightMax:so(this.value)?this.maxValue:this.value,highlightMin:so(this.value)?this.minValue:this.min,max:this.max,min:this.min}):null}renderTickLabel(t){const e=so(this.value),i=t===this.min,n=t===this.max,r=this.determineGroupSeparator(t),s=I("span",{class:{tick__label:!0,[Av.tickMin]:i,[Av.tickMax]:n}},r);return this.labelTicks&&!this.hasHistogram&&!e||this.labelTicks&&!this.hasHistogram&&e&&!this.precise&&!this.labelHandles||this.labelTicks&&!this.hasHistogram&&e&&!this.precise&&this.labelHandles||this.labelTicks&&!this.hasHistogram&&e&&this.precise&&(i||n)||this.labelTicks&&this.hasHistogram&&!this.precise&&!this.labelHandles||this.labelTicks&&this.hasHistogram&&this.precise&&!this.labelHandles&&(i||n)||this.labelTicks&&this.hasHistogram&&!this.precise&&this.labelHandles&&(i||n)||this.labelTicks&&this.hasHistogram&&this.precise&&this.labelHandles&&(i||n)?s:null}keyDownHandler(t){const e=this.shouldMirror(),{activeProp:i,max:n,min:r,pageStep:s,step:o}=this,a=this[i],{key:l}=t;if(Yu(l)){t.preventDefault();return}let u;if(l==="ArrowUp"||l==="ArrowRight"?u=a+o*(e&&l==="ArrowRight"?-1:1):l==="ArrowDown"||l==="ArrowLeft"?u=a-o*(e&&l==="ArrowLeft"?-1:1):l==="PageUp"?s&&(u=a+s):l==="PageDown"?s&&(u=a-s):l==="Home"?u=r:l==="End"&&(u=n),isNaN(u))return;t.preventDefault();const h=Number(u.toFixed(g_(o)));this.setValue({[i]:this.clamp(h,i)})}pointerDownHandler(t){if(!Lo(t))return;const e=t.clientX||t.pageX,i=this.translate(e);let n="value";so(this.value)&&(i>=this.minValue&&i<=this.maxValue&&this.lastDragProp==="minMaxValue"?n="minMaxValue":n=Math.abs(this.maxValue-i)<Math.abs(this.minValue-i)||i>this.maxValue?"maxValue":"minValue"),this.lastDragPropValue=this[n],this.dragStart(n),this.el.shadowRoot.querySelector(".thumb:active")||this.setValue({[n]:this.clamp(i,n)}),this.focusActiveHandle(e)}handleTouchStart(t){t.preventDefault()}async setFocus(){await Hi(this);const t=this.minHandle?this.minHandle:this.maxHandle;t==null||t.focus()}setValueFromMinMax(){const{minValue:t,maxValue:e}=this;typeof t=="number"&&typeof e=="number"&&(this.value=[t,e])}setMinMaxFromValue(){const{value:t}=this;so(t)&&(this.minValue=t[0],this.maxValue=t[1])}onLabelClick(){this.setFocus()}shouldMirror(){return this.mirrored&&!this.hasHistogram}shouldUseMinValue(){return so(this.value)?this.hasHistogram&&this.maxValue===0||!this.hasHistogram&&this.minValue===0:!1}generateTickValues(){const t=[];let e=this.min;for(;this.ticks&&e<this.max+this.ticks;)t.push(Math.min(e,this.max)),e=e+this.ticks;return t}pointerDownDragStart(t,e){Lo(t)&&this.dragStart(e)}dragStart(t){this.dragProp=t,this.lastDragProp=this.dragProp,this.activeProp=t,document.addEventListener("pointermove",this.dragUpdate),document.addEventListener("pointerup",this.pointerUpDragEnd),document.addEventListener("pointercancel",this.dragEnd)}focusActiveHandle(t){switch(this.dragProp){case"minValue":this.minHandle.focus();break;case"maxValue":case"value":this.maxHandle.focus();break;case"minMaxValue":this.getClosestHandle(t).focus();break}}emitInput(){this.calciteSliderInput.emit()}emitChange(){this.calciteSliderChange.emit()}removeDragListeners(){document.removeEventListener("pointermove",this.dragUpdate),document.removeEventListener("pointerup",this.pointerUpDragEnd),document.removeEventListener("pointercancel",this.dragEnd)}setValue(t){let e;if(Object.keys(t).forEach(n=>{const r=t[n];e||(e=this[n]!==r),this[n]=r}),!e)return;this.dragProp||this.emitChange(),this.emitInput()}clamp(t,e){return t=NH(t,this.min,this.max),e==="maxValue"&&(t=Math.max(t,this.minValue)),e==="minValue"&&(t=Math.min(t,this.maxValue)),t}translate(t){const e=this.max-this.min,{left:i,width:n}=this.trackEl.getBoundingClientRect(),r=(t-i)/n,s=this.shouldMirror(),o=this.clamp(this.min+e*(s?1-r:r));let a=Number(o.toFixed(g_(this.step)));return this.snap&&this.step&&(a=this.getClosestStep(a)),a}getClosestStep(t){if(t=Number(this.clamp(t).toFixed(g_(this.step))),this.step){const e=Math.round(t/this.step)*this.step;t=Number(this.clamp(e).toFixed(g_(this.step)))}return t}getClosestHandle(t){return this.getDistanceX(this.maxHandle,t)>this.getDistanceX(this.minHandle,t)?this.minHandle:this.maxHandle}getDistanceX(t,e){return Math.abs(t.getBoundingClientRect().left-e)}getFontSizeForElement(t){return Number(window.getComputedStyle(t).getPropertyValue("font-size").match(/\d+/)[0])}getUnitInterval(t){t=this.clamp(t);const e=this.max-this.min;return(t-this.min)/e}adjustHostObscuredHandleLabel(t){const e=this.el.shadowRoot.querySelector(`.handle__label--${t}`),i=this.el.shadowRoot.querySelector(`.handle__label--${t}.static`),n=this.el.shadowRoot.querySelector(`.handle__label--${t}.transformed`),r=i.getBoundingClientRect(),s=this.getHostOffset(r.left,r.right);e.style.transform=`translateX(${s}px)`,n.style.transform=`translateX(${s}px)`}hyphenateCollidingRangeHandleLabels(){const{shadowRoot:t}=this.el,e=this.shouldMirror(),i=e?"value":"minValue",n=e?"minValue":"value",r=t.querySelector(`.handle__label--${i}`),s=t.querySelector(`.handle__label--${i}.static`),o=t.querySelector(`.handle__label--${i}.transformed`),a=this.getHostOffset(s.getBoundingClientRect().left,s.getBoundingClientRect().right),l=t.querySelector(`.handle__label--${n}`),u=t.querySelector(`.handle__label--${n}.static`),h=t.querySelector(`.handle__label--${n}.transformed`),p=this.getHostOffset(u.getBoundingClientRect().left,u.getBoundingClientRect().right),f=this.getFontSizeForElement(r),g=this.getRangeLabelOverlap(o,h),v=r,b=f/2;if(g>0){if(v.classList.add("hyphen","hyphen--wrap"),p===0&&a===0){let _=g/2-b;_=Math.sign(_)===-1?Math.abs(_):-_;const w=this.getHostOffset(o.getBoundingClientRect().left+_-b,o.getBoundingClientRect().right+_-b);let S=g/2;const C=this.getHostOffset(h.getBoundingClientRect().left+S,h.getBoundingClientRect().right+S);w!==0&&(_+=w,S+=w),C!==0&&(_+=C,S+=C),r.style.transform=`translateX(${_}px)`,o.style.transform=`translateX(${_-b}px)`,l.style.transform=`translateX(${S}px)`,h.style.transform=`translateX(${S}px)`}else if(a>0||p>0)r.style.transform=`translateX(${a+b}px)`,l.style.transform=`translateX(${g+p}px)`,h.style.transform=`translateX(${g+p}px)`;else if(a<0||p<0){let _=Math.abs(a)+g-b;_=Math.sign(_)===-1?Math.abs(_):-_,r.style.transform=`translateX(${_}px)`,o.style.transform=`translateX(${_-b}px)`}}else v.classList.remove("hyphen","hyphen--wrap"),r.style.transform=`translateX(${a}px)`,o.style.transform=`translateX(${a}px)`,l.style.transform=`translateX(${p}px)`,h.style.transform=`translateX(${p}px)`}hideObscuredBoundingTickLabels(){const t=so(this.value);if(!this.hasHistogram&&!t&&!this.labelHandles&&!this.precise||!this.hasHistogram&&!t&&this.labelHandles&&!this.precise||!this.hasHistogram&&!t&&!this.labelHandles&&this.precise||!this.hasHistogram&&!t&&this.labelHandles&&this.precise||!this.hasHistogram&&t&&!this.precise||this.hasHistogram&&!this.precise&&!this.labelHandles)return;const e=this.el.shadowRoot.querySelector(".thumb--minValue"),i=this.el.shadowRoot.querySelector(".thumb--value"),n=this.el.shadowRoot.querySelector(".tick__label--min"),r=this.el.shadowRoot.querySelector(".tick__label--max");!e&&i&&n&&r&&(n.style.opacity=this.isMinTickLabelObscured(n,i)?"0":"1",r.style.opacity=this.isMaxTickLabelObscured(r,i)?"0":"1"),e&&i&&n&&r&&(n.style.opacity=this.isMinTickLabelObscured(n,e)||this.isMinTickLabelObscured(n,i)?"0":"1",r.style.opacity=this.isMaxTickLabelObscured(r,e)||this.isMaxTickLabelObscured(r,i)&&this.hasHistogram?"0":"1")}getHostOffset(t,e){const i=this.el.getBoundingClientRect(),n=7;return t+n<i.left?i.left-t-n:e-n>i.right?-(e-i.right)+n:0}getRangeLabelOverlap(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect(),r=this.getFontSizeForElement(t),s=i.right+r-n.left;return Math.max(s,0)}isMinTickLabelObscured(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return GJ(i,n)}isMaxTickLabelObscured(t,e){const i=t.getBoundingClientRect(),n=e.getBoundingClientRect();return GJ(i,n)}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{histogram:["histogramWatcher"],value:["valueHandler"],minValue:["minMaxValueHandler"],maxValue:["minMaxValueHandler"]}}static get style(){return Pht}},[17,"calcite-slider",{disabled:[516],groupSeparator:[516,"group-separator"],hasHistogram:[1540,"has-histogram"],histogram:[16],histogramStops:[16],labelHandles:[516,"label-handles"],labelTicks:[516,"label-ticks"],max:[514],maxLabel:[1,"max-label"],maxValue:[1026,"max-value"],min:[514],minLabel:[1,"min-label"],minValue:[1026,"min-value"],mirrored:[516],name:[513],numberingSystem:[1,"numbering-system"],pageStep:[514,"page-step"],precise:[516],required:[516],snap:[516],step:[514],ticks:[514],value:[1538],scale:[513],effectiveLocale:[32],minMaxValueRange:[32],minValueDragRange:[32],maxValueDragRange:[32],tickValues:[32],setFocus:[64]},[[0,"keydown","keyDownHandler"],[1,"pointerdown","pointerDownHandler"]]]);function Lht(){if(typeof customElements>"u")return;["calcite-slider","calcite-graph"].forEach(e=>{switch(e){case"calcite-slider":customElements.get(e)||customElements.define(e,Rht);break;case"calcite-graph":customElements.get(e)||l_e();break}})}Lht();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Dht="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:relative;display:block;inline-size:100%}.track,.bar{position:absolute;inset-block-start:0px;block-size:2px}.track{z-index:1;inline-size:100%;overflow:hidden;background:var(--calcite-ui-border-3)}.bar{z-index:1;background-color:var(--calcite-ui-brand)}@media (forced-colors: active){.track{background-color:highlightText}.bar{background-color:linkText}}.indeterminate{inline-size:20%;animation:looping-progress-bar-ani calc(var(--calcite-internal-animation-timing-medium) * 11) linear infinite}.reversed{animation-direction:reverse}.text{padding-inline:0px;padding-block:1rem 0px;text-align:center;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-2)}@keyframes looping-progress-bar-ani{0%{transform:translate3d(-100%, 0, 0)}50%{inline-size:40%}100%{transform:translate3d(600%, 0, 0)}}",Fht=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="determinate",this.value=0,this.label=void 0,this.text=void 0,this.reversed=!1}render(){const e=this.type==="determinate"?{width:`${this.value*100}%`}:{};return I("div",{"aria-label":this.label||this.text,"aria-valuemax":1,"aria-valuemin":0,"aria-valuenow":this.value,role:"progressbar"},I("div",{class:"track"},I("div",{class:{bar:!0,indeterminate:this.type==="indeterminate",reversed:this.reversed},style:e})),this.text?I("div",{class:"text"},this.text):null)}get el(){return this}static get style(){return Dht}},[1,"calcite-progress",{type:[513],value:[2],label:[1],text:[1],reversed:[516]}]);function y2(){if(typeof customElements>"u")return;["calcite-progress"].forEach(e=>{switch(e){case"calcite-progress":customElements.get(e)||customElements.define(e,Fht);break}})}y2();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const ls={loader:"loader",clearButton:"clear-button",editingEnabled:"editing-enabled",inlineChild:"inline-child",inputIcon:"icon",prefix:"prefix",suffix:"suffix",numberButtonWrapper:"number-button-wrapper",buttonItemHorizontal:"number-button-item--horizontal",wrapper:"element-wrapper",inputWrapper:"wrapper",actionWrapper:"action-wrapper",resizeIconWrapper:"resize-icon-wrapper",numberButtonItem:"number-button-item"},Die={tel:"phone",password:"lock",email:"email-address",date:"calendar",time:"clock",search:"search"},Nht={action:"action"},zht="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:block}:host([scale=s]) input,:host([scale=s]) .prefix,:host([scale=s]) .suffix{block-size:1.5rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=s]) textarea{block-size:1.5rem;min-block-size:1.5rem}:host([scale=s]) .number-button-wrapper,:host([scale=s]) .action-wrapper calcite-button,:host([scale=s]) .action-wrapper calcite-button button{block-size:1.5rem}:host([scale=s]) input[type=file]{block-size:1.5rem}:host([scale=s]) .clear-button{min-block-size:1.5rem;min-inline-size:1.5rem}:host([scale=s]) textarea{block-size:auto;padding-block:0.25rem;padding-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) input,:host([scale=m]) .prefix,:host([scale=m]) .suffix{block-size:2rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=m]) textarea{min-block-size:2rem}:host([scale=m]) .number-button-wrapper,:host([scale=m]) .action-wrapper calcite-button,:host([scale=m]) .action-wrapper calcite-button button{block-size:2rem}:host([scale=m]) input[type=file]{block-size:2rem}:host([scale=m]) .clear-button{min-block-size:2rem;min-inline-size:2rem}:host([scale=m]) textarea{block-size:auto;padding-block:0.5rem;padding-inline:0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) input,:host([scale=l]) .prefix,:host([scale=l]) .suffix{block-size:2.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=l]) textarea{min-block-size:2.75rem}:host([scale=l]) .number-button-wrapper,:host([scale=l]) .action-wrapper calcite-button,:host([scale=l]) .action-wrapper calcite-button button{block-size:2.75rem}:host([scale=l]) input[type=file]{block-size:2.75rem}:host([scale=l]) .clear-button{min-block-size:2.75rem;min-inline-size:2.75rem}:host([scale=l]) textarea{block-size:auto;padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([disabled]) textarea{resize:none}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host textarea,:host input{transition:var(--calcite-animation-timing), block-size 0, outline-offset 0s;-webkit-appearance:none;position:relative;margin:0px;box-sizing:border-box;display:flex;max-block-size:100%;inline-size:100%;max-inline-size:100%;flex:1 1 0%;border-radius:0px;background-color:var(--calcite-ui-foreground-1);font-family:inherit;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-ui-text-1)}:host input[type=search]::-webkit-search-decoration{-webkit-appearance:none}:host input,:host textarea{border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-input);color:var(--calcite-ui-text-1)}:host input::placeholder,:host input:-ms-input-placeholder,:host input::-ms-input-placeholder,:host textarea::placeholder,:host textarea:-ms-input-placeholder,:host textarea::-ms-input-placeholder{font-weight:var(--calcite-font-weight-normal);color:var(--calcite-ui-text-3)}:host input:focus,:host textarea:focus{border-color:var(--calcite-ui-brand);color:var(--calcite-ui-text-1)}:host input[readonly],:host textarea[readonly]{background-color:var(--calcite-ui-background);font-weight:var(--calcite-font-weight-medium)}:host input[readonly]:focus,:host textarea[readonly]:focus{color:var(--calcite-ui-text-1)}:host calcite-icon{color:var(--calcite-ui-text-3)}:host textarea,:host input{outline-color:transparent}:host textarea:focus,:host input:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}:host([status=invalid]) input,:host([status=invalid]) textarea{border-color:var(--calcite-ui-danger)}:host([status=invalid]) input:focus,:host([status=invalid]) textarea:focus{outline:2px solid var(--calcite-ui-danger);outline-offset:-2px}:host([scale=s]) .icon{inset-inline-start:0.5rem}:host([scale=m]) .icon{inset-inline-start:0.75rem}:host([scale=l]) .icon{inset-inline-start:1rem}:host([icon][scale=s]) input{padding-inline-start:2rem}:host([icon][scale=m]) input{padding-inline-start:2.5rem}:host([icon][scale=l]) input{padding-inline-start:3.5rem}.element-wrapper{position:relative;order:3;display:inline-flex;flex:1 1 0%;align-items:center}.icon{pointer-events:none;position:absolute;display:block;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.icon,.resize-icon-wrapper{z-index:1}input[type=text]::-ms-clear,input[type=text]::-ms-reveal{display:none;block-size:0px;inline-size:0px}input[type=search]::-webkit-search-decoration,input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-results-button,input[type=search]::-webkit-search-results-decoration,input[type=date]::-webkit-clear-button,input[type=time]::-webkit-clear-button{display:none}.clear-button{pointer-events:initial;order:4;margin:0px;box-sizing:border-box;display:flex;min-block-size:100%;cursor:pointer;align-items:center;justify-content:center;align-self:stretch;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-input);background-color:var(--calcite-ui-foreground-1);outline-color:transparent;border-inline-start-width:0px}.clear-button:hover{background-color:var(--calcite-ui-foreground-2);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:hover calcite-icon{color:var(--calcite-ui-text-1);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.clear-button:active{background-color:var(--calcite-ui-foreground-3)}.clear-button:active calcite-icon{color:var(--calcite-ui-text-1)}.clear-button:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.clear-button:disabled{opacity:var(--calcite-ui-opacity-disabled)}.loader{inset-block-start:1px;inset-inline:1px;pointer-events:none;position:absolute;display:block}.action-wrapper{order:7;display:flex}.prefix,.suffix{box-sizing:border-box;display:flex;block-size:auto;min-block-size:100%;-webkit-user-select:none;user-select:none;align-content:center;align-items:center;overflow-wrap:break-word;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-input);background-color:var(--calcite-ui-background);font-weight:var(--calcite-font-weight-medium);line-height:1;color:var(--calcite-ui-text-2)}.prefix{order:2;border-inline-end-width:0px}.suffix{order:5;border-inline-start-width:0px}:host([alignment=start]) textarea,:host([alignment=start]) input{text-align:start}:host([alignment=end]) textarea,:host([alignment=end]) input{text-align:end}:host input[type=number]{-moz-appearance:textfield}:host input[type=number]::-webkit-inner-spin-button,:host input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:textfield;margin:0px}.number-button-wrapper{pointer-events:none;order:6;box-sizing:border-box;display:flex;flex-direction:column;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}:host([number-button-type=vertical]) .wrapper{flex-direction:row;display:flex}:host([number-button-type=vertical]) input,:host([number-button-type=vertical]) textarea{order:2}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=down] calcite-icon{transform:rotate(-90deg)}:host([number-button-type=horizontal]) .calcite--rtl .number-button-item[data-adjustment=up] calcite-icon{transform:rotate(-90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down],.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:1;max-block-size:100%;min-block-size:100%;align-self:stretch}.number-button-item.number-button-item--horizontal[data-adjustment=down] calcite-icon,.number-button-item.number-button-item--horizontal[data-adjustment=up] calcite-icon{transform:rotate(90deg)}.number-button-item.number-button-item--horizontal[data-adjustment=down]{border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-input);border-inline-end-width:0px}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover{background-color:var(--calcite-ui-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=down]:hover calcite-icon{color:var(--calcite-ui-text-1)}.number-button-item.number-button-item--horizontal[data-adjustment=up]{order:5}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover{background-color:var(--calcite-ui-foreground-2)}.number-button-item.number-button-item--horizontal[data-adjustment=up]:hover calcite-icon{color:var(--calcite-ui-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover{background-color:var(--calcite-ui-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]:hover calcite-icon{color:var(--calcite-ui-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover{background-color:var(--calcite-ui-foreground-2)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=up]:hover calcite-icon{color:var(--calcite-ui-text-1)}:host([number-button-type=vertical]) .number-button-item[data-adjustment=down]{border-block-start-width:0px}.number-button-item{max-block-size:50%;min-block-size:50%;pointer-events:initial;margin:0px;box-sizing:border-box;display:flex;cursor:pointer;align-items:center;align-self:center;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-input);background-color:var(--calcite-ui-foreground-1);padding-block:0px;padding-inline:0.5rem;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;border-inline-start-width:0px}.number-button-item calcite-icon{pointer-events:none;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}.number-button-item:focus{background-color:var(--calcite-ui-foreground-2)}.number-button-item:focus calcite-icon{color:var(--calcite-ui-text-1)}.number-button-item:active{background-color:var(--calcite-ui-foreground-3)}.number-button-item:disabled{pointer-events:none}.wrapper{position:relative;display:flex;flex-direction:row;align-items:center}:host input::-webkit-calendar-picker-indicator{display:none}:host input[type=date]::-webkit-input-placeholder{visibility:hidden !important}:host textarea::-webkit-resizer{position:absolute;inset-block-end:0px;box-sizing:border-box;padding-block:0px;padding-inline:0.25rem;inset-inline-end:0}.resize-icon-wrapper{inset-block-end:2px;inset-inline-end:2px;pointer-events:none;position:absolute;block-size:0.75rem;inline-size:0.75rem;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-3)}.resize-icon-wrapper calcite-icon{inset-block-end:0.25rem;inset-inline-end:0.25rem;transform:rotate(-45deg)}.calcite--rtl .resize-icon-wrapper calcite-icon{transform:rotate(45deg)}:host([type=color]) input{padding:0.25rem}:host([type=file]) input{cursor:pointer;border-width:1px;border-style:dashed;border-color:var(--calcite-ui-border-input);background-color:var(--calcite-ui-foreground-1);text-align:center}:host([type=file][scale=s]) input{padding-block:1px;padding-inline:0.5rem}:host([type=file][scale=m]) input{padding-block:0.25rem;padding-inline:0.75rem}:host([type=file][scale=l]) input{padding-block:0.5rem;padding-inline:1rem}:host(.no-bottom-border) input{border-block-end-width:0px}:host(.border-top-color-one) input{border-block-start-color:var(--calcite-ui-border-1)}:host .inline-child{background-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s}:host .inline-child .editing-enabled{background-color:inherit}:host .inline-child:not(.editing-enabled){display:flex;cursor:pointer;text-overflow:ellipsis;border-color:transparent;padding-inline-start:0}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}",jht=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalInputFocus=ue(this,"calciteInternalInputFocus",6),this.calciteInternalInputBlur=ue(this,"calciteInternalInputBlur",6),this.calciteInputInput=ue(this,"calciteInputInput",7),this.calciteInputChange=ue(this,"calciteInputChange",6),this.childElType="input",this.previousValueOrigin="initial",this.mutationObserver=Pi("mutation",()=>this.setDisabledAction()),this.userChangedValue=!1,this.keyDownHandler=t=>{this.readOnly||this.disabled||(this.isClearable&&t.key==="Escape"&&(this.clearInputValue(t),t.preventDefault()),t.key==="Enter"&&!t.defaultPrevented&&gL(this)&&t.preventDefault())},this.clearInputValue=t=>{this.setValue({committing:!0,nativeEvent:t,origin:"user",value:""})},this.emitChangeIfUserModified=()=>{this.previousValueOrigin==="user"&&this.value!==this.previousEmittedValue&&(this.calciteInputChange.emit(),this.setPreviousEmittedValue(this.value))},this.inputBlurHandler=()=>{this.calciteInternalInputBlur.emit(),this.emitChangeIfUserModified()},this.clickHandler=t=>{const e=Wr(this.el,"action");t.target!==e&&this.setFocus()},this.inputFocusHandler=()=>{this.calciteInternalInputFocus.emit()},this.inputInputHandler=t=>{this.disabled||this.readOnly||this.setValue({nativeEvent:t,origin:"user",value:t.target.value})},this.inputKeyDownHandler=t=>{this.disabled||this.readOnly||t.key==="Enter"&&this.emitChangeIfUserModified()},this.inputNumberInputHandler=t=>{if(this.disabled||this.readOnly)return;const e=t.target.value;Lt.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator};const i=Lt.delocalize(e);t.inputType==="insertFromPaste"?(Iu(i)||t.preventDefault(),this.setValue({nativeEvent:t,origin:"user",value:Rat(i)}),this.childNumberEl.value=this.localizedValue):this.setValue({nativeEvent:t,origin:"user",value:i})},this.inputNumberKeyDownHandler=t=>{if(this.type!=="number"||this.disabled||this.readOnly)return;if(t.key==="ArrowUp"){t.preventDefault(),this.nudgeNumberValue("up",t);return}if(t.key==="ArrowDown"){this.nudgeNumberValue("down",t);return}const e=[...Wy,"ArrowLeft","ArrowRight","Backspace","Delete","Enter","Escape","Tab"];if(t.altKey||t.ctrlKey||t.metaKey)return;const i=t.shiftKey&&t.key==="Tab";if(e.includes(t.key)&&(!t.shiftKey||i)){t.key==="Enter"&&this.emitChangeIfUserModified();return}Lt.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator},!(t.key===Lt.decimal&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.indexOf(Lt.decimal)===-1))&&(/[eE]/.test(t.key)&&(!this.value&&!this.childNumberEl.value||this.value&&!/[eE]/.test(this.childNumberEl.value))||t.key==="-"&&(!this.value&&!this.childNumberEl.value||this.value&&this.childNumberEl.value.split("-").length<=2)||t.preventDefault())},this.nudgeNumberValue=(t,e)=>{if(e instanceof KeyboardEvent&&e.repeat||this.type!=="number")return;const i=this.maxString?parseFloat(this.maxString):null,n=this.minString?parseFloat(this.minString):null,r=150;this.incrementOrDecrementNumberValue(t,i,n,e),this.nudgeNumberValueIntervalId&&window.clearInterval(this.nudgeNumberValueIntervalId);let s=!0;this.nudgeNumberValueIntervalId=window.setInterval(()=>{if(s){s=!1;return}this.incrementOrDecrementNumberValue(t,i,n,e)},r)},this.numberButtonPointerUpAndOutHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.numberButtonPointerDownHandler=t=>{if(!Lo(t))return;t.preventDefault();const e=t.target.dataset.adjustment;this.disabled||this.nudgeNumberValue(e,t)},this.hiddenInputChangeHandler=t=>{t.target.name===this.name&&this.setValue({value:t.target.value,origin:"direct"}),t.stopPropagation()},this.setChildElRef=t=>{this.childEl=t},this.setChildNumberElRef=t=>{this.childNumberEl=t},this.setInputValue=t=>{this.type==="text"&&!this.childEl||this.type==="number"&&!this.childNumberEl||(this[`child${this.type==="number"?"Number":""}El`].value=t)},this.setPreviousEmittedValue=t=>{this.previousEmittedValue=this.normalizeValue(t)},this.setPreviousValue=t=>{this.previousValue=this.normalizeValue(t)},this.setValue=({committing:t=!1,nativeEvent:e,origin:i,previousValue:n,value:r})=>{if(this.setPreviousValue(n??this.value),this.previousValueOrigin=i,this.type==="number"){Lt.numberFormatOptions={locale:this.effectiveLocale,numberingSystem:this.numberingSystem,useGrouping:this.groupSeparator,signDisplay:"never"};const s=zat(this.numberingSystem&&this.numberingSystem!=="latn"||IH!=="latn"?Lt.delocalize(r):r),o=r&&!s?Iu(this.previousValue)?this.previousValue:"":s,a=Lt.localize(o);this.localizedValue=a,this.userChangedValue=i==="user"&&this.value!==o,this.value=["-","."].includes(o)?"":o}else this.userChangedValue=i==="user"&&this.value!==r,this.value=r;i==="direct"&&(this.setInputValue(r),this.previousEmittedValue=r),e&&(this.calciteInputInput.emit().defaultPrevented?(this.value=this.previousValue,this.localizedValue=this.type==="number"?Lt.localize(this.previousValue):this.previousValue):t&&this.emitChangeIfUserModified())},this.inputKeyUpHandler=()=>{window.clearInterval(this.nudgeNumberValueIntervalId)},this.alignment="start",this.autofocus=!1,this.clearable=!1,this.disabled=!1,this.groupSeparator=!1,this.hidden=!1,this.icon=void 0,this.iconFlipRtl=!1,this.label=void 0,this.loading=!1,this.numberingSystem=void 0,this.localeFormat=!1,this.max=void 0,this.min=void 0,this.maxLength=void 0,this.minLength=void 0,this.name=void 0,this.numberButtonType="vertical",this.placeholder=void 0,this.prefixText=void 0,this.readOnly=!1,this.required=!1,this.scale="m",this.status="idle",this.step=void 0,this.autocomplete=void 0,this.pattern=void 0,this.accept=void 0,this.multiple=!1,this.inputMode="text",this.enterKeyHint=void 0,this.suffixText=void 0,this.editingEnabled=!1,this.type="text",this.value="",this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale="",this.defaultMessages=void 0,this.localizedValue=void 0,this.slottedActionElDisabledInternally=!1}disabledWatcher(){this.setDisabledAction()}maxWatcher(){var t;this.maxString=((t=this.max)==null?void 0:t.toString())||null}minWatcher(){var t;this.minString=((t=this.min)==null?void 0:t.toString())||null}onMessagesChange(){}valueWatcher(t,e){this.userChangedValue||(this.setValue({origin:"direct",previousValue:e,value:t==null||t==""?"":this.type==="number"?Iu(t)?t:this.previousValue||"":t}),this.warnAboutInvalidNumberValue(t)),this.userChangedValue=!1}updateRequestedIcon(){this.requestedIcon=fw(Die,this.icon,this.type)}get isClearable(){return!this.isTextarea&&(this.clearable||this.type==="search")&&this.value.length>0}get isTextarea(){return this.childElType==="textarea"}effectiveLocaleChange(){ur(this,this.effectiveLocale)}connectedCallback(){var t;hn(this),dr(this),this.scale=Hr(this.el,"scale",this.scale),this.status=Hr(this.el,"status",this.status),this.inlineEditableEl=this.el.closest("calcite-inline-editable"),this.inlineEditableEl&&(this.editingEnabled=this.inlineEditableEl.editingEnabled||!1),id(this),Rm(this),this.setPreviousEmittedValue(this.value),this.setPreviousValue(this.value),this.type==="number"&&(this.warnAboutInvalidNumberValue(this.value),this.setValue({origin:"connected",value:Iu(this.value)?this.value:""})),(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0}),this.setDisabledAction(),this.el.addEventListener("calciteInternalHiddenInputChange",this.hiddenInputChangeHandler)}disconnectedCallback(){var t;qh(this),Lm(this),pn(this),hr(this),(t=this.mutationObserver)==null||t.disconnect(),this.el.removeEventListener("calciteInternalHiddenInputChange",this.hiddenInputChangeHandler)}async componentWillLoad(){var t,e;Ui(this),this.childElType=this.type==="textarea"?"textarea":"input",this.maxString=(t=this.max)==null?void 0:t.toString(),this.minString=(e=this.min)==null?void 0:e.toString(),this.requestedIcon=fw(Die,this.icon,this.type),await cr(this)}componentDidLoad(){Bi(this)}componentShouldUpdate(t,e,i){return this.type==="number"&&i==="value"&&t&&!Iu(t)?(this.setValue({origin:"reset",value:e}),!1):!0}componentDidRender(){lr(this)}async setFocus(){var t,e;await Hi(this),this.type==="number"?(t=this.childNumberEl)==null||t.focus():(e=this.childEl)==null||e.focus()}async selectText(){var t,e;this.type==="number"?(t=this.childNumberEl)==null||t.select():(e=this.childEl)==null||e.select()}async internalSyncChildElValue(){this.type==="number"?this.childNumberEl.value=this.value:this.childEl.value=this.value}onLabelClick(){this.setFocus()}incrementOrDecrementNumberValue(t,e,i,n){const{value:r}=this,s=this.step==="any"?1:Math.abs(this.step||1),o=r&&r!==""?parseFloat(r):0,l=o+s*(t==="up"?1:-1),u=typeof i=="number"&&!isNaN(i)&&l<i?i:typeof e=="number"&&!isNaN(e)&&l>e?e:l,h=g_(o),p=g_(s);this.setValue({committing:!0,nativeEvent:n,origin:"user",value:u.toFixed(Math.max(h,p))})}onFormReset(){this.setValue({origin:"reset",value:this.defaultValue})}syncHiddenFormInput(t){var i,n;const{type:e}=this;t.type=e,e==="number"?(t.min=((i=this.min)==null?void 0:i.toString(10))??"",t.max=((n=this.max)==null?void 0:n.toString(10))??""):e==="text"&&(this.minLength!=null&&(t.minLength=this.minLength),this.maxLength!=null&&(t.maxLength=this.maxLength))}setDisabledAction(){const t=Wr(this.el,"action");t&&(this.disabled?(t.getAttribute("disabled")==null&&(this.slottedActionElDisabledInternally=!0),t.setAttribute("disabled","")):this.slottedActionElDisabledInternally&&(t.removeAttribute("disabled"),this.slottedActionElDisabledInternally=!1))}normalizeValue(t){return this.type==="number"?Iu(t)?t:"":t}warnAboutInvalidNumberValue(t){this.type==="number"&&t&&!Iu(t)&&console.warn(`The specified value "${t}" cannot be parsed, or is out of range.`)}render(){const t=Kr(this.el),e=I("div",{class:ls.loader},I("calcite-progress",{label:this.messages.loading,type:"indeterminate"})),i=I("button",{"aria-label":this.messages.clear,class:ls.clearButton,disabled:this.disabled||this.readOnly,onClick:this.clearInputValue,tabIndex:-1,type:"button"},I("calcite-icon",{icon:"x",scale:this.scale==="l"?"m":"s"})),n=I("calcite-icon",{class:ls.inputIcon,flipRtl:this.iconFlipRtl,icon:this.requestedIcon,scale:this.scale==="l"?"m":"s"}),r=this.numberButtonType==="horizontal",s=I("button",{"aria-hidden":"true",class:{[ls.numberButtonItem]:!0,[ls.buttonItemHorizontal]:r},"data-adjustment":"up",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},I("calcite-icon",{icon:"chevron-up",scale:this.scale==="l"?"m":"s"})),o=I("button",{"aria-hidden":"true",class:{[ls.numberButtonItem]:!0,[ls.buttonItemHorizontal]:r},"data-adjustment":"down",disabled:this.disabled||this.readOnly,onPointerDown:this.numberButtonPointerDownHandler,onPointerOut:this.numberButtonPointerUpAndOutHandler,onPointerUp:this.numberButtonPointerUpAndOutHandler,tabIndex:-1,type:"button"},I("calcite-icon",{icon:"chevron-down",scale:this.scale==="l"?"m":"s"})),a=I("div",{class:ls.numberButtonWrapper},s,o),l=I("div",{class:ls.prefix},this.prefixText),u=I("div",{class:ls.suffix},this.suffixText),h=this.type==="number"?I("input",{accept:this.accept,"aria-label":Vc(this),autocomplete:this.autocomplete,autofocus:this.autofocus?!0:null,defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:this.enterKeyHint,inputMode:this.inputMode,key:"localized-input",maxLength:this.maxLength,minLength:this.minLength,multiple:this.multiple,name:void 0,onBlur:this.inputBlurHandler,onFocus:this.inputFocusHandler,onInput:this.inputNumberInputHandler,onKeyDown:this.inputNumberKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,ref:this.setChildNumberElRef,type:"text",value:this.localizedValue}):null,p=this.type!=="number"?[I(this.childElType,{accept:this.accept,"aria-label":Vc(this),autocomplete:this.autocomplete,autofocus:this.autofocus?!0:null,class:{[ls.editingEnabled]:this.editingEnabled,[ls.inlineChild]:!!this.inlineEditableEl},defaultValue:this.defaultValue,disabled:this.disabled?!0:null,enterKeyHint:this.enterKeyHint,inputMode:this.inputMode,max:this.maxString,maxLength:this.maxLength,min:this.minString,minLength:this.minLength,multiple:this.multiple,name:this.name,onBlur:this.inputBlurHandler,onFocus:this.inputFocusHandler,onInput:this.inputInputHandler,onKeyDown:this.inputKeyDownHandler,onKeyUp:this.inputKeyUpHandler,pattern:this.pattern,placeholder:this.placeholder||"",readOnly:this.readOnly,ref:this.setChildElRef,required:this.required?!0:null,step:this.step,tabIndex:this.disabled||this.inlineEditableEl&&!this.editingEnabled?-1:null,type:this.type,value:this.value}),this.isTextarea?I("div",{class:ls.resizeIconWrapper},I("calcite-icon",{icon:"chevron-down",scale:this.scale==="l"?"m":"s"})):null]:null;return I(Ft,{onClick:this.clickHandler,onKeyDown:this.keyDownHandler},I("div",{class:{[ls.inputWrapper]:!0,[pw.rtl]:t==="rtl"}},this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?o:null,this.prefixText?l:null,I("div",{class:ls.wrapper},h,p,this.isClearable?i:null,this.requestedIcon?n:null,this.loading?e:null),I("div",{class:ls.actionWrapper},I("slot",{name:Nht.action})),this.type==="number"&&this.numberButtonType==="vertical"&&!this.readOnly?a:null,this.suffixText?u:null,this.type==="number"&&this.numberButtonType==="horizontal"&&!this.readOnly?s:null,I(Dm,{component:this})))}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{disabled:["disabledWatcher"],max:["maxWatcher"],min:["minWatcher"],messageOverrides:["onMessagesChange"],value:["valueWatcher"],icon:["updateRequestedIcon"],type:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return zht}},[1,"calcite-input",{alignment:[513],autofocus:[516],clearable:[516],disabled:[516],groupSeparator:[516,"group-separator"],hidden:[516],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],label:[1],loading:[516],numberingSystem:[513,"numbering-system"],localeFormat:[4,"locale-format"],max:[514],min:[514],maxLength:[514,"max-length"],minLength:[514,"min-length"],name:[513],numberButtonType:[513,"number-button-type"],placeholder:[1],prefixText:[1,"prefix-text"],readOnly:[516,"read-only"],required:[516],scale:[1537],status:[1537],step:[520],autocomplete:[1],pattern:[1],accept:[1],multiple:[4],inputMode:[1,"input-mode"],enterKeyHint:[1,"enter-key-hint"],suffixText:[1,"suffix-text"],editingEnabled:[1540,"editing-enabled"],type:[513],value:[1025],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],localizedValue:[32],slottedActionElDisabledInternally:[32],setFocus:[64],selectText:[64],internalSyncChildElValue:[64]}]);function yL(){if(typeof customElements>"u")return;["calcite-input","calcite-icon","calcite-progress"].forEach(e=>{switch(e){case"calcite-input":customElements.get(e)||customElements.define(e,jht);break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-progress":customElements.get(e)||y2();break}})}yL();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Vht="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([scale=s]){--calcite-accordion-item-spacing-unit:0.25rem;--calcite-accordion-icon-margin:0.5rem;--calcite-accordion-item-padding:var(--calcite-accordion-item-spacing-unit) 0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){--calcite-accordion-item-spacing-unit:0.5rem;--calcite-accordion-icon-margin:0.75rem;--calcite-accordion-item-padding:var(--calcite-accordion-item-spacing-unit) 0.75rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){--calcite-accordion-item-spacing-unit:0.75rem;--calcite-accordion-icon-margin:1rem;--calcite-accordion-item-padding:var(--calcite-accordion-item-spacing-unit) 1rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host{position:relative;display:block;max-inline-size:100%;line-height:1.5rem;--calcite-accordion-item-border:var(--calcite-ui-border-2);--calcite-accordion-item-background:var(--calcite-ui-foreground-1)}.accordion--transparent{--calcite-accordion-item-border:transparent;--calcite-accordion-item-background:transparent}.accordion{border-width:1px;border-block-end-width:0px;border-style:solid;border-color:var(--calcite-ui-border-2)}",Uht=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalAccordionChange=ue(this,"calciteInternalAccordionChange",6),this.items=[],this.sorted=!1,this.sortItems=t=>t.sort((e,i)=>e.position-i.position).map(e=>e.item),this.appearance="solid",this.iconPosition="end",this.iconType="chevron",this.scale="m",this.selectionMode="multiple"}componentDidLoad(){this.sorted||(this.items=this.sortItems(this.items),this.sorted=!0)}render(){const t=this.appearance==="transparent";return I("div",{class:{"accordion--transparent":t,accordion:!t}},I("slot",null))}registerCalciteAccordionItem(t){const e={item:t.target,parent:t.detail.parent,position:t.detail.position};this.el===e.parent&&this.items.push(e),t.stopPropagation()}updateActiveItemOnChange(t){this.requestedAccordionItem=t.detail.requestedAccordionItem,this.calciteInternalAccordionChange.emit({requestedAccordionItem:this.requestedAccordionItem}),t.stopPropagation()}get el(){return this}static get style(){return Vht}},[1,"calcite-accordion",{appearance:[513],iconPosition:[513,"icon-position"],iconType:[513,"icon-type"],scale:[513],selectionMode:[513,"selection-mode"]},[[0,"calciteInternalAccordionItemRegister","registerCalciteAccordionItem"],[0,"calciteInternalAccordionItemSelect","updateActiveItemOnChange"]]]);function Bht(){if(typeof customElements>"u")return;["calcite-accordion"].forEach(e=>{switch(e){case"calcite-accordion":customElements.get(e)||customElements.define(e,Uht);break}})}Bht();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Fk={actionsStart:"actions-start",actionsEnd:"actions-end"},Ua={icon:"icon",header:"header",headerContent:"header-content",actionsStart:"actions-start",actionsEnd:"actions-end",headerText:"header-text",heading:"heading",description:"description",expandIcon:"expand-icon",content:"content",iconStart:"icon--start",iconEnd:"icon--end",headerContainer:"header-container"},Hht="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}.icon-position--end,.icon-position--start{--calcite-accordion-item-icon-rotation:calc(90deg * -1);--calcite-accordion-item-active-icon-rotation:0deg;--calcite-accordion-item-icon-rotation-rtl:90deg;--calcite-accordion-item-active-icon-rotation-rtl:0deg}.icon-position--start{--calcite-accordion-item-flex-direction:row-reverse;--calcite-accordion-item-icon-spacing-start:0;--calcite-accordion-item-icon-spacing-end:var(--calcite-accordion-icon-margin)}.icon-position--end{--calcite-accordion-item-flex-direction:row;--calcite-accordion-item-icon-spacing-start:var(--calcite-accordion-icon-margin);--calcite-accordion-item-icon-spacing-end:0}.icon-position--end:not(.icon-type--plus-minus){--calcite-accordion-item-icon-rotation:0deg;--calcite-accordion-item-active-icon-rotation:180deg;--calcite-accordion-item-icon-rotation-rtl:0deg;--calcite-accordion-item-active-icon-rotation-rtl:calc(180deg * -1)}:host{position:relative;display:flex;flex-direction:column;color:var(--calcite-ui-text-3);text-decoration-line:none;background-color:var(--calcite-accordion-item-background, var(--calcite-ui-foreground-1))}:host .header-content{outline-color:transparent}:host(:focus) .header-content{outline:2px solid transparent;outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}:host([expanded]){color:var(--calcite-ui-text-1)}:host([expanded]) .content{display:block;color:var(--calcite-ui-text-1)}:host([expanded]) .header{border-block-end-color:transparent}:host .header{display:flex;align-items:stretch}:host .icon{position:relative;margin:0px;display:inline-flex;color:var(--calcite-ui-text-3);transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);margin-inline-end:var(--calcite-accordion-item-icon-spacing-start);margin-inline-start:var(--calcite-accordion-item-icon-spacing-end)}.icon--start{display:flex;align-items:center;margin-inline-end:var(--calcite-accordion-icon-margin)}.icon--end{display:flex;align-items:center;margin-inline-end:var(--calcite-accordion-icon-margin);margin-inline-start:var(--calcite-accordion-icon-margin)}.header-container{inline-size:100%}.content{padding:var(--calcite-accordion-item-padding)}:host .content,:host .header{border-block-end:1px solid var(--calcite-accordion-item-border, var(--calcite-ui-border-2))}:host .header *{display:inline-flex;align-items:center;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host .content{display:none;padding-block-start:0px;color:var(--calcite-ui-text-3);text-align:initial}:host .expand-icon{color:var(--calcite-ui-text-3);margin-inline-start:var(--calcite-accordion-item-icon-spacing-start);margin-inline-end:var(--calcite-accordion-item-icon-spacing-end);transform:rotate(var(--calcite-accordion-item-icon-rotation))}.calcite--rtl .expand-icon{transform:rotate(var(--calcite-accordion-item-icon-rotation-rtl))}:host([expanded]) .expand-icon{color:var(--calcite-ui-text-1);transform:rotate(var(--calcite-accordion-item-active-icon-rotation))}:host([expanded]) .calcite--rtl .expand-icon{transform:rotate(var(--calcite-accordion-item-active-icon-rotation-rtl))}:host .header-text{margin-block:0px;flex-grow:1;flex-direction:column;padding-block:0px;text-align:initial;margin-inline-end:auto}:host .heading,:host .description{display:flex;inline-size:100%}:host .heading{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-2)}:host .description{margin-block-start:0.25rem;color:var(--calcite-ui-text-3)}:host(:focus) .heading,:host(:hover) .heading{color:var(--calcite-ui-text-1)}:host(:focus) .icon,:host(:hover) .icon{color:var(--calcite-ui-text-1)}:host(:focus) .expand-icon,:host(:hover) .expand-icon{color:var(--calcite-ui-text-1)}:host(:focus) .description,:host(:hover) .description{color:var(--calcite-ui-text-2)}:host(:focus) .heading,:host(:active) .heading,:host([expanded]) .heading{color:var(--calcite-ui-text-1)}:host(:focus) .icon,:host(:active) .icon,:host([expanded]) .icon{color:var(--calcite-ui-text-1)}:host(:focus) .expand-icon,:host(:active) .expand-icon,:host([expanded]) .expand-icon{color:var(--calcite-ui-text-1)}:host(:focus) .description,:host(:active) .description,:host([expanded]) .description{color:var(--calcite-ui-text-2)}.header-content{flex-grow:1;cursor:pointer;padding:var(--calcite-accordion-item-padding);flex-direction:var(--calcite-accordion-item-flex-direction)}.actions-start,.actions-end{display:flex;align-items:center}@media (forced-colors: active){:host([expanded]) .header{border-block-end:none}:host([expanded]) .heading{font-weight:bolder}:host(:hover) .heading,:host(:focus) .heading{text-decoration:underline}}",Ght=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalAccordionItemSelect=ue(this,"calciteInternalAccordionItemSelect",6),this.calciteInternalAccordionItemClose=ue(this,"calciteInternalAccordionItemClose",6),this.calciteInternalAccordionItemRegister=ue(this,"calciteInternalAccordionItemRegister",6),this.iconPosition="end",this.itemHeaderClickHandler=()=>this.emitRequestedItem(),this.scale="m",this.expanded=!1,this.heading=void 0,this.description=void 0,this.iconStart=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0}connectedCallback(){this.parent=this.el.parentElement,this.iconType=Hr(this.el,"icon-type","chevron"),this.iconPosition=Hr(this.el,"icon-position",this.iconPosition),this.scale=Hr(this.el,"scale",this.scale),ed(this)}componentDidLoad(){this.itemPosition=this.getItemPosition(),this.calciteInternalAccordionItemRegister.emit({parent:this.parent,position:this.itemPosition})}disconnectedCallback(){td(this)}renderActionsStart(){const{el:t}=this;return Wr(t,Fk.actionsStart)?I("div",{class:Ua.actionsStart},I("slot",{name:Fk.actionsStart})):null}renderActionsEnd(){const{el:t}=this;return Wr(t,Fk.actionsEnd)?I("div",{class:Ua.actionsEnd},I("slot",{name:Fk.actionsEnd})):null}render(){const{iconFlipRtl:t}=this,e=Kr(this.el),i=this.iconStart?I("calcite-icon",{class:Ua.iconStart,flipRtl:t==="both"||t==="start",icon:this.iconStart,key:"icon-start",scale:this.scale==="l"?"m":"s"}):null,n=this.iconEnd?I("calcite-icon",{class:Ua.iconEnd,flipRtl:t==="both"||t==="end",icon:this.iconEnd,key:"icon-end",scale:this.scale==="l"?"m":"s"}):null,{description:r}=this;return I(Ft,null,I("div",{class:{[`icon-position--${this.iconPosition}`]:!0,[`icon-type--${this.iconType}`]:!0}},I("div",{class:{[Ua.header]:!0,[pw.rtl]:e==="rtl"}},this.renderActionsStart(),I("div",{"aria-expanded":Vi(this.expanded),class:Ua.headerContent,onClick:this.itemHeaderClickHandler,role:"button",tabindex:"0"},I("div",{class:Ua.headerContainer},i,I("div",{class:Ua.headerText},I("span",{class:Ua.heading},this.heading),r?I("span",{class:Ua.description},r):null),n),I("calcite-icon",{class:Ua.expandIcon,icon:this.iconType==="chevron"?"chevronDown":this.iconType==="caret"?"caretDown":this.expanded?"minus":"plus",scale:this.scale==="l"?"m":"s"})),this.renderActionsEnd()),I("div",{class:Ua.content},I("slot",null))))}keyDownHandler(t){if(t.target===this.el)switch(t.key){case" ":case"Enter":this.emitRequestedItem(),t.preventDefault();break}}updateActiveItemOnChange(t){this.requestedAccordionItem=t.detail.requestedAccordionItem,this.el.parentNode===this.requestedAccordionItem.parentNode&&(this.determineActiveItem(),t.stopPropagation())}determineActiveItem(){switch(this.selectionMode=Hr(this.el,"selection-mode","multiple"),this.selectionMode){case"multiple":this.el===this.requestedAccordionItem&&(this.expanded=!this.expanded);break;case"single":this.expanded=this.el===this.requestedAccordionItem?!this.expanded:!1;break;case"single-persist":this.expanded=this.el===this.requestedAccordionItem;break}}emitRequestedItem(){this.calciteInternalAccordionItemSelect.emit({requestedAccordionItem:this.el})}getItemPosition(){return Array.prototype.indexOf.call(this.parent.querySelectorAll("calcite-accordion-item"),this.el)}get el(){return this}static get style(){return Hht}},[1,"calcite-accordion-item",{expanded:[1540],heading:[1],description:[1],iconStart:[513,"icon-start"],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"]},[[0,"keydown","keyDownHandler"],[16,"calciteInternalAccordionChange","updateActiveItemOnChange"]]]);function qht(){if(typeof customElements>"u")return;["calcite-accordion-item","calcite-icon"].forEach(e=>{switch(e){case"calcite-accordion-item":customElements.get(e)||customElements.define(e,Ght);break;case"calcite-icon":customElements.get(e)||ni();break}})}qht();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const C5={icon:"icon",iconContainer:"icon-container",select:"select"},Wht="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{--calcite-icon-size:1rem;--calcite-spacing-eighth:0.125rem;--calcite-spacing-quarter:0.25rem;--calcite-spacing-half:0.5rem;--calcite-spacing-three-quarters:0.75rem;--calcite-spacing:1rem;--calcite-spacing-plus-quarter:1.25rem;--calcite-spacing-plus-half:1.5rem;--calcite-spacing-double:2rem;--calcite-menu-min-width:10rem;--calcite-header-min-height:3rem;--calcite-footer-min-height:3rem}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{position:relative;display:flex;align-items:stretch;inline-size:var(--select-width)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]){block-size:1.5rem;--calcite-select-font-size:var(--calcite-font-size--2);--calcite-select-spacing-inline:0.5rem 2rem}:host([scale=s]) .icon-container{padding-inline:0.5rem}:host([scale=m]){block-size:2rem;--calcite-select-font-size:var(--calcite-font-size--1);--calcite-select-spacing-inline:0.75rem 2.5rem}:host([scale=m]) .icon-container{padding-inline:0.75rem}:host([scale=l]){block-size:44px;--calcite-select-font-size:var(--calcite-font-size-0);--calcite-select-spacing-inline:1rem 3rem}:host([scale=l]) .icon-container{padding-inline:1rem}:host([width=auto]){inline-size:auto}:host([width=half]){inline-size:50%}:host([width=full]){inline-size:100%}.select{margin:0px;box-sizing:border-box;inline-size:100%;cursor:pointer;-webkit-appearance:none;appearance:none;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:0px;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-input);background-color:var(--calcite-ui-foreground-1);font-family:inherit;color:var(--calcite-ui-text-2);outline-color:transparent;font-size:var(--calcite-select-font-size);padding-inline:var(--calcite-select-spacing-inline);border-inline-end-width:0px}.select:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.select:hover{background-color:var(--calcite-ui-foreground-2)}select:disabled{border-color:var(--calcite-ui-border-input);--tw-bg-opacity:1}.icon-container{pointer-events:none;position:absolute;inset-block:0px;display:flex;align-items:center;border-width:0px;border-style:solid;border-color:var(--calcite-ui-border-input);background-color:transparent;color:var(--calcite-ui-text-2);inset-inline-end:0px;border-inline-width:0px 1px}.select:focus~.icon-container{border-color:transparent}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}";function Nk(t){return t.tagName==="CALCITE-OPTION"}function Jht(t){return t.tagName==="CALCITE-OPTION-GROUP"}const Yht=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteSelectChange=ue(this,"calciteSelectChange",6),this.componentToNativeEl=new Map,this.mutationObserver=Pi("mutation",()=>this.populateInternalSelect()),this.handleInternalSelectChange=()=>{const t=this.selectEl.selectedOptions[0];this.selectFromNativeOption(t),requestAnimationFrame(()=>this.emitChangeEvent())},this.populateInternalSelect=()=>{const t=Array.from(this.el.children).filter(e=>e.tagName==="CALCITE-OPTION"||e.tagName==="CALCITE-OPTION-GROUP");this.clearInternalSelect(),t.forEach(e=>{var i;return(i=this.selectEl)==null?void 0:i.append(this.toNativeElement(e))})},this.storeSelectRef=t=>{this.selectEl=t,this.populateInternalSelect();const e=this.selectEl.selectedOptions[0];this.selectFromNativeOption(e)},this.emitChangeEvent=()=>{this.calciteSelectChange.emit()},this.disabled=!1,this.label=void 0,this.name=void 0,this.required=!1,this.scale="m",this.value=null,this.selectedOption=void 0,this.width="auto"}valueHandler(t){this.el.querySelectorAll("calcite-option").forEach(i=>i.selected=i.value===t)}selectedOptionHandler(t){this.value=t==null?void 0:t.value}connectedCallback(){var e;const{el:t}=this;(e=this.mutationObserver)==null||e.observe(t,{subtree:!0,childList:!0}),id(this),Rm(this)}disconnectedCallback(){var t;(t=this.mutationObserver)==null||t.disconnect(),qh(this),Lm(this)}componentWillLoad(){Ui(this)}componentDidLoad(){var t;Bi(this),UH(this,((t=this.selectedOption)==null?void 0:t.value)??"")}componentDidRender(){lr(this)}async setFocus(){await Hi(this),qu(this.selectEl)}handleOptionOrGroupChange(t){t.stopPropagation();const e=t.target,i=this.componentToNativeEl.get(e);i&&(this.updateNativeElement(e,i),Nk(e)&&e.selected&&(this.deselectAllExcept(e),this.selectedOption=e))}onLabelClick(){this.setFocus()}updateNativeElement(t,e){if(e.disabled=t.disabled,e.label=t.label,Nk(t)){const i=e;i.selected=t.selected,i.value=t.value,i.innerText=t.label}}clearInternalSelect(){this.componentToNativeEl.forEach(t=>t.remove()),this.componentToNativeEl.clear()}selectFromNativeOption(t){if(!t)return;let e;this.componentToNativeEl.forEach((i,n)=>{Nk(n)&&i===t&&(n.selected=!0,e=n,this.deselectAllExcept(n))}),e&&(this.selectedOption=e)}toNativeElement(t){if(Nk(t)){const e=document.createElement("option");return this.updateNativeElement(t,e),this.componentToNativeEl.set(t,e),e}if(Jht(t)){const e=document.createElement("optgroup");return this.updateNativeElement(t,e),Array.from(t.children).forEach(i=>{const n=this.toNativeElement(i);e.append(n),this.componentToNativeEl.set(t,n)}),this.componentToNativeEl.set(t,e),e}throw new Error("unsupported element child provided")}deselectAllExcept(t){this.el.querySelectorAll("calcite-option").forEach(e=>{e!==t&&(e.selected=!1)})}renderChevron(){return I("div",{class:C5.iconContainer},I("calcite-icon",{class:C5.icon,icon:"chevron-down",scale:this.scale==="l"?"m":"s"}))}render(){return I($m,null,I("select",{"aria-label":Vc(this),class:C5.select,disabled:this.disabled,onChange:this.handleInternalSelectChange,ref:this.storeSelectRef},I("slot",null)),this.renderChevron(),I(Dm,{component:this}))}get el(){return this}static get watchers(){return{value:["valueHandler"],selectedOption:["selectedOptionHandler"]}}static get style(){return Wht}},[1,"calcite-select",{disabled:[516],label:[1],name:[513],required:[516],scale:[513],value:[1025],selectedOption:[1040],width:[513],setFocus:[64]},[[0,"calciteInternalOptionChange","handleOptionOrGroupChange"],[0,"calciteInternalOptionGroupChange","handleOptionOrGroupChange"]]]);function Zht(){if(typeof customElements>"u")return;["calcite-select","calcite-icon"].forEach(e=>{switch(e){case"calcite-select":customElements.get(e)||customElements.define(e,Yht);break;case"calcite-icon":customElements.get(e)||ni();break}})}Zht();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Kht="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:block}",Xht=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalOptionChange=ue(this,"calciteInternalOptionChange",6),this.mutationObserver=Pi("mutation",()=>{this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}),this.disabled=!1,this.label=void 0,this.selected=void 0,this.value=void 0}handlePropChange(t,e,i){(i==="label"||i==="value")&&this.ensureTextContentDependentProps(),this.calciteInternalOptionChange.emit()}ensureTextContentDependentProps(){const{el:{textContent:t}}=this;(!this.label||this.label===this.internallySetLabel)&&(this.label=t,this.internallySetLabel=t),(!this.value||this.value===this.internallySetValue)&&(this.value=t,this.internallySetValue=t)}connectedCallback(){var t;this.ensureTextContentDependentProps(),(t=this.mutationObserver)==null||t.observe(this.el,{attributeFilter:["label","value"],characterData:!0,childList:!0,subtree:!0})}disconnectedCallback(){var t;(t=this.mutationObserver)==null||t.disconnect()}render(){return I("slot",null,this.label)}get el(){return this}static get watchers(){return{disabled:["handlePropChange"],label:["handlePropChange"],selected:["handlePropChange"],value:["handlePropChange"]}}static get style(){return Kht}},[1,"calcite-option",{disabled:[516],label:[1025],selected:[516],value:[1032]}]);function Qht(){if(typeof customElements>"u")return;["calcite-option"].forEach(e=>{switch(e){case"calcite-option":customElements.get(e)||customElements.define(e,Xht);break}})}Qht();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const ept={container:"container"},tpt='@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:block;cursor:pointer}:host .container{position:relative;outline:2px solid transparent;outline-offset:2px}:host .radio{cursor:pointer;border-radius:9999px;background-color:var(--calcite-ui-foreground-1);outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;box-shadow:inset 0 0 0 1px var(--calcite-ui-border-input)}:host([hovered]) .radio,:host(:not([checked])[focused]:not([disabled])) .radio{box-shadow:inset 0 0 0 2px var(--calcite-ui-brand)}:host([focused]) .radio{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}:host([disabled]) .radio{cursor:default;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([hovered][disabled]) .radio{box-shadow:inset 0 0 0 1px var(--calcite-ui-border-input)}:host([scale=s]){--calcite-radio-size:var(--calcite-font-size--2)}:host([scale=m]){--calcite-radio-size:var(--calcite-font-size--1)}:host([scale=l]){--calcite-radio-size:var(--calcite-font-size-0)}.radio{block-size:var(--calcite-radio-size);max-inline-size:var(--calcite-radio-size);min-inline-size:var(--calcite-radio-size)}:host([scale=s][checked]) .radio,:host([hovered][scale=s][checked][disabled]) .radio{box-shadow:inset 0 0 0 4px var(--calcite-ui-brand)}:host([scale=s][focused][checked]:not([disabled])) .radio{box-shadow:inset 0 0 0 4px var(--calcite-ui-brand), 0 0 0 2px var(--calcite-ui-foreground-1)}:host([scale=m][checked]) .radio,:host([hovered][scale=m][checked][disabled]) .radio{box-shadow:inset 0 0 0 5px var(--calcite-ui-brand)}:host([scale=m][focused][checked]:not([disabled])) .radio{box-shadow:inset 0 0 0 5px var(--calcite-ui-brand), 0 0 0 2px var(--calcite-ui-foreground-1)}:host([scale=l][checked]) .radio,:host([hovered][scale=l][checked][disabled]) .radio{box-shadow:inset 0 0 0 6px var(--calcite-ui-brand)}:host([scale=l][focused][checked]:not([disabled])) .radio{box-shadow:inset 0 0 0 6px var(--calcite-ui-brand), 0 0 0 2px var(--calcite-ui-foreground-1)}@media (forced-colors: active){:host([checked]) .radio::after,:host([checked][disabled]) .radio::after{content:"";inline-size:var(--calcite-radio-size);block-size:var(--calcite-radio-size);background-color:windowText;display:block}}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}',ipt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalRadioButtonBlur=ue(this,"calciteInternalRadioButtonBlur",6),this.calciteRadioButtonChange=ue(this,"calciteRadioButtonChange",6),this.calciteInternalRadioButtonCheckedChange=ue(this,"calciteInternalRadioButtonCheckedChange",6),this.calciteInternalRadioButtonFocus=ue(this,"calciteInternalRadioButtonFocus",6),this.selectItem=(t,e)=>{t[e].click()},this.queryButtons=()=>Array.from(this.rootNode.querySelectorAll("calcite-radio-button:not([hidden])")).filter(t=>t.name===this.name),this.isDefaultSelectable=()=>{const t=this.queryButtons();return!t.some(e=>e.checked)&&t[0]===this.el},this.check=()=>{this.disabled||(this.uncheckAllRadioButtonsInGroup(),this.checked=!0,this.focused=!0,this.calciteRadioButtonChange.emit(),this.setFocus())},this.clickHandler=()=>{this.check()},this.setContainerEl=t=>{this.containerEl=t},this.handleKeyDown=t=>{const e=["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"," "],{key:i}=t,{el:n}=this;if(e.indexOf(i)===-1)return;if(i===" "){this.check(),t.preventDefault();return}let r=i;Kr(n)==="rtl"&&(i==="ArrowRight"&&(r="ArrowLeft"),i==="ArrowLeft"&&(r="ArrowRight"));const s=Array.from(this.rootNode.querySelectorAll("calcite-radio-button:not([hidden]")).filter(l=>l.name===this.name);let o=0;const a=s.length;switch(s.some((l,u)=>{if(l.checked)return o=u,!0}),r){case"ArrowLeft":case"ArrowUp":t.preventDefault(),this.selectItem(s,tP(Math.max(o-1,-1),a));return;case"ArrowRight":case"ArrowDown":t.preventDefault(),this.selectItem(s,tP(o+1,a));return;default:return}},this.onContainerBlur=()=>{this.focused=!1,this.calciteInternalRadioButtonBlur.emit()},this.onContainerFocus=()=>{this.disabled||(this.focused=!0,this.calciteInternalRadioButtonFocus.emit())},this.checked=!1,this.disabled=!1,this.focused=!1,this.guid=void 0,this.hidden=!1,this.hovered=!1,this.label=void 0,this.name=void 0,this.required=!1,this.scale="m",this.value=void 0}checkedChanged(t){t&&this.uncheckOtherRadioButtonsInGroup(),this.calciteInternalRadioButtonCheckedChange.emit()}nameChanged(){this.checkLastRadioButton()}async setFocus(){await Hi(this),this.disabled||qu(this.containerEl)}syncHiddenFormInput(t){t.type="radio"}onLabelClick(t){if(!this.disabled&&!this.hidden){this.uncheckOtherRadioButtonsInGroup();const e=t.currentTarget,i=e.for?this.rootNode.querySelector(`calcite-radio-button[id="${e.for}"]`):e.querySelector(`calcite-radio-button[name="${this.name}"]`);i&&(i.checked=!0,i.focused=!0),this.calciteRadioButtonChange.emit(),this.setFocus()}}checkLastRadioButton(){const e=this.queryButtons().filter(i=>i.checked);if((e==null?void 0:e.length)>1){const i=e[e.length-1];e.filter(n=>n!==i).forEach(n=>{n.checked=!1,n.emitCheckedChange()})}}async emitCheckedChange(){this.calciteInternalRadioButtonCheckedChange.emit()}uncheckAllRadioButtonsInGroup(){this.queryButtons().forEach(e=>{e.checked&&(e.checked=!1,e.focused=!1)})}uncheckOtherRadioButtonsInGroup(){this.queryButtons().filter(i=>i.guid!==this.guid).forEach(i=>{i.checked&&(i.checked=!1,i.focused=!1)})}getTabIndex(){if(!this.disabled)return this.checked||this.isDefaultSelectable()?0:-1}mouseenter(){this.hovered=!0}mouseleave(){this.hovered=!1}connectedCallback(){this.rootNode=this.el.getRootNode(),this.guid=this.el.id||`calcite-radio-button-${Ts()}`,this.name&&this.checkLastRadioButton(),id(this),Rm(this)}componentWillLoad(){Ui(this)}componentDidLoad(){Bi(this),this.focused&&!this.disabled&&this.setFocus()}disconnectedCallback(){qh(this),Lm(this)}componentDidRender(){lr(this)}render(){const t=this.getTabIndex();return I(Ft,{onClick:this.clickHandler,onKeyDown:this.handleKeyDown},I("div",{"aria-checked":Vi(this.checked),"aria-label":Vc(this),class:ept.container,onBlur:this.onContainerBlur,onFocus:this.onContainerFocus,ref:this.setContainerEl,role:"radio",tabIndex:t},I("div",{class:"radio"})),I(Dm,{component:this}))}get el(){return this}static get watchers(){return{checked:["checkedChanged"],name:["nameChanged"]}}static get style(){return tpt}},[1,"calcite-radio-button",{checked:[1540],disabled:[516],focused:[1540],guid:[1537],hidden:[516],hovered:[1540],label:[1],name:[513],required:[516],scale:[513],value:[1032],setFocus:[64],emitCheckedChange:[64]},[[1,"pointerenter","mouseenter"],[1,"pointerleave","mouseleave"]]]);function npt(){if(typeof customElements>"u")return;["calcite-radio-button"].forEach(e=>{switch(e){case"calcite-radio-button":customElements.get(e)||customElements.define(e,ipt);break}})}npt();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const rpt="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:flex;max-inline-size:100vw}:host([layout=horizontal]){flex-direction:row;flex-wrap:wrap}:host([layout=horizontal][scale=s]){gap:1rem}:host([layout=horizontal][scale=m]){gap:1.25rem}:host([layout=horizontal][scale=l]){gap:1.5rem}:host([layout=vertical]){flex-direction:column}",spt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteRadioButtonGroupChange=ue(this,"calciteRadioButtonGroupChange",6),this.mutationObserver=Pi("mutation",()=>this.passPropsToRadioButtons()),this.passPropsToRadioButtons=()=>{const t=this.el.querySelectorAll("calcite-radio-button");this.selectedItem=Array.from(t).find(e=>e.checked)||null,t.length>0&&t.forEach(e=>{e.disabled=this.disabled||e.disabled,e.hidden=this.hidden,e.name=this.name,e.required=this.required,e.scale=this.scale})},this.disabled=!1,this.hidden=!1,this.layout="horizontal",this.name=void 0,this.required=!1,this.selectedItem=null,this.scale="m"}onDisabledChange(){this.passPropsToRadioButtons()}onHiddenChange(){this.passPropsToRadioButtons()}onLayoutChange(){this.passPropsToRadioButtons()}onScaleChange(){this.passPropsToRadioButtons()}connectedCallback(){var t;this.passPropsToRadioButtons(),(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0})}disconnectedCallback(){var t;(t=this.mutationObserver)==null||t.disconnect()}radioButtonChangeHandler(t){this.selectedItem=t.target,this.calciteRadioButtonGroupChange.emit()}render(){return I(Ft,{role:"radiogroup"},I("slot",null))}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{disabled:["onDisabledChange"],hidden:["onHiddenChange"],layout:["onLayoutChange"],scale:["onScaleChange"]}}static get style(){return rpt}},[17,"calcite-radio-button-group",{disabled:[516],hidden:[516],layout:[513],name:[513],required:[516],selectedItem:[1040],scale:[513]},[[0,"calciteRadioButtonChange","radioButtonChangeHandler"]]]);function opt(){if(typeof customElements>"u")return;["calcite-radio-button-group"].forEach(e=>{switch(e){case"calcite-radio-button-group":customElements.get(e)||customElements.define(e,spt);break}})}opt();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const apt="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([scale=s]){--calcite-checkbox-size:0.75rem}:host([scale=m]){--calcite-checkbox-size:var(--calcite-font-size--1)}:host([scale=l]){--calcite-checkbox-size:1rem}:host{position:relative;display:inline-flex;cursor:pointer;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}:host .check-svg,:host .toggle{inline-size:var(--calcite-checkbox-size);block-size:var(--calcite-checkbox-size)}:host .check-svg{pointer-events:none;box-sizing:border-box;display:block;overflow:hidden;background-color:var(--calcite-ui-foreground-1);fill:currentColor;stroke:currentColor;stroke-width:1;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;box-shadow:inset 0 0 0 1px var(--calcite-ui-border-input);color:var(--calcite-ui-background)}:host([checked]) .check-svg,:host([indeterminate]) .check-svg{background-color:var(--calcite-ui-brand);box-shadow:inset 0 0 0 1px var(--calcite-ui-brand)}:host([hovered]) .toggle .check-svg,:host .toggle:hover .check-svg{box-shadow:inset 0 0 0 2px var(--calcite-ui-brand)}.toggle{outline-color:transparent}.toggle:active,.toggle:focus,.toggle:focus-visible{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}",lpt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalCheckboxBlur=ue(this,"calciteInternalCheckboxBlur",6),this.calciteCheckboxChange=ue(this,"calciteCheckboxChange",6),this.calciteInternalCheckboxFocus=ue(this,"calciteInternalCheckboxFocus",6),this.checkedPath="M5.5 12L2 8.689l.637-.636L5.5 10.727l8.022-7.87.637.637z",this.indeterminatePath="M13 8v1H3V8z",this.getPath=()=>this.indeterminate?this.indeterminatePath:this.checked?this.checkedPath:"",this.toggle=()=>{this.disabled||(this.checked=!this.checked,this.setFocus(),this.indeterminate=!1,this.calciteCheckboxChange.emit())},this.keyDownHandler=t=>{Yu(t.key)&&(this.toggle(),t.preventDefault())},this.clickHandler=()=>{this.toggle()},this.onToggleBlur=()=>{this.calciteInternalCheckboxBlur.emit(!1)},this.onToggleFocus=()=>{this.calciteInternalCheckboxFocus.emit(!0)},this.onLabelClick=()=>{this.toggle()},this.checked=!1,this.disabled=!1,this.guid=void 0,this.hovered=!1,this.indeterminate=!1,this.label=void 0,this.name=void 0,this.required=!1,this.scale="m",this.value=void 0}async setFocus(){var t;await Hi(this),(t=this.toggleEl)==null||t.focus()}syncHiddenFormInput(t){t.type="checkbox"}connectedCallback(){this.guid=this.el.id||`calcite-checkbox-${Ts()}`,id(this),Rm(this)}disconnectedCallback(){qh(this),Lm(this)}componentWillLoad(){Ui(this)}componentDidLoad(){Bi(this)}componentDidRender(){lr(this)}render(){return I(Ft,{onClick:this.clickHandler,onKeyDown:this.keyDownHandler},I("div",{"aria-checked":Vi(this.checked),"aria-label":Vc(this),class:"toggle",onBlur:this.onToggleBlur,onFocus:this.onToggleFocus,ref:t=>this.toggleEl=t,role:"checkbox",tabIndex:this.disabled?void 0:0},I("svg",{"aria-hidden":"true",class:"check-svg",viewBox:"0 0 16 16"},I("path",{d:this.getPath()})),I("slot",null)),I(Dm,{component:this}))}get el(){return this}static get style(){return apt}},[1,"calcite-checkbox",{checked:[1540],disabled:[516],guid:[1537],hovered:[1540],indeterminate:[1540],label:[1],name:[520],required:[516],scale:[513],value:[8],setFocus:[64]}]);function cpt(){if(typeof customElements>"u")return;["calcite-checkbox"].forEach(e=>{switch(e){case"calcite-checkbox":customElements.get(e)||customElements.define(e,lpt);break}})}cpt();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const upt="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:inline}:host a,:host span{position:relative;display:flex;cursor:pointer;align-items:center;justify-content:center;border-radius:0px;border-style:none;font-family:inherit;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;text-decoration:none;line-height:inherit;font-size:inherit;-webkit-appearance:none}:host a:hover,:host span:hover{text-decoration:none}:host a,:host span{outline-color:transparent}:host a:focus,:host span:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}calcite-icon{inline-size:1em;block-size:1em;min-inline-size:unset;min-block-size:unset}.calcite-link--icon{vertical-align:middle;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;margin-block-start:-0.25em}:host .calcite-link--icon.icon-start{margin-inline-end:0.5rem}:host .calcite-link--icon.icon-end{margin-inline-start:0.5rem}:host span,:host a{position:relative;display:inline;border-style:none;background-color:transparent;padding:0px;color:var(--calcite-ui-text-link);transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;line-height:inherit;white-space:initial;background-image:linear-gradient(currentColor, currentColor), linear-gradient(var(--calcite-link-blue-underline), var(--calcite-link-blue-underline));background-position-x:0%, 100%;background-position-y:min(1.5em, 100%);background-repeat:no-repeat, no-repeat;background-size:0% 1px, 100% 1px}:host span:hover,:host span:focus,:host a:hover,:host a:focus{background-size:100% 1px, 100% 1px}:host span:active,:host a:active{background-size:100% 2px, 100% 2px}:host span.calcite--rtl,:host a.calcite--rtl{background-position:100% 100%, 100% 100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}",dpt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.childElClickHandler=t=>{t.isTrusted||t.stopPropagation()},this.storeTagRef=t=>{this.childEl=t},this.disabled=!1,this.download=!1,this.href=void 0,this.iconEnd=void 0,this.iconFlipRtl=void 0,this.iconStart=void 0,this.rel=void 0,this.target=void 0}componentWillLoad(){Ui(this)}componentDidLoad(){Bi(this)}componentDidRender(){lr(this)}render(){const{download:t,el:e}=this,i=Kr(e),n=this.href?"a":"span",r=I("calcite-icon",{class:"calcite-link--icon icon-start",flipRtl:this.iconFlipRtl==="start"||this.iconFlipRtl==="both",icon:this.iconStart,scale:"s"}),s=I("calcite-icon",{class:"calcite-link--icon icon-end",flipRtl:this.iconFlipRtl==="end"||this.iconFlipRtl==="both",icon:this.iconEnd,scale:"s"}),o=n,a=n==="span"?"link":null,l=n==="span"?0:null;return I(Ft,{role:"presentation"},I(o,{class:{[pw.rtl]:i==="rtl"},download:o==="a"&&(t===""||t)?t:null,href:o==="a"&&this.href,onClick:this.childElClickHandler,ref:this.storeTagRef,rel:o==="a"&&this.rel,role:a,tabIndex:l,target:o==="a"&&this.target},this.iconStart?r:null,I("slot",null),this.iconEnd?s:null))}clickHandler(t){t.isTrusted||this.childEl.click()}async setFocus(){await Hi(this),qu(this.childEl)}get el(){return this}static get style(){return upt}},[1,"calcite-link",{disabled:[516],download:[520],href:[513],iconEnd:[513,"icon-end"],iconFlipRtl:[513,"icon-flip-rtl"],iconStart:[513,"icon-start"],rel:[1],target:[1],setFocus:[64]},[[0,"click","clickHandler"]]]);function hpt(){if(typeof customElements>"u")return;["calcite-link","calcite-icon"].forEach(e=>{switch(e){case"calcite-link":customElements.get(e)||customElements.define(e,dpt);break;case"calcite-icon":customElements.get(e)||ni();break}})}hpt();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function c_e(t,e,i){return i={path:e,exports:{},require:function(n,r){return ppt()}},t(i,i.exports),i.exports}function ppt(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Rx={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},fpt=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")},Lx=c_e(function(t){var e=Array.prototype.concat,i=Array.prototype.slice,n=t.exports=function(s){for(var o=[],a=0,l=s.length;a<l;a++){var u=s[a];fpt(u)?o=e.call(o,i.call(u)):o.push(u)}return o};n.wrap=function(r){return function(){return r(n(arguments))}}}),Nb=c_e(function(t){var e=Object.hasOwnProperty,i={};for(var n in Rx)e.call(Rx,n)&&(i[Rx[n]]=n);var r=t.exports={to:{},get:{}};r.get=function(a){var l=a.substring(0,3).toLowerCase(),u,h;switch(l){case"hsl":u=r.get.hsl(a),h="hsl";break;case"hwb":u=r.get.hwb(a),h="hwb";break;default:u=r.get.rgb(a),h="rgb";break}return u?{model:h,value:u}:null},r.get.rgb=function(a){if(!a)return null;var l=/^#([a-f0-9]{3,4})$/i,u=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,h=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,p=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,f=/^(\w+)$/,g=[0,0,0,1],v,b,_;if(v=a.match(u)){for(_=v[2],v=v[1],b=0;b<3;b++){var w=b*2;g[b]=parseInt(v.slice(w,w+2),16)}_&&(g[3]=parseInt(_,16)/255)}else if(v=a.match(l)){for(v=v[1],_=v[3],b=0;b<3;b++)g[b]=parseInt(v[b]+v[b],16);_&&(g[3]=parseInt(_+_,16)/255)}else if(v=a.match(h)){for(b=0;b<3;b++)g[b]=parseInt(v[b+1],0);v[4]&&(v[5]?g[3]=parseFloat(v[4])*.01:g[3]=parseFloat(v[4]))}else if(v=a.match(p)){for(b=0;b<3;b++)g[b]=Math.round(parseFloat(v[b+1])*2.55);v[4]&&(v[5]?g[3]=parseFloat(v[4])*.01:g[3]=parseFloat(v[4]))}else return(v=a.match(f))?v[1]==="transparent"?[0,0,0,0]:e.call(Rx,v[1])?(g=Rx[v[1]],g[3]=1,g):null:null;for(b=0;b<3;b++)g[b]=s(g[b],0,255);return g[3]=s(g[3],0,1),g},r.get.hsl=function(a){if(!a)return null;var l=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,u=a.match(l);if(u){var h=parseFloat(u[4]),p=(parseFloat(u[1])%360+360)%360,f=s(parseFloat(u[2]),0,100),g=s(parseFloat(u[3]),0,100),v=s(isNaN(h)?1:h,0,1);return[p,f,g,v]}return null},r.get.hwb=function(a){if(!a)return null;var l=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,u=a.match(l);if(u){var h=parseFloat(u[4]),p=(parseFloat(u[1])%360+360)%360,f=s(parseFloat(u[2]),0,100),g=s(parseFloat(u[3]),0,100),v=s(isNaN(h)?1:h,0,1);return[p,f,g,v]}return null},r.to.hex=function(){var a=Lx(arguments);return"#"+o(a[0])+o(a[1])+o(a[2])+(a[3]<1?o(Math.round(a[3]*255)):"")},r.to.rgb=function(){var a=Lx(arguments);return a.length<4||a[3]===1?"rgb("+Math.round(a[0])+", "+Math.round(a[1])+", "+Math.round(a[2])+")":"rgba("+Math.round(a[0])+", "+Math.round(a[1])+", "+Math.round(a[2])+", "+a[3]+")"},r.to.rgb.percent=function(){var a=Lx(arguments),l=Math.round(a[0]/255*100),u=Math.round(a[1]/255*100),h=Math.round(a[2]/255*100);return a.length<4||a[3]===1?"rgb("+l+"%, "+u+"%, "+h+"%)":"rgba("+l+"%, "+u+"%, "+h+"%, "+a[3]+")"},r.to.hsl=function(){var a=Lx(arguments);return a.length<4||a[3]===1?"hsl("+a[0]+", "+a[1]+"%, "+a[2]+"%)":"hsla("+a[0]+", "+a[1]+"%, "+a[2]+"%, "+a[3]+")"},r.to.hwb=function(){var a=Lx(arguments),l="";return a.length>=4&&a[3]!==1&&(l=", "+a[3]),"hwb("+a[0]+", "+a[1]+"%, "+a[2]+"%"+l+")"},r.to.keyword=function(a){return i[a.slice(0,3)]};function s(a,l,u){return Math.min(Math.max(l,a),u)}function o(a){var l=Math.round(a).toString(16).toUpperCase();return l.length<2?"0"+l:l}}),yI={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const u_e={};for(const t of Object.keys(yI))u_e[yI[t]]=t;const Pe={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var R0=Pe;for(const t of Object.keys(Pe)){if(!("channels"in Pe[t]))throw new Error("missing channels property: "+t);if(!("labels"in Pe[t]))throw new Error("missing channel labels property: "+t);if(Pe[t].labels.length!==Pe[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:i}=Pe[t];delete Pe[t].channels,delete Pe[t].labels,Object.defineProperty(Pe[t],"channels",{value:e}),Object.defineProperty(Pe[t],"labels",{value:i})}Pe.rgb.hsl=function(t){const e=t[0]/255,i=t[1]/255,n=t[2]/255,r=Math.min(e,i,n),s=Math.max(e,i,n),o=s-r;let a,l;s===r?a=0:e===s?a=(i-n)/o:i===s?a=2+(n-e)/o:n===s&&(a=4+(e-i)/o),a=Math.min(a*60,360),a<0&&(a+=360);const u=(r+s)/2;return s===r?l=0:u<=.5?l=o/(s+r):l=o/(2-s-r),[a,l*100,u*100]};Pe.rgb.hsv=function(t){let e,i,n,r,s;const o=t[0]/255,a=t[1]/255,l=t[2]/255,u=Math.max(o,a,l),h=u-Math.min(o,a,l),p=function(f){return(u-f)/6/h+1/2};return h===0?(r=0,s=0):(s=h/u,e=p(o),i=p(a),n=p(l),o===u?r=n-i:a===u?r=1/3+e-n:l===u&&(r=2/3+i-e),r<0?r+=1:r>1&&(r-=1)),[r*360,s*100,u*100]};Pe.rgb.hwb=function(t){const e=t[0],i=t[1];let n=t[2];const r=Pe.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(i,n));return n=1-1/255*Math.max(e,Math.max(i,n)),[r,s*100,n*100]};Pe.rgb.cmyk=function(t){const e=t[0]/255,i=t[1]/255,n=t[2]/255,r=Math.min(1-e,1-i,1-n),s=(1-e-r)/(1-r)||0,o=(1-i-r)/(1-r)||0,a=(1-n-r)/(1-r)||0;return[s*100,o*100,a*100,r*100]};function mpt(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}Pe.rgb.keyword=function(t){const e=u_e[t];if(e)return e;let i=1/0,n;for(const r of Object.keys(yI)){const s=yI[r],o=mpt(t,s);o<i&&(i=o,n=r)}return n};Pe.keyword.rgb=function(t){return yI[t]};Pe.rgb.xyz=function(t){let e=t[0]/255,i=t[1]/255,n=t[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const r=e*.4124+i*.3576+n*.1805,s=e*.2126+i*.7152+n*.0722,o=e*.0193+i*.1192+n*.9505;return[r*100,s*100,o*100]};Pe.rgb.lab=function(t){const e=Pe.rgb.xyz(t);let i=e[0],n=e[1],r=e[2];i/=95.047,n/=100,r/=108.883,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;const s=116*n-16,o=500*(i-n),a=200*(n-r);return[s,o,a]};Pe.hsl.rgb=function(t){const e=t[0]/360,i=t[1]/100,n=t[2]/100;let r,s,o;if(i===0)return o=n*255,[o,o,o];n<.5?r=n*(1+i):r=n+i-n*i;const a=2*n-r,l=[0,0,0];for(let u=0;u<3;u++)s=e+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?o=a+(r-a)*6*s:2*s<1?o=r:3*s<2?o=a+(r-a)*(2/3-s)*6:o=a,l[u]=o*255;return l};Pe.hsl.hsv=function(t){const e=t[0];let i=t[1]/100,n=t[2]/100,r=i;const s=Math.max(n,.01);n*=2,i*=n<=1?n:2-n,r*=s<=1?s:2-s;const o=(n+i)/2,a=n===0?2*r/(s+r):2*i/(n+i);return[e,a*100,o*100]};Pe.hsv.rgb=function(t){const e=t[0]/60,i=t[1]/100;let n=t[2]/100;const r=Math.floor(e)%6,s=e-Math.floor(e),o=255*n*(1-i),a=255*n*(1-i*s),l=255*n*(1-i*(1-s));switch(n*=255,r){case 0:return[n,l,o];case 1:return[a,n,o];case 2:return[o,n,l];case 3:return[o,a,n];case 4:return[l,o,n];case 5:return[n,o,a]}};Pe.hsv.hsl=function(t){const e=t[0],i=t[1]/100,n=t[2]/100,r=Math.max(n,.01);let s,o;o=(2-i)*n;const a=(2-i)*r;return s=i*r,s/=a<=1?a:2-a,s=s||0,o/=2,[e,s*100,o*100]};Pe.hwb.rgb=function(t){const e=t[0]/360;let i=t[1]/100,n=t[2]/100;const r=i+n;let s;r>1&&(i/=r,n/=r);const o=Math.floor(6*e),a=1-n;s=6*e-o,o&1&&(s=1-s);const l=i+s*(a-i);let u,h,p;switch(o){default:case 6:case 0:u=a,h=l,p=i;break;case 1:u=l,h=a,p=i;break;case 2:u=i,h=a,p=l;break;case 3:u=i,h=l,p=a;break;case 4:u=l,h=i,p=a;break;case 5:u=a,h=i,p=l;break}return[u*255,h*255,p*255]};Pe.cmyk.rgb=function(t){const e=t[0]/100,i=t[1]/100,n=t[2]/100,r=t[3]/100,s=1-Math.min(1,e*(1-r)+r),o=1-Math.min(1,i*(1-r)+r),a=1-Math.min(1,n*(1-r)+r);return[s*255,o*255,a*255]};Pe.xyz.rgb=function(t){const e=t[0]/100,i=t[1]/100,n=t[2]/100;let r,s,o;return r=e*3.2406+i*-1.5372+n*-.4986,s=e*-.9689+i*1.8758+n*.0415,o=e*.0557+i*-.204+n*1.057,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,r=Math.min(Math.max(0,r),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[r*255,s*255,o*255]};Pe.xyz.lab=function(t){let e=t[0],i=t[1],n=t[2];e/=95.047,i/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const r=116*i-16,s=500*(e-i),o=200*(i-n);return[r,s,o]};Pe.lab.xyz=function(t){const e=t[0],i=t[1],n=t[2];let r,s,o;s=(e+16)/116,r=i/500+s,o=s-n/200;const a=s**3,l=r**3,u=o**3;return s=a>.008856?a:(s-16/116)/7.787,r=l>.008856?l:(r-16/116)/7.787,o=u>.008856?u:(o-16/116)/7.787,r*=95.047,s*=100,o*=108.883,[r,s,o]};Pe.lab.lch=function(t){const e=t[0],i=t[1],n=t[2];let r;r=Math.atan2(n,i)*360/2/Math.PI,r<0&&(r+=360);const o=Math.sqrt(i*i+n*n);return[e,o,r]};Pe.lch.lab=function(t){const e=t[0],i=t[1],r=t[2]/360*2*Math.PI,s=i*Math.cos(r),o=i*Math.sin(r);return[e,s,o]};Pe.rgb.ansi16=function(t,e=null){const[i,n,r]=t;let s=e===null?Pe.rgb.hsv(t)[2]:e;if(s=Math.round(s/50),s===0)return 30;let o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(i/255));return s===2&&(o+=60),o};Pe.hsv.ansi16=function(t){return Pe.rgb.ansi16(Pe.hsv.rgb(t),t[2])};Pe.rgb.ansi256=function(t){const e=t[0],i=t[1],n=t[2];return e===i&&i===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(n/255*5)};Pe.ansi16.rgb=function(t){let e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const i=(~~(t>50)+1)*.5,n=(e&1)*i*255,r=(e>>1&1)*i*255,s=(e>>2&1)*i*255;return[n,r,s]};Pe.ansi256.rgb=function(t){if(t>=232){const s=(t-232)*10+8;return[s,s,s]}t-=16;let e;const i=Math.floor(t/36)/5*255,n=Math.floor((e=t%36)/6)/5*255,r=e%6/5*255;return[i,n,r]};Pe.rgb.hex=function(t){const i=(((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255)).toString(16).toUpperCase();return"000000".substring(i.length)+i};Pe.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let i=e[0];e[0].length===3&&(i=i.split("").map(a=>a+a).join(""));const n=parseInt(i,16),r=n>>16&255,s=n>>8&255,o=n&255;return[r,s,o]};Pe.rgb.hcg=function(t){const e=t[0]/255,i=t[1]/255,n=t[2]/255,r=Math.max(Math.max(e,i),n),s=Math.min(Math.min(e,i),n),o=r-s;let a,l;return o<1?a=s/(1-o):a=0,o<=0?l=0:r===e?l=(i-n)/o%6:r===i?l=2+(n-e)/o:l=4+(e-i)/o,l/=6,l%=1,[l*360,o*100,a*100]};Pe.hsl.hcg=function(t){const e=t[1]/100,i=t[2]/100,n=i<.5?2*e*i:2*e*(1-i);let r=0;return n<1&&(r=(i-.5*n)/(1-n)),[t[0],n*100,r*100]};Pe.hsv.hcg=function(t){const e=t[1]/100,i=t[2]/100,n=e*i;let r=0;return n<1&&(r=(i-n)/(1-n)),[t[0],n*100,r*100]};Pe.hcg.rgb=function(t){const e=t[0]/360,i=t[1]/100,n=t[2]/100;if(i===0)return[n*255,n*255,n*255];const r=[0,0,0],s=e%1*6,o=s%1,a=1-o;let l=0;switch(Math.floor(s)){case 0:r[0]=1,r[1]=o,r[2]=0;break;case 1:r[0]=a,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=o;break;case 3:r[0]=0,r[1]=a,r[2]=1;break;case 4:r[0]=o,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=a}return l=(1-i)*n,[(i*r[0]+l)*255,(i*r[1]+l)*255,(i*r[2]+l)*255]};Pe.hcg.hsv=function(t){const e=t[1]/100,i=t[2]/100,n=e+i*(1-e);let r=0;return n>0&&(r=e/n),[t[0],r*100,n*100]};Pe.hcg.hsl=function(t){const e=t[1]/100,n=t[2]/100*(1-e)+.5*e;let r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],r*100,n*100]};Pe.hcg.hwb=function(t){const e=t[1]/100,i=t[2]/100,n=e+i*(1-e);return[t[0],(n-e)*100,(1-n)*100]};Pe.hwb.hcg=function(t){const e=t[1]/100,n=1-t[2]/100,r=n-e;let s=0;return r<1&&(s=(n-r)/(1-r)),[t[0],r*100,s*100]};Pe.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};Pe.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};Pe.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};Pe.gray.hsl=function(t){return[0,0,t[0]]};Pe.gray.hsv=Pe.gray.hsl;Pe.gray.hwb=function(t){return[0,100,t[0]]};Pe.gray.cmyk=function(t){return[0,0,0,t[0]]};Pe.gray.lab=function(t){return[t[0],0,0]};Pe.gray.hex=function(t){const e=Math.round(t[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};Pe.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]};function gpt(){const t={},e=Object.keys(R0);for(let i=e.length,n=0;n<i;n++)t[e[n]]={distance:-1,parent:null};return t}function ypt(t){const e=gpt(),i=[t];for(e[t].distance=0;i.length;){const n=i.pop(),r=Object.keys(R0[n]);for(let s=r.length,o=0;o<s;o++){const a=r[o],l=e[a];l.distance===-1&&(l.distance=e[n].distance+1,l.parent=n,i.unshift(a))}}return e}function vpt(t,e){return function(i){return e(t(i))}}function bpt(t,e){const i=[e[t].parent,t];let n=R0[e[t].parent][t],r=e[t].parent;for(;e[r].parent;)i.unshift(e[r].parent),n=vpt(R0[e[r].parent][r],n),r=e[r].parent;return n.conversion=i,n}var _pt=function(t){const e=ypt(t),i={},n=Object.keys(e);for(let r=n.length,s=0;s<r;s++){const o=n[s];e[o].parent!==null&&(i[o]=bpt(o,e))}return i};const zb={},wpt=Object.keys(R0);function xpt(t){const e=function(...i){const n=i[0];return n==null?n:(n.length>1&&(i=n),t(i))};return"conversion"in t&&(e.conversion=t.conversion),e}function Spt(t){const e=function(...i){const n=i[0];if(n==null)return n;n.length>1&&(i=n);const r=t(i);if(typeof r=="object")for(let s=r.length,o=0;o<s;o++)r[o]=Math.round(r[o]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}wpt.forEach(t=>{zb[t]={},Object.defineProperty(zb[t],"channels",{value:R0[t].channels}),Object.defineProperty(zb[t],"labels",{value:R0[t].labels});const e=_pt(t);Object.keys(e).forEach(n=>{const r=e[n];zb[t][n]=Spt(r),zb[t][n].raw=xpt(r)})});var va=zb;const d_e=["keyword","gray","hex"],AU={};for(const t of Object.keys(va))AU[[...va[t].labels].sort().join("")]=t;const cP={};function xr(t,e){if(!(this instanceof xr))return new xr(t,e);if(e&&e in d_e&&(e=null),e&&!(e in va))throw new Error("Unknown model: "+e);let i,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof xr)this.model=t.model,this.color=[...t.color],this.valpha=t.valpha;else if(typeof t=="string"){const r=Nb.get(t);if(r===null)throw new Error("Unable to parse color from string: "+t);this.model=r.model,n=va[this.model].channels,this.color=r.value.slice(0,n),this.valpha=typeof r.value[n]=="number"?r.value[n]:1}else if(t.length>0){this.model=e||"rgb",n=va[this.model].channels;const r=Array.prototype.slice.call(t,0,n);this.color=MU(r,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;const r=Object.keys(t);"alpha"in t&&(r.splice(r.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);const s=r.sort().join("");if(!(s in AU))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=AU[s];const{labels:o}=va[this.model],a=[];for(i=0;i<o.length;i++)a.push(t[o[i]]);this.color=MU(a)}if(cP[this.model])for(n=va[this.model].channels,i=0;i<n;i++){const r=cP[this.model][i];r&&(this.color[i]=r(this.color[i]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}xr.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(t){let e=this.model in Nb.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);const i=e.valpha===1?e.color:[...e.color,this.valpha];return Nb.to[e.model](i)},percentString(t){const e=this.rgb().round(typeof t=="number"?t:1),i=e.valpha===1?e.color:[...e.color,this.valpha];return Nb.to.rgb.percent(i)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const t={},{channels:e}=va[this.model],{labels:i}=va[this.model];for(let n=0;n<e;n++)t[i[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray(){const t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject(){const t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round(t){return t=Math.max(t||0,0),new xr([...this.color.map(Cpt(t)),this.valpha],this.model)},alpha(t){return t!==void 0?new xr([...this.color,Math.max(0,Math.min(1,t))],this.model):this.valpha},red:rn("rgb",0,Bn(255)),green:rn("rgb",1,Bn(255)),blue:rn("rgb",2,Bn(255)),hue:rn(["hsl","hsv","hsl","hwb","hcg"],0,t=>(t%360+360)%360),saturationl:rn("hsl",1,Bn(100)),lightness:rn("hsl",2,Bn(100)),saturationv:rn("hsv",1,Bn(100)),value:rn("hsv",2,Bn(100)),chroma:rn("hcg",1,Bn(100)),gray:rn("hcg",2,Bn(100)),white:rn("hwb",1,Bn(100)),wblack:rn("hwb",2,Bn(100)),cyan:rn("cmyk",0,Bn(100)),magenta:rn("cmyk",1,Bn(100)),yellow:rn("cmyk",2,Bn(100)),black:rn("cmyk",3,Bn(100)),x:rn("xyz",0,Bn(95.047)),y:rn("xyz",1,Bn(100)),z:rn("xyz",2,Bn(108.833)),l:rn("lab",0,Bn(100)),a:rn("lab",1),b:rn("lab",2),keyword(t){return t!==void 0?new xr(t):va[this.model].keyword(this.color)},hex(t){return t!==void 0?new xr(t):Nb.to.hex(this.rgb().round().color)},hexa(t){if(t!==void 0)return new xr(t);const e=this.rgb().round().color;let i=Math.round(this.valpha*255).toString(16).toUpperCase();return i.length===1&&(i="0"+i),Nb.to.hex(e)+i},rgbNumber(){const t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity(){const t=this.rgb().color,e=[];for(const[i,n]of t.entries()){const r=n/255;e[i]=r<=.04045?r/12.92:((r+.055)/1.055)**2.4}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast(t){const e=this.luminosity(),i=t.luminosity();return e>i?(e+.05)/(i+.05):(i+.05)/(e+.05)},level(t){const e=this.contrast(t);return e>=7?"AAA":e>=4.5?"AA":""},isDark(){const t=this.rgb().color;return(t[0]*2126+t[1]*7152+t[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const t=this.rgb();for(let e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten(t){const e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken(t){const e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate(t){const e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate(t){const e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten(t){const e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken(t){const e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale(){const t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return xr.rgb(e,e,e)},fade(t){return this.alpha(this.valpha-this.valpha*t)},opaquer(t){return this.alpha(this.valpha+this.valpha*t)},rotate(t){const e=this.hsl();let i=e.color[0];return i=(i+t)%360,i=i<0?360+i:i,e.color[0]=i,e},mix(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);const i=t.rgb(),n=this.rgb(),r=e===void 0?.5:e,s=2*r-1,o=i.alpha()-n.alpha(),a=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,l=1-a;return xr.rgb(a*i.red()+l*n.red(),a*i.green()+l*n.green(),a*i.blue()+l*n.blue(),i.alpha()*r+n.alpha()*(1-r))}};for(const t of Object.keys(va)){if(d_e.includes(t))continue;const{channels:e}=va[t];xr.prototype[t]=function(...i){return this.model===t?new xr(this):i.length>0?new xr(i,t):new xr([...Ipt(va[this.model][t].raw(this.color)),this.valpha],t)},xr[t]=function(...i){let n=i[0];return typeof n=="number"&&(n=MU(i,e)),new xr(n,t)}}function Ept(t,e){return Number(t.toFixed(e))}function Cpt(t){return function(e){return Ept(e,t)}}function rn(t,e,i){t=Array.isArray(t)?t:[t];for(const n of t)(cP[n]||(cP[n]=[]))[e]=i;return t=t[0],function(n){let r;return n!==void 0?(i&&(n=i(n)),r=this[t](),r.color[e]=n,r):(r=this[t]().color[e],i&&(r=i(r)),r)}}function Bn(t){return function(e){return Math.max(0,Math.min(t,e))}}function Ipt(t){return Array.isArray(t)?t:[t]}function MU(t,e){for(let i=0;i<e;i++)typeof t[i]!="number"&&(t[i]=0);return t}var bc=xr;const Tpt={swatch:"swatch",noColorIcon:"no-color-icon"},Fie={borderLight:"rgba(0, 0, 0, 0.3)",borderDark:"rgba(255, 255, 255, 0.15)"},kpt="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:relative;display:inline-flex}:host([scale=s]){block-size:1.25rem;inline-size:1.25rem}:host([scale=m]){block-size:1.5rem;inline-size:1.5rem}:host([scale=l]){block-size:2rem;inline-size:2rem}.swatch{overflow:visible;block-size:inherit;inline-size:inherit}.swatch rect{transition-property:all;transition-duration:150ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}.no-color-icon{position:absolute;inset:0px;block-size:100%;inline-size:100%}",$pt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.active=!1,this.color=void 0,this.scale="m"}handleColorChange(t){this.internalColor=bc(t)}componentWillLoad(){this.handleColorChange(this.color)}render(){const{active:t,el:e,internalColor:i}=this,n=t?"100%":"0",r=i.hex(),o=KDe(e)==="light"?Fie.borderLight:Fie.borderDark;return I("svg",{class:Tpt.swatch,xmlns:"http://www.w3.org/2000/svg"},I("title",null,r),I("rect",{fill:r,height:"100%",id:"swatch",rx:n,stroke:o,"stroke-width":"2",style:{"clip-path":`inset(0 round ${n})`},width:"100%"}))}get el(){return this}static get watchers(){return{color:["handleColorChange"]}}static get style(){return kpt}},[1,"calcite-color-picker-swatch",{active:[516],color:[1],scale:[513]}]);function HH(){if(typeof customElements>"u")return;["calcite-color-picker-swatch"].forEach(e=>{switch(e){case"calcite-color-picker-swatch":customElements.get(e)||customElements.define(e,$pt);break}})}HH();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function h_e(t){const{r:e,g:i,b:n}=t;return`#${e.toString(16).padStart(2,"0")}${i.toString(16).padStart(2,"0")}${n.toString(16).padStart(2,"0")}`.toLowerCase()}const Apt=/^[0-9A-F]$/i,Mpt=/^#[0-9A-F]{3}$/i,Opt=/^#[0-9A-F]{6}$/i;function iE(t){return p_e(t)||f_e(t)}function p_e(t){return t&&t.length===4&&Mpt.test(t)}function f_e(t){return t&&t.length===7&&Opt.test(t)}function Ef(t){return t=t.toLowerCase(),t.startsWith("#")||(t=`#${t}`),p_e(t)?h_e(Ppt(t)):t}function Ppt(t){if(!iE(t))return null;if(t=t.replace("#",""),t.length===3){const[r,s,o]=t.split(""),a=parseInt(`${r}${r}`,16),l=parseInt(`${s}${s}`,16),u=parseInt(`${o}${o}`,16);return{r:a,g:l,b:u}}const e=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),n=parseInt(t.slice(4,6),16);return{r:e,g:i,b:n}}const m_e=t=>t,dy=m_e({HEX:"hex",HEXA:"hexa",RGB_CSS:"rgb-css",RGBA_CSS:"rgba-css",HSL_CSS:"hsl-css",HSLA_CSS:"hsla-css"}),Mv=m_e({RGB:"rgb",RGBA:"rgba",HSL:"hsl",HSLA:"hsla",HSV:"hsv",HSVA:"hsva"});function Nie(t){if(typeof t=="string"){if(t.startsWith("#")){const{length:e}=t;if(e===4||e===7)return dy.HEX;if(e===5||e===9)return dy.HEXA}if(t.startsWith("rgba("))return dy.RGBA_CSS;if(t.startsWith("rgb("))return dy.RGB_CSS;if(t.startsWith("hsl("))return dy.HSL_CSS;if(t.startsWith("hsla("))return dy.HSLA_CSS}if(typeof t=="object"){if(Ov(t,"r","g","b"))return Ov(t,"a")?Mv.RGBA:Mv.RGB;if(Ov(t,"h","s","l"))return Ov(t,"a")?Mv.HSLA:Mv.HSL;if(Ov(t,"h","s","v"))return Ov(t,"a")?Mv.HSVA:Mv.HSV}return null}function Ov(t,...e){return e.every(i=>i&&t&&`${i}`in t)}function zie(t,e){return(t==null?void 0:t.rgbNumber())===(e==null?void 0:e.rgbNumber())}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const I5={container:"container",preview:"preview",input:"input"},Rpt="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:block}.container{display:inline-grid;inline-size:100%;align-items:center;grid-template-columns:1fr auto}.preview{grid-column:2/3;pointer-events:none;margin-block:0px;margin-inline:0.25rem;display:flex;align-items:center}.preview,.input{grid-row:1}.input{grid-column:1/3;inline-size:100%;text-transform:uppercase}",jie=bc(),Lpt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteColorPickerHexInputChange=ue(this,"calciteColorPickerHexInputChange",6),this.onCalciteInternalInputBlur=()=>{const t=this.inputNode,e=t.value,i=`#${e}`;this.allowEmpty&&!e||iE(i)&&f_e(i)||(t.value=this.allowEmpty&&!this.internalColor?"":this.formatForInternalInput(h_e(this.internalColor.object())))},this.onInputChange=()=>{this.internalSetValue(this.inputNode.value,this.value)},this.previousNonNullValue=this.value,this.storeInputRef=t=>{this.inputNode=t},this.hexLabel="Hex",this.allowEmpty=!1,this.scale="m",this.value=Ef(jie.hex()),this.numberingSystem=void 0,this.internalColor=jie}connectedCallback(){const{allowEmpty:t,value:e}=this;if(e){const i=Ef(e);iE(i)&&this.internalSetValue(i,i,!1);return}t&&this.internalSetValue(null,null,!1)}componentWillLoad(){Ui(this)}componentDidLoad(){Bi(this)}handleValueChange(t,e){this.internalSetValue(t,e,!1)}onInputKeyDown(t){const{altKey:e,ctrlKey:i,metaKey:n,shiftKey:r}=t,{internalColor:s,value:o}=this,{key:a}=t;if(a==="Tab"||a==="Enter"){this.onInputChange();return}const l=a==="ArrowDown"||a==="ArrowUp",u=this.value;if(l){if(!o){this.internalSetValue(this.previousNonNullValue,u),t.preventDefault();return}const g=a==="ArrowUp"?1:-1,v=r?10:1;this.internalSetValue(Ef(this.nudgeRGBChannels(s,v*g).hex()),u),t.preventDefault();return}const h=e||i||n,p=a.length===1,f=Apt.test(a);p&&!h&&!f&&t.preventDefault()}onPaste(t){const e=t.clipboardData.getData("text");iE(e)&&(t.preventDefault(),this.inputNode.value=e.slice(1))}render(){const{value:t}=this,e=this.formatForInternalInput(t);return I("div",{class:I5.container},I("calcite-input",{class:I5.input,label:this.hexLabel,maxLength:6,numberingSystem:this.numberingSystem,onCalciteInputChange:this.onInputChange,onCalciteInternalInputBlur:this.onCalciteInternalInputBlur,onKeyDown:this.handleKeyDown,onPaste:this.onPaste,prefixText:"#",ref:this.storeInputRef,scale:this.scale,value:e}),e?I("calcite-color-picker-swatch",{active:!0,class:I5.preview,color:`#${e}`,scale:this.scale}):null)}async setFocus(){await Hi(this),qu(this.inputNode)}internalSetValue(t,e,i=!0){if(t){const n=Ef(t);if(iE(n)){const{internalColor:r}=this,s=!r||n!==Ef(r.hex());this.internalColor=bc(n),this.previousNonNullValue=n,this.value=n,s&&i&&this.calciteColorPickerHexInputChange.emit();return}}else if(this.allowEmpty){this.internalColor=null,this.value=null,i&&this.calciteColorPickerHexInputChange.emit();return}this.value=e}formatForInternalInput(t){return t?t.replace("#",""):""}nudgeRGBChannels(t,e){return bc.rgb(t.array().map(i=>i+e))}handleKeyDown(t){t.key==="Enter"&&t.preventDefault()}get el(){return this}static get watchers(){return{value:["handleValueChange"]}}static get style(){return Rpt}},[1,"calcite-color-picker-hex-input",{hexLabel:[1,"hex-label"],allowEmpty:[4,"allow-empty"],scale:[513],value:[1537],numberingSystem:[1,"numbering-system"],internalColor:[32],setFocus:[64]},[[2,"keydown","onInputKeyDown"]]]);function g_e(){if(typeof customElements>"u")return;["calcite-color-picker-hex-input","calcite-color-picker-swatch","calcite-icon","calcite-input","calcite-progress"].forEach(e=>{switch(e){case"calcite-color-picker-hex-input":customElements.get(e)||customElements.define(e,Lpt);break;case"calcite-color-picker-swatch":customElements.get(e)||HH();break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-input":customElements.get(e)||yL();break;case"calcite-progress":customElements.get(e)||y2();break}})}g_e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */var Dpt="Expected a function";function Fpt(t,e,i){var n=!0,r=!0;if(typeof t!="function")throw new TypeError(Dpt);return Fw(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),pI(t,e,{leading:n,maxWait:e,trailing:r})}const Jt={container:"container",controlSection:"control-section",hexOptions:"color-hex-options",section:"section",header:"header",control:"control",splitSection:"section--split",colorModeContainer:"color-mode-container",colorMode:"color-mode",channels:"channels",channel:"channel",savedColors:"saved-colors",savedColorsSection:"saved-colors-section",saveColor:"save-color",deleteColor:"delete-color",savedColorsButtons:"saved-colors-buttons",headerHex:"header--hex",colorFieldAndSlider:"color-field-and-slider",colorFieldAndSliderInteractive:"color-field-and-slider--interactive",colorFieldAndSliderWrap:"color-field-and-slider-wrap",scope:"scope",hueScope:"scope--hue",colorFieldScope:"scope--color-field",savedColor:"saved-color"},jb=bc("#007AC2"),T5="calcite-color-",Vie={r:255,g:255,b:255},Ba={h:360,s:100,v:100},Uie={s:{slider:{height:10,width:160},colorField:{height:80,width:160},thumb:{radius:8}},m:{slider:{height:14,width:272},colorField:{height:150,width:272},thumb:{radius:10}},l:{slider:{height:16,width:464},colorField:{height:200,width:464},thumb:{radius:12}}},Npt="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:inline-block;font-size:var(--calcite-font-size--2);line-height:1rem;font-weight:var(--calcite-font-weight-normal)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]) .container{inline-size:160px}:host([scale=s]) .saved-colors{grid-template-columns:repeat(auto-fill, minmax(20px, 1fr))}:host([scale=s]) .channels{flex-direction:column}:host([scale=s]) .channel{inline-size:100%;margin-block-end:4px}:host([scale=s]) .channel:last-child{margin-block-end:0}:host([scale=m]) .container{inline-size:272px}:host([scale=l]) .header{padding-block-end:0px}:host([scale=l]){font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]) .container{inline-size:464px}:host([scale=l]) .color-field-and-slider{margin-block-end:-20px}:host([scale=l]) .section{padding-block:0 16px;padding-inline:16px}:host([scale=l]) .section:first-of-type{padding-block-start:16px}:host([scale=l]) .saved-colors{grid-template-columns:repeat(auto-fill, minmax(28px, 1fr));grid-gap:12px;padding-block-start:16px}:host([scale=l]) .control-section{flex-wrap:nowrap;align-items:baseline}:host([scale=l]) .control-section>:nth-child(2){margin-inline-start:12px}:host([scale=l]) .color-hex-options{display:flex;flex-shrink:1;flex-direction:column;justify-content:space-around;min-block-size:98px;inline-size:160px}:host([scale=l]) .color-mode-container{flex-shrink:3}.container{background-color:var(--calcite-ui-foreground-1);display:inline-block;border:1px solid var(--calcite-ui-border-1)}.color-field-and-slider-wrap{position:relative}.scope{pointer-events:none;position:absolute;font-size:var(--calcite-font-size--1);outline-color:transparent;outline-offset:14px}.scope:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:16px}.color-field-and-slider{margin-block-end:-16px;touch-action:none}.color-field-and-slider--interactive{cursor:pointer}.control-section{display:flex;flex-direction:row;flex-wrap:wrap}.section{padding-block:0 12px;padding-inline:12px}.section:first-of-type{padding-block-start:12px}.color-hex-options,.section--split{flex-grow:1}.header{display:flex;align-items:center;justify-content:space-between;padding-block-end:0.25rem;color:var(--calcite-ui-text-1)}.header--hex,.color-mode-container{padding-block-start:12px}.channels{display:flex;justify-content:space-between}.channel{inline-size:31%}.saved-colors{padding-block-start:12px;display:grid;grid-template-columns:repeat(auto-fill, minmax(24px, 1fr));grid-gap:8px;inline-size:100%}.saved-colors-buttons{display:flex}.saved-color{outline-offset:0;outline-color:transparent;cursor:pointer}.saved-color:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.saved-color:hover{transition:outline-color var(--calcite-internal-animation-timing-fast) ease-in-out;outline:2px solid var(--calcite-ui-border-2);outline-offset:2px}",zpt=16,jpt=Ef(jb.hex()),Vpt="auto",Upt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteColorPickerChange=ue(this,"calciteColorPickerChange",6),this.calciteColorPickerInput=ue(this,"calciteColorPickerInput",6),this.colorFieldAndSliderHovered=!1,this.hueThumbState="idle",this.internalColorUpdateContext=null,this.mode=dy.HEX,this.shiftKeyChannelAdjustment=0,this.sliderThumbState="idle",this.handleTabActivate=t=>{this.channelMode=t.currentTarget.getAttribute("data-color-mode"),this.updateChannelsFromColor(this.color)},this.handleColorFieldScopeKeyDown=t=>{const{key:e}=t,i={ArrowUp:{x:0,y:-10},ArrowRight:{x:10,y:0},ArrowDown:{x:0,y:10},ArrowLeft:{x:-10,y:0}};i[e]&&(t.preventDefault(),this.scopeOrientation=e==="ArrowDown"||e==="ArrowUp"?"vertical":"horizontal",this.captureColorFieldColor(this.colorFieldScopeLeft+i[e].x||0,this.colorFieldScopeTop+i[e].y||0,!1))},this.handleHueScopeKeyDown=t=>{const e=t.shiftKey?10:1,{key:i}=t,n={ArrowUp:1,ArrowRight:1,ArrowDown:-1,ArrowLeft:-1};if(n[i]){t.preventDefault();const r=n[i]*e,s=this.baseColorFieldColor.hue(),o=this.baseColorFieldColor.hue(s+r);this.internalColorSet(o,!1)}},this.handleHexInputChange=t=>{t.stopPropagation();const{allowEmpty:e,color:i}=this,r=t.target.value;if(e&&!r){this.internalColorSet(null);return}const s=i&&Ef(i.hex());r!==s&&this.internalColorSet(bc(r))},this.handleSavedColorSelect=t=>{const e=t.currentTarget;this.internalColorSet(bc(e.color))},this.handleChannelInput=t=>{const e=t.currentTarget,i=Number(e.getAttribute("data-channel-index")),n=this.channelMode==="rgb"?Vie[Object.keys(Vie)[i]]:Ba[Object.keys(Ba)[i]];let r;if(this.allowEmpty&&!e.value)r="";else{const s=Number(e.value)+this.shiftKeyChannelAdjustment;r=NH(s,0,n).toString()}e.value=r,e.internalSyncChildElValue()},this.handleChannelChange=t=>{const e=t.currentTarget,i=Number(e.getAttribute("data-channel-index")),n=[...this.channels];if(this.allowEmpty&&!e.value){this.channels=[null,null,null],this.internalColorSet(null);return}n[i]=Number(e.value),this.updateColorFromChannels(n)},this.handleSavedColorKeyDown=t=>{Yu(t.key)&&(t.preventDefault(),this.handleSavedColorSelect(t))},this.handleColorFieldAndSliderPointerLeave=()=>{this.colorFieldAndSliderInteractive=!1,this.colorFieldAndSliderHovered=!1,this.sliderThumbState!=="drag"&&this.hueThumbState!=="drag"&&(this.hueThumbState="idle",this.sliderThumbState="idle",this.drawColorFieldAndSlider())},this.handleColorFieldAndSliderPointerDown=t=>{var r,s;if(!Lo(t))return;const{offsetX:e,offsetY:i}=t,n=this.getCanvasRegion(i);n==="color-field"?(this.hueThumbState="drag",this.captureColorFieldColor(e,i),(r=this.colorFieldScopeNode)==null||r.focus()):n==="slider"&&(this.sliderThumbState="drag",this.captureHueSliderColor(e),(s=this.hueScopeNode)==null||s.focus()),t.preventDefault(),document.addEventListener("pointermove",this.globalPointerMoveHandler),document.addEventListener("pointerup",this.globalPointerUpHandler,{once:!0}),this.activeColorFieldAndSliderRect=this.fieldAndSliderRenderingContext.canvas.getBoundingClientRect()},this.globalPointerUpHandler=t=>{if(!Lo(t))return;const e=this.sliderThumbState==="drag"||this.hueThumbState==="drag";this.hueThumbState="idle",this.sliderThumbState="idle",this.activeColorFieldAndSliderRect=null,this.drawColorFieldAndSlider(),e&&this.calciteColorPickerChange.emit()},this.globalPointerMoveHandler=t=>{const{el:e,dimensions:i}=this,n=this.sliderThumbState==="drag",r=this.hueThumbState==="drag";if(!e.isConnected||!n&&!r)return;let s,o;const a=this.activeColorFieldAndSliderRect,{clientX:l,clientY:u}=t;if(this.colorFieldAndSliderHovered)s=l-a.x,o=u-a.y;else{const h=i.colorField.width,p=i.colorField.height,f=i.slider.height;l<a.x+h&&l>a.x?s=l-a.x:l<a.x?s=0:s=h-1,u<a.y+p+f&&u>a.y?o=u-a.y:u<a.y?o=0:o=p+f}r?this.captureColorFieldColor(s,o,!1):this.captureHueSliderColor(s)},this.handleColorFieldAndSliderPointerEnterOrMove=({offsetX:t,offsetY:e})=>{const{dimensions:{colorField:i,slider:n,thumb:r}}=this;this.colorFieldAndSliderInteractive=e<=i.height+n.height,this.colorFieldAndSliderHovered=!0;const s=this.getCanvasRegion(e);if(s==="color-field"){const o=this.hueThumbState,a=this.baseColorFieldColor.hsv(),l=Math.round(a.saturationv()/(Ba.s/i.width)),u=Math.round(i.height-a.value()/(Ba.v/i.height)),h=this.containsPoint(t,e,l,u,r.radius);let p=!1;o==="idle"&&h?(this.hueThumbState="hover",p=!0):o==="hover"&&!h&&(this.hueThumbState="idle",p=!0),this.hueThumbState!=="drag"&&p&&this.drawColorFieldAndSlider()}else if(s==="slider"){const o=this.baseColorFieldColor.hsv().saturationv(100).value(100),a=this.sliderThumbState,l=Math.round(o.hue()/(360/n.width)),u=Math.round((n.height+this.getSliderCapSpacing())/2)+i.height,h=this.containsPoint(t,e,l,u,r.radius);let p=!1;a==="idle"&&h?(this.sliderThumbState="hover",p=!0):a==="hover"&&!h&&(this.sliderThumbState="idle",p=!0),this.sliderThumbState!=="drag"&&p&&this.drawColorFieldAndSlider()}},this.storeColorFieldScope=t=>{this.colorFieldScopeNode=t},this.storeHueScope=t=>{this.hueScopeNode=t},this.renderChannelsTabTitle=t=>{const{channelMode:e,messages:i}=this,n=t===e,r=t==="rgb"?i.rgb:i.hsv;return I("calcite-tab-title",{class:Jt.colorMode,"data-color-mode":t,key:t,onCalciteTabsActivate:this.handleTabActivate,selected:n},r)},this.renderChannelsTab=t=>{const{channelMode:e,channels:i,messages:n}=this,r=t===e,s=t==="rgb",o=s?[n.r,n.g,n.b]:[n.h,n.s,n.v],a=s?[n.red,n.green,n.blue]:[n.hue,n.saturation,n.value],l=Kr(this.el);return I("calcite-tab",{class:Jt.control,key:t,selected:r},I("div",{class:Jt.channels,dir:"ltr"},i.map((u,h)=>this.renderChannel(u,h,o[h],a[h],l))))},this.renderChannel=(t,e,i,n,r)=>I("calcite-input",{class:Jt.channel,"data-channel-index":e,dir:r,label:n,lang:this.effectiveLocale,numberButtonType:"none",numberingSystem:this.numberingSystem,onCalciteInputChange:this.handleChannelChange,onCalciteInputInput:this.handleChannelInput,onKeyDown:this.handleKeyDown,prefixText:i,scale:this.scale==="l"?"m":"s",type:"number",value:t==null?void 0:t.toString()}),this.deleteColor=()=>{const t=this.color.hex();if(!(this.savedColors.indexOf(t)>-1))return;const i=this.savedColors.filter(r=>r!==t);this.savedColors=i;const n=`${T5}${this.storageId}`;this.storageId&&localStorage.setItem(n,JSON.stringify(i))},this.saveColor=()=>{const t=this.color.hex();if(this.savedColors.indexOf(t)>-1)return;const i=[...this.savedColors,t];this.savedColors=i;const n=`${T5}${this.storageId}`;this.storageId&&localStorage.setItem(n,JSON.stringify(i))},this.drawColorFieldAndSlider=Fpt(()=>{this.fieldAndSliderRenderingContext&&(this.drawColorField(),this.drawHueSlider())},zpt),this.captureColorFieldColor=(t,e,i=!0)=>{const{dimensions:{colorField:{height:n,width:r}}}=this,s=Math.round(Ba.s/r*t),o=Math.round(Ba.v/n*(n-e));this.internalColorSet(this.baseColorFieldColor.hsv().saturationv(s).value(o),i)},this.initColorFieldAndSlider=t=>{this.fieldAndSliderRenderingContext=t.getContext("2d"),this.updateCanvasSize(t)},this.allowEmpty=!1,this.color=jb,this.disabled=!1,this.format=Vpt,this.hideHex=!1,this.hideChannels=!1,this.hideSaved=!1,this.scale="m",this.storageId=void 0,this.messageOverrides=void 0,this.numberingSystem=void 0,this.value=jpt,this.defaultMessages=void 0,this.colorFieldAndSliderInteractive=!1,this.channelMode="rgb",this.channels=this.toChannels(jb),this.dimensions=Uie.m,this.effectiveLocale="",this.messages=void 0,this.savedColors=[],this.colorFieldScopeTop=void 0,this.colorFieldScopeLeft=void 0,this.scopeOrientation=void 0,this.hueScopeLeft=void 0,this.hueScopeTop=void 0}handleColorChange(t,e){this.drawColorFieldAndSlider(),this.updateChannelsFromColor(t),this.previousColor=e}handleFormatChange(t){this.setMode(t),this.internalColorSet(this.color,!1,"internal")}handleScaleChange(t="m"){var e;this.updateDimensions(t),this.updateCanvasSize((e=this.fieldAndSliderRenderingContext)==null?void 0:e.canvas)}onMessagesChange(){}handleValueChange(t,e){const{allowEmpty:i,format:n}=this,r=!i||t;let s=!1;if(r){const u=Nie(t);if(!u||n!=="auto"&&u!==n){this.showIncompatibleColorWarning(t,n),this.value=e;return}s=this.mode!==u,this.setMode(u)}const o=this.sliderThumbState==="drag"||this.hueThumbState==="drag";if(this.internalColorUpdateContext==="initial")return;if(this.internalColorUpdateContext==="user-interaction"){this.calciteColorPickerInput.emit(),o||this.calciteColorPickerChange.emit();return}const a=i&&!t?null:bc(t),l=!zie(a,this.color);(s||l)&&this.internalColorSet(a,!0,"internal")}get baseColorFieldColor(){return this.color||this.previousColor||jb}effectiveLocaleChange(){ur(this,this.effectiveLocale)}handleChannelKeyUpOrDown(t){this.shiftKeyChannelAdjustment=0;const{key:e}=t;if(e!=="ArrowUp"&&e!=="ArrowDown"||!t.composedPath().some(r=>{var s;return(s=r.classList)==null?void 0:s.contains(Jt.channel)}))return;const{shiftKey:i}=t;if(t.preventDefault(),!this.color){this.internalColorSet(this.previousColor),t.stopPropagation();return}const n=9;this.shiftKeyChannelAdjustment=e==="ArrowUp"&&i?n:e==="ArrowDown"&&i?-n:0}async setFocus(){await Hi(this),this.el.focus()}async componentWillLoad(){Ui(this);const{allowEmpty:t,color:e,format:i,value:n}=this,r=t&&!n,s=Nie(n),o=r||i==="auto"&&s||i===s,a=r?null:o?bc(n):e;o||this.showIncompatibleColorWarning(n,i),this.setMode(i),this.internalColorSet(a,!1,"initial"),this.updateDimensions(this.scale);const l=`${T5}${this.storageId}`;this.storageId&&localStorage.getItem(l)&&(this.savedColors=JSON.parse(localStorage.getItem(l))),await cr(this)}connectedCallback(){hn(this),dr(this)}componentDidLoad(){Bi(this)}disconnectedCallback(){document.removeEventListener("pointermove",this.globalPointerMoveHandler),document.removeEventListener("pointerup",this.globalPointerUpHandler),pn(this),hr(this)}componentDidRender(){lr(this)}render(){const{allowEmpty:t,color:e,messages:i,hideHex:n,hideChannels:r,hideSaved:s,savedColors:o,scale:a}=this,l=e?e.hex():null,u=a==="l"?"m":"s",{colorFieldAndSliderInteractive:h,colorFieldScopeTop:p,colorFieldScopeLeft:f,hueScopeLeft:g,hueScopeTop:v,scopeOrientation:b,dimensions:{colorField:{height:_,width:w},slider:{height:S}}}=this,C=v??S/2+_,$=g??w*jb.hue()/Ba.h,M=e===null,P=b==="vertical";return I("div",{class:Jt.container},I("div",{class:Jt.colorFieldAndSliderWrap},I("canvas",{class:{[Jt.colorFieldAndSlider]:!0,[Jt.colorFieldAndSliderInteractive]:h},onPointerDown:this.handleColorFieldAndSliderPointerDown,onPointerEnter:this.handleColorFieldAndSliderPointerEnterOrMove,onPointerLeave:this.handleColorFieldAndSliderPointerLeave,onPointerMove:this.handleColorFieldAndSliderPointerEnterOrMove,ref:this.initColorFieldAndSlider}),I("div",{"aria-label":P?i.value:i.saturation,"aria-valuemax":P?Ba.v:Ba.s,"aria-valuemin":"0","aria-valuenow":(P?e==null?void 0:e.saturationv():e==null?void 0:e.value())||"0",class:{[Jt.scope]:!0,[Jt.colorFieldScope]:!0},onKeyDown:this.handleColorFieldScopeKeyDown,ref:this.storeColorFieldScope,role:"slider",style:{top:`${p||0}px`,left:`${f||0}px`},tabindex:"0"}),I("div",{"aria-label":i.hue,"aria-valuemax":Ba.h,"aria-valuemin":"0","aria-valuenow":(e==null?void 0:e.round().hue())||jb.round().hue(),class:{[Jt.scope]:!0,[Jt.hueScope]:!0},onKeyDown:this.handleHueScopeKeyDown,ref:this.storeHueScope,role:"slider",style:{top:`${C}px`,left:`${$}px`},tabindex:"0"})),n&&r?null:I("div",{class:{[Jt.controlSection]:!0,[Jt.section]:!0}},n?null:I("div",{class:Jt.hexOptions},I("span",{class:{[Jt.header]:!0,[Jt.headerHex]:!0}},i.hex),I("calcite-color-picker-hex-input",{allowEmpty:t,class:Jt.control,hexLabel:i.hex,numberingSystem:this.numberingSystem,onCalciteColorPickerHexInputChange:this.handleHexInputChange,scale:u,value:l})),r?null:I("calcite-tabs",{class:{[Jt.colorModeContainer]:!0,[Jt.splitSection]:!0},scale:u},I("calcite-tab-nav",{slot:"title-group"},this.renderChannelsTabTitle("rgb"),this.renderChannelsTabTitle("hsv")),this.renderChannelsTab("rgb"),this.renderChannelsTab("hsv"))),s?null:I("div",{class:{[Jt.savedColorsSection]:!0,[Jt.section]:!0}},I("div",{class:Jt.header},I("label",null,i.saved),I("div",{class:Jt.savedColorsButtons},I("calcite-button",{appearance:"transparent",class:Jt.deleteColor,disabled:M,iconStart:"minus",kind:"neutral",label:i.deleteColor,onClick:this.deleteColor,scale:u,type:"button"}),I("calcite-button",{appearance:"transparent",class:Jt.saveColor,disabled:M,iconStart:"plus",kind:"neutral",label:i.saveColor,onClick:this.saveColor,scale:u,type:"button"}))),o.length>0?I("div",{class:Jt.savedColors},[...o.map(k=>I("calcite-color-picker-swatch",{active:l===k,class:Jt.savedColor,color:k,key:k,onClick:this.handleSavedColorSelect,onKeyDown:this.handleSavedColorKeyDown,scale:a,tabIndex:0}))]):null))}handleKeyDown(t){t.key==="Enter"&&t.preventDefault()}showIncompatibleColorWarning(t,e){console.warn(`ignoring color value (${t}) as it is not compatible with the current format (${e})`)}setMode(t){this.mode=t==="auto"?this.mode:t}captureHueSliderColor(t){const{dimensions:{slider:{width:e}}}=this,i=360/e*t;this.internalColorSet(this.baseColorFieldColor.hue(i),!1)}getCanvasRegion(t){const{dimensions:{colorField:{height:e},slider:{height:i}}}=this;return t<=e?"color-field":t<=e+i?"slider":"none"}internalColorSet(t,e=!0,i="user-interaction"){e&&zie(t,this.color)||(this.internalColorUpdateContext=i,this.color=t,this.value=this.toValue(t),this.internalColorUpdateContext=null)}toValue(t,e=this.mode){if(!t)return null;const i="hex";if(e.includes(i))return Ef(t.round()[i]());if(e.includes("-css"))return t[e.replace("-css","").replace("a","")]().round().string();const n=t[e]().round().object();return e.endsWith("a")&&(n.a=n.alpha,delete n.alpha),n}getSliderCapSpacing(){const{dimensions:{slider:{height:t},thumb:{radius:e}}}=this;return e*2-t}updateDimensions(t="m"){this.dimensions=Uie[t]}drawColorField(){const t=this.fieldAndSliderRenderingContext,{dimensions:{colorField:{height:e,width:i}}}=this;t.fillStyle=this.baseColorFieldColor.hsv().saturationv(100).value(100).string(),t.fillRect(0,0,i,e);const n=t.createLinearGradient(0,0,i,0);n.addColorStop(0,"rgba(255,255,255,1)"),n.addColorStop(1,"rgba(255,255,255,0)"),t.fillStyle=n,t.fillRect(0,0,i,e);const r=t.createLinearGradient(0,0,0,e);r.addColorStop(0,"rgba(0,0,0,0)"),r.addColorStop(1,"rgba(0,0,0,1)"),t.fillStyle=r,t.fillRect(0,0,i,e),this.drawActiveColorFieldColor()}setCanvasContextSize(t,{height:e,width:i}){const n=window.devicePixelRatio||1;t.width=i*n,t.height=e*n,t.style.height=`${e}px`,t.style.width=`${i}px`,t.getContext("2d").scale(n,n)}updateCanvasSize(t){t&&(this.setCanvasContextSize(t,{width:this.dimensions.colorField.width,height:this.dimensions.colorField.height+this.dimensions.slider.height+this.getSliderCapSpacing()*2}),this.drawColorFieldAndSlider())}containsPoint(t,e,i,n,r){return Math.pow(t-i,2)+Math.pow(e-n,2)<=Math.pow(r,2)}drawActiveColorFieldColor(){const{color:t}=this;if(!t)return;const e=t.hsv(),{dimensions:{colorField:{height:i,width:n},thumb:{radius:r}}}=this,s=e.saturationv()/(Ba.s/n),o=i-e.value()/(Ba.v/i);requestAnimationFrame(()=>{this.colorFieldScopeLeft=s,this.colorFieldScopeTop=o}),this.drawThumb(this.fieldAndSliderRenderingContext,r,s,o,e,this.hueThumbState)}drawThumb(t,e,i,n,r,s){const a=2*Math.PI;t.beginPath(),t.arc(i,n,e,0,a),t.shadowBlur=s==="hover"?32:16,t.shadowColor=`rgba(0, 0, 0, ${s==="drag"?.32:.16})`,t.fillStyle="#fff",t.fill(),t.beginPath(),t.arc(i,n,e-3,0,a),t.shadowBlur=0,t.shadowColor="transparent",t.fillStyle=r.rgb().string(),t.fill()}drawActiveHueSliderColor(){const{color:t}=this;if(!t)return;const e=t.hsv().saturationv(100).value(100),{dimensions:{colorField:{height:i},slider:{height:n,width:r},thumb:{radius:s}}}=this,o=e.hue()/(360/r),a=n/2+i;requestAnimationFrame(()=>{this.hueScopeLeft=o,this.hueScopeTop=a}),this.drawThumb(this.fieldAndSliderRenderingContext,s,o,a,e,this.sliderThumbState)}drawHueSlider(){const t=this.fieldAndSliderRenderingContext,{dimensions:{colorField:{height:e},slider:{height:i,width:n}}}=this,r=t.createLinearGradient(0,0,n,0),s=["red","yellow","lime","cyan","blue","magenta","red"],o=1/(s.length-1);let a=0;s.forEach(l=>{r.addColorStop(a,bc(l).string()),a+=o}),t.fillStyle=r,t.clearRect(0,e,n,i+this.getSliderCapSpacing()*2),t.fillRect(0,e,n,i),this.drawActiveHueSliderColor()}updateColorFromChannels(t){this.internalColorSet(bc(t,this.channelMode))}updateChannelsFromColor(t){this.channels=t?this.toChannels(t):[null,null,null]}toChannels(t){const{channelMode:e}=this;return t[e]().array().map(i=>Math.floor(i))}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{color:["handleColorChange"],format:["handleFormatChange"],scale:["handleScaleChange"],messageOverrides:["onMessagesChange"],value:["handleValueChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Npt}},[17,"calcite-color-picker",{allowEmpty:[516,"allow-empty"],color:[1040],disabled:[516],format:[513],hideHex:[516,"hide-hex"],hideChannels:[516,"hide-channels"],hideSaved:[516,"hide-saved"],scale:[513],storageId:[513,"storage-id"],messageOverrides:[1040],numberingSystem:[513,"numbering-system"],value:[1025],messages:[1040],defaultMessages:[32],colorFieldAndSliderInteractive:[32],channelMode:[32],channels:[32],dimensions:[32],effectiveLocale:[32],savedColors:[32],colorFieldScopeTop:[32],colorFieldScopeLeft:[32],scopeOrientation:[32],hueScopeLeft:[32],hueScopeTop:[32],setFocus:[64]},[[2,"keydown","handleChannelKeyUpOrDown"],[2,"keyup","handleChannelKeyUpOrDown"]]]);function Bpt(){if(typeof customElements>"u")return;["calcite-color-picker","calcite-button","calcite-color-picker-hex-input","calcite-color-picker-swatch","calcite-icon","calcite-input","calcite-loader","calcite-progress","calcite-tab","calcite-tab-nav","calcite-tab-title","calcite-tabs"].forEach(e=>{switch(e){case"calcite-color-picker":customElements.get(e)||customElements.define(e,Upt);break;case"calcite-button":customElements.get(e)||Zbe();break;case"calcite-color-picker-hex-input":customElements.get(e)||g_e();break;case"calcite-color-picker-swatch":customElements.get(e)||HH();break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-input":customElements.get(e)||yL();break;case"calcite-loader":customElements.get(e)||Bo();break;case"calcite-progress":customElements.get(e)||y2();break;case"calcite-tab":customElements.get(e)||Kbe();break;case"calcite-tab-nav":customElements.get(e)||Qbe();break;case"calcite-tab-title":customElements.get(e)||e_e();break;case"calcite-tabs":customElements.get(e)||Xbe();break}})}Bpt();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const k5={frame:"frame",frameAdvancing:"frame--advancing",frameRetreating:"frame--retreating"},Hpt="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:relative;display:flex;inline-size:100%;flex:1 1 auto;align-items:stretch;overflow:hidden;background-color:transparent}:host .frame{position:relative;margin:0px;display:flex;inline-size:100%;flex:1 1 auto;flex-direction:column;align-items:stretch;padding:0px}:host ::slotted(calcite-flow-item),:host ::slotted(calcite-panel){block-size:100%}:host ::slotted(.calcite-match-height:last-child){display:flex;flex:1 1 auto;overflow:hidden}:host .frame--advancing{animation:calcite-frame-advance var(--calcite-animation-timing)}:host .frame--retreating{animation:calcite-frame-retreat var(--calcite-animation-timing)}@keyframes calcite-frame-advance{0%{--tw-bg-opacity:0.5;transform:translate3d(50px, 0, 0)}100%{--tw-bg-opacity:1;transform:translate3d(0, 0, 0)}}@keyframes calcite-frame-retreat{0%{--tw-bg-opacity:0.5;transform:translate3d(-50px, 0, 0)}100%{--tw-bg-opacity:1;transform:translate3d(0, 0, 0)}}",y_e=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.itemMutationObserver=Pi("mutation",()=>this.updateFlowProps()),this.getFlowDirection=(t,e)=>{const i=t>1;return!(t&&e>1)&&!i?null:e<t?"retreating":"advancing"},this.updateFlowProps=()=>{const{el:t,items:e}=this,i=Array.from(t.querySelectorAll("calcite-flow-item")).filter(a=>a.closest("calcite-flow")===t),n=e.length,r=i.length,s=i[r-1],o=i[r-2];if(r&&s&&i.forEach(a=>{a.showBackButton=a===s&&r>1,a.hidden=a!==s}),o&&(o.menuOpen=!1),this.items=i,n!==r){const a=this.getFlowDirection(n,r);this.itemCount=r,this.flowDirection=a}},this.flowDirection=null,this.itemCount=0,this.items=[]}async back(){const{items:t}=this,e=t[t.length-1];return e?(e.beforeBack?e.beforeBack:()=>Promise.resolve()).call(e).then(()=>(e.remove(),e)):void 0}connectedCallback(){var t;(t=this.itemMutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0}),this.updateFlowProps()}disconnectedCallback(){var t;(t=this.itemMutationObserver)==null||t.disconnect()}handleItemBackClick(){this.back()}render(){const{flowDirection:t}=this,e={[k5.frame]:!0,[k5.frameAdvancing]:t==="advancing",[k5.frameRetreating]:t==="retreating"};return I("div",{class:e},I("slot",null))}get el(){return this}static get style(){return Hpt}},[1,"calcite-flow",{flowDirection:[32],itemCount:[32],items:[32],back:[64]},[[0,"calciteFlowItemBack","handleItemBackClick"]]]);function v_e(){if(typeof customElements>"u")return;["calcite-flow"].forEach(e=>{switch(e){case"calcite-flow":customElements.get(e)||customElements.define(e,y_e);break}})}v_e();const Gpt=y_e,qpt=v_e,Wpt=Object.freeze(Object.defineProperty({__proto__:null,CalciteFlow:Gpt,defineCustomElement:qpt},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */function b_e(t,e,i){if(!t)return;const n=t.getTime(),r=!(e instanceof Date)||n>=e.getTime(),s=!(i instanceof Date)||n<=i.getTime();return r&&s}function ga(t,e,i){if(!(t instanceof Date))return null;const n=t.getTime(),r=e instanceof Date&&n<e.getTime(),s=i instanceof Date&&n>i.getTime();return r?e:s?i:t}function On(t,e=!1){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;const i=t.split(/[: T-]/).map(parseFloat),n=new Date(i[0],(i[1]||1)-1,i[2]||1);if(n.setFullYear(i[0]),isNaN(n.getTime()))throw new Error(`Invalid ISO 8601 date: "${t}"`);return e?x_e(n):n}function Bie(t,e){if(!e)return null;const{separator:i}=e,{day:n,month:r,year:s}=Zpt(t,e),o=new Date(s,r,n);o.setFullYear(s);const a=n>0,l=r>-1,u=!isNaN(o.getTime()),h=t.split(i).filter(f=>f).length>2,p=s.toString().length>0;return a&&l&&u&&h&&p?o:null}function __e(t,e){const{separator:i,unitOrder:n}=e,r=w_e(n),s=t.split(i).map(u=>Lt.delocalize(u)),o=s[r.indexOf("d")],a=s[r.indexOf("m")],l=s[r.indexOf("y")];return{day:o,month:a,year:l}}function Eo(t){return t instanceof Date?new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().split("T")[0]:""}function Rr(t,e){return t instanceof Date&&e instanceof Date&&t.getDate()===e.getDate()&&t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function Jpt(t){const e=t.getMonth(),i=new Date(t);return i.setMonth(e-1),e===i.getMonth()?new Date(t.getFullYear(),e,0):i}function Ypt(t){const e=t.getMonth(),i=new Date(t);return i.setMonth(e+1),(e+2)%7===i.getMonth()%7?new Date(t.getFullYear(),e+2,0):i}function Zpt(t,e){const{day:i,month:n,year:r}=__e(t,e);return{day:parseInt(i),month:parseInt(n)-1,year:parseInt(r)}}function w_e(t){const e=["d","m","y"],i=t.toLowerCase();return e.sort((n,r)=>i.indexOf(n)-i.indexOf(r))}function zk(t,e){const i=t.getTime(),n=e.getTime();return(i-n)/(1e3*3600*24)}function x_e(t){return t.setHours(23,59,59,999),t}/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Kpt="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{display:flex;min-inline-size:0px;cursor:pointer;justify-content:center;color:var(--calcite-ui-text-3);inline-size:14.2857142857%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.day-v-wrapper{flex:1 1 auto}.day-wrapper{display:flex;flex-direction:column;align-items:center}.day{display:flex;align-items:center;justify-content:center;border-radius:9999px;font-size:var(--calcite-font-size--2);line-height:1rem;line-height:1;color:var(--calcite-ui-text-3);opacity:var(--calcite-ui-opacity-disabled);outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;background:none;box-shadow:0 0 0 2px transparent}.text{margin-block:1px 0px;margin-inline-start:0px}:host([scale=s]) .day-v-wrapper{padding-block:0.125rem}:host([scale=s]) .day-wrapper{padding:0px}:host([scale=s]) .day{block-size:27px;inline-size:27px;font-size:var(--calcite-font-size--2)}:host([scale=m]) .day-v-wrapper{padding-block:0.25rem}:host([scale=m]) .day-wrapper{padding-inline:0.25rem}:host([scale=m]) .day{block-size:33px;inline-size:33px;font-size:var(--calcite-font-size--1)}:host([scale=l]) .day-v-wrapper{padding-block:0.25rem}:host([scale=l]) .day-wrapper{padding-inline:0.25rem}:host([scale=l]) .day{block-size:43px;inline-size:43px;font-size:var(--calcite-font-size-0)}:host([current-month]) .day{opacity:1}:host(:hover:not([disabled])) .day,:host([active]:not([range])) .day{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1)}:host(:focus),:host([active]){outline:2px solid transparent;outline-offset:2px}:host(:focus:not([disabled])) .day{outline:2px solid var(--calcite-ui-brand);outline-offset:2px;box-shadow:0 0 0 2px var(--calcite-ui-foreground-1)}:host([selected]) .day{font-weight:var(--calcite-font-weight-medium);background-color:var(--calcite-ui-brand) !important;color:var(--calcite-ui-foreground-1) !important}:host([range][selected]) .day-wrapper{background-color:var(--calcite-ui-foreground-current)}:host([start-of-range]) .day-wrapper{border-start-start-radius:40%;border-end-start-radius:40%}:host([end-of-range]) .day-wrapper{border-start-end-radius:40%;border-end-end-radius:40%}:host([start-of-range]) :not(.calcite--rtl) .day-wrapper{box-shadow:inset 4px 0 var(--calcite-ui-foreground-1)}:host([start-of-range]) .calcite--rtl .day-wrapper{box-shadow:inset -4px 0 var(--calcite-ui-foreground-1)}:host([start-of-range]) .day{opacity:1}:host([end-of-range]) :not(.calcite--rtl) .day-wrapper{box-shadow:inset -4px 0 var(--calcite-ui-foreground-1)}:host([end-of-range]) .calcite--rtl .day-wrapper{box-shadow:inset 4px 0 var(--calcite-ui-foreground-1)}:host([end-of-range]) .day{opacity:1}:host([start-of-range]:not(:focus)) :not(.calcite--rtl) .day,:host([end-of-range]:not(:focus)) :not(.calcite--rtl) .day{box-shadow:0 0 0 2px var(--calcite-ui-foreground-1)}:host([start-of-range]:not(:focus)) .calcite--rtl .day,:host([end-of-range]:not(:focus)) .calcite--rtl .day{box-shadow:0 0 0 2px var(--calcite-ui-foreground-1)}:host([start-of-range][scale=l]) :not(.calcite--rtl) .day-wrapper{box-shadow:inset 8px 0 var(--calcite-ui-foreground-1)}:host([start-of-range][scale=l]) .calcite--rtl .day-wrapper{box-shadow:inset -8px 0 var(--calcite-ui-foreground-1)}:host([end-of-range][scale=l]) :not(.calcite--rtl) .day-wrapper{box-shadow:inset -8px 0 var(--calcite-ui-foreground-1)}:host([end-of-range][scale=l]) .calcite--rtl .day-wrapper{box-shadow:inset 8px 0 var(--calcite-ui-foreground-1)}:host([highlighted]) .day-wrapper{background-color:var(--calcite-ui-foreground-current)}:host([highlighted]) .day-wrapper .day{color:var(--calcite-ui-text-1)}:host([highlighted]:not([active]:focus)) .day{color:var(--calcite-ui-text-1)}:host([range-hover]:not([selected])) .day-wrapper{background-color:var(--calcite-ui-foreground-2)}:host([range-hover]:not([selected])) .day{border-radius:0px}:host([start-of-range][range-hover]) :not(.calcite--rtl) .day-wrapper{background-image:linear-gradient(to left, var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-2));border-radius:0px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([start-of-range][range-hover]) .calcite--rtl .day-wrapper{background-image:linear-gradient(to right, var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-2));border-radius:0px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([end-of-range][range-hover]) :not(.calcite--rtl) .day-wrapper{background-image:linear-gradient(to right, var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-2));border-radius:0px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([end-of-range][range-hover]) .calcite--rtl .day-wrapper{background-image:linear-gradient(to left, var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-2));border-radius:0px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host(:hover[end-of-range][range-hover]) :not(.calcite--rtl) .day-wrapper,:host(:hover[start-of-range][range-hover]) .calcite--rtl .day-wrapper{background-image:linear-gradient(to right, var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-1), var(--calcite-ui-foreground-1));border-radius:0px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host(:hover[start-of-range][range-hover]) :not(.calcite--rtl) .day-wrapper,:host(:hover[end-of-range][range-hover]) .calcite--rtl .day-wrapper{background-image:linear-gradient(to left, var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-1), var(--calcite-ui-foreground-1));border-radius:0px;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host(:hover[range-hover]:not([selected]).focused--start) :not(.calcite--rtl) .day-wrapper{background-image:linear-gradient(to right, var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-2))}:host(:hover[range-hover]:not([selected]).focused--start) .calcite--rtl .day-wrapper{background-image:linear-gradient(to right, var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-current))}:host(:hover[range-hover]:not([selected]).focused--start) .day{border-radius:9999px;opacity:1;box-shadow:0 0 0 2px var(--calcite-ui-foreground-1)}:host(:hover[range-hover]:not([selected]).focused--end) :not(.calcite--rtl) .day-wrapper{background-image:linear-gradient(to right, var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-current))}:host(:hover[range-hover]:not([selected]).focused--end) .calcite--rtl .day-wrapper{background-image:linear-gradient(to right, var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-current), var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-2))}:host(:hover[range-hover]:not([selected]).focused--end) .day{border-radius:9999px;opacity:1;box-shadow:0 0 0 2px var(--calcite-ui-foreground-1)}:host(:hover[range-hover]:not([selected]).focused--start.hover--outside-range) :not(.calcite--rtl) .day-wrapper,:host(:hover[range-hover]:not([selected]).focused--end.hover--outside-range) .calcite--rtl .day-wrapper{background-image:linear-gradient(to right, var(--calcite-ui-foreground-1), var(--calcite-ui-foreground-1), var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-2))}:host(:hover[range-hover]:not([selected]).focused--start.hover--outside-range) :not(.calcite--rtl) .day,:host(:hover[range-hover]:not([selected]).focused--end.hover--outside-range) .calcite--rtl .day{border-radius:9999px;opacity:1;box-shadow:0 0 0 2px var(--calcite-ui-foreground-1)}:host(:hover[range-hover]:not([selected]).focused--end.hover--outside-range) :not(.calcite--rtl) .day-wrapper,:host(:hover[range-hover]:not([selected]).focused--start.hover--outside-range) .calcite--rtl .day-wrapper{background-image:linear-gradient(to right, var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-2), var(--calcite-ui-foreground-1), var(--calcite-ui-foreground-1))}:host(:hover[range-hover]:not([selected]).focused--end.hover--outside-range) :not(.calcite--rtl) .day,:host(:hover[range-hover]:not([selected]).focused--start.hover--outside-range) .calcite--rtl .day{border-radius:9999px;opacity:1;box-shadow:0 0 0 2px var(--calcite-ui-foreground-1)}:host(:hover[start-of-range].hover--inside-range.focused--end) .day-wrapper,:host(:hover[end-of-range].hover--inside-range.focused--start) .day-wrapper{background-image:none}:host([start-of-range].hover--inside-range.focused--end) .day-wrapper,:host([end-of-range].hover--inside-range.focused--start) .day-wrapper{background-color:var(--calcite-ui-foreground-2)}:host([highlighted]:last-child) :not(.calcite--rtl) .day-wrapper,:host([range-hover]:last-child) :not(.calcite--rtl) .day-wrapper,:host([highlighted]:first-child) .calcite--rtl .day-wrapper,:host([range-hover]:first-child) .calcite--rtl .day-wrapper{box-shadow:inset -4px 0px 0px 0px var(--calcite-ui-foreground-1)}:host([highlighted]:first-child) :not(.calcite--rtl) .day-wrapper,:host([range-hover]:first-child) :not(.calcite--rtl) .day-wrapper,:host([highlighted]:last-child) .calcite--rtl .day-wrapper,:host([range-hover]:last-child) .calcite--rtl .day-wrapper{box-shadow:inset 4px 0px 0px 0px var(--calcite-ui-foreground-1)}:host([scale=s][highlighted]:last-child) :not(.calcite--rtl) .day-wrapper,:host([scale=s][range-hover]:last-child) :not(.calcite--rtl) .day-wrapper,:host([scale=s][highlighted]:first-child) .calcite--rtl .day-wrapper,:host([scale=s][range-hover]:first-child) .calcite--rtl .day-wrapper{box-shadow:inset -1px 0px 0px 0px var(--calcite-ui-foreground-1)}:host([scale=s][highlighted]:first-child) :not(.calcite--rtl) .day-wrapper,:host([scale=s][range-hover]:first-child) :not(.calcite--rtl) .day-wrapper,:host([scale=s][highlighted]:last-child) .calcite--rtl .day-wrapper,:host([scale=s][range-hover]:last-child) .calcite--rtl .day-wrapper{box-shadow:inset 1px 0px 0px 0px var(--calcite-ui-foreground-1)}:host([scale=l][highlighted]:first-child) :not(.calcite--rtl) .day-wrapper,:host([scale=l][range-hover]:first-child) :not(.calcite--rtl) .day-wrapper,:host([scale=l][highlighted]:last-child) .calcite--rtl .day-wrapper,:host([scale=l][range-hover]:last-child) .calcite--rtl .day-wrapper{box-shadow:inset 6px 0px 0px 0px var(--calcite-ui-foreground-1)}:host([highlighted]:first-child) .day-wrapper,:host([range-hover]:first-child) .day-wrapper{border-start-start-radius:45%;border-end-start-radius:45%}:host([highlighted]:last-child) .day-wrapper,:host([range-hover]:last-child) .day-wrapper{border-start-end-radius:45%;border-end-end-radius:45%}:host([scale=l][highlighted]:last-child) :not(.calcite--rtl) .day-wrapper,:host([scale=l][range-hover]:last-child) :not(.calcite--rtl) .day-wrapper,:host([scale=l][highlighted]:first-child) .calcite--rtl .day-wrapper,:host([scale=l][range-hover]:first-child) .calcite--rtl .day-wrapper{box-shadow:inset -6px 0px 0px 0px var(--calcite-ui-foreground-1)}@media (forced-colors: active){:host(:hover:not([disabled])) .day,:host([active]:not([range])) .day{border-radius:0px}:host([selected]){outline:2px solid canvasText}:host([selected]) .day{border-radius:0px;background-color:highlight}:host([range][selected]) .day-wrapper,:host([highlighted]) .day-wrapper,:host([range-hover]:not([selected])) .day-wrapper{background-color:highlight}:host([range][selected][start-of-range]) .day-wrapper,:host([range][selected][end-of-range]) .day-wrapper{background-color:canvas}}",Xpt=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDaySelect=ue(this,"calciteDaySelect",6),this.calciteInternalDayHover=ue(this,"calciteInternalDayHover",6),this.onClick=()=>{!this.disabled&&this.calciteDaySelect.emit()},this.keyDownHandler=t=>{Yu(t.key)&&(!this.disabled&&this.calciteDaySelect.emit(),t.preventDefault())},this.day=void 0,this.disabled=!1,this.currentMonth=!1,this.selected=!1,this.highlighted=!1,this.range=!1,this.startOfRange=!1,this.endOfRange=!1,this.rangeHover=!1,this.active=!1,this.scale=void 0,this.value=void 0}mouseoverHandler(){this.calciteInternalDayHover.emit()}componentWillLoad(){this.parentDatePickerEl=Qu(this.el,"calcite-date-picker")}render(){const t=Eo(this.value).replaceAll("-","");if(this.parentDatePickerEl){const{numberingSystem:n,lang:r}=this.parentDatePickerEl;Lt.numberFormatOptions={useGrouping:!1,...n&&{numberingSystem:n},...r&&{locale:r}}}const e=Lt.localize(String(this.day)),i=Kr(this.el);return I(Ft,{id:t,onClick:this.onClick,onKeyDown:this.keyDownHandler,role:"gridcell"},I("div",{class:{"day-v-wrapper":!0,[pw.rtl]:i==="rtl"}},I("div",{class:"day-wrapper"},I("span",{class:"day"},I("span",{class:"text"},e)))))}componentDidRender(){lr(this,this.isTabbable)}isTabbable(){return this.active}get el(){return this}static get style(){return Kpt}},[1,"calcite-date-picker-day",{day:[2],disabled:[516],currentMonth:[516,"current-month"],selected:[516],highlighted:[516],range:[516],startOfRange:[516,"start-of-range"],endOfRange:[516,"end-of-range"],rangeHover:[516,"range-hover"],active:[516],scale:[513],value:[16]},[[1,"pointerover","mouseoverHandler"]]]);function vL(){if(typeof customElements>"u")return;["calcite-date-picker-day"].forEach(e=>{switch(e){case"calcite-date-picker-day":customElements.get(e)||customElements.define(e,Xpt);break}})}vL();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Qpt="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}.calender{margin-block-end:0.25rem}.week-headers{display:flex;border-width:0px;border-block-start-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);padding-block:0px;padding-inline:0.25rem}.week-header{text-align:center;font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-3);inline-size:14.2857142857%}:host([scale=s]) .week-header{padding-inline:0px;padding-block:0.5rem 0.75rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]) .week-header{padding-inline:0px;padding-block:0.75rem 1rem;font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=l]) .week-header{padding-inline:0px;padding-block:1rem 1.25rem;font-size:var(--calcite-font-size--1);line-height:1rem}.week-days{display:flex;flex-direction:row;padding-block:0px;padding-inline:6px}.week-days:focus{outline:2px solid transparent;outline-offset:2px}",Dx=7,$5=6,eft=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalDatePickerSelect=ue(this,"calciteInternalDatePickerSelect",6),this.calciteInternalDatePickerHover=ue(this,"calciteInternalDatePickerHover",6),this.calciteInternalDatePickerActiveDateChange=ue(this,"calciteInternalDatePickerActiveDateChange",6),this.calciteInternalDatePickerMouseOut=ue(this,"calciteInternalDatePickerMouseOut",6),this.keyDownHandler=t=>{if(t.defaultPrevented)return;const e=this.el.dir==="rtl";switch(t.key){case"ArrowUp":t.preventDefault(),this.addDays(-7);break;case"ArrowRight":t.preventDefault(),this.addDays(e?-1:1);break;case"ArrowDown":t.preventDefault(),this.addDays(7);break;case"ArrowLeft":t.preventDefault(),this.addDays(e?1:-1);break;case"PageUp":t.preventDefault(),this.addMonths(-1);break;case"PageDown":t.preventDefault(),this.addMonths(1);break;case"Home":t.preventDefault(),this.activeDate.setDate(1),this.addDays();break;case"End":t.preventDefault(),this.activeDate.setDate(new Date(this.activeDate.getFullYear(),this.activeDate.getMonth()+1,0).getDate()),this.addDays();break;case"Enter":case" ":t.preventDefault();break;case"Tab":this.activeFocus=!1}},this.disableActiveFocus=()=>{this.activeFocus=!1},this.dayHover=t=>{const e=t.target;e.disabled?this.calciteInternalDatePickerMouseOut.emit():this.calciteInternalDatePickerHover.emit(e.value),t.stopPropagation()},this.daySelect=t=>{const e=t.target;this.calciteInternalDatePickerSelect.emit(e.value)},this.selectedDate=void 0,this.activeDate=new Date,this.startDate=void 0,this.endDate=void 0,this.min=void 0,this.max=void 0,this.scale=void 0,this.localeData=void 0,this.hoverRange=void 0}mouseoutHandler(){this.calciteInternalDatePickerMouseOut.emit()}render(){const t=this.activeDate.getMonth(),e=this.activeDate.getFullYear(),i=this.localeData.weekStart%7,{abbreviated:n,short:r,narrow:s}=this.localeData.days,o=this.scale==="s"?s||r||n:r||n||s,a=[...o.slice(i,7),...o.slice(0,i)],l=this.getCurrentMonthDays(t,e),u=this.getPreviousMonthDays(t,e,i),h=this.getNextMonthDays(t,e,i),p=[...u.map(g=>{const v=new Date(e,t-1,g);return this.renderDateDay(!1,g,v)}),...l.map(g=>{const v=new Date(e,t,g),b=Rr(v,this.activeDate);return this.renderDateDay(b,g,v,!0,!0)}),...h.map(g=>{const v=new Date(e,t+1,g);return this.renderDateDay(!1,g,v)})],f=[];for(let g=0;g<p.length;g+=7)f.push(p.slice(g,g+7));return I(Ft,{onFocusOut:this.disableActiveFocus,onKeyDown:this.keyDownHandler},I("div",{class:"calender",role:"grid"},I("div",{class:"week-headers",role:"row"},a.map(g=>I("span",{class:"week-header",role:"columnheader"},g))),f.map(g=>I("div",{class:"week-days",role:"row"},g))))}addMonths(t){const e=new Date(this.activeDate);e.setMonth(this.activeDate.getMonth()+t),this.calciteInternalDatePickerActiveDateChange.emit(ga(e,this.min,this.max)),this.activeFocus=!0}addDays(t=0){const e=new Date(this.activeDate);e.setDate(this.activeDate.getDate()+t),this.calciteInternalDatePickerActiveDateChange.emit(ga(e,this.min,this.max)),this.activeFocus=!0}getPreviousMonthDays(t,e,i){const n=new Date(e,t,0),r=n.getDate(),s=n.getDay(),o=[];if(s===(i+$5)%Dx)return o;if(s===i)return[r];for(let a=(Dx+s-i)%Dx;a>=0;a--)o.push(r-a);return o}getCurrentMonthDays(t,e){const i=new Date(e,t+1,0).getDate(),n=[];for(let r=0;r<i;r++)n.push(r+1);return n}getNextMonthDays(t,e,i){const n=new Date(e,t+1,0).getDay(),r=[];if(n===(i+$5)%Dx)return r;for(let s=0;s<($5-(n-i))%Dx;s++)r.push(s+1);return r}betweenSelectedRange(t){return!!(this.startDate&&this.endDate&&t>this.startDate&&t<this.endDate&&!this.isRangeHover(t))}isSelected(t){return!!(Rr(t,this.selectedDate)||this.startDate&&Rr(t,this.startDate)||this.endDate&&Rr(t,this.endDate))}isStartOfRange(t){return!!(this.startDate&&!Rr(this.startDate,this.endDate)&&Rr(this.startDate,t)&&!this.isEndOfRange(t))}isEndOfRange(t){return!!(this.endDate&&!Rr(this.startDate,this.endDate)&&Rr(this.endDate,t)||!this.endDate&&this.hoverRange&&Rr(this.startDate,this.hoverRange.end)&&Rr(t,this.hoverRange.end))}renderDateDay(t,e,i,n,r){var a;const s=this.isFocusedOnStart(),o=this.isHoverInRange()||!this.endDate&&this.hoverRange&&Rr((a=this.hoverRange)==null?void 0:a.end,this.startDate);return I("calcite-date-picker-day",{active:t,class:{"hover--inside-range":this.startDate&&o,"hover--outside-range":this.startDate&&!o,"focused--start":s,"focused--end":!s},currentMonth:n,day:e,disabled:!b_e(i,this.min,this.max),endOfRange:this.isEndOfRange(i),highlighted:this.betweenSelectedRange(i),key:i.toDateString(),onCalciteDaySelect:this.daySelect,onCalciteInternalDayHover:this.dayHover,range:!!this.startDate&&!!this.endDate&&!Rr(this.startDate,this.endDate),rangeHover:this.isRangeHover(i),ref:l=>{r&&t&&this.activeFocus&&(l==null||l.focus())},scale:this.scale,selected:this.isSelected(i),startOfRange:this.isStartOfRange(i),value:i})}isFocusedOnStart(){var t;return((t=this.hoverRange)==null?void 0:t.focused)==="start"}isHoverInRange(){if(!this.hoverRange)return!1;const{start:t,end:e}=this.hoverRange;return!!(!this.isFocusedOnStart()&&this.startDate&&(!this.endDate||e<this.endDate)||this.isFocusedOnStart()&&this.startDate&&t>this.startDate)}isRangeHover(t){if(!this.hoverRange)return!1;const{start:e,end:i}=this.hoverRange,n=this.isFocusedOnStart(),r=this.isHoverInRange(),s=r&&(!n&&t>this.startDate&&(t<i||Rr(t,i))||n&&t<this.endDate&&(t>e||Rr(t,e))),o=!r&&(!n&&t>=this.endDate&&(t<i||Rr(t,i))||n&&(this.startDate&&t<this.startDate||this.endDate&&Rr(t,this.startDate))&&(e&&t>e||Rr(t,e)));return s||o}get el(){return this}static get style(){return Qpt}},[1,"calcite-date-picker-month",{selectedDate:[16],activeDate:[16],startDate:[16],endDate:[16],min:[16],max:[16],scale:[513],localeData:[16],hoverRange:[16]},[[1,"pointerout","mouseoutHandler"]]]);function GH(){if(typeof customElements>"u")return;["calcite-date-picker-month","calcite-date-picker-day"].forEach(e=>{switch(e){case"calcite-date-picker-month":customElements.get(e)||customElements.define(e,eft);break;case"calcite-date-picker-day":customElements.get(e)||vL();break}})}GH();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Hie=543,gp={header:"header",month:"month",chevron:"chevron",suffix:"suffix",yearSuffix:"year--suffix",yearWrap:"year-wrap",textReverse:"text--reverse"},Gie={chevronLeft:"chevron-left",chevronRight:"chevron-right"},tft="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{display:block}.header{display:flex;justify-content:space-between;padding-block:0px;padding-inline:0.25rem}:host([scale=s]) .text{margin-block:0.5rem;font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=s]) .chevron{block-size:2.25rem}:host([scale=m]) .text{margin-block:0.75rem;font-size:var(--calcite-font-size-0);line-height:1.25rem}:host([scale=m]) .chevron{block-size:3rem}:host([scale=l]) .text{margin-block:1rem;font-size:var(--calcite-font-size-1);line-height:1.5rem}:host([scale=l]) .chevron{block-size:3.5rem}.chevron{margin-inline:-0.25rem;box-sizing:content-box;display:flex;flex-grow:0;cursor:pointer;align-items:center;justify-content:center;border-style:none;background-color:var(--calcite-ui-foreground-1);padding-inline:0.25rem;color:var(--calcite-ui-text-3);outline:2px solid transparent;outline-offset:2px;outline-color:transparent;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;inline-size:14.2857142857%}.chevron:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.chevron:hover,.chevron:focus{background-color:var(--calcite-ui-foreground-2);fill:var(--calcite-ui-text-1);color:var(--calcite-ui-text-1)}.chevron:active{background-color:var(--calcite-ui-foreground-3)}.chevron[aria-disabled=true]{pointer-events:none;opacity:0}.text{margin-block:auto;display:flex;inline-size:100%;flex:1 1 auto;align-items:center;justify-content:center;text-align:center;line-height:1}.text--reverse{flex-direction:row-reverse}.month,.year,.suffix{margin-inline:0.25rem;margin-block:auto;display:inline-block;background-color:var(--calcite-ui-foreground-1);font-weight:var(--calcite-font-weight-medium);line-height:1.25;color:var(--calcite-ui-text-1);font-size:inherit}.year{position:relative;inline-size:2.5rem;border-style:none;background-color:transparent;text-align:center;font-family:inherit;outline-color:transparent}.year:hover{transition-duration:100ms;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-property:outline-color;outline:2px solid var(--calcite-ui-border-2);outline-offset:2px}.year:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.year--suffix{text-align:start}.year-wrap{position:relative}.suffix{inset-block-start:0px;white-space:nowrap;text-align:start;inset-inline-start:0}",ift=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInternalDatePickerSelect=ue(this,"calciteInternalDatePickerSelect",6),this.onYearKey=t=>{const e=this.parseCalendarYear(t.target.value);switch(t.key){case"ArrowDown":t.preventDefault(),this.setYear({localizedYear:e,offset:-1});break;case"ArrowUp":t.preventDefault(),this.setYear({localizedYear:e,offset:1});break}},this.onYearChange=t=>{this.setYear({localizedYear:this.parseCalendarYear(t.target.value)})},this.onYearInput=t=>{this.setYear({localizedYear:this.parseCalendarYear(t.target.value),commit:!1})},this.prevMonthClick=t=>{this.handleArrowClick(t,this.prevMonthDate)},this.prevMonthKeydown=t=>{Yu(t.key)&&this.prevMonthClick(t)},this.nextMonthClick=t=>{this.handleArrowClick(t,this.nextMonthDate)},this.nextMonthKeydown=t=>{Yu(t.key)&&this.nextMonthClick(t)},this.handleArrowClick=(t,e)=>{t.preventDefault(),this.calciteInternalDatePickerSelect.emit(e)},this.selectedDate=void 0,this.activeDate=void 0,this.headingLevel=void 0,this.min=void 0,this.max=void 0,this.scale=void 0,this.localeData=void 0,this.messages=void 0,this.globalAttributes={},this.nextMonthDate=void 0,this.prevMonthDate=void 0}componentWillLoad(){this.parentDatePickerEl=Qu(this.el,"calcite-date-picker")}connectedCallback(){this.setNextPrevMonthDates()}render(){return I("div",{class:gp.header},this.renderContent())}renderContent(){var f;const{messages:t,localeData:e,activeDate:i}=this;if(!i||!e)return null;if(this.parentDatePickerEl){const{numberingSystem:g,lang:v}=this.parentDatePickerEl;Lt.numberFormatOptions={useGrouping:!1,...g&&{numberingSystem:g},...v&&{locale:v}}}const n=i.getMonth(),{months:r,unitOrder:s}=e,o=(r.wide||r.narrow||r.abbreviated)[n],a=this.formatCalendarYear(i.getFullYear()),l=this.scale==="l"?"m":"s",u=w_e(s),h=u.indexOf("y")<u.indexOf("m"),p=(f=e.year)==null?void 0:f.suffix;return I($m,null,I("a",{"aria-disabled":`${this.prevMonthDate.getMonth()===n}`,"aria-label":t.prevMonth,class:gp.chevron,href:"#",onClick:this.prevMonthClick,onKeyDown:this.prevMonthKeydown,role:"button",tabindex:this.prevMonthDate.getMonth()===n?-1:0},I("calcite-icon",{"flip-rtl":!0,icon:Gie.chevronLeft,scale:l})),I("div",{class:{text:!0,[gp.textReverse]:h}},I(m2,{class:gp.month,level:this.headingLevel},o),I("span",{class:gp.yearWrap},I("input",{"aria-label":t.year,class:{year:!0,[gp.yearSuffix]:!!p},inputmode:"numeric",maxlength:"4",minlength:"1",onChange:this.onYearChange,onInput:this.onYearInput,onKeyDown:this.onYearKey,pattern:"\\d*",ref:g=>this.yearInput=g,type:"text",value:a}),p&&I("span",{class:gp.suffix},p))),I("a",{"aria-disabled":`${this.nextMonthDate.getMonth()===n}`,"aria-label":t.nextMonth,class:gp.chevron,href:"#",onClick:this.nextMonthClick,onKeyDown:this.nextMonthKeydown,role:"button",tabindex:this.nextMonthDate.getMonth()===n?-1:0},I("calcite-icon",{"flip-rtl":!0,icon:Gie.chevronRight,scale:l})))}setNextPrevMonthDates(){this.activeDate&&(this.nextMonthDate=ga(Ypt(this.activeDate),this.min,this.max),this.prevMonthDate=ga(Jpt(this.activeDate),this.min,this.max))}formatCalendarYear(t){const{localeData:e}=this,n=e["default-calendar"]==="buddhist"?Hie:0;return Lt.localize(`${t+n}`)}parseCalendarYear(t){const{localeData:e}=this,n=e["default-calendar"]==="buddhist"?Hie:0,r=Number(Lt.delocalize(t))-n;return Lt.localize(`${r}`)}getInRangeDate({localizedYear:t,offset:e=0}){const{min:i,max:n,activeDate:r}=this,s=Number(Lt.delocalize(t)),o=s.toString().length,a=isNaN(s)?!1:s+e,l=a&&(!i||i.getFullYear()<=a)&&(!n||n.getFullYear()>=a);if(a&&l&&o===t.length){const u=new Date(r);return u.setFullYear(a),ga(u,i,n)}}setYear({localizedYear:t,commit:e=!0,offset:i=0}){const{yearInput:n,activeDate:r}=this,s=this.getInRangeDate({localizedYear:t,offset:i});s&&this.calciteInternalDatePickerSelect.emit(s),e&&(n.value=this.formatCalendarYear((s||r).getFullYear()))}get el(){return this}static get watchers(){return{min:["setNextPrevMonthDates"],max:["setNextPrevMonthDates"],activeDate:["setNextPrevMonthDates"]}}static get style(){return tft}},[1,"calcite-date-picker-month-header",{selectedDate:[16],activeDate:[16],headingLevel:[2,"heading-level"],min:[16],max:[16],scale:[513],localeData:[16],messages:[1040],globalAttributes:[32],nextMonthDate:[32],prevMonthDate:[32]}]);function qH(){if(typeof customElements>"u")return;["calcite-date-picker-month-header","calcite-icon"].forEach(e=>{switch(e){case"calcite-date-picker-month-header":customElements.get(e)||customElements.define(e,ift);break;case"calcite-icon":customElements.get(e)||ni();break}})}qH();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const nft=2,A5={},M5={};async function WH(t){const e=TH(t);if(A5[e])return A5[e];M5[e]||(M5[e]=fetch(K9(`./assets/date-picker/nls/${e}.json`)).then(n=>n.json()).catch(()=>(console.error(`Translations for "${e}" not found or invalid, falling back to english`),WH("en"))));const i=await M5[e];return A5[e]=i,i}function KE(t){return t.map((e,i)=>On(e,i===1))}const rft="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:relative;display:inline-block;inline-size:100%;overflow:visible;border-radius:0px;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-1);background-color:var(--calcite-ui-foreground-1);vertical-align:top}:host([scale=s]){max-inline-size:216px}:host([scale=m]){max-inline-size:286px}:host([scale=l]){max-inline-size:398px}",sft=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteDatePickerChange=ue(this,"calciteDatePickerChange",6),this.calciteDatePickerRangeChange=ue(this,"calciteDatePickerRangeChange",6),this.keyDownHandler=t=>{t.key==="Escape"&&this.reset()},this.monthHeaderSelectChange=t=>{const e=new Date(t.detail);this.range?(this.activeRange==="end"?this.activeEndDate=e:this.activeStartDate=e,this.mostRecentRangeValue=e):this.activeDate=e},this.monthActiveDateChange=t=>{const e=new Date(t.detail);this.range?(this.activeRange==="end"?this.activeEndDate=e:this.activeStartDate=e,this.mostRecentRangeValue=e):this.activeDate=e},this.monthHoverChange=t=>{if(!this.range){this.hoverRange=void 0;return}const{valueAsDate:e}=this,i=Array.isArray(e)&&e[0],n=Array.isArray(e)&&e[1],r=new Date(t.detail);if(this.hoverRange={focused:this.activeRange||"start",start:i,end:n},this.proximitySelectionDisabled)n?this.hoverRange=void 0:r<i?this.hoverRange={focused:"start",start:r,end:i}:(this.hoverRange.end=r,this.hoverRange.focused="end");else if(n){const s=zk(r,i),o=zk(r,n);o>0?(this.hoverRange.end=r,this.hoverRange.focused="end"):s<0?(this.hoverRange.start=r,this.hoverRange.focused="start"):s>o?(this.hoverRange.start=r,this.hoverRange.focused="start"):(this.hoverRange.end=r,this.hoverRange.focused="end")}else i&&(r<i?this.hoverRange={focused:"start",start:r,end:i}:(this.hoverRange.end=r,this.hoverRange.focused="end"));t.stopPropagation()},this.monthMouseOutChange=()=>{this.hoverRange&&(this.hoverRange=void 0)},this.reset=()=>{var e,i,n,r,s;const{valueAsDate:t}=this;!Array.isArray(t)&&t&&(t==null?void 0:t.getTime())!==((e=this.activeDate)==null?void 0:e.getTime())&&(this.activeDate=new Date(t)),Array.isArray(t)&&(t[0]&&((i=t[0])==null?void 0:i.getTime())!==(this.activeStartDate instanceof Date&&((n=this.activeStartDate)==null?void 0:n.getTime()))&&(this.activeStartDate=new Date(t[0])),t[1]&&((r=t[1])==null?void 0:r.getTime())!==(this.activeStartDate instanceof Date&&((s=this.activeEndDate)==null?void 0:s.getTime()))&&(this.activeEndDate=new Date(t[1])))},this.monthDateChange=t=>{const e=new Date(t.detail),i=Eo(e);if(!this.range&&i===Eo(this.valueAsDate))return;if(!this.range){this.value=i||"",this.valueAsDate=e||null,this.activeDate=e||null,this.calciteDatePickerChange.emit();return}const n=this.getStartDate(),r=this.getEndDate();if(!n||!r&&e<n)n&&this.setEndDate(new Date(n)),this.activeRange=="end"?this.setEndDate(e):this.setStartDate(e);else if(!r)this.setEndDate(e);else if(this.proximitySelectionDisabled)this.setStartDate(e);else if(this.activeRange)this.activeRange=="end"?this.setEndDate(e):this.setStartDate(e);else{const s=zk(e,n),o=zk(e,r);o===0||s<0?this.setStartDate(e):s===0||o<0?this.setEndDate(e):s<o?this.setStartDate(e):this.setEndDate(e)}this.calciteDatePickerChange.emit()},this.activeDate=void 0,this.activeRange=void 0,this.value=void 0,this.headingLevel=void 0,this.valueAsDate=void 0,this.minAsDate=void 0,this.maxAsDate=void 0,this.min=void 0,this.max=void 0,this.numberingSystem=void 0,this.scale="m",this.range=!1,this.proximitySelectionDisabled=!1,this.messageOverrides=void 0,this.messages=void 0,this.activeStartDate=void 0,this.activeEndDate=void 0,this.startAsDate=void 0,this.endAsDate=void 0,this.effectiveLocale="",this.defaultMessages=void 0,this.localeData=void 0,this.hoverRange=void 0}activeDateWatcher(t){this.activeRange==="end"&&(this.activeEndDate=t)}valueAsDateWatcher(t){if(this.range&&Array.isArray(t)){const{activeStartDate:e,activeEndDate:i}=this,n=t[0],r=t[1];this.activeStartDate=e!==n&&n,this.activeEndDate=i!==r&&r}else t&&t!==this.activeDate&&(this.activeDate=t)}onMinChanged(t){t&&(this.minAsDate=On(t))}onMaxChanged(t){t&&(this.maxAsDate=On(t))}onMessagesChange(){}connectedCallback(){hn(this),dr(this),Array.isArray(this.value)?this.valueAsDate=KE(this.value):this.value&&(this.valueAsDate=On(this.value)),this.min&&(this.minAsDate=On(this.min)),this.max&&(this.maxAsDate=On(this.max))}disconnectedCallback(){pn(this),hr(this)}async componentWillLoad(){await this.loadLocaleData(),this.onMinChanged(this.min),this.onMaxChanged(this.max),await cr(this)}render(){var o;const t=ga(this.range&&Array.isArray(this.valueAsDate)?this.valueAsDate[0]:this.valueAsDate,this.minAsDate,this.maxAsDate);let e=this.getActiveDate(t,this.minAsDate,this.maxAsDate);const i=this.range&&Array.isArray(this.valueAsDate)?ga(this.valueAsDate[1],this.minAsDate,this.maxAsDate):null,n=this.getActiveEndDate(i,this.minAsDate,this.maxAsDate);(this.activeRange==="end"||((o=this.hoverRange)==null?void 0:o.focused)==="end"&&(!this.proximitySelectionDisabled||i))&&n&&(e=n),this.range&&this.mostRecentRangeValue&&(e=this.mostRecentRangeValue);const r=this.range&&this.activeRange?this.activeRange==="start"?this.minAsDate:t||this.minAsDate:this.minAsDate,s=this.range&&this.activeRange?this.activeRange==="start"?i||this.maxAsDate:this.maxAsDate:this.maxAsDate;return I(Ft,{onBlur:this.reset,onKeyDown:this.keyDownHandler,role:"application"},this.renderCalendar(e,s,r,t,i))}effectiveLocaleChange(){ur(this,this.effectiveLocale)}valueHandler(t){Array.isArray(t)?this.valueAsDate=KE(t):t&&(this.valueAsDate=On(t))}async loadLocaleData(){Lt.numberFormatOptions={numberingSystem:this.numberingSystem,locale:this.effectiveLocale,useGrouping:!1},this.localeData=await WH(this.effectiveLocale)}renderCalendar(t,e,i,n,r){return this.localeData&&[I("calcite-date-picker-month-header",{activeDate:t,headingLevel:this.headingLevel||nft,localeData:this.localeData,max:e,messages:this.messages,min:i,onCalciteInternalDatePickerSelect:this.monthHeaderSelectChange,scale:this.scale,selectedDate:this.activeRange==="end"?r:n||new Date}),I("calcite-date-picker-month",{activeDate:t,endDate:this.range?r:void 0,hoverRange:this.hoverRange,localeData:this.localeData,max:e,min:i,onCalciteInternalDatePickerActiveDateChange:this.monthActiveDateChange,onCalciteInternalDatePickerHover:this.monthHoverChange,onCalciteInternalDatePickerMouseOut:this.monthMouseOutChange,onCalciteInternalDatePickerSelect:this.monthDateChange,scale:this.scale,selectedDate:this.activeRange==="end"?r:n,startDate:this.range?n:void 0})]}getEndDate(){return Array.isArray(this.valueAsDate)&&this.valueAsDate[1]||void 0}setEndDate(t){const e=this.getStartDate(),i=t&&x_e(t);this.value=[Eo(e),Eo(t)],this.valueAsDate=[e,t],this.mostRecentRangeValue=i,this.calciteDatePickerRangeChange.emit(),this.activeEndDate=t||null}getStartDate(){return Array.isArray(this.valueAsDate)&&this.valueAsDate[0]}setStartDate(t){const e=this.getEndDate();this.value=[Eo(t),Eo(e)],this.valueAsDate=[t,e],this.mostRecentRangeValue=t,this.calciteDatePickerRangeChange.emit(),this.activeStartDate=t||null}getActiveDate(t,e,i){return ga(this.activeDate,e,i)||t||ga(new Date,e,i)}getActiveEndDate(t,e,i){return ga(this.activeEndDate,e,i)||t||ga(new Date,e,i)}static get delegatesFocus(){return!0}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{activeDate:["activeDateWatcher"],valueAsDate:["valueAsDateWatcher"],min:["onMinChanged"],max:["onMaxChanged"],messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange","loadLocaleData"],value:["valueHandler"]}}static get style(){return rft}},[17,"calcite-date-picker",{activeDate:[1040],activeRange:[513,"active-range"],value:[1025],headingLevel:[514,"heading-level"],valueAsDate:[1040],minAsDate:[1040],maxAsDate:[1040],min:[1537],max:[1537],numberingSystem:[513,"numbering-system"],scale:[513],range:[516],proximitySelectionDisabled:[516,"proximity-selection-disabled"],messageOverrides:[1040],messages:[1040],activeStartDate:[32],activeEndDate:[32],startAsDate:[32],endAsDate:[32],effectiveLocale:[32],defaultMessages:[32],localeData:[32],hoverRange:[32]}]);function S_e(){if(typeof customElements>"u")return;["calcite-date-picker","calcite-date-picker-day","calcite-date-picker-month","calcite-date-picker-month-header","calcite-icon"].forEach(e=>{switch(e){case"calcite-date-picker":customElements.get(e)||customElements.define(e,sft);break;case"calcite-date-picker-day":customElements.get(e)||vL();break;case"calcite-date-picker-month":customElements.get(e)||GH();break;case"calcite-date-picker-month-header":customElements.get(e)||qH();break;case"calcite-icon":customElements.get(e)||ni();break}})}S_e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const qie={menu:"menu-container",menuActive:"menu-container--active"},oft="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{--calcite-icon-size:1rem;--calcite-spacing-eighth:0.125rem;--calcite-spacing-quarter:0.25rem;--calcite-spacing-half:0.5rem;--calcite-spacing-three-quarters:0.75rem;--calcite-spacing:1rem;--calcite-spacing-plus-quarter:1.25rem;--calcite-spacing-plus-half:1.5rem;--calcite-spacing-double:2rem;--calcite-menu-min-width:10rem;--calcite-header-min-height:3rem;--calcite-footer-min-height:3rem}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{position:relative;display:inline-block;inline-size:100%;overflow:visible;vertical-align:top;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host .menu-container .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:1;border-radius:0.25rem}:host .menu-container[data-placement^=bottom] .calcite-floating-ui-anim{transform:translateY(-5px)}:host .menu-container[data-placement^=top] .calcite-floating-ui-anim{transform:translateY(5px)}:host .menu-container[data-placement^=left] .calcite-floating-ui-anim{transform:translateX(5px)}:host .menu-container[data-placement^=right] .calcite-floating-ui-anim{transform:translateX(-5px)}:host .menu-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.calendar-picker-wrapper{position:static;inline-size:100%;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transform:translate3d(0, 0, 0)}.input-wrapper{position:relative}:host([range]) .input-container{display:flex}:host([range]) .input-wrapper{flex:1 1 auto}:host([range]) .horizontal-arrow-container{display:flex;align-items:center;border-width:1px;border-inline-start-width:0px;border-inline-end-width:0px;border-style:solid;border-color:var(--calcite-ui-border-input);background-color:var(--calcite-ui-background);padding-block:0px;padding-inline:0.25rem}:host([range][layout=vertical]) .input-wrapper{inline-size:100%}:host([range][layout=vertical]) .input-container{flex-direction:column;align-items:flex-start}:host([range][layout=vertical]) .calendar-picker-wrapper--end{transform:translate3d(0, 0, 0)}:host([range][layout=vertical]) .vertical-arrow-container{inset-block-start:1.5rem;position:absolute;z-index:1;margin-inline:1px;background-color:var(--calcite-ui-foreground-1);padding-inline:0.625rem;inset-inline-start:0}:host([scale=s][range]:not([layout=vertical])) .calendar-picker-wrapper{inline-size:216px}:host([scale=m][range]:not([layout=vertical])) .calendar-picker-wrapper{inline-size:286px}:host([scale=l][range]:not([layout=vertical])) .calendar-picker-wrapper{inline-size:398px}.menu-container{--calcite-floating-ui-z-index:600;display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index);visibility:hidden}.menu-container .calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:1;border-radius:0.25rem}.menu-container[data-placement^=bottom] .calcite-floating-ui-anim{transform:translateY(-5px)}.menu-container[data-placement^=top] .calcite-floating-ui-anim{transform:translateY(5px)}.menu-container[data-placement^=left] .calcite-floating-ui-anim{transform:translateX(5px)}.menu-container[data-placement^=right] .calcite-floating-ui-anim{transform:translateX(-5px)}.menu-container[data-placement] .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([open]) .menu-container{visibility:visible}.menu-container--active{visibility:visible}.input .calcite-input__wrapper{margin-block-start:0px}:host([range][layout=vertical][scale=m]) .vertical-arrow-container{inset-block-start:1.5rem;padding-inline-start:0.75rem}:host([range][layout=vertical][scale=m]) .vertical-arrow-container calcite-icon{block-size:0.75rem;inline-size:0.75rem;min-inline-size:0px}:host([range][layout=vertical][scale=l]) .vertical-arrow-container{inset-block-start:2.25rem;padding-inline:0.875rem}:host([range][layout=vertical][open]) .vertical-arrow-container{display:none}::slotted(input[slot=hidden-form-input]){margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;inset:0 !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}",aft=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteInputDatePickerChange=ue(this,"calciteInputDatePickerChange",6),this.calciteInputDatePickerBeforeClose=ue(this,"calciteInputDatePickerBeforeClose",6),this.calciteInputDatePickerClose=ue(this,"calciteInputDatePickerClose",6),this.calciteInputDatePickerBeforeOpen=ue(this,"calciteInputDatePickerBeforeOpen",6),this.calciteInputDatePickerOpen=ue(this,"calciteInputDatePickerOpen",6),this.calciteInternalInputInputHandler=t=>{const e=t.target,i=e.value,n=this.parseNumerals(i),r=this.formatNumerals(n);e.value=r;const{year:s}=__e(i,this.localeData);if(s&&s.length<4)return;const o=Bie(i,this.localeData);b_e(o,this.min,this.max)&&(this.datePickerActiveDate=o)},this.calciteInternalInputBlurHandler=()=>{this.commitValue()},this.userChangedValue=!1,this.openTransitionProp="opacity",this.valueAsDateChangedExternally=!1,this.setFilteredPlacements=()=>{const{el:t,flipPlacements:e}=this;this.filteredFlipPlacements=e?pL(e,t):null},this.setTransitionEl=t=>{this.transitionEl=t,Cl(this)},this.setStartInput=t=>{this.startInput=t},this.setEndInput=t=>{this.endInput=t},this.deactivate=()=>{this.open=!1},this.keyDownHandler=t=>{var n,r;const{defaultPrevented:e,key:i}=t;i==="Enter"&&!e?(this.commitValue(),this.shouldFocusRangeEnd()?(n=this.endInput)==null||n.setFocus():this.shouldFocusRangeStart()&&((r=this.startInput)==null||r.setFocus()),gL(this)&&t.preventDefault()):i==="Escape"&&!e&&(this.open=!1,t.preventDefault())},this.startInputFocus=()=>{this.readOnly||(this.open=!0),this.focusedInput="start"},this.endInputFocus=()=>{this.readOnly||(this.open=!0),this.focusedInput="end"},this.setFloatingEl=t=>{t&&(this.floatingEl=t,mm(this,this.referenceEl,this.floatingEl))},this.setStartWrapper=t=>{this.startWrapper=t,this.setReferenceEl()},this.setEndWrapper=t=>{this.endWrapper=t,this.setReferenceEl()},this.handleDateChange=t=>{this.range||(t.stopPropagation(),this.setValue(t.target.valueAsDate),this.localizeInputValues())},this.handleDateRangeChange=t=>{var i,n;if(!this.range)return;t.stopPropagation();const e=t.target.valueAsDate;this.setRangeValue(e),this.localizeInputValues(),this.shouldFocusRangeEnd()?(i=this.endInput)==null||i.setFocus():this.shouldFocusRangeStart()&&((n=this.startInput)==null||n.setFocus())},this.setInputValue=(t,e="start")=>{const i=this[`${e}Input`];i&&(i.value=t)},this.setRangeValue=t=>{if(!this.range)return;const{value:e}=this,i=Array.isArray(e),n=Array.isArray(t),r=n?t[0]:null,s=n?Eo(r):"",o=n?t[1]:null,a=n?Eo(o):"",l=s||a?[s,a]:"";if(l===e)return;this.userChangedValue=!0,this.value=l,this.valueAsDate=l?KE(l):void 0;const u=this.calciteInputDatePickerChange.emit();u&&u.defaultPrevented&&(this.value=e,i?(this.setInputValue(e[0],"start"),this.setInputValue(e[1],"end")):(this.value=e,this.setInputValue(e)))},this.setValue=t=>{if(this.range)return;const e=this.value,i=Eo(t);if(i===e)return;this.userChangedValue=!0,this.valueAsDate=i?On(i):void 0,this.value=i||"",this.calciteInputDatePickerChange.emit().defaultPrevented&&(this.value=e,this.setInputValue(e))},this.commonDateSeparators=[".","-","/"],this.formatNumerals=t=>t?t.split("").map(e=>{var i,n,r;return(i=this.commonDateSeparators)!=null&&i.includes(e)?(n=this.localeData)==null?void 0:n.separator:Wy!=null&&Wy.includes(e)?(r=Lt==null?void 0:Lt.numberFormatter)==null?void 0:r.format(Number(e)):e}).join(""):"",this.parseNumerals=t=>t?t.split("").map(e=>Wy.includes(e)?Lt.delocalize(e):e).join(""):"",this.disabled=!1,this.readOnly=!1,this.value="",this.flipPlacements=void 0,this.headingLevel=void 0,this.valueAsDate=void 0,this.minAsDate=void 0,this.maxAsDate=void 0,this.min=void 0,this.max=void 0,this.open=!1,this.name=void 0,this.numberingSystem=void 0,this.scale="m",this.placement=RH,this.range=!1,this.required=!1,this.overlayPositioning="absolute",this.proximitySelectionDisabled=!1,this.layout="horizontal",this.messageOverrides=void 0,this.datePickerActiveDate=void 0,this.effectiveLocale="",this.focusedInput="start",this.globalAttributes={},this.localeData=void 0}handleDisabledAndReadOnlyChange(t){t||(this.open=!1)}valueWatcher(t){if(!this.userChangedValue){let e;Array.isArray(t)?e=KE(t):t?e=On(t):e=void 0,!this.valueAsDateChangedExternally&&e!==this.valueAsDate&&(this.valueAsDate=e),this.localizeInputValues()}this.userChangedValue=!1}valueAsDateWatcher(t){this.datePickerActiveDate=t;const e=this.range&&Array.isArray(t)?[Eo(t[0]),Eo(t[1])]:Eo(t);this.value!==e&&(this.valueAsDateChangedExternally=!0,this.value=e,this.valueAsDateChangedExternally=!1)}flipPlacementsHandler(){this.setFilteredPlacements(),this.reposition(!0)}onMinChanged(t){t&&(this.minAsDate=On(t))}onMaxChanged(t){t&&(this.maxAsDate=On(t))}openHandler(t){if(this.disabled||this.readOnly){t||P0(this.floatingEl),this.open=!1;return}t?this.reposition(!0):P0(this.floatingEl)}overlayPositioningHandler(){this.reposition(!0)}calciteDaySelectHandler(){this.shouldFocusRangeStart()||this.shouldFocusRangeEnd()||(this.open=!1)}async setFocus(){await Hi(this),this.el.focus()}async reposition(t=!1){const{floatingEl:e,referenceEl:i,placement:n,overlayPositioning:r,filteredFlipPlacements:s}=this;return f2(this,{floatingEl:e,referenceEl:i,overlayPositioning:r,placement:n,flipPlacements:s,type:"menu"},t)}connectedCallback(){hn(this);const{open:t}=this;if(t&&this.openHandler(t),Array.isArray(this.value))this.valueAsDate=KE(this.value);else if(this.value)try{this.valueAsDate=On(this.value)}catch{this.warnAboutInvalidValue(this.value),this.value=""}else this.range&&this.valueAsDate&&this.setRangeValue(this.valueAsDate);this.min&&(this.minAsDate=On(this.min)),this.max&&(this.maxAsDate=On(this.max)),id(this),Rm(this),Cl(this),this.setFilteredPlacements(),this.reposition(!0),Lt.numberFormatOptions={numberingSystem:this.numberingSystem,locale:this.effectiveLocale,useGrouping:!1}}async componentWillLoad(){Ui(this),await this.loadLocaleData(),this.onMinChanged(this.min),this.onMaxChanged(this.max)}componentDidLoad(){Bi(this),this.localizeInputValues(),this.reposition(!0)}disconnectedCallback(){qh(this),Lm(this),x1(this,this.referenceEl,this.floatingEl),q0(this),pn(this)}componentDidRender(){lr(this)}render(){var r,s;const{disabled:t,effectiveLocale:e,numberingSystem:i,readOnly:n}=this;return Lt.numberFormatOptions={numberingSystem:i,locale:e,useGrouping:!1},I(Ft,{onBlur:this.deactivate,onKeyDown:this.keyDownHandler,role:"application"},this.localeData&&I("div",{"aria-expanded":Vi(this.open),class:"input-container",role:"application"},I("div",{class:"input-wrapper",ref:this.setStartWrapper},I("calcite-input",{class:`input ${this.layout==="vertical"&&this.range?"no-bottom-border":""}`,disabled:t,icon:"calendar",label:Vc(this),"number-button-type":"none",numberingSystem:i,onCalciteInputInput:this.calciteInternalInputInputHandler,onCalciteInternalInputBlur:this.calciteInternalInputBlurHandler,onCalciteInternalInputFocus:this.startInputFocus,placeholder:(r=this.localeData)==null?void 0:r.placeholder,readOnly:n,ref:this.setStartInput,scale:this.scale,type:"text"})),I("div",{"aria-hidden":Vi(!this.open),class:{[qie.menu]:!0,[qie.menuActive]:this.open},ref:this.setFloatingEl},I("div",{class:{["calendar-picker-wrapper"]:!0,["calendar-picker-wrapper--end"]:this.focusedInput==="end",[jc.animation]:!0,[jc.animationActive]:this.open},ref:this.setTransitionEl},I("calcite-date-picker",{activeDate:this.datePickerActiveDate,activeRange:this.focusedInput,headingLevel:this.headingLevel,max:this.max,maxAsDate:this.maxAsDate,messageOverrides:this.messageOverrides,min:this.min,minAsDate:this.minAsDate,numberingSystem:i,onCalciteDatePickerChange:this.handleDateChange,onCalciteDatePickerRangeChange:this.handleDateRangeChange,proximitySelectionDisabled:this.proximitySelectionDisabled,range:this.range,scale:this.scale,tabIndex:0,valueAsDate:this.valueAsDate}))),this.range&&this.layout==="horizontal"&&I("div",{class:"horizontal-arrow-container"},I("calcite-icon",{flipRtl:!0,icon:"arrow-right",scale:this.scale==="l"?"m":"s"})),this.range&&this.layout==="vertical"&&this.scale!=="s"&&I("div",{class:"vertical-arrow-container"},I("calcite-icon",{icon:"arrow-down",scale:this.scale==="l"?"m":"s"})),this.range&&I("div",{class:"input-wrapper",ref:this.setEndWrapper},I("calcite-input",{class:{input:!0,"border-top-color-one":this.layout==="vertical"&&this.range},disabled:t,icon:"calendar","number-button-type":"none",numberingSystem:i,onCalciteInputInput:this.calciteInternalInputInputHandler,onCalciteInternalInputBlur:this.calciteInternalInputBlurHandler,onCalciteInternalInputFocus:this.endInputFocus,placeholder:(s=this.localeData)==null?void 0:s.placeholder,readOnly:n,ref:this.setEndInput,scale:this.scale,type:"text"}))),I(Dm,{component:this}))}setReferenceEl(){const{focusedInput:t,layout:e,endWrapper:i,startWrapper:n}=this;this.referenceEl=t==="end"||e==="vertical"?i||n:n||i,mm(this,this.referenceEl,this.floatingEl)}onLabelClick(){this.setFocus()}onBeforeOpen(){this.calciteInputDatePickerBeforeOpen.emit()}onOpen(){this.calciteInputDatePickerOpen.emit()}onBeforeClose(){this.calciteInputDatePickerBeforeClose.emit()}onClose(){this.calciteInputDatePickerClose.emit()}commitValue(){const{focusedInput:t,value:e}=this,i=`${t}Input`,n=this[i].value,r=Bie(n,this.localeData),s=Eo(r),o=Array.isArray(e);if(this.range){const a=t==="start"?0:1;if(o){if(s===e[a])return;r?(this.setRangeValue([t==="start"?r:On(e[0]),t==="end"?r:On(e[1])]),this.localizeInputValues()):this.setRangeValue([t==="end"&&On(e[0]),t==="start"&&On(e[1])])}else r&&(this.setRangeValue([t==="start"?r:On(e[0]),t==="end"?r:On(e[1])]),this.localizeInputValues())}else{if(s===e)return;this.setValue(r),this.localizeInputValues()}}async loadLocaleData(){Lt.numberFormatOptions={numberingSystem:this.numberingSystem,locale:this.effectiveLocale,useGrouping:!1},this.localeData=await WH(this.effectiveLocale),this.localizeInputValues()}shouldFocusRangeStart(){const t=this.value[0]||void 0;return!!((this.value[1]||void 0)&&!t&&this.focusedInput==="end"&&this.startInput)}shouldFocusRangeEnd(){const t=this.value[0]||void 0,e=this.value[1]||void 0;return!!(t&&!e&&this.focusedInput==="start"&&this.endInput)}localizeInputValues(){const t=ga(this.range?Array.isArray(this.valueAsDate)&&this.valueAsDate[0]||void 0:this.valueAsDate,this.minAsDate,this.maxAsDate),e=this.range?ga(Array.isArray(this.valueAsDate)&&this.valueAsDate[1]||void 0,this.minAsDate,this.maxAsDate):null,i=t&&this.formatNumerals(t.toLocaleDateString(this.effectiveLocale)),n=e&&this.formatNumerals(e.toLocaleDateString(this.effectiveLocale));i&&this.setInputValue(i,"start"),this.range&&n&&this.setInputValue(n,"end")}warnAboutInvalidValue(t){console.warn(`The specified value "${t}" does not conform to the required format, "YYYY-MM-DD".`)}static get delegatesFocus(){return!0}get el(){return this}static get watchers(){return{disabled:["handleDisabledAndReadOnlyChange"],readOnly:["handleDisabledAndReadOnlyChange"],value:["valueWatcher"],valueAsDate:["valueAsDateWatcher"],flipPlacements:["flipPlacementsHandler"],min:["onMinChanged"],max:["onMaxChanged"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],layout:["setReferenceEl"],focusedInput:["setReferenceEl"],effectiveLocale:["loadLocaleData"]}}static get style(){return oft}},[17,"calcite-input-date-picker",{disabled:[516],readOnly:[516,"read-only"],value:[1025],flipPlacements:[16],headingLevel:[514,"heading-level"],valueAsDate:[1040],minAsDate:[1040],maxAsDate:[1040],min:[1025],max:[1025],open:[1540],name:[513],numberingSystem:[513,"numbering-system"],scale:[513],placement:[513],range:[516],required:[516],overlayPositioning:[513,"overlay-positioning"],proximitySelectionDisabled:[4,"proximity-selection-disabled"],layout:[513],messageOverrides:[1040],datePickerActiveDate:[32],effectiveLocale:[32],focusedInput:[32],globalAttributes:[32],localeData:[32],setFocus:[64],reposition:[64]},[[0,"calciteDaySelect","calciteDaySelectHandler"]]]);function lft(){if(typeof customElements>"u")return;["calcite-input-date-picker","calcite-date-picker","calcite-date-picker-day","calcite-date-picker-month","calcite-date-picker-month-header","calcite-icon","calcite-input","calcite-progress"].forEach(e=>{switch(e){case"calcite-input-date-picker":customElements.get(e)||customElements.define(e,aft);break;case"calcite-date-picker":customElements.get(e)||S_e();break;case"calcite-date-picker-day":customElements.get(e)||vL();break;case"calcite-date-picker-month":customElements.get(e)||GH();break;case"calcite-date-picker-month-header":customElements.get(e)||qH();break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-input":customElements.get(e)||yL();break;case"calcite-progress":customElements.get(e)||y2();break}})}lft();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const jl={header:"header",heading:"heading",close:"close",container:"container",tipContainer:"tip-container",tipContainerAdvancing:"tip-container--advancing",tipContainerRetreating:"tip-container--retreating",pagination:"pagination",pagePosition:"page-position",pageNext:"page-next",pagePrevious:"page-previous"},Fx={chevronLeft:"chevron-left",chevronRight:"chevron-right",close:"x"},cft="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{box-sizing:border-box;display:block;background-color:var(--calcite-ui-foreground-1);font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-ui-text-2);--calcite-tip-manager-height:19vh}:host *{box-sizing:border-box}:host([closed]){display:none}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-ui-text-2);color:var(--calcite-ui-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}.header{border-width:0px;border-block-end-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);padding-block:0px;padding-inline-end:0px;padding-inline-start:1rem}.header .heading{padding:0px;font-size:var(--calcite-font-size-1);line-height:1.5rem;font-weight:var(--calcite-font-weight-bold);color:var(--calcite-ui-text-1)}.container{position:relative;overflow:hidden;outline-color:transparent;min-block-size:150px}.container:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.tip-container{margin-block-start:1px;display:flex;align-items:flex-start;justify-content:center;overflow:auto;outline-color:transparent;animation-name:none;animation-duration:var(--calcite-animation-timing);block-size:var(--calcite-tip-manager-height)}.tip-container:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:2px}::slotted(calcite-tip){border-style:none;padding:0.75rem;max-inline-size:var(--calcite-tip-max-width)}.tip-container--advancing{animation-name:tip-advance}.tip-container--retreating{animation-name:tip-retreat}.pagination{display:flex;align-items:center;justify-content:center;padding-inline:0px;padding-block:0.75rem 0.5rem}.page-position{margin-block:0px;margin-inline:0.5rem;font-size:var(--calcite-font-size--2);line-height:1rem}@keyframes tip-advance{0%{opacity:0;transform:translate3d(50px, 0, 0) scale(0.99)}100%{opacity:1;transform:translate3d(0, 0, 0) scale(1)}}@keyframes tip-retreat{0%{opacity:0;transform:translate3d(-50px, 0, 0) scale(0.99)}100%{opacity:1;transform:translate3d(0, 0, 0) scale(1)}}",uft=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTipManagerClose=ue(this,"calciteTipManagerClose",6),this.mutationObserver=Pi("mutation",()=>this.setUpTips()),this.hideTipManager=()=>{this.closed=!0,this.calciteTipManagerClose.emit()},this.previousClicked=()=>{this.previousTip()},this.nextClicked=()=>{this.nextTip()},this.tipManagerKeyDownHandler=t=>{if(t.target===this.container)switch(t.key){case"ArrowRight":t.preventDefault(),this.nextTip();break;case"ArrowLeft":t.preventDefault(),this.previousTip();break;case"Home":t.preventDefault(),this.selectedIndex=0;break;case"End":t.preventDefault(),this.selectedIndex=this.total-1;break}},this.storeContainerRef=t=>{this.container=t},this.closed=!1,this.headingLevel=void 0,this.messages=void 0,this.messageOverrides=void 0,this.selectedIndex=void 0,this.tips=void 0,this.total=void 0,this.direction=void 0,this.groupTitle=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}closedChangeHandler(){this.direction=null}onMessagesChange(){}selectedChangeHandler(){this.showSelectedTip(),this.updateGroupTitle()}async effectiveLocaleChange(){await ur(this,this.effectiveLocale),this.updateGroupTitle()}connectedCallback(){var t;hn(this),dr(this),this.setUpTips(),(t=this.mutationObserver)==null||t.observe(this.el,{childList:!0,subtree:!0})}async componentWillLoad(){await cr(this),this.updateGroupTitle()}disconnectedCallback(){var t;(t=this.mutationObserver)==null||t.disconnect(),pn(this),hr(this)}async nextTip(){this.direction="advancing";const t=this.selectedIndex+1;this.selectedIndex=(t+this.total)%this.total}async previousTip(){this.direction="retreating";const t=this.selectedIndex-1;this.selectedIndex=(t+this.total)%this.total}setUpTips(){const t=Array.from(this.el.querySelectorAll("calcite-tip"));if(this.total=t.length,this.total===0)return;const e=this.el.querySelector("calcite-tip[selected]");this.tips=t,this.selectedIndex=e?t.indexOf(e):0,t.forEach(i=>{i.closeDisabled=!0}),this.showSelectedTip()}showSelectedTip(){this.tips.forEach((t,e)=>{const i=this.selectedIndex===e;t.selected=i,t.hidden=!i})}updateGroupTitle(){var t;if(this.tips){const i=this.tips[this.selectedIndex].closest("calcite-tip-group");this.groupTitle=(i==null?void 0:i.groupTitle)||((t=this.messages)==null?void 0:t.defaultGroupTitle)}}renderPagination(){const t=Kr(this.el),{selectedIndex:e,tips:i,total:n,messages:r}=this,s=r.next,o=r.previous,a=r.defaultPaginationLabel;return i.length>1?I("footer",{class:jl.pagination},I("calcite-action",{class:jl.pagePrevious,icon:t==="ltr"?Fx.chevronLeft:Fx.chevronRight,onClick:this.previousClicked,scale:"m",text:o}),I("span",{class:jl.pagePosition},`${a} ${e+1}/${n}`),I("calcite-action",{class:jl.pageNext,icon:t==="ltr"?Fx.chevronRight:Fx.chevronLeft,onClick:this.nextClicked,scale:"m",text:s})):null}render(){const{closed:t,direction:e,headingLevel:i,groupTitle:n,selectedIndex:r,messages:s,total:o}=this,a=s.close;return o===0?null:I("section",{"aria-hidden":Vi(t),class:jl.container,hidden:t,onKeyDown:this.tipManagerKeyDownHandler,ref:this.storeContainerRef,tabIndex:0},I("header",{class:jl.header},I(m2,{class:jl.heading,level:i},n),I("calcite-action",{class:jl.close,onClick:this.hideTipManager,scale:"m",text:a},I("calcite-icon",{icon:Fx.close,scale:"m"}))),I("div",{class:{[jl.tipContainer]:!0,[jl.tipContainerAdvancing]:!t&&e==="advancing",[jl.tipContainerRetreating]:!t&&e==="retreating"},key:r,tabIndex:0},I("slot",null)),this.renderPagination())}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{closed:["closedChangeHandler"],messageOverrides:["onMessagesChange"],selectedIndex:["selectedChangeHandler"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return cft}},[1,"calcite-tip-manager",{closed:[1540],headingLevel:[514,"heading-level"],messages:[1040],messageOverrides:[1040],selectedIndex:[32],tips:[32],total:[32],direction:[32],groupTitle:[32],defaultMessages:[32],effectiveLocale:[32],nextTip:[64],previousTip:[64]}]);function dft(){if(typeof customElements>"u")return;["calcite-tip-manager","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-tip-manager":customElements.get(e)||customElements.define(e,uft);break;case"calcite-action":customElements.get(e)||Gh();break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-loader":customElements.get(e)||Bo();break}})}dft();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const dg={container:"container",header:"header",heading:"heading",close:"close",imageFrame:"image-frame",content:"content",info:"info"},hft={close:"x"},Wie={thumbnail:"thumbnail"},pft="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:relative;margin:1rem;box-sizing:border-box;display:flex;flex-direction:row;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-2);background-color:var(--calcite-ui-foreground-1);font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-ui-text-2)}:host *{box-sizing:border-box}.container{inline-size:100%;padding:1rem}:host([closed]),:host([closed]) .container{display:none}:host([selected]) .container{margin:0px;border-style:none;padding:0px}.header{margin:0px;display:flex;align-content:space-between;align-items:center;fill:var(--calcite-ui-text-2);color:var(--calcite-ui-text-2)}.heading{margin:0px;padding:0px;font-weight:var(--calcite-font-weight-medium)}.header .heading{flex:1 1 auto;padding:0.5rem}.header{margin-block-end:0.5rem}.header .heading{padding:0px;font-size:var(--calcite-font-size-0);line-height:1.25rem;color:var(--calcite-ui-text-1)}.container[hidden]{display:none}.content{display:flex}.info{padding-block:0px;padding-inline:1rem;inline-size:70%}.info:only-child{inline-size:100%;padding-inline:0px}::slotted(p){margin-block-start:0px}::slotted(a){outline-color:transparent;color:var(--calcite-ui-brand)}::slotted(a:focus){outline:2px solid var(--calcite-ui-brand);outline-offset:2px}.image-frame{inline-size:25%}.image-frame img{max-inline-size:100%}::slotted(img){max-inline-size:100%}",fft=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTipDismiss=ue(this,"calciteTipDismiss",6),this.hideTip=()=>{this.closed=!0,this.calciteTipDismiss.emit()},this.closed=!1,this.closeDisabled=!1,this.heading=void 0,this.headingLevel=void 0,this.selected=!1,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}effectiveLocaleChange(){ur(this,this.effectiveLocale)}connectedCallback(){ed(this),hn(this),dr(this)}async componentWillLoad(){await cr(this)}disconnectedCallback(){td(this),pn(this),hr(this)}renderHeader(){var o;const{heading:t,headingLevel:e,el:i}=this,n=(o=i.closest("calcite-tip-manager"))==null?void 0:o.headingLevel,r=n?xct(n+1):null,s=e||r;return t?I("header",{class:dg.header},I(m2,{class:dg.heading,level:s},t)):null}renderDismissButton(){const{closeDisabled:t,hideTip:e}=this;return t?null:I("calcite-action",{class:dg.close,icon:hft.close,onClick:e,scale:"l",text:this.messages.close})}renderImageFrame(){const{el:t}=this;return Wr(t,Wie.thumbnail)?I("div",{class:dg.imageFrame,key:"thumbnail"},I("slot",{name:Wie.thumbnail})):null}renderInfoNode(){return I("div",{class:dg.info},I("slot",null))}renderContent(){return I("div",{class:dg.content},this.renderImageFrame(),this.renderInfoNode())}render(){return I($m,null,I("article",{class:dg.container},this.renderHeader(),this.renderContent()),this.renderDismissButton())}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return pft}},[1,"calcite-tip",{closed:[1540],closeDisabled:[516,"close-disabled"],heading:[1],headingLevel:[514,"heading-level"],selected:[516],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32]}]);function mft(){if(typeof customElements>"u")return;["calcite-tip","calcite-action","calcite-icon","calcite-loader"].forEach(e=>{switch(e){case"calcite-tip":customElements.get(e)||customElements.define(e,fft);break;case"calcite-action":customElements.get(e)||Gh();break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-loader":customElements.get(e)||Bo();break}})}mft();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const gft="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{box-sizing:border-box;display:block;background-color:var(--calcite-ui-foreground-1);font-size:var(--calcite-font-size--1);line-height:1rem;color:var(--calcite-ui-text-2)}::slotted(calcite-tip){margin:0px;border-style:none}:host-context(calcite-tip-manager){margin-block:0.75rem}:host-context(calcite-tip-manager) ::slotted(calcite-tip){padding:1rem}",yft=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.groupTitle=void 0}render(){return I("slot",null)}static get style(){return gft}},[1,"calcite-tip-group",{groupTitle:[1,"group-title"]}]);function vft(){if(typeof customElements>"u")return;["calcite-tip-group"].forEach(e=>{switch(e){case"calcite-tip-group":customElements.get(e)||customElements.define(e,yft);break}})}vft();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Jie={container:"container",arrow:"arrow"},bft=500,Yie="aria-describedby";function E_e(t){const{referenceElement:e}=t;return(typeof e=="string"?iB(t,{id:e}):e)||null}class _ft{constructor(){this.registeredElements=new WeakMap,this.hoverTimeout=null,this.registeredElementCount=0,this.queryTooltip=e=>{const{registeredElements:i}=this,n=e.find(r=>i.has(r));return i.get(n)},this.keyDownHandler=e=>{if(e.key==="Escape"&&!e.defaultPrevented){const{activeTooltipEl:i}=this;if(i&&i.open){this.clearHoverTimeout(),this.toggleTooltip(i,!1);const n=E_e(i);n instanceof Element&&n.contains(e.target)&&e.preventDefault()}}},this.queryHoveredTooltip=e=>{const{activeTooltipEl:i}=this;if(i&&e.includes(i)){this.clearHoverTimeout();return}const n=this.queryTooltip(e);n?this.toggleHoveredTooltip(n,!0):i&&this.toggleHoveredTooltip(i,!1)},this.pointerMoveHandler=e=>{const i=e.composedPath();this.clearHoverTimeout(),this.hoverTimeout=window.setTimeout(()=>this.queryHoveredTooltip(i),bft)},this.pointerDownHandler=e=>{if(!Lo(e))return;const i=this.queryTooltip(e.composedPath());this.clickedTooltip=i,i!=null&&i.closeOnClick&&(this.toggleTooltip(i,!1),this.clearHoverTimeout())},this.focusInHandler=e=>{this.queryFocusedTooltip(e,!0)},this.focusOutHandler=e=>{this.queryFocusedTooltip(e,!1)},this.toggleHoveredTooltip=(e,i)=>{i&&this.closeExistingTooltip(),this.toggleTooltip(e,i)}}registerElement(e,i){this.registeredElementCount++,this.registeredElements.set(e,i),this.registeredElementCount===1&&this.addListeners()}unregisterElement(e){this.registeredElements.delete(e)&&this.registeredElementCount--,this.registeredElementCount===0&&this.removeListeners()}addListeners(){document.addEventListener("keydown",this.keyDownHandler,{capture:!0}),document.addEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),document.addEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),document.addEventListener("focusin",this.focusInHandler,{capture:!0}),document.addEventListener("focusout",this.focusOutHandler,{capture:!0})}removeListeners(){document.removeEventListener("keydown",this.keyDownHandler,{capture:!0}),document.removeEventListener("pointermove",this.pointerMoveHandler,{capture:!0}),document.removeEventListener("pointerdown",this.pointerDownHandler,{capture:!0}),document.removeEventListener("focusin",this.focusInHandler,{capture:!0}),document.removeEventListener("focusout",this.focusOutHandler,{capture:!0})}clearHoverTimeout(){window.clearTimeout(this.hoverTimeout)}closeExistingTooltip(){const{activeTooltipEl:e}=this;e&&this.toggleTooltip(e,!1)}toggleFocusedTooltip(e,i){this.closeExistingTooltip(),i&&this.clearHoverTimeout(),this.toggleTooltip(e,i)}toggleTooltip(e,i){e.open=i,i&&(this.activeTooltipEl=e)}queryFocusedTooltip(e,i){const n=this.queryTooltip(e.composedPath());if(!n||n===this.clickedTooltip){this.clickedTooltip=null;return}this.toggleFocusedTooltip(n,i)}}const wft='@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{--calcite-floating-ui-z-index:var(--calcite-tooltip-z-index, 901);display:block;position:absolute;z-index:var(--calcite-floating-ui-z-index)}.calcite-floating-ui-anim{position:relative;transition:var(--calcite-floating-ui-transition);transition-property:transform, visibility, opacity;opacity:0;box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);z-index:1;border-radius:0.25rem}:host([data-placement^=bottom]) .calcite-floating-ui-anim{transform:translateY(-5px)}:host([data-placement^=top]) .calcite-floating-ui-anim{transform:translateY(5px)}:host([data-placement^=left]) .calcite-floating-ui-anim{transform:translateX(5px)}:host([data-placement^=right]) .calcite-floating-ui-anim{transform:translateX(-5px)}:host([data-placement]) .calcite-floating-ui-anim--active{opacity:1;transform:translate(0)}:host([calcite-hydrated-hidden]){visibility:hidden !important;pointer-events:none}.arrow,.arrow::before{position:absolute;inline-size:8px;block-size:8px;z-index:-1}.arrow::before{content:"";--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);transform:rotate(45deg);background:var(--calcite-ui-foreground-1)}:host([data-placement^=top]) .arrow{inset-block-end:-4px}:host([data-placement^=bottom]) .arrow{inset-block-start:-4px}:host([data-placement^=right]) .arrow,:host([data-placement^=left]) .arrow{direction:ltr;text-align:start}:host([data-placement^=left]) .arrow{inset-inline-end:-4px}:host([data-placement^=right]) .arrow{inset-inline-start:-4px}.container{position:relative;overflow:hidden;border-radius:0.25rem;background-color:var(--calcite-ui-foreground-1);padding-block:0.75rem;padding-inline:1rem;font-size:var(--calcite-font-size--2);line-height:1.375;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1);max-inline-size:20rem;max-block-size:20rem;text-align:start}.calcite-floating-ui-anim{border-radius:0.25rem;border-width:1px;border-style:solid;border-color:var(--calcite-ui-border-3);background-color:var(--calcite-ui-foreground-1)}.arrow::before{outline:1px solid var(--calcite-ui-border-3)}',Zie=new _ft,xft=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteTooltipBeforeClose=ue(this,"calciteTooltipBeforeClose",6),this.calciteTooltipClose=ue(this,"calciteTooltipClose",6),this.calciteTooltipBeforeOpen=ue(this,"calciteTooltipBeforeOpen",6),this.calciteTooltipOpen=ue(this,"calciteTooltipOpen",6),this.guid=`calcite-tooltip-${Ts()}`,this.hasLoaded=!1,this.openTransitionProp="opacity",this.setTransitionEl=t=>{this.transitionEl=t,Cl(this)},this.setUpReferenceElement=(t=!0)=>{this.removeReferences(),this.effectiveReferenceElement=E_e(this.el),mm(this,this.effectiveReferenceElement,this.el);const{el:e,referenceElement:i,effectiveReferenceElement:n}=this;t&&i&&!n&&console.warn(`${e.tagName}: reference-element id "${i}" was not found.`,{el:e}),this.addReferences()},this.getId=()=>this.el.id||this.guid,this.addReferences=()=>{const{effectiveReferenceElement:t}=this;if(!t)return;const e=this.getId();"setAttribute"in t&&t.setAttribute(Yie,e),Zie.registerElement(t,this.el)},this.removeReferences=()=>{const{effectiveReferenceElement:t}=this;t&&("removeAttribute"in t&&t.removeAttribute(Yie),Zie.unregisterElement(t))},this.closeOnClick=!1,this.label=void 0,this.offsetDistance=Ube,this.offsetSkidding=0,this.open=!1,this.overlayPositioning="absolute",this.placement="auto",this.referenceElement=void 0,this.effectiveReferenceElement=void 0}offsetDistanceOffsetHandler(){this.reposition(!0)}offsetSkiddingHandler(){this.reposition(!0)}openHandler(t){t?this.reposition(!0):P0(this.el)}overlayPositioningHandler(){this.reposition(!0)}placementHandler(){this.reposition(!0)}referenceElementHandler(){this.setUpReferenceElement()}connectedCallback(){Cl(this),this.setUpReferenceElement(this.hasLoaded)}componentDidLoad(){this.referenceElement&&!this.effectiveReferenceElement&&this.setUpReferenceElement(),this.reposition(!0),this.hasLoaded=!0}disconnectedCallback(){this.removeReferences(),x1(this,this.effectiveReferenceElement,this.el),q0(this)}async reposition(t=!1){const{el:e,effectiveReferenceElement:i,placement:n,overlayPositioning:r,offsetDistance:s,offsetSkidding:o,arrowEl:a}=this;return f2(this,{floatingEl:e,referenceEl:i,overlayPositioning:r,placement:n,offsetDistance:s,offsetSkidding:o,includeArrow:!0,arrowEl:a,type:"tooltip"},t)}onBeforeOpen(){this.calciteTooltipBeforeOpen.emit()}onOpen(){this.calciteTooltipOpen.emit()}onBeforeClose(){this.calciteTooltipBeforeClose.emit()}onClose(){this.calciteTooltipClose.emit()}render(){const{effectiveReferenceElement:t,label:e,open:i}=this,n=t&&i,r=!n;return I(Ft,{"aria-hidden":Vi(r),"aria-label":e,"aria-live":"polite","calcite-hydrated-hidden":r,id:this.getId(),role:"tooltip"},I("div",{class:{[jc.animation]:!0,[jc.animationActive]:n},ref:this.setTransitionEl},I("div",{class:Jie.arrow,ref:s=>this.arrowEl=s}),I("div",{class:Jie.container},I("slot",null))))}get el(){return this}static get watchers(){return{offsetDistance:["offsetDistanceOffsetHandler"],offsetSkidding:["offsetSkiddingHandler"],open:["openHandler"],overlayPositioning:["overlayPositioningHandler"],placement:["placementHandler"],referenceElement:["referenceElementHandler"]}}static get style(){return wft}},[1,"calcite-tooltip",{closeOnClick:[516,"close-on-click"],label:[1],offsetDistance:[514,"offset-distance"],offsetSkidding:[514,"offset-skidding"],open:[516],overlayPositioning:[513,"overlay-positioning"],placement:[513],referenceElement:[1,"reference-element"],effectiveReferenceElement:[32],reposition:[64]}]);function C_e(){if(typeof customElements>"u")return;["calcite-tooltip"].forEach(e=>{switch(e){case"calcite-tooltip":customElements.get(e)||customElements.define(e,xft);break}})}C_e();/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Sft={backButton:"back-button"},Kie={backLeft:"chevron-left",backRight:"chevron-right"},hg={headerActionsStart:"header-actions-start",headerActionsEnd:"header-actions-end",headerMenuActions:"header-menu-actions",headerContent:"header-content",fab:"fab",footer:"footer",footerActions:"footer-actions"},Eft="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:host{box-sizing:border-box;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host{position:relative;display:flex;inline-size:100%;flex:1 1 auto;overflow:hidden}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.back-button{border-width:0px;border-style:solid;border-color:var(--calcite-ui-border-3);border-inline-end-width:1px}",I_e=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteFlowItemBack=ue(this,"calciteFlowItemBack",6),this.calciteFlowItemScroll=ue(this,"calciteFlowItemScroll",6),this.calciteFlowItemClose=ue(this,"calciteFlowItemClose",6),this.handlePanelScroll=t=>{t.stopPropagation(),this.calciteFlowItemScroll.emit()},this.handlePanelClose=t=>{t.stopPropagation(),this.calciteFlowItemClose.emit()},this.backButtonClick=()=>{this.calciteFlowItemBack.emit()},this.setBackRef=t=>{this.backButtonEl=t},this.setContainerRef=t=>{this.containerEl=t},this.closable=!1,this.closed=!1,this.beforeBack=void 0,this.description=void 0,this.disabled=!1,this.heading=void 0,this.headingLevel=void 0,this.loading=!1,this.menuOpen=!1,this.messageOverrides=void 0,this.messages=void 0,this.showBackButton=!1,this.backButtonEl=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}connectedCallback(){hn(this),dr(this)}async componentWillLoad(){await cr(this),Ui(this)}componentDidRender(){lr(this)}disconnectedCallback(){pn(this),hr(this)}componentDidLoad(){Bi(this)}effectiveLocaleChange(){ur(this,this.effectiveLocale)}async setFocus(){await Hi(this);const{backButtonEl:t,containerEl:e}=this;if(t){t.setFocus();return}e==null||e.setFocus()}async scrollContentTo(t){var e;await((e=this.containerEl)==null?void 0:e.scrollContentTo(t))}renderBackButton(){const{el:t}=this,e=Kr(t)==="rtl",{showBackButton:i,backButtonClick:n,messages:r}=this,s=r.back,o=e?Kie.backRight:Kie.backLeft;return i?I("calcite-action",{"aria-label":s,class:Sft.backButton,icon:o,key:"flow-back-button",onClick:n,ref:this.setBackRef,scale:"s",slot:"header-actions-start",text:s}):null}render(){const{closable:t,closed:e,description:i,disabled:n,heading:r,headingLevel:s,loading:o,menuOpen:a,messages:l,backButtonEl:u}=this,h=l.back;return I(Ft,null,I("calcite-panel",{closable:t,closed:e,description:i,disabled:n,heading:r,headingLevel:s,loading:o,menuOpen:a,messageOverrides:l,onCalcitePanelClose:this.handlePanelClose,onCalcitePanelScroll:this.handlePanelScroll,ref:this.setContainerRef},this.renderBackButton(),I("slot",{name:hg.headerActionsStart,slot:So.headerActionsStart}),I("slot",{name:hg.headerActionsEnd,slot:So.headerActionsEnd}),I("slot",{name:hg.headerContent,slot:So.headerContent}),I("slot",{name:hg.headerMenuActions,slot:So.headerMenuActions}),I("slot",{name:hg.fab,slot:So.fab}),I("slot",{name:hg.footerActions,slot:So.footerActions}),I("slot",{name:hg.footer,slot:So.footer}),I("slot",null)),u?I("calcite-tooltip",{label:h,overlayPositioning:"fixed",placement:"top",referenceElement:u},h):null)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return Eft}},[1,"calcite-flow-item",{closable:[1540],closed:[1540],beforeBack:[16],description:[1],disabled:[516],heading:[1],headingLevel:[514,"heading-level"],loading:[516],menuOpen:[516,"menu-open"],messageOverrides:[1040],messages:[1040],showBackButton:[4,"show-back-button"],backButtonEl:[32],defaultMessages:[32],effectiveLocale:[32],setFocus:[64],scrollContentTo:[64]}]);function T_e(){if(typeof customElements>"u")return;["calcite-flow-item","calcite-action","calcite-action-menu","calcite-icon","calcite-loader","calcite-panel","calcite-popover","calcite-scrim","calcite-tooltip"].forEach(e=>{switch(e){case"calcite-flow-item":customElements.get(e)||customElements.define(e,I_e);break;case"calcite-action":customElements.get(e)||Gh();break;case"calcite-action-menu":customElements.get(e)||g2();break;case"calcite-icon":customElements.get(e)||ni();break;case"calcite-loader":customElements.get(e)||Bo();break;case"calcite-panel":customElements.get(e)||Wbe();break;case"calcite-popover":customElements.get(e)||S1();break;case"calcite-scrim":customElements.get(e)||fL();break;case"calcite-tooltip":customElements.get(e)||C_e();break}})}T_e();const Cft=I_e,Ift=T_e,Tft=Object.freeze(Object.defineProperty({__proto__:null,CalciteFlowItem:Cft,defineCustomElement:Ift},Symbol.toStringTag,{value:"Module"}));/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-components/blob/master/LICENSE.md for details.
 * v1.0.8-next.4
 */const Nx={title:"title",message:"message",link:"link",actionsEnd:"actions-end"},zx={actionsEnd:"actions-end",close:"notice-close",container:"container",content:"notice-content",icon:"notice-icon"},kft="@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host([scale=s]){--calcite-notice-spacing-token-small:0.5rem;--calcite-notice-spacing-token-large:0.75rem}:host([scale=s]) .container slot[name=title]::slotted(*),:host([scale=s]) .container *::slotted([slot=title]){margin-block:0.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=s]) .container slot[name=message]::slotted(*),:host([scale=s]) .container *::slotted([slot=message]){margin-block:0.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) ::slotted(calcite-link){margin-block:0.125rem;font-size:var(--calcite-font-size--2);line-height:1.375}:host([scale=s]) .notice-close{padding:0.5rem}:host([scale=m]){--calcite-notice-spacing-token-small:0.75rem;--calcite-notice-spacing-token-large:1rem}:host([scale=m]) .container slot[name=title]::slotted(*),:host([scale=m]) .container *::slotted([slot=title]){margin-block:0.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=m]) .container slot[name=message]::slotted(*),:host([scale=m]) .container *::slotted([slot=message]){margin-block:0.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=m]) ::slotted(calcite-link){margin-block:0.125rem;font-size:var(--calcite-font-size--1);line-height:1.375}:host([scale=l]){--calcite-notice-spacing-token-small:1rem;--calcite-notice-spacing-token-large:1.25rem}:host([scale=l]) .container slot[name=title]::slotted(*),:host([scale=l]) .container *::slotted([slot=title]){margin-block:0.125rem;font-size:var(--calcite-font-size-1);line-height:1.375}:host([scale=l]) .container slot[name=message]::slotted(*),:host([scale=l]) .container *::slotted([slot=message]){margin-block:0.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([scale=l]) ::slotted(calcite-link){margin-block:0.125rem;font-size:var(--calcite-font-size-0);line-height:1.375}:host([width=auto]){--calcite-notice-width:auto}:host([width=half]){--calcite-notice-width:50%}:host([width=full]){--calcite-notice-width:100%}:host{margin-inline:auto;display:none;max-inline-size:100%;align-items:center;inline-size:var(--calcite-notice-width)}.container{pointer-events:none;margin-block:0px;box-sizing:border-box;display:none;inline-size:100%;background-color:var(--calcite-ui-foreground-1);opacity:0;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;max-block-size:0;text-align:start;border-inline-start:0px solid;box-shadow:0 0 0 0 transparent}.notice-close{outline-color:transparent}.notice-close:focus{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}:host{display:flex}:host([open]) .container{pointer-events:auto;display:flex;max-block-size:100%;align-items:center;border-width:2px;opacity:1;--tw-shadow:0 4px 8px -1px rgba(0, 0, 0, 0.08), 0 2px 4px -1px rgba(0, 0, 0, 0.04);--tw-shadow-colored:0 4px 8px -1px var(--tw-shadow-color), 0 2px 4px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.container slot[name=title]::slotted(*),.container *::slotted([slot=title]){margin:0px;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}.container slot[name=message]::slotted(*),.container *::slotted([slot=message]){margin:0px;display:inline;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-ui-text-2);margin-inline-end:var(--calcite-notice-spacing-token-small)}.notice-content{box-sizing:border-box;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;display:flex;min-inline-size:0px;flex-direction:column;overflow-wrap:break-word;flex:1 1 0;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:0 var(--calcite-notice-spacing-token-small)}.notice-content:first-of-type:not(:only-child){padding-inline-start:var(--calcite-notice-spacing-token-large)}.notice-content:only-of-type{padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large)}.notice-icon{display:flex;align-items:center;box-sizing:border-box;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto}.notice-close{display:flex;cursor:pointer;align-items:center;align-self:stretch;border-style:none;background-color:transparent;color:var(--calcite-ui-text-3);outline:2px solid transparent;outline-offset:2px;box-sizing:border-box;transition:all var(--calcite-animation-timing) ease-in-out 0s, outline 0s, outline-offset 0s;padding-block:var(--calcite-notice-spacing-token-small);padding-inline:var(--calcite-notice-spacing-token-large);flex:0 0 auto;-webkit-appearance:none}.notice-close:hover,.notice-close:focus{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1)}.notice-close:active{background-color:var(--calcite-ui-foreground-3)}.actions-end{display:flex;align-self:stretch}:host([kind=brand]) .container{border-color:var(--calcite-ui-brand)}:host([kind=brand]) .container .notice-icon{color:var(--calcite-ui-brand)}:host([kind=info]) .container{border-color:var(--calcite-ui-info)}:host([kind=info]) .container .notice-icon{color:var(--calcite-ui-info)}:host([kind=danger]) .container{border-color:var(--calcite-ui-danger)}:host([kind=danger]) .container .notice-icon{color:var(--calcite-ui-danger)}:host([kind=success]) .container{border-color:var(--calcite-ui-success)}:host([kind=success]) .container .notice-icon{color:var(--calcite-ui-success)}:host([kind=warning]) .container{border-color:var(--calcite-ui-warning)}:host([kind=warning]) .container .notice-icon{color:var(--calcite-ui-warning)}",k_e=Be(class extends He{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteNoticeClose=ue(this,"calciteNoticeClose",6),this.calciteNoticeOpen=ue(this,"calciteNoticeOpen",6),this.close=()=>{this.open=!1,this.calciteNoticeClose.emit()},this.open=!1,this.kind="brand",this.closable=!1,this.icon=void 0,this.iconFlipRtl=!1,this.scale="m",this.width="auto",this.messages=void 0,this.messageOverrides=void 0,this.effectiveLocale=void 0,this.defaultMessages=void 0}onMessagesChange(){}updateRequestedIcon(){this.requestedIcon=fw(zw,this.icon,this.kind)}connectedCallback(){ed(this),hn(this),dr(this)}disconnectedCallback(){td(this),pn(this),hr(this)}async componentWillLoad(){Ui(this),this.requestedIcon=fw(zw,this.icon,this.kind),await cr(this)}componentDidLoad(){Bi(this)}render(){const{el:t}=this,e=I("button",{"aria-label":this.messages.close,class:zx.close,onClick:this.close,ref:n=>this.closeButton=n},I("calcite-icon",{icon:"x",scale:this.scale==="l"?"m":"s"})),i=Wr(t,Nx.actionsEnd);return I("div",{class:zx.container},this.requestedIcon?I("div",{class:zx.icon},I("calcite-icon",{flipRtl:this.iconFlipRtl,icon:this.requestedIcon,scale:this.scale==="l"?"m":"s"})):null,I("div",{class:zx.content},I("slot",{name:Nx.title}),I("slot",{name:Nx.message}),I("slot",{name:Nx.link})),i?I("div",{class:zx.actionsEnd},I("slot",{name:Nx.actionsEnd})):null,this.closable?e:null)}async setFocus(){await Hi(this);const t=this.el.querySelector("calcite-link");!this.closeButton&&!t||(t?t.setFocus():this.closeButton&&this.closeButton.focus())}effectiveLocaleChange(){ur(this,this.effectiveLocale)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],icon:["updateRequestedIcon"],kind:["updateRequestedIcon"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return kft}},[1,"calcite-notice",{open:[1540],kind:[513],closable:[516],icon:[520],iconFlipRtl:[516,"icon-flip-rtl"],scale:[513],width:[513],messages:[1040],messageOverrides:[1040],effectiveLocale:[32],defaultMessages:[32],setFocus:[64]}]);function $_e(){if(typeof customElements>"u")return;["calcite-notice","calcite-icon"].forEach(e=>{switch(e){case"calcite-notice":customElements.get(e)||customElements.define(e,k_e);break;case"calcite-icon":customElements.get(e)||ni();break}})}$_e();const $ft=k_e,Aft=$_e,A_e=Object.freeze(Object.defineProperty({__proto__:null,CalciteNotice:$ft,defineCustomElement:Aft},Symbol.toStringTag,{value:"Module"}));eue(window.location.href);const M_e=()=>{document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)};window.addEventListener("resize",M_e);M_e();O5.createRoot(document.getElementById("root")).render(re(gl.StrictMode,{children:re($at,{})}));export{Bw as $,L as A,VC as B,Tfe as C,ut as D,we as E,Zw as F,Oae as G,Ph as H,La as I,A as J,st as K,_e as L,$r as M,bt as N,cR as O,Ln as P,ee as Q,gl as R,Lc as S,ji as T,Io as U,To as V,qt as W,Kft as X,MF as Y,$xt as Z,q as _,O as a,Ws as a$,Vft as a0,gse as a1,YC as a2,m0 as a3,ct as a4,bn as a5,Ky as a6,si as a7,qx as a8,Ur as a9,dyt as aA,iyt as aB,Et as aC,TC as aD,HP as aE,cl as aF,Vae as aG,Hae as aH,K0t as aI,Y0t as aJ,J0t as aK,xwt as aL,MHe as aM,jo as aN,yO as aO,_l as aP,zI as aQ,zi as aR,se as aS,ui as aT,Gu as aU,om as aV,am as aW,X_t as aX,Ys as aY,aR as aZ,pt as a_,TIe as aa,li as ab,Xi as ac,Pa as ad,N as ae,G as af,rt as ag,Ice as ah,Ve as ai,lf as aj,Mh as ak,$0t as al,j8 as am,U8 as an,igt as ao,ngt as ap,nMe as aq,Dt as ar,k_ as as,U as at,zgt as au,jh as av,Xft as aw,jgt as ax,PW as ay,cyt as az,Ht as b,Rft as b$,vIe as b0,yIe as b1,Hq as b2,Bq as b3,gIe as b4,fve as b5,pat as b6,bSt as b7,Xk as b8,Jmt as b9,Fe as bA,Ce as bB,xB as bC,ZI as bD,bR as bE,SB as bF,r1 as bG,kr as bH,xR as bI,ju as bJ,lhe as bK,che as bL,uhe as bM,gh as bN,Ne as bO,Egt as bP,tje as bQ,Ca as bR,Nn as bS,JP as bT,Bvt as bU,Br as bV,Hu as bW,Zft as bX,qft as bY,Yft as bZ,Jft as b_,$oe as ba,Qy as bb,Is as bc,N0 as bd,G7e as be,OI as bf,Rvt as bg,Pvt as bh,z0 as bi,Dft as bj,Wft as bk,Lft as bl,L3 as bm,zft as bn,jft as bo,Pft as bp,jq as bq,OYe as br,o2 as bs,o0 as bt,Tr as bu,hc as bv,Lye as bw,Ai as bx,Vy as by,Jw as bz,Se as c,pRe as c$,Hft as c0,Bft as c1,$c as c2,xs as c3,Nh as c4,DP as c5,vn as c6,B9 as c7,J7e as c8,tle as c9,r2 as cA,y9 as cB,l0 as cC,JAe as cD,AAe as cE,Qft as cF,Ah as cG,OMe as cH,byt as cI,MAe as cJ,Oh as cK,Khe as cL,iRe as cM,Vrt as cN,kP as cO,jrt as cP,xSt as cQ,_mt as cR,bmt as cS,C0t as cT,kyt as cU,E0t as cV,ple as cW,dce as cX,tX as cY,gRe as cZ,uce as c_,Ct as ca,xa as cb,qf as cc,br as cd,qV as ce,h9 as cf,zn as cg,Iz as ch,qae as ci,el as cj,uat as ck,HGe as cl,sde as cm,A_ as cn,SAe as co,Goe as cp,zc as cq,gve as cr,m1 as cs,Ame as ct,g7 as cu,kf as cv,uMe as cw,Bot as cx,bje as cy,u7 as cz,_Ke as d,ZP as d$,Ro as d0,hRe as d1,SSt as d2,TAe as d3,CM as d4,oRe as d5,cRe as d6,aRe as d7,P_t as d8,zo as d9,tce as dA,sl as dB,l1 as dC,UI as dD,ERe as dE,Zmt as dF,Ygt as dG,dRe as dH,cgt as dI,SI as dJ,rmt as dK,Eke as dL,Wrt as dM,nw as dN,_Ae as dO,J$e as dP,PGe as dQ,Mm as dR,_Ge as dS,wGe as dT,cGe as dU,wwt as dV,wSt as dW,ije as dX,wje as dY,Py as dZ,q8e as d_,wve as da,qrt as db,Ut as dc,Urt as dd,EAe as de,Ggt as df,Gae as dg,mw as dh,ugt as di,RNe as dj,eX as dk,iX as dl,Gs as dm,_ve as dn,CSt as dp,Sk as dq,Bu as dr,iw as ds,lRe as dt,$h as du,l0t as dv,kC as dw,xIe as dx,_t as dy,SIe as dz,c as e,COe as e$,W8e as e0,VI as e1,J8e as e2,KP as e3,DI as e4,rfe as e5,fMe as e6,r_t as e7,hEt as e8,b0t as e9,T0t as eA,rbt as eB,R0t as eC,cEt as eD,A5e as eE,gyt as eF,_yt as eG,oyt as eH,Myt as eI,tw as eJ,q$e as eK,fot as eL,mot as eM,cce as eN,Mqe as eO,Cyt as eP,nRe as eQ,yyt as eR,a2 as eS,yqe as eT,uRe as eU,km as eV,wR as eW,LNe as eX,dR as eY,Tu as eZ,vgt as e_,Vo as ea,cm as eb,CHe as ec,k0t as ed,$yt as ee,Ayt as ef,mAe as eg,Pyt as eh,xyt as ei,Iyt as ej,CIe as ek,vbt as el,rPe as em,jae as en,Eyt as eo,agt as ep,ogt as eq,Ew as er,UGe as es,r0t as et,CR as eu,n0t as ev,_m as ew,MMe as ex,RMe as ey,dEt as ez,Ge as f,Dgt as f$,tmt as f0,vje as f1,xje as f2,S0t as f3,bqe as f4,vyt as f5,_qe as f6,$a as f7,wyt as f8,pme as f9,uje as fA,W7e as fB,UV as fC,Xy as fD,Zi as fE,EI as fF,jV as fG,gmt as fH,kh as fI,Nje as fJ,AT as fK,uEt as fL,cJ as fM,emt as fN,oEt as fO,YP as fP,Rc as fQ,qC as fR,XI as fS,Hw as fT,Ryt as fU,g9 as fV,ayt as fW,syt as fX,TMe as fY,p9 as fZ,lyt as f_,Dyt as fa,Syt as fb,Lyt as fc,uAe as fd,Uae as fe,Ra as ff,CGe as fg,Sw as fh,Mme as fi,gn as fj,v9 as fk,jGe as fl,Ngt as fm,Fgt as fn,H8 as fo,cLe as fp,Hx as fq,zh as fr,kMe as fs,ryt as ft,NAe as fu,d9 as fv,L8 as fw,Qk as fx,Oyt as fy,RVe as fz,en as g,hVe as g$,J_t as g0,pl as g1,RP as g2,FGe as g3,SW as g4,ow as g5,ute as g6,wPe as g7,lgt as g8,wke as g9,zu as gA,Kmt as gB,Vge as gC,I0t as gD,UYe as gE,_0t as gF,jge as gG,Qmt as gH,ISt as gI,gO as gJ,d1t as gK,uA as gL,Cqe as gM,Sqe as gN,Yme as gO,KV as gP,EIe as gQ,lmt as gR,uge as gS,ll as gT,u1t as gU,Byt as gV,V9e as gW,lt as gX,xO as gY,r6 as gZ,F8 as g_,Tn as ga,ri as gb,Xmt as gc,uxt as gd,w0t as ge,JN as gf,kt as gg,q0t as gh,W0t as gi,i1 as gj,sR as gk,D0t as gl,F0t as gm,N0t as gn,z0t as go,H0t as gp,j0t as gq,V0t as gr,U0t as gs,B0t as gt,G0t as gu,Aa as gv,Hce as gw,$o as gx,PP as gy,GR as gz,GKe as h,qyt as h$,Zs as h0,qhe as h1,w0 as h2,rr as h3,Yr as h4,VJe as h5,oR as h6,cv as h7,n7 as h8,amt as h9,ote as hA,Jfe as hB,Yfe as hC,g7e as hD,Wfe as hE,_7e as hF,w7e as hG,x7e as hH,Tde as hI,ei as hJ,vB as hK,Lvt as hL,ER as hM,cvt as hN,Dvt as hO,zvt as hP,rm as hQ,QM as hR,rde as hS,QNe as hT,I5e as hU,Dbt as hV,ZNe as hW,KNe as hX,D_t as hY,w$ as hZ,ht as h_,dm as ha,h_t as hb,qo as hc,ZJ as hd,dme as he,NJe as hf,fce as hg,mce as hh,S4 as hi,E4 as hj,_4 as hk,$i as hl,Gft as hm,Uft as hn,eut as ho,fL as hp,Fut as hq,Zbe as hr,elt as hs,ni as ht,Mft as hu,rrt as hv,Oft as hw,Rnt as hx,Trt as hy,Nnt as hz,xy as i,bl as i$,rze as i0,jvt as i1,q4 as i2,R_t as i3,FR as i4,L_t as i5,oze as i6,Vvt as i7,eze as i8,Nvt as i9,Cle as iA,T9 as iB,Nyt as iC,Whe as iD,vfe as iE,CVe as iF,m9e as iG,S9e as iH,IVe as iI,gVe as iJ,TR as iK,kM as iL,$le as iM,pJe as iN,fe as iO,de as iP,O_t as iQ,M_t as iR,_y as iS,cmt as iT,YM as iU,hje as iV,Nmt as iW,SLe as iX,y0t as iY,fyt as iZ,nyt as i_,or as ia,H4e as ib,$W as ic,ize as id,zP as ie,O4 as ig,Vr as ih,tvt as ii,E7e as ij,yde as ik,q5e as il,W5e as im,Qje as io,Ybt as ip,ox as iq,pmt as ir,MIe as is,_i as it,_0 as iu,$0 as iv,Tse as iw,Ia as ix,kc as iy,Uu as iz,Sye as j,pyt as j$,LW as j0,xh as j1,$me as j2,Zf as j3,mGe as j4,d7 as j5,yAe as j6,jot as j7,JC as j8,CH as j9,Qae as jA,UAe as jB,$Ae as jC,BP as jD,OTe as jE,Eoe as jF,Coe as jG,PTe as jH,GAe as jI,Jgt as jJ,Pgt as jK,mEt as jL,Grt as jM,_n as jN,El as jO,fEt as jP,Cr as jQ,Tyt as jR,Wgt as jS,Lse as jT,gAe as jU,qgt as jV,uyt as jW,G9 as jX,Sce as jY,BGe as jZ,zRe as j_,Ju as ja,Kot as jb,mbe as jc,U0 as jd,ZC as je,OGe as jf,ele as jg,YAe as jh,gEt as ji,jn as jj,kGe as jk,Fn as jl,Vh as jm,DIe as jn,FIe as jo,sL as jp,s_t as jq,gM as jr,VGe as js,W$e as jt,_je as ju,Vgt as jv,aL as jw,OAe as jx,BAe as jy,Xae as jz,qe as k,FSt as k$,Kme as k0,CRe as k1,FRe as k2,MGe as k3,Kae as k4,ya as k5,IM as k6,kAe as k7,$Re as k8,Pmt as k9,PIe as kA,LIe as kB,jse as kC,$P as kD,$9 as kE,NI as kF,AC as kG,jJe as kH,$f as kI,xOe as kJ,SOe as kK,U3e as kL,Hyt as kM,Gyt as kN,smt as kO,TN as kP,HWe as kQ,yse as kR,Jqe as kS,Yqe as kT,Hqe as kU,w7 as kV,gFe as kW,_6 as kX,CK as kY,Bae as kZ,RSt as k_,E_ as ka,kme as kb,K$e as kc,ci as kd,Rmt as ke,uf as kf,wD as kg,hmt as kh,Q2e as ki,kRe as kj,fmt as kk,Joe as kl,PI as km,RI as kn,LI as ko,Wbt as kp,Sr as kq,Rgt as kr,WP as ks,Tm as kt,AIe as ku,OOe as kv,omt as kw,hR as kx,Aqe as ky,NRe as kz,Y as l,ku as l$,DSt as l0,LSt as l1,x0 as l2,$8 as l3,qmt as l4,jqe as l5,aOe as l6,fRe as l7,_s as l8,roe as l9,tyt as lA,hgt as lB,CMe as lC,IMe as lD,Du as lE,MI as lF,AI as lG,Yve as lH,YO as lI,NP as lJ,FP as lK,a_t as lL,l_t as lM,o_t as lN,$I as lO,D3 as lP,qoe as lQ,q8 as lR,Tke as lS,bke as lT,ZN as lU,sgt as lV,dgt as lW,pO as lX,Bfe as lY,vy as lZ,YBe as l_,jN as la,cj as lb,ige as lc,Lgt as ld,ir as le,P_ as lf,VR as lg,jme as lh,Vme as li,YGe as lj,Cwt as lk,oqe as ll,Iwt as lm,Ww as ln,ibt as lo,ph as lp,Woe as lq,nst as lr,PSt as ls,Yde as lt,c4e as lu,BC as lv,AB as lw,_O as lx,Hvt as ly,hyt as lz,fIe as m,Ebt as m$,xw as m0,s2 as m1,EMe as m2,Mvt as m3,Tvt as m4,Ivt as m5,kvt as m6,$vt as m7,uY as m8,dY as m9,zB as mA,Mhe as mB,nm as mC,Bje as mD,M7e as mE,B8e as mF,H8e as mG,G8e as mH,b_t as mI,c_t as mJ,c9e as mK,a4e as mL,s5 as mM,Xde as mN,obt as mO,nbt as mP,wze as mQ,ubt as mR,MY as mS,imt as mT,nmt as mU,R9e as mV,Jme as mW,o4e as mX,Kde as mY,Wme as mZ,KBe as m_,Evt as ma,Cvt as mb,_vt as mc,iO as md,xvt as me,Svt as mf,Avt as mg,vNe as mh,bNe as mi,T8 as mj,_de as mk,wvt as ml,hY as mm,_Ne as mn,vvt as mo,gvt as mp,X8 as mq,xT as mr,Mde as ms,Ske as mt,By as mu,dbt as mv,vt as mw,h7 as mx,Ahe as my,Hje as mz,e1 as n,pgt as n$,PM as n0,bvt as n1,HUe as n2,cb as n3,Z0t as n4,Hbt as n5,z8e as n6,j8e as n7,V8e as n8,Xvt as n9,Cw as nA,$Ve as nB,kVe as nC,bgt as nD,_gt as nE,xgt as nF,wgt as nG,Sgt as nH,_C as nI,Sa as nJ,C$e as nK,Pf as nL,dfe as nM,hfe as nN,d9e as nO,Cm as nP,yw as nQ,Mle as nR,b4 as nS,x4 as nT,FM as nU,QRe as nV,rqe as nW,vmt as nX,A9 as nY,e_ as nZ,DW as n_,vce as na,Yvt as nb,gc as nc,Yze as nd,D8 as ne,Kvt as nf,Zvt as ng,bVe as nh,Uyt as ni,r0 as nj,aWe as nk,Nwt as nl,jwt as nm,wm as nn,S0 as no,cge as np,Mxt as nq,xm as nr,CW as ns,vR as nt,eKe as nu,l$e as nv,Q8 as nw,Eqe as nx,OM as ny,tRe as nz,re as o,Rw as o$,Voe as o0,hke as o1,wqe as o2,OC as o3,_o as o4,Bqe as o5,Fje as o6,QI as o7,NVe as o8,qbt as o9,Ft as oA,$Te as oB,Sf as oC,Wst as oD,Tbt as oE,Mje as oF,Bve as oG,Ete as oH,fU as oI,Hst as oJ,Gst as oK,qst as oL,Gve as oM,Zst as oN,Kst as oO,qve as oP,e$e as oQ,d$e as oR,My as oS,NM as oT,WN as oU,u5 as oV,cbt as oW,bde as oX,hvt as oY,kte as oZ,tEt as o_,UB as oa,kFe as ob,y2 as oc,yL as od,Be as oe,He as of,ue as og,pI as oh,ght as oi,ur as oj,Ui as ok,cr as ol,hn as om,dr as on,lr as oo,pn as op,hr as oq,Bi as or,Hi as os,I as ot,$m as ou,Pi as ov,Vi as ow,Bo as ox,r_ as oy,Kr as oz,Vl as p,xft as p$,eEt as p0,eE as p1,QSt as p2,c5 as p3,gH as p4,USt as p5,BSt as p6,HSt as p7,cke as p8,gke as p9,hte as pA,lbt as pB,$Pe as pC,Mbt as pD,TD as pE,kD as pF,ebt as pG,Gvt as pH,YWe as pI,PMe as pJ,sbt as pK,Fde as pL,Bt as pM,F_ as pN,$5e as pO,T4 as pP,D4e as pQ,F4e as pR,wmt as pS,dOe as pT,vo as pU,I9 as pV,k2e as pW,jke as pX,Bs as pY,slt as pZ,Gh as p_,LP as pa,rgt as pb,sr as pc,Ise as pd,umt as pe,xRe as pf,DRe as pg,uvt as ph,Wvt as pi,abt as pj,Vze as pk,L0t as pl,O_ as pm,wB as pn,tbt as po,_c as pp,v$e as pq,Igt as pr,wC as ps,Cgt as pt,aEt as pu,rEt as pv,Nze as pw,Oze as px,wY as py,Uze as pz,ua as q,OR as q$,C_e as q0,QJe as q1,GJe as q2,Xnt as q3,hSt as q4,nt as q5,xk as q6,Oe as q7,xle as q8,pSt as q9,yvt as qA,qP as qB,BYe as qC,Ymt as qD,EH as qE,oat as qF,lc as qG,rf as qH,Gw as qI,yut as qJ,vut as qK,Eut as qL,Cut as qM,O9e as qN,A9e as qO,f7 as qP,j9e as qQ,_w as qR,UVe as qS,BB as qT,tfe as qU,k8 as qV,Yv as qW,Cs as qX,H9e as qY,ZM as qZ,h8e as q_,fSt as qa,gSt as qb,GO as qc,mSt as qd,Rf as qe,Xw as qf,ESt as qg,WHe as qh,mO as qi,Vot as qj,Uot as qk,pEt as ql,SH as qm,Oot as qn,CEt as qo,EEt as qp,xH as qq,Fvt as qr,W4 as qs,YNe as qt,AV as qu,A_t as qv,ANe as qw,Ovt as qx,t_ as qy,SNe as qz,le as r,Gq as r$,IR as r0,Jje as r1,wfe as r2,mM as r3,vot as r4,Jbt as r5,sO as r6,L9e as r7,fHe as r8,sle as r9,RV as rA,ZTe as rB,YTe as rC,egt as rD,ID as rE,l2e as rF,o1 as rG,LB as rH,she as rI,WNe as rJ,nje as rK,JNe as rL,yhe as rM,rO as rN,the as rO,IE as rP,wVe as rQ,x0t as rR,mmt as rS,myt as rT,l9 as rU,jyt as rV,Hs as rW,Fu as rX,Aae as rY,rh as rZ,$7 as r_,Zbt as ra,jVe as rb,_Ve as rc,VB as rd,xVe as re,SVe as rf,OIe as rg,RIe as rh,IW as ri,XRe as rj,v9e as rk,p9e as rl,AVe as rm,TW as rn,hae as ro,HB as rp,aK as rq,zVe as rr,dV as rs,FVe as rt,r7 as ru,vC as rv,Uo as rw,VHe as rx,jHe as ry,NHe as rz,pIe as s,w_t as s$,GC as s0,TVe as s1,Lbt as s2,Jf as s3,XZ as s4,$C as s5,HVe as s6,BVe as s7,bm as s8,QP as s9,R as sA,Wmt as sB,E9 as sC,Lde as sD,gw as sE,CFe as sF,ST as sG,uj as sH,Ibt as sI,Cbt as sJ,i7 as sK,ygt as sL,ife as sM,Ove as sN,NSt as sO,cc as sP,ly as sQ,_r as sR,ufe as sS,lv as sT,Ude as sU,Vyt as sV,Ugt as sW,WOe as sX,hbt as sY,SR as sZ,xbt as s_,yR as sa,o8e as sb,cVe as sc,Uh as sd,C8e as se,c8e as sf,u8e as sg,JUe as sh,YUe as si,ZUe as sj,KUe as sk,XUe as sl,QUe as sm,e8e as sn,t8e as so,i8e as sp,n8e as sq,r8e as sr,s8e as ss,_fe as st,tAe as su,VVe as sv,Gbt as sw,zyt as sx,STe as sy,hW as sz,Fft as t,jve as t0,Nft as u,UP as v,F0 as w,wn as x,d as y,X as z};
