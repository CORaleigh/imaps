(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[94],{1058:function(e,t,i){"use strict";var a=i(2),n=i(3),s=i(62),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(a.a)(this,e),this.spatialReference=t}return Object(n.a)(e,[{key:"spatialReference",get:function(){return this._spatialReference},set:function(e){e!==this._spatialReference&&(this._spatialReference=e,this._updateNormalizationFactors())}},{key:"normalizeDistance",value:function(e){return e*this._metersPerDistanceUnit}},{key:"normalizeElevation",value:function(e){return e*this._metersPerElevationUnit}},{key:"normalizeArea",value:function(e){return e*this._squareMetersPerAreaUnit}},{key:"_updateNormalizationFactors",value:function(){this._metersPerDistanceUnit=Object(s.f)(this._spatialReference,1),this._metersPerElevationUnit=Object(s.f)(this._spatialReference,1),this._squareMetersPerAreaUnit=this._metersPerDistanceUnit*this._metersPerDistanceUnit}}]),e}();t.a=c},1225:function(e,t,i){"use strict";i.r(t),i.d(t,"DirectLineMeasurement3DController",(function(){return P}));var a=i(2),n=i(3),s=i(4),c=i(5),r=i(0),o=(i(14),i(6)),u=(i(12),i(17),i(1)),l=i(8),h=(i(11),i(18),i(19),i(31)),b=i(97),d=i(46),j=i(26),f=i(13),O=i(49),v=i(220),_=i(25),m=i(130),p=i(982),g=i(364),k=i(404),D=i(1058),P=function(e){Object(s.a)(i,e);var t=Object(c.a)(i);function i(e){var n;return Object(a.a)(this,i),(n=t.call(this,e))._tempStartPosition=Object(j.e)(),n._tempEndPosition=Object(j.e)(),n._tempCornerPosition=Object(j.e)(),n._unitNormalizer=new D.a,n._handles=new O.a,n}return Object(n.a)(i,[{key:"initialize",value:function(){var e=this;this._handles.add(Object(_.j)(this.view,"ready",(function(){return e._initialize()}),!0))}},{key:"_initialize",value:function(){var e=this,t=this.view.spatialReference,i=Object(v.g)(t),a=i===v.a?v.d:i;this._sphericalPCPF=a;var n=Object(m.b)(t,a);this._unitNormalizer.spatialReference=n?a:t,this._handles.add([this.dataObject.watch("startPoint",(function(){return e._updateMeasurement()}),!0),this.dataObject.watch("endPoint",(function(){return e._updateMeasurement()}),!0),this.dataObject.watch("settings",(function(){return e._updateMeasurement()}),!0)],"model"),this._updateMeasurement()}},{key:"_updateMeasurement",value:function(){var e=this.dataObject.startPoint,t=this.dataObject.endPoint;if(Object(o.j)(e)||Object(o.j)(t))this.dataObject.measurement=null;else{var i=this._euclideanDistances(e,t),a=this._exactGeodesicDistanceAndAngle(e,t,i.horizontal.value);this.dataObject.measurement={directDistance:i.direct,horizontalDistance:i.horizontal,verticalDistance:i.vertical,geodesicDistance:a.distance,geodesicAngle:a.angle}}}},{key:"_euclideanDistances",value:function(e,t){var i=this;e.z>t.z&&(e=[e,e=t][0]);var a=e.clone();a.z=t.z;var n=this._tempStartPosition,s=this._tempEndPosition,c=this._tempCornerPosition,r=this.view.spatialReference,o=this._sphericalPCPF,u=Object(m.b)(r,o)?o:r;Object(m.o)(e,n,u),Object(m.o)(t,s,u),Object(m.o)(a,c,u);var l=Object(f.n)(n,s),h=Object(f.n)(c,s),b=Math.abs(t.z-e.z),d=function(e){return i._unitNormalizer.normalizeDistance(e)},j=d(l),O=d(h),v=d(b);return{direct:new p.a(j,"meters"),horizontal:new p.a(O,"meters"),vertical:new p.a(v,"meters")}}},{key:"_exactGeodesicDistanceAndAngle",value:function(e,t,i){var a=e.spatialReference,n=new b.a({paths:[e,t],spatialReference:a}),s=a.isGeographic&&Object(g.g)(a)?Object(g.e)([n],"meters")[0]:a.isWebMercator?Object(k.geodesicLength)(n,"meters"):void 0,c=s?{distance:s,angle:this._fallbackGeodesicAngle(s,a)}:this._fallbackGeodesicDistance(e,t,i),r=c.distance,o=c.angle;return{distance:new p.a(r,"meters"),angle:new p.a(o,"degrees")}}},{key:"_fallbackGeodesicAngle",value:function(e,t){return e/Object(v.e)(t).metersPerDegree}},{key:"_fallbackGeodesicDistance",value:function(e,t,i){if(Object(m.p)(e,z)){Object(m.p)(t,w);var a=Object(d.f)(z[0]),n=Object(d.f)(z[1]),s=Object(d.f)(w[0]),c=Object(d.f)(w[1]),r=Math.abs(s-a),o=Object(d.b)(Math.sin(n)*Math.sin(c)+Math.cos(n)*Math.cos(c)*Math.cos(r)),u=Object(d.q)(o),l={distance:0};return Object(g.f)(l,[z[0],z[1]],[w[0],w[1]]),{distance:l.distance,angle:u}}var h=e.spatialReference,b=i;return{distance:b,angle:this._fallbackGeodesicAngle(b,h)}}}]),i}(h.a);Object(r.a)([Object(u.b)()],P.prototype,"view",void 0),Object(r.a)([Object(u.b)()],P.prototype,"dataObject",void 0),P=Object(r.a)([Object(l.a)("esri.views.3d.interactive.graphics.DirectLineMeasurement3D.DirectLineMeasurement3DController")],P);var z=Object(j.e)(),w=Object(j.e)()},982:function(e,t,i){"use strict";var a=i(2),n=i(3),s=i(62),c=function(){function e(t,i){Object(a.a)(this,e),this.measure=Object(s.o)(i),this.value=t,this.unit=i}return Object(n.a)(e,[{key:"isBaseUnit",get:function(){return Object(s.k)(this.unit)}},{key:"toUnit",value:function(t){return new e(Object(s.c)(this.value,this.unit,t),t)}},{key:"toBaseUnit",value:function(){return this.toUnit(Object(s.b)(this.unit))}}]),e}();t.a=c}}]);
//# sourceMappingURL=94.14eb5134.chunk.js.map