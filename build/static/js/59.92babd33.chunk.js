(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[59,35],{1247:function(e,t,i){"use strict";i.r(t);var a=i(2),r=i(3),n=i(4),s=i(5),o=i(0),c=(i(14),i(12)),l=(i(17),i(1)),u=i(27),b=i(8),h=(i(11),i(18),i(19),i(24)),p=i(62),d=(i(51),i(77)),v=i(64),y=i(9),m=i(60),O=i(49),f=i(25),j=i(29),_=i(7),g=i.n(_),w=i(16),k=i(44),S=i(43),M=i(95),C=i(97),L=(i(78),i(88)),x=i(111),A=i(304),D=i(132),T=(i(127),i(113)),I=i(108),G=i(196),U=(i(69),i(72)),E=i(130),R=i(554),q=i(364),W=i(404),V=i(303),z=i(924),H=i(331),P=i(545),B=i(599),F=i(908),N=1e5,J=function(e){Object(n.a)(i,e);var t=Object(s.a)(i);function i(){var e;return Object(a.a)(this,i),(e=t.apply(this,arguments))._drawActive=!1,e._handles=new O.a,e._graphicsLayer=new V.a,e._manipulatorLayer=new V.a,e._groupLayer=new z.default({layers:[e._graphicsLayer,e._manipulatorLayer],listMode:"hide",visible:!1}),e._vertices=[],e.deferCreation=!0,e.geodesicDistanceThreshold=1e5,e.measurement=null,e.measurementLabel=null,e}return Object(r.a)(i,[{key:"initialize",value:function(){var e=this;Object(D.a)("esri/core/t9n/Units").then((function(t){e.messages=t})),this._handles.add(Object(L.c)(Object(w.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(D.a)("esri/core/t9n/Units");case 2:e.messages=t.sent;case 3:case"end":return t.stop()}}),t)})))))}},{key:"destroy",value:function(){this.detach(),this._draw&&(this._draw.destroy(),this._draw=null),this._handles&&(this._handles.destroy(),this._handles=null),this._graphicsLayer&&(this._graphicsLayer.destroy(),this._graphicsLayer=null),this._manipulatorLayer&&(this._manipulatorLayer.destroy(),this._manipulatorLayer=null)}},{key:"editable",set:function(e){this._set("editable",e),e||this._draw.reset()}},{key:"activate",value:function(){this._drawActive||0!==this._vertices.length||this._startSketch()}},{key:"onAttach",value:function(){var e=this,t=this.view;this._draw=new B.a({view:t}),t.map.add(this._groupLayer),t.focus(),this._handles.add([Object(f.a)(this,["unit","geodesicDistanceThreshold","palette","messages"],(function(){e._vertices.length>0&&e._updateGraphics()})),Object(f.a)(this,"view.spatialReference",(function(e){K(e)&&!Object(E.g)()&&Object(E.i)()}))]),this.create()}},{key:"onDetach",value:function(){var e=this.view.map;this._draw.view=null,this._draw.destroy(),this._draw=null,e.remove(this._groupLayer),this._handles.removeAll(),this._graphicsLayer.removeAll(),this._manipulatorLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null)}},{key:"onShow",value:function(){this._groupLayer.visible=!0}},{key:"onHide",value:function(){this._groupLayer.visible=!1}},{key:"reset",value:function(){this._vertices=[],this._graphicsLayer.removeAll(),this._set("measurement",null),this._set("measurementLabel",null),this._draw.reset(),this._drawActive=!1,this._updateSketch([])}},{key:"onInputEvent",value:function(e){"pointer-move"===e.type&&this._updateCursor()}},{key:"_startSketch",value:function(){var e=this;this._drawActive=!0;var t=this._draw.create("polyline",{mode:"click"});t.on(["vertex-add","vertex-update","vertex-remove","cursor-update","undo","redo"],(function(t){return e._updateSketch(t.vertices)})),t.on("draw-complete",(function(){return e._stopSketch()}))}},{key:"_stopSketch",value:function(){if(this._vertices.length<3)return this.reset(),void this._startSketch();this.manipulators.forEach((function(e){e.manipulator.interactive=!0})),this._drawActive=!1,this.complete()}},{key:"_updateSketch",value:function(e){var t=this;if(!K(this.view.spatialReference)||Object(E.g)()){if(e.length<2)return this._vertices=[],this.manipulators.removeAll(),void this._graphicsLayer.removeAll();this.create();for(var i=this.view.spatialReference;this._vertices.length>e.length;){var a=this._vertices.pop().manipulatorId;this.manipulators.remove(a)}for(var r=function(a){var r=Object(j.a)(e[a],2),n=r[0],s=r[1],o=function(e,t,i,a){var r=new I.a({style:"circle",color:a.handleColor,size:a.handleWidth,outline:{type:"simple-line",width:0}}),n=new I.a({style:"circle",color:a.handleColor,size:1.5*a.handleWidth,outline:{type:"simple-line",width:0}}),s=new U.a({geometry:e,symbol:r});return new F.a({view:t,layer:i,graphic:s,focusedSymbol:n})}(new S.a({x:n,y:s,spatialReference:i}),t.view,t._manipulatorLayer,t.palette),c=t.manipulators.add(o);Object(H.e)(o,(function(e,i){i.next(Object(H.m)(t.view)).next(Object(H.g)(e.graphic)).next((function(){var i=e.graphic.geometry;t._vertices[a].coord=[i.x,i.y],t._updateGraphics()}))})),t._vertices.push({manipulatorId:c,coord:[n,s]})},n=this._vertices.length;n<e.length;n++)r(n);var s=this._vertices.length-1,o=this._vertices[s],c=Object(j.a)(e[s],2),l=c[0],u=c[1];if(o.coord[0]!==l||o.coord[1]!==u){o.coord=[l,u];var b=new S.a({x:l,y:u,spatialReference:i});this.manipulators.findById(o.manipulatorId).graphic.geometry=b}var h=this._drawActive?this._vertices[s].manipulatorId:null;this.manipulators.forEach((function(e){e.manipulator.interactive=null==h||e.id!==h})),this._updateGraphics()}}},{key:"_updateCursor",value:function(){this.cursor=this._drawActive?"crosshair":null}},{key:"_updateGraphics",value:function(){this._graphicsLayer.removeAll();var e=function(e,t,i){if(2===e.length){var a,r=new C.a({paths:e,spatialReference:t});if(t.isGeographic)if(Object(q.g)(t))a=Object(q.c)(r,N);else{var n=Object(E.j)(r,k.a.WGS84),s=Object(q.c)(n,N);a=Object(E.j)(s,t)}else if(t.isWebMercator)a=Object(W.geodesicDensify)(r,N,"meters");else if(Object(W.planarLength)(r,"meters")>=i){var o=Object(E.j)(r,k.a.WGS84),c=Object(q.c)(o,N);a=Object(E.j)(c,t)}else a=r;return{measurement:null,fillGeometry:null,outlineGeometry:a}}e.push(e[0]);var l,u,b=new C.a({paths:[e],spatialReference:t}),h=new M.a({rings:[e],spatialReference:t}),p=null,d=null;if(t.isGeographic)if(Object(q.g)(t)){if(p=Object(q.c)(b,N),d=Object(q.c)(h,N),!(d=Object(W.simplify)(d)))return null;l=Object(q.e)([b],"meters")[0],u=Object(q.b)([d],"square-meters")[0]}else{var v=k.a.WGS84,y=Object(E.j)(b,v),m=Object(E.j)(h,v);if(p=Object(q.c)(y,N),d=Object(q.c)(m,N),!(d=Object(W.simplify)(d)))return null;l=Object(q.e)([y],"meters")[0],u=Object(q.b)([d],"square-meters")[0],p=Object(E.j)(p,t),d=Object(E.j)(d,t)}else if(t.isWebMercator){if(p=Object(W.geodesicDensify)(b,N,"meters"),d=Object(W.geodesicDensify)(h,N,"meters"),!(d=Object(W.simplify)(d)))return null;l=Object(W.geodesicLength)(b,"meters"),u=Object(W.geodesicArea)(d,"square-meters")}else{var O=Object(W.planarLength)(b,"meters");if(O>=i){var f=k.a.WGS84,j=Object(E.j)(b,f),_=Object(E.j)(h,f);if(p=Object(q.c)(j,N),d=Object(q.c)(_,N),!(d=Object(W.simplify)(d)))return null;l=Object(q.e)([j],"meters")[0],u=Object(q.b)([d],"square-meters")[0],p=Object(E.j)(p,t),d=Object(E.j)(d,t)}else{if(p=b,!(d=Object(W.simplify)(h)))return null;l=O,u=Object(W.planarArea)(d,"square-meters")}}return{measurement:{geometry:d,area:u,perimeter:l},fillGeometry:d,outlineGeometry:p}}(this._vertices.map((function(e){return e.coord})),this.view.spatialReference,this.geodesicDistanceThreshold);if(e){var t=e.measurement,i=e.fillGeometry,a=e.outlineGeometry;this._set("measurement",t);var r=t?function(e,t,i){if(!t||!e)return null;var a={area:null,perimeter:null},r=t.area,n=t.perimeter;switch(i){case"metric":a.area=Object(R.g)(e,r,"square-meters");break;case"imperial":a.area=Object(R.d)(e,r,"square-meters");break;default:var s=Object(p.c)(r,"square-meters",i);a.area=Object(R.b)(e,s,i)}var o=function(e){switch(e){case"metric":return"metric";case"imperial":return"imperial";case"square-inches":return"inches";case"square-feet":return"feet";case"square-yards":return"yards";case"square-miles":return"miles";case"square-us-feet":return"us-feet";case"square-meters":return"meters";case"square-kilometers":return"kilometers";case"acres":return"imperial";case"ares":case"hectares":return"metric";case"square-millimeters":return"millimeters";case"square-centimeters":return"centimeters";case"square-decimeters":return"decimeters";default:return null}}(i);if(o)switch(o){case"metric":a.perimeter=Object(R.h)(e,n,"meters");break;case"imperial":a.perimeter=Object(R.e)(e,n,"meters");break;default:var c=Object(p.c)(n,"meters",o);a.perimeter=Object(R.b)(e,c,o)}else a.perimeter="";return a}(this.messages,t,this.unit):null;if(this._set("measurementLabel",r),i||a){var n=this.palette,s=n.fillColor,o=n.pathColor,c=n.pathWidth,l=[];i&&l.push(new U.a({geometry:i,symbol:new T.a({color:s,outline:new x.a({width:0})})})),a&&l.push(new U.a({geometry:a,symbol:new x.a({color:o,width:c})})),i&&r&&l.push(new U.a({geometry:i.centroid,symbol:new G.a({color:[255,255,255,1],font:new A.a({size:14,family:"sans-serif"}),haloColor:[0,0,0,.5],haloSize:2,text:r.area})})),this._graphicsLayer.addMany(l)}}}}]),i}(P.a);function K(e){if(!e)return!1;var t=e.isGeographic,i=e.isWebMercator,a=e.isWGS84;return t&&!a&&!Object(q.g)(e)||!t&&!i}Object(o.a)([Object(l.b)()],J.prototype,"cursor",void 0),Object(o.a)([Object(l.b)({value:!0})],J.prototype,"editable",null),Object(o.a)([Object(l.b)({type:Number})],J.prototype,"geodesicDistanceThreshold",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],J.prototype,"measurement",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],J.prototype,"measurementLabel",void 0),Object(o.a)([Object(l.b)()],J.prototype,"messages",void 0),Object(o.a)([Object(l.b)()],J.prototype,"palette",void 0),Object(o.a)([Object(l.b)()],J.prototype,"unit",void 0),Object(o.a)([Object(l.b)({constructOnly:!0})],J.prototype,"view",void 0);var Q=J=Object(o.a)([Object(b.a)("esri.widgets.AreaMeasurement2D.AreaMeasurement2DTool")],J),X=i(561),Y=i(940),Z={handleWidth:8,handleColor:[255,128,0,.5],pathWidth:2,pathColor:[255,128,0,1],fillColor:[255,128,0,.3]},$=c.a.getLogger("esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel"),ee=function(e){Object(n.a)(i,e);var t=Object(s.a)(i);function i(e){var r;return Object(a.a)(this,i),(r=t.call(this,e)).supportedViewType="2d",r._handles=new O.a,r.geodesicDistanceThreshold=1e5,r.measurement=null,r.measurementLabel=null,r.palette=Z,r.tool=null,r}return Object(r.a)(i,[{key:"initialize",value:function(){var e=this;this._handles.add([Object(f.a)(this,["unit","palette","geodesicDistanceThreshold"],(function(t,i,a){e.tool&&(e.tool[a]=t)}))])}},{key:"destroy",value:function(){this._handles&&(this._handles.destroy(),this._handles=null)}},{key:"state",get:function(){var e,t;return this.isDisabled?"disabled":null==(t=null==(e=this.view)?void 0:e.spatialReference)||K(t)&&!Object(E.h)()?"disabled":this.tool&&this.tool.measurement?this.tool.active?"measuring":"measured":"ready"}},{key:"unit",get:function(){return this._validateUnit(this.defaultUnit)},set:function(e){void 0!==e?this._override("unit",this._validateUnit(e)):this._clearOverride("unit")}},{key:"unitOptions",get:function(){return p.p},set:function(e){void 0!==e?this._override("unitOptions",this._validateUnits(e)):this._clearOverride("unitOptions")}},{key:"start",value:function(){return this.createTool()}},{key:"clear",value:function(){this.removeTool()}},{key:"createToolParams",value:function(){var e=this;return{toolConstructor:Q,constructorArguments:function(){return{geodesicDistanceThreshold:e.geodesicDistanceThreshold,palette:e.palette,unit:e.unit}}}}},{key:"logUnsupportedError",value:function(){$.error("AreaMeasurement2D widget is not implemented for SceneView")}},{key:"logError",value:function(){$.error.apply($,arguments)}},{key:"_validateUnit",value:function(e){return-1!==this.unitOptions.indexOf(e)?e:-1!==this.unitOptions.indexOf(this.defaultUnit)?this.defaultUnit:this.unitOptions[0]}},{key:"_validateUnits",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.filter((function(e){return-1!==p.p.indexOf(e)}));return 0===t.length?p.p.slice():t}}]),i}(Y.a);Object(o.a)([Object(l.b)(X.a)],ee.prototype,"defaultUnit",void 0),Object(o.a)([Object(l.b)({type:Number})],ee.prototype,"geodesicDistanceThreshold",void 0),Object(o.a)([Object(l.b)({readOnly:!0,aliasOf:"tool.measurement"})],ee.prototype,"measurement",void 0),Object(o.a)([Object(l.b)({readOnly:!0,aliasOf:"tool.measurementLabel"})],ee.prototype,"measurementLabel",void 0),Object(o.a)([Object(l.b)()],ee.prototype,"palette",void 0),Object(o.a)([Object(l.b)({readOnly:!0})],ee.prototype,"state",null),Object(o.a)([Object(l.b)({constructOnly:!0,readOnly:!0})],ee.prototype,"tool",void 0),Object(o.a)([Object(l.b)({type:String})],ee.prototype,"unit",null),Object(o.a)([Object(l.b)({type:[String]})],ee.prototype,"unitOptions",null);var te=ee=Object(o.a)([Object(b.a)("esri.widgets.AreaMeasurement2D.AreaMeasurement2DViewModel")],ee),ie="esri-area-measurement-2d",ae={buttonDisabled:"esri-button--disabled",widgetIcon:"esri-icon-measure-area",base:"".concat(ie," esri-widget esri-widget--panel"),container:"".concat(ie,"__container"),hint:"".concat(ie,"__hint"),hintText:"".concat(ie,"__hint-text"),panelError:"".concat(ie,"__panel--error"),measurement:"".concat(ie,"__measurement"),measurementItem:"".concat(ie,"__measurement-item"),measurementItemDisabled:"".concat(ie,"__measurement-item--disabled"),measurementItemTitle:"".concat(ie,"__measurement-item-title"),measurementItemValue:"".concat(ie,"__measurement-item-value"),settings:"".concat(ie,"__settings"),units:"".concat(ie,"__units"),unitsLabel:"".concat(ie,"__units-label"),unitsSelect:"".concat(ie,"__units-select esri-select"),unitsSelectWrapper:"".concat(ie,"__units-select-wrapper"),actionSection:"".concat(ie,"__actions"),newMeasurementButton:"".concat(ie,"__clear-button esri-button esri-button--primary")},re=function(e){Object(n.a)(i,e);var t=Object(s.a)(i);function i(e,r){var n;return Object(a.a)(this,i),(n=t.call(this,e,r)).active=null,n.iconClass=ae.widgetIcon,n.label=void 0,n.messages=null,n.messagesUnits=null,n.unit=null,n.unitOptions=null,n.view=null,n.viewModel=new te,n}return Object(r.a)(i,[{key:"render",value:function(){var e=this,t=this.id,i=this.viewModel,a=this.visible,r=i.active,n=i.isSupported,s=i.measurementLabel,o=i.state,c=i.unit,l=i.unitOptions,u="disabled"===o,b="ready"===o,h="measuring"===o||"measured"===o,d=this.messages,v=this.messagesUnits,m=r&&b?Object(y.a)("section",{key:"hint",class:ae.hint},Object(y.a)("p",{class:ae.hintText},d.hint)):null,O=n?null:Object(y.a)("section",{key:"unsupported",class:ae.panelError},Object(y.a)("p",null,d.unsupported)),f=function(t,i,a){return i?Object(y.a)("div",{key:"".concat(a,"-enabled"),class:ae.measurementItem},Object(y.a)("span",{class:ae.measurementItemTitle},t),Object(y.a)("span",{class:ae.measurementItemValue},i)):Object(y.a)("div",{key:"".concat(a,"-disabled"),class:e.classes(ae.measurementItem,ae.measurementItemDisabled),"aria-disabled":"true"},Object(y.a)("span",{class:ae.measurementItemTitle},t))},j=h?Object(y.a)("section",{key:"measurement",class:ae.measurement},f(d.area,s.area,"area"),f(d.perimeter,s.perimeter,"perimeter")):null,_="".concat(t,"__units"),g=Object(y.a)("section",{key:"units",class:ae.units},Object(y.a)("label",{class:ae.unitsLabel,for:_},d.unit),Object(y.a)("div",{class:ae.unitsSelectWrapper},Object(y.a)("select",{class:ae.unitsSelect,id:_,onchange:this._changeUnit,bind:this,value:c},l.map((function(e){var t;return Object(y.a)("option",{key:e,value:e},Object(p.l)(e)?v.systems[e]:null==(t=v.units[e])?void 0:t.pluralCapitalized)}))))),w=h?Object(y.a)("div",{key:"settings",class:ae.settings},g):null,k=!n||r&&!h?null:Object(y.a)("div",{class:ae.actionSection},Object(y.a)("button",{disabled:u,class:this.classes(ae.newMeasurementButton,u&&ae.buttonDisabled),bind:this,onclick:this._newMeasurement,title:d.newMeasurement,type:"button","aria-label":d.newMeasurement},d.newMeasurement)),S=a?Object(y.a)("div",{class:ae.container},O,m,w,j,k):null;return Object(y.a)("div",{class:ae.base},S)}},{key:"_newMeasurement",value:function(){Object(h.l)(this.viewModel.start())}},{key:"_changeUnit",value:function(e){var t=e.target,i=t.options[t.selectedIndex];i&&(this.viewModel.unit=i.value)}}]),i}(m.a);Object(o.a)([Object(u.a)("viewModel.active")],re.prototype,"active",void 0),Object(o.a)([Object(l.b)()],re.prototype,"iconClass",void 0),Object(o.a)([Object(l.b)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],re.prototype,"label",void 0),Object(o.a)([Object(l.b)(),Object(v.a)("esri/widgets/AreaMeasurement2D/t9n/AreaMeasurement2D")],re.prototype,"messages",void 0),Object(o.a)([Object(l.b)(),Object(v.a)("esri/core/t9n/Units")],re.prototype,"messagesUnits",void 0),Object(o.a)([Object(u.a)("viewModel.unit")],re.prototype,"unit",void 0),Object(o.a)([Object(u.a)("viewModel.unitOptions")],re.prototype,"unitOptions",void 0),Object(o.a)([Object(u.a)("viewModel.view")],re.prototype,"view",void 0),Object(o.a)([Object(l.b)({type:te})],re.prototype,"viewModel",void 0),Object(o.a)([Object(u.a)("viewModel.visible")],re.prototype,"visible",void 0),Object(o.a)([Object(d.a)()],re.prototype,"_newMeasurement",null),Object(o.a)([Object(d.a)()],re.prototype,"_changeUnit",null);var ne=re=Object(o.a)([Object(b.a)("esri.widgets.AreaMeasurement2D")],re);t.default=ne},863:function(e,t,i){"use strict";function a(e,t){return t?"xoffset"in t&&t.xoffset?Math.max(e,Math.abs(t.xoffset)):"yoffset"in t&&t.yoffset?Math.max(e,Math.abs(t.yoffset||0)):e:e}function r(e,t){return"number"==typeof e?e:e&&e.stops&&e.stops.length?function(e){for(var t=0,i=0,a=0;a<e.length;a++){var r=e[a].size;"number"==typeof r&&(t+=r,i++)}return t/i}(e.stops):t}function n(e,t){if(!t)return e;var i=t.filter((function(e){return"size"===e.type})).map((function(t){var i=t.maxSize,a=t.minSize;return(r(i,e)+r(a,e))/2})),a=0,n=i.length;if(0===n)return e;for(var s=0;s<n;s++)a+=i[s];var o=Math.floor(a/n);return Math.max(o,e)}function s(e){var t=e&&e.renderer,i="touch"===(e&&e.event&&e.event.pointerType)?9:6;if(!t)return i;var r="visualVariables"in t?n(i,t.visualVariables):i;if("simple"===t.type)return a(r,t.symbol);if("unique-value"===t.type){var s=r;return t.uniqueValueInfos.forEach((function(e){s=a(s,e.symbol)})),s}if("class-breaks"===t.type){var o=r;return t.classBreakInfos.forEach((function(e){o=a(o,e.symbol)})),o}return t.type,r}i.d(t,"a",(function(){return s}))},873:function(e,t,i){"use strict";i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return c}));var a=i(6),r=i(57),n=(i(78),i(62)),s=i(863);function o(e,t,i){var s,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new r.a;if("2d"===i.type)s=t*i.resolution;else if("3d"===i.type){var c=i.overlayPixelSizeInMapUnits(e),l=i.basemapSpatialReference;s=Object(a.k)(l)&&!l.equals(i.spatialReference)?Object(n.f)(l)/Object(n.f)(i.spatialReference):t*c}var u=e.x-s,b=e.y-s,h=e.x+s,p=e.y+s,d=i.spatialReference;return o.xmin=Math.min(u,h),o.ymin=Math.min(b,p),o.xmax=Math.max(u,h),o.ymax=Math.max(b,p),o.spatialReference=d,o}function c(e,t,i){var r=i.toMap(e);return!Object(a.j)(r)&&o(r,Object(s.a)(),i,l).intersects(t)}var l=new r.a},908:function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var a=i(2),r=i(3),n=i(4),s=i(5),o=i(0),c=(i(14),i(6)),l=i(12),u=(i(17),i(1)),b=i(8),h=(i(11),i(18),i(19),i(31)),p=i(70),d=i(37),v=i(26),y=i(13),m=i(130),O=i(438),f=i(538),j=i(34),_=i(149),g=i(873),w=l.a.getLogger("esri.views.interactive.GraphicManipulator"),k=function(e){Object(n.a)(i,e);var t=Object(s.a)(i);function i(e){var r;return Object(a.a)(this,i),(r=t.call(this,e)).layer=null,r.interactive=!0,r.selectable=!1,r.grabbable=!0,r.dragging=!1,r.cursor=null,r.events=new p.a.EventEmitter,r._circleCollisionCache=null,r._graphicSymbolChangedHandle=null,r._originalSymbol=null,r}return Object(r.a)(i,[{key:"graphic",set:function(e){"mesh"!==Object(c.i)(e.geometry,"type")?(this._circleCollisionCache=null,this._originalSymbol=e.symbol,this._set("graphic",e),this.attachSymbolChanged()):w.error("Mesh geometries are not supported")}},{key:"elevationInfo",get:function(){var e="elevationInfo"in this.graphic.layer&&this.graphic.layer.elevationInfo,t=Object(_.e)(this.graphic),i=e?e.offset:0;return new O.a({mode:t,offset:i})}},{key:"focusedSymbol",set:function(e){e!==this._get("focusedSymbol")&&(this._set("focusedSymbol",e),this._updateGraphicSymbol(),this._circleCollisionCache=null)}},{key:"grabbableForEvent",value:function(){return!0}},{key:"grabbing",set:function(e){e!==this._get("grabbing")&&(this._set("grabbing",e),this._updateGraphicSymbol())}},{key:"hovering",set:function(e){e!==this._get("hovering")&&(this._set("hovering",e),this._updateGraphicSymbol())}},{key:"selected",set:function(e){e!==this._get("selected")&&(this._set("selected",e),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:e?"select":"deselect"}))}},{key:"_focused",get:function(){return this._get("hovering")||this._get("grabbing")}},{key:"destroy",value:function(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}},{key:"intersectionDistance",value:function(e){var t=this.graphic;if(!1===t.visible)return null;var i=t.geometry;if(Object(c.j)(i))return null;var a=this._get("focusedSymbol"),r=Object(c.k)(a)?a:t.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,e,i,r):this._intersectDistance3D(this.view,e,t)}},{key:"attach",value:function(){this.attachSymbolChanged(),Object(c.k)(this.layer)&&this.layer.add(this.graphic)}},{key:"detach",value:function(){this.detachSymbolChanged(),this._resetGraphicSymbol(),Object(c.k)(this.layer)&&this.layer.remove(this.graphic)}},{key:"attachSymbolChanged",value:function(){var e=this;this.detachSymbolChanged(),this._graphicSymbolChangedHandle=this.graphic.watch("symbol",(function(t){Object(c.k)(t)&&t!==e.focusedSymbol&&t!==e._originalSymbol&&(e._originalSymbol=t,e._focused&&Object(c.k)(e.focusedSymbol)&&(e.graphic.symbol=e.focusedSymbol))}),!0)}},{key:"detachSymbolChanged",value:function(){Object(c.k)(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}},{key:"_updateGraphicSymbol",value:function(){this.graphic.symbol=this._focused&&Object(c.k)(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}},{key:"_resetGraphicSymbol",value:function(){this.graphic.symbol=this._originalSymbol}},{key:"_intersectDistance2D",value:function(e,t,i,a){if(a=a||Object(f.e)(i),Object(c.j)(a))return null;var r=this._circleCollisionCache;if("point"!==i.type||"simple-marker"!==a.type)return Object(g.b)(t,i,e)?1:null;if(Object(c.j)(r)||!r.originalPoint.equals(i)){var n=i,s=e.spatialReference;if(Object(m.b)(n.spatialReference,s)){var o=Object(m.j)(n,s);r={originalPoint:n.clone(),mapPoint:o,radiusPx:Object(d.h)(a.size)},this._circleCollisionCache=r}}if(Object(c.k)(r)){var l=Object(d.j)(t,M),u=e.toScreen(r.mapPoint),b=r.radiusPx,h=u.x+Object(d.h)(a.xoffset),p=u.y-Object(d.h)(a.yoffset);return Object(j.j)(l,[h,p])<b*b?1:null}return null}},{key:"_intersectDistance3D",value:function(e,t,i){var a=e.toMap(t,{include:[i]});return a&&Object(m.o)(a,S,e.renderSpatialReference)?Object(y.n)(S,e.state.camera.eye):null}}]),i}(h.a);Object(o.a)([Object(u.b)({constructOnly:!0,nonNullable:!0})],k.prototype,"graphic",null),Object(o.a)([Object(u.b)({readOnly:!0})],k.prototype,"elevationInfo",null),Object(o.a)([Object(u.b)({constructOnly:!0,nonNullable:!0})],k.prototype,"view",void 0),Object(o.a)([Object(u.b)({value:null})],k.prototype,"focusedSymbol",null),Object(o.a)([Object(u.b)({constructOnly:!0})],k.prototype,"layer",void 0),Object(o.a)([Object(u.b)()],k.prototype,"interactive",void 0),Object(o.a)([Object(u.b)()],k.prototype,"selectable",void 0),Object(o.a)([Object(u.b)()],k.prototype,"grabbable",void 0),Object(o.a)([Object(u.b)({value:!1})],k.prototype,"grabbing",null),Object(o.a)([Object(u.b)()],k.prototype,"dragging",void 0),Object(o.a)([Object(u.b)()],k.prototype,"hovering",null),Object(o.a)([Object(u.b)({value:!1})],k.prototype,"selected",null),Object(o.a)([Object(u.b)()],k.prototype,"cursor",void 0),k=Object(o.a)([Object(b.a)("esri.views.interactive.GraphicManipulator")],k);var S=Object(v.e)(),M=Object(d.g)()},924:function(e,t,i){"use strict";i.r(t);var a=i(2),r=i(3),n=i(39),s=i(4),o=i(5),c=i(0),l=(i(14),i(6)),u=(i(12),i(17),i(86)),b=i(1),h=i(8),p=i(42),d=(i(11),i(18),i(19),i(358)),v=i(406),y=i(180),m=i(567),O=i(568),f=i(193),j=i(294),_=i(297),g=i(293),w=i(295),k=function(e){Object(s.a)(i,e);var t=Object(o.a)(i);function i(e){var r;return Object(a.a)(this,i),(r=t.call(this,e))._visibilityHandles={},r.fullExtent=void 0,r.operationalLayerType="GroupLayer",r.spatialReference=void 0,r.type="group",r._visibilityWatcher=r._visibilityWatcher.bind(Object(n.a)(r)),r}return Object(r.a)(i,[{key:"initialize",value:function(){this._enforceVisibility(this.visibilityMode,this.visible),this.watch("visible",this._visibleWatcher.bind(this),!0)}},{key:"_writeLayers",value:function(e,t,i,a){var r=[];if(!e)return r;e.forEach((function(e){var t=Object(v.a)(e,a.webmap?a.webmap.getLayerJSONFromResourceInfo(e):null,a);Object(l.k)(t)&&t.layerType&&r.push(t)})),t.layers=r}},{key:"portalItem",set:function(e){this._set("portalItem",e)}},{key:"visibilityMode",set:function(e){var t=this._get("visibilityMode")!==e;this._set("visibilityMode",e),t&&this._enforceVisibility(e,this.visible)}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]},e)),Promise.resolve(this)}},{key:"loadAll",value:function(){var e=this;return Object(d.a)(this,(function(t){t(e.layers)}))}},{key:"layerAdded",value:function(e){e.visible&&"exclusive"===this.visibilityMode?this._turnOffOtherLayers(e):"inherited"===this.visibilityMode&&(e.visible=this.visible),this._visibilityHandles[e.uid]=e.watch("visible",this._visibilityWatcher,!0)}},{key:"layerRemoved",value:function(e){var t=this._visibilityHandles[e.uid];t&&(t.remove(),delete this._visibilityHandles[e.uid]),this._enforceVisibility(this.visibilityMode,this.visible)}},{key:"_turnOffOtherLayers",value:function(e){this.layers.forEach((function(t){t!==e&&(t.visible=!1)}))}},{key:"_enforceVisibility",value:function(e,t){if(Object(u.a)(this).initialized){var i=this.layers,a=i.find((function(e){return e.visible}));switch(e){case"exclusive":i.length&&!a&&((a=i.getItemAt(0)).visible=!0),this._turnOffOtherLayers(a);break;case"inherited":i.forEach((function(e){e.visible=t}))}}}},{key:"_visibleWatcher",value:function(e){"inherited"===this.visibilityMode&&this.layers.forEach((function(t){t.visible=e}))}},{key:"_visibilityWatcher",value:function(e,t,i,a){var r=a;switch(this.visibilityMode){case"exclusive":e?this._turnOffOtherLayers(r):this._isAnyLayerVisible()||(r.visible=!0);break;case"inherited":r.visible=this.visible}}},{key:"_isAnyLayerVisible",value:function(){return this.layers.some((function(e){return e.visible}))}}]),i}(Object(_.a)(Object(w.a)(Object(j.a)(Object(g.a)(Object(O.a)(Object(m.a)(Object(f.a)(y.a))))))));Object(c.a)([Object(b.b)()],k.prototype,"fullExtent",void 0),Object(c.a)([Object(b.b)({json:{read:!1,write:{ignoreOrigin:!0}}})],k.prototype,"layers",void 0),Object(c.a)([Object(p.a)("layers")],k.prototype,"_writeLayers",null),Object(c.a)([Object(b.b)({type:["GroupLayer"]})],k.prototype,"operationalLayerType",void 0),Object(c.a)([Object(b.b)({json:{origins:{"web-document":{read:!1,write:!1}}}})],k.prototype,"portalItem",null),Object(c.a)([Object(b.b)()],k.prototype,"spatialReference",void 0),Object(c.a)([Object(b.b)({json:{read:!1},readOnly:!0,value:"group"})],k.prototype,"type",void 0),Object(c.a)([Object(b.b)({type:["independent","inherited","exclusive"],value:"independent",json:{write:!0,origins:{"web-map":{read:!1,write:!1}}}})],k.prototype,"visibilityMode",null);var S=k=Object(c.a)([Object(h.a)("esri.layers.GroupLayer")],k);t.default=S},940:function(e,t,i){"use strict";i.d(t,"a",(function(){return j}));var a=i(7),r=i.n(a),n=i(10),s=i(16),o=i(15),c=i(2),l=i(3),u=i(4),b=i(5),h=i(0),p=(i(14),i(12),i(17),i(1)),d=i(8),v=i(20),y=(i(11),i(18),i(19),i(31)),m=i(49),O=i(25),f=i(197),j=function(e){Object(u.a)(i,e);var t=Object(b.a)(i);function i(e){var a;return Object(c.a)(this,i),(a=t.call(this,e)).tool=null,a._baseHandles=new m.a,a._loggedUnsupportedErrorOnce=!1,a._creationAbortController=null,e&&null!=e.visible&&(a.visible=e.visible),a}return Object(l.a)(i,[{key:"initialize",value:function(){var e=this;this._baseHandles.add(Object(O.a)(this,["view.ready","isSupported"],(function(){e.view&&e.view.ready&&!e.isSupported?e._loggedUnsupportedErrorOnce||(e.logUnsupportedError(),e._loggedUnsupportedErrorOnce=!0):e._loggedUnsupportedErrorOnce=!1})))}},{key:"destroy",value:function(){this.removeTool(),this.view=null,this._baseHandles.destroy(),this._baseHandles=null}},{key:"isSupported",get:function(){return!this.view||this.view.type===this.supportedViewType}},{key:"view",get:function(){return this._get("view")},set:function(e){var t=this;if(e!==this.view){this.removeTool(),this._set("view",e);var i="tools";this._baseHandles.remove(i),e&&this._baseHandles.add(e.tools.on("change",(function(e){if(t.tool){var i,a=Object(o.a)(e.removed);try{for(a.s();!(i=a.n()).done;){var r=i.value;if(t.tool===r){r.destroyed||r.destroy(),t._set("tool",null);break}}}catch(n){a.e(n)}finally{a.f()}}})),i)}}},{key:"visible",set:function(e){this._set("visible",e),this.tool&&(this.tool.visible=e),!e&&this._creationAbortController&&(this._creationAbortController.abort(),this._creationAbortController=null)}},{key:"active",get:function(){return null!=this._creationAbortController||null!=this.tool&&this.tool.active}},{key:"isDisabled",get:function(){return!this.view||!this.view.ready||!this.isSupported}},{key:"creatingTool",get:function(){return!!this._creationAbortController}},{key:"createTool",value:function(){var e=Object(s.a)(r.a.mark((function e(){var t,i,a,s,o,c,l=this;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.removeTool(),this.isSupported){e.next=2;break}return e.abrupt("return",Promise.reject(new v.a("tool:create","The view does not support the tool")));case 2:return t=this.createToolParams(),i=function(){var e=Object(f.b)(t.constructorArguments);return Object(n.a)({visible:l.visible},e)},a=new AbortController,s=a.signal,this._creationAbortController=a,o=function(){a===l._creationAbortController&&(l._creationAbortController=null)},e.prev=5,e.next=8,this.view.createTool(t.toolConstructor,i,{signal:s});case 8:c=e.sent,this._set("tool",c),o(),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(5),o(),e.t0;case 15:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"removeTool",value:function(){this._creationAbortController&&this._creationAbortController.abort(),this._creationAbortController=null;var e=this.tool;e&&(this.view&&this.view.tools&&this.view.tools.remove(e),e.destroyed||e.destroy(),this._set("tool",null))}}]),i}(y.a);Object(h.a)([Object(p.b)({constructOnly:!0})],j.prototype,"tool",void 0),Object(h.a)([Object(p.b)()],j.prototype,"isSupported",null),Object(h.a)([Object(p.b)({value:null})],j.prototype,"view",null),Object(h.a)([Object(p.b)({type:Boolean,value:!0})],j.prototype,"visible",null),Object(h.a)([Object(p.b)()],j.prototype,"active",null),Object(h.a)([Object(p.b)()],j.prototype,"isDisabled",null),Object(h.a)([Object(p.b)()],j.prototype,"_creationAbortController",void 0),Object(h.a)([Object(p.b)({readOnly:!0})],j.prototype,"creatingTool",null),j=Object(h.a)([Object(d.a)("esri.widgets.support.InteractiveToolViewModel")],j)}}]);
//# sourceMappingURL=59.92babd33.chunk.js.map