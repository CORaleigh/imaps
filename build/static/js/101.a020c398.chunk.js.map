{"version":3,"sources":["../node_modules/@arcgis/core/views/3d/interactive/graphics/analysisFactoryUtils.js","../node_modules/@arcgis/core/views/3d/support/PropertiesPool.js","../node_modules/@arcgis/core/views/3d/interactive/graphics/DirectLineMeasurement3D/DirectLineMeasurement3D.js","../node_modules/@arcgis/core/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DModel.js","../node_modules/@arcgis/core/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DView.js","../node_modules/@arcgis/core/views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DTool.js","../node_modules/@arcgis/core/widgets/DirectLineMeasurement3D/DirectLineMeasurement3DViewModel.js","../node_modules/@arcgis/core/widgets/DirectLineMeasurement3D.js","../node_modules/@arcgis/core/widgets/support/InteractiveToolViewModel.js","../node_modules/@arcgis/core/views/3d/interactive/measurementTools/support/viewUtils.js"],"names":["n","e","a","r","i","Promise","all","then","viewConstructor","DirectLineMeasurement3DView","controllerConstructor","DirectLineMeasurement3DController","o","t","this","owner","properties","afterDispatchHandle","s","pool","acquired","release","remove","destroy","_get","acquire","push","length","arguments","type","visible","settings","measurement","_set","clone","prototype","value","unit","l","_handles","_propertiesPool","c","startPoint","endPoint","model","u","cursorPoint","state","active","geodesicMeasurementDistanceThreshold","sceneView","analyses","add","reset","startPointSurfaceLocation","endPointSurfaceLocation","horizontalDistance","clearMeasurement","_clearOverride","_isOverridden","measurementSurfaceLocation","camera","aboveGround","_override","constructOnly","readOnly","v","f","m","L","laserLineGlowColor","laserLineGlowWidth","laserLineGlowFalloff","laserLineInnerColor","laserLineInnerWidth","laserLineGlobalAlpha","laserLineEnabled","handleColor","handleOpacity","handleRadius","P","_state","_visible","_laserLine","_listenerHandles","_cursorPosition","h","_startPosition","_endPosition","_lastDraggedHandle","dataObjectView","_view","_params","params","b","_intersector","p","mode","options","store","getAnalysisView","_initialize","whenAnalysisView","view","attached","_initializeListeners","hide","_destroyListeners","show","None","viewMode","Direct","Triangle","ProjectedGeodesic","testData","labels","direct","horizontal","vertical","stripeLength","laserLineRenderer","heightManifoldEnabled","heightManifoldTarget","pointDistanceEnabled","pointDistanceOrigin","pointDistanceTarget","lineVerticalPlaneEnabled","segmentLabel","text","horizontalLabel","verticalLabel","g","available","radius","location","grabbing","_updateLaserLine","events","on","start","end","style","innerColor","innerWidth","glowColor","glowWidth","glowFalloff","globalAlpha","_updateCursorPosition","_updateStartPosition","_updateEndPosition","cursor","spatialReference","d","screenPoint","sceneIntersectionHelper","intersectToolIntersectorScreen","results","min","getIntersectionPoint","PickResult","renderCoordsHelper","fromRenderCoords","intersector","basemapTerrain","ready","elevationProvider","w","toRenderCoords","visualizedMeasurement","_getFocusPosition","actualVisualizedMeasurement","pointDistanceLine","origin","_getFocusSpherePosition","target","lineVerticalPlaneSegment","_","fromPoints","j","watch","allowVisualElementsOrientationChange","PickRequest","scenePoint","mapPoint","create","y","_cachedPickRequest","_cachedPickResult","_isAnyPointerDown","deferCreation","startManipulator","endManipulator","complete","directLineMeasurementView","createManipulators","next","action","mapEnd","M","_surfaceLocation","surfaceType","forEach","finishMeasurement","manipulators","isMeasuring","get","_updateManipulatorVisibility","_handleImmediateClick","_handlePointerMove","_handlePointerDown","_handlePointerUp","_clearCachedPickRequest","pointerType","_hoverAt","emit","stopPropagation","button","interactive","requiresCursorPoint","_pick","x","pick","z","getElevation","getLogger","supportedViewType","_userUnitOptions","_userUnit","tool","isDisabled","directDistance","verticalDistance","directLabelText","horizontalLabelText","verticalLabelText","_filteredOrAllUnits","_findSelectableUnit","defaultUnit","notifyChange","createTool","removeTool","toolConstructor","constructorArguments","error","unitOptions","indexOf","slice","filter","buttonDisabled","base","container","hint","hintText","panelError","measurementItem","measurementItemDisabled","measurementItemTitle","measurementItemValue","units","unitsLabel","unitsSelect","unitsSelectWrapper","actionSection","newMeasurementButton","widgetIcon","iconClass","label","messages","messagesUnits","viewModel","isSupported","key","class","unsupported","classes","id","for","onchange","_changeUnit","bind","map","systems","pluralCapitalized","$","disabled","onclick","_newMeasurement","newMeasurement","role","selectedIndex","preload","aliasOf","source","overridable","_baseHandles","_loggedUnsupportedErrorOnce","_creationAbortController","logUnsupportedError","tools","removed","destroyed","abort","reject","createToolParams","AbortController","signal","Boolean","pop","k","projectToRenderScreen","H","U","R","C","renderToScreen","S"],"mappings":"kVAI+OA,E,8EAAf,WAAiBC,GAAjB,SAAAC,EAAA,sEAA0BC,EAAEF,GAA5B,4C,+BAA8CE,E,8EAAf,WAAiBF,GAAjB,SAAAC,EAAA,sDAAoB,KAAKD,KAAKG,GAAG,OAAOH,GAAG,IAAI,0BAA0BG,EAAEH,GAAGI,QAAQC,IAAI,CAAC,sDAAmE,kCAA2EC,MAAM,SAAAN,GAAC,MAAG,CAACO,gBAAgBP,EAAE,GAAGQ,4BAA4BC,sBAAsBT,EAAE,GAAGU,sCAAhU,yBAA6WP,EAAEH,IAA/W,4C,sBAAkX,IAAMG,EAAE,G,wHCA/cQ,E,WAAE,WAAYT,EAAES,GAAE,WAA+D,IAAI,IAAMC,KAAzE,oBAACC,KAAKC,MAAMH,EAAEE,KAAKE,WAAW,GAAGF,KAAKG,oBAAoB,KAAoBd,EAAE,CAAC,IAAMS,EAAET,EAAEU,GAAGK,EAAE,IAAIjB,IAAEW,EAAE,KAAK,KAAK,EAAE,GAAGE,KAAKE,WAAWH,GAAG,CAACM,KAAKD,EAAEE,SAAS,IAAIN,KAAKG,oBAAoBJ,aAAG,kBAAI,EAAKQ,a,2CAAY,WAAsG,IAAI,IAAMpB,KAAtGa,KAAKG,sBAAsBH,KAAKG,oBAAoBK,SAASR,KAAKG,oBAAoB,MAAqBH,KAAKE,WAAW,CAAC,IAAD,EAAOH,EAAEC,KAAKE,WAAWf,GAAzB,cAA2CY,EAAEO,UAA7C,IAA4B,gCAAUnB,EAAV,QAA0BE,YAAEF,IAAIY,EAAEM,KAAKE,QAAQpB,IAA3E,8BAA8EY,EAAEM,KAAKI,UAAUV,EAAEM,KAAK,KAAKN,EAAEO,SAAS,KAAKN,KAAKE,WAAW,KAAKF,KAAKC,MAAM,O,iBAAK,SAAId,GAAG,IAAMY,EAAEC,KAAKC,MAAMS,KAAKvB,GAAGE,EAAEW,KAAKE,WAAWf,GAAOW,EAAET,EAAEgB,KAAKM,UAAU,IAAItB,EAAEiB,SAASM,KAAKd,GAAGA,IAAIC,GAAGV,EAAEiB,SAASM,KAAKd,GAAGA,EAAET,EAAEgB,KAAKM,UAAU,OAAOb,I,qBAAE,WAAU,IAAI,IAAMX,KAAKa,KAAKE,WAAW,CAAC,IAAD,EAAOH,EAAEC,KAAKE,WAAWf,GAAOW,EAAE,EAAlC,cAAmDC,EAAEO,UAArD,IAAoC,gCAAUnB,EAAV,QAA0BE,YAAEF,GAAGY,EAAEO,SAASR,KAAKX,EAAEY,EAAEM,KAAKE,QAAQpB,IAApG,8BAAuGY,EAAEO,SAASO,OAAOf,O,KCAxZR,EAAC,kDAAiB,aAAa,kCAAC,eAASwB,YAAgBC,KAAK,0BAA0B,EAAKC,SAAQ,EAAG,EAAKC,SAAS,IAAI/B,EAAE,EAAKgC,YAAY,KAA9G,EAA9B,2CAAiJ,WAAUlB,KAAKiB,SAASR,YAAzK,sBAAmL,SAAetB,GAAGa,KAAKkB,YAAY,KAAKlB,KAAKmB,KAAK,aAAapB,YAAEZ,GAAGA,EAAEiC,QAAQ,QAAjQ,oBAAuQ,SAAajC,GAAGa,KAAKkB,YAAY,KAAKlB,KAAKmB,KAAK,WAAWpB,YAAEZ,GAAGA,EAAEiC,QAAQ,UAAjV,GAAetB,KAA0UX,YAAE,CAACiB,eAAKd,EAAE+B,UAAU,YAAO,GAAQlC,YAAE,CAACiB,eAAKd,EAAE+B,UAAU,eAAU,GAAQlC,YAAE,CAACiB,eAAKd,EAAE+B,UAAU,gBAAW,GAAQlC,YAAE,CAACiB,YAAE,CAACkB,MAAM,QAAQhC,EAAE+B,UAAU,aAAa,MAAMlC,YAAE,CAACiB,YAAE,CAACkB,MAAM,QAAQhC,EAAE+B,UAAU,WAAW,MAAMlC,YAAE,CAACiB,eAAKd,EAAE+B,UAAU,mBAAc,GAAQ/B,EAAEH,YAAE,CAACE,YAAE,uFAAuFC,GAAG,IAAIJ,EAAC,kDAAiB,aAAa,kCAAC,eAAS4B,YAAgBS,KAAK,SAA/B,EAA9B,UAAezB,KAAyDX,YAAE,CAACiB,YAAE,CAACkB,MAAM,YAAYpC,EAAEmC,UAAU,YAAO,GAAQnC,EAAEC,YAAE,CAACE,YAAE,wEAAwEH,GCA1iB,IAAIsC,EAAC,kDAAiB,aAAa,kCAAC,eAASV,YAAgBW,SAAS,IAAIvC,IAAE,EAAKwC,gBAAgB,IAAIC,EAAE,CAACC,WAAWxC,IAAEyC,SAASzC,KAA7B,gBAAsC,EAAK0C,MAAM,IAAIC,EAAE,EAAKC,YAAY,KAAK,EAAKC,MAAM,UAAU,EAAKC,QAAO,EAAG,EAAKC,qCAAqC,IAAzN,EAA9B,8CAA2P,WAAanC,KAAKoC,UAAUC,SAASC,IAAItC,KAAK8B,OAAO9B,KAAKuC,UAArT,qBAA6T,WAAUvC,KAAKyB,SAAShB,UAAUT,KAAKyB,SAAS,KAAKzB,KAAKoC,UAAUC,SAAS7B,OAAOR,KAAK8B,OAAO9B,KAAK0B,gBAAgBjB,UAAUT,KAAK0B,gBAAgB,KAAK1B,KAAK8B,MAAMrB,YAAje,qCAA2e,SAA8BtB,GAAGa,KAAKmB,KAAK,4BAA4BhC,KAAljB,mCAAqjB,SAA4BA,GAAGa,KAAKmB,KAAK,0BAA0BhC,KAAxnB,sCAA2nB,WAAiC,IAAMA,EAAEa,KAAKwC,0BAA0BzC,EAAEC,KAAKyC,wBAAwB,OAAO,MAAMtD,GAAG,MAAMY,GAAG,sBAAsBZ,GAAG,sBAAsBY,GAAG,sBAAsBZ,GAAG,sBAAsBY,GAAG,mBAAmBZ,GAAG,mBAAmBY,EAAE,mBAAmB,sBAAsBZ,GAAG,sBAAsBY,EAAE,oBAAoB,sBAAl+B,4BAAs/B,WAAuB,OAAOA,YAAEC,KAAK8B,MAAMF,aAAa7B,YAAEC,KAAK8B,MAAMD,YAA3jC,uBAAqkC,WAAkB,QAAQ7B,KAAK4B,aAApmC,oCAA+mC,WAA+B,OAAO7B,YAAEC,KAAK8B,MAAMZ,cAAclB,KAAK8B,MAAMZ,YAAYwB,oBAAoB1C,KAAK8B,MAAMZ,YAAYwB,mBAAmBpB,MAAMtB,KAAKmC,uCAAhxC,mBAAqzC,WAAQnC,KAAK2C,qBAAl0C,8BAAq1C,WAAmB3C,KAAKiC,MAAM,UAAUjC,KAAK4B,WAAW,KAAK5B,KAAK6B,SAAS,KAAK7B,KAAKgC,YAAY,KAAKhC,KAAK4C,eAAe,gCAA/8C,+BAA6+C,WAAoB,IAAI5C,KAAK6C,cAAc,8BAA8B,CAAC,IAAM1D,EAAEa,KAAK8C,2BAA2B/C,EAAE,qBAAqBZ,EAAEa,KAAKoC,UAAUH,MAAMc,OAAOC,YAAY,oBAAoB,oBAAoB7D,EAAEa,KAAKiD,UAAU,6BAA6BlD,GAAGC,KAAKiC,MAAM,eAApwD,GAAe3C,KAAkwDH,YAAE,CAACW,eAAK0B,EAAEH,UAAU,gBAAW,GAAQlC,YAAE,CAACW,YAAE,CAACoD,eAAc,KAAM1B,EAAEH,UAAU,iBAAY,GAAQlC,YAAE,CAACW,eAAK0B,EAAEH,UAAU,aAAQ,GAAQlC,YAAE,CAACE,YAAE,qBAAqBmC,EAAEH,UAAU,kBAAa,GAAQlC,YAAE,CAACW,YAAE,CAACwB,MAAM,QAAQE,EAAEH,UAAU,4BAA4B,MAAMlC,YAAE,CAACE,YAAE,mBAAmBmC,EAAEH,UAAU,gBAAW,GAAQlC,YAAE,CAACW,YAAE,CAACwB,MAAM,QAAQE,EAAEH,UAAU,0BAA0B,MAAMlC,YAAE,CAACW,eAAK0B,EAAEH,UAAU,6BAA6B,MAAMlC,YAAE,CAACW,eAAK0B,EAAEH,UAAU,mBAAc,GAAQlC,YAAE,CAACW,eAAK0B,EAAEH,UAAU,aAAQ,GAAQlC,YAAE,CAACE,YAAE,wBAAwBmC,EAAEH,UAAU,YAAO,GAAQlC,YAAE,CAACW,eAAK0B,EAAEH,UAAU,cAAS,GAAQlC,YAAE,CAACW,YAAE,CAACqD,UAAS,KAAM3B,EAAEH,UAAU,mBAAmB,MAAMlC,YAAE,CAACW,YAAE,CAACqD,UAAS,KAAM3B,EAAEH,UAAU,cAAc,MAAMlC,YAAE,CAACW,eAAK0B,EAAEH,UAAU,4CAAuC,GAAQlC,YAAE,CAACW,YAAE,CAACqD,UAAS,KAAM3B,EAAEH,UAAU,2BAA2B,MAAoH,ICAp4E+B,EAAyjOC,EAA6gBlE,EDA3qKmE,EAArI9B,EAAErC,YAAE,CAACiB,YAAE,oGAAoGoB,G,qFCAz3E+B,GAAE,CAACC,mBAAmB,CAAC,EAAE,GAAG,GAAGC,mBAAmB,EAAEC,qBAAqB,EAAEC,oBAAoB,CAAC,EAAE,EAAE,GAAGC,oBAAoB,IAAIC,qBAAqB,IAAIC,kBAAiB,EAAGC,YAAY,CAAC,EAAE,GAAG,GAAGC,cAAc,GAAGC,aAAa,GAAOC,GAAEd,EAAC,kDAAiB,WAAYjE,GAAE,kCAAC,cAAM,CAAC2C,MAAM3C,EAAE2C,SAAaqC,OAAO,UAAU,EAAKC,UAAS,EAAG,EAAKC,WAAW,KAAK,EAAK5C,SAAS,IAAIE,IAAE,EAAK2C,iBAAiB,KAAK,EAAKC,gBAAgBC,eAAI,EAAKC,eAAeD,eAAI,EAAKE,aAAaF,eAAI,EAAKG,mBAAmB,KAAK,EAAKC,eAAe,KAAK,EAAKC,MAAM1F,EAAE2C,MAAMM,UAAU,EAAK0C,QAAQ3F,EAAE4F,OAAOC,aAAEzB,GAAEpE,EAAE4F,QAAQC,aAAEzB,GAAE,IAAI,EAAK0B,aAAa,IAAIC,KAAE,EAAKL,MAAM5C,MAAMkD,MAAM,EAAKF,aAAaG,QAAQC,MAAM,EAAxZ,EAA/B,8CAAyb,WAAY,WAAOlG,EAAEa,KAAK8B,MAAMA,MAAMxC,EAAEU,KAAK6E,MAAMS,gBAAgBnG,GAAGY,YAAET,GAAGU,KAAKuF,YAAYjG,GAAGU,KAAK6E,MAAMW,iBAAiBrG,GAAGM,MAAM,SAAAN,GAAC,OAAE,EAAKoG,YAAYpG,QAAjlB,yBAAslB,SAAYA,GAAG,OAAOa,KAAKmE,QAAQ,IAAI,UAAU,MAAM,IAAI,YAAY,OAAOnE,KAAKmB,KAAK,iBAAiBhC,GAAGa,KAAKqE,WAAW,IAAIf,KAAE,CAACmC,KAAKzF,KAAK6E,MAAMa,UAAS,IAAK1F,KAAK2F,uBAAuB3F,KAAKmE,OAAO,UAA/xB,qBAAuyB,WAAU,OAAOnE,KAAKmE,QAAQ,IAAI,UAAU,YAAYnE,KAAKmE,OAAO,aAAa,IAAI,QAAQ,MAAM,IAAI,YAAY,QAAQ,OAAOnE,KAAK4F,OAAO5F,KAAK6F,oBAAoB7F,KAAKyB,SAAShB,UAAUT,KAAKyB,SAAS,KAAKzB,KAAKqE,WAAW5D,UAAUT,KAAKqE,WAAW,KAAKrE,KAAKmE,OAAO,cAApjC,+BAAgkC,WAA0B,MAAM,YAAYnE,KAAK8B,MAAMG,OAAOjC,KAAK8B,MAAMI,SAAzoC,mBAAgpC,WAAc,OAAOlC,KAAKoE,UAA1qC,IAAmrC,SAAYjF,GAAGA,EAAEa,KAAK8F,OAAO9F,KAAK4F,SAArtC,oBAA4tC,WAAe,IAAMzG,EAAEa,KAAK4E,eAAe,IAAI7E,YAAEZ,GAAG,OAAOkE,EAAE0C,KAAK,OAAO5G,EAAE6G,UAAU,QAAQ,IAAI,OAAO,OAAO3C,EAAE0C,KAAK,IAAI,UAAU,OAAO1C,EAAE4C,OAAO,IAAI,uBAAuB,OAAO5C,EAAE6C,SAAS,IAAI,yBAAyB,OAAO7C,EAAE8C,qBAAn8C,oBAAs9C,WAAe,IAAMhH,EAAEa,KAAKqE,WAAW+B,SAAS,kCAAUrG,YAAEC,KAAK4E,gBAAgB5E,KAAK4E,eAAewB,SAAS,CAACC,OAAO,CAACC,OAAO,KAAKC,WAAW,KAAKC,SAAS,MAAMC,aAAa,IAA/H,IAAkIC,kBAAkB,CAACC,wBAAwB5G,YAAEZ,IAAIA,EAAEwH,sBAAsBC,qBAAqB7G,YAAEZ,GAAGA,EAAEyH,qBAAqB,KAAKC,uBAAuB9G,YAAEZ,IAAIA,EAAE0H,qBAAqBC,oBAAoB/G,YAAEZ,GAAGA,EAAE2H,oBAAoB,KAAKC,oBAAoBhH,YAAEZ,GAAGA,EAAE4H,oBAAoB,KAAKC,2BAA2BjH,YAAEZ,IAAIA,EAAE6H,8BAAt8D,2BAAi+D,WAAsB,OAAOjH,YAAEC,KAAK4E,gBAAgB5E,KAAK4E,eAAeqC,aAAaC,KAAK,OAA3jE,+BAAgkE,WAA0B,OAAOnH,YAAEC,KAAK4E,gBAAgB5E,KAAK4E,eAAeuC,gBAAgBD,KAAK,OAAjqE,6BAAsqE,WAAwB,OAAOnH,YAAEC,KAAK4E,gBAAgB5E,KAAK4E,eAAewC,cAAcF,KAAK,OAAnwE,gCAAwwE,WAAoB,WAAO/H,EAAE,WAAK,IAAMA,EAAEkI,aAAE,EAAKxC,MAAM,EAAKC,QAAQf,YAAY,EAAKe,QAAQd,eAAe,OAAO7E,EAAEmI,WAAU,EAAGnI,EAAEoI,OAAO,EAAKzC,QAAQb,aAAa9E,GAAGY,EAAEZ,IAAIiB,EAAEjB,IAAIa,KAAK8B,MAAMF,aAAa7B,EAAEyH,SAASlI,YAAEU,KAAK8B,MAAMF,YAAY7B,EAAEuH,WAAU,GAAItH,KAAK8B,MAAMD,WAAWzB,EAAEoH,SAASlI,YAAEU,KAAK8B,MAAMD,UAAUzB,EAAEkH,WAAU,GAAI,IAAMjI,EAAE,WAAK,IAAIF,EAAE,EAAKwF,mBAAmB5E,EAAE0H,WAAWrH,EAAEqH,WAAWtI,EAAE,SAASiB,EAAEqH,WAAW1H,EAAE0H,WAAWtI,EAAE,OAAOY,EAAE0H,UAAUrH,EAAEqH,WAAWtI,EAAE,MAAM,IAAMG,EAAEH,IAAI,EAAKwF,mBAAmB,EAAKA,mBAAmBxF,EAAEG,GAAG,EAAK0B,SAAS,EAAK0G,oBAAoB,OAAO1H,KAAKyB,SAASa,IAAI,CAACvC,EAAE4H,OAAOC,GAAG,gBAAgB,WAAKvI,OAAOe,EAAEuH,OAAOC,GAAG,gBAAgB,WAAKvI,SAAS,CAACwI,MAAM9H,EAAE+H,IAAI1H,KAAr8F,kBAAw8F,WAAO,OAAOJ,KAAKmE,QAAQ,IAAI,QAAQnE,KAAKoE,WAAWpE,KAAKoE,UAAS,EAAGpE,KAAK8B,MAAMA,MAAMd,SAAQ,EAAGhB,KAAKqE,WAAW0D,MAAM,CAACC,WAAWhI,KAAK8E,QAAQnB,oBAAoBsE,WAAWjI,KAAK8E,QAAQlB,oBAAoBsE,UAAUlI,KAAK8E,QAAQtB,mBAAmB2E,UAAUnI,KAAK8E,QAAQrB,mBAAmB2E,YAAYpI,KAAK8E,QAAQpB,qBAAqB2E,YAAYrI,KAAK8E,QAAQjB,sBAAsB7D,KAAKqE,WAAWrD,SAAQ,EAAGhB,KAAKsI,wBAAwBtI,KAAKuI,uBAAuBvI,KAAKwI,qBAAqBxI,KAAK0H,oBAAoB,MAAM,IAAI,UAAU1H,KAAKoE,UAAS,EAAG,MAAM,IAAI,YAAY,QAAQ,UAAthH,kBAA8hH,WAAO,OAAOpE,KAAKmE,QAAQ,IAAI,QAAQnE,KAAKoE,WAAWpE,KAAKoE,UAAS,EAAGpE,KAAK8B,MAAMA,MAAMd,SAAQ,EAAGhB,KAAKqE,WAAWrD,SAAQ,EAAGhB,KAAK6E,MAAM4D,OAAO,MAAM,MAAM,IAAI,UAAUzI,KAAKoE,UAAS,EAAG,MAAM,IAAI,YAAY,QAAQ,UAAxvH,kBAAgwH,SAAKjF,GAAG,IAAMY,EAAEC,KAAK6E,MAAM6D,iBAAiBpJ,EAAEqJ,YAAExJ,EAAEyJ,aAAa5I,KAAK6E,MAAMgE,wBAAwBC,+BAA+BxJ,EAAEU,KAAKiF,cAAc,IAAM5F,EAAEW,KAAKiF,aAAa8D,QAAQC,IAAI9J,EAAEsF,eAAI,IAAInF,EAAE4J,qBAAqB/J,GAAG,OAAO,IAAIkE,EAAE8F,WAAW,IAAM9J,EAAEY,KAAK6E,MAAMsE,mBAAmBC,iBAAiBlK,EAAEa,GAAG,GAAGK,YAAEhB,GAAG,OAAO,IAAIgE,EAAE8F,WAAW,IAAMpJ,EAAE,oBAAoBT,EAAEgK,YAAY,SAAS,UAAU,OAAO,IAAIjG,EAAE8F,WAAWpJ,EAAEZ,EAAEE,KAA7qI,0BAAgrI,SAAaD,GAAG,OAAOa,KAAK6E,MAAMyE,eAAeC,MAAMlK,YAAE0C,aAAE/B,KAAK6E,MAAM2E,kBAAkBrK,GAAG,GAAG,IAA9wI,gCAAgxI,SAAmBA,EAAEY,GAAG,OAAO0J,aAAEtK,EAAEY,EAAEC,KAAK6E,QAAQ7E,KAAK8E,QAAQb,eAA/0I,mCAA41I,WAAwBjE,KAAK8B,MAAME,aAAahC,KAAK6E,MAAMsE,mBAAmBO,eAAe1J,KAAK8B,MAAME,YAAYhC,KAAKuE,mBAAr9I,kCAAs+I,WAAuBxE,YAAEC,KAAK8B,MAAMF,aAAa5B,KAAK6E,MAAMsE,mBAAmBO,eAAe1J,KAAK8B,MAAMF,WAAW5B,KAAKyE,kBAA/lJ,gCAA+mJ,WAAqB1E,YAAEC,KAAK8B,MAAMD,WAAW7B,KAAK6E,MAAMsE,mBAAmBO,eAAe1J,KAAK8B,MAAMD,SAAS7B,KAAK0E,gBAAluJ,+BAAgvJ,WAAoB,IAAMvF,EAAEa,KAAK8B,MAAMxC,EAAEU,KAAKgG,WAAW3C,EAAE4C,QAAQlG,YAAEC,KAAK4E,iBAAiB,cAAc5E,KAAK4E,eAAe+E,sBAAsB,OAAOxK,EAAE8C,OAAO,IAAI,UAAU,OAAO3C,EAAEU,KAAKyE,eAAetF,EAAE0C,SAAS7B,KAAK0E,aAAa1E,KAAKyE,eAAe,IAAI,UAAU,OAAOnF,EAAE,UAAUU,KAAK2E,mBAAmB3E,KAAK0E,aAAa1E,KAAKyE,eAAe,UAAUzE,KAAK2E,mBAAmB3E,KAAKyE,eAAezE,KAAK0E,aAAa,QAAQ,OAAOvF,EAAE6C,YAAYhC,KAAKuE,gBAAgB,QAAxsK,qCAA8sK,WAA0B,MAAM,YAAYvE,KAAK8B,MAAMG,OAAO,QAAQjC,KAAK2E,mBAAmB3E,KAAKyE,eAAezE,KAAK0E,eAAr0K,8BAAk1K,WAAmB,IAAMvF,EAAEa,KAAK8B,MAAMxC,EAAEU,KAAK4J,oBAAoBxJ,EAAEJ,KAAKgG,SAAS3G,EAAEW,KAAK4E,eAAe1F,EAAEc,KAAK8E,QAAQhB,oBAAoBxE,GAAG,aAAaH,EAAE8C,OAAO9C,EAAE+C,OAAO,GAAGhD,GAAGa,YAAEV,GAAG,CAAC,IAAMU,EAAE,cAAcV,EAAEwK,4BAA4B7J,KAAKqE,WAAWuC,qBAAqB7G,EAAET,EAAE,KAAK,IAAMF,EAAEF,KAAKC,EAAEyC,YAAY,aAAavC,EAAEwK,4BAA4B7J,KAAKqE,WAAWyF,kBAAkB1K,EAAE,CAAC2K,OAAO/J,KAAKgK,0BAA0BC,OAAO3K,GAAG,KAAK,IAAMQ,EAAEZ,GAAGkB,IAAIiD,EAAE6C,SAASlG,KAAKqE,WAAW6F,yBAAyBpK,EAAEqK,KAAEC,WAAWpK,KAAKyE,eAAezE,KAAK0E,aAAa2F,IAAG,UAAUrK,KAAKqE,WAAWuC,qBAAqB,KAAK5G,KAAKqE,WAAWyF,kBAAkB,KAAK9J,KAAKqE,WAAW6F,yBAAyB,OAA3gM,kCAAghM,WAAsB,WAAClK,KAAKsE,iBAAiB,IAAI3C,IAAE3B,KAAKsE,iBAAiBhC,IAAI,CAACtC,KAAK8B,MAAMwI,MAAM,SAAS,SAAAnL,GAAID,YAAE,EAAK0F,gBAAgB,SAAA7E,GAAIA,EAAEwK,qCAAqC,aAAapL,KAAK,EAAKiF,UAAU,EAAKsD,sBAAqB,GAAI1H,KAAK8B,MAAMwI,MAAM,mBAAmB,WAAK,EAAKlG,UAAU,EAAKsD,sBAAqB,GAAI1H,KAAK8B,MAAMwI,MAAM,eAAe,WAAK,EAAKhC,wBAAwB,EAAKlE,UAAU,EAAKsD,sBAAqB,GAAI1H,KAAK8B,MAAMA,MAAMwI,MAAM,cAAc,WAAK,EAAK/B,uBAAuB,EAAKnE,UAAU,EAAKsD,sBAAqB,GAAI1H,KAAK8B,MAAMA,MAAMwI,MAAM,YAAY,WAAK,EAAK9B,qBAAqB,EAAKpE,UAAU,EAAKsD,sBAAqB,GAAI1H,KAAK8B,MAAMwI,MAAM,UAAU,WAAK,EAAKlG,UAAU,EAAKsD,sBAAqB,OAA7uN,+BAAmvN,WAAoB1H,KAAKsE,iBAAiB7D,UAAUT,KAAKsE,iBAAiB,SAA7zN,GAAe9C,KAA2zNrC,YAAE,CAACC,YAAE,CAAC+D,UAAS,KAAMe,GAAE7C,UAAU,sBAAiB,GAAQlC,YAAE,CAACC,YAAE,CAAC8D,eAAc,KAAMgB,GAAE7C,UAAU,aAAQ,GAAQlC,YAAE,CAACC,eAAK8E,GAAE7C,UAAU,kBAAkB,MAAMlC,YAAE,CAACC,eAAK8E,GAAE7C,UAAU,sBAAsB,MAAMlC,YAAE,CAACC,eAAK8E,GAAE7C,UAAU,oBAAoB,MAAqH,SAASlC,GAAYA,EAAEqL,YAAZ,kCAAmHrL,EAAE+J,WAAnF,aAAiC,IAArB/J,EAAqB,uDAAnB,KAAKY,EAAc,uDAAZ,KAAKT,EAAO,uDAAL,KAAK,oBAACU,KAAKe,KAAK5B,EAAEa,KAAKyK,WAAW1K,EAAEC,KAAK0K,SAASpL,GAA3H,EAA/G4E,GAAEd,EAAEjE,YAAE,CAACW,YAAE,mGAAmGoE,OAAqJA,GAAE,MAAc/E,EAAsHkE,IAAIA,EAAE,KAAvHlE,EAAE+G,SAAS,GAAG,WAAW/G,EAAEA,EAAEgH,kBAAkB,GAAG,oBAAoBhH,EAAEA,EAAE8G,OAAO,GAAG,SAAS9G,EAAEA,EAAE4G,KAAK,GAAG,OAAmB,IAAMsE,GAAEF,KAAEQ,SCAvkPC,GAAC,kDAAiB,WAAYzL,GAAE,kCAAC,cAAMA,IAAQsC,SAAS,IAAIvC,IAAE,EAAK2L,mBAAmB,IAAIzH,GAAEoH,YAAY,EAAKM,kBAAkB,IAAI1H,GAAE8F,WAAW,EAAK6B,mBAAkB,EAAG,EAAKC,eAAc,EAAG,EAAKC,iBAAiB,KAAK,EAAKC,eAAe,KAAK,EAAKpJ,MAAM,IAAIoC,EAAE,CAAC9B,UAAUjD,EAAEsG,OAAlP,EAA/B,8CAAwR,WAAY,WAAOtG,EAAE,IAAIiE,GAAE,CAACtB,MAAM9B,KAAK8B,QAAQ9B,KAAKmB,KAAK,4BAA4BhC,GAAG,IAAMG,EAAEF,YAAEY,KAAK,SAAS,SAAAb,GAAI,UAAUA,GAAG,EAAKwL,SAAS,aAAaxL,GAAG,EAAKgM,cAAa,GAAInL,KAAKyB,SAASa,IAAIhD,GAA3L,MAAmNU,KAAKoL,0BAA0BC,qBAAxCjL,EAA1M,EAAoMyH,MAAYxI,EAAhN,EAA4MyI,IAA2DhI,EAAE,SAACX,EAAEG,EAAEc,GAAL,OAASoB,YAAErC,GAAG,SAACA,EAAEE,EAAES,GAAK,IAAMZ,EAAEgG,YAAE/F,GAAGE,EAAEiM,KAAKpM,GAAGoM,KAAKhI,YAAE,EAAKmC,OAAO6F,MAAM,SAAAnM,GAAC,MAAE,UAAUA,EAAEoM,OAAOpM,EAAE,QAAOmM,MAAM,SAAAvL,GAAI,IAAMV,EAAEsC,YAAE5B,EAAEyL,OAAOC,IAAG,EAAK3J,MAAMxC,GAAGD,EAAEF,EAAEqI,SAASnI,EAAE,EAAKyC,MAAM1B,GAAG,EAAKsL,iBAAiBrM,EAAEU,EAAE4L,gBAAgB7L,EAAEwL,KAAKpM,GAAGoM,KAAK9G,YAAE,EAAK1C,MAAM,CAACxC,EAAEc,KAAKkL,MAAM,WAAKnM,EAAEqI,SAASzH,YAAE,EAAK+B,MAAMxC,WAAUU,KAAKyB,SAASa,IAAI,CAACxC,EAAEM,EAAE,aAAa,6BAA6BN,EAAET,EAAE,WAAW,6BAA6B,CAACe,EAAEf,GAAGuM,SAAS,SAAAzM,GAAI,EAAKsC,SAASa,IAAI,CAACnD,EAAEwI,OAAOC,GAAG,gBAAgB,WAAK,IAAMzI,EAAEiB,EAAEqH,UAAUpI,EAAEoI,SAAStI,GAAG,aAAa,EAAK2C,MAAMG,QAAQ,EAAKH,MAAMG,MAAM,WAAW9C,IAAI,EAAK2C,MAAM+J,oBAAoB,YAAY,EAAK/J,MAAMG,QAAQ,EAAKH,MAAMG,MAAM,qBAAqBjC,KAAK8L,aAAaxJ,IAAIlC,GAAGJ,KAAK8L,aAAaxJ,IAAIjD,GAAGW,KAAKiL,iBAAiB7K,EAAEJ,KAAKkL,eAAe7L,IAAlzC,qBAAozC,WAAUW,KAAKoL,0BAA0B3K,UAAUT,KAAKmB,KAAK,4BAA4B,MAAMnB,KAAK8B,MAAMrB,UAAUT,KAAKmB,KAAK,QAAQ,MAAMnB,KAAKyB,SAAShB,UAAUT,KAAKyB,SAAS,OAAt+C,iBAA2+C,WAAY,IAAItC,EAAE,OAAO,OAAOA,EAAEa,KAAK8B,QAAQ3C,EAAE4M,YAAY,aAAa/L,KAAK8B,MAAMG,MAAM,WAAW,YAAY,UAA7lD,oBAAqmD,WAAe,MAAM,YAAYjC,KAAK8B,MAAMG,OAAO,YAAYjC,KAAK8B,MAAMG,QAA/qD,uBAAqrD,WAAkB,MAAM,OAAOjC,KAAKgM,IAAI,eAA7tD,kBAA0uD,WAAa,IAAI7M,EAAE,OAAO,OAAOA,EAAEa,KAAK8B,SAAS3C,EAAE+C,QAAQ,YAAYlC,KAAK8B,MAAMG,OAAO,YAAYjC,KAAK8B,MAAMG,MAAM,KAAK,cAAr2D,sBAAi3D,WAAWjC,KAAK8B,MAAMI,QAAO,IAA94D,wBAAi5D,WAAalC,KAAK8B,MAAMI,QAAO,IAAh7D,sBAAm7D,WAAWlC,KAAK8B,MAAMS,UAAz8D,oBAAi9D,WAASvC,KAAKoL,0BAA0BtF,OAAO9F,KAAKiM,iCAArgE,oBAAoiE,WAASjM,KAAKoL,0BAA0BxF,SAA5kE,0BAAmlE,SAAazG,GAAG,OAAOA,EAAE4B,MAAM,IAAI,kBAAkBf,KAAKkM,sBAAsB/M,GAAG,MAAM,IAAI,eAAea,KAAKmM,mBAAmBhN,GAAG,MAAM,IAAI,eAAea,KAAKoM,qBAAqB,MAAM,IAAI,aAAapM,KAAKqM,mBAAmBrM,KAAKiM,iCAAj0E,gCAAg2E,SAAmB9M,GAAGa,KAAKsM,0BAA0B,IAAMvM,EAAE4I,YAAExJ,GAAG,UAAUA,EAAEoN,cAAcvM,KAAKwM,SAASzM,GAAG,YAAYC,KAAK8B,MAAMG,QAAQjC,KAAKkL,eAAevD,OAAO8E,KAAK,OAAO,CAAClB,OAAO,SAAS1D,MAAM9H,EAAE6I,YAAY7I,IAAIZ,EAAEuN,sBAA9jF,gCAAklF,WAAqB1M,KAAK+K,mBAAkB,IAA9nF,8BAAioF,WAAmB/K,KAAK+K,mBAAkB,IAA3qF,mCAA8qF,SAAsB5L,GAAG,GAAGa,KAAKsM,0BAAyuD,SAAWnN,GAAG,MAAM,UAAUA,EAAEoN,aAAa,IAAIpN,EAAEwN,OAAjwDxC,CAAEhL,GAArC,CAA+C,IAAMY,EAAE4I,YAAExJ,GAAGG,EAAEH,EAAEoN,YAAgBnM,GAAE,EAAG,GAAGJ,KAAK8B,MAAMI,OAAO,OAAOlC,KAAK8B,MAAMG,OAAO,IAAI,UAAUjC,KAAKiL,iBAAiBtD,OAAO8E,KAAK,OAAO,CAAClB,OAAO,QAAQgB,YAAYjN,EAAEuI,MAAM9H,EAAE6I,YAAY7I,IAAIC,KAAKiL,iBAAiBtD,OAAO8E,KAAK,OAAO,CAAClB,OAAO,MAAM1D,MAAM9H,EAAE6I,YAAY7I,IAAIC,KAAK8B,MAAMF,aAAa5B,KAAKiL,iBAAiB2B,aAAY,EAAG5M,KAAKkL,eAAe0B,aAAY,EAAG5M,KAAK8B,MAAMG,MAAM,UAAUjC,KAAKkL,eAAevD,OAAO8E,KAAK,OAAO,CAAClB,OAAO,QAAQgB,YAAYjN,EAAEuI,MAAM9H,EAAE6I,YAAY7I,IAAIK,GAAE,GAAI,MAAM,IAAI,UAAUJ,KAAKkL,eAAevD,OAAO8E,KAAK,OAAO,CAAClB,OAAO,SAAS1D,MAAM9H,EAAE6I,YAAY7I,IAAI,MAAMC,KAAK8B,MAAMD,WAAW7B,KAAKkL,eAAevD,OAAO8E,KAAK,OAAO,CAAClB,OAAO,MAAM1D,MAAM9H,EAAE6I,YAAY7I,IAAIC,KAAKiL,iBAAiB2B,aAAY,EAAG5M,KAAKkL,eAAe0B,aAAY,EAAG5M,KAAK8B,MAAM+J,oBAAoBzL,GAAE,GAAIA,GAAGjB,EAAEuN,kBAAkB,UAAUvN,EAAEoN,aAAavM,KAAKwM,SAASzM,MAA5lH,sBAA+lH,SAASZ,GAAG,IAAMY,EAAEC,KAAK+K,mBAAmB,YAAY/K,KAAK8B,MAAMG,OAAO,YAAYjC,KAAK8B,MAAMG,MAAM,GAAGjC,KAAKoL,0BAA0ByB,sBAAsB9M,EAAE,CAAC,IAAMA,EAAEC,KAAK8M,MAAM3N,GAAGY,EAAE2K,WAAW1K,KAAK8B,MAAME,YAAYjC,EAAE2K,eAAe1K,KAAK8B,MAAME,YAAY,OAAn2H,mBAAw2H,SAAM7C,GAAG,IAAMY,EAAEC,KAAK6K,mBAAmBjC,YAAY,OAAO7I,GAAGA,EAAEgN,IAAI5N,EAAE4N,GAAGhN,EAAE6K,IAAIzL,EAAEyL,IAAI5K,KAAK6K,mBAAmBjC,YAAYzJ,EAAEa,KAAK8K,kBAAkB9K,KAAKoL,0BAA0B4B,KAAKhN,KAAK6K,qBAAqB7K,KAAK8K,oBAA9jI,qCAAglI,WAA0B9K,KAAK6K,mBAAmBjC,YAAY,OAA9oI,8BAAmpI,SAAiBzJ,EAAEY,GAAG,OAAO,IAAIA,EAAE,iBAAiBZ,EAAE8N,GAAGjN,KAAKoL,0BAA0B8B,aAAa/N,GAAG,oBAAoB,sBAA/wI,0CAAmyI,WAA+Ba,KAAKiL,iBAAiB3D,UAAU,MAAMtH,KAAK8B,MAAMF,WAAW5B,KAAKkL,eAAe5D,UAAU,MAAMtH,KAAK8B,MAAMD,aAA76I,GAAeE,KAAm+I5C,YAAE,CAACG,YAAE,CAAC6D,UAAS,KAAMyH,GAAEvJ,UAAU,QAAQ,MAAMlC,YAAE,CAACG,YAAE,CAAC6D,UAAS,KAAMyH,GAAEvJ,UAAU,WAAW,MAAMlC,YAAE,CAACG,YAAE,CAAC6D,UAAS,KAAMyH,GAAEvJ,UAAU,cAAc,MAAMlC,YAAE,CAACG,YAAE,CAAC6D,UAAS,KAAMyH,GAAEvJ,UAAU,SAAS,MAAMlC,YAAE,CAACG,YAAE,CAAC4D,eAAc,KAAM0H,GAAEvJ,UAAU,aAAQ,GAAQlC,YAAE,CAACG,YAAE,CAAC4D,eAAc,KAAM0H,GAAEvJ,UAAU,iCAA4B,GAAQlC,YAAE,CAACiB,YAAE,eAAewK,GAAEvJ,UAAU,YAAO,GAAQlC,YAAE,CAACiB,YAAE,eAAewK,GAAEvJ,UAAU,YAAO,GAAQlC,YAAE,CAACiB,YAAE,2BAA2BwK,GAAEvJ,UAAU,wBAAmB,GAAQuJ,GAAEzL,YAAE,CAACE,YAAE,mGAAmGuL,IAAG,IAAMa,GAAE,IAAI3L,IAAyBuH,GAAjBuD,GCA9/KtH,GAAEjE,IAAE8N,UAAU,yEAA6E3I,GAAC,kDAAiB,WAAYzE,GAAE,kCAAC,cAAMA,IAAQqN,kBAAkB,KAAK,EAAK3L,SAAS,IAAIvC,IAAE,EAAKmO,iBAAiB,KAAK,EAAKC,UAAU,KAApG,EAA/B,8CAAwI,WAAY,WAACtN,KAAKyB,SAASa,IAAI,CAAClD,YAAEY,KAAK,QAAQ,SAAAD,GAAI,EAAKwN,OAAO,EAAKA,KAAKzL,MAAMP,KAAKxB,UAA5N,qBAAoO,WAAUC,KAAKyB,SAAShB,UAAUT,KAAKyB,SAAS,OAApR,iBAAyR,WAAY,OAAOzB,KAAKwN,WAAW,WAAWxN,KAAKuN,KAAKvN,KAAKuN,KAAKtL,MAAM,UAAjW,uBAAyW,WAAkB,IAAIjC,KAAKuN,KAAK,OAAO,KAAK,IAAMxN,EAAEC,KAAKuN,KAAKzL,MAAMzC,EAAEW,KAAKuN,KAAKnC,0BAA0BxG,eAAe,GAAGzF,YAAEE,GAAG,MAAM,CAAC8F,KAAK,YAAYsI,eAAe,CAACvG,KAAK,KAAKjF,MAAM,eAAeS,mBAAmB,CAACwE,KAAK,KAAKjF,MAAM,eAAeyL,iBAAiB,CAACxG,KAAK,KAAKjF,MAAM,gBAAgB,IAAM7B,EAAEf,EAAEwK,4BAA4B/J,EAAEE,KAAKuN,KAAKnC,0BAA0BlM,EAAEI,YAAES,EAAE+B,MAAMZ,aAAa,YAAY,cAAc,OAAOd,GAAG,IAAI,YAAY,MAAM,CAAC+E,KAAK/E,EAAEqN,eAAe,CAACvG,KAAKpH,EAAE6N,gBAAgB1L,MAAM/C,GAAGwD,mBAAmB,CAACwE,KAAKpH,EAAE8N,oBAAoB3L,MAAM/C,GAAGwO,iBAAiB,CAACxG,KAAKpH,EAAE+N,kBAAkB5L,MAAM/C,IAAI,IAAI,WAAW,MAAM,CAACiG,KAAK/E,EAAEqN,eAAe,CAACvG,KAAK,KAAKjF,MAAM,eAAeS,mBAAmB,CAACwE,KAAKpH,EAAE6N,gBAAgB1L,MAAM/C,GAAGwO,iBAAiB,CAACxG,KAAKpH,EAAE+N,kBAAkB5L,MAAM/C,OAA3oC,uBAAowC,WAAkB,OAAOc,KAAK8N,oBAAoB9N,KAAKqN,mBAA3zC,IAAgpC,SAAgBtN,GAAGC,KAAKqN,iBAAiBtN,EAAEC,KAAKmB,KAAK,cAAcnB,KAAK8N,oBAAoB9N,KAAKqN,qBAAjvC,gBAAo7C,WAAW,OAAOrN,KAAKsN,WAAWtN,KAAKsN,UAAUtN,KAAK+N,oBAAoB/N,KAAKsN,UAAUtN,KAAKgO,aAAahO,KAAKsN,WAAWtN,KAAK+N,oBAAoB/N,KAAKgO,cAA7kD,IAA60C,SAASjO,GAAGC,KAAKsN,UAAUvN,EAAEC,KAAK+N,oBAAoBhO,EAAEC,KAAKsN,WAAW,KAAKtN,KAAKiO,aAAa,UAA56C,mBAA0lD,WAAQ,OAAOjO,KAAKkO,eAA9mD,mBAA2nD,WAAQlO,KAAKmO,eAAxoD,8BAAgtD,WAAkB,WAAC,MAAM,CAACC,gBAAgBlJ,GAAEmJ,qBAAqB,iBAAK,CAAC9M,KAAK,EAAKA,UAAjyD,iCAAyyD,WAAsB+B,GAAEgL,MAAM,mEAAv0D,sBAAw4D,WAAehL,GAAEgL,MAAF,MAAAhL,GAAC,aAAx5D,iCAAq6D,SAAoBvD,EAAEZ,GAAG,IAAMG,EAAEU,KAAKuO,YAAY,OAAO,IAAIjP,EAAEkP,QAAQzO,GAAGA,EAAEZ,EAAEa,KAAK+N,oBAAoB5O,GAAGG,EAAE,KAAjhE,iCAAohE,SAAoBS,GAAG,IAAIA,EAAE,OAAOyB,IAAEiN,QAAQ,IAAMtP,EAAEY,EAAE2O,QAAQ,SAAA3O,GAAC,OAAG,IAAIyB,IAAEgN,QAAQzO,MAAK,OAAO,IAAIZ,EAAE0B,OAAOW,IAAEiN,QAAQtP,KAAzoE,6DAAqpD,uGAA8B4C,EAAE,4BAAhC,2CAArpD,2DAAe4G,KAA8nE5I,YAAE,CAACK,YAAE,CAAC+C,UAAS,KAAMqB,GAAEnD,UAAU,QAAQ,MAAMtB,YAAE,CAACK,YAAE,CAAC+C,UAAS,KAAMqB,GAAEnD,UAAU,cAAc,MAAMtB,YAAE,CAACK,eAAKoE,GAAEnD,UAAU,YAAO,GAAQtB,YAAE,CAACK,YAAEuB,MAAI6C,GAAEnD,UAAU,mBAAc,GAAQtB,YAAE,CAACK,eAAKoE,GAAEnD,UAAU,cAAc,MAAMtB,YAAE,CAACK,eAAKoE,GAAEnD,UAAU,OAAO,MAA0F,IAAuBgC,GAA3GmB,GAAEzE,YAAE,CAACD,YAAE,0EAA0E0E,ICAzpF7C,GAAE,kCAAkCuD,GAAE,CAACyJ,eAAe,wBAAwBC,KAAI,UAAIjN,GAAJ,mCAAuCkN,UAAS,UAAIlN,GAAJ,eAAmBmN,KAAI,UAAInN,GAAJ,UAAcoN,SAAQ,UAAIpN,GAAJ,eAAmBqN,WAAU,UAAIrN,GAAJ,kBAAsBT,YAAW,UAAIS,GAAJ,iBAAqBsN,gBAAe,UAAItN,GAAJ,sBAA0BuN,wBAAuB,UAAIvN,GAAJ,gCAAoCwN,qBAAoB,UAAIxN,GAAJ,4BAAgCyN,qBAAoB,UAAIzN,GAAJ,4BAAgCV,SAAQ,UAAIU,GAAJ,cAAkB0N,MAAK,UAAI1N,GAAJ,WAAe2N,WAAU,UAAI3N,GAAJ,iBAAqB4N,YAAW,UAAI5N,GAAJ,8BAAkC6N,mBAAkB,UAAI7N,GAAJ,0BAA8B8N,cAAa,UAAI9N,GAAJ,aAAiB+N,qBAAoB,UAAI/N,GAAJ,mDAAuDgO,WAAW,0BAA8BhH,GAAC,kDAAiB,WAAYxJ,EAAEY,GAAE,kCAAC,cAAMZ,EAAEY,IAAQ0F,KAAK,KAAK,EAAKzE,QAAQ,KAAK,EAAK4O,UAAU1K,GAAEyK,WAAW,EAAKE,WAAM,EAAO,EAAKC,SAAS,KAAK,EAAKC,cAAc,KAAK,EAAKC,UAAU,IAAI1M,GAAE,EAAKiL,YAAY,KAAK,EAAKhN,KAAK,KAA3L,EAAjC,0CAAiO,WAAQ,aAA4DvB,KAAKgQ,UAA9C7Q,EAAnB,EAAO8Q,YAAqBlQ,EAA5B,EAAqBmC,OAAe9B,EAApC,EAA8B6B,MAAoB3C,EAAlD,EAAsC4B,YAAmB7B,EAAzD,EAAoDkC,KAAuBzB,EAAE,aAAaM,EAAEhB,EAAE,UAAUgB,EAAE2B,EAAE,cAAc3B,GAAG,aAAaA,EAAYkD,EAAmBtD,KAA5B8P,SAAyBnO,EAAG3B,KAAjB+P,cAAsBpH,EAAE5I,GAAGX,EAAEoC,YAAE,UAAU,CAAC0O,IAAI,wCAAwCC,MAAMjL,GAAE4J,MAAMtN,YAAE,IAAI,CAAC2O,MAAMjL,GAAE6J,UAAUzL,EAAEwL,OAAO,KAAK1L,EAAEjE,EAAE,KAAKqC,YAAE,UAAU,CAAC0O,IAAI,+CAA+CC,MAAMjL,GAAE8J,YAAYxN,YAAE,IAAI,KAAK8B,EAAE8M,cAAcjG,EAAE,SAAChL,EAAEY,EAAEK,GAAK,OAAOL,EAAEkC,OAAO,IAAI,YAAY,OAAOT,YAAE,MAAM,CAAC0O,IAAG,UAAI9P,EAAJ,YAAgB+P,MAAMjL,GAAE+J,iBAAiBzN,YAAE,OAAO,CAAC2O,MAAMjL,GAAEiK,sBAAsBhQ,GAAGqC,YAAE,OAAO,CAAC2O,MAAMjL,GAAEkK,sBAAsBrP,EAAEmH,OAAO,IAAI,cAAc,OAAO1F,YAAE,MAAM,CAAC0O,IAAG,UAAI9P,EAAJ,aAAiB+P,MAAM,EAAKE,QAAQnL,GAAE+J,gBAAgB/J,GAAEgK,0BAA0B1N,YAAE,OAAO,CAAC2O,MAAMjL,GAAEiK,sBAAsBhQ,MAAMqF,EAAEzC,EAAEP,YAAE,UAAU,CAAC0O,IAAI,+CAA+CC,MAAMjL,GAAEhE,aAAaiJ,EAAE7G,EAAEgD,OAAOhH,EAAEmO,eAAe,UAAUtD,EAAE7G,EAAEiD,WAAWjH,EAAEoD,mBAAmB,cAAcyH,EAAE7G,EAAEkD,SAASlH,EAAEoO,iBAAiB,aAAa,KAAK1I,EAAv+B,UAA4+BhF,KAAKsQ,GAAj/B,WAA6/B7G,EAAEjI,YAAE,QAAQ,CAAC2O,MAAMjL,GAAEoK,WAAWiB,IAAIvL,GAAG1B,EAAE/B,MAAM8F,EAAE7F,YAAE,MAAM,CAAC2O,MAAMjL,GAAEsK,oBAAoBhO,YAAE,SAAS,CAAC2O,MAAMjL,GAAEqK,YAAYe,GAAGtL,EAAEwL,SAASxQ,KAAKyQ,YAAYC,KAAK1Q,KAAKsB,MAAMjC,GAAGW,KAAKgQ,UAAUzB,YAAYoC,KAAK,SAAAxR,GAAI,IAAIY,EAAE,OAAOyB,YAAE,SAAS,CAAC0O,IAAI/Q,EAAEmC,MAAMnC,GAAGD,YAAEC,GAAGwC,EAAEiP,QAAQzR,GAAG,OAAOY,EAAE4B,EAAE0N,MAAMlQ,SAAI,EAAOY,EAAE8Q,wBAAwBjG,EAAEpJ,YAAE,UAAU,CAAC0O,IAAI,yCAAyCC,MAAMjL,GAAEmK,OAAO5F,EAAEpC,GAAGoE,EAAE1J,EAAEP,YAAE,MAAM,CAAC0O,IAAI,WAAWC,MAAMjL,GAAEjE,UAAU2J,GAAG,KAAKkG,GAAG3R,GAAGY,IAAIgC,EAAE,KAAKP,YAAE,MAAM,CAAC2O,MAAMjL,GAAEuK,eAAejO,YAAE,SAAS,CAACuP,SAASjR,EAAEqQ,MAAMnQ,KAAKqQ,QAAQnL,GAAEwK,qBAAqB5P,GAAGoF,GAAEyJ,gBAAgB+B,KAAK1Q,KAAKgR,QAAQhR,KAAKiR,gBAAgBlQ,KAAK,UAAUuC,EAAE4N,iBAAiB7G,EAAErK,KAAKgB,QAAQQ,YAAE,MAAM,CAAC2O,MAAMjL,GAAE2J,WAAWzL,EAAEuF,EAAE8C,EAAEjH,EAAEsM,GAAG,KAAK,OAAOtP,YAAE,MAAM,CAAC0O,IAAIlQ,KAAKmQ,MAAMjL,GAAE0J,KAAKuC,KAAK,gBAAgB9G,KAA9+D,6BAAi/D,WAAkBhL,YAAEW,KAAKgQ,UAAUnI,WAAphE,yBAA6hE,SAAY1I,GAAG,IAAMY,EAAEZ,EAAE8K,OAAO7J,EAAEL,EAAEqF,QAAQrF,EAAEqR,eAAehR,IAAIJ,KAAKuB,KAAKnB,EAAEkB,SAA1mE,+BAAinE,WAAmB,WAAC,OAAOgC,GAAE+N,UAAU5R,MAAM,8BAAC,+DAA/pE,GAAesC,KAAirE5C,YAAE,CAACiB,YAAE,mBAAmBuI,GAAEtH,UAAU,YAAO,GAAQlC,YAAE,CAACiB,YAAE,sBAAsBuI,GAAEtH,UAAU,eAAU,GAAQlC,YAAE,CAACiB,YAAE,qBAAqBuI,GAAEtH,UAAU,cAAS,GAAQlC,YAAE,CAACY,eAAK4I,GAAEtH,UAAU,iBAAY,GAAQlC,YAAE,CAACY,YAAE,CAACuR,QAAQ,CAACC,OAAO,uBAAuBC,aAAY,MAAO7I,GAAEtH,UAAU,aAAQ,GAAQlC,YAAE,CAACY,cAAIX,YAAE,qEAAqEuJ,GAAEtH,UAAU,gBAAW,GAAQlC,YAAE,CAACY,cAAIX,YAAE,wBAAwBuJ,GAAEtH,UAAU,qBAAgB,GAAQlC,YAAE,CAACY,YAAE,CAACgB,KAAKuC,MAAKqF,GAAEtH,UAAU,iBAAY,GAAQlC,YAAE,CAACiB,YAAE,0BAA0BuI,GAAEtH,UAAU,mBAAc,GAAQlC,YAAE,CAACiB,YAAE,mBAAmBuI,GAAEtH,UAAU,YAAO,GAAQlC,YAAE,CAACW,eAAK6I,GAAEtH,UAAU,kBAAkB,MAAMlC,YAAE,CAACW,eAAK6I,GAAEtH,UAAU,cAAc,MAAyD,IAAI+B,GAAvDuF,GAAExJ,YAAE,CAACG,YAAE,yCAAyCqJ,IAA0BvF,c,iPCA/8H8B,EAAC,kDAAiB,WAAYnF,GAAE,kCAAC,cAAMA,IAAQwN,KAAK,KAAK,EAAKkE,aAAa,IAAInS,IAAE,EAAKoS,6BAA4B,EAAG,EAAKC,yBAAyB,KAAK5R,GAAG,MAAMA,EAAEiB,UAAU,EAAKA,QAAQjB,EAAEiB,SAA5J,EAA/B,8CAAoM,WAAY,WAAChB,KAAKyR,aAAanP,IAAId,YAAExB,KAAK,CAAC,aAAa,gBAAgB,WAAK,EAAKyF,MAAM,EAAKA,KAAK8D,QAAQ,EAAK0G,YAAY,EAAKyB,8BAA8B,EAAKE,sBAAsB,EAAKF,6BAA4B,GAAI,EAAKA,6BAA4B,QAAnc,qBAA0c,WAAU1R,KAAKmO,aAAanO,KAAKyF,KAAK,KAAKzF,KAAKyR,aAAahR,UAAUT,KAAKyR,aAAa,OAAniB,uBAAwiB,WAAkB,OAAOzR,KAAKyF,MAAMzF,KAAKyF,KAAK1E,OAAOf,KAAKoN,oBAAlmB,gBAAonB,WAAW,OAAOpN,KAAKU,KAAK,SAAhpB,IAAwpB,SAASX,GAAE,WAAC,GAAGA,IAAIC,KAAKyF,KAAZ,CAAwBzF,KAAKmO,aAAanO,KAAKmB,KAAK,OAAOpB,GAAG,IAAMD,EAAE,QAAQE,KAAKyR,aAAajR,OAAOV,GAAGC,GAAGC,KAAKyR,aAAanP,IAAIvC,EAAE8R,MAAMjK,GAAG,UAAU,SAAA7H,GAAI,GAAG,EAAKwN,KAAR,qBAA4BxN,EAAE+R,SAA9B,IAAa,gCAAUhS,EAAV,QAAyB,GAAG,EAAKyN,OAAOzN,EAAE,CAACA,EAAEiS,WAAWjS,EAAEW,UAAU,EAAKU,KAAK,OAAO,MAAM,QAAxG,mCAAkHrB,MAAl7B,mBAAq7B,SAAYC,GAAGC,KAAKmB,KAAK,UAAUpB,GAAGC,KAAKuN,OAAOvN,KAAKuN,KAAKvM,QAAQjB,IAAIA,GAAGC,KAAK2R,2BAA2B3R,KAAK2R,yBAAyBK,QAAQhS,KAAK2R,yBAAyB,QAApmC,kBAA0mC,WAAa,OAAO,MAAM3R,KAAK2R,0BAA0B,MAAM3R,KAAKuN,MAAMvN,KAAKuN,KAAKrL,SAA9rC,sBAAqsC,WAAiB,OAAOlC,KAAKyF,OAAOzF,KAAKyF,KAAK8D,QAAQvJ,KAAKiQ,cAAhwC,wBAA4wC,WAAmB,QAAQjQ,KAAK2R,2BAA5yC,+DAAq0C,6CAAAvS,EAAA,yDAAsBY,KAAKmO,aAAcnO,KAAKiQ,YAA9C,yCAAiE1Q,QAAQ0S,OAAO,IAAI5S,IAAE,cAAc,wCAApG,cAAiJU,EAAEC,KAAKkS,mBAAmBpS,EAAE,WAAK,IAAMA,EAAEZ,YAAEa,EAAEsO,sBAAsB,oBAAOrN,QAAQ,EAAKA,SAAWlB,IAAIX,EAAE,IAAIgT,gBAAgB/R,EAAEjB,EAAEiT,OAAOpS,KAAK2R,yBAAyBxS,EAAQG,EAAE,WAAKH,IAAI,EAAKwS,2BAA2B,EAAKA,yBAAyB,OAAvY,kBAAga3R,KAAKyF,KAAKyI,WAAWnO,EAAEqO,gBAAgBtO,EAAE,CAACsS,OAAOhS,IAAjd,OAAwZjB,EAAxZ,OAAqda,KAAKmB,KAAK,OAAOhC,GAAGG,IAAze,wDAA4fA,IAAC,KAA7f,0DAAr0C,8EAAw0D,WAAaU,KAAK2R,0BAA0B3R,KAAK2R,yBAAyBK,QAAQhS,KAAK2R,yBAAyB,KAAK,IAAM5R,EAAEC,KAAKuN,KAAKxN,IAAIC,KAAKyF,MAAMzF,KAAKyF,KAAKoM,OAAO7R,KAAKyF,KAAKoM,MAAMrR,OAAOT,GAAGA,EAAEgS,WAAWhS,EAAEU,UAAUT,KAAKmB,KAAK,OAAO,WAAnjE,GAAef,KAA6iEL,YAAE,CAACD,YAAE,CAACoD,eAAc,KAAMgC,EAAE7D,UAAU,YAAO,GAAQtB,YAAE,CAACD,eAAKoF,EAAE7D,UAAU,cAAc,MAAMtB,YAAE,CAACD,YAAE,CAACwB,MAAM,QAAQ4D,EAAE7D,UAAU,OAAO,MAAMtB,YAAE,CAACD,YAAE,CAACiB,KAAKsR,QAAQ/Q,OAAM,KAAM4D,EAAE7D,UAAU,UAAU,MAAMtB,YAAE,CAACD,eAAKoF,EAAE7D,UAAU,SAAS,MAAMtB,YAAE,CAACD,eAAKoF,EAAE7D,UAAU,aAAa,MAAMtB,YAAE,CAACD,eAAKoF,EAAE7D,UAAU,gCAA2B,GAAQtB,YAAE,CAACD,YAAE,CAACqD,UAAS,KAAM+B,EAAE7D,UAAU,eAAe,MAAM6D,EAAEnF,YAAE,CAACZ,YAAE,kDAAkD+F,I,uQCAnvFpF,cAAI,SAAS0B,EAAEnC,EAAEH,GAAG,kCAAUG,GAAKF,YAAED,IAAI,SAASyJ,EAAExJ,EAAEE,EAAEH,EAAEY,GAAG,KAAKX,EAAE0B,OAAOxB,GAAGF,EAAEyB,KAAK1B,KAAK,GAAGY,EAAE,KAAKX,EAAE0B,OAAOxB,GAAIS,EAAEX,EAAEmT,YAAYnT,EAAE0B,OAAOxB,EAAsD,SAASgI,EAAElI,EAAEE,GAAG,GAAGU,YAAEV,EAAE,EAAE,EAAE,GAAGF,EAAE0B,OAAO,EAAE,CAAC,IAAI,IAAI3B,EAAE,EAAEA,EAAEC,EAAE0B,SAAS3B,EAAEkB,YAAEf,EAAEA,EAAEF,EAAED,IAAIyC,YAAEtC,EAAEA,EAAE,EAAEF,EAAE0B,SAAS,SAAS0R,EAAEpT,EAAEE,EAAEH,EAAEY,GAAGA,EAAE0S,sBAAsBrT,EAAE6F,GAAGlF,EAAE0S,sBAAsBnT,EAAEoT,GAAG1Q,YAAE7C,EAAEwT,EAAE3F,GAAGzJ,YAAEpE,EAAEA,GAAG,SAASyT,EAAExT,EAAEE,EAAEH,GAAG,IAAMY,EAAEZ,EAAE+C,MAAMc,OAAO7D,EAAEiK,mBAAmBO,eAAevK,EAAEiE,GAAGtD,EAAE0S,sBAAsBpP,EAAEwP,GAAG1T,EAAE+C,MAAMc,OAAO8P,eAAeD,EAAEvT,GAAG,SAASyT,EAAE3T,EAAEE,EAAEH,GAAG,OAAOyT,EAAExT,EAAEsK,EAAEvK,GAAGyT,EAAEtT,EAAEuL,EAAE1L,GAAGgG,YAAEuE,EAAEmB,GAA4C,IAAMxH,EAAEtD,cAAI8S,EAAEvT,cAAI2F,EAAE3F,cAAI0N,EAAE/H,EAAEyN,EAAEpT,cAAIqT,EAAED,EAAQhJ,GAAJvK,cAAMA,eAAI0L,EAAE1L","file":"static/js/101.a020c398.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nasync function e(e,t){return\"3d\"===e.type?new((await r(t.type)).viewConstructor)({view:e,dataObject:t}):null}async function t(e,t){return\"3d\"===e.type?new((await r(t.type)).controllerConstructor)({view:e,dataObject:t}):null}async function n(e){await r(e)}async function r(e){if(!(e in i))switch(e){case\"DirectLineMeasurement3D\":i[e]=Promise.all([import(\"./DirectLineMeasurement3D/DirectLineMeasurement3DView.js\"),import(\"./DirectLineMeasurement3D/DirectLineMeasurement3DController.js\")]).then((e=>({viewConstructor:e[0].DirectLineMeasurement3DView,controllerConstructor:e[1].DirectLineMeasurement3DController})))}return i[e]}const i={};export{t as analysisControllerFactory,e as analysisViewFactory,n as preloadAnalysisModules};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{ReentrantObjectPool as e}from\"../../../core/ReentrantObjectPool.js\";import{afterDispatch as t,isValueInUse as r}from\"../../../core/accessorSupport/watch.js\";class o{constructor(r,o){this.owner=o,this.properties={},this.afterDispatchHandle=null;for(const t in r){const o=r[t],s=new e(o,null,null,2,2);this.properties[t]={pool:s,acquired:[]}}this.afterDispatchHandle=t((()=>this.release()))}destroy(){this.afterDispatchHandle&&(this.afterDispatchHandle.remove(),this.afterDispatchHandle=null);for(const e in this.properties){const t=this.properties[e];for(const e of t.acquired)r(e)||t.pool.release(e);t.pool.destroy(),t.pool=null,t.acquired=null}this.properties=null,this.owner=null}get(e){const t=this.owner._get(e),r=this.properties[e];let o=r.pool.acquire();for(r.acquired.push(o);o===t;)r.acquired.push(o),o=r.pool.acquire();return o}release(){for(const e in this.properties){const t=this.properties[e];let o=0;for(const e of t.acquired)r(e)?t.acquired[o++]=e:t.pool.release(e);t.acquired.length=o}}}export default o;export{o as PropertiesPool};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isSome as t}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import o from\"../../../../../core/Accessor.js\";let i=class extends o{constructor(){super(...arguments),this.type=\"DirectLineMeasurement3D\",this.visible=!0,this.settings=new n,this.measurement=null}destroy(){this.settings.destroy()}set startPoint(e){this.measurement=null,this._set(\"startPoint\",t(e)?e.clone():null)}set endPoint(e){this.measurement=null,this._set(\"endPoint\",t(e)?e.clone():null)}};e([s()],i.prototype,\"type\",void 0),e([s()],i.prototype,\"visible\",void 0),e([s()],i.prototype,\"settings\",void 0),e([s({value:null})],i.prototype,\"startPoint\",null),e([s({value:null})],i.prototype,\"endPoint\",null),e([s()],i.prototype,\"measurement\",void 0),i=e([r(\"esri.views.3d.interactive.graphics.DirectLineMeasurement3D.DirectLineMeasurement3D\")],i);let n=class extends o{constructor(){super(...arguments),this.unit=\"metric\"}};e([s({value:\"metric\"})],n.prototype,\"unit\",void 0),n=e([r(\"esri.views.3d.interactive.graphics.directLineMeasurement3D.Settings\")],n);export{i as DirectLineMeasurement3D,n as Settings};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isSome as t}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../../../core/accessorSupport/decorators/property.js\";import{aliasOf as r}from\"../../../../../core/accessorSupport/decorators/aliasOf.js\";import{subclass as s}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import i from\"../../../../../core/Accessor.js\";import a from\"../../../../../geometry/Point.js\";import n from\"../../../../../core/Handles.js\";import{PropertiesPool as c}from\"../../../support/PropertiesPool.js\";import{DirectLineMeasurement3D as u}from\"../../graphics/DirectLineMeasurement3D/DirectLineMeasurement3D.js\";let l=class extends i{constructor(){super(...arguments),this._handles=new n,this._propertiesPool=new c({startPoint:a,endPoint:a},this),this.model=new u,this.cursorPoint=null,this.state=\"initial\",this.active=!1,this.geodesicMeasurementDistanceThreshold=1e5}initialize(){this.sceneView.analyses.add(this.model),this.reset()}destroy(){this._handles.destroy(),this._handles=null,this.sceneView.analyses.remove(this.model),this._propertiesPool.destroy(),this._propertiesPool=null,this.model.destroy()}set startPointSurfaceLocation(e){this._set(\"startPointSurfaceLocation\",e)}set endPointSurfaceLocation(e){this._set(\"endPointSurfaceLocation\",e)}get measurementSurfaceLocation(){const e=this.startPointSurfaceLocation,t=this.endPointSurfaceLocation;return null==e||null==t||\"above-the-surface\"===e&&\"below-the-surface\"===t||\"below-the-surface\"===e&&\"above-the-surface\"===t||\"on-the-surface\"===e&&\"on-the-surface\"===t?\"camera-dependent\":\"above-the-surface\"===e||\"above-the-surface\"===t?\"above-the-surface\":\"below-the-surface\"}get validMeasurement(){return t(this.model.startPoint)&&t(this.model.endPoint)}get isMeasuring(){return!!this.startPoint}get geodesicDistanceExceeded(){return t(this.model.measurement)&&this.model.measurement.horizontalDistance&&this.model.measurement.horizontalDistance.value>this.geodesicMeasurementDistanceThreshold}reset(){this.clearMeasurement()}clearMeasurement(){this.state=\"initial\",this.startPoint=null,this.endPoint=null,this.cursorPoint=null,this._clearOverride(\"measurementSurfaceLocation\")}finishMeasurement(){if(!this._isOverridden(\"measurementSurfaceLocation\")){const e=this.measurementSurfaceLocation,t=\"camera-dependent\"===e?this.sceneView.state.camera.aboveGround?\"above-the-surface\":\"below-the-surface\":e;this._override(\"measurementSurfaceLocation\",t)}this.state=\"measured\"}};e([o()],l.prototype,\"messages\",void 0),e([o({constructOnly:!0})],l.prototype,\"sceneView\",void 0),e([o()],l.prototype,\"model\",void 0),e([r(\"model.startPoint\")],l.prototype,\"startPoint\",void 0),e([o({value:null})],l.prototype,\"startPointSurfaceLocation\",null),e([r(\"model.endPoint\")],l.prototype,\"endPoint\",void 0),e([o({value:null})],l.prototype,\"endPointSurfaceLocation\",null),e([o()],l.prototype,\"measurementSurfaceLocation\",null),e([o()],l.prototype,\"cursorPoint\",void 0),e([o()],l.prototype,\"state\",void 0),e([r(\"model.settings.unit\")],l.prototype,\"unit\",void 0),e([o()],l.prototype,\"active\",void 0),e([o({readOnly:!0})],l.prototype,\"validMeasurement\",null),e([o({readOnly:!0})],l.prototype,\"isMeasuring\",null),e([o()],l.prototype,\"geodesicMeasurementDistanceThreshold\",void 0),e([o({readOnly:!0})],l.prototype,\"geodesicDistanceExceeded\",null),l=e([s(\"esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DModel\")],l);var m=l;export default m;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isSome as t,unwrap as i,isNone as s,unwrapOr as r,applySome as n}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as a}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import l from\"../../../../../core/Accessor.js\";import{screenPointObjectToArray as d}from\"../../../../../core/screenUtils.js\";import{c as h}from\"../../../../../chunks/vec3f64.js\";import c from\"../../../../../core/Handles.js\";import{getElevationAtPoint as u}from\"../../../support/ElevationProvider.js\";import{lineSegment as _}from\"../../../support/geometryUtils.js\";import{Intersector as p}from\"../../../webgl-engine/lib/Intersector.js\";import{LaserlineVisualElement as m}from\"../../visualElements/LaserlineVisualElement.js\";import{createSphereManipulator as g}from\"../../manipulatorUtils.js\";import{copyParameter as b,pointToPointScreenDistance as w}from\"../support/viewUtils.js\";var v;const L={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:.75,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5};let P=v=class extends l{constructor(e){super({model:e.model}),this._state=\"pending\",this._visible=!1,this._laserLine=null,this._handles=new c,this._listenerHandles=null,this._cursorPosition=h(),this._startPosition=h(),this._endPosition=h(),this._lastDraggedHandle=null,this.dataObjectView=null,this._view=e.model.sceneView,this._params=e.params?b(L,e.params):b(L,{}),this._intersector=new p(this._view.state.mode),this._intersector.options.store=0}initialize(){const e=this.model.model,i=this._view.getAnalysisView(e);t(i)?this._initialize(i):this._view.whenAnalysisView(e).then((e=>this._initialize(e)))}_initialize(e){switch(this._state){case\"pending\":break;case\"destroyed\":return}this._set(\"dataObjectView\",e),this._laserLine=new m({view:this._view,attached:!0}),this._initializeListeners(),this._state=\"ready\"}destroy(){switch(this._state){case\"pending\":return void(this._state=\"destroyed\");case\"ready\":break;case\"destroyed\":default:return}this.hide(),this._destroyListeners(),this._handles.destroy(),this._handles=null,this._laserLine.destroy(),this._laserLine=null,this._state=\"destroyed\"}get requiresCursorPoint(){return\"initial\"===this.model.state&&this.model.active}get visible(){return this._visible}set visible(e){e?this.show():this.hide()}get viewMode(){const e=this.dataObjectView;if(!t(e))return f.None;switch(e.viewMode){default:case\"none\":return f.None;case\"segment\":return f.Direct;case\"segment-and-triangle\":return f.Triangle;case\"segment-and-projection\":return f.ProjectedGeodesic}}get testData(){const e=this._laserLine.testData;return{...t(this.dataObjectView)?this.dataObjectView.testData:{labels:{direct:null,horizontal:null,vertical:null},stripeLength:1},laserLineRenderer:{heightManifoldEnabled:!!t(e)&&e.heightManifoldEnabled,heightManifoldTarget:t(e)?e.heightManifoldTarget:null,pointDistanceEnabled:!!t(e)&&e.pointDistanceEnabled,pointDistanceOrigin:t(e)?e.pointDistanceOrigin:null,pointDistanceTarget:t(e)?e.pointDistanceTarget:null,lineVerticalPlaneEnabled:!!t(e)&&e.lineVerticalPlaneEnabled}}}get directLabelText(){return t(this.dataObjectView)?this.dataObjectView.segmentLabel.text:null}get horizontalLabelText(){return t(this.dataObjectView)?this.dataObjectView.horizontalLabel.text:null}get verticalLabelText(){return t(this.dataObjectView)?this.dataObjectView.verticalLabel.text:null}createManipulators(){const e=()=>{const e=g(this._view,this._params.handleColor,this._params.handleOpacity);return e.available=!1,e.radius=this._params.handleRadius,e},t=e(),s=e();this.model.startPoint&&(t.location=i(this.model.startPoint),t.available=!0),this.model.endPoint&&(s.location=i(this.model.endPoint),s.available=!0);const r=()=>{let e=this._lastDraggedHandle;t.grabbing&&!s.grabbing&&(e=\"start\"),s.grabbing&&!t.grabbing&&(e=\"end\"),t.grabbing||s.grabbing||(e=null);const i=e!==this._lastDraggedHandle;this._lastDraggedHandle=e,i&&this.visible&&this._updateLaserLine()};return this._handles.add([t.events.on(\"grab-changed\",(()=>{r()})),s.events.on(\"grab-changed\",(()=>{r()}))]),{start:t,end:s}}show(){switch(this._state){case\"ready\":this._visible||(this._visible=!0,this.model.model.visible=!0,this._laserLine.style={innerColor:this._params.laserLineInnerColor,innerWidth:this._params.laserLineInnerWidth,glowColor:this._params.laserLineGlowColor,glowWidth:this._params.laserLineGlowWidth,glowFalloff:this._params.laserLineGlowFalloff,globalAlpha:this._params.laserLineGlobalAlpha},this._laserLine.visible=!0,this._updateCursorPosition(),this._updateStartPosition(),this._updateEndPosition(),this._updateLaserLine());break;case\"pending\":this._visible=!0;break;case\"destroyed\":default:return}}hide(){switch(this._state){case\"ready\":this._visible&&(this._visible=!1,this.model.model.visible=!1,this._laserLine.visible=!1,this._view.cursor=null);break;case\"pending\":this._visible=!1;break;case\"destroyed\":default:return}}pick(e){const t=this._view.spatialReference,i=d(e.screenPoint);this._view.sceneIntersectionHelper.intersectToolIntersectorScreen(i,this._intersector);const r=this._intersector.results.min,n=h();if(!r.getIntersectionPoint(n))return new v.PickResult;const a=this._view.renderCoordsHelper.fromRenderCoords(n,t);if(s(a))return new v.PickResult;const o=\"TerrainRenderer\"===r.intersector?\"ground\":\"feature\";return new v.PickResult(o,n,a)}getElevation(e){return this._view.basemapTerrain.ready?r(u(this._view.elevationProvider,e),0):0}overlappingHandles(e,t){return w(e,t,this._view)<=this._params.handleRadius}_updateCursorPosition(){this.model.cursorPoint&&this._view.renderCoordsHelper.toRenderCoords(this.model.cursorPoint,this._cursorPosition)}_updateStartPosition(){t(this.model.startPoint)&&this._view.renderCoordsHelper.toRenderCoords(this.model.startPoint,this._startPosition)}_updateEndPosition(){t(this.model.endPoint)&&this._view.renderCoordsHelper.toRenderCoords(this.model.endPoint,this._endPosition)}_getFocusPosition(){const e=this.model,i=this.viewMode===f.Direct&&t(this.dataObjectView)&&\"euclidean\"===this.dataObjectView.visualizedMeasurement;switch(e.state){case\"drawing\":return i?this._startPosition:e.endPoint?this._endPosition:this._startPosition;case\"editing\":return i?\"start\"===this._lastDraggedHandle?this._endPosition:this._startPosition:\"start\"===this._lastDraggedHandle?this._startPosition:this._endPosition;default:return e.cursorPoint?this._cursorPosition:null}}_getFocusSpherePosition(){return\"drawing\"===this.model.state||\"end\"===this._lastDraggedHandle?this._startPosition:this._endPosition}_updateLaserLine(){const e=this.model,i=this._getFocusPosition(),s=this.viewMode,r=this.dataObjectView,n=this._params.laserLineEnabled&&!!i&&\"measured\"!==e.state&&e.active;if(n&&t(r)){const t=\"euclidean\"===r.actualVisualizedMeasurement;this._laserLine.heightManifoldTarget=t?i:null;const a=n&&!!e.startPoint&&\"geodesic\"===r.actualVisualizedMeasurement;this._laserLine.pointDistanceLine=a?{origin:this._getFocusSpherePosition(),target:i}:null;const o=n&&s===f.Triangle;this._laserLine.lineVerticalPlaneSegment=o?_.fromPoints(this._startPosition,this._endPosition,j):null}else this._laserLine.heightManifoldTarget=null,this._laserLine.pointDistanceLine=null,this._laserLine.lineVerticalPlaneSegment=null}_initializeListeners(){this._listenerHandles=new c,this._listenerHandles.add([this.model.watch(\"state\",(e=>{n(this.dataObjectView,(t=>{t.allowVisualElementsOrientationChange=\"measured\"!==e})),this._visible&&this._updateLaserLine()}),!0),this.model.watch(\"measurementMode\",(()=>{this._visible&&this._updateLaserLine()}),!0),this.model.watch(\"cursorPoint\",(()=>{this._updateCursorPosition(),this._visible&&this._updateLaserLine()}),!0),this.model.model.watch(\"startPoint\",(()=>{this._updateStartPosition(),this._visible&&this._updateLaserLine()}),!0),this.model.model.watch(\"endPoint\",(()=>{this._updateEndPosition(),this._visible&&this._updateLaserLine()}),!0),this.model.watch(\"active\",(()=>{this._visible&&this._updateLaserLine()}),!0)])}_destroyListeners(){this._listenerHandles.destroy(),this._listenerHandles=null}};var f;e([a({readOnly:!0})],P.prototype,\"dataObjectView\",void 0),e([a({constructOnly:!0})],P.prototype,\"model\",void 0),e([a()],P.prototype,\"directLabelText\",null),e([a()],P.prototype,\"horizontalLabelText\",null),e([a()],P.prototype,\"verticalLabelText\",null),P=v=e([o(\"esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DView\")],P),function(e){class t{}e.PickRequest=t;class i{constructor(e=null,t=null,i=null){this.type=e,this.scenePoint=t,this.mapPoint=i}}e.PickResult=i}(P||(P={})),function(e){e[e.Triangle=0]=\"Triangle\",e[e.ProjectedGeodesic=1]=\"ProjectedGeodesic\",e[e.Direct=2]=\"Direct\",e[e.None=3]=\"None\"}(f||(f={}));const j=_.create();var y=P;export default y;export{P as DirectLineMeasurement3DView,f as ViewMode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{unwrap as t}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../../core/accessorSupport/decorators/property.js\";import{aliasOf as s}from\"../../../../../core/accessorSupport/decorators/aliasOf.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import o from\"../../../../../geometry/Point.js\";import\"../../../../../geometry.js\";import n from\"../../../../../core/Handles.js\";import{init as a}from\"../../../../../core/watchUtils.js\";import{createScreenPointFromEvent as d}from\"../../../../support/screenUtils.js\";import{clonePoint as c}from\"../../../../../layers/graphics/hydratedFeatures.js\";import{createManipulatorDragEventPipeline as l,resetProperties as h}from\"../../../../interactive/dragEventPipeline.js\";import{InteractiveToolBase as u}from\"../../../../interactive/InteractiveToolBase.js\";import{screenToMap3D as m,hideManipulatorWhileDragging as p}from\"../../editingTools/dragEventPipeline3D.js\";import P from\"./DirectLineMeasurement3DModel.js\";import{DirectLineMeasurement3DView as v}from\"./DirectLineMeasurement3DView.js\";let y=class extends u{constructor(e){super(e),this._handles=new n,this._cachedPickRequest=new v.PickRequest,this._cachedPickResult=new v.PickResult,this._isAnyPointerDown=!1,this.deferCreation=!0,this.startManipulator=null,this.endManipulator=null,this.model=new P({sceneView:e.view})}initialize(){const e=new v({model:this.model});this._set(\"directLineMeasurementView\",e);const i=a(this,\"state\",(e=>{\"ready\"!==e&&this.create(),\"measured\"===e&&this.complete()}),!0);this._handles.add(i);const{start:s,end:r}=this.directLineMeasurementView.createManipulators(),o=(e,i,s)=>l(e,((e,r,o)=>{const n=p(e);r.next(n).next(m(this.view)).next((e=>\"start\"!==e.action?e:null)).next((t=>{const r=c(t.mapEnd,M);this.model[i]=r,e.location=r,this.model[s]=this._surfaceLocation(r,t.surfaceType)})),o.next(n).next(h(this.model,[i,s])).next((()=>{e.location=t(this.model[i])}))}));this._handles.add([o(s,\"startPoint\",\"startPointSurfaceLocation\"),o(r,\"endPoint\",\"endPointSurfaceLocation\")]),[s,r].forEach((e=>{this._handles.add([e.events.on(\"grab-changed\",(()=>{const e=s.grabbing||r.grabbing;e&&\"measured\"===this.model.state&&(this.model.state=\"editing\"),e||(this.model.finishMeasurement(),\"editing\"===this.model.state&&(this.model.state=\"measured\"))}))])})),this.manipulators.add(s),this.manipulators.add(r),this.startManipulator=s,this.endManipulator=r}destroy(){this.directLineMeasurementView.destroy(),this._set(\"directLineMeasurementView\",null),this.model.destroy(),this._set(\"model\",null),this._handles.destroy(),this._handles=null}get state(){var e;return null!=(e=this.model)&&e.isMeasuring?\"measured\"===this.model.state?\"measured\":\"measuring\":\"ready\"}get creating(){return\"initial\"===this.model.state||\"drawing\"===this.model.state}get isSupported(){return\"3d\"===this.get(\"view.type\")}get cursor(){var e;return null==(e=this.model)||!e.active||\"drawing\"!==this.model.state&&\"initial\"!==this.model.state?null:\"crosshair\"}activate(){this.model.active=!0}deactivate(){this.model.active=!1}onDetach(){this.model.reset()}onShow(){this.directLineMeasurementView.show(),this._updateManipulatorVisibility()}onHide(){this.directLineMeasurementView.hide()}onInputEvent(e){switch(e.type){case\"immediate-click\":this._handleImmediateClick(e);break;case\"pointer-move\":this._handlePointerMove(e);break;case\"pointer-down\":this._handlePointerDown();break;case\"pointer-up\":this._handlePointerUp()}this._updateManipulatorVisibility()}_handlePointerMove(e){this._clearCachedPickRequest();const t=d(e);\"mouse\"===e.pointerType&&(this._hoverAt(t),\"drawing\"===this.model.state&&(this.endManipulator.events.emit(\"drag\",{action:\"update\",start:t,screenPoint:t}),e.stopPropagation()))}_handlePointerDown(){this._isAnyPointerDown=!0}_handlePointerUp(){this._isAnyPointerDown=!1}_handleImmediateClick(e){if(this._clearCachedPickRequest(),!_(e))return;const t=d(e),i=e.pointerType;let s=!1;if(this.model.active)switch(this.model.state){case\"initial\":this.startManipulator.events.emit(\"drag\",{action:\"start\",pointerType:i,start:t,screenPoint:t}),this.startManipulator.events.emit(\"drag\",{action:\"end\",start:t,screenPoint:t}),this.model.startPoint&&(this.startManipulator.interactive=!1,this.endManipulator.interactive=!1,this.model.state=\"drawing\",this.endManipulator.events.emit(\"drag\",{action:\"start\",pointerType:i,start:t,screenPoint:t}),s=!0);break;case\"drawing\":this.endManipulator.events.emit(\"drag\",{action:\"update\",start:t,screenPoint:t}),null!=this.model.endPoint&&(this.endManipulator.events.emit(\"drag\",{action:\"end\",start:t,screenPoint:t}),this.startManipulator.interactive=!0,this.endManipulator.interactive=!0,this.model.finishMeasurement(),s=!0)}s&&e.stopPropagation(),\"mouse\"===e.pointerType&&this._hoverAt(t)}_hoverAt(e){const t=this._isAnyPointerDown&&\"drawing\"!==this.model.state&&\"editing\"!==this.model.state;if(this.directLineMeasurementView.requiresCursorPoint&&!t){const t=this._pick(e);t.mapPoint&&(this.model.cursorPoint=t.mapPoint)}else this.model.cursorPoint=null}_pick(e){const t=this._cachedPickRequest.screenPoint;return t&&t.x===e.x&&t.y===e.y||(this._cachedPickRequest.screenPoint=e,this._cachedPickResult=this.directLineMeasurementView.pick(this._cachedPickRequest)),this._cachedPickResult}_clearCachedPickRequest(){this._cachedPickRequest.screenPoint=null}_surfaceLocation(e,t){return 0===t?\"on-the-surface\":e.z>=this.directLineMeasurementView.getElevation(e)?\"above-the-surface\":\"below-the-surface\"}_updateManipulatorVisibility(){this.startManipulator.available=null!=this.model.startPoint,this.endManipulator.available=null!=this.model.endPoint}};function _(e){return\"mouse\"!==e.pointerType||0===e.button}e([i({readOnly:!0})],y.prototype,\"state\",null),e([i({readOnly:!0})],y.prototype,\"creating\",null),e([i({readOnly:!0})],y.prototype,\"isSupported\",null),e([i({readOnly:!0})],y.prototype,\"cursor\",null),e([i({constructOnly:!0})],y.prototype,\"model\",void 0),e([i({constructOnly:!0})],y.prototype,\"directLineMeasurementView\",void 0),e([s(\"model.mode\")],y.prototype,\"mode\",void 0),e([s(\"model.unit\")],y.prototype,\"unit\",void 0),e([s(\"model.validMeasurement\")],y.prototype,\"validMeasurement\",void 0),y=e([r(\"esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DTool\")],y);const M=new o;var g=y;export default g;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isNone as e,isSome as i}from\"../../core/maybe.js\";import r from\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import n from\"../../core/Handles.js\";import{measurementLengthUnits as l}from\"../../core/unitUtils.js\";import{init as a}from\"../../core/watchUtils.js\";import{preloadAnalysisModules as u}from\"../../views/3d/interactive/graphics/analysisFactoryUtils.js\";import{defaultUnitPropertyMetadata as c}from\"../support/commonProperties.js\";import{InteractiveToolViewModel as d}from\"../support/InteractiveToolViewModel.js\";import p from\"../../views/3d/interactive/measurementTools/directLineMeasurement3D/DirectLineMeasurement3DTool.js\";const m=r.getLogger(\"esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel\");let h=class extends d{constructor(t){super(t),this.supportedViewType=\"3d\",this._handles=new n,this._userUnitOptions=null,this._userUnit=null}initialize(){this._handles.add([a(this,\"unit\",(t=>{this.tool&&(this.tool.model.unit=t)}))])}destroy(){this._handles.destroy(),this._handles=null}get state(){return this.isDisabled?\"disabled\":this.tool?this.tool.state:\"ready\"}get measurement(){if(!this.tool)return null;const t=this.tool.model,r=this.tool.directLineMeasurementView.dataObjectView;if(e(r))return{mode:\"euclidean\",directDistance:{text:null,state:\"unavailable\"},horizontalDistance:{text:null,state:\"unavailable\"},verticalDistance:{text:null,state:\"unavailable\"}};const s=r.actualVisualizedMeasurement,o=this.tool.directLineMeasurementView,n=i(t.model.measurement)?\"available\":\"unavailable\";switch(s){case\"euclidean\":return{mode:s,directDistance:{text:o.directLabelText,state:n},horizontalDistance:{text:o.horizontalLabelText,state:n},verticalDistance:{text:o.verticalLabelText,state:n}};case\"geodesic\":return{mode:s,directDistance:{text:null,state:\"unavailable\"},horizontalDistance:{text:o.directLabelText,state:n},verticalDistance:{text:o.verticalLabelText,state:n}}}}set unitOptions(t){this._userUnitOptions=t,this._set(\"unitOptions\",this._filteredOrAllUnits(this._userUnitOptions))}get unitOptions(){return this._filteredOrAllUnits(this._userUnitOptions)}set unit(t){this._userUnit=t?this._findSelectableUnit(t,this._userUnit):null,this.notifyChange(\"unit\")}get unit(){return this._userUnit?(this._userUnit=this._findSelectableUnit(this._userUnit,this.defaultUnit),this._userUnit):this._findSelectableUnit(this.defaultUnit)}start(){return this.createTool()}clear(){this.removeTool()}static async preload(){return u(\"DirectLineMeasurement3D\")}createToolParams(){return{toolConstructor:p,constructorArguments:()=>({unit:this.unit})}}logUnsupportedError(){m.error(\"DirectLineMeasurement3D widget is not implemented for MapView\")}logError(...t){m.error(...t)}_findSelectableUnit(t,e){const i=this.unitOptions;return-1!==i.indexOf(t)?t:e?this._findSelectableUnit(e):i[0]}_filteredOrAllUnits(t){if(!t)return l.slice();const e=t.filter((t=>-1!==l.indexOf(t)));return 0===e.length?l.slice():e}};t([s({readOnly:!0})],h.prototype,\"state\",null),t([s({readOnly:!0})],h.prototype,\"measurement\",null),t([s()],h.prototype,\"tool\",void 0),t([s(c)],h.prototype,\"defaultUnit\",void 0),t([s()],h.prototype,\"unitOptions\",null),t([s()],h.prototype,\"unit\",null),h=t([o(\"esri.widgets.DirectLineMeasurement3D.DirectLineMeasurement3DViewModel\")],h);var f=h;export default f;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/accessorSupport/ensureType.js\";import{property as t}from\"../core/accessorSupport/decorators/property.js\";import{aliasOf as s}from\"../core/accessorSupport/decorators/aliasOf.js\";import{subclass as i}from\"../core/accessorSupport/decorators/subclass.js\";import\"../core/urlUtils.js\";import\"../core/uuid.js\";import\"../portal/support/resourceExtension.js\";import{ignoreAbortErrors as r}from\"../core/promiseUtils.js\";import{isMeasurementSystem as n}from\"../core/unitUtils.js\";import\"./support/widgetUtils.js\";import{accessibleHandler as o}from\"./support/decorators/accessibleHandler.js\";import{messageBundle as a}from\"./support/decorators/messageBundle.js\";import{j as l}from\"../chunks/index.js\";import u from\"./Widget.js\";import m from\"./DirectLineMeasurement3D/DirectLineMeasurement3DViewModel.js\";const c=\"esri-direct-line-measurement-3d\",p={buttonDisabled:\"esri-button--disabled\",base:`${c} esri-widget esri-widget--panel`,container:`${c}__container`,hint:`${c}__hint`,hintText:`${c}__hint-text`,panelError:`${c}__panel--error`,measurement:`${c}__measurement`,measurementItem:`${c}__measurement-item`,measurementItemDisabled:`${c}__measurement-item--disabled`,measurementItemTitle:`${c}__measurement-item-title`,measurementItemValue:`${c}__measurement-item-value`,settings:`${c}__settings`,units:`${c}__units`,unitsLabel:`${c}__units-label`,unitsSelect:`${c}__units-select esri-select`,unitsSelectWrapper:`${c}__units-select-wrapper`,actionSection:`${c}__actions`,newMeasurementButton:`${c}__clear-button esri-button esri-button--primary`,widgetIcon:\"esri-icon-measure-line\"};let d=class extends u{constructor(e,t){super(e,t),this.view=null,this.visible=null,this.iconClass=p.widgetIcon,this.label=void 0,this.messages=null,this.messagesUnits=null,this.viewModel=new m,this.unitOptions=null,this.unit=null}render(){const{isSupported:e,active:t,state:s,measurement:i,unit:r}=this.viewModel,o=\"disabled\"===s,a=\"ready\"===s,u=\"measuring\"===s||\"measured\"===s,{messages:m,messagesUnits:c}=this,d=t&&a?l(\"section\",{key:\"esri-direct-line-measurement-3d__hint\",class:p.hint},l(\"p\",{class:p.hintText},m.hint)):null,v=e?null:l(\"section\",{key:\"esri-direct-line-measurement-3d__unsupported\",class:p.panelError},l(\"p\",null,m.unsupported)),_=(e,t,s)=>{switch(t.state){case\"available\":return l(\"div\",{key:`${s}-enabled`,class:p.measurementItem},l(\"span\",{class:p.measurementItemTitle},e),l(\"span\",{class:p.measurementItemValue},t.text));case\"unavailable\":return l(\"div\",{key:`${s}-disabled`,class:this.classes(p.measurementItem,p.measurementItemDisabled)},l(\"span\",{class:p.measurementItemTitle},e))}},h=u?l(\"section\",{key:\"esri-direct-line-measurement-3d__measurement\",class:p.measurement},_(m.direct,i.directDistance,\"direct\"),_(m.horizontal,i.horizontalDistance,\"horizontal\"),_(m.vertical,i.verticalDistance,\"vertical\")):null,b=`${this.id}__units`,w=l(\"label\",{class:p.unitsLabel,for:b},m.unit),g=l(\"div\",{class:p.unitsSelectWrapper},l(\"select\",{class:p.unitsSelect,id:b,onchange:this._changeUnit,bind:this,value:r},this.viewModel.unitOptions.map((e=>{var t;return l(\"option\",{key:e,value:e},n(e)?c.systems[e]:null==(t=c.units[e])?void 0:t.pluralCapitalized)})))),y=l(\"section\",{key:\"esri-direct-line-measurement-3d__units\",class:p.units},w,g),M=u?l(\"div\",{key:\"settings\",class:p.settings},y):null,$=!e||t&&!u?null:l(\"div\",{class:p.actionSection},l(\"button\",{disabled:o,class:this.classes(p.newMeasurementButton,o&&p.buttonDisabled),bind:this,onclick:this._newMeasurement,type:\"button\"},m.newMeasurement)),j=this.visible?l(\"div\",{class:p.container},v,d,M,h,$):null;return l(\"div\",{key:this,class:p.base,role:\"presentation\"},j)}_newMeasurement(){r(this.viewModel.start())}_changeUnit(e){const t=e.target,s=t.options[t.selectedIndex];s&&(this.unit=s.value)}beforeFirstRender(){return m.preload().then((()=>super.beforeFirstRender()))}};e([s(\"viewModel.view\")],d.prototype,\"view\",void 0),e([s(\"viewModel.visible\")],d.prototype,\"visible\",void 0),e([s(\"viewModel.active\")],d.prototype,\"active\",void 0),e([t()],d.prototype,\"iconClass\",void 0),e([t({aliasOf:{source:\"messages.widgetLabel\",overridable:!0}})],d.prototype,\"label\",void 0),e([t(),a(\"esri/widgets/DirectLineMeasurement3D/t9n/DirectLineMeasurement3D\")],d.prototype,\"messages\",void 0),e([t(),a(\"esri/core/t9n/Units\")],d.prototype,\"messagesUnits\",void 0),e([t({type:m})],d.prototype,\"viewModel\",void 0),e([s(\"viewModel.unitOptions\")],d.prototype,\"unitOptions\",void 0),e([s(\"viewModel.unit\")],d.prototype,\"unit\",void 0),e([o()],d.prototype,\"_newMeasurement\",null),e([o()],d.prototype,\"_changeUnit\",null),d=e([i(\"esri.widgets.DirectLineMeasurement3D\")],d);var v=d;export default v;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../core/accessorSupport/decorators/subclass.js\";import r from\"../../core/Error.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import s from\"../../core/Accessor.js\";import i from\"../../core/Handles.js\";import{init as l}from\"../../core/watchUtils.js\";import{evaluateToolConstructorArguments as n}from\"../../views/interactive/interactiveToolUtils.js\";let p=class extends s{constructor(t){super(t),this.tool=null,this._baseHandles=new i,this._loggedUnsupportedErrorOnce=!1,this._creationAbortController=null,t&&null!=t.visible&&(this.visible=t.visible)}initialize(){this._baseHandles.add(l(this,[\"view.ready\",\"isSupported\"],(()=>{this.view&&this.view.ready&&!this.isSupported?this._loggedUnsupportedErrorOnce||(this.logUnsupportedError(),this._loggedUnsupportedErrorOnce=!0):this._loggedUnsupportedErrorOnce=!1})))}destroy(){this.removeTool(),this.view=null,this._baseHandles.destroy(),this._baseHandles=null}get isSupported(){return!this.view||this.view.type===this.supportedViewType}get view(){return this._get(\"view\")}set view(t){if(t===this.view)return;this.removeTool(),this._set(\"view\",t);const o=\"tools\";this._baseHandles.remove(o),t&&this._baseHandles.add(t.tools.on(\"change\",(t=>{if(this.tool)for(const o of t.removed)if(this.tool===o){o.destroyed||o.destroy(),this._set(\"tool\",null);break}})),o)}set visible(t){this._set(\"visible\",t),this.tool&&(this.tool.visible=t),!t&&this._creationAbortController&&(this._creationAbortController.abort(),this._creationAbortController=null)}get active(){return null!=this._creationAbortController||null!=this.tool&&this.tool.active}get isDisabled(){return!this.view||!this.view.ready||!this.isSupported}get creatingTool(){return!!this._creationAbortController}async createTool(){if(this.removeTool(),!this.isSupported)return Promise.reject(new r(\"tool:create\",\"The view does not support the tool\"));const t=this.createToolParams(),o=()=>{const o=n(t.constructorArguments);return{visible:this.visible,...o}},e=new AbortController,s=e.signal;this._creationAbortController=e;const i=()=>{e===this._creationAbortController&&(this._creationAbortController=null)};try{const e=await this.view.createTool(t.toolConstructor,o,{signal:s});this._set(\"tool\",e),i()}catch(l){throw i(),l}}removeTool(){this._creationAbortController&&this._creationAbortController.abort(),this._creationAbortController=null;const t=this.tool;t&&(this.view&&this.view.tools&&this.view.tools.remove(t),t.destroyed||t.destroy(),this._set(\"tool\",null))}};t([o({constructOnly:!0})],p.prototype,\"tool\",void 0),t([o()],p.prototype,\"isSupported\",null),t([o({value:null})],p.prototype,\"view\",null),t([o({type:Boolean,value:!0})],p.prototype,\"visible\",null),t([o()],p.prototype,\"active\",null),t([o()],p.prototype,\"isDisabled\",null),t([o()],p.prototype,\"_creationAbortController\",void 0),t([o({readOnly:!0})],p.prototype,\"creatingTool\",null),p=t([e(\"esri.widgets.support.InteractiveToolViewModel\")],p);export{p as InteractiveToolViewModel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{clone as e}from\"../../../../../core/lang.js\";import{createRenderScreenPointArray3 as r,createScreenPointArray as n}from\"../../../../../core/screenUtils.js\";import{c as o}from\"../../../../../chunks/vec3f64.js\";import{s as t,b as s,a as c}from\"../../../../../chunks/vec3.js\";import{i as f,t as a,s as i}from\"../../../../../chunks/mat4.js\";import{d as u,e as m,i as p}from\"../../../../../chunks/vec2.js\";const h=o();function l(r,n){return{...r,...e(n)}}function d(e,r,n,o){for(;e.length<r;)e.push(n());if(o)for(;e.length>r;){o(e.pop())}else e.length=r}function j(e,r,n){f(n),a(n,n,r),t(h,e,e,e),i(n,n,h)}function g(e,r){if(t(r,0,0,0),e.length>0){for(let n=0;n<e.length;++n)s(r,r,e[n]);c(r,r,1/e.length)}}function k(e,r,n,o){o.projectToRenderScreen(e,b),o.projectToRenderScreen(r,H),u(n,U,x),m(n,n)}function R(e,r,n){const o=n.state.camera;n.renderCoordsHelper.toRenderCoords(e,v),o.projectToRenderScreen(v,C),n.state.camera.renderToScreen(C,r)}function S(e,r,n){return R(e,w,n),R(r,y,n),p(w,y)}function T(e,r,n){return R(e,q,n),p(q,r)}const v=o(),C=r(),b=r(),x=b,H=r(),U=H,q=n(),w=n(),y=n();export{l as copyParameter,g as midpoint,S as pointToPointScreenDistance,T as pointToScreenPositionDistance,d as resizeArray,j as scaleTranslateMatrix,k as screenSpaceTangent};\n"],"sourceRoot":""}