{"version":3,"sources":["../node_modules/@arcgis/core/geometry/support/meshUtils/deduplicate.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js","../node_modules/@arcgis/core/chunks/WaterSurface.glsl.js","../node_modules/@arcgis/core/chunks/TextureOnly.glsl.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/LineVisualElement.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/FoamRendering.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js","../node_modules/@arcgis/core/geometry/support/triangulationUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js","../node_modules/@arcgis/core/views/3d/support/debugFlags.js","../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderTarget.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/localOrigin.js","../node_modules/@arcgis/core/views/3d/terrain/Overlay.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/CommonUniformStore.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueRepository.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GLMaterialRep.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderContext.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ChangeSet.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/rendererUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/ResizableFloat32Array.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/WaterGLMaterial.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/Instance.js","../node_modules/@arcgis/core/views/3d/webgl-engine/statistics/RendererPerformanceInfo.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/renderers/MergedRenderer.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/SortedRenderGeometryRenderer.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/TextureTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/LongVectorMath.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SphericalHarmonics.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js","../node_modules/@arcgis/core/views/3d/terrain/OverlayRenderer.js","../node_modules/@arcgis/core/views/3d/layers/graphics/constants.js","../node_modules/@arcgis/core/views/3d/layers/graphics/lineUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Reprojection.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Gamma.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js","../node_modules/@arcgis/core/core/libs/earcut/earcut.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/AnalyticalSkyModel.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/materials/lineStippleUtils.js"],"names":["n","f","i","u","c","byteLength","s","Uint32Array","a","h","minReduction","d","originalIndices","g","length","y","componentOffsets","U","t","w","Math","floor","o","A","m","b","p","v","M","ceil","q","x","sqrt","l","r","e","j","buffer","indices","uniqueCount","fragment","uniforms","add","include","code","bindUniforms","setUniform1i","setUniform4f","waveStrength","waveTextureRepeat","flowStrength","flowOffset","setUniform2f","waveDirection","waveVelocity","linearDepth","attributes","vertex","output","varyings","multipassTerrainEnabled","float","receiveShadows","OITEnabled","Object","freeze","__proto__","build","_renderOccluded","_width","_color","_innerWidth","_innerColor","_stipplePattern","_stippleOffColor","_stippleIntegerRepeats","_writeDepthEnabled","_falloff","_polygonOffset","applyProps","this","view","spatialReference","renderCoordsHelper","toRenderCoords","push","geometry","lines","forEach","origin","endpoint","endRenderSpace","transform","createRenderGeometry","points","map","_updateMaterial","_geometry","recreateGeometry","recreate","_material","_","materialParameters","_createLineGeometries","addGeometry","width","color","stippleOffColor","stipplePattern","isClosed","falloff","innerColor","innerWidth","stippleIntegerRepeats","polygonOffset","renderOccluded","writeDepth","attached","setParameterValues","Float64Array","attributeData","position","removeDuplicateStartEnd","viewingMode","Array","index","pathLengths","count","holeIndices","polygons","outlines","intensity","direction","castShadows","sh","S","arguments","SCENEVIEW_HITTEST_RETURN_INTERSECTOR","SCENEVIEW_LOCKING_LOG","HIGHLIGHTS_GRID_OPTIMIZATION_ENABLED","HIGHLIGHTS_PROFILE_TO_CONSOLE","DECONFLICTOR_SHOW_VISIBLE","DECONFLICTOR_SHOW_INVISIBLE","DECONFLICTOR_SHOW_GRID","LABELS_SHOW_BORDER","OVERLAY_DRAW_DEBUG_TEXTURE","OVERLAY_SHOW_CENTER","SHOW_POI","TESTS_DISABLE_UPDATE_THRESHOLDS","DISABLE_DECONFLICTOR_VISIBILITY_OFFSET","DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES","DRAW_MESH_GEOMETRY_NORMALS","FEATURE_TILE_FETCH_SHOW_TILES","FEATURE_TILE_TREE_SHOW_TILES","TERRAIN_TILE_TREE_SHOW_TILES","I3S_TREE_SHOW_TILES","I3S_SHOW_MODIFICATIONS","ENABLE_PROFILE_DEPTH_RANGE","DISABLE_FAST_UPDATES","LOD_INSTANCE_RENDERER_DISABLE_UPDATES","LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL","EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES","I","E","prototype","T","id","_renderTarget","colorTarget","depthStencilTarget","target","pixelFormat","dataType","wrapMode","samplingMode","hasMipmap","maxAnisotropy","height","colorTexture","resize","bindFramebuffer","descriptor","generateMipmap","vec3","extent","resolution","renderLocalOrigin","pixelRatio","renderTargets","fbo","valid","lastUsed","colorWithoutRasterImage","highlight","water","occluded","dispose","drawPass","disposeRenderTargetMemory","validateUsage","getGpuMemoryUsage","_uniforms","proj","uShadowMapDistance","viewportPixelSz","lightingMainDirection","hasUniform","technique","refCount","refZeroFrame","_context","_perConstructorInstances","Map","_frameCounter","_keepAliveFrameCount","clear","key","get","set","acquire","release","constructor","delete","size","commonUniformStore","getPrograms","shader","reload","Promise","all","name","find","getLogger","refCnt","glMaterial","_textureRep","_techniqueRep","onMaterialChanged","_id2glMaterialRef","ownMaterial","getGLMaterial","material","techniqueRep","textureRep","incRefCnt","decRefCnt","getRefCnt","updateParameters","materialRepository","error","ROOT_ORIGIN_ID","_origins","_gridSize","testOrigin","getOrigin","random","abs","round","window","_stage","_object","isPickable","castShadow","Uint16Array","WebMercator","O","data","exclusive","console","log","rctx","offscreenRenderingHelper","scenelightingData","shadowMap","ssaoHelper","sliceHelper","camera","lastFrameCamera","pass","slot","highlightDepthTexture","renderOccludedMask","hasOccludees","adds","removes","updates","allocator","deallocator","renderGeometry","prune","indexCount","_array","Float32Array","_size","subarray","waterTextureRepository","configuration","transparencyPassType","slicePlaneEnabled","sliceHighlightDisabled","sliceEnabledForVertexPrograms","pbrMode","useCustomDTRExponentForWater","ssrEnabled","useSSR","highStepCount","cullAboveGround","generateSource","ready","updating","loadTextures","bindProjectionMatrix","program","projectionMatrix","setUniform2fv","nearFar","inverseViewport","lighting","setUniforms","bindRepo","setUniform4fv","bindOutputHighlight","bindView","bindCamPosition","viewInverseTransposeMatrix","SHADOW_MAP","bindUniformsWithOrigin","blending","transparent","depthTest","func","depthWrite","colorWrite","enableOffset","setPipelineState","P","isDraped","acquireAndReleaseExisting","getTechniqueConfig","params","animation","time","setUniform1f","animationSpeed","shadowMappingEnabled","ensureResource","_updateShadowState","_updateSSRState","bindProgram","bindPass","setElapsedTimeUniform","from","to","isVisible","hasHighlights","transformation","transformationNormal","first","drawCalls","triangles","type","_dataByOrigin","_hasHighlights","_hasOccludees","_rctx","_materialRep","_glMaterials","_bufferWriter","createBufferWriter","vao","isEmpty","updateGeometries","addAndRemoveGeometries","updateRenderCommands","vertexBufferLayout","stride","optimalCount","sparseCount","toAdd","toRemove","elementCount","H","createData","R","array","removeAndRebuild","removeByErasing","end","begin","B","append","vertexBuffers","byteSize","setData","setSubData","drawCommandsDirty","updateType","instances","instanceParameters","visible","highlights","occludees","D","write","invTranspTransformation","createView","hasHiddenInstances","drawCommandsDefault","drawCommandsHighlight","drawCommandsOccludees","drawCommandsShadowHighlightRest","stats","default","shadowHighlightRest","layout","sort","C","values","update","ensureResources","beginSlot","ensureParameters","getTechnique","getPipelineState","bind","bindDraw","ensureAttributeLocations","bindVAO","primitiveType","renderCommands","drawArrays","vertexAttributeLocations","createVertex","erase","glMaterials","_pendingAddsRemoves","_changes","_materialRenderers","_sortedMaterialRenderers","_hasWater","rendersOccluded","forAll","stopAtTime","updateAddsRemoves","hasWater","modify","updateSortedMaterialRenderers","notifyChange","pushNew","materialRenderer","updateLogic","render","insertOrder","renderPriority","has","removeUnorderedIndex","sortedMaterialRenderers","hasAlpha","k","sphericalHarmonics","main","PI","_renderLighting","_shOrder","_oldSunlight","ambient","diffuse","setUniform3fv","_info","groundLightingFactor","globalFactor","setLightDirectionUniform","setUniform3f","lights","z","_overlays","_rendersOccluded","_lighting","F","_localOrigins","_handles","_layerRenderers","_sortedLayerRenderersDirty","_sortedLayerRenderers","_geometries","globalUnitScale","longitudeCyclical","renderView","renderingContext","_renderContext","_stippleTextureRepository","_shaderTechniqueRepository","stippleTextureRepository","emitContentChanged","_materialRepository","textureRepository","K","updateRendersOccluded","_compositingHelper","compositingHelper","_bindParameters","X","screenToWorldRatio","screenToWorldRatioGlobalWM","slicePlane","ssaoEnabled","linearDepthTexture","linearDepthTextureUnit","lastFrameColorTexture","lastFrameColorTextureUnit","reprojectionMat","terrainLinearDepthTexture","geometryLinearDepthTexture","multipassGeometryEnabled","scheduler","registerTask","STAGE","commitChanges","destroy","_temporaryRenderTarget","_debugPatternTexture","_quadVAO","remove","updateSortedLayerRenderers","updateHasHighlights","updateHasWater","boundingSphere","ensureLayerRenderer","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","warn","graphicUid","L","numViews","_screenToWorldRatio","views","viewport","hasNonZeroSizedView","isValid","setClearColor","clearSafe","setViewParameters","drawDebugTexture","N","layerView","renderer","drapeSourceType","fullOpacity","bindTemporaryFramebuffer","draw","composite","getTexture","generateMipMap","resetRenderOccludedMask","hotReload","intersectRenderGeometry","min","range","max","Y","Z","intersect","getShaderTransformation","addIntersectionResult","layerUid","calculateShaderTransformation","metadata","results","ground","dist","normal","intersector","drapedLayerOrder","options","store","ray","stopAnimationsAtTime","watch","keys","allLayerViews","Set","near","far","viewMatrix","setGLViewport","fullViewport","onContentChanged","onHasHighlightsChanged","onRendersOccludedChanged","ensureDebugPatternResources","_debugTextureTechnique","pipeline","bindTexture","Uint8Array","W","layerRenderers","V","G","constructOnly","Boolean","readOnly","relativeElevation","mapPosition","colorFeature","sizeFeature","opacityFeature","join","uniformSize","rings","paths","hasZ","projectionSuccess","sampledElevation","setUniformMatrix4fv","constants","next","prev","steiner","prevZ","nextZ","bindViewCustomOrigin","cache","texture","patternId","patternToTextureData","internalFormat","reduce","slice"],"mappings":"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","file":"static/js/6.3acd22b8.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as t}from\"../../../core/mathUtils.js\";function n(n,f,i){var u;const c=n.byteLength/(4*f),s=new Uint32Array(n,0,c*f);let a=new Uint32Array(c);const h=null!=(u=null==i?void 0:i.minReduction)?u:0,d=(null==i?void 0:i.originalIndices)||null,g=d?d.length:0,y=(null==i?void 0:i.componentOffsets)||null;let U=0;if(y)for(let t=0;t<y.length-1;t++){const n=y[t+1]-y[t];n>U&&(U=n)}else U=c;const w=Math.floor(1.1*U)+1;(null==o||o.length<2*w)&&(o=new Uint32Array(t(2*w)));for(let t=0;t<2*w;t++)o[t]=0;let A=0;const m=!!y&&!!d,b=m?g:c,p=m?new Uint32Array(g):null,v=1.96;let M=0!==h?Math.ceil(4*v*v/(h*h)*h*(1-h)):b,q=1,x=y?y[1]:b;for(let t=0;t<b;t++){if(t===M){const n=1-A/t;if(n+v*Math.sqrt(n*(1-n)/t)<h)return null;M*=2}if(t===x){for(let t=0;t<2*w;t++)o[t]=0;if(d)for(let t=y[q-1];t<y[q];t++)p[t]=a[d[t]];x=y[++q]}const n=m?d[t]:t,l=n*f,i=r(s,l,f);let u=i%w,c=A;for(;0!==o[2*u+1];){if(o[2*u]===i){const t=o[2*u+1]-1;if(e(s,l,t*f,f)){c=a[t];break}}u++,u>=w&&(u-=w)}c===A&&(o[2*u]=i,o[2*u+1]=n+1,A++),a[n]=c}if(0!==h&&1-A/c<h)return null;if(m){for(let t=y[q-1];t<p.length;t++)p[t]=a[d[t]];a=p}const j=new Uint32Array(f*A);A=0;for(let t=0;t<b;t++)if(a[t]===A){l(s,(m?d[t]:t)*f,j,A*f,f),A++}if(d&&!m){const t=new Uint32Array(g);for(let n=0;n<t.length;n++)t[n]=a[d[n]];a=t}return{buffer:j.buffer,indices:a,uniqueCount:A}}function e(t,n,e,l){for(let r=0;r<l;r++)if(t[n+r]!==t[e+r])return!1;return!0}function l(t,n,e,l,r){for(let o=0;o<r;o++)e[l+o]=t[n+o]}function r(t,n,e){let l=0;for(let r=0;r<e;r++)l=t[n+r]+l|0,l=l+(l<<11)+(l>>>2)|0;return l>>>0}let o=null;export default n;export{n as deduplicate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{FoamIntensity as t}from\"./FoamRendering.glsl.js\";function r(r){r.fragment.uniforms.add(\"texWaveNormal\",\"sampler2D\"),r.fragment.uniforms.add(\"texWavePerturbation\",\"sampler2D\"),r.fragment.uniforms.add(\"waveParams\",\"vec4\"),r.fragment.uniforms.add(\"waveDirection\",\"vec2\"),r.include(t),r.fragment.code.add(e`\n      const vec2  FLOW_JUMP = vec2(6.0/25.0, 5.0/24.0);\n\n      vec2 textureDenormalized2D(sampler2D _tex, vec2 _uv) {\n        return 2.0 * texture2D(_tex, _uv).rg - 1.0;\n      }\n\n      float sampleNoiseTexture(vec2 _uv) {\n        return texture2D(texWavePerturbation, _uv).b;\n      }\n\n      vec3 textureDenormalized3D(sampler2D _tex, vec2 _uv) {\n        return 2.0 * texture2D(_tex, _uv).rgb - 1.0;\n      }\n\n      float computeProgress(vec2 uv, float time) {\n        return fract(time);\n      }\n\n      float computeWeight(vec2 uv, float time) {\n        float progress = computeProgress(uv, time);\n        return 1.0 - abs(1.0 - 2.0 * progress);\n      }\n\n      vec3 computeUVPerturbedWeigth(sampler2D texFlow, vec2 uv, float time, float phaseOffset) {\n        float flowStrength = waveParams[2];\n        float flowOffset = waveParams[3];\n\n        vec2 flowVector = textureDenormalized2D(texFlow, uv) * flowStrength;\n\n        float progress = computeProgress(uv, time + phaseOffset);\n        float weight = computeWeight(uv, time + phaseOffset);\n\n        vec2 result = uv;\n        result -= flowVector * (progress + flowOffset);\n        result += phaseOffset;\n        result += (time - progress) * FLOW_JUMP;\n\n        return vec3(result, weight);\n      }\n\n      const float TIME_NOISE_TEXTURE_REPEAT = 0.3737;\n      const float TIME_NOISE_STRENGTH = 7.77;\n\n      vec3 getWaveLayer(sampler2D _texNormal, sampler2D _dudv, vec2 _uv, vec2 _waveDir, float time) {\n        float waveStrength = waveParams[0];\n\n        // overall directional shift in uv's for directional wave movement for\n        // now we do a hard coded scale for wave speed such that a unit length\n        // direction is not too fast.\n        vec2 waveMovement = time * -_waveDir;\n\n        float timeNoise = sampleNoiseTexture(_uv * TIME_NOISE_TEXTURE_REPEAT) * TIME_NOISE_STRENGTH;\n\n        // compute two perturbed uvs and blend weights\n        // then sample the wave normals at the two positions and blend\n        vec3 uv_A = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.0);\n        vec3 uv_B = computeUVPerturbedWeigth(_dudv, _uv + waveMovement, time + timeNoise, 0.5);\n\n        vec3 normal_A = textureDenormalized3D(_texNormal, uv_A.xy) * uv_A.z;\n        vec3 normal_B = textureDenormalized3D(_texNormal, uv_B.xy) * uv_B.z;\n\n        // logic to flatten the wave pattern\n        // scale xy components of the normal, then adjust z (up) component\n        vec3 mixNormal = normalize(normal_A + normal_B);\n        mixNormal.xy *= waveStrength;\n        mixNormal.z = sqrt(1.0 - dot(mixNormal.xy, mixNormal.xy));\n\n        return mixNormal;\n      }\n\n      vec4 getSurfaceNormalAndFoam(vec2 _uv, float _time) {\n        float waveTextureRepeat = waveParams[1];\n        vec3 normal = getWaveLayer(texWaveNormal, texWavePerturbation, _uv * waveTextureRepeat, waveDirection, _time);\n        float foam  = normals2FoamIntensity(normal, waveParams[0]);\n        return vec4(normal, foam);\n      }\n    `)}!function(e){function t(e,t){e.setUniform1i(\"texWaveNormal\",0),e.setUniform1i(\"texWavePerturbation\",1),e.setUniform4f(\"waveParams\",t.waveStrength,t.waveTextureRepeat,t.flowStrength,t.flowOffset),e.setUniform2f(\"waveDirection\",t.waveDirection[0]*t.waveVelocity,t.waveDirection[1]*t.waveVelocity)}e.bindUniforms=t}(r||(r={}));export{r as WaterDistortion};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Transform as r}from\"../views/3d/webgl-engine/core/shaderLibrary/Transform.glsl.js\";import{ShaderBuilder as a}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{ColorConversion as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{Slice as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{ReadLinearDepth as t}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{OutputHighlight as n}from\"../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\";import{symbolAlphaCutoff as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaDiscard.glsl.js\";import{multipassTerrainTest as l}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{ReadShadowMap as s}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{WaterDistortion as v}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/WaterDistortion.glsl.js\";import{ForwardLinearDepth as g}from\"../views/3d/webgl-engine/core/shaderLibrary/ForwardLinearDepth.glsl.js\";import{NormalUtils as c}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/NormalUtils.glsl.js\";import{Water as m}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/Water.glsl.js\";function p(p){const u=new a;return u.include(r,{linearDepth:!1}),u.attributes.add(\"position\",\"vec3\"),u.attributes.add(\"uv0\",\"vec2\"),u.vertex.uniforms.add(\"proj\",\"mat4\").add(\"view\",\"mat4\").add(\"localOrigin\",\"vec3\"),u.vertex.uniforms.add(\"waterColor\",\"vec4\"),0!==p.output&&7!==p.output||(u.include(c,p),u.include(g,p),u.varyings.add(\"vuv\",\"vec2\"),u.varyings.add(\"vpos\",\"vec3\"),u.varyings.add(\"vnormal\",\"vec3\"),u.varyings.add(\"vtbnMatrix\",\"mat3\"),p.multipassTerrainEnabled&&u.varyings.add(\"depth\",\"float\"),u.vertex.code.add(e`\n      void main(void) {\n        if (waterColor.a < ${e.float(d)}) {\n          // Discard this vertex\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          return;\n        }\n\n        vuv = uv0;\n        vpos = position;\n\n        vnormal = getLocalUp(vpos, localOrigin);\n        vtbnMatrix = getTBNMatrix(vnormal);\n\n        ${p.multipassTerrainEnabled?\"depth = (view * vec4(vpos, 1.0)).z;\":\"\"}\n\n        gl_Position = transformPosition(proj, view, vpos);\n        ${0===p.output?\"forwardLinearDepth();\":\"\"}\n      }\n    `)),p.multipassTerrainEnabled&&(u.fragment.include(t),u.include(l,p)),7===p.output&&(u.include(i,p),u.fragment.uniforms.add(\"waterColor\",\"vec4\"),u.fragment.code.add(e`\n        void main() {\n          discardBySlice(vpos);\n          ${p.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n\n          gl_FragColor = vec4(waterColor.a);\n        }\n      `)),0===p.output&&(u.include(v,p),u.include(i,p),p.receiveShadows&&u.include(s,p),u.include(m,p),u.fragment.uniforms.add(\"waterColor\",\"vec4\").add(\"lightingMainDirection\",\"vec3\").add(\"lightingMainIntensity\",\"vec3\").add(\"camPos\",\"vec3\").add(\"timeElapsed\",\"float\").add(\"view\",\"mat4\"),u.fragment.include(o),u.fragment.code.add(e`\n      void main() {\n        discardBySlice(vpos);\n        ${p.multipassTerrainEnabled?\"terrainDepthTest(gl_FragCoord, depth);\":\"\"}\n        vec3 localUp = vnormal;\n        // the created normal is in tangent space\n        vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);\n\n        // we rotate the normal according to the tangent-bitangent-normal-Matrix\n        vec3 n = normalize(vtbnMatrix * tangentNormalFoam.xyz);\n        vec3 v = -normalize(vpos - camPos);\n        vec3 l = normalize(-lightingMainDirection);\n        float shadow = ${p.receiveShadows?e`1.0 - readShadowMap(vpos, linearDepth)`:\"1.0\"};\n        vec4 vPosView = view*vec4(vpos, 1.0);\n        vec4 final = vec4(getSeaColor(n, v, l, waterColor.rgb, lightingMainIntensity, localUp, shadow, tangentNormalFoam.w, vPosView.xyz), waterColor.w);\n\n        // gamma correction\n        gl_FragColor = delinearizeGamma(final);\n        gl_FragColor = highlightSlice(gl_FragColor, vpos);\n        ${p.OITEnabled?\"gl_FragColor = premultiplyAlpha(gl_FragColor);\":\"\"}\n      }\n    `)),2===p.output&&(u.include(c,p),u.include(v,p),u.include(i,p),u.varyings.add(\"vpos\",\"vec3\"),u.varyings.add(\"vuv\",\"vec2\"),u.vertex.code.add(e`\n        void main(void) {\n          if (waterColor.a < ${e.float(d)}) {\n            // Discard this vertex\n            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n            return;\n          }\n\n          vuv = uv0;\n          vpos = position;\n\n          gl_Position = transformPosition(proj, view, vpos);\n        }\n    `),u.fragment.uniforms.add(\"timeElapsed\",\"float\"),u.fragment.code.add(e`\n        void main() {\n          discardBySlice(vpos);\n\n          // the created normal is in tangent space and foam\n          vec4 tangentNormalFoam = getSurfaceNormalAndFoam(vuv, timeElapsed);\n          tangentNormalFoam.xyz = normalize(tangentNormalFoam.xyz);\n\n          gl_FragColor = vec4((tangentNormalFoam.xyz + vec3(1.0)) * 0.5, tangentNormalFoam.w);\n        }\n    `)),5===p.output&&(u.varyings.add(\"vpos\",\"vec3\"),u.vertex.code.add(e`\n        void main(void) {\n          if (waterColor.a < ${e.float(d)}) {\n            // Discard this vertex\n            gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n            return;\n          }\n\n          vpos = position;\n          gl_Position = transformPosition(proj, view, vpos);\n        }\n    `),u.fragment.uniforms.add(\"waterColor\",\"vec4\"),u.fragment.code.add(e`\n        void main() {\n          gl_FragColor = waterColor;\n        }\n    `)),4===p.output&&(u.include(n),u.varyings.add(\"vpos\",\"vec3\"),u.vertex.code.add(e`\n      void main(void) {\n        if (waterColor.a < ${e.float(d)}) {\n          // Discard this vertex\n          gl_Position = vec4(1e38, 1e38, 1e38, 1.0);\n          return;\n        }\n\n        vpos = position;\n        gl_Position = transformPosition(proj, view, vpos);\n      }\n    `),u.include(i,p),u.fragment.code.add(e`\n      void main() {\n        discardBySlice(vpos);\n        outputHighlight();\n      }\n    `)),u}var u=Object.freeze({__proto__:null,build:p});export{u as W,p as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as r}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{ScreenSpacePass as o}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.js\";function n(){const n=new r;return n.include(o),n.fragment.uniforms.add(\"tex\",\"sampler2D\"),n.fragment.uniforms.add(\"color\",\"vec4\"),n.fragment.code.add(e`\n    void main() {\n      vec4 texColor = texture2D(tex, uv);\n      gl_FragColor = texColor * color;\n    }\n  `),n}var a=Object.freeze({__proto__:null,build:n});export{a as T,n as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import{Z as r,c as s}from\"../../../../chunks/vec3f64.js\";import{s as i}from\"../../../../chunks/vec3.js\";import{i as o,t as n}from\"../../../../chunks/mat4.js\";import{a as l}from\"../../../../chunks/mat4f64.js\";import{g as a,c as h}from\"../../../../chunks/vec4.js\";import{f as p,c as d,a as f}from\"../../../../chunks/vec4f32.js\";import{RibbonLineMaterial as _}from\"../../webgl-engine/materials/RibbonLineMaterial.js\";import{createGeometry as c}from\"../../layers/graphics/lineUtils.js\";import{Object3DVisualElement as m}from\"./Object3DVisualElement.js\";class u extends m{constructor(e){super(e),this._renderOccluded=4,this._width=1,this._color=p(1,0,1,1),this._innerWidth=1,this._innerColor=null,this._stipplePattern=null,this._stippleOffColor=null,this._stippleIntegerRepeats=!1,this._writeDepthEnabled=!0,this._falloff=0,this._polygonOffset=!1,this.applyProps(e)}setGeometryFromExtent(e){const t=this.view.spatialReference,r=s(),o=s(),n=100,l=[];i(r,e[0],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[2],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[2],e[3],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[0],e[3],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[0],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),i(r,e[0],e[1],n),this.view.renderCoordsHelper.toRenderCoords(r,t,o),l.push([o[0],o[1],o[2]]),this.geometry=[l]}setGeometryFromFrustum(e){const t=[];e.lines.forEach((e=>{t.push([e.origin[0],e.origin[1],e.origin[2]]),t.push([e.endpoint[0],e.endpoint[1],e.endpoint[2]])})),this.geometry=[t]}setGeometryFromSegment(e){const t=e.endRenderSpace;o(g),n(g,g,t),this.transform=g;const{points:r}=e.createRenderGeometry(t,this.view.renderCoordsHelper);this.geometry=[r]}setGeometryFromSegments(e,t=r){o(g),n(g,g,t),this.transform=g,this.geometry=e.map((e=>e.createRenderGeometry(t,this.view.renderCoordsHelper).points))}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){a(e,this._color)||(h(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(r){e(r)?!t(this._innerColor)&&a(r,this._innerColor)||(this._innerColor=h(d(),r),this._updateMaterial()):e(this._innerColor)&&(this._innerColor=null,this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(t){const r=e(t)!==e(this._stipplePattern);this._stipplePattern=t,r?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(r){(t(r)||t(this._stippleOffColor)||!a(r,this._stippleOffColor))&&(this._stippleOffColor=e(r)?f(r):null,this._updateMaterial())}get stippleIntegerRepeats(){return this._stippleIntegerRepeats}set stippleIntegerRepeats(e){this._stippleIntegerRepeats!==e&&(this._stippleIntegerRepeats=e,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(e){this._writeDepthEnabled!==e&&(this._writeDepthEnabled=e,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){e!==this._polygonOffset&&(this._polygonOffset=e,this._updateMaterial())}createExternalResources(){this._material=new _(this.materialParameters)}destroyExternalResources(){this._material=null}createGeometries(e){const t=this._createLineGeometries();if(0!==t.length)for(let r=0;r<t.length;++r){const s=c(t[r]);e.addGeometry(s,this._material)}}forEachExternalMaterial(e){e(this._material)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,isClosed:!1,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,stippleIntegerRepeats:this._stippleIntegerRepeats,polygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateMaterial(){this.attached&&this._material.setParameterValues(this.materialParameters)}_createLineGeometries(){const e=this.geometry;if(t(e)||0===e.length)return[];const r=[];return e.forEach((e=>{const t=e.length,s=new Float64Array(3*t);e.forEach(((e,t)=>{s[3*t+0]=e[0],s[3*t+1]=e[1],s[3*t+2]=e[2]}));const i={attributeData:{position:s},removeDuplicateStartEnd:0};r.push(i)})),r}}const g=l();export{u as LineVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as t}from\"../../shaderModules/interfaces.js\";function o(o){o.fragment.code.add(t`\n    float normals2FoamIntensity(vec3 n, float waveStrength){\n      float normalizationFactor =  max(0.015, waveStrength);\n      return max((n.x + n.y)*0.3303545/normalizationFactor + 0.3303545, 0.0);\n    }\n  `)}function n(o){o.fragment.code.add(t`\n    vec3 foamIntensity2FoamColor(float foamIntensityExternal, float foamPixelIntensity, vec3 skyZenitColor, float dayMod){\n      return foamIntensityExternal * (0.075 * skyZenitColor * pow(foamPixelIntensity, 4.) +  50.* pow(foamPixelIntensity, 23.0)) * dayMod;\n    }\n  `)}export{n as FoamColor,o as FoamIntensity};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function n(n,r){1===r.viewingMode?n.vertex.code.add(e`\n      vec3 getLocalUp(in vec3 pos, in vec3 origin) {\n          return normalize(pos + origin);\n      }\n    `):n.vertex.code.add(e`\n      vec3 getLocalUp(in vec3 pos, in vec3 origin) {\n          return vec3(0.0, 0.0, 1.0); // WARNING: up-axis dependent code\n      }\n    `),1===r.viewingMode?n.vertex.code.add(e`\n        mat3 getTBNMatrix(in vec3 n) {\n            vec3 t = normalize(cross(vec3(0.0, 0.0, 1.0), n));\n            vec3 b = normalize(cross(n, t));\n            return mat3(t, b, n);\n        }\n    `):n.vertex.code.add(e`\n        mat3 getTBNMatrix(in vec3 n) {\n            vec3 t = vec3(1.0, 0.0, 0.0);\n            vec3 b = normalize(cross(n, t));\n            return mat3(t, b, n);\n        }\n    `)}export{n as NormalUtils};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isClockwise as n}from\"./coordsUtils.js\";import{earcut as t}from\"../../core/libs/earcut/earcut.js\";import{deduplicate as e}from\"./meshUtils/deduplicate.js\";function o(n){const o=l(n.rings,n.hasZ,1),s=[];let i=0,c=0;for(const e of o.polygons){const n=e.count,r=e.index,l=new Float64Array(o.position.buffer,3*r*o.position.BYTES_PER_ELEMENT,3*n),h=e.holeIndices.map((n=>n-r)),f=new Uint32Array(t(l,h,3));s.push({position:l,faces:f}),i+=l.length,c+=f.length}const h=r(s,i,c),f=e(h.position.buffer,6,{originalIndices:h.faces});return h.position=new Float64Array(f.buffer),h.faces=f.indices,h}function r(n,t,e){if(1===n.length)return n[0];const o=new Float64Array(t),r=new Uint32Array(e);let l=0,s=0,i=0;for(const c of n){for(let n=0;n<c.position.length;n++)o[l++]=c.position[n];for(let n=0;n<c.faces.length;n++)r[s++]=c.faces[n]+i;i=l/3}return{position:o,faces:r}}function l(n,t,e){const o=n.length,r=new Array(o),l=new Array(o),c=new Array(o);let h=0,f=0,g=0,a=0;for(let s=0;s<o;++s)a+=n[s].length;const u=new Float64Array(3*a);let p=0;for(let d=o-1;d>=0;d--){const a=n[d],y=1===e&&i(a);if(y&&1!==o)r[h++]=a;else{let n=a.length;for(let t=0;t<h;++t)n+=r[t].length;const e={index:p,pathLengths:new Array(h+1),count:n,holeIndices:new Array(h)};e.pathLengths[0]=a.length,a.length>0&&(c[g++]={index:p,count:a.length}),p=y?s(a,a.length-1,-1,u,p,a.length,t):s(a,0,1,u,p,a.length,t);for(let o=0;o<h;++o){const n=r[o];e.holeIndices[o]=p,e.pathLengths[o+1]=n.length,n.length>0&&(c[g++]={index:p,count:n.length}),p=s(n,0,1,u,p,n.length,t)}h=0,e.count>0&&(l[f++]=e)}}for(let i=0;i<h;++i){const n=r[i];n.length>0&&(c[g++]={index:p,count:n.length}),p=s(n,0,1,u,p,n.length,t)}return f<o&&(l.length=f),g<o&&(c.length=g),{position:u,polygons:l,outlines:c}}function s(n,t,e,o,r,l,s){r*=3;for(let i=0;i<l;++i){const l=n[t];o[r++]=l[0],o[r++]=l[1],o[r++]=s?l[2]:0,t+=e}return r/3}function i(t){return!n(t,!1,!1)}export{l as pathsToTriangulationInfo,o as triangulate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as s,f as t}from\"../../../../chunks/vec3f64.js\";class i{constructor(i=s(),c=t(.57735,.57735,.57735),n=!0){this.intensity=i,this.direction=c,this.castShadows=n}}class c{constructor(i=s(),c=t(.57735,.57735,.57735)){this.intensity=s(),this.direction=s(),this.intensity=i,this.direction=c}}class n{constructor(t=s()){this.intensity=t}}class o{constructor(){this.sh={r:[0],g:[0],b:[0]}}}export{n as AmbientLight,c as FillLight,i as MainLight,o as SphericalHarmonicsLight};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as E}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as _}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import I from\"../../../core/Accessor.js\";let S=class extends I{constructor(){super(...arguments),this.SCENEVIEW_HITTEST_RETURN_INTERSECTOR=!1,this.SCENEVIEW_LOCKING_LOG=!1,this.HIGHLIGHTS_GRID_OPTIMIZATION_ENABLED=!0,this.HIGHLIGHTS_PROFILE_TO_CONSOLE=!1,this.DECONFLICTOR_SHOW_VISIBLE=!1,this.DECONFLICTOR_SHOW_INVISIBLE=!1,this.DECONFLICTOR_SHOW_GRID=!1,this.LABELS_SHOW_BORDER=!1,this.OVERLAY_DRAW_DEBUG_TEXTURE=!1,this.OVERLAY_SHOW_CENTER=!1,this.SHOW_POI=!1,this.TESTS_DISABLE_UPDATE_THRESHOLDS=!1,this.DISABLE_DECONFLICTOR_VISIBILITY_OFFSET=!1,this.DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES=!1,this.DRAW_MESH_GEOMETRY_NORMALS=!1,this.FEATURE_TILE_FETCH_SHOW_TILES=!1,this.FEATURE_TILE_TREE_SHOW_TILES=!1,this.TERRAIN_TILE_TREE_SHOW_TILES=!1,this.I3S_TREE_SHOW_TILES=!1,this.I3S_SHOW_MODIFICATIONS=!1,this.ENABLE_PROFILE_DEPTH_RANGE=!1,this.DISABLE_FAST_UPDATES=!1,this.LOD_INSTANCE_RENDERER_DISABLE_UPDATES=!1,this.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL=!1,this.EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES=!1}};E([_()],S.prototype,\"SCENEVIEW_HITTEST_RETURN_INTERSECTOR\",void 0),E([_()],S.prototype,\"SCENEVIEW_LOCKING_LOG\",void 0),E([_()],S.prototype,\"HIGHLIGHTS_GRID_OPTIMIZATION_ENABLED\",void 0),E([_()],S.prototype,\"HIGHLIGHTS_PROFILE_TO_CONSOLE\",void 0),E([_()],S.prototype,\"DECONFLICTOR_SHOW_VISIBLE\",void 0),E([_()],S.prototype,\"DECONFLICTOR_SHOW_INVISIBLE\",void 0),E([_()],S.prototype,\"DECONFLICTOR_SHOW_GRID\",void 0),E([_()],S.prototype,\"LABELS_SHOW_BORDER\",void 0),E([_()],S.prototype,\"OVERLAY_DRAW_DEBUG_TEXTURE\",void 0),E([_()],S.prototype,\"OVERLAY_SHOW_CENTER\",void 0),E([_()],S.prototype,\"SHOW_POI\",void 0),E([_()],S.prototype,\"TESTS_DISABLE_UPDATE_THRESHOLDS\",void 0),E([_()],S.prototype,\"DISABLE_DECONFLICTOR_VISIBILITY_OFFSET\",void 0),E([_()],S.prototype,\"DISABLE_ELEVATION_ALIGNERS_ITERATIVE_UPDATES\",void 0),E([_()],S.prototype,\"DRAW_MESH_GEOMETRY_NORMALS\",void 0),E([_()],S.prototype,\"FEATURE_TILE_FETCH_SHOW_TILES\",void 0),E([_()],S.prototype,\"FEATURE_TILE_TREE_SHOW_TILES\",void 0),E([_()],S.prototype,\"TERRAIN_TILE_TREE_SHOW_TILES\",void 0),E([_()],S.prototype,\"I3S_TREE_SHOW_TILES\",void 0),E([_()],S.prototype,\"I3S_SHOW_MODIFICATIONS\",void 0),E([_()],S.prototype,\"ENABLE_PROFILE_DEPTH_RANGE\",void 0),E([_()],S.prototype,\"DISABLE_FAST_UPDATES\",void 0),E([_()],S.prototype,\"LOD_INSTANCE_RENDERER_DISABLE_UPDATES\",void 0),E([_()],S.prototype,\"LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL\",void 0),E([_()],S.prototype,\"EDGES_SHOW_HIDDEN_TRANSPARENT_EDGES\",void 0),S=E([o(\"esri.views.3d.support.DebugFlags\")],S);const T=new S;export default T;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../core/has.js\";import{disposeMaybe as e}from\"../../../core/maybe.js\";import\"../../../core/mathUtils.js\";import{generateUID as r}from\"../../../core/uid.js\";import\"../../../chunks/builtins.js\";import\"../../webgl/checkWebGLError.js\";import{getGpuMemoryUsage as t}from\"../../webgl/Util.js\";import i from\"../../webgl/FramebufferObject.js\";class s{constructor(e,t){this.id=r(),this._renderTarget=null,this._renderTarget=new i(e,{colorTarget:0,depthStencilTarget:0},{target:3553,pixelFormat:6408,dataType:5121,wrapMode:33071,samplingMode:9987,hasMipmap:t,maxAnisotropy:8,width:0,height:0})}dispose(){this._renderTarget=e(this._renderTarget)}getTexture(){return this._renderTarget?this._renderTarget.colorTexture:null}isValid(){return null!==this._renderTarget}resize(e,r){this._renderTarget.resize(e,r)}bind(e){e.bindFramebuffer(this._renderTarget)}generateMipMap(){this._renderTarget.colorTexture.descriptor.hasMipmap&&this._renderTarget.colorTexture.generateMipmap()}disposeRenderTargetMemory(){this._renderTarget&&this._renderTarget.resize(0,0)}getGpuMemoryUsage(){let e=0;return this._renderTarget&&(e+=t(this._renderTarget)),e}}export{s as OverlayRenderTarget};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{b as n,f as t}from\"../../../../chunks/vec3f64.js\";class r{constructor(n,t){this.vec3=n,this.id=t}}function s(t,s){return new r(n(t),s)}function c(n,s,c,e){return new r(t(n,s,c),e)}export{r as LocalOrigin,c as fromValues,s as fromVector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../geometry/support/aaBoundingRect.js\";import{OverlayRenderTarget as r}from\"./OverlayRenderTarget.js\";import{fromValues as t}from\"../webgl-engine/lib/localOrigin.js\";class s{constructor(s){this.extent=e(),this.resolution=0,this.renderLocalOrigin=t(0,0,0,\"O\"),this.pixelRatio=1,this.renderTargets={color:{fbo:new r(s,!0),valid:!1,lastUsed:1/0},colorWithoutRasterImage:{fbo:new r(s,!0),valid:!1,lastUsed:1/0},highlight:{fbo:new r(s,!1),valid:!1,lastUsed:1/0},water:{fbo:new r(s,!0),valid:!1,lastUsed:1/0},occluded:{fbo:new r(s,!0),valid:!1,lastUsed:1/0}}}dispose(){this.renderTargets.color.fbo.dispose(),this.renderTargets.colorWithoutRasterImage.fbo.dispose(),this.renderTargets.highlight.fbo.dispose(),this.renderTargets.water.fbo.dispose(),this.renderTargets.occluded.fbo.dispose()}drawRenderTargets(e,r,t){const s=this.renderTargets;s.color.valid=e.drawPass(0,s.color.fbo,r),s.highlight.valid=e.drawPass(5,s.highlight.fbo,r),s.water.valid=e.drawPass(3,s.water.fbo,r),s.occluded.valid=e.drawPass(0,s.occluded.fbo,r,1),s.colorWithoutRasterImage.valid=t&&e.drawPass(0,s.colorWithoutRasterImage.fbo,r,2)}computeRenderTargetValidityBitfield(){const e=this.renderTargets;return+e.color.valid|+e.colorWithoutRasterImage.valid<<1|+e.highlight.valid<<2|+e.water.valid<<3|+e.occluded.valid<<4}validateUsage(e,r){if(e.valid)e.lastUsed=r;else if(r-e.lastUsed>a)e.fbo.disposeRenderTargetMemory(),e.lastUsed=1/0;else if(e.lastUsed<1/0)return!0;return!1}collectUnusedMemory(e){let r=!1;return r=this.validateUsage(this.renderTargets.color,e)||r,r=this.validateUsage(this.renderTargets.colorWithoutRasterImage,e)||r,r=this.validateUsage(this.renderTargets.highlight,e)||r,r=this.validateUsage(this.renderTargets.occluded,e)||r,r=this.validateUsage(this.renderTargets.water,e)||r,r}getGpuMemoryUsage(){return this.renderTargets.color.fbo.getGpuMemoryUsage()+this.renderTargets.colorWithoutRasterImage.fbo.getGpuMemoryUsage()+this.renderTargets.highlight.fbo.getGpuMemoryUsage()+this.renderTargets.water.fbo.getGpuMemoryUsage()+this.renderTargets.occluded.fbo.getGpuMemoryUsage()}}const a=1e3;export{s as Overlay};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{removeUnordered as r}from\"../../../../../core/arrayUtils.js\";class s{constructor(){this._uniforms={proj:[],uShadowMapDistance:[],viewportPixelSz:[],lightingMainDirection:[]}}dispose(){this._uniforms=null}getPrograms(r){return this._uniforms[r]||[]}subscribeProgram(r){for(const s in this._uniforms)r.hasUniform(s)&&this._uniforms[s].push(r)}unsubscribeProgram(s){for(const i in this._uniforms)r(this._uniforms[i],s)}}export{s as CommonUniformStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as e}from\"../../../../../core/maybe.js\";class t{constructor(e){this.technique=e,this.refCount=0,this.refZeroFrame=0}}class r{constructor(e){this._context=e,this._perConstructorInstances=new Map,this._frameCounter=0,this._keepAliveFrameCount=1200}get viewingMode(){return this._context.viewingMode}get constructionContext(){return this._context}dispose(){this._perConstructorInstances.forEach((e=>e.forEach((e=>e.technique.dispose())))),this._perConstructorInstances.clear()}acquire(e,r){const s=r.key;let n=this._perConstructorInstances.get(e);n||(n=new Map,this._perConstructorInstances.set(e,n));let o=n.get(s);return void 0===o&&(o=new t(new e(this._context,r)),n.set(s,o)),++o.refCount,o.technique}acquireAndReleaseExisting(t,r,s){return e(s)?this.acquire(t,r):r.key===s.key&&s instanceof t?s:(this.release(s),this.acquire(t,r))}release(t){if(e(t))return;const r=this._perConstructorInstances.get(t.constructor).get(t.key);r.refCount-=1,0===r.refCount&&(r.refZeroFrame=this._frameCounter)}frameUpdate(){this._frameCounter++,this._perConstructorInstances.forEach(((e,t)=>{e.forEach(((t,r)=>{0===t.refCount&&t.refZeroFrame+this._keepAliveFrameCount<this._frameCounter&&(t.technique.dispose(),e.delete(r))})),0===e.size&&this._perConstructorInstances.delete(t)}))}getProgramsUsingUniform(e){return this._context.commonUniformStore.getPrograms(e)}async hotReload(){const e=new Array;this._perConstructorInstances.forEach(((t,r)=>{const s=async(e,t)=>{const r=t.shader;r&&(await r.reload(),e.forEach((e=>{e.technique.reload(this._context)})))};e.push(s(t,r))})),await Promise.all(e)}}export{r as ShaderTechniqueRepository};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nconst t=[{output:0,name:\"color\"},{output:1,name:\"depth\"},{output:2,name:\"normal\"},{output:3,name:\"depthShadowMap\"},{output:4,name:\"highlight\"},{output:5,name:\"draped\"},{output:6,name:\"occlusion\"},{output:7,name:\"alpha\"}];function u(u,o){return u+\"_\"+t.find((t=>t.output===o)).name}export{t as ShaderOutputTypes,u as getShaderOutputID};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import t from\"../../../../core/Logger.js\";import{assert as i}from\"./Util.js\";import{getShaderOutputID as r,ShaderOutputTypes as a}from\"../core/shaderLibrary/ShaderOutputOptions.js\";const s=t.getLogger(\"esri.views.3d.webgl-engine.lib.GLMaterialRep\");class o{constructor(e){this.refCnt=0,this.glMaterial=e}incRefCnt(){++this.refCnt}decRefCnt(){--this.refCnt,i(this.refCnt>=0)}getRefCnt(){return this.refCnt}getGLMaterial(){return this.glMaterial}}class n{constructor(e,t,i){this._textureRep=e,this._techniqueRep=t,this.onMaterialChanged=i,this._id2glMaterialRef=new Map}dispose(){this._textureRep.dispose()}acquire(e,t){this.ownMaterial(e);const i=r(e.id,t);let a=this._id2glMaterialRef.get(i);if(null==a){const r=e.getGLMaterial({material:e,techniqueRep:this._techniqueRep,textureRep:this._textureRep,output:t});return a=new o(r),a.incRefCnt(),this._id2glMaterialRef.set(i,a),r}return a.incRefCnt(),a.getGLMaterial()}release(e,t){const i=r(e.id,t),a=this._id2glMaterialRef.get(i);if(a.decRefCnt(),0===a.getRefCnt()){const e=a.getGLMaterial();e&&e.dispose(),this._id2glMaterialRef.delete(i)}}materialChanged(e){for(const t of a)if(5!==t.output&&6!==t.output){const i=this._id2glMaterialRef.get(r(e.id,t.output));if(i&&i.getGLMaterial()){const e=i.getGLMaterial();e.updateParameters&&e.updateParameters()}}this.onMaterialChanged&&this.onMaterialChanged(e)}ownMaterial(t){e(t.materialRepository)&&t.materialRepository!==this&&s.error(\"Material is already owned by a different material repository\"),t.materialRepository=this}}export default n;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../../../../core/maybe.js\";import i from\"../../../../geometry/SpatialReference.js\";import{c as s}from\"../../../../chunks/vec3f64.js\";import{f as r}from\"../../../../chunks/vec3.js\";import{projectBuffer as o}from\"../../../../geometry/projection.js\";import{I as e}from\"../../../../chunks/mat4f64.js\";import{Geometry as n}from\"./Geometry.js\";import{Object3D as a}from\"./Object3D.js\";import{fromValues as h}from\"./localOrigin.js\";import{WebGLLayer as c}from\"./WebGLLayer.js\";import{RibbonLineMaterial as m}from\"../materials/RibbonLineMaterial.js\";let _=0;const d=\"rg_\";class g{constructor(){this.ROOT_ORIGIN_ID=d+\"root_\"+_++,this._origins=new Map,this._gridSize=42e5}getOrigin(i){const s=this._origins.get(this.ROOT_ORIGIN_ID);if(null==s){if(t(g.testOrigin)){const t=g.testOrigin;return this._origins.set(this.ROOT_ORIGIN_ID,h(t[0],t[1],t[2],this.ROOT_ORIGIN_ID)),this.getOrigin(i)}const s=h(i[0]+Math.random()-.5,i[1]+Math.random()-.5,i[2]+Math.random()-.5,this.ROOT_ORIGIN_ID);return this._origins.set(this.ROOT_ORIGIN_ID,s),s}r(l,i,s.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]);const o=this._gridSize;if(l[0]<o&&l[1]<o&&l[2]<o)return s;const e=Math.round(i[0]/o),n=Math.round(i[1]/o),a=Math.round(i[2]/o),c=`${d}${e}/${n}/${a}`;let m=this._origins.get(c);return m||(m=h(e*o,n*o,a*o,c),this._origins.set(c,m)),m}_drawOriginBox(t){const s=window.view,r=s._stage;if(null==this._object){this._material=new m({width:2,color:[0,1,0,1]}),r.add(this._material);const t=new c({isPickable:!1});this._object=new a({castShadow:!1}),r.add(this._object),t.add(this._object),r.add(t)}const h=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],_=h.length,d=new Array(3*_),g=new Uint16Array(2*(_-1)),l=.5*this._gridSize;for(let i=0;i<_;i++)d[3*i+0]=t[0]+(1&h[i]?l:-l),d[3*i+1]=t[1]+(2&h[i]?l:-l),d[3*i+2]=t[2]+(4&h[i]?l:-l),i>0&&(g[2*i+0]=i-1,g[2*i+1]=i);o(d,i.WebMercator,0,d,s.spatialReference,0,_);const O=new n([[\"position\",{size:3,data:d,exclusive:!0}]],[[\"position\",g]],2);r.add(O),this._object.addGeometry(O,this._material,e),console.log(this._origins.size,t)}}const l=s();!function(t){t.testOrigin=null}(g||(g={}));var O=g;export default O;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport s from\"./Camera.js\";class e{constructor(e,i,h,r,a,l){this.rctx=e,this.offscreenRenderingHelper=i,this.scenelightingData=h,this.shadowMap=r,this.ssaoHelper=a,this.sliceHelper=l,this.camera=null,this.lastFrameCamera=new s,this.pass=0,this.slot=0,this.highlightDepthTexture=null,this.renderOccludedMask=t,this.hasOccludees=!1}resetRenderOccludedMask(){this.renderOccludedMask=t}get isHighlightPass(){return 5===this.pass}}const t=13;export default e;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/PooledArray.js\";class r{constructor(){this.adds=new e,this.removes=new e,this.updates=new e({allocator:e=>e||new s,deallocator:e=>(e.renderGeometry=null,e)})}clear(){this.adds.clear(),this.removes.clear(),this.updates.clear()}prune(){this.adds.prune(),this.removes.prune(),this.updates.prune()}}class s{}class t{constructor(){this.adds=new Array,this.removes=new Array,this.updates=new Array}}export{r as ChangeSet,t as MaterialChangeSet,s as RenderGeometryUpdate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{MaterialChangeSet as e}from\"./ChangeSet.js\";function r(r){const n=new Map,a=r=>{let t=n.get(r);return t||(t=new e,n.set(r,t)),t};return r.adds.forAll((e=>{t(e)&&a(e.material).adds.push(e)})),r.removes.forAll((e=>{t(e)&&a(e.material).removes.push(e)})),r.updates.forAll((e=>{t(e.renderGeometry)&&a(e.renderGeometry.material).updates.push(e)})),n}function t(e){return e.data.indexCount>=1}export{r as splitRenderGeometryChangeSetByMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{nextHighestPowerOfTwo as r}from\"../../../../core/mathUtils.js\";class t{constructor(t){null==t?t=16:t<65536&&(t=r(t)),this._array=new Float32Array(t),this._size=0}resize(r,t){if(this._size=r,this._size>this._array.length){let r=this._array.length||1;for(;r<this._size;)r*=2;const s=new Float32Array(r);return t&&s.set(this._array),this._array=s,!0}const s=2*this._size;if(s<=this._array.length){let r=this._array.length;for(;r>=s;)r=Math.floor(r/2);const a=new Float32Array(r);return t&&a.set(this._array.subarray(0,r)),this._array=a,!0}return!1}append(r){const t=this._size;this.resize(this._size+r.length,!0),this._array.set(r,t)}erase(r,t){for(let s=r;s<t;++s)this._array[s]=0}get array(){return this._array}get size(){return this._size}}export{t as ResizableFloat32Array};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as i,parameter as o}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"../lib/DefaultVertexAttributeLocations.js\";import a from\"../../../webgl/Program.js\";import{makePipelineState as n,defaultDepthWriteParams as p,defaultColorWriteParams as u}from\"../../../webgl/renderState.js\";import{View as l}from\"../core/shaderLibrary/util/View.glsl.js\";import{DefaultTextureUnits as h}from\"../lib/DefaultTextureUnits.js\";import{Slice as d}from\"../core/shaderLibrary/Slice.glsl.js\";import{OutputHighlight as c}from\"../core/shaderLibrary/output/OutputHighlight.glsl.js\";import{blendingDefault as m,OITBlending as g,OITDepthTest as f,OITDepthWrite as b,getOITPolygonOffset as y}from\"../lib/OrderIndependentTransparency.js\";import{bindMultipassTerrainUniforms as T}from\"../core/shaderLibrary/shading/MultipassTerrainTest.glsl.js\";import{ReadShadowMap as v}from\"../core/shaderLibrary/shading/ReadShadowMap.glsl.js\";import{ScreenSpaceReflections as w}from\"../core/shaderLibrary/shading/ScreenSpaceReflections.glsl.js\";import{WaterDistortion as S}from\"../core/shaderLibrary/shading/WaterDistortion.glsl.js\";import{W as j}from\"../../../../chunks/WaterSurface.glsl.js\";class x extends t{constructor(r,e){super(r,e),this.waterTextureRepository=r.waterTextureRepository}initializeProgram(r){const e=x.shader.get(),t=this.configuration,i=e.build({OITEnabled:0===t.transparencyPassType,output:t.output,viewingMode:r.viewingMode,slicePlaneEnabled:t.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!1,receiveShadows:t.receiveShadows,pbrMode:3,useCustomDTRExponentForWater:!0,ssrEnabled:t.useSSR,highStepCount:!0,multipassTerrainEnabled:t.multipassTerrainEnabled,cullAboveGround:t.cullAboveGround});return new a(r.rctx,i.generateSource(\"vertex\"),i.generateSource(\"fragment\"),s)}ensureResource(r){return this.waterTextureRepository.ready||this.waterTextureRepository.updating||this.waterTextureRepository.loadTextures(r),this.waterTextureRepository.ready?2:1}bindPass(r,e,t){l.bindProjectionMatrix(this.program,t.camera.projectionMatrix),t.multipassTerrainEnabled&&(this.program.setUniform2fv(\"cameraNearFar\",t.camera.nearFar),this.program.setUniform2fv(\"inverseViewport\",t.inverseViewport),T(this.program,r,t)),0===this.configuration.output&&(t.lighting.setUniforms(this.program,!1),w.bindUniforms(this.program,r,t)),0!==this.configuration.output&&2!==this.configuration.output||(S.bindUniforms(this.program,e),this.waterTextureRepository.bindRepo(r)),this.program.setUniform4fv(\"waterColor\",e.color),4===this.configuration.output&&c.bindOutputHighlight(r,this.program,t)}bindDraw(r){l.bindView(this.program,r),0!==this.configuration.output&&7!==this.configuration.output||l.bindCamPosition(this.program,r.origin,r.camera.viewInverseTransposeMatrix),0===this.configuration.output&&v.bindUniforms(this.program,r,h.SHADOW_MAP),0!==this.configuration.output&&7!==this.configuration.output&&4!==this.configuration.output||d.bindUniformsWithOrigin(this.program,this.configuration,r)}setPipelineState(r){const e=this.configuration,t=3===r,i=2===r;return n({blending:2!==e.output&&4!==e.output&&e.transparent?t?m:g(r):null,depthTest:{func:f(r)},depthWrite:t?e.writeDepth&&p:b(r),colorWrite:u,polygonOffset:t||i?null:y(e.enableOffset)})}initializePipeline(){return this.setPipelineState(this.configuration.transparencyPassType)}}x.shader=new e(j,(()=>import(\"../shaders/WaterSurface.glsl.js\")));class P extends i{constructor(){super(...arguments),this.output=0,this.receiveShadows=!1,this.slicePlaneEnabled=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!1,this.useSSR=!1,this.isDraped=!1,this.transparencyPassType=3,this.multipassTerrainEnabled=!1,this.cullAboveGround=!0}}r([o({count:8})],P.prototype,\"output\",void 0),r([o()],P.prototype,\"receiveShadows\",void 0),r([o()],P.prototype,\"slicePlaneEnabled\",void 0),r([o()],P.prototype,\"transparent\",void 0),r([o()],P.prototype,\"enableOffset\",void 0),r([o()],P.prototype,\"writeDepth\",void 0),r([o()],P.prototype,\"useSSR\",void 0),r([o()],P.prototype,\"isDraped\",void 0),r([o({count:4})],P.prototype,\"transparencyPassType\",void 0),r([o()],P.prototype,\"multipassTerrainEnabled\",void 0),r([o()],P.prototype,\"cullAboveGround\",void 0);export{x as WaterTechnique,P as WaterTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport t from\"../lib/GLMaterial.js\";import{WaterTechnique as e}from\"./WaterTechnique.js\";class a extends t{constructor(t){super(t),this.updateParameters()}updateParameters(t){this.technique=this.techniqueRep.acquireAndReleaseExisting(e,this.material.getTechniqueConfig(this.output,t),this.technique)}beginSlot(t){if(2===this.output)return 22===t;if(5===this.output)return null==t;if(4===this.output)return 3===t;let e=3;return this.material.params.transparent&&(e=this.material.params.writeDepth?5:8),t===e}setElapsedTimeUniform(t){const e=.001*this.material.animation.time;t.setUniform1f(\"timeElapsed\",e*this.material.params.animationSpeed)}_updateShadowState(t){t.shadowMappingEnabled!==this.material.params.receiveShadows&&this.material.setParameterValues({receiveShadows:t.shadowMappingEnabled})}_updateSSRState(t){t.ssrEnabled!==this.material.params.ssrEnabled&&this.material.setParameterValues({ssrEnabled:t.ssrEnabled})}ensureResources(t){return this.technique.ensureResource(t)}ensureParameters(t){0===this.output&&(this._updateShadowState(t),this._updateSSRState(t)),this.updateParameters(t)}bind(t,e){t.bindProgram(this.technique.program),this.technique.bindPass(t,this.material.params,e),2!==this.output&&0!==this.output||this.setElapsedTimeUniform(this.technique.program)}}export{a as WaterGLMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{a as t,b as o}from\"../../../../../chunks/mat4.js\";import{b as r}from\"../../../../../chunks/mat4f64.js\";class s{constructor(s,i,n,f,m,a){this.from=s,this.to=i,this.isVisible=n,this.hasHighlights=f,this.hasOccludees=m,this.transformation=a,null!=a&&(this.transformationNormal=r(a),t(this.transformationNormal,this.transformationNormal),o(this.transformationNormal,this.transformationNormal))}}function i(t){return t.sort(((t,o)=>t.from===o.from?t.to>o.to?1:t.to<o.to?-1:0:t.from>o.from?1:t.from<o.from?-1:0))}function n(t,o){return t.first+t.count>=o.from}function f(t,o){const r=t=>({first:t.from,count:t.to-t.from});if(0===t.length)return void t.push(r(o));const s=t[t.length-1];if(n(s,o)){const t=o.from-s.first+o.to-o.from;s.count=t}else t.push(r(o))}export{s as Instance,f as addOrMerge,i as sortInstancesAccordingToRange};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../../core/maybe.js\";import{once as t}from\"../../../../core/accessorSupport/utils.js\";import s from\"../../../../core/PerformanceSampler.js\";import{startMeasurement as r}from\"../../../webgl/Measurement.js\";const i=[\"prepare\",\"shadowmap\",\"lineardepth\",\"normals\",\"ssao\",\"opaque\",\"opaque edges\",\"transparent\",\"transparent edges\",\"hudvisibility\",\"transparent terrain\",\"atmosphere\",\"laserline\",\"occluded\",\"antialiasing\",\"highlights\",\"hudOccluded\",\"hudNotoccluded\"];class a{constructor(){this.triangles=0,this.drawCalls=0}reset(){this.triangles=0,this.drawCalls=0}}function o(t,s,r){e(r)&&(r.drawCalls+=t,r.triangles+=s)}class n extends s{constructor(){super(\"total\"),this.total=0,this.frameCount=0}}class l{constructor(){this._startTime=0,this._lastSample=0,this._enableGPUTimer=0,this.totalTime=new n,this.gpuTime=new s(\"gpu\",9),this.renderPassTimings=i.map((e=>new s(e))),this.stats=new a}enableGPUTimer(){return++this._enableGPUTimer,{remove:t((()=>--this._enableGPUTimer))}}prerender(e){this._startTime=this._lastSample=performance.now(),this._enableGPUTimer&&(this._gpuTimer=r(e))}advance(e){const t=performance.now();this.renderPassTimings[e].record(t-this._lastSample),this._lastSample=t}postrender(){e(this._gpuTimer)&&(this._gpuTimer.stop((t=>e(t)&&this.gpuTime.record(t)),16),this._gpuTimer=null);const t=performance.now()-this._startTime;this.totalTime.record(t),this.totalTime.total+=t,this.totalTime.frameCount++}}export{a as RenderStats,n as RenderTime,l as RendererPerformanceInfo,o as addToRenderStats,i as performanceStatsCategories};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{isNone as e,isSome as t}from\"../../../../../core/maybe.js\";import{m as s,a,b as i}from\"../../../../../chunks/mat4.js\";import{someMap as r}from\"../../../../../core/MapUtils.js\";import{a as n}from\"../../../../../chunks/mat4f64.js\";import{glLayout as o}from\"../../../support/buffer/glUtil.js\";import{assert as d,setMatrixTranslation3 as l}from\"../../lib/Util.js\";import h from\"../../../../webgl/BufferObject.js\";import{getStride as m}from\"../../../../webgl/Util.js\";import u from\"../../../../webgl/VertexArrayObject.js\";import{acquireMaterials as c,releaseMaterials as g,calculateTransformRelToOrigin as f}from\"./utils.js\";import{ResizableFloat32Array as p}from\"../../lib/ResizableFloat32Array.js\";import{WaterGLMaterial as w}from\"../WaterGLMaterial.js\";import{Instance as b,sortInstancesAccordingToRange as C,addOrMerge as y}from\"./Instance.js\";import{addToRenderStats as _}from\"../../statistics/RendererPerformanceInfo.js\";class v{constructor(e,t,s){this.type=\"MergedRenderer\",this._dataByOrigin=new Map,this._hasHighlights=!1,this._hasOccludees=!1,this._rctx=e,this._material=s,this._materialRep=t,this._glMaterials=c(this._material,this._materialRep),this._bufferWriter=s.createBufferWriter()}dispose(){g(this._material,this._materialRep),this._dataByOrigin&&(this._dataByOrigin.forEach((e=>{e.vao.dispose(!0),e.vao=null})),this._dataByOrigin.clear(),this._dataByOrigin=null),this._glMaterials&&(this._glMaterials.forEach((e=>{e&&e.dispose()})),this._glMaterials.clear(),this._glMaterials=null)}get isEmpty(){return 0===this._dataByOrigin.size}get hasHighlights(){return this._hasHighlights}get hasOccludees(){return this._hasOccludees}get hasWater(){return!this.isEmpty&&r(this._glMaterials,(e=>e instanceof w))}get rendersOccluded(){return!this.isEmpty&&1!==this._material.renderOccluded}modify(e){this.updateGeometries(e.updates),this.addAndRemoveGeometries(e.adds,e.removes),this.updateRenderCommands()}addAndRemoveGeometries(e,t){const s=this._bufferWriter,a=s.vertexBufferLayout,i=a.stride/4,r=this._dataByOrigin,n=H(r,s,e,t);n.forEach(((e,t)=>{n.delete(t);const s=e.optimalCount,o=e.sparseCount;let h=r.get(t);if(null==h)d(s>0),h=this.createData(a,s,e.origin),r.set(t,h);else if(0===s)return h.vao.dispose(!0),h.vao=null,void r.delete(t);const m=s<e.sparseCount/2,u=m?s:o,c=R,g=h.buffer.size,f=h.buffer.array,p=h.buffer.resize(u,!1);m||p?this.removeAndRebuild(h,e.toRemove,i,f,c):e.toRemove.length>0?(this.removeByErasing(h,e.toRemove,i,c),e.toAdd.length>0&&(c.end=g)):(c.begin=g,c.end=g);const w=B;l(w,-e.origin[0],-e.origin[1],-e.origin[2]),this.append(h,e.toAdd,i,w,c);const b=h.vao.vertexBuffers.geometry;if(b.byteSize!==h.buffer.array.buffer.byteLength)b.setData(h.buffer.array);else{const{begin:e,end:t}=c;if(e<t){const s=h.buffer.array,a=4,i=e*a,r=t*a;b.setSubData(s,i,i,r)}}h.drawCommandsDirty=!0}))}updateGeometries(e){const t=this._bufferWriter,s=t.vertexBufferLayout.stride/4;for(const a of e){const e=a.updateType,i=a.renderGeometry,r=this._dataByOrigin.get(i.origin.id),n=r&&r.instances.get(i.id);if(!n)return;if(1&e&&(n.isVisible=i.instanceParameters.visible),9&e){const e=i.instanceParameters.visible;n.hasHighlights=!!i.instanceParameters.highlights&&e}if(16&e&&(n.hasOccludees=!!i.instanceParameters.occludees),6&e){const e=r.buffer.array,a=r.vao;f(i,D,j),t.write({transformation:D,invTranspTransformation:j},i.data,t.vertexBufferLayout.createView(e.buffer),n.from),d(n.from+t.elementCount(i.data)===n.to,\"material VBO layout has changed\"),a.vertexBuffers.geometry.setSubData(e,n.from*s*4,n.from*s*4,n.to*s*4)}r.drawCommandsDirty=!0}}updateRenderCommands(){this._hasHighlights=!1,this._hasOccludees=!1,this._dataByOrigin.forEach((e=>{e.hasHiddenInstances=!1,e.hasHighlights=!1,e.hasOccludees=!1,r(e.instances,(t=>(t.isVisible?(t.hasHighlights&&(this._hasHighlights=!0,e.hasHighlights=!0),t.hasOccludees&&(this._hasOccludees=!0,e.hasOccludees=!0)):e.hasHiddenInstances=!0,e.hasHiddenInstances&&e.hasHighlights&&e.hasOccludees)))}));const e=e=>{if(e.drawCommandsDefault=null,e.drawCommandsHighlight=null,e.drawCommandsOccludees=null,e.drawCommandsShadowHighlightRest=null,e.stats={default:0,highlight:0,occludees:0,shadowHighlightRest:0},0===e.instances.size)return;if(!O(e)){const t=4*e.buffer.size/m(e.vao.layout.geometry);return e.drawCommandsDefault=[{first:0,count:t}],void(e.stats={default:t,highlight:0,occludees:0,shadowHighlightRest:0})}const t=C([...e.instances.values()]);e.drawCommandsDefault=[],e.drawCommandsHighlight=[],e.drawCommandsOccludees=[],e.drawCommandsShadowHighlightRest=[];for(const a of t)a.isVisible&&(a.hasOccludees?y(e.drawCommandsOccludees,a):y(e.drawCommandsDefault,a),a.hasHighlights?y(e.drawCommandsHighlight,a):y(e.drawCommandsShadowHighlightRest,a));const s=e=>{let t=0;for(const s of e)t+=s.count;return t/3};e.stats={default:s(e.drawCommandsDefault),highlight:s(e.drawCommandsHighlight),occludees:s(e.drawCommandsOccludees),shadowHighlightRest:s(e.drawCommandsShadowHighlightRest)}};this._dataByOrigin.forEach((t=>{t.drawCommandsDirty&&(e(t),t.drawCommandsDirty=!1)}))}updateLogic(e){return this._material.update(e)}render(s,a,i,r){const n=this._rctx,o=this._glMaterials.get(a.pass),d=5===a.pass||7===a.pass,l=6===a.pass,h=!(d||l);let m=s;if(3===a.pass&&null===m&&(m=22),!o||2!==o.ensureResources(n)||null!=m&&!o.beginSlot(m)||d&&!this._hasHighlights)return!1;o.ensureParameters(i);const u=o.getTechnique(),c=o.getPipelineState(m,!1);n.setPipelineState(c),o.bind(n,i);let g=!1;return this._dataByOrigin.forEach((s=>{if(e(s.drawCommandsDefault)&&e(s.drawCommandsHighlight)&&e(s.drawCommandsOccludees)&&e(s.drawCommandsShadowHighlightRest))return;if(d&&!s.hasHighlights)return;i.origin=s.origin,u.bindDraw(i),u.ensureAttributeLocations(s.vao),n.bindVAO(s.vao);const a=u.primitiveType;let f=d?s.drawCommandsHighlight:l&&O(s)?s.drawCommandsShadowHighlightRest:s.drawCommandsDefault;const p=d?s.stats.highlight:l&&O(s)?s.stats.shadowHighlightRest:s.stats.default;if(t(f)&&(this.renderCommands(n,a,f),_(f.length,p,r),g=!0),h&&(f=s.drawCommandsOccludees,t(f))){const e=o.getPipelineState(m,!0);n.setPipelineState(e),this.renderCommands(n,a,f),n.setPipelineState(c),_(f.length,s.stats.occludees,r),g=!0}})),g}renderCommands(e,t,s){for(let a=0;a<s.length;a++)e.drawArrays(t,s[a].first,s[a].count)}createData(e,t,s){return{instances:new Map,vao:new u(this._rctx,this._material.vertexAttributeLocations,{geometry:o(e)},{geometry:h.createVertex(this._rctx,35044)}),buffer:new p(t),optimalCount:0,origin:s,hasHiddenInstances:!1,hasHighlights:!1,hasOccludees:!1,drawCommandsDirty:!1,drawCommandsDefault:null,drawCommandsOccludees:null,drawCommandsHighlight:null,drawCommandsShadowHighlightRest:null,stats:{default:0,highlight:0,occludees:0,shadowHighlightRest:0}}}removeAndRebuild(e,t,s,a,i){for(const h of t){const t=h.id,a=e.instances.get(t);e.optimalCount-=(a.to-a.from)*s,e.instances.delete(t)}let r=0;const n=e.buffer.array;i.begin=0,i.end=0;let o=-1,d=-1,l=0;e.instances.forEach((e=>{const t=e.from*s,i=e.to*s,h=i-t;o!==d&&d!==t?(n.set(a.subarray(o,d),l),l+=d-o,o=t):-1===o&&(o=t),d=i,e.from=r/s,r+=h,e.to=r/s})),o!==d&&n.set(a.subarray(o,d),l),i.end=r}removeByErasing(e,t,s,a){a.begin=1/0,a.end=-1/0;let i=-1,r=-1;for(const n of t){const t=n.id,o=e.instances.get(t),d=o.from*s,l=o.to*s;i!==r&&r!==d?(e.buffer.erase(i,r),i=d):-1===i&&(i=d),r=l,e.instances.delete(t),e.optimalCount-=l-d,d<a.begin&&(a.begin=d),l>a.end&&(a.end=l)}i!==r&&e.buffer.erase(i,r)}append(e,r,n,o,l){const h=this._bufferWriter;for(const m of r){const r=t(m.transformation)?s(D,o,m.transformation):o;a(j,r),i(j,j);const u=l.end;h.write({transformation:r,invTranspTransformation:j},m.data,h.vertexBufferLayout.createView(e.buffer.array.buffer),l.end/n);const c=h.elementCount(m.data)*n,g=u+c;d(null==e.instances.get(m.id));const f=m.instanceParameters.visible,p=!!m.instanceParameters.highlights&&f,w=!!m.instanceParameters.occludees,C=new b(u/n,g/n,f,p,w);e.instances.set(m.id,C),e.optimalCount+=c,l.end+=c}}get test(){return{material:this._material,glMaterials:this._glMaterials}}}function H(e,t,s,a){const i=new Map,r=t.vertexBufferLayout.stride/4,n=(s,a)=>{const n=s.origin,o=e.get(n.id);let d=i.get(n.id);null==d&&(d={optimalCount:null==o?0:o.optimalCount,sparseCount:null==o?0:o.buffer.size,toAdd:[],toRemove:[],origin:n.vec3},i.set(n.id,d));const l=t.elementCount(s.data)*r;a?(d.optimalCount+=l,d.sparseCount+=l,d.toAdd.push(s)):(d.optimalCount-=l,d.toRemove.push(s))};for(const o of s)n(o,!0);for(const o of a)n(o,!1);return i}function O(e){return e.hasOccludees||e.hasHighlights||e.hasHiddenInstances}const R={begin:0,end:0},B=n(),D=n(),j=n();export default v;\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{applySome as r}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import i from\"../../../../core/PooledArray.js\";import a from\"../../../../core/Accessor.js\";import{someMap as o}from\"../../../../core/MapUtils.js\";import{materialPredicate as n}from\"./Material.js\";import{ChangeSet as d}from\"./ChangeSet.js\";import{splitRenderGeometryChangeSetByMaterial as h}from\"./rendererUtils.js\";import l from\"../materials/renderers/MergedRenderer.js\";let p=class extends a{constructor(){super(...arguments),this._pendingAddsRemoves=new Map,this._changes=new d,this._materialRenderers=new Map,this._sortedMaterialRenderers=new i,this._hasHighlights=!1,this._hasWater=!1}dispose(){this._changes.prune(),this._materialRenderers&&(this._materialRenderers.forEach((e=>e.dispose())),this._materialRenderers.clear(),this._sortedMaterialRenderers.clear())}get updating(){return this._pendingAddsRemoves.size>0||this._changes.updates.length>0}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return o(this._materialRenderers,(e=>e.rendersOccluded))}stopAnimationsAtTime(e){this._sortedMaterialRenderers.forAll((t=>r(t.material.animation,(r=>r.stopAtTime(e)))))}get isEmpty(){return!this.updating&&0===this._materialRenderers.size}commitChanges(){let e=!1;if(!this.updating)return!1;this.updateAddsRemoves();const r=h(this._changes);let t=!1,s=!1;return r.forEach(((r,i)=>{let a=this._materialRenderers.get(i);if(!a&&r.adds.length>0&&(a=new l(this.rctx,this.materialRepository,i),this._materialRenderers.set(i,a),e=!0,t=!0,s=!0),!a)return;const o=t||a.hasHighlights,n=s||a.hasWater;a.modify(r),t=t||o!==a.hasHighlights,s=s||n!==a.hasWater,a.isEmpty&&(this._materialRenderers.delete(i),a.dispose(),e=!0)})),this._changes.clear(),this._pendingAddsRemoves.clear(),e&&this.updateSortedMaterialRenderers(),t&&(this._hasHighlights=o(this._materialRenderers,(e=>e.hasHighlights))),s&&(this._hasWater=o(this._materialRenderers,(e=>e.hasWater))),this.notifyChange(\"updating\"),!0}add(e){if(0===e.length)return;const r=0===this._pendingAddsRemoves.size;for(const t of e)this._pendingAddsRemoves.set(t,0);r&&this.notifyChange(\"updating\")}remove(e){const r=0===this._pendingAddsRemoves.size;for(const t of e){const e=this._pendingAddsRemoves.get(t);0===e?this._pendingAddsRemoves.set(t,2):2!==e&&this._pendingAddsRemoves.set(t,1)}r&&this._pendingAddsRemoves.size>0&&this.notifyChange(\"updating\")}modify(e,r){const t=0===this._changes.updates.length;for(const s of e){const e=this._changes.updates.pushNew();e.renderGeometry=s,e.updateType=r}t&&this._changes.updates.length>0&&this.notifyChange(\"updating\")}updateLogic(e){let r=!1;return this._sortedMaterialRenderers.forAll((({materialRenderer:t})=>{t.updateLogic&&t.updateLogic(e)&&(r=!0)})),r}draw(e,r){for(let t=0;t<this._sortedMaterialRenderers.length;t++){const s=this._sortedMaterialRenderers.data[t];n(s.material,e)&&s.materialRenderer.render(null,e,r,null)}}updateSortedMaterialRenderers(){this._sortedMaterialRenderers.clear();let e=0;this._materialRenderers.forEach(((r,t)=>{t.insertOrder=e++,this._sortedMaterialRenderers.push({material:t,materialRenderer:r})})),this._sortedMaterialRenderers.sort(((e,r)=>{const t=r.material.renderPriority-e.material.renderPriority;return 0!==t?t:e.material.insertOrder-r.material.insertOrder}))}updateAddsRemoves(){this._changes.adds.clear(),this._changes.removes.clear(),this._pendingAddsRemoves.forEach(((e,r)=>{switch(e){case 0:this._changes.adds.push(r);break;case 1:this._changes.removes.push(r)}}));let e=0;for(;e<this._changes.updates.length;){const r=this._changes.updates.data[e].renderGeometry;this._pendingAddsRemoves.has(r)?this._changes.updates.removeUnorderedIndex(e):e++}}get test(){return{sortedMaterialRenderers:this._sortedMaterialRenderers}}};e([t()],p.prototype,\"rctx\",void 0),e([t()],p.prototype,\"materialRepository\",void 0),e([t()],p.prototype,\"updating\",null),p=e([s(\"esri.views.3d.webgl-engine.lib.SortedRenderGeometryRenderer\")],p);export{p as SortedRenderGeometryRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{ReloadableShaderModule as r}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as t}from\"../core/shaderTechnique/ShaderTechnique.js\";import{ShaderTechniqueConfiguration as o,parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{Default3D as s}from\"./DefaultVertexAttributeLocations.js\";import a from\"../../../webgl/Program.js\";import{makePipelineState as n,separateBlendingParams as l,defaultColorWriteParams as h}from\"../../../webgl/renderState.js\";import{T as c}from\"../../../../chunks/TextureOnly.glsl.js\";class u extends t{initializeProgram(e){const r=u.shader.get().build();return new a(e.rctx,r.generateSource(\"vertex\"),r.generateSource(\"fragment\"),s)}initializePipeline(){return this.configuration.hasAlpha?n({blending:l(770,1,771,771),colorWrite:h}):n({colorWrite:h})}}u.shader=new r(c,(()=>import(\"../core/shaderLibrary/util/TextureOnly.glsl.js\")));class m extends o{constructor(){super(...arguments),this.hasAlpha=!1}}e([i()],m.prototype,\"hasAlpha\",void 0);export{u as TextureTechnique,m as TextureTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction t(t,n){let e=0;for(let l=0;l<t.length;l++)e+=t[l]*n[l];return e}function n(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n[l];return e}function e(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n;return e}function l(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]+n[l];return e}export{l as add,t as dotProduct,n as elementwiseProduct,e as scalarProduct};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{clamp as n}from\"../../../../core/mathUtils.js\";import{c as t}from\"../../../../chunks/vec3f64.js\";import{p as i,s,g as o}from\"../../../../chunks/vec3.js\";import{MainLight as r,FillLight as e,AmbientLight as c,SphericalHarmonicsLight as a}from\"./Lightsources.js\";import{elementwiseProduct as h,scalarProduct as f,add as m}from\"../lib/LongVectorMath.js\";function u(n){return(n+1)*(n+1)}function l(n){return 2*n+1}function g(t){return n(Math.floor(Math.sqrt(t)-1),0,2)}function p(n,t,i){const s=n[0],o=n[1],r=n[2],e=i||[];return e.length=u(t),t>=0&&(e[0]=.28209479177),t>=1&&(e[1]=.4886025119*s,e[2]=.4886025119*r,e[3]=.4886025119*o),t>=2&&(e[4]=1.09254843059*s*o,e[5]=1.09254843059*o*r,e[6]=.31539156525*(3*r*r-1),e[7]=1.09254843059*s*r,e[8]=.54627421529*(s*s-o*o)),e}function y(n,t){const i=u(n),s=t||{r:[],g:[],b:[]};s.r.length=s.g.length=s.b.length=i;for(let o=0;o<i;o++)s.r[o]=s.g[o]=s.b[o]=0;return s}function b(n,t){const s=g(t.r.length);for(const o of n)i(v,o.direction),p(v,s,P),h(P,w),f(P,o.intensity[0],k),m(t.r,k),f(P,o.intensity[1],k),m(t.g,k),f(P,o.intensity[2],k),m(t.b,k);return t}function H(n,t){p(v,0,P);for(const i of n)t.r[0]+=P[0]*w[0]*i.intensity[0]*4*Math.PI,t.g[0]+=P[0]*w[0]*i.intensity[1]*4*Math.PI,t.b[0]+=P[0]*w[0]*i.intensity[2]*4*Math.PI;return t}function M(n,t,i){y(t,i.sphericalHarmonics.sh),s(i.main.intensity,0,0,0);let h=!1;const f=d,u=j,l=I;f.length=0,u.length=0,l.length=0;for(const s of n)s instanceof r&&!h?(o(i.main.direction,s.direction),i.main.intensity[0]=s.intensity[0],i.main.intensity[1]=s.intensity[1],i.main.intensity[2]=s.intensity[2],i.main.castShadows=s.castShadows,h=!0):s instanceof r||s instanceof e?f.push(s):s instanceof c?u.push(s):s instanceof a&&l.push(s);b(f,i.sphericalHarmonics.sh),H(u,i.sphericalHarmonics.sh);for(const s of l)m(i.sphericalHarmonics.sh.r,s.sh.r),m(i.sphericalHarmonics.sh.g,s.sh.g),m(i.sphericalHarmonics.sh.b,s.sh.b)}const d=[],j=[],I=[],P=[0],k=[0],v=t(),w=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398];export{M as combineLights,p as computeCoefficients,y as initSHCoefficients,u as numberOfCoefficients,l as numberOfCoefficientsInBand,g as orderFromNumberOfCoefficients,H as projectAmbientLights,b as projectFillLights};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{c as i,f as t}from\"../../../../chunks/vec3f64.js\";import{p as n,g as r,a as s,b as o}from\"../../../../chunks/vec3.js\";import{combineLights as e}from\"./SphericalHarmonics.js\";const h=i(),g=.4;class l{constructor(){this._renderLighting={main:{intensity:i(),direction:t(1,0,0),castShadows:!1},sphericalHarmonics:{sh:{r:[0],g:[0],b:[0]}}},this._shOrder=2,this._oldSunlight={direction:i(),ambient:{color:i(),intensity:0},diffuse:{color:i(),intensity:0}}}setLightDirectionUniform(i){i.setUniform3fv(\"lightingMainDirection\",this._renderLighting.main.direction)}setUniforms(i,t=!1){if(t){const t=(1-this._info.groundLightingFactor)*(1-this._info.globalFactor);i.setUniform1f(\"lightingFixedFactor\",t)}else i.setUniform1f(\"lightingFixedFactor\",0);i.setUniform1f(\"lightingGlobalFactor\",this._info.globalFactor),this.setLightDirectionUniform(i),i.setUniform3fv(\"lightingMainIntensity\",this._renderLighting.main.intensity),i.setUniform1f(\"ambientBoostFactor\",g);const n=this._renderLighting.sphericalHarmonics.sh;0===this._shOrder?i.setUniform3f(\"lightingAmbientSH0\",n.r[0],n.g[0],n.b[0]):1===this._shOrder?(i.setUniform4f(\"lightingAmbientSH_R\",n.r[0],n.r[1],n.r[2],n.r[3]),i.setUniform4f(\"lightingAmbientSH_G\",n.g[0],n.g[1],n.g[2],n.g[3]),i.setUniform4f(\"lightingAmbientSH_B\",n.b[0],n.b[1],n.b[2],n.b[3])):2===this._shOrder&&(i.setUniform3f(\"lightingAmbientSH0\",n.r[0],n.g[0],n.b[0]),i.setUniform4f(\"lightingAmbientSH_R1\",n.r[1],n.r[2],n.r[3],n.r[4]),i.setUniform4f(\"lightingAmbientSH_G1\",n.g[1],n.g[2],n.g[3],n.g[4]),i.setUniform4f(\"lightingAmbientSH_B1\",n.b[1],n.b[2],n.b[3],n.b[4]),i.setUniform4f(\"lightingAmbientSH_R2\",n.r[5],n.r[6],n.r[7],n.r[8]),i.setUniform4f(\"lightingAmbientSH_G2\",n.g[5],n.g[6],n.g[7],n.g[8]),i.setUniform4f(\"lightingAmbientSH_B2\",n.b[5],n.b[6],n.b[7],n.b[8]))}set(i){this._info=i,e(i.lights,this._shOrder,this._renderLighting),n(this._oldSunlight.direction,this._renderLighting.main.direction);const t=1/Math.PI;this._oldSunlight.ambient.color[0]=.282095*this._renderLighting.sphericalHarmonics.sh.r[0]*t,this._oldSunlight.ambient.color[1]=.282095*this._renderLighting.sphericalHarmonics.sh.g[0]*t,this._oldSunlight.ambient.color[2]=.282095*this._renderLighting.sphericalHarmonics.sh.b[0]*t,this._oldSunlight.ambient.intensity=1,this._oldSunlight.diffuse.color[0]=this._renderLighting.main.intensity[0]*t,this._oldSunlight.diffuse.color[1]=this._renderLighting.main.intensity[1]*t,this._oldSunlight.diffuse.color[2]=this._renderLighting.main.intensity[2]*t,this._oldSunlight.diffuse.intensity=1;const l=r(h,this._oldSunlight.diffuse.color);s(l,l,g*this._info.globalFactor),o(this._oldSunlight.ambient.color,this._oldSunlight.ambient.color,l)}get globalFactor(){return this._info.globalFactor}get old(){return this._oldSunlight}}export{l as SceneLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/has.js\";import{disposeMaybe as r,isSome as t,isNone as i,unwrap as s}from\"../../../core/maybe.js\";import n from\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import\"../../../core/urlUtils.js\";import\"../../../core/uuid.js\";import\"../../../portal/support/resourceExtension.js\";import h from\"../../../core/PooledArray.js\";import l from\"../../../core/Accessor.js\";import{generateUID as d}from\"../../../core/uid.js\";import{f as u,c as p}from\"../../../chunks/vec3f64.js\";import c from\"../../../core/Handles.js\";import{init as g}from\"../../../core/watchUtils.js\";import{o as m,i as y,t as _}from\"../../../chunks/mat4.js\";import{Task as f}from\"../../support/Scheduler.js\";import{someMap as R}from\"../../../core/MapUtils.js\";import{a as w}from\"../../../chunks/vec2f64.js\";import b from\"../../webgl/Texture.js\";import{vertexCount as x}from\"../../webgl/Util.js\";import{createEmptyDepthTexture as T,createQuadVAO as v}from\"../webgl-engine/lib/glUtil3D.js\";import{AmbientLight as C}from\"../webgl-engine/lighting/Lightsources.js\";import{IntersectorResult as O}from\"../webgl-engine/lib/intersectorUtils.js\";import j from\"../webgl-engine/lib/Camera.js\";import L from\"../support/debugFlags.js\";import{AutoDisposableMixin as V,autoDispose as G}from\"../webgl-engine/lib/AutoDisposable.js\";import{OverlayRenderTarget as S}from\"./OverlayRenderTarget.js\";import{Overlay as U}from\"./Overlay.js\";import{CommonUniformStore as E}from\"../webgl-engine/core/shaderTechnique/CommonUniformStore.js\";import{ShaderTechniqueRepository as A}from\"../webgl-engine/core/shaderTechnique/ShaderTechniqueRepository.js\";import P from\"../webgl-engine/lib/GLMaterialRep.js\";import M from\"../webgl-engine/lib/GridLocalOriginFactory.js\";import D from\"../webgl-engine/lib/RenderContext.js\";import{SortedRenderGeometryRenderer as H}from\"../webgl-engine/lib/SortedRenderGeometryRenderer.js\";import{TextureTechniqueConfiguration as W,TextureTechnique as q}from\"../webgl-engine/lib/TextureTechnique.js\";import{SceneLighting as F}from\"../webgl-engine/lighting/SceneLighting.js\";import{StippleTextureRepository as k}from\"../webgl-engine/materials/lineStippleUtils.js\";const z=n.getLogger(\"esri.views.3d.webgl-engine.lib.OverlayRenderer\");let B=class extends(V(l)){constructor(e){super(e),this._overlays=null,this._hasHighlights=!1,this._rendersOccluded=!1,this._hasWater=!1,this._lighting=new F,this._localOrigins=new M,this._handles=new c,this._layerRenderers=new Map,this._sortedLayerRenderersDirty=!1,this._sortedLayerRenderers=new h,this._geometries=new Map,this.globalUnitScale=1,this.longitudeCyclical=null}initialize(){this._rctx=this.renderView.renderingContext,this._renderContext=new D(this._rctx,null,null,null,null,null),this._stippleTextureRepository=new k,this.waterTextureRepository=this.renderView.waterTextureRepository,this._shaderTechniqueRepository=new A({rctx:this._rctx,viewingMode:2,commonUniformStore:new E,stippleTextureRepository:this._stippleTextureRepository,waterTextureRepository:this.waterTextureRepository}),g(this.waterTextureRepository,\"loadingState\",(()=>this.emitContentChanged())),this._materialRepository=new P(this.renderView.textureRepository,this._shaderTechniqueRepository),this._materialRepository.onMaterialChanged=e=>{(e.renderOccluded&K)>0!==this._rendersOccluded&&this.updateRendersOccluded(),this.emitContentChanged(),this.notifyChange(\"updating\")},this._compositingHelper=this.renderView.compositingHelper,this._lighting.set({lights:[new C(u(1,1,1))],groundLightingFactor:1,globalFactor:0}),this._bindParameters={slot:null,highlightDepthTexture:T(this._rctx),camera:X,inverseViewport:w(),origin:null,screenToWorldRatio:null,screenToWorldRatioGlobalWM:null,shadowMappingEnabled:!1,slicePlane:null,ssaoEnabled:!1,hasOccludees:!1,linearDepthTexture:null,linearDepthTextureUnit:0,lastFrameColorTexture:null,lastFrameColorTextureUnit:0,reprojectionMat:null,ssrEnabled:!1,lighting:this._lighting,transparencyPassType:3,terrainLinearDepthTexture:null,geometryLinearDepthTexture:null,multipassTerrainEnabled:!1,cullAboveGround:!0,multipassGeometryEnabled:!1},this._handles.add(this.scheduler.registerTask(f.STAGE,(()=>this.commitChanges()),(()=>this.updating)))}dispose(){this._handles.destroy(),this._layerRenderers.forEach((e=>e.dispose())),this._layerRenderers.clear(),this._bindParameters.highlightDepthTexture=r(this._bindParameters.highlightDepthTexture),this._shaderTechniqueRepository=r(this._shaderTechniqueRepository),this._temporaryRenderTarget=r(this._temporaryRenderTarget),this._debugPatternTexture=r(this._debugPatternTexture),this._quadVAO=r(this._quadVAO)}get updating(){return this._sortedLayerRenderersDirty||R(this._layerRenderers,(e=>e.updating))||this.waterTextureRepository.updating}get hasOverlays(){return t(this._overlays)}get gpuMemoryUsage(){return t(this._overlays)?this._overlays[0].getGpuMemoryUsage()+this._overlays[1].getGpuMemoryUsage():0}get overlays(){return this._overlays}forEachOverlay(e){t(this._overlays)&&(e(this._overlays[0],0),e(this._overlays[1],1))}ensureOverlays(){if(i(this._overlays)){const e=this.renderView.renderingContext;this._overlays=[new U(e),new U(e)]}}disposeOverlays(){t(this._overlays)&&(this._overlays.forEach((e=>e.dispose())),this._overlays=null)}commitChanges(){let e=!1;this._layerRenderers.forEach(((r,t)=>{r.commitChanges()&&(e=!0),r.isEmpty&&(this._layerRenderers.delete(t),this._sortedLayerRenderersDirty=!0,this._handles.remove(t))})),this._sortedLayerRenderersDirty&&(this.updateSortedLayerRenderers(),e=!0),e&&(this.notifyChange(\"updating\"),this.emitContentChanged(),this.updateHasHighlights(),this.updateRendersOccluded(),this.updateHasWater())}addGeometries(e,r,t){for(const s of e)null==s.origin&&(s.origin=this._localOrigins.getOrigin(s.boundingSphere)),i(s.id)&&(s.id=d()),this._geometries.set(s.id,s);this.ensureLayerRenderer(r).add(e),2===t&&this.notifyGraphicGeometryChanged(e,r)}removeGeometries(e,r,t){for(const n of e)this._geometries.delete(s(n.id));const i=this._layerRenderers.get(r);i&&(i.remove(e),2===t&&this.notifyGraphicGeometryChanged(e,r))}updateGeometries(e,r,t){const i=this._layerRenderers.get(r);if(i)switch(i.modify(e,t),t){case 4:case 2:return this.notifyGraphicGeometryChanged(e,r);case 1:return this.notifyGraphicVisibilityChanged(e,r)}else z.warn(\"Attempted to update geometry for nonexistent layer\")}notifyGraphicGeometryChanged(e,r){if(i(r.notifyGraphicGeometryChanged))return;let t;for(const i of e){const e=i.graphicUid;e!==t&&(r.notifyGraphicGeometryChanged(e),t=e)}}notifyGraphicVisibilityChanged(e,r){if(i(r.notifyGraphicVisibilityChanged))return;let t;for(const i of e){const e=i.graphicUid;e!==t&&(r.notifyGraphicVisibilityChanged(e),t=e)}}updateHighlights(e,r){const t=this._layerRenderers.get(r);t?t.modify(e,8):z.warn(\"Attempted to update highlights for nonexistent layer\")}isEmpty(){return 0===this._geometries.size&&!L.OVERLAY_DRAW_DEBUG_TEXTURE}get hasHighlights(){return this._hasHighlights}get hasWater(){return this._hasWater}get rendersOccluded(){return this._rendersOccluded}updateLogic(e){let r=!1;return this._layerRenderers.forEach((t=>{t.updateLogic(e)&&(r=!0)})),r}updateLayerOrder(){this._sortedLayerRenderersDirty=!0}drawPass(e,r,i,n=0){if(0===i.numViews)return!1;if(this._screenToWorldRatio=i.pixelRatio*Math.abs(i.views[0].extent[2]-i.views[0].extent[0])/Math.abs(i.views[0].viewport[2]-i.views[0].viewport[0]),this.isEmpty()||5===e&&!this.hasHighlights||3===e&&!this.hasWater)return!1;if(!this.hasNonZeroSizedView(i))return!1;const o=i.width,a=i.height;if(!r.isValid())return!1;r.resize(o,a);const h=this._rctx;if(X.pixelRatio=i.pixelRatio||1,this._renderContext.pass=e,this._bindParameters.screenToWorldRatio=this._screenToWorldRatio,this._bindParameters.screenToWorldRatioGlobalWM=this._screenToWorldRatio*this.globalUnitScale,r.bind(h),h.setClearColor(0,0,0,0),h.clearSafe(16384),1===n&&(this._renderContext.renderOccludedMask=K),L.OVERLAY_DRAW_DEBUG_TEXTURE&&1!==n)for(let t=0;t<i.numViews;t++)this.setViewParameters(i.views[t],X),this.drawDebugTexture(o,a,N[i.index%N.length]);return this._layerRenderers.size>0&&this._sortedLayerRenderers.forAll((({layerView:l,renderer:d})=>{if(2===n&&t(l)&&0===l.drapeSourceType)return;const u=t(l)&&t(l.fullOpacity)&&l.fullOpacity<1&&0===e;u&&(this.bindTemporaryFramebuffer(this._rctx,o,a),h.clearSafe(16384));for(let e=0;e<i.numViews;e++)this.setViewParameters(i.views[e],X),d.draw(this._renderContext,this._bindParameters);u&&t(this._temporaryRenderTarget)&&(r.bind(h),this._compositingHelper.composite(this._temporaryRenderTarget.getTexture(),2,s(s(l).fullOpacity)))})),h.bindFramebuffer(null),r.generateMipMap(),this._renderContext.resetRenderOccludedMask(),!0}bindTemporaryFramebuffer(e,r,t){i(this._temporaryRenderTarget)&&(this._temporaryRenderTarget=new S(e,!1)),this._temporaryRenderTarget.resize(r,t),this._temporaryRenderTarget.bind(e)}async reloadShaders(){await this._shaderTechniqueRepository.hotReload()}intersect(e,r,t){let i=0;this._geometries.forEach((s=>{if(t&&!t(s))return;this.intersectRenderGeometry(s,r,0,e,i);const n=this.longitudeCyclical;n&&(s.boundingSphere[0]-s.boundingSphere[3]<n.min&&this.intersectRenderGeometry(s,r,n.range,e,i),s.boundingSphere[0]+s.boundingSphere[3]>n.max&&this.intersectRenderGeometry(s,r,-n.range,e,i)),i++}))}intersectRenderGeometry(e,r,i,s,n){if(!e.instanceParameters.visible)return;let o=0;t(e.transformation)&&(i+=e.transformation[12],o=e.transformation[13]),Y[0]=r[0]-i,Y[1]=r[1]-o,Y[2]=1,Z[0]=r[0]-i,Z[1]=r[1]-o,Z[2]=0,e.screenToWorldRatio=this._screenToWorldRatio,e.material.intersect(e,null,e.getShaderTransformation(),s,Y,Z,((r,t,i)=>{this.addIntersectionResult(i,e.material.renderPriority,n,s,e.layerUid,e.graphicUid)}),e.calculateShaderTransformation,!0)}addIntersectionResult(e,r,t,i,s,n){const o={type:\"external\",metadata:{layerUid:s,graphicUid:n}},a=s=>{s.set(o,null,i.results.ground.dist,i.results.ground.normal,i.results.ground.transformation,r,null,null,e,t),s.intersector=\"OverlayRenderer\"};if((null==i.results.min.drapedLayerOrder||r>=i.results.min.drapedLayerOrder)&&(null==i.results.min.dist||i.results.ground.dist<=i.results.min.dist)&&a(i.results.min),0!==i.options.store&&(null==i.results.max.drapedLayerOrder||r<i.results.max.drapedLayerOrder)&&(null==i.results.max.dist||i.results.ground.dist>i.results.max.dist)&&a(i.results.max),2===i.options.store){const e=new O(i.ray);a(e),i.results.all.push(e)}}stopAnimationsAtTime(e){this._sortedLayerRenderers.forAll((r=>r.renderer.stopAnimationsAtTime(e)))}ensureLayerRenderer(e){let r=this._layerRenderers.get(e);return r||(r=new H({rctx:this._rctx,materialRepository:this._materialRepository}),this._layerRenderers.set(e,r),this._sortedLayerRenderersDirty=!0,\"fullOpacity\"in e&&this._handles.add(e.watch(\"fullOpacity\",(()=>this.emitContentChanged())),e),this._handles.add(g(r,\"updating\",(()=>this.notifyChange(\"updating\"))),e)),r}updateSortedLayerRenderers(){if(!this._sortedLayerRenderersDirty)return;if(this._sortedLayerRenderersDirty=!1,this._sortedLayerRenderers.clear(),0===this._layerRenderers.size)return;const[{view:{allLayerViews:e}}]=this._layerRenderers.keys(),r=new Set(this._layerRenderers.values());e.forEach((e=>{const t=e,i=this._layerRenderers.get(t);i&&(this._sortedLayerRenderers.push(new I(t,i)),r.delete(i))})),r.forEach((e=>{this._sortedLayerRenderers.push(new I(null,e))}))}setViewParameters(e,r){r.viewport=e.viewport;const t=e.extent;m(r.projectionMatrix,0,t[2]-t[0],0,t[3]-t[1],r.near,r.far),y(r.viewMatrix),_(r.viewMatrix,r.viewMatrix,[-e.extent[0],-e.extent[1],0]),r.setGLViewport(this._rctx),this._renderContext.camera=r,this._bindParameters.camera=r,this._bindParameters.inverseViewport[0]=1/r.fullViewport[2],this._bindParameters.inverseViewport[1]=1/r.fullViewport[3]}hasNonZeroSizedView(e){for(let r=0;r<e.numViews;r++){const t=e.views[r];if(t.extent[0]!==t.extent[2]&&t.extent[1]!==t.extent[3])return!0}return!1}emitContentChanged(){this.onContentChanged&&this.onContentChanged()}updateHasWater(){const e=R(this._layerRenderers,(e=>e.hasWater));e!==this._hasWater&&(this._hasWater=e)}updateHasHighlights(){const e=R(this._layerRenderers,(e=>e.hasHighlights));e!==this._hasHighlights&&(this._hasHighlights=e,this.onHasHighlightsChanged&&this.onHasHighlightsChanged(this._hasHighlights))}updateRendersOccluded(){const e=R(this._layerRenderers,(e=>e.rendersOccluded));e!==this._rendersOccluded&&(this._rendersOccluded=e,this.onRendersOccludedChanged&&this.onRendersOccludedChanged(this.rendersOccluded))}drawDebugTexture(e,r,t){const i=this._rctx;this.ensureDebugPatternResources(e,r);const s=this._debugTextureTechnique.program;i.bindProgram(s),i.setPipelineState(this._debugTextureTechnique.pipeline),s.setUniform4f(\"color\",t[0],t[1],t[2],1),s.setUniform1i(\"tex\",0),i.bindTexture(this._debugPatternTexture,0),i.bindVAO(this._quadVAO),i.drawArrays(5,0,x(this._quadVAO,\"geometry\"))}ensureDebugPatternResources(e,r){if(this._debugPatternTexture)return;const t=new Uint8Array(e*r*4);let i=0;for(let n=0;n<r;n++)for(let s=0;s<e;s++){const o=Math.floor(s/10),a=Math.floor(n/10);o<2||a<2||10*o>e-20||10*a>r-20?(t[i++]=255,t[i++]=255,t[i++]=255,t[i++]=255):(t[i++]=255,t[i++]=255,t[i++]=255,t[i++]=1&o&&1&a?1&s^1&n?0:255:1&o^1&a?0:128)}this._debugPatternTexture=new b(this._rctx,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:e,height:r},t);const s=new W;s.hasAlpha=!0,this._debugTextureTechnique=this._shaderTechniqueRepository.acquireAndReleaseExisting(q,s,this._debugTextureTechnique),this._quadVAO=v(this._rctx)}get test(){return{layerRenderers:this._layerRenderers}}};e([G()],B.prototype,\"_shaderTechniqueRepository\",void 0),e([G()],B.prototype,\"_stippleTextureRepository\",void 0),e([o(),G()],B.prototype,\"waterTextureRepository\",void 0),e([o({constructOnly:!0})],B.prototype,\"renderView\",void 0),e([o({constructOnly:!0})],B.prototype,\"scheduler\",void 0),e([o()],B.prototype,\"globalUnitScale\",void 0),e([o({type:Boolean,readOnly:!0})],B.prototype,\"updating\",null),B=e([a(\"esri.views.3d.terrain.OverlayRenderer\")],B);class I{constructor(e,r){this.layerView=e,this.renderer=r}}const N=[[1,.5,.5],[.5,.5,1],[.5,1,.5]],X=new j;X.near=1,X.far=1e4,X.relativeElevation=null;const Y=p(),Z=p(),J=-2,K=4;export{J as DRAPED_Z,B as OverlayRenderer,K as overlayRenderOccludedFlag};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{Z as s,O as o}from\"../../../../chunks/vec4f64.js\";const c=1,r=1.2,t=s,a=o;export{r as SUSPEND_RESUME_EXTENT_OPTIMISM,t as TRANSPARENT_UNIT,a as WHITE_UNIT,c as defaultIconElevationOffset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{slice as t}from\"../../../../core/typedArrayUtil.js\";import{isNone as o,isSome as e,unwrapOr as n}from\"../../../../core/maybe.js\";import{acosClamped as r}from\"../../../../core/mathUtils.js\";import{c as i}from\"../../../../chunks/vec3f64.js\";import{s,n as a,d as u,a as c}from\"../../../../chunks/vec3.js\";import{projectBuffer as p}from\"../../../../geometry/projection.js\";import{pathsToTriangulationInfo as l}from\"../../../../geometry/support/triangulationUtils.js\";import{Geometry as f}from\"../../webgl-engine/lib/Geometry.js\";import{applyPerVertexElevationAlignment as h}from\"./elevationAlignmentUtils.js\";import{DRAPED_Z as m}from\"../../terrain/OverlayRenderer.js\";import{WHITE_UNIT as y}from\"./constants.js\";function b(t){const o=[],e=[];j(t,e,o);const n=e[0][1].data,r=o[0][1].length,i=new Uint16Array(r);return A(t,e,o),F(t,e,o,i),w(t,e,o,i),v(t,e,o,i),D(t,e,o,i),P(t,e,o,i),U(t,e,o,n),new f(e,o,2)}function g(t,o,e,n){const r=\"polygon\"===t.type?1:0,i=\"polygon\"===t.type?t.rings:t.paths,{position:s,outlines:a}=l(i,t.hasZ,r),u=new Float64Array(s.length),c=h(s,t.spatialReference,0,u,0,s,0,s.length/3,o,e,n),p=null!=c;return{lines:p?d(a,s,u):[],projectionSuccess:p,sampledElevation:c}}function d(t,o,e){const n=new Array;for(const{index:r,count:i}of t){if(i<=1)continue;const t=3*r,s=t+3*i;n.push({position:o.subarray(t,s),mapPosition:e?e.subarray(t,s):void 0})}return n}function z(t,o){const e=\"polygon\"===t.type?1:0,n=\"polygon\"===t.type?t.rings:t.paths,{position:r,outlines:i}=l(n,!1,e),s=p(r,t.spatialReference,0,r,o,0,r.length/3);for(let a=2;a<r.length;a+=3)r[a]=m;return{lines:s?d(i,r):[],projectionSuccess:s}}function j(o,e,n){const{attributeData:{position:r},removeDuplicateStartEnd:i}=o,s=M(r)&&1===i,a=r.length/3-(s?1:0),u=new Uint32Array(2*(a-1)),c=s?t(r,0,r.length-3):r;let p=0;for(let t=0;t<a-1;t++)u[p++]=t,u[p++]=t+1;e.push([\"position\",{size:3,data:c,exclusive:s}]),n.push([\"position\",u])}function A(t,e,n){const r=t.attributeData.mapPosition;o(r)||(n.push([\"mapPos\",n[0][1]]),e.push([\"mapPos\",{size:3,data:r}]))}function F(t,o,r,i){if(e(t.attributeData.colorFeature))return;const s=t.attributeData.color;o.push([\"color\",{size:4,data:n(s,y)}]),r.push([\"color\",i])}function v(t,e,n,r){const i=t.attributeData.colorFeature;o(i)||(e.push([\"colorFeatureAttribute\",{size:1,data:new Float32Array([i])}]),n.push([\"color\",r]))}function w(t,o,r,i){if(e(t.attributeData.sizeFeature))return;const s=t.attributeData.size;o.push([\"size\",{size:1,data:[n(s,1)]}]),r.push([\"size\",i])}function D(t,e,n,r){const i=t.attributeData.sizeFeature;o(i)||(e.push([\"sizeFeatureAttribute\",{size:1,data:new Float32Array([i])}]),n.push([\"sizeFeatureAttribute\",r]))}function P(t,e,n,r){const i=t.attributeData.opacityFeature;o(i)||(e.push([\"opacityFeatureAttribute\",{size:1,data:new Float32Array([i])}]),n.push([\"opacityFeatureAttribute\",r]))}function U(t,o,e,i){if(\"round\"!==t.join)return;const p=i.length/3,l=new Float32Array(p),f=S,h=R;s(f,0,0,0);const m=n(t.uniformSize,1);for(let n=-1;n<p;++n){const t=n<0?p+n:n,o=(n+1)%p;if(s(h,i[3*o+0]-i[3*t+0],i[3*o+1]-i[3*t+1],i[3*o+2]-i[3*t+2]),a(h,h),n>=0){const t=1*((Math.PI-r(u(f,h)))*k)*x(m);l[n]=Math.max(Math.floor(t),0)}c(f,h,-1)}o.push([\"subdivisions\",{size:1,data:l}]),e.push([\"subdivisions\",e[0][1]])}function x(t){return 1.863798+-2.0062872/(1+t/18.2313)**.8856294}function M(t){const o=t.length;return t[0]===t[o-3]&&t[1]===t[o-2]&&t[2]===t[o-1]}const S=i(),R=i(),k=4/Math.PI;export{b as createGeometry,g as geometryToRenderInfo,z as geometryToRenderInfoDraped};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as r}from\"../../shaderModules/interfaces.js\";function o(o){o.fragment.uniforms.add(\"lastFrameColorMap\",\"sampler2D\"),o.fragment.uniforms.add(\"reprojectionMat\",\"mat4\"),o.fragment.uniforms.add(\"rpProjectionMat\",\"mat4\"),o.fragment.code.add(r`\n  vec2 reprojectionCoordinate(vec3 projectionCoordinate)\n  {\n    vec4 zw = rpProjectionMat * vec4(0.0, 0.0, -projectionCoordinate.z, 1.0);\n    vec4 reprojectedCoord = reprojectionMat * vec4(zw.w * (projectionCoordinate.xy * 2.0 - 1.0), zw.z, zw.w);\n    reprojectedCoord.xy /= reprojectedCoord.w;\n    return reprojectedCoord.xy*0.5 + 0.5;\n  }\n  `)}!function(r){function o(r,o,e){r.setUniform1i(\"lastFrameColorMap\",e.lastFrameColorTextureUnit),o.bindTexture(e.lastFrameColorTexture,e.lastFrameColorTextureUnit),r.setUniformMatrix4fv(\"reprojectionMat\",e.reprojectionMat),r.setUniformMatrix4fv(\"rpProjectionMat\",e.camera.projectionMatrix)}r.bindUniforms=o}(o||(o={}));export{o as Reprojection};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{ReadLinearDepth as t}from\"../output/ReadLinearDepth.glsl.js\";import{Reprojection as o}from\"./Reprojection.glsl.js\";function r(r,a){r.fragment.uniforms.add(\"nearFar\",\"vec2\"),r.fragment.uniforms.add(\"depthMapView\",\"sampler2D\"),r.fragment.uniforms.add(\"ssrViewMat\",\"mat4\"),r.fragment.uniforms.add(\"invResolutionHeight\",\"float\"),r.fragment.include(t),r.include(o),r.fragment.code.add(e`\n  const int maxSteps = ${a.highStepCount?\"150;\":\"75;\"}\n\n  vec4 applyProjectionMat(mat4 projectionMat, vec3 x)\n  {\n    vec4 projectedCoord =  projectionMat * vec4(x, 1.0);\n    projectedCoord.xy /= projectedCoord.w;\n    projectedCoord.xy = projectedCoord.xy*0.5 + 0.5;\n    return projectedCoord;\n  }\n\n  vec3 screenSpaceIntersection(vec3 dir, vec3 startPosition, vec3 viewDir, vec3 normal)\n  {\n    vec3 viewPos = startPosition;\n    vec3 viewPosEnd = startPosition;\n\n    // Project the start position to the screen\n    vec4 projectedCoordStart = applyProjectionMat(rpProjectionMat, viewPos);\n    vec3  Q0 = viewPos / projectedCoordStart.w; // homogeneous camera space\n    float k0 = 1.0/ projectedCoordStart.w;\n\n    // advance the position in the direction of the reflection\n    viewPos += dir;\n\n    vec4 projectedCoordVanishingPoint = applyProjectionMat(rpProjectionMat, dir);\n\n    // Project the advanced position to the screen\n    vec4 projectedCoordEnd = applyProjectionMat(rpProjectionMat, viewPos);\n    vec3  Q1 = viewPos / projectedCoordEnd.w; // homogeneous camera space\n    float k1 = 1.0/ projectedCoordEnd.w;\n\n    // calculate the reflection direction in the screen space\n    vec2 projectedCoordDir = (projectedCoordEnd.xy - projectedCoordStart.xy);\n    vec2 projectedCoordDistVanishingPoint = (projectedCoordVanishingPoint.xy - projectedCoordStart.xy);\n\n    float yMod = min(abs(projectedCoordDistVanishingPoint.y), 1.0);\n\n    float projectedCoordDirLength = length(projectedCoordDir);\n    float maxSt = float(maxSteps);\n\n    // normalize the projection direction depending on maximum steps\n    // this determines how blocky the reflection looks\n    vec2 dP = yMod * (projectedCoordDir)/(maxSt * projectedCoordDirLength);\n\n    // Normalize the homogeneous camera space coordinates\n    vec3  dQ = yMod * (Q1 - Q0)/(maxSt * projectedCoordDirLength);\n    float dk = yMod * (k1 - k0)/(maxSt * projectedCoordDirLength);\n\n    // initialize the variables for ray marching\n    vec2 P = projectedCoordStart.xy;\n    vec3 Q = Q0;\n    float k = k0;\n    float rayStartZ = -startPosition.z; // estimated ray start depth value\n    float rayEndZ = -startPosition.z;   // estimated ray end depth value\n    float prevEstimateZ = -startPosition.z;\n    float rayDiffZ = 0.0;\n    float dDepth;\n    float depth;\n    float rayDiffZOld = 0.0;\n\n    // early outs\n    if (dot(normal, dir) < 0.0 || dot(-viewDir, normal) < 0.0)\n      return vec3(P, 0.0);\n\n    for(int i = 0; i < maxSteps-1; i++)\n    {\n      depth = -linearDepthFromTexture(depthMapView, P, nearFar); // get linear depth from the depth buffer\n\n      // estimate depth of the marching ray\n      rayStartZ = prevEstimateZ;\n      dDepth = -rayStartZ - depth;\n      rayEndZ = (dQ.z * 0.5 + Q.z)/ ((dk * 0.5 + k));\n      rayDiffZ = rayEndZ- rayStartZ;\n      prevEstimateZ = rayEndZ;\n\n      if(-rayEndZ > nearFar[1] || -rayEndZ < nearFar[0] || P.y < 0.0  || P.y > 1.0 )\n      {\n        return vec3(P, 0.);\n      }\n\n      // If we detect a hit - return the intersection point, two conditions:\n      //  - dDepth > 0.0 - sampled point depth is in front of estimated depth\n      //  - if difference between dDepth and rayDiffZOld is not too large\n      //  - if difference between dDepth and 0.025/abs(k) is not too large\n      //  - if the sampled depth is not behind far plane or in front of near plane\n\n      if((dDepth) < 0.025/abs(k) + abs(rayDiffZ) && dDepth > 0.0 && depth > nearFar[0] && depth < nearFar[1] && abs(P.y - projectedCoordStart.y) > invResolutionHeight)\n      {\n          return vec3(P, depth);\n      }\n\n      // continue with ray marching\n      P += dP;\n      Q.z += dQ.z;\n      k += dk;\n      rayDiffZOld = rayDiffZ;\n    }\n    return vec3(P, 0.0);\n  }\n  `)}!function(e){function t(e,t,r){r.ssrEnabled&&(e.setUniform1i(\"depthMapView\",r.linearDepthTextureUnit),t.bindTexture(r.linearDepthTexture,r.linearDepthTextureUnit),e.setUniform2fv(\"nearFar\",r.camera.nearFar),e.setUniformMatrix4fv(\"ssrViewMat\",r.camera.viewMatrix),e.setUniform1f(\"invResolutionHeight\",1/r.camera.height),o.bindUniforms(e,t,r))}e.bindUniforms=t}(r||(r={}));export{r as ScreenSpaceReflections};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as o}from\"../../shaderModules/interfaces.js\";function e(e){e.fragment.code.add(o`\n    const float GAMMA = 2.2;\n    const float INV_GAMMA = 0.4545454545;\n\n    vec4 delinearizeGamma(vec4 color) {\n      return vec4(pow(color.rgb, vec3(INV_GAMMA)), color.w);\n    }\n\n    vec3 linearizeGamma(vec3 color) {\n      return pow(color, vec3(GAMMA));\n    }\n  `)}export{e as Gamma};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{ScreenSpaceReflections as o}from\"./ScreenSpaceReflections.glsl.js\";import{FoamColor as t}from\"./FoamRendering.glsl.js\";import{Gamma as r}from\"./Gamma.glsl.js\";import{PhysicallyBasedRendering as i}from\"./PhysicallyBasedRendering.glsl.js\";function a(a,n){a.include(i,n),a.include(r),a.include(t),n.ssrEnabled&&a.include(o,n),a.fragment.constants.add(\"fresnelSky\",\"vec3\",[.02,1,15]).add(\"fresnelMaterial\",\"vec2\",[.02,.1]).add(\"roughness\",\"float\",.015).add(\"foamIntensityExternal\",\"float\",1.7).add(\"ssrIntensity\",\"float\",.65).add(\"ssrHeightFadeStart\",\"float\",3e5).add(\"ssrHeightFadeEnd\",\"float\",5e5).add(\"waterDiffusion\",\"float\",.775).add(\"waterSeeColorMod\",\"float\",.8).add(\"correctionViewingPowerFactor\",\"float\",.4).add(\"skyZenitColor\",\"vec3\",[.52,.68,.9]).add(\"skyColor\",\"vec3\",[.67,.79,.9]),a.fragment.code.add(e`\n    PBRShadingWater shadingInfo;\n\n    /*\n    *   This function is an approximation for the sky gradient reflected\n    *   the water surface and describes a combination of two fresnel terms.\n    *   @parameter: cosTheta = is the result of max(dot(n,v), 0.0)\n    *   @parameter: horizon = the dominant color of the sky horizon\n    *   @parameter: cosTheta = the dominant color of the sky zenit\n    */\n    vec3 getSkyGradientColor(in float cosTheta, in vec3 horizon, in vec3 zenit) {\n      float exponent = pow((1.0 - cosTheta), fresnelSky[2]);\n      return mix(zenit, horizon, exponent);\n    }\n\n    /*\n    *   This function determines the water color per pixel.\n    *   @parameter: n = normal facing away from the surface\n    *   @parameter: v = view direction facing away from the surface.\n    *   @parameter: l = light direction facing away from the surface\n    *   @parameter: lightIntensity = light intensity, currently between 0...PI\n    *   @parameter: localUp = a normal for the general direction of the surface\n    *   @parameter: shadow = the amount of shadow at this pixel (0 = no shadow)\n    */\n    vec3 getSeaColor(in vec3 n, in vec3 v, in vec3 l, vec3 color, in vec3 lightIntensity, in vec3 localUp, in float shadow, float foamIntensity, vec3 positionView) {\n\n      float reflectionHit = 0.;\n      vec3 seaWaterColor = linearizeGamma(color);\n      // using half vector to determine the specular light\n      vec3 h = normalize(l + v);\n      shadingInfo.NdotL = clamp(dot(n, l), 0.0, 1.0);\n      shadingInfo.NdotV = clamp(dot(n, v), 0.001, 1.0);\n      shadingInfo.VdotN = clamp(dot(v, n), 0.001, 1.0);\n      shadingInfo.NdotH = clamp(dot(n, h), 0.0, 1.0);\n      shadingInfo.VdotH = clamp(dot(v, h), 0.0, 1.0);\n      shadingInfo.LdotH = clamp(dot(l, h), 0.0, 1.0);\n\n      // angle between vertex normal and view direction\n      float upDotV = max(dot(localUp,v), 0.0);\n      // reflected sky color: the reflected sky color consists of two main colors, the\n      // reflected color at the horizon and the reflected color of the zenit.\n      // the reflected sky color is then an approximation based on the fresnel term.\n      vec3 skyHorizon = linearizeGamma(skyColor);\n      vec3 skyZenit = linearizeGamma(skyZenitColor);\n      vec3 skyColor = getSkyGradientColor(upDotV, skyHorizon, skyZenit );\n\n      // we use the upDotL to smoothen out the\n      // reflected color of the water\n      float upDotL = max(dot(localUp,l),0.0);\n\n      // The approximated sky color is adjusted according to the sun position.\n      // This is done as approximation for e.g. night views.\n      float daytimeMod = 0.1 + upDotL * 0.9;\n      skyColor *= daytimeMod;\n\n      // If a water surface is in shadow we just use a slight darkening of the\n      // water surface expressed with this shadowModifier.\n      float shadowModifier = clamp(shadow, 0.8, 1.0);\n\n      // The reflected sky color consists of the fresnel reflection multiplied with the approximated sky color.\n      // The shadow is influencing the frensel term to keep the shadow impression for really near views. As long\n      // as reflection are absent there is a need to have a slight shadow for depth perception.\n      vec3 fresnelModifier = fresnelReflection(shadingInfo.VdotN, vec3(fresnelSky[0]), fresnelSky[1]);\n      vec3 reflSky = fresnelModifier * skyColor * shadowModifier;\n\n      // The reflected sea color is the input water color combined with the reflected sky color.\n      // The reflected sky color is modified by the incoming light.\n      vec3 reflSea = seaWaterColor * mix(skyColor, upDotL * lightIntensity * LIGHT_NORMALIZATION, 2.0 / 3.0) * shadowModifier;\n\n      vec3 specular = vec3(0.0);\n      // This prevents the specular light to be rendered when:\n      // - sun is behind a polygon (e.g. sundown for elevated polygons where nDotL might be still ok)\n      // - viewer is under water (for this localUp is better than n)\n      if(upDotV > 0.0 && upDotL > 0.0) {\n        // calculate the cook torrance BRDF but with simplified occlusion\n        vec3 specularSun = brdfSpecularWater(shadingInfo, roughness, vec3(fresnelMaterial[0]), fresnelMaterial[1]);\n\n        // Normalize light intensity to be between 0...1. Shadow cancels out specular light here\n        vec3 incidentLight = lightIntensity * LIGHT_NORMALIZATION * shadow;\n\n        specular = shadingInfo.NdotL * incidentLight * specularSun;\n      }\n\n      vec3 foam = vec3(0.0);\n      if(upDotV > 0.0) {\n        foam = foamIntensity2FoamColor(foamIntensityExternal, foamIntensity, skyZenitColor, daytimeMod);\n      }\n      `),n.ssrEnabled?a.fragment.code.add(e`\n      // Convert the world position to view position\n      vec4 viewPosition = vec4(positionView.xyz, 1.0);\n      vec3 viewDir = normalize(viewPosition.xyz);\n      vec4 viewNormalVectorCoordinate = ssrViewMat *vec4(n, 0.0);\n      vec3 viewNormal = normalize(viewNormalVectorCoordinate.xyz);\n      vec4 viewUp = ssrViewMat *vec4(localUp, 0.0);\n\n      // at steeper viewing angles we use more of a vertex normal (in this case up) then the wave normal\n      // this removes some artifacts of normal mapping\n      float correctionViewingFactor = pow(max(dot(-viewDir, viewUp.xyz), 0.0), correctionViewingPowerFactor);\n      vec3 viewNormalCorrected = mix(viewUp.xyz, viewNormal, correctionViewingFactor);\n\n      vec3 reflected = normalize(reflect(viewDir, viewNormalCorrected));\n\n      // perform screen space reflection to detect hit\n      vec3 hitCoordinate = screenSpaceIntersection( normalize(reflected), viewPosition.xyz, viewDir, viewUp.xyz);\n      vec3 reflectedColor = vec3(0.0);\n\n      // if there is a hit with ssr find reflected color from the reprojeted frame\n      if (hitCoordinate.z > 0.0)\n      {\n        vec2 reprojectedCoordinate = reprojectionCoordinate(hitCoordinate);\n\n        // fade out if there if the hit is near end of Y axis\n        vec2 dCoords = smoothstep(0.3, 0.6, abs(vec2(0.5, 0.5) - hitCoordinate.xy));\n        float heightMod = smoothstep(ssrHeightFadeEnd, ssrHeightFadeStart, -positionView.z);\n        reflectionHit = waterDiffusion * clamp(1.0 - (1.3*dCoords.y), 0.0, 1.0) * heightMod;\n\n        reflectedColor = linearizeGamma(texture2D(lastFrameColorMap, reprojectedCoordinate).xyz)* reflectionHit * fresnelModifier.y * ssrIntensity;\n      }\n      float seeColorMod =  mix(waterSeeColorMod, waterSeeColorMod*0.5, reflectionHit);\n      // combining reflected sky, reflected sea, specular highlight and SSR reflections.\n      return tonemapACES((1. - reflectionHit) * reflSky + reflectedColor + reflSea * seeColorMod + specular + foam);\n    }\n  `):a.fragment.code.add(e`\n      // combining reflected sky, reflected sea, specular highlight and SSR reflections.\n      return tonemapACES(reflSky + reflSea * waterSeeColorMod + specular + foam);\n    }\n  `)}export{a as Water};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nfunction e(e,t,r){const i=t&&t.length,u=i?t[0]*r:e.length;let o=n(e,0,u,r,!0);const l=new Array;if(!o||o.next===o.prev)return l;let y,p,c,v,s;if(i&&(o=f(e,t,o,r)),e.length>80*r){y=c=e[0],p=v=e[1];for(let n=r;n<u;n+=r){const t=e[n],x=e[n+1];y=Math.min(y,t),p=Math.min(p,x),c=Math.max(c,t),v=Math.max(v,x)}s=Math.max(c-y,v-p),s=0!==s?1/s:0}return x(o,l,r,y,p,s),l}function n(e,n,t,x,r){let i;if(r===a(e,n,t,x)>0)for(let o=n;o<t;o+=x)i=u(o,e[o],e[o+1],i);else for(let o=t-x;o>=n;o-=x)i=u(o,e[o],e[o+1],i);return i&&z(i,i.next)&&(o(i),i=i.next),i}function t(e,n=e){if(!e)return e;let t,x=e;do{if(t=!1,x.steiner||!z(x,x.next)&&0!==h(x.prev,x,x.next))x=x.next;else{if(o(x),x=n=x.prev,x===x.next)break;t=!0}}while(t||x!==n);return n}function x(e,n,u,l,f,y,p=0){if(!e)return;!p&&y&&(e=c(e,l,f,y));let v=e;for(;e.prev!==e.next;){const c=e.prev,s=e.next;if(y?i(e,l,f,y):r(e))n.push(c.index/u),n.push(e.index/u),n.push(s.index/u),o(e),e=s.next,v=s.next;else if((e=s)===v){p?1===p?x(e=m(e,n,u),n,u,l,f,y,2):2===p&&k(e,n,u,l,f,y):x(t(e),n,u,l,f,y,1);break}}}function r(e){const n=e.prev,t=e,x=e.next;if(h(n,t,x)>=0)return!1;let r=e.next.next;const i=r;let u=0;for(;r!==e.prev&&(0===u||r!==i);){if(u++,w(n.x,n.y,t.x,t.y,x.x,x.y,r.x,r.y)&&h(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function i(e,n,t,x){const r=e.prev,i=e,u=e.next;if(h(r,i,u)>=0)return!1;const o=r.x<i.x?r.x<u.x?r.x:u.x:i.x<u.x?i.x:u.x,l=r.y<i.y?r.y<u.y?r.y:u.y:i.y<u.y?i.y:u.y,f=r.x>i.x?r.x>u.x?r.x:u.x:i.x>u.x?i.x:u.x,y=r.y>i.y?r.y>u.y?r.y:u.y:i.y>u.y?i.y:u.y,p=M(o,l,n,t,x),c=M(f,y,n,t,x);let v=e.prevZ,s=e.nextZ;for(;v&&v.z>=p&&s&&s.z<=c;){if(v!==e.prev&&v!==e.next&&w(r.x,r.y,i.x,i.y,u.x,u.y,v.x,v.y)&&h(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,s!==e.prev&&s!==e.next&&w(r.x,r.y,i.x,i.y,u.x,u.y,s.x,s.y)&&h(s.prev,s,s.next)>=0)return!1;s=s.nextZ}for(;v&&v.z>=p;){if(v!==e.prev&&v!==e.next&&w(r.x,r.y,i.x,i.y,u.x,u.y,v.x,v.y)&&h(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;s&&s.z<=c;){if(s!==e.prev&&s!==e.next&&w(r.x,r.y,i.x,i.y,u.x,u.y,s.x,s.y)&&h(s.prev,s,s.next)>=0)return!1;s=s.nextZ}return!0}function u(e,n,t,x){const r=new B(e,n,t);return x?(r.next=x.next,r.prev=x,x.next.prev=r,x.next=r):(r.prev=r,r.next=r),r}function o(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function l(e){let n=e,t=e;do{(n.x<t.x||n.x===t.x&&n.y<t.y)&&(t=n),n=n.next}while(n!==e);return t}function f(e,x,r,i){const u=new Array;for(let t=0,o=x.length;t<o;t++){const r=n(e,x[t]*i,t<o-1?x[t+1]*i:e.length,i,!1);r===r.next&&(r.steiner=!0),u.push(l(r))}u.sort(b);for(const n of u)y(n,r),r=t(r,r.next);return r}function y(e,n){if(n=p(e,n)){const x=q(n,e);t(x,x.next)}}function p(e,n){let t=n;const x=e.x,r=e.y;let i,u=-1/0;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const e=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(e<=x&&e>u){if(u=e,e===x){if(r===t.y)return t;if(r===t.next.y)return t.next}i=t.x<t.next.x?t:t.next}}t=t.next}while(t!==n);if(!i)return null;if(x===u)return i.prev;const o=i,l=i.x,f=i.y;let y,p=1/0;for(t=i.next;t!==o;)x>=t.x&&t.x>=l&&x!==t.x&&w(r<f?x:u,r,l,f,r<f?u:x,r,t.x,t.y)&&(y=Math.abs(r-t.y)/(x-t.x),(y<p||y===p&&t.x>i.x)&&g(t,e)&&(i=t,p=y)),t=t.next;return i}function c(e,n,t,x){for(let r;r!==e;r=r.next){if(r=r||e,null===r.z&&(r.z=M(r.x,r.y,n,t,x)),r.prev.next!==r||r.next.prev!==r)return r.prev.next=r,r.next.prev=r,c(e,n,t,x);r.prevZ=r.prev,r.nextZ=r.next}return e.prevZ.nextZ=null,e.prevZ=null,v(e)}function v(e){let n,t=1;for(;;){let x,r=e;e=null,n=null;let i=0;for(;r;){i++,x=r;let u=0;for(;u<t&&x;u++)x=x.nextZ;let o=t;for(;u>0||o>0&&x;){let t;0===u?(t=x,x=x.nextZ,o--):0!==o&&x?r.z<=x.z?(t=r,r=r.nextZ,u--):(t=x,x=x.nextZ,o--):(t=r,r=r.nextZ,u--),n?n.nextZ=t:e=t,t.prevZ=n,n=t}r=x}if(n.nextZ=null,t*=2,i<2)return e}}function s(e,n,t,x){const r=n&&n.length,i=r?n[0]*t:e.length;let u=Math.abs(a(e,0,i,t));if(r)for(let l=0,f=n.length;l<f;l++){const x=n[l]*t,r=l<f-1?n[l+1]*t:e.length;u-=Math.abs(a(e,x,r,t))}let o=0;for(let l=0;l<x.length;l+=3){const n=x[l]*t,r=x[l+1]*t,i=x[l+2]*t;o+=Math.abs((e[n]-e[i])*(e[r+1]-e[n+1])-(e[n]-e[r])*(e[i+1]-e[n+1]))}return 0===u&&0===o?0:Math.abs((o-u)/u)}function h(e,n,t){return(n.y-e.y)*(t.x-n.x)-(n.x-e.x)*(t.y-n.y)}function d(e,n,t,x){return!!(z(e,n)&&z(t,x)||z(e,x)&&z(t,n))||h(e,n,t)>0!=h(e,n,x)>0&&h(t,x,e)>0!=h(t,x,n)>0}function Z(e,n){let t=e;do{if(t.index!==e.index&&t.next.index!==e.index&&t.index!==n.index&&t.next.index!==n.index&&d(t,t.next,e,n))return!0;t=t.next}while(t!==e);return!1}function a(e,n,t,x){let r=0;for(let i=n,u=t-x;i<t;i+=x)r+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return r}function w(e,n,t,x,r,i,u,o){return(r-u)*(n-o)-(e-u)*(i-o)>=0&&(e-u)*(x-o)-(t-u)*(n-o)>=0&&(t-u)*(i-o)-(r-u)*(x-o)>=0}function g(e,n){return h(e.prev,e,e.next)<0?h(e,n,e.next)>=0&&h(e,e.prev,n)>=0:h(e,n,e.prev)<0||h(e,e.next,n)<0}function M(e,n,t,x,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-x)*r)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function z(e,n){return e.x===n.x&&e.y===n.y}function b(e,n){return e.x-n.x}function m(e,n,t){let x=e;do{const r=x.prev,i=x.next.next;!z(r,i)&&d(r,x,x.next,i)&&g(r,i)&&g(i,r)&&(n.push(r.index/t),n.push(x.index/t),n.push(i.index/t),o(x),o(x.next),x=e=i),x=x.next}while(x!==e);return x}function k(e,n,r,i,u,o){let l=e;do{let e=l.next.next;for(;e!==l.prev;){if(l.index!==e.index&&A(l,e)){let f=q(l,e);return l=t(l,l.next),f=t(f,f.next),x(l,n,r,i,u,o),void x(f,n,r,i,u,o)}e=e.next}l=l.next}while(l!==e)}function A(e,n){return e.next.index!==n.index&&e.prev.index!==n.index&&!Z(e,n)&&g(e,n)&&g(n,e)&&j(e,n)}function j(e,n){let t=e,x=!1;const r=(e.x+n.x)/2,i=(e.y+n.y)/2;do{t.y>i!=t.next.y>i&&t.next.y!==t.y&&r<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(x=!x),t=t.next}while(t!==e);return x}function q(e,n){const t=new B(e.index,e.x,e.y),x=new B(n.index,n.x,n.y),r=e.next,i=n.prev;return e.next=n,n.prev=e,t.next=r,r.prev=t,x.next=t,t.prev=x,i.next=x,x.prev=i,x}class B{constructor(e,n,t){this.index=e,this.x=n,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}}export{s as deviation,e as earcut};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{RgbaFloatEncoding as a}from\"../util/RgbaFloatEncoding.glsl.js\";function t(t){t.fragment.include(a),t.fragment.uniforms.add(\"uShadowMapTex\",\"sampler2D\"),t.fragment.uniforms.add(\"uShadowMapNum\",\"int\"),t.fragment.uniforms.add(\"uShadowMapDistance\",\"vec4\"),t.fragment.uniforms.add(\"uShadowMapMatrix\",\"mat4\",4),t.fragment.uniforms.add(\"uDepthHalfPixelSz\",\"float\"),t.fragment.code.add(e`\n    int chooseCascade(float _linearDepth, out mat4 mat) {\n      vec4 distance = uShadowMapDistance;\n      float depth = _linearDepth;\n\n      //choose correct cascade\n      int i = depth < distance[1] ? 0 : depth < distance[2] ? 1 : depth < distance[3] ? 2 : 3;\n\n      mat = i == 0 ? uShadowMapMatrix[0] : i == 1 ? uShadowMapMatrix[1] : i == 2 ? uShadowMapMatrix[2] : uShadowMapMatrix[3];\n\n      return i;\n    }\n\n    vec3 lightSpacePosition(vec3 _vpos, mat4 mat) {\n      vec4 lv = mat * vec4(_vpos, 1.0);\n      lv.xy /= lv.w;\n      return 0.5 * lv.xyz + vec3(0.5);\n    }\n\n    vec2 cascadeCoordinates(int i, vec3 lvpos) {\n      return vec2(float(i - 2 * (i / 2)) * 0.5, float(i / 2) * 0.5) + 0.5 * lvpos.xy;\n    }\n\n    float readShadowMapDepth(vec2 uv, sampler2D _depthTex) {\n      return rgba2float(texture2D(_depthTex, uv));\n    }\n\n    float posIsInShadow(vec2 uv, vec3 lvpos, sampler2D _depthTex) {\n      return readShadowMapDepth(uv, _depthTex) < lvpos.z ? 1.0 : 0.0;\n    }\n\n    float filterShadow(vec2 uv, vec3 lvpos, float halfPixelSize, sampler2D _depthTex) {\n      float texSize = 0.5 / halfPixelSize;\n\n      // filter, offset by half pixels\n      vec2 st = fract((vec2(halfPixelSize) + uv) * texSize);\n\n      float s00 = posIsInShadow(uv + vec2(-halfPixelSize, -halfPixelSize), lvpos, _depthTex);\n      float s10 = posIsInShadow(uv + vec2(halfPixelSize, -halfPixelSize), lvpos, _depthTex);\n      float s11 = posIsInShadow(uv + vec2(halfPixelSize, halfPixelSize), lvpos, _depthTex);\n      float s01 = posIsInShadow(uv + vec2(-halfPixelSize, halfPixelSize), lvpos, _depthTex);\n\n      return mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n    }\n\n    float readShadowMap(const in vec3 _vpos, float _linearDepth) {\n      mat4 mat;\n      int i = chooseCascade(_linearDepth, mat);\n\n      if (i >= uShadowMapNum) { return 0.0; }\n\n      vec3 lvpos = lightSpacePosition(_vpos, mat);\n\n      // vertex completely outside? -> no shadow\n      if (lvpos.z >= 1.0) { return 0.0; }\n      if (lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) { return 0.0; }\n\n      // calc coord in cascade texture\n      vec2 uv = cascadeCoordinates(i, lvpos);\n\n      return filterShadow(uv, lvpos, uDepthHalfPixelSz, uShadowMapTex);\n    }\n  `)}!function(e){function a(e,a,t){a.shadowMappingEnabled&&(a.shadowMap.bind(e,t),a.shadowMap.bindView(e,a.origin))}function t(e,a,t){a.shadowMappingEnabled&&a.shadowMap.bindView(e,t)}function o(e,a){a.shadowMappingEnabled&&a.shadowMap.bindView(e,a.origin)}e.bindUniforms=a,e.bindViewCustomOrigin=t,e.bindView=o}(t||(t={}));export{t as ReadShadowMap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../shaderModules/interfaces.js\";function a(a,r){0===r.output&&r.receiveShadows?(a.varyings.add(\"linearDepth\",\"float\"),a.vertex.code.add(e`\n      void forwardLinearDepth() { linearDepth = gl_Position.w; }\n    `)):1===r.output||3===r.output?(a.varyings.add(\"linearDepth\",\"float\"),a.vertex.uniforms.add(\"cameraNearFar\",\"vec2\"),a.vertex.code.add(e`\n      void forwardLinearDepth() {\n        linearDepth = (-position_view().z - cameraNearFar[0]) / (cameraNearFar[1] - cameraNearFar[0]);\n      }\n    `)):a.vertex.code.add(e`\n      void forwardLinearDepth() {}\n    `)}export{a as ForwardLinearDepth};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){const a=t.fragment.code;a.add(e`\n    vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)\n    {\n      return ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;\n    }\n    `),a.add(e`\n    float integratedRadiance(float cosTheta2, float roughness)\n    {\n      return (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);\n    }\n    `),a.add(e`\n    vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)\n    {\n      float cosTheta2 = 1.0 - RdotNG * RdotNG;\n      float intRadTheta = integratedRadiance(cosTheta2, roughness);\n\n      // Calculate the integrated directional radiance of the ground and the sky\n      float ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;\n      float sky = 2.0 - ground;\n      return (ground * ambientGround + sky * ambientSky) * 0.5;\n    }\n    `)}export{t as AnalyticalSkyModel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";import{PiUtils as o}from\"./PiUtils.glsl.js\";import{AnalyticalSkyModel as t}from\"./AnalyticalSkyModel.glsl.js\";function n(n,a){const r=n.fragment.code;n.include(o),3===a.pbrMode||4===a.pbrMode?(r.add(e`\n    struct PBRShadingWater\n    {\n        float NdotL;   // cos angle between normal and light direction\n        float NdotV;   // cos angle between normal and view direction\n        float NdotH;   // cos angle between normal and half vector\n        float VdotH;   // cos angle between view direction and half vector\n        float LdotH;   // cos angle between light direction and half vector\n        float VdotN;   // cos angle between view direction and normal vector\n    };\n\n    float dtrExponent = ${a.useCustomDTRExponentForWater?\"2.2\":\"2.0\"};\n    `),r.add(e`\n    vec3 fresnelReflection(float angle, vec3 f0, float f90) {\n      return f0 + (f90 - f0) * pow(1.0 - angle, 5.0);\n    }\n    `),r.add(e`\n    float normalDistributionWater(float NdotH, float roughness)\n    {\n      float r2 = roughness * roughness;\n      float NdotH2 = NdotH * NdotH;\n      float denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;\n      return r2 / denom;\n    }\n    `),r.add(e`\n    float geometricOcclusionKelemen(float LoH)\n    {\n        return 0.25 / (LoH * LoH);\n    }\n    `),r.add(e`\n    vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)\n    {\n      vec3  F = fresnelReflection(props.VdotH, F0, F0Max);\n      float dSun = normalDistributionWater(props.NdotH, roughness);\n      float V = geometricOcclusionKelemen(props.LdotH);\n\n      float diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);\n      float strengthSunHaze  = 1.2;\n      float dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze)*strengthSunHaze;\n\n      return ((dSun + dSunHaze) * V) * F;\n    }\n\n    vec3 tonemapACES(const vec3 x) {\n      return (x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14);\n    }\n    `)):1!==a.pbrMode&&2!==a.pbrMode||(n.include(t),r.add(e`\n    struct PBRShadingInfo\n    {\n        float NdotL;                  // cos angle between normal and light direction\n        float NdotV;                  // cos angle between normal and view direction\n        float NdotH;                  // cos angle between normal and half vector\n        float VdotH;                  // cos angle between view direction and half vector\n        float LdotH;                  // cos angle between view light direction and half vector\n        float NdotNG;                 // cos angle between normal and normal of the ground\n        float RdotNG;                 // cos angle between view direction reflected of the normal and normal of the ground\n        float NdotAmbDir;             // cos angle between view direction and the fill light in ambient illumination\n        float NdotH_Horizon;          // cos angle between normal and half vector defined with horizon illumination\n        vec3 skyRadianceToSurface;         // integrated radiance of the sky based on the surface roughness (used for specular reflection)\n        vec3 groundRadianceToSurface;      // integrated radiance of the ground based on the surface roughness (used for specular reflection)\n        vec3 skyIrradianceToSurface;       // irradiance of the sky (used for diffuse reflection)\n        vec3 groundIrradianceToSurface;    // irradiance of the ground (used for diffuse reflection)\n\n        float averageAmbientRadiance;      // average ambient radiance used to deduce black level in gamut mapping\n        float ssao;                   // ssao coefficient\n        vec3 albedoLinear;            // linear color of the albedo\n        vec3 f0;                      // fresnel value at normal incident light\n        vec3 f90;                     // fresnel value at 90o of incident light\n\n        vec3 diffuseColor;            // diffuse color of the material used in environment illumination\n        float metalness;              // metalness of the material\n        float roughness;              // roughness of the material\n    };\n    `),r.add(e`\n    float normalDistribution(float NdotH, float roughness)\n    {\n        float a = NdotH * roughness;\n        float b = roughness / (1.0 - NdotH * NdotH + a * a);\n        return b * b * INV_PI;\n    }\n    `),r.add(e`\n    const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);\n    const vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);\n    const vec2 c2 = vec2(-1.04, 1.04);\n\n    vec2 prefilteredDFGAnalytical(float roughness, float NdotV) {\n        vec4 r = roughness * c0 + c1;\n        float a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;\n        return c2 * a004 + r.zw;\n    }\n    `),r.add(e`\n    vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {\n      vec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);\n      vec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);\n\n      // From diffuse illumination calculate reflected color\n      vec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;\n\n      // From specular illumination calculate reflected color\n      vec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);\n      vec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;\n      vec3 specularComponent = specularColor * indirectSpecular;\n\n      return (diffuseComponent + specularComponent);\n    }\n    `),r.add(e`\n    float gamutMapChanel(float x, vec2 p){\n      return (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );\n    }`),r.add(e`\n    vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){\n      vec3 outColor;\n      vec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));\n      outColor.x = gamutMapChanel(inColor.x, p) ;\n      outColor.y = gamutMapChanel(inColor.y, p) ;\n      outColor.z = gamutMapChanel(inColor.z, p) ;\n      return outColor;\n    }\n    `))}export{n as PhysicallyBasedRendering};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{isSome as e,isNone as t}from\"../../../../core/maybe.js\";import\"../../../../chunks/builtins.js\";import\"../../../webgl/checkWebGLError.js\";import r from\"../../../webgl/Texture.js\";import\"../../../webgl/FramebufferObject.js\";class n{constructor(){this.cache=new Map}dispose(){this.cache.forEach((t=>{e(t.texture)&&(t.texture.dispose(),t.texture=null)})),this.cache.clear()}acquire(e){if(t(e))return null;const n=this.patternId(e),i=this.cache.get(n);if(i)return i.refCount++,i.bind;const s=2,o=this.patternToTextureData(e,2),u=o.length/s,c={refCount:1,texture:null,bind:(e,n)=>(t(c.texture)&&(c.texture=new r(e,{width:o.length,height:1,internalFormat:6406,pixelFormat:6406,dataType:5121,wrapMode:33071},o)),e.bindTexture(c.texture,n),u)};return this.cache.set(n,c),c.bind}release(r){if(t(r))return;const n=this.patternId(r),i=this.cache.get(n);i&&(i.refCount--,0===i.refCount&&(e(i.texture)&&i.texture.dispose(),this.cache.delete(n)))}swap(e,t){const r=this.acquire(t);return this.release(e),r}patternId(e){return e.join(\",\")}patternToTextureData(e,t){const r=e.reduce(((e,t)=>e+t))*t,n=new Uint8Array(r);let i=!0,s=0;for(const o of e){for(let e=0;e<o*t;e++)n[s++]=i?255:0;i=!i}return n}}function i(e){return t(e)?e:e.slice()}function s(e){return[e,e]}export{n as StippleTextureRepository,i as createStipplePattern,s as createStipplePatternSimple};\n"],"sourceRoot":""}