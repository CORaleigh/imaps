(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[39],{674:function(e,t,n){},676:function(e,t,n){},677:function(e,t,n){},678:function(e,t,n){},679:function(e,t,n){},680:function(e,t,n){},681:function(e,t,n){},682:function(e,t,n){},683:function(e,t,n){},684:function(e,t,n){},685:function(e,t,n){var i={"./calcite-accordion_2.entry.js":[759,104],"./calcite-action_5.entry.js":[760,75],"./calcite-alert.entry.js":[761,105],"./calcite-avatar.entry.js":[762,106],"./calcite-block_2.entry.js":[763,74],"./calcite-button.entry.js":[764,137],"./calcite-card.entry.js":[765,107],"./calcite-checkbox.entry.js":[766,86],"./calcite-chip.entry.js":[767,108],"./calcite-color-picker_3.entry.js":[768,76],"./calcite-combobox_3.entry.js":[769,11,63],"./calcite-date-picker_5.entry.js":[770,11,102],"./calcite-dropdown_3.entry.js":[771,11,138],"./calcite-fab.entry.js":[772,139],"./calcite-filter.entry.js":[773,64],"./calcite-flow_2.entry.js":[774,84],"./calcite-graph.entry.js":[775,140],"./calcite-handle.entry.js":[776,246],"./calcite-icon.entry.js":[777,141],"./calcite-inline-editable.entry.js":[778,142],"./calcite-input-message.entry.js":[779,143],"./calcite-input.entry.js":[780,109],"./calcite-label.entry.js":[781,144],"./calcite-link.entry.js":[782,145],"./calcite-loader.entry.js":[783,146],"./calcite-modal.entry.js":[784,110],"./calcite-notice.entry.js":[785,111],"./calcite-option_3.entry.js":[786,147],"./calcite-pagination.entry.js":[787,148],"./calcite-pick-list-group.entry.js":[788,85],"./calcite-pick-list-item.entry.js":[789,87],"./calcite-pick-list.entry.js":[790,61],"./calcite-popover_2.entry.js":[791,11,112],"./calcite-progress.entry.js":[792,247],"./calcite-radio-button-group.entry.js":[793,248],"./calcite-radio-button.entry.js":[794,88],"./calcite-radio-group_2.entry.js":[795,113],"./calcite-radio.entry.js":[796,249],"./calcite-rating.entry.js":[797,114],"./calcite-scrim.entry.js":[798,250],"./calcite-shell-center-row.entry.js":[799,115],"./calcite-shell_2.entry.js":[800,149],"./calcite-slider.entry.js":[801,89],"./calcite-sortable-list.entry.js":[802,38,251],"./calcite-split-button.entry.js":[803,150],"./calcite-stepper_2.entry.js":[804,116],"./calcite-switch.entry.js":[805,65],"./calcite-tab_4.entry.js":[806,90],"./calcite-tile-select-group.entry.js":[807,252],"./calcite-tile-select.entry.js":[808,151],"./calcite-tile.entry.js":[809,253],"./calcite-tip_3.entry.js":[810,103],"./calcite-tooltip_2.entry.js":[811,11,117],"./calcite-tree_2.entry.js":[812,118],"./calcite-value-list-item.entry.js":[813,77],"./calcite-value-list.entry.js":[814,38,62]};function r(e){if(!n.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(r)}))}r.keys=function(){return Object.keys(i)},r.id=685,e.exports=r},686:function(e,t,n){"use strict";n.r(t);var i=n(7),r=n.n(i),a=n(16),c=n(47),l=n.n(c),o=n(170),s=n.n(o),u=(n(674),n(29)),d=n(32),p=n(505),f=n(317),b=n(36),m=function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null);return Object(c.useEffect)((function(){var i=[],r=new p.a({view:e.view,maxSuggestions:30,searchAllEnabled:!0,popupEnabled:!1,container:t.current}),a=new f.a({view:e.view,container:n.current});return i.push(r.on("search-complete",(function(e){e.results[0].results.forEach((function(e){a.graphic=e.feature}))}))),i.push(r.allSources.on("after-add",(function(e){e.item.layer&&(e.item.name=e.item.layer.title,e.item.placeholder=e.item.layer.title),e.item.locator&&r.allSources.remove(e.item)}))),function(){i.forEach((function(e){e.remove()})),a&&a.destroy(),r&&r.destroy()}}),[e.view]),Object(b.jsxs)("div",{className:"panel",children:[Object(b.jsx)("div",{ref:t}),Object(b.jsx)("div",{ref:n})]})},h=n(427),v=n(638),y=n(508),j=n(646),g=n(649),O=n(650),E=n(219),x=n(299),w=n(113),S=function(e){var t=Object(c.useRef)(null),n=Object(c.useState)(!1),i=Object(u.a)(n,2),r=i[0],a=i[1],l=Object(c.useState)(),o=Object(u.a)(l,2),s=o[0],d=o[1],p=Object(c.useState)(),f=Object(u.a)(p,2),m=f[0],S=f[1],A=Object(c.useRef)(),I=Object(c.useRef)([]),T=function(){if(console.log(document.visibilityState),"hidden"===document.visibilityState){var e,t,n,i;null===(e=A.current)||void 0===e||e.map.removeMany(null===(t=A.current)||void 0===t?void 0:t.map.allLayers.filter((function(e){return"group"===e.type&&!e.layers.length})).toArray());var r=(null===(n=A.current)||void 0===n?void 0:n.map).toJSON();r.initialState.viewpoint.targetGeometry=null===(i=A.current)||void 0===i?void 0:i.extent,window.localStorage.setItem("imaps",JSON.stringify(r))}};return Object(c.useEffect)((function(){var n={id:e.id},i={zoom:e.zoom};return r||function(e,t,n){var i=new h.a({portalItem:t});return n.map=i,n.container=e,new v.a(n)}(t.current,n,i).when((function(t){var n,i;!function(e){if(window.localStorage.getItem("imaps")){var t=h.a.fromJSON(JSON.parse(window.localStorage.getItem("imaps")));t.load().then((function(){e.map.allLayers.forEach((function(e){var n=t.allLayers.find((function(t){return e.id===t.id}));e.visible=null===n||void 0===n?void 0:n.visible,e.opacity=null===n||void 0===n?void 0:n.opacity})),e.map.basemap=t.basemap,setTimeout((function(){e.goTo(t.initialViewProperties.viewpoint.targetGeometry.extent)}),5e3)}))}}(t),a(!0),e.initialized(t),I.current.push(function(e){var t=[],n=new g.a({view:e});e.ui.add(n,"top-left"),t.push(n);var i=new y.a({view:e});e.ui.add(i,"top-left"),t.push(i);var r=new j.a({view:e});e.ui.add(r,"top-left"),t.push(r);var a=new O.a({view:e});return e.ui.add(a,"bottom-left"),t.push(a),t}(t)),S(t),A.current=t;var r=new E.default({source:[],editingEnabled:!0,listMode:"hide",legendEnabled:!1,geometryType:"polygon",id:"selection-layer",objectIdField:"OBJECTID",fields:[{name:"OBJECTID",type:"oid"},{name:"selected",type:"small-integer"},{name:"PIN_NUM",type:"string"}],renderer:new x.a({field:"selected",defaultSymbol:new w.a({style:"none",outline:{color:[255,255,0],width:2}}),uniqueValueInfos:[{value:1,symbol:new w.a({style:"none",outline:{color:[255,255,0],width:2}}),label:"single"},{value:0,symbol:new w.a({style:"none",outline:{color:[0,206,209],width:2}}),label:"multiple"}]})});d(r),null===(n=A.current)||void 0===n||n.map.add(r),null===(i=A.current)||void 0===i||i.on("hold",(function(t){e.geometryChanged(t.mapPoint)}))})),window.addEventListener("visibilitychange",T),function(){window.removeEventListener("visibilitychange",T),m&&m.destroy(),I.current.forEach((function(e){e&&e.destroy()}))}}),[]),Object(c.useEffect)((function(){e.selectedProperties&&(1===e.selectedProperties.length&&e.selectedProperties[0].setAttribute("selected",1),null===s||void 0===s||s.queryFeatures({where:"1=1",returnGeometry:!0}).then((function(t){null===s||void 0===s||s.applyEdits({deleteFeatures:t.features}).then((function(){e.selectedProperties,null===s||void 0===s||s.applyEdits({addFeatures:e.selectedProperties}).then((function(e){console.log(e)}))}))})))}),[e.selectedProperties]),Object(b.jsx)("div",{ref:t})},A=n(172),I=n(262),T=n(428),N=n(364),D=n(206),C=n(24),k=[{name:"mailing-address",title:"mailing-address",expression:"When(IsEmpty($feature.ADDR3),$feature.ADDR1 + TextFormatting.NewLine + $feature.ADDR2,$feature.ADDR1 + TextFormatting.NewLine + $feature.ADDR2 + TextFormatting.NewLine + $feature.ADDR3)"},{name:"property-values",title:"property-values",expression:'"Building Value"+TextFormatting.NewLine+"$"+$feature.BLDG_VAL+TextFormatting.NewLine+"Land Value"+TextFormatting.NewLine+"$"+$feature.LAND_VAL+TextFormatting.NewLine+"Total Value"+TextFormatting.NewLine+"$"+$feature.TOTAL_VALUE_ASSD'},{name:"pin",title:"PIN",expression:"var num = $feature.PIN_NUM;var ext = $feature.PIN_EXT;return When(ext == '000',num,num+' '+ext);"},{name:"build_val",title:"Building Value",expression:"var value = $feature.BLDG_VAL;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));"},{name:"land_val",title:"Land Value",expression:"var value = $feature.LAND_VAL;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));"},{name:"total_val",title:"Total Value",expression:"var value = $feature.TOTAL_VALUE_ASSD;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));"},{name:"sale_price",title:"Sale Price",expression:"var value = $feature.TOTSALPRICE;When(IsEmpty(value),'--', '$'+Text(value, '#,###'));"},{name:"city",title:"City",expression:"var city = $feature.CITY_DECODE;When(IsEmpty(city),'Unincorporated', Proper(city));"},{name:"township",title:"Township",expression:"var ts = $feature.TOWNSHIP_DECODE;When(IsEmpty(ts),'None', Proper(ts));"},{name:"jurisdiction",title:"Jurisdiction",expression:"var juris = $feature.PLANNING_JURISDICTION;When(juris == 'RA', 'Raleigh',juris == 'CA', 'Cary',juris == 'AP', 'Apex',juris == 'AN', 'Angier',juris == 'CL', 'Clayton',juris == 'DU', 'Durham',juris == 'FV', 'Fuquay-Varina',juris == 'GA', 'Garner',juris == 'HS', 'Holly Springs',juris == 'KN', 'Knightdale',juris == 'MO', 'Morrisville',juris == 'RO', 'Rolesville',juris == 'WF', 'Wake Forest',juris == 'WE', 'Wendell',juris == 'ZB', 'Zebulon',juris == 'WC', 'Wake County', 'Wake County');"},{name:"general",title:"general",expression:'"PIN"+TextFormatting.NewLine+$feature.PIN_NUM+" "+$feature.PIN_EXT+TextFormatting.NewLine+"REID"+TextFormatting.NewLine+$feature.REID+TextFormatting.NewLine+"City"+TextFormatting.NewLine+Proper($feature.CITY_DECODE)+TextFormatting.NewLine+"Jurisdiction"+TextFormatting.NewLine+$feature.PLANNING_JURISDICTION+TextFormatting.NewLine+"Township"+TextFormatting.NewLine+Proper($feature.TOWNSHIP_DECODE)'}],R=[{group:{title:"Electoral",layers:["Precincts","Congressional Districts","NC House of Representatives Districts","NC Senate Districts","School Board Districts","Board of Commissioners Districts","Superior Court Districts","Raleigh City Council","Morrisville Town Council Districts"]}},{group:{title:"Environmental",layers:["Special Flood Hazard Areas - FloodPlain - Floodplain","Soils","Critical Watersheds","Water Supply Watersheds"]}}],_=function(e){var t,n=e.detail.requestedAccordionItem.getBoundingClientRect(),i=null===(t=document.querySelector("#featureWidget"))||void 0===t?void 0:t.parentElement;setTimeout((function(){null===i||void 0===i||i.scrollTo({top:n.top+i.scrollTop-155,behavior:"smooth"})}))},F=function(e){var t;return e.graphic.layer.queryRelatedFeatures({relationshipId:null===(t=e.graphic.layer.relationships.find((function(e){return"CONDO_BOOKS"===e.name})))||void 0===t?void 0:t.id,objectIds:[e.graphic.getAttribute("OBJECTID")],outFields:["BOM_DOC_NUM","DEED_DOC_NUM"]}).then((function(t){var n=t[e.graphic.getAttribute("OBJECTID")].features[0].getAttribute("DEED_DOC_NUM"),i=t[e.graphic.getAttribute("OBJECTID")].features[0].getAttribute("BOM_DOC_NUM"),r=document.createElement("div");if(r.setAttribute("style","display: flex;flex-direction: row;"),n){var a=document.createElement("calcite-button");a.setAttribute("scale","s"),a.setAttribute("target","_blank"),a.setAttribute("round",""),a.setAttribute("icon-start","file-text"),a.setAttribute("href","http://services.wakegov.com/booksweb/pdfview.aspx?docid="+n+"&RecordDate="),a.textContent="Deed",r.append(a)}if(i){var c=document.createElement("calcite-button");c.setAttribute("scale","s"),c.setAttribute("target","_blank"),c.setAttribute("round",""),c.setAttribute("icon-start","map"),c.setAttribute("href","http://services.wakegov.com/booksweb/pdfview.aspx?docid="+i+"&RecordDate="),c.textContent="Book of Maps",r.append(c)}return r}))};function L(e){var t=[];e.fields.forEach((function(e){t.push(new D.a({fieldName:e.name,label:e.alias,visible:["SITE_ADDRESS","OWNER","PIN_NUM","PIN_EXT","REID"].includes(e.name)}))}));var n=t.find((function(e){return"PIN_EXT"===e.fieldName})),i=t.find((function(e){return"PIN_NUM"===e.fieldName})),r=t.find((function(e){return"REID"===e.fieldName})),a=t.find((function(e){return"OWNER"===e.fieldName})),c=t.find((function(e){return"SITE_ADDRESS"===e.fieldName}));return(t=t.filter((function(e){return!["SITE_ADDRESS","OWNER","PIN_NUM","PIN_EXT","REID"].includes(e.fieldName)}))).unshift(n),t.unshift(i),t.unshift(r),t.unshift(a),t.unshift(c),t}var P,B,M,U,W,q,J=function(e,t){var n=e.map.allLayers.find((function(e){return e.title.includes("Property")&&"feature"===e.type}));return new A.a({expressionInfos:k,fieldInfos:L(t).map((function(e){return{fieldName:e.fieldName,label:e.label,visible:["SITE_ADDRESS","OWNER","PIN_NUM","PIN_EXT","REID"].includes(e.fieldName)}})),content:[{type:"text",text:"<h1>{SITE_ADDRESS}</h1>"},new I.a({outFields:["*"],creator:function(e){var t;return null===(t=e.graphic.layer.relationships.find((function(e){return e.name.includes("PROPERTY")})))||void 0===t||t.relatedTableId,null===n||void 0===n?void 0:n.queryFeatures({where:"REID = '".concat(e.graphic.getAttribute("REID"),"'"),outFields:["OBJECTID","PIN_NUM"],returnGeometry:!0,returnCentroid:!0,outSpatialReference:{wkid:4326}}).then((function(t){return new T.a({url:"https://maps.raleighnc.gov/arcgis/rest/services/Locators/Locator/GeocodeServer",outSpatialReference:{wkid:4326}}).addressToLocations({address:{singleLine:e.graphic.getAttribute("SITE_ADDRESS")},outFields:["*"]}).then((function(n){if(n.length){var i=n[0];if(i){var r,a,c,l,o,s=N.d(i.location,{x:(null===(r=t.features[0])||void 0===r?void 0:r.geometry).centroid.longitude,y:(null===(a=t.features[0])||void 0===a?void 0:a.geometry).centroid.latitude,spatialReference:{wkid:4326}}),u=(null===(c=t.features[0])||void 0===c?void 0:c.geometry).centroid.latitude+","+(null===(l=t.features[0])||void 0===l?void 0:l.geometry).centroid.longitude,d=document.createElement("div");d.setAttribute("style","display: flex;flex-direction: row;");var p=document.createElement("calcite-button");p.setAttribute("scale","s"),p.setAttribute("target","_blank"),p.setAttribute("round",""),p.setAttribute("icon-start","person"),p.setAttribute("href","https://maps.google.com?layer=c&cbll="+u+"&cbp=0,"+(null===(o=s.azimuth)||void 0===o?void 0:o.toString())+",0,0,0"),p.textContent="Street View",d.append(p);var f=document.createElement("calcite-button");return f.setAttribute("scale","s"),f.setAttribute("target","_blank"),f.setAttribute("href","http://services.wakegov.com/realestate/Account.asp?id="+e.graphic.getAttribute("REID")),f.setAttribute("round",""),f.setAttribute("icon-start","locator"),f.textContent="Tax Page",d.append(f),d}}}))}))}}),new I.a({outFields:["PIN_NUM"],creator:function(t){return function(e,t){return t.map.allLayers.find((function(e){return e.title.includes("Wells")})).queryFeatures({where:"PIN_NUM = '".concat(e.graphic.attributes.PIN_NUM,"'"),returnGeometry:!1}).then((function(n){var i=document.createElement("div");if(n.features.length){var r=n.features[0].getAttribute("PIN_NUM"),a=document.createElement("calcite-button");a.setAttribute("scale","s"),a.setAttribute("target","_blank"),a.setAttribute("round",""),a.setAttribute("icon-start","link"),a.setAttribute("href","https://maps.wakegov.com/water-analysis/index.html#/?pin="+r),a.textContent="Wells",i.append(a)}return t.map.allLayers.find((function(e){return e.title.includes("Septic")})).queryFeatures({where:"PIN_NUM = '".concat(e.graphic.attributes.PIN_NUM,"'"),returnGeometry:!1}).then((function(e){if(e.features.length){var t=e.features[0].getAttribute("PIN_NUM"),n=document.createElement("calcite-button");n.setAttribute("scale","s"),n.setAttribute("target","_blank"),n.setAttribute("round",""),n.setAttribute("href","https://maps.wakegov.com/septic/index.html#/?pin="+t),n.setAttribute("icon-start","link"),n.textContent="Septic",i.append(n)}})),i}))}(t,e)}}),{type:"text",text:"<h2>General</h1>"},{type:"fields",fieldInfos:[{fieldName:"expression/pin",label:"PIN"},{fieldName:"REID",label:"REID"},{fieldName:"expression/city",label:"City"},{fieldName:"expression/jurisdiction",label:"Jurisdiction"},{fieldName:"expression/township",label:"Township"}]},{type:"text",text:"<h2>Owner</h1>"},{type:"text",text:"{OWNER}<br/>{expression/mailing-address}"},{type:"text",text:"<h2>Valuation</h1>"},{type:"fields",fieldInfos:[{fieldName:"expression/build_val"},{fieldName:"expression/land_val"},{fieldName:"expression/total_val"},{fieldName:"BILLING_CLASS_DECODE",label:"Billing Class"}]},{type:"text",text:"<h2>Last Sale</h1>"},{type:"fields",fieldInfos:[{fieldName:"SALE_DATE",format:{dateFormat:"short-date"},label:"Date Sold"},{fieldName:"expression/sale_price"}]},{type:"text",text:"<h2>Deeds</h1>"},{type:"fields",fieldInfos:[{fieldName:"DEED_BOOK",label:"Book"},{fieldName:"DEED_PAGE",label:"Page"},{fieldName:"DEED_DATE",format:{dateFormat:"short-date"},label:"Deed Date"},{fieldName:"DEED_ACRES",format:{places:2},label:"Deed Acres"},{fieldName:"PROPDESC",label:"Legal Description"}]},new I.a({outFields:["OBJECTID","REID"],creator:F}),{type:"text",text:"<h2>Building</h1>"},{type:"fields",fieldInfos:[{fieldName:"HEATEDAREA",format:{digitSeparator:!0},label:"Heated Area"},{fieldName:"YEAR_BUILT",format:{digitSeparator:!1},label:"Year Built"},{fieldName:"DESIGN_STYLE_DECODE",label:"Design/Style"},{fieldName:"TOTSTRUCTS",label:"Total Structures"},{fieldName:"TOTUNITS",label:"Total Units"}]},{type:"media",mediaInfos:[]},{type:"text",text:"<h2>Services</h1>"},new I.a({outFields:["*"],creator:function(t){var n=document.createElement("calcite-accordion");n.setAttribute("selection-mode","single"),R.forEach((function(e){var t=document.createElement("calcite-accordion-item");t.setAttribute("item-title",e.group.title),n.append(t)}));var i=t.graphic;return n.addEventListener("calciteAccordionChange",(function(t){!function(e,t,n){if(!n.detail.requestedAccordionItem.hasAttribute("active")&&0===n.detail.requestedAccordionItem.childElementCount){var i=document.createElement("calcite-loader");i.setAttribute("inline","");var r=n.detail.requestedAccordionItem.shadowRoot.querySelector(".accordion-item-header");r.insertBefore(i,r.childNodes[1]);var a=R.find((function(e){return e.group.title===n.detail.requestedAccordionItem.getAttribute("item-title")})),c=[];return a&&t.map.allLayers.filter((function(e){return a.group.layers.includes(e.title)})).forEach((function(t){c.push(t.queryFeatures({geometry:e.geometry,outFields:["*"],returnGeometry:!0}))})),c.length?Promise.all(c).then((function(e){e.forEach((function(e){e.features.length&&e.features.forEach((function(e){var t=document.createElement("div");n.detail.requestedAccordionItem.append(t),new f.a({container:t,graphic:e})}))})),_(n),r.removeChild(i)})):(r.removeChild(i),"No services found.")}_(n)}(i,e,t)}),{passive:!0}),n}})]})},$=(n(676),function(e){var t=Object(c.useRef)(null),n=Object(c.useState)(!1),i=Object(u.a)(n,2),r=i[0],a=i[1],l=Object(c.useRef)(),o=Object(c.useState)(),s=Object(u.a)(o,2),d=s[0],p=s[1];return Object(c.useEffect)((function(){return!r&&e.view&&(p(e.view),l.current=new f.a({container:t.current,view:d}),a(!0)),function(){console.log("cleanup")}})),Object(c.useEffect)((function(){var t;l.current&&e.feature&&(t=e.feature,C.c((function(e){var n,i=null===(n=t.layer)||void 0===n?void 0:n.relationships.find((function(e){return"CONDO_PHOTOS"===e.name})),r=[],a=t.layer;null===a||void 0===a||a.queryRelatedFeatures({relationshipId:null===i||void 0===i?void 0:i.id,objectIds:[t.getAttribute("OBJECTID")],outFields:["*"]}).then((function(t){for(var n in t)t[n].features.forEach((function(e){r.push({title:"",type:"image",caption:"",value:{sourceURL:"https://services.wakegov.com/realestate/photos/mvideo/".concat(e.getAttribute("IMAGEDIR"),"/").concat(e.getAttribute("IMAGENAME"))}})}));e(r)}))}))).then((function(t){e.feature.popupTemplate=J(d,e.feature.layer),e.feature.popupTemplate.content.find((function(e){return"media"===(null===e||void 0===e?void 0:e.type)})).mediaInfos=t,l.current&&(l.current.graphic=e.feature),requestAnimationFrame((function(){var e,t;null===(e=document.querySelector(".esri-feature"))||void 0===e||null===(t=e.parentElement)||void 0===t||t.scrollTo({top:0,behavior:"smooth"})}))}))}),[e.feature]),Object(b.jsx)("div",{ref:t})}),G=n(639),H=n(536),z=function(e){var t=[],n=["OBJECTID","PARCELPK","GlobalID"],i=["SITE_ADDRESS","OWNER","REID","PIN_NUM","PIN_EXT"];return i.forEach((function(n){var r=e.fields.find((function(e){return e.name===n}));t.push(new H.a({alias:r.alias,name:r.name,field:r,layer:e,visible:i.includes(r.name)}))})),e.fields.forEach((function(r){n.includes(r.name)||i.includes(r.name)||t.push(new H.a({alias:r.alias,name:r.name,field:r,layer:e,visible:i.includes(r.name)}))})),t},V=function(){var e=Object(a.a)(r.a.mark((function e(t,n,i){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.load();case 2:return a=new G.a({layer:i,container:t.current,fieldConfigs:z(i),view:n}),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),K=function(e){var t=Object(c.useRef)(null),n=Object(c.useState)(!1),i=Object(u.a)(n,2),r=i[0],a=i[1],l=Object(c.useState)(),o=Object(u.a)(l,2),s=o[0],d=o[1];return Object(c.useEffect)((function(){return r||V(t,e.view,e.layer).then((function(t){d(t),a(!0),e.filter?t.layer.definitionExpression=e.filter:t.layer.definitionExpression="OBJECTID IS NOT NULL",t.on("selection-change",(function(n){n.added.length&&(t.clearSelection(),e.featureSelected(n.added[0].feature))}))})),function(){}}),[]),Object(c.useEffect)((function(){s&&(s.layer.definitionExpression=e.filter)}),[e.filter]),Object(b.jsx)("div",{ref:t})},X=(n(677),n(678),n(40)),Y=n(329),Z=function(e,t,n,i,r,a,c,l,o){return new Y.a({placeholder:e,name:t,maxSuggestions:6,getSuggestions:function(e){return function(e,t,n,i,r,a,c,l){var o=[];return a.forEach((function(t){c?o.push("".concat(t," LIKE '").concat(e.suggestTerm.toUpperCase(),"%'")):o.push("".concat(t," LIKE '%").concat(e.suggestTerm.toUpperCase(),"%'"))})),n.queryFeatures({returnDistinctValues:!0,outFields:i,returnGeometry:!1,orderByFields:r,num:l.activeSource?50:6,where:o.join(" OR ")}).then((function(n){return n.features.map((function(n){return{key:t,text:n.getAttribute(i[0]),sourceIndex:e.sourceIndex}}))}))}(e,t,n,i,r,a,c,o)},getResults:function(e){return n.queryFeatures({where:"".concat(r[0]," = '").concat(e.suggestResult.text.toUpperCase(),"'"),outFields:l}).then((function(e){return e.features.map((function(e){return{feature:e,name:t}}))}))}})},Q=function(e){return C.c((function(t){var n=P.relationships.find((function(e){return"CONDO_PROPERTY"===e.name}));P.queryRelatedFeatures({relationshipId:null===n||void 0===n?void 0:n.id,objectIds:e,outFields:["OBJECTID","REID"],returnGeometry:!1}).then((function(e){var n=[];for(var i in e)e[i].features.forEach((function(e){n.push(e.getAttribute("OBJECTID"))}));U.queryFeatures({objectIds:n,outFields:["*"],returnGeometry:!0,outSpatialReference:{wkid:102100}}).then((function(e){M.view.goTo(e.features),t(e.features)}))}))}))},ee=function(e,t){return C.c((function(n){var i={outFields:["*"]};""!=e?i.where=e:i.objectIds=t,P.queryFeatures(i).then((function(e){var t=[];e.features.forEach((function(e){t.push(e.getAttribute("OBJECTID"))})),Q(t).then((function(t){if(e.features.length>1&&n({properties:t,features:e.features}),1===e.features.length){var i=e.features[0];i.geometry=t[0].geometry,i.layer=P,n({properties:t,features:e.features,feature:i})}}))}))}))},te=function(e,t,n,i){return C.c((function(r){var a;e||"Owner"!==t||(e=P),!e&&["Site Address","Street Name"].includes(t)&&(e=B);var c=[];n.forEach((function(e){c.push(e.feature.getAttribute("OBJECTID"))}));var l="";4===(null===(a=e)||void 0===a?void 0:a.layerId)?(l="".concat("Street Name"===t?"FULL_STREET_NAME":"SITE_ADDRESS"," = '").concat(i,"'"),function(e,t){return C.c((function(n){var i=t.relationships.find((function(e){return"ADDRESSES_CONDO"===e.name})),r={outFields:["*"],objectIds:e,relationshipId:null===i||void 0===i?void 0:i.id};t.queryRelatedFeatures(r).then((function(e){var t=[],i=[];for(var r in e)e[r].features.forEach((function(e){t.push(e.getAttribute("OBJECTID")),i.push(e)}));Q(t).then((function(e){if(i.length>1&&n({properties:e,features:i}),1===i.length){var t=i[0];t.geometry=e[0].geometry,t.layer=P,n({properties:e,features:i,feature:t})}}))}))}))}(c,e).then((function(e){r(e)}))):ee(l,c).then((function(e){r(e)}))}))},ne=function(e){return C.c((function(t){if(!M.viewModel.selectedSuggestion){var n,i=[];if(M.activeSource)i=null===(n=M.activeSource)||void 0===n?void 0:n.searchFields;!function(e,t){var n=[];t.queryFeatures({where:e,outFields:["*"]}).then((function(e){var t;e.features.forEach((function(e){n.push(e.getAttribute("OBJECTID"))})),Q(n),e.features.length,e.features.length,null===(t=document.querySelector(".esri-search--show-suggestions"))||void 0===t||t.classList.remove("esri-search--show-suggestions")}))}(function(e,t){var n="";return e.length?(e.includes("OWNER")&&(n="OWNER like '_%".concat(t.toUpperCase(),"%'")),e.includes("PIN_NUM")&&(n="PIN_NUM like '%".concat(t.toUpperCase(),"%'")),e.includes("REID")&&(n="REID like '%".concat(t.toUpperCase(),"%'"))):n="OWNER like '%".concat(t.toUpperCase(),"%' OR REID like '").concat(t.toUpperCase(),"%' OR PIN_NUM like '").concat(t.toUpperCase(),"%'"),n}(i,e.searchTerm),P)}e.numResults&&te(e.results[0].source.layer,e.results[0].source.name,e.results[0].results,e.searchTerm).then((function(e){t(e)}))}))},ie=function(e){return 19===e.length&&"."===e[4]&&[e[7],e[10],e[15]].every((function(e){return" "===e}))&&(e=e.substring(0,4)+e.substring(8,10)+e.substring(11,15)),e},re=function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(),i=Object(c.useState)(!1),r=Object(u.a)(i,2),a=r[0],l=r[1];return Object(c.useEffect)((function(){if(!a){var i=new p.a({container:t.current,view:e.view,allPlaceholder:"Address, owner, PIN, or REID",includeDefaultSources:!1,popupEnabled:!1});n.current=i,i.sources=(r=e.addressTable,c=e.condosTable,o=e.propertyLayer,P=c,B=r,U=o,M=s=i,new X.a([Z("example: 222 W HARGETT ST","Site Address",r,["ADDRESS"],["ADDRESS"],["ADDRESS"],!0,["ADDRESS","REA_REID","OBJECTID"],s),Z("example: SMITH, JOHN","Owner",c,["OWNER"],["OWNER"],["OWNER"],!1,["OWNER","OBJECTID"],s),Z("PIN","PIN",c,["PIN_NUM"],["PIN_NUM"],["PIN_NUM"],!0,["PIN_NUM","OBJECTID"],s),Z("REID","REID",c,["REID"],["REID"],["REID"],!0,["REID","OBJECTID"],s),Z("example: W HARGETT ST","Street Name",r,["STREET","ADDR_LIST"],["STREET"],["STREET","STREET_NODIR"],!1,["STREET","REA_REID","OBJECTID"],s)])),i.on("search-complete",(function(t){ne(t).then((function(t){e.searchComplete(t)}))})),i.watch("searchTerm",(function(e){e!=ie(e)&&(i.searchTerm=ie(e))})),l(!0)}var r,c,o,s;return function(){console.log("cleanup")}}),[e.view,e.addressTable,e.condosTable,e.propertyLayer,e.searchComplete]),Object(c.useEffect)((function(){ee(e.where,[]).then((function(t){e.searchComplete(t)}))}),[e.where]),Object(b.jsx)("div",{ref:t})},ae=function(e){var t=e.map((function(e){return e.getAttribute("PIN_NUM")})),n=new URLSearchParams;if(t){n.set("pins",t.toString());var i={pins:t.toString()};history.state?history.state.pins!=i.pins&&history.pushState({pins:t.toString()},"","".concat(location.pathname,"?").concat(n.toString())):history.pushState({pins:t.toString()},"","".concat(location.pathname,"?").concat(n.toString()))}},ce=function(e){var t=Object(c.useRef)({pins:""}),n=Object(c.useState)(!1),i=Object(u.a)(n,2),r=i[0],a=i[1],l=Object(c.useState)(),o=Object(u.a)(l,2),s=o[0],d=o[1],p=Object(c.useState)(),f=Object(u.a)(p,2),m=f[0],h=f[1],v=Object(c.useState)("OBJECTID IS NULL"),y=Object(u.a)(v,2),j=y[0],g=y[1],O=Object(c.useState)("OBJECTID IS NULL"),E=Object(u.a)(O,2),x=E[0],w=E[1],S=Object(c.useState)(),A=Object(u.a)(S,2),I=A[0],T=A[1],N=Object(c.useState)("list"),D=Object(u.a)(N,2),k=D[0],R=D[1],_=Object(c.useState)(),F=Object(u.a)(_,2),L=F[0],P=F[1],B=[],M=Object(c.useState)(),U=Object(u.a)(M,2),W=U[0],q=U[1],J=function(e){document.querySelector("calcite-tab-title:".concat("list"===e?"first":"last","-child")).dispatchEvent(new MouseEvent("click")),R(e)};return Object(c.useEffect)((function(){if(!r){!function(e){T(e.map.allTables.find((function(e){return e.title.includes("Condo")&&"feature"===e.type}))),P(e.map.allTables.find((function(e){return e.title.includes("Address")&&"feature"===e.type}))),q(e.map.allLayers.find((function(e){return e.title.includes("Property")&&"feature"===e.type}))),a(!0),d(e)}(e.view),document.querySelectorAll("calcite-tab-nav").forEach((function(e){e.addEventListener("calciteTabChange",(function(e){R(0===e.detail.tab?"list":"info")}))})),window.addEventListener("popstate",(function(e){e.state.pins===t.current.pins?history.back():e.state.pins&&w("PIN_NUM in ('".concat(decodeURIComponent(history.state.pins.split(",").join("','")),"')")),t.current=e.state}));var n=new URL(document.URL).searchParams.get("pins");n&&w("PIN_NUM in ('".concat(decodeURIComponent(n.split(",").join("','")),"')"))}return function(){console.log("cleanup")}}),[]),Object(c.useEffect)((function(){(function(e,t,n){return C.c((function(i){null===t||void 0===t||t.queryFeatures({geometry:n,outFields:["OBJECTID","REID","PIN_NUM"],returnGeometry:!0,outSpatialReference:null===e||void 0===e?void 0:e.spatialReference}).then((function(n){null===e||void 0===e||e.goTo(n.features);var r=n.features.map((function(e){return e.getObjectId()}));t.queryRelatedFeatures({relationshipId:0,objectIds:r,outFields:["*"]}).then((function(e){var t=[],a=[];r.forEach((function(n){var i;null===(i=e[n])||void 0===i||i.features.forEach((function(e){t.push(e.getAttribute("OBJECTID")),a.push(e)}))})),t.length?i({where:"OBJECTID in (".concat(t.toString(),")"),features:a,properties:n.features}):Object(C.r)()}))}))}))})(s,W,e.geometry).then((function(t){if(g(t.where),e.propertiesSelected(t.properties),1===t.features.length){var n,i=t.features[0];i.layer=I,i.popupTemplate=null===I||void 0===I?void 0:I.popupTemplate;var r=t.features[0];r.geometry=null===(n=t.properties.find((function(e){return e.getAttribute("PIN_NUM")===r.getAttribute("PIN_NUM")})))||void 0===n?void 0:n.geometry,h(r),ae([r]),J("info")}else J("list")}))}),[e.geometry,e.propertiesSelected]),Object(b.jsxs)("div",{className:"panel",children:[r&&Object(b.jsx)(re,{view:s,condosTable:I,addressTable:L,propertyLayer:W,where:x,searchComplete:function(t){t.feature?(h(t.features[0]),ae([t.features[0]]),J("info")):J("list");var n=null===t||void 0===t?void 0:t.features.map((function(e){return e.getAttribute("OBJECTID")}));g("OBJECTID in (".concat(n.toString(),")")),(B=t.properties).forEach((function(e){e.setAttribute("selected",0)})),e.propertiesSelected(B)}}),Object(b.jsxs)("calcite-tabs",{position:"below",layout:"center",children:[Object(b.jsxs)("calcite-tab-nav",{slot:"tab-nav",children:[Object(b.jsx)("calcite-tab-title",{active:"list"===k,children:"List"}),Object(b.jsx)("calcite-tab-title",{active:"info"===k,children:"Info"})]}),Object(b.jsx)("calcite-tab",{active:"list"===k?"":null,children:r&&Object(b.jsx)(K,{layer:I,view:s,filter:j,featureSelected:function(t){if(t){B.forEach((function(e){e.getAttribute("PIN_NUM")!=(null===t||void 0===t?void 0:t.getAttribute("PIN_NUM"))&&e.setAttribute("selected",0)}));var n=B.find((function(e){return e.getAttribute("PIN_NUM")===(null===t||void 0===t?void 0:t.getAttribute("PIN_NUM"))}));null===n||void 0===n||n.setAttribute("selected",1),t.geometry=null===n||void 0===n?void 0:n.geometry,h(t),ae([t]),J("info"),e.propertiesSelected(B)}}})}),Object(b.jsx)("calcite-tab",{active:"info"===k?"":null,children:r&&Object(b.jsx)($,{view:s,feature:m})})]})]})},le=n(643),oe=function(e){var t=Object(c.useRef)(null);return Object(c.useEffect)((function(){return new le.a({container:t.current,view:e.view}),function(){console.log("cleanup")}}),[e.view]),Object(b.jsx)("div",{ref:t})},se=(n(679),function(e){var t,n;(null===(t=e.target)||void 0===t?void 0:t.parentElement).collapsed=null===(n=e.target)||void 0===n?void 0:n.dismissed}),ue=function(e,t,n){var i,r;!function(e,t){innerWidth<1e3?e.forEach((function(e){e.isActive=!1})):t?e.forEach((function(e){e.isActive=e.isActive&&!e.isTool})):e.forEach((function(e){e.isActive=e.isActive&&e.isTool}))}(n,t.isTool),t.isActive=!0;var a=null===(i=e.target)||void 0===i||null===(r=i.parentElement)||void 0===r?void 0:r.parentElement,c=null===a||void 0===a?void 0:a.querySelector("calcite-panel");return t.isActive?(null===a||void 0===a||a.removeAttribute("collapsed"),null===c||void 0===c||c.removeAttribute("dismissed")):(null===a||void 0===a||a.setAttribute("collapsed",""),null===c||void 0===c||c.setAttribute("dismissed","")),n},de=n(23),pe=n(10),fe=n(504),be=n(38),me=n(303),he=n(257),ve=[],ye=new he.a({labelExpressionInfo:{expression:"$feature.label"},symbol:{type:"text",color:"black",haloSize:1,haloColor:"white"}}),je=new E.default({source:[],fields:[{type:"oid",name:"OBJECTID"},{type:"string",name:"label"}],objectIdField:"OBJECTID",geometryType:"point",listMode:"hide",legendEnabled:!1,id:"sketch-points",renderer:{type:"simple",symbol:{type:"simple-marker",color:[255,255,255,1]}},labelingInfo:[ye]}),ge=new E.default({source:[],fields:[{type:"oid",name:"OBJECTID"},{type:"string",name:"label"}],objectIdField:"OBJECTID",geometryType:"polyline",legendEnabled:!1,listMode:"hide",id:"sketch-lines",labelingInfo:[ye]}),Oe=new E.default({source:[],fields:[{type:"oid",name:"OBJECTID"},{type:"string",name:"label"}],objectIdField:"OBJECTID",geometryType:"polygon",listMode:"hide",legendEnabled:!1,id:"sketch-polygons",renderer:{type:"simple",symbol:{type:"simple-fill",color:[255,255,255,.5],outline:{type:"simple-line",color:[255,255,255,1]}}},labelingInfo:[ye]}),Ee=new me.a({listMode:"hide",opacity:0}),xe=function(e){"start"===e.state&&(Ee.opacity=.5),"complete"===e.state&&(Ee.opacity=0,"point"===e.graphics[0].geometry.type&&je.applyEdits({updateFeatures:e.graphics}).then((function(){je.refresh()})),"polyline"===e.graphics[0].geometry.type&&ge.applyEdits({updateFeatures:e.graphics}).then((function(){ge.refresh()})),"polygon"===e.graphics[0].geometry.type&&Oe.applyEdits({updateFeatures:e.graphics}).then((function(){Oe.refresh()})))},we=function(e){var t=[],n=[],i=[];e.graphics.forEach((function(e){"point"===e.geometry.type&&t.push(e),"polyline"===e.geometry.type&&n.push(e),"polygon"===e.geometry.type&&i.push(e)})),je.applyEdits({deleteFeatures:t}).then((function(){je.refresh()})),ge.applyEdits({deleteFeatures:n}).then((function(){ge.refresh()})),Oe.applyEdits({deleteFeatures:i}).then((function(){Oe.refresh()}))},Se=function(e,t){"point"===t&&function(e){var t=je.renderer.clone(),n=t.symbol;n.color=be.a.fromHex(e.pointFillColor),e.pointFillEnabled?n.color.a=e.pointFillOpacity:n.color.a=0,n.outline.color=be.a.fromHex(e.pointOutlineColor),n.outline.color.a=e.pointOutlineOpacity,n.outline.width=e.pointOutlineWidth,n.size=e.pointSize,je.renderer=t}(e),"polygon"===t&&function(e){var t=Oe.renderer.clone(),n=t.symbol;e.polygonFillEnabled?n.style="solid":n.style="none",n.color=be.a.fromHex(e.polygonFillColor),n.color.a=e.polygonFillOpacity,n.outline.color=be.a.fromHex(e.polygonOutlineColor),n.outline.color.a=e.polygonOutlineOpacity,n.outline.width=e.polygonOutlineWidth,Oe.renderer=t}(e),"line"===t&&function(e){var t=ge.renderer.clone(),n=t.symbol;n.color=be.a.fromHex(e.lineColor),n.color.a=e.lineOutlineOpacity,n.width=e.lineWidth,ge.renderer=t}(e)},Ae=function(e,t){t.map.addMany([je,ge,Oe,Ee]);var n=new fe.a({container:e.current,view:t,layer:Ee});return n.on("create",(function(e){!function(e,t){if("start"===e.state&&(t.popup.autoOpenEnabled=!1),"complete"===e.state){var n,i=e.graphic,r=null===(n=document.getElementById("labelInput"))||void 0===n?void 0:n.getAttribute("value");i.setAttribute("label",r),"point"===i.geometry.type&&je.applyEdits({addFeatures:[i]}).then((function(){je.refresh()})),"polyline"===i.geometry.type&&ge.applyEdits({addFeatures:[i]}).then((function(){ge.refresh()})),"polygon"===i.geometry.type&&Oe.applyEdits({addFeatures:[i]}).then((function(){Oe.refresh()})),t.popup.autoOpenEnabled=!0}}(e,t)})),n.on("update",xe),n.on("delete",we),n},Ie=void 0,Te=function(e){var t=Object(c.useState)(null),n=Object(u.a)(t,2),i=n[0],r=n[1],a=Object(c.useRef)(null),l=Object(c.useRef)({pointSize:10,pointFillEnabled:!0,pointFillColor:"#FF0000",pointOutlineColor:"#000000",pointFillOpacity:.5,pointOutlineOpacity:1,pointOutlineWidth:1,lineOutlineOpacity:1,lineWidth:2,lineColor:"#FF0000",polygonFillEnabled:!0,polygonFillOpacity:.5,polygonOutlineOpacity:1,polygonOutlineWidth:2,polygonOutlineColor:"#000000",polygonFillColor:"#FF0000"}),o=function(t){var n=t.target.getAttribute("name");n&&(l.current=Object(pe.a)(Object(pe.a)({},l.current),Object(de.a)({},n,parseFloat(t.target.value))),requestAnimationFrame((function(){e.settingsChanged(l.current)})))},s=function(t){var n=t.target.getAttribute("name");n&&(l.current=Object(pe.a)(Object(pe.a)({},l.current),Object(de.a)({},n,t.target.value)),requestAnimationFrame((function(){e.settingsChanged(l.current)})))},d=function(t){var n=t.target.getAttribute("name");n&&(l.current=Object(pe.a)(Object(pe.a)({},l.current),Object(de.a)({},n,t.detail.switched)),requestAnimationFrame((function(){e.settingsChanged(l.current)})))};return Object(c.useEffect)((function(){return r(e.geometryType),requestAnimationFrame((function(){var e,t,n;null===(e=a.current)||void 0===e||e.querySelectorAll("calcite-slider").forEach((function(e){e.addEventListener("calciteSliderChange",o)})),null===(t=a.current)||void 0===t||t.querySelectorAll("calcite-color-picker").forEach((function(e){e.addEventListener("calciteColorPickerChange",s)})),null===(n=a.current)||void 0===n||n.querySelectorAll("calcite-switch").forEach((function(e){e.addEventListener("calciteSwitchChange",d)}))})),function(){var e,t,n;null===(e=a.current)||void 0===e||e.querySelectorAll("calcite-slider").forEach((function(e){e.removeEventListener("calciteSliderChange",o)})),null===(t=a.current)||void 0===t||t.querySelectorAll("calcite-slider").forEach((function(e){e.removeEventListener("calciteColorPickerChange",s)})),null===(n=a.current)||void 0===n||n.querySelectorAll("calcite-switch").forEach((function(e){e.addEventListener("calciteSwitchChange",d)}))}}),[e.geometryType]),Object(b.jsxs)("div",{ref:a,className:"panel",children:["point"===i?Object(b.jsxs)("div",{children:[Object(b.jsx)("calcite-block",{heading:"Symbol",open:!0,collapsible:!0,children:Object(b.jsx)("calcite-block-section",{text:"Size",children:Object(b.jsx)("calcite-slider",{min:"0",max:"30",value:l.current.pointSize,step:"0.1",label:"Size","label-handles":"",ticks:"0","page-step":"5",name:"pointSize",snap:""})})},"symbol"),Object(b.jsxs)("calcite-block",{heading:"Fill",open:!0,collapsible:!0,children:[Object(b.jsx)("calcite-label",{layout:"inline-space-between",class:"sc-calcite-label-h sc-calcite-label-s",dir:"ltr",alignment:"start",status:"idle",scale:"m","calcite-hydrated":"",children:Object(b.jsxs)("label",{className:"sc-calcite-label-h sc-calcite-label-s sc-calcite-label",children:["Enable fill",Object(b.jsx)("calcite-switch",{name:"pointFillEnabled",value:"enabled",switched:l.current.pointFillEnabled,bind:Ie,"aria-checked":"true",dir:"ltr",tabindex:"0",scale:"m","calcite-hydrated":""})]})}),l.current.pointFillEnabled?Object(b.jsxs)("div",{children:[Object(b.jsx)("calcite-block-section",{text:"Color",children:Object(b.jsx)("calcite-color-picker",{dir:"ltr","hide-channels":"","hide-saved":"",scale:"m",value:l.current.pointFillColor,appearance:"default",name:"pointFillColor","calcite-hydrated":"",id:"pointFill"})},"color"),Object(b.jsx)("calcite-block-section",{text:"Fill transparency",children:Object(b.jsx)("calcite-slider",{min:"0",max:"1",value:l.current.pointFillOpacity,bind:Ie,step:"0.1",label:"Opacity","label-handles":"",ticks:"0","page-step":"5",name:"fill-opacity",id:"pointFillOpacity",snap:""})},"transparency")," "]}):""]},"fill"),Object(b.jsxs)("calcite-block",{heading:"Outline",open:!0,collapsible:!0,children:[Object(b.jsx)("calcite-block-section",{text:"Color",children:Object(b.jsx)("calcite-color-picker",{dir:"ltr","hide-channels":"","hide-saved":"",scale:"m",value:l.current.pointOutlineColor,appearance:"default",name:"pointOutlineColor","calcite-hydrated":""})}),Object(b.jsx)("calcite-block-section",{text:"Outline transparency",children:Object(b.jsx)("calcite-slider",{min:"0",max:"1",value:l.current.pointOutlineOpacity,bind:Ie,step:"0.1",label:"Opacity","label-handles":"",ticks:"0","page-step":"5",name:"pointOutlineOpacity",snap:""})}),Object(b.jsx)("calcite-block-section",{text:"Stroke",children:Object(b.jsx)("calcite-slider",{min:"0",max:"10",value:l.current.pointOutlineWidth,step:"0.1",label:"Width","label-handles":"",ticks:"0","page-step":"5",name:"pointOutlineWidth",snap:""})})]},"outline")]}):"","polyline"===i?Object(b.jsx)("div",{children:Object(b.jsxs)("calcite-block",{heading:"Line",open:!0,collapsible:!0,children:[Object(b.jsx)("calcite-block-section",{text:"Color",children:Object(b.jsx)("calcite-color-picker",{dir:"ltr","hide-channels":"","hide-saved":"",scale:"m",value:l.current.lineColor,appearance:"default",name:"lineColor","calcite-hydrated":""})}),Object(b.jsx)("calcite-block-section",{text:"Line transparency",children:Object(b.jsx)("calcite-slider",{min:"0",max:"1",value:l.current.lineOutlineOpacity,bind:Ie,step:"0.1",label:"Opacity","label-handles":"",ticks:"0","page-step":"5",name:"lineOutlineOpacity",snap:""})}),Object(b.jsx)("calcite-block-section",{text:"Stroke",children:Object(b.jsx)("calcite-slider",{min:"0",max:"10",value:l.current.lineWidth,bind:Ie,step:"0.1",label:"Width","label-handles":"",ticks:"0","page-step":"5",name:"lineWidth",snap:""})})]},"line")}):"","polygon"===i?Object(b.jsxs)("div",{children:[Object(b.jsxs)("calcite-block",{heading:"Fill",open:!0,collapsible:!0,children:[Object(b.jsx)("calcite-label",{layout:"inline-space-between",class:"sc-calcite-label-h sc-calcite-label-s",dir:"ltr",alignment:"start",status:"idle",scale:"m","calcite-hydrated":"",children:Object(b.jsxs)("label",{className:"sc-calcite-label-h sc-calcite-label-s sc-calcite-label",children:["Enable fill",Object(b.jsx)("calcite-switch",{name:"polygonFillEnabled",value:"enabled",switched:l.current.polygonFillEnabled,bind:Ie,"aria-checked":"true",dir:"ltr",tabindex:"0",scale:"m","calcite-hydrated":""})]})}),l.current.polygonFillEnabled?Object(b.jsxs)("div",{children:[Object(b.jsx)("calcite-block-section",{text:"Color",children:Object(b.jsx)("calcite-color-picker",{dir:"ltr","hide-channels":"","hide-saved":"",scale:"m",value:l.current.polygonFillColor,appearance:"default",name:"polygonFillColor","calcite-hydrated":""})},"color"),Object(b.jsx)("calcite-block-section",{text:"Fill transparency",children:Object(b.jsx)("calcite-slider",{min:"0",max:"1",value:l.current.polygonFillOpacity,bind:Ie,step:"0.1",label:"Opacity","label-handles":"",ticks:"0","page-step":"5",name:"polygonFillOpacity",snap:""})},"transparency")]}):""]},"fill"),Object(b.jsxs)("calcite-block",{heading:"Outline",open:!0,collapsible:!0,children:[Object(b.jsx)("calcite-block-section",{text:"Color",children:Object(b.jsx)("calcite-color-picker",{dir:"ltr","hide-channels":"","hide-saved":"",scale:"m",value:l.current.polygonOutlineColor,appearance:"default",name:"polygonOutlineColor","calcite-hydrated":""})}),Object(b.jsx)("calcite-block-section",{text:"Outline transparency",children:Object(b.jsx)("calcite-slider",{min:"0",max:"1",value:l.current.polygonOutlineOpacity,bind:Ie,step:"0.1",label:"Opacity","label-handles":"",ticks:"0","page-step":"5",name:"polygonOutlineOpacity",snap:""})}),Object(b.jsx)("calcite-block-section",{text:"Stroke",children:Object(b.jsx)("calcite-slider",{min:"0",max:"10",value:l.current.polygonOutlineWidth,bind:Ie,step:"0.1",label:"Width","label-handles":"",ticks:"0","page-step":"5",name:"polygonOutlineWidth",snap:""})})]},"outline")]}):""]})},Ne=function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(),i=Object(c.useState)(null),r=Object(u.a)(i,2),a=r[0],l=r[1],o=function(e){["rectangle","circle"].includes(e)?l("polygon"):e&&l(e)};return Object(c.useEffect)((function(){var i=Ae(t,e.view);return ve.push(i.watch("activeTool",o)),n.current=i,function(){ve.forEach((function(e){e.remove()}))}}),[]),Object(b.jsxs)("div",{className:"panel",children:[Object(b.jsx)("div",{ref:t}),Object(b.jsxs)("calcite-label",{children:["Text Label",Object(b.jsx)("calcite-input",{id:"labelInput",placeholder:"Label",type:"textarea"})]}),Object(b.jsx)(Te,{settingsChanged:function(e){a&&Se(e,a)},geometryType:a})]})},De=n(640),Ce=n(54),ke=n(95),Re=n(404),_e=n(647),Fe=!1,Le=function(e){return!!Fe||e.portalItem.tags.includes("countywide")},Pe=function(e){return C.c((function(t){Object(Ce.default)("https://maps.raleighnc.gov/images/rest/services/Orthos2020/ImageServer/queryBoundary?outSR=102100&f=json",{responseType:"json"}).then((function(n){var i=ke.a.fromJSON(n.data.shape);Fe=Re.contains(i,e.center),t(i)}))}))},Be=function(e){var t=Object(c.useRef)(null),n="basemaps";return Object(c.useEffect)((function(){var i,r,a=new De.a({container:t.current,view:e.view});return function(){var e=document.createElement("calcite-alert");e.setAttribute("auto-dismiss",""),e.setAttribute("auto-dismiss-duration","fast"),e.setAttribute("scale","m"),e.setAttribute("color","yellow"),e.setAttribute("theme",document.body.classList.contains("dark")?"dark":"light");var t=document.createElement("div");t.slot="alert-title",t.textContent="Image basemap changed";var n=document.createElement("div");n.slot="alert-message",n.textContent="Image basemap changed",e.appendChild(t),e.appendChild(n),document.body.appendChild(e)}(),null===(i=document)||void 0===i||null===(r=i.querySelector("calcite-combobox"))||void 0===r||r.addEventListener("calciteComboboxItemChange",(function(t){var i=t.detail.value;n=i,function(e,t,n){var i={};q||Pe(t).then((function(e){q=e}));var r,a,c,l=t.watch("stationary",(function(e){if(e){var i=Re.contains(q,t.center);i!=Fe&&(Fe=i,n.source.refresh())}}));"imagery"===e?(null===(r=document.querySelector(".basemaps-base .esri-button-menu"))||void 0===r||r.removeAttribute("hidden"),i.id="492386759d264d49948bf7f83957ddb9",n.source.filterFunction=Le,n.source.updateBasemapsCallback=function(e){return e.reverse()},setTimeout((function(){W=n.source.watch("state",(function(i){"ready"===i&&"imagery"===e&&(n.source.basemaps.find((function(e){return e.portalItem.title===t.map.basemap.title}))||Fe||!t.map.basemap.portalItem||setTimeout((function(){var e;document.querySelector('div[slot="alert-message"]').textContent="".concat(t.map.basemap.portalItem.title," imagery not available outside Raleigh, switching to ").concat(n.source.basemaps.getItemAt(0).portalItem.title),t.map.basemap=n.source.basemaps.getItemAt(0),null===(e=document.querySelector("calcite-alert"))||void 0===e||e.setAttribute("active","")})))}))}),1e3)):(null===(a=document.querySelector(".basemaps-base .esri-button-menu"))||void 0===a||a.setAttribute("hidden",""),null===l||void 0===l||l.remove(),null===(c=W)||void 0===c||c.remove(),n.source.filterFunction=function(){return!0},n.source.updateBasemapsCallback=function(e){return e}),n.source.query=i}(i,e.view,a)})),a.watch("activeBasemap",(function(t){!function(e,t,n){var i=_e.a({basemap:e,geometryType:"polygon"}),r=t.map.allLayers.find((function(e){return"feature"===e.type&&e.title.startsWith("Property")})),a=r.renderer.clone();"light"===i.basemapTheme&&(a.symbol.outline.color.r=0,a.symbol.outline.color.g=0,a.symbol.outline.color.b=0),"dark"!==i.basemapTheme&&"imagery"!==n||(a.symbol.outline.color.r=255,a.symbol.outline.color.g=255,a.symbol.outline.color.b=255),r.renderer=a,r.refresh()}(t,e.view,n)})),function(){console.log("cleanup")}})),Object(b.jsxs)("div",{className:"panel",children:[Object(b.jsxs)("calcite-combobox",{label:"demo combobox","selection-mode":"single","allow-custom-values":"false",scale:"m","max-items":"0",dir:"ltr","calcite-hydrated":"",children:[Object(b.jsx)("calcite-combobox-item",{icon:"layer-basemap",value:"basemaps","text-label":"Basemaps","aria-hidden":"",dir:"ltr",scale:"m",tabindex:"-1","calcite-hydrated":"",selected:!0},"basemaps"),Object(b.jsx)("calcite-combobox-item",{icon:"image-layer",value:"imagery","text-label":"Imagery","aria-hidden":"",dir:"ltr",scale:"m",tabindex:"-1","calcite-hydrated":""},"imagery")]}),Object(b.jsx)("div",{ref:t})]})},Me=n(648),Ue=n(642),We=(n(680),function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null),i=Object(c.useState)(),r=Object(u.a)(i,2),a=r[0],l=r[1];return Object(c.useEffect)((function(){var i,r=new Me.a({container:t.current,view:e.view});return new Ue.a({container:n.current,view:e.view}),null===(i=document.querySelector("calcite-radio-group"))||void 0===i||i.addEventListener("calciteRadioGroupChange",(function(e){"distance"===e.detail&&(r.activeTool="distance",l("measurement")),"area"===e.detail&&(r.activeTool="area",l("measurement")),"coordinates"===e.detail&&l("coordinates"),"clear"===e.detail&&r.clear()})),function(){r&&r.destroy()}}),[e.view]),Object(b.jsxs)("div",{className:"panel",children:[Object(b.jsxs)("calcite-radio-group",{layout:"horizontal",appearance:"solid",scale:"m",width:"auto",children:[Object(b.jsx)("calcite-radio-group-item",{value:"distance",icon:"measure-line",children:"Distance"}),Object(b.jsx)("calcite-radio-group-item",{value:"area",icon:"measure-area",children:"Area"}),Object(b.jsx)("calcite-radio-group-item",{value:"coordinates",icon:"pin",children:"Coordinates"}),Object(b.jsx)("calcite-radio-group-item",{value:"clear",icon:"trash",children:"Clear"})]}),Object(b.jsx)("div",{ref:t,hidden:"measurement"!=a}),Object(b.jsx)("div",{ref:n,hidden:"coordinates"!=a})]})}),qe=function(e){var t=Object(c.useRef)(null),n=Object(c.useState)(0),i=Object(u.a)(n,1)[0];return Object(c.useEffect)((function(){return new fe.a({container:t.current,view:e.view,creationMode:"single",defaultCreateOptions:{mode:"hybrid"},visibleElements:{selectionTools:{"lasso-selection":!1,"rectangle-selection":!1},undoRedoMenu:!1},layer:new me.a({listMode:"hide"})}).on("create",(function(t){if("complete"===t.state){var n=t.graphic.geometry;i>0&&(n=Re.geodesicBuffer(t.graphic.geometry,i,"feet")),e.geometrySet(n)}})),function(){console.log("cleanup")}}),[e.view,e.geometrySet]),Object(b.jsxs)("div",{className:"panel",children:[Object(b.jsx)("div",{ref:t}),Object(b.jsxs)("calcite-label",{children:["Buffer distance",Object(b.jsx)("calcite-input",{type:"number",max:"3000",min:"0",step:"50",placeholder:"Distance","suffix-text":"ft",value:i})]})]})},Je=n(641),$e=function(e){var t=Object(c.useRef)(null);return Object(c.useEffect)((function(){var n=new Je.default({container:t.current,view:e.view});return function(){n&&n.destroy()}}),[e.view]),Object(b.jsx)("div",{ref:t})},Ge=n(645),He=function(e){var t=Object(c.useRef)(null);return Object(c.useEffect)((function(){var n=new Ge.a({container:t.current,view:e.view,editingEnabled:!0});return C.c((function(e){if(window.localStorage.getItem("imaps")){var t=h.a.fromJSON(JSON.parse(window.localStorage.getItem("imaps")));t.load().then((function(){e(t.bookmarks)}))}})).then((function(e){n.bookmarks.removeAll(),n.bookmarks.addMany(e)})),function(){n&&n.destroy()}}),[e.id,e.zoom]),Object(b.jsx)("div",{ref:t})},ze=n(644),Ve=function(e){var t=e.item;if("group"!=t.layer.type&&void 0!=t.layer.type){var n=document.createElement("calcite-slider");n.setAttribute("min","0"),n.setAttribute("max","100"),n.setAttribute("min-label","0%"),n.setAttribute("max-label","100%"),n.setAttribute("label-handles",""),n.setAttribute("value",Math.round(100*(null===t||void 0===t?void 0:t.layer.opacity)).toString()),n.setAttribute("data",t.layer.id),n.addEventListener("calciteSliderUpdate",(function(e){var n;t.layer.opacity=Math.round(parseInt(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.getAttribute("value")))/100}),{passive:!0}),t.panel={content:[n,"legend"],open:t.layer.visible}}},Ke=function(e,t){t.operationalItems.forEach((function(t){if("group"===t.layer.type){var n,i,r,a,c=!1;if(t.layer.layers.forEach((function(t){t.title.toLowerCase().includes(e.toLowerCase())?(t.listMode="show",c=!0):t.listMode="hide"})),e.length)if(c){var l,o,s,u;t.open=!0,null===(l=document.querySelector("#layerListDiv_".concat(t.uid,"__title")))||void 0===l||null===(o=l.parentElement)||void 0===o||null===(s=o.parentElement)||void 0===s||null===(u=s.parentElement)||void 0===u||u.removeAttribute("hidden")}else{var d,p,f,b;t.open=!1,null===(d=document.querySelector("#layerListDiv_".concat(t.uid,"__title")))||void 0===d||null===(p=d.parentElement)||void 0===p||null===(f=p.parentElement)||void 0===f||null===(b=f.parentElement)||void 0===b||b.setAttribute("hidden","")}else t.open=!1,null===(n=document.querySelector("#layerListDiv_".concat(t.uid,"__title")))||void 0===n||null===(i=n.parentElement)||void 0===i||null===(r=i.parentElement)||void 0===r||null===(a=r.parentElement)||void 0===a||a.removeAttribute("hidden")}}))},Xe=(n(681),function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null);return Object(c.useEffect)((function(){var i,r=new ze.a({container:t.current,view:e.view,listItemCreatedFunction:Ve});return null===(i=n.current)||void 0===i||i.addEventListener("calciteInputInput",(function(e){Ke(e.target.value,r)})),function(){var e;null===(e=n.current)||void 0===e||e.removeEventListener("calciteInputInput",(function(e){Ke(e.target.value,r)})),r&&r.destroy()}}),[e.view]),Object(b.jsxs)("div",{className:"panel",children:[Object(b.jsxs)("div",{className:"row sticky",children:[Object(b.jsx)("calcite-input",{ref:n,clearable:!0,placeholder:"Filter by layer name",scale:"s",id:"layerSearch"}),Object(b.jsx)("calcite-action",{icon:"viewHide",scale:"s"})]}),Object(b.jsx)("div",{ref:t})]})}),Ye=l.a.createContext({theme:"dark",setTheme:function(e){console.log("dark")}}),Ze=(n(682),function(e){var t=Object(c.useRef)(),n=Object(c.useState)(e.links),i=Object(u.a)(n,2),r=i[0],a=(i[1],Object(c.useContext)(Ye)),l=a.theme,o=a.setTheme;return Object(c.useEffect)((function(){var e;null===(e=t.current)||void 0===e||e.addEventListener("calciteDropdownSelect",(function(e){requestAnimationFrame((function(){var t=e.target.querySelector("calcite-dropdown-item[active]").getAttribute("value");o(t);var n=document.querySelectorAll("style");Array.from(n).forEach((function(e,n){e.innerHTML.includes('--esri-calcite-theme-name: "'.concat(t,'"'))&&document.head.appendChild(e)}))}))}))}),[]),Object(b.jsxs)("header",{children:[Object(b.jsx)("h2",{children:"iMAPS"}),Object(b.jsxs)("calcite-dropdown",{ref:t,placement:"bottom-trailing",scale:"m",width:"m",type:"click",children:[Object(b.jsx)("calcite-button",{slot:"dropdown-trigger",children:Object(b.jsx)("calcite-icon",{icon:"hamburger"})}),r.map((function(e){return Object(b.jsx)("calcite-dropdown-group",{"selection-mode":"none","group-title":e.title,children:e.links.map((function(e){return Object(b.jsx)("calcite-dropdown-item",{href:e.href,target:"_blank",children:e.title},e.title)}))},e.title)})),Object(b.jsxs)("calcite-dropdown-group",{"selection-mode":"single","group-title":"Theme",children:[Object(b.jsx)("calcite-dropdown-item",{value:"light",active:"light"===l?"":null,children:"Light"}),Object(b.jsx)("calcite-dropdown-item",{value:"dark",active:"dark"===l?"":null,children:"Dark"})]})]})]})}),Qe=[{title:"Property Search",icon:"search",isTool:!1,isActive:!0,container:"propertySearch",component:"PropertyPanel",path:"../PropertyPanel/PropertyPanel",tips:[{title:"Search Categories",text:"Select a search category to get more results as you type"},{title:"Search Categories",text:"Select a search category to get more results as you type"}]},{title:"Location Search",icon:"pin",isTool:!1,isActive:!1,container:"locationSearch",component:"LocationSearch",path:"../LocationSearch/LocationSearch",tips:[{title:"Test",text:"Select a search category to get more results as you type"},{title:"Test1",text:"Select a search category to get more results as you type"}]},{title:"Layers",icon:"layers",isTool:!1,isActive:!1,container:"layers",component:"Layers",path:"../Layers/Layers"},{title:"Legend",icon:"legend",isTool:!1,isActive:!1,container:"legend",component:"Legend",path:"../Legend/Legend"},{title:"Basemaps",icon:"basemap",isTool:!1,isActive:!1,container:"basemaps",component:"Basemaps",path:"../Basemaps/Basemaps"},{title:"Property Select",icon:"selection",isTool:!0,isActive:!1,container:"propertySelect",component:"PropertySelect",path:"../PropertySelect/PropertySelect"},{title:"Measure",icon:"measure",isTool:!0,isActive:!1,container:"measure",component:"Measure",path:"../Measure/Measure"},{title:"Sketch",icon:"pencil",isTool:!0,isActive:!1,container:"sketch",component:"Sketch",path:"../Sketch/Sketch"},{title:"Bookmarks",icon:"bookmark",isTool:!0,isActive:!1,container:"bookmarks",component:"Bookmarks",path:"../Bookmarks/Bookmarks"},{title:"Print",icon:"print",isTool:!0,isActive:!1,container:"print",component:"Print",path:"../Print/Print"}],et=[{title:"Help",links:[{title:"Help Document",href:"https://raleighnc.gov"},{title:"Feedback",href:"https://arcg.is/1GurDS"}]},{title:"Data Download",links:[{title:"Wake County Open Data",href:"https://data-wake.opendata.arcgis.com/"},{title:"Raleigh Open Data",href:"https://data.raleighnc.gov/"}]},{title:"Links",links:[{title:"Wake County",href:"https://wakegov.com"},{title:"City of Raleigh",href:"https://raleighnc.gov/"}]}],tt=(n(683),function(e){var t=Object(c.useRef)(),n=Object(c.useState)(),i=Object(u.a)(n,2),r=i[0],a=i[1],l=Object(c.useState)([]),o=Object(u.a)(l,2),s=o[0],d=o[1],p=Object(c.useState)(!0),f=Object(u.a)(p,2),m=f[0],h=f[1],v=Object(c.useContext)(Ye).theme;return Object(c.useEffect)((function(){var n,i=function(t){t.target.closed&&e.tipsDismissed()};return null===(n=t.current)||void 0===n||n.addEventListener("calciteTipManagerToggle",i),function(){var e;null===(e=t.current)||void 0===e||e.removeEventListener("calciteTipManagerToggle",i)}}),[e.tipsDimissed]),Object(c.useEffect)((function(){a(e.title),d(e.tips),h(!e.tips.length)}),[e.tips]),Object(b.jsx)("calcite-tip-manager",{ref:t,theme:v,dir:"ltr","intl-close":"Close","intl-default-title":r,"intl-pagination-label":"Tip","intl-next":"Next","intl-previous":"Previous",closed:m?"":null,children:null===s||void 0===s?void 0:s.map((function(e,t){return Object(b.jsx)("calcite-tip",{heading:e.title,children:e.text},e.title+t)}))})}),nt=l.a.createContext({actions:Qe,setActions:function(e){e=Qe,console.log(e)}}),it=function(e){var t,i,l=Object(c.useState)([]),o=Object(u.a)(l,2),p=o[0],f=o[1],h=Object(c.useState)(),v=Object(u.a)(h,2),y=v[0],j=v[1],g=Object(c.useState)(window.innerWidth),O=Object(u.a)(g,2),E=O[0],x=O[1],w=Object(c.useState)(null),A=Object(u.a)(w,2),I=A[0],T=A[1],N=Object(c.useState)(!1),D=Object(u.a)(N,2),C=D[0],k=D[1],R=Object(c.useState)([]),_=Object(u.a)(R,2),F=_[0],L=_[1],P=Object(c.useContext)(Ye),B=P.theme,M=P.setTheme,U=Object(c.useContext)(nt),W=U.actions,q=U.setActions,J=function(e){L([].concat(Object(d.a)(e)));var t=W.find((function(e){return e.isActive}));t&&(t.isActive=!1);var n=W.find((function(e){return"Property Search"===e.title}));n&&(n.isActive=!0),q([].concat(Object(d.a)(W)))},$=function(){x(window.innerWidth)},G=function(e){if(e){var t=document.getElementById(e.container);(null===t||void 0===t?void 0:t.hasChildNodes())||("Property Search"===e.title&&s.a.render(Object(b.jsx)(ce,{view:I,propertiesSelected:J}),t),"Location Search"===e.title&&s.a.render(Object(b.jsx)(m,{view:I}),t),"Layers"===e.title&&s.a.render(Object(b.jsx)(Xe,{view:I}),t),"Basemaps"===e.title&&s.a.render(Object(b.jsx)(Be,{view:I}),t),"Legend"===e.title&&s.a.render(Object(b.jsx)($e,{view:I}),t),"Property Select"===e.title&&s.a.render(Object(b.jsx)(qe,{view:I,geometrySet:function(e){var t=document.getElementById("propertySearch");s.a.render(Object(b.jsx)(ce,{geometry:e,propertiesSelected:J}),t)}}),t),"Measure"===e.title&&s.a.render(Object(b.jsx)(We,{view:I}),t),"Sketch"===e.title&&s.a.render(Object(b.jsx)(Ne,{view:I}),t),"Bookmarks"===e.title&&s.a.render(Object(b.jsx)(He,{view:I}),t),"Print"===e.title&&s.a.render(Object(b.jsx)(oe,{view:I}),t))}},H=function(){var e=Object(a.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C||(T(t),k(!0),n=document.getElementById("propertySearch"),t.map&&s.a.render(Object(b.jsx)(ce,{view:t,propertiesSelected:J}),n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){return document.querySelectorAll("calcite-panel").forEach((function(e){null===e||void 0===e||e.addEventListener("calcitePanelDismissedChange",se)})),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?(M("dark"),n(632),n(633)):(M("light"),n(633),n(632)),window.addEventListener("resize",$),function(){window.removeEventListener("resize",$),document.querySelectorAll("calcite-panel").forEach((function(e){null===e||void 0===e||e.removeEventListener("calcitePanelDismissedChange",se)}))}}),[e.actions]),Object(b.jsxs)("div",{children:[Object(b.jsxs)("calcite-shell",{theme:B,className:"shell",children:[E>=1e3?Object(b.jsxs)("calcite-shell-panel",{slot:"primary-panel",position:"start","width-scale":"l",collapsed:!0,children:[Object(b.jsx)("calcite-action-bar",{slot:"action-bar",children:W.map((function(t){if(t.isTool)return Object(b.jsx)("calcite-action",{name:t.container,text:t.title,icon:t.icon,onClick:function(n){q(Object(d.a)(ue(n,t,e.actions))),G(t)},active:!0===t.isActive?"":null},t.icon)}))}),Object(b.jsxs)("calcite-panel",{dismissible:!0,dismissed:!0,children:[Object(b.jsx)("div",{slot:"header-content",children:null===(t=W.find((function(e){return e.isActive&&e.isTool})))||void 0===t?void 0:t.title}),Object(b.jsx)("div",{slot:"header-trailing-content",children:Object(b.jsx)("calcite-action",{label:"Performs another custom action",text:"Perform Another Action!","text-enabled":!0,icon:"blog"})}),W.map((function(e){if(e.isTool)return Object(b.jsx)("div",{id:e.container,hidden:!e.isActive},e.container)}))]})]}):"",Object(b.jsxs)("calcite-shell-panel",{slot:"contextual-panel",position:"end","width-scale":"l",children:[Object(b.jsx)("calcite-action-bar",{slot:"action-bar",children:W.map((function(t){if(!t.isTool||E<1e3)return Object(b.jsx)("calcite-action",{text:t.title,name:t.container,icon:t.icon,onClick:function(){var n=Object(a.a)(r.a.mark((function n(i){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:q(Object(d.a)(ue(i,t,e.actions))),G(t);case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),active:!0===t.isActive?"":null},t.icon)}))}),Object(b.jsxs)("calcite-panel",{dismissible:!0,children:[Object(b.jsx)("div",{slot:"header-content",children:null===(i=W.find((function(e){return e.isActive})))||void 0===i?void 0:i.title}),function(){var e,t=W.find((function(e){return e.isActive}));return(null===t||void 0===t||null===(e=t.tips)||void 0===e?void 0:e.length)?Object(b.jsx)("calcite-action",{text:"Action",label:"Action",slot:"header-actions-end",icon:"lightbulb",appearance:"solid",scale:"m","calcite-hydrated":"",onClick:function(){f([].concat(Object(d.a)(p),Object(d.a)(t.tips))),j(t.title)}}):""}(),W.map((function(e){if(!e.isTool||E<1e3)return Object(b.jsx)("div",{id:e.container,hidden:!e.isActive},e.container)}))]})]}),Object(b.jsx)("div",{slot:"shell-header",children:Object(b.jsx)(Ze,{links:et})}),Object(b.jsx)(S,{id:"95092428774c4b1fb6a3b6f5fed9fbc4",zoom:"10",initialized:H,geometryChanged:function(e){var t=document.getElementById("propertySearch");s.a.render(Object(b.jsx)(ce,{geometry:e,propertiesSelected:J}),t)},selectedProperties:F})]}),Object(b.jsx)(tt,{tips:p,title:y,closed:!0,tipsDismissed:function(){f([]),j("")}})]})};n(684);var rt=function(){var e=Object(c.useState)("dark"),t=Object(u.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(Qe),a=Object(u.a)(r,2),l=a[0],o=a[1];return Object(b.jsx)(Ye.Provider,{value:{theme:n,setTheme:i},children:Object(b.jsx)(nt.Provider,{value:{actions:l,setActions:o},children:Object(b.jsx)(it,{actions:l})})})},at=function(e){e&&e instanceof Function&&n.e(320).then(n.bind(null,1198)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))},ct=(n(634),n(535));!function(){var e=Object(a.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ct.a)();case 2:Object(ct.b)(window),s.a.render(Object(b.jsx)(l.a.StrictMode,{children:Object(b.jsx)(rt,{})}),document.getElementById("root")),at();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}},[[686,41,42]]]);
//# sourceMappingURL=main.a0c5047f.chunk.js.map