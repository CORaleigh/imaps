(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[58],{1197:function(e,t,n){"use strict";n.r(t),n.d(t,"GraphicsSnappingSource",(function(){return E}));var a=n(23),i=n(29),r=n(7),s=n.n(r),o=n(16),u=n(15),c=n(2),h=n(3),d=n(4),l=n(5),f=n(0),m=(n(14),n(6)),v=(n(12),n(17),n(1)),y=n(8),p=(n(11),n(18),n(19),n(107)),x=n(24),b=n(31),g=n(43),j=n(95),O=n(204),_=n(130),k=n(275),I=n(511),B=n(99),M=n(68),w=n(882),S=n(928),X=n(948),Y=n(970),E=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).availability=1,a.sources={multipoint:null,point:null,polygon:null,polyline:null},a.loadedWkids=new Set,a.loadedWkts=new Set,a.pendingAdds=[],a}return Object(h.a)(n,[{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"layer",get:function(){return this.layerSource.layer}},{key:"destroy",value:function(){var e=this,t=this.pendingAdds;this.pendingAdds.length=0;var n,a=Object(u.a)(t);try{for(a.s();!(n=a.n()).done;){n.value.task.abort()}}catch(i){a.e(i)}finally{a.f()}this.mapSources((function(t){return e.destroySource(t)}))}},{key:"initialize",value:function(){var e=this;this.handles.add([this.layer.on("graphic-update",(function(t){return e.onGraphicUpdate(t)})),this.updatingHandles.addOnCollectionChange(this.layer.graphics,(function(t){return e.onGraphicsChanged(t)}))]),this.addMany(this.layer.graphics.toArray())}},{key:"fetchCandidates",value:function(){var e=Object(o.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.k)(this.mapSources((function(e){return e.queryEngine.executeQueryForSnapping({point:t.coordinateHelper.toPoint(t.point,new g.a).toJSON(),distance:t.distance,types:t.types,query:Object(m.k)(t.filter)?t.filter.createQuery().toJSON():{where:"1=1"}},n).then((function(e){return e.candidates}))})));case 2:return a=e.sent.flat().map((function(e){return Object(Y.a)(e,t.coordinateHelper)})),e.abrupt("return",(Object(M.e)(t.point,a),{candidates:a}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"refresh",value:function(){}},{key:"onGraphicUpdate",value:function(e){switch(e.property){case"geometry":case"visible":this.remove(e.graphic),this.addMany([e.graphic])}}},{key:"onGraphicsChanged",value:function(e){var t,n=Object(u.a)(e.removed);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.remove(a)}}catch(i){n.e(i)}finally{n.f()}this.addMany(e.added)}},{key:"addMany",value:function(e){var t,n=[],a=new Map,i=Object(u.a)(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;Object(m.j)(r.geometry)||(this.needsInitializeProjection(r.geometry.spatialReference)?(n.push(r.geometry.spatialReference),a.set(r.uid,r)):this.add(r))}}catch(s){i.e(s)}finally{i.f()}this.createPendingAdd(n,a)}},{key:"createPendingAdd",value:function(e,t){var n=this;if(e.length){var a=Object(x.h)(function(){var a=Object(o.a)(s.a.mark((function a(r){var o,c,h,d;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(_.f)(e.map((function(e){return{source:e,dest:n.spatialReference}})),{signal:r});case 2:n.markLoadedSpatialReferences(e),o=Object(u.a)(t);try{for(o.s();!(c=o.n()).done;)h=Object(i.a)(c.value,2),d=h[1],n.add(d)}catch(s){o.e(s)}finally{o.f()}case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}());this.updatingHandles.addPromise(a.promise);var r={task:a,graphics:t},c=function(){return Object(p.j)(n.pendingAdds,r)};a.promise.then(c,c),this.pendingAdds.push(r)}}},{key:"markLoadedSpatialReferences",value:function(e){var t,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;null!=a.wkid&&this.loadedWkids.add(a.wkid),null!=a.wkt&&this.loadedWkts.add(a.wkt)}}catch(i){n.e(i)}finally{n.f()}}},{key:"add",value:function(e){if(!Object(m.j)(e.geometry)&&e.visible){var t=e.geometry;if("mesh"!==t.type){"extent"===t.type&&(t=j.a.fromExtent(t));var n=this.ensureSource(t.type);if(!Object(m.j)(n)){var a=this.createOptimizedFeature(e.uid,t);Object(m.k)(a)&&n.featureStore.add(a)}}}}},{key:"needsInitializeProjection",value:function(e){return(null==e.wkid||!this.loadedWkids.has(e.wkid))&&(null==e.wkt||!this.loadedWkts.has(e.wkt))&&!Object(_.b)(e,this.spatialReference)}},{key:"createOptimizedFeature",value:function(e,t){var n=Object(_.j)(Object(w.a)(t),this.spatialReference);return n?new k.a(Object(I.d)(n,!1,!1),Object(a.a)({},F,e),null,e):null}},{key:"ensureSource",value:function(e){var t=this.sources[e];if(Object(m.k)(t))return t;var n=this.createSource(e);return this.sources[e]=n,n}},{key:"createSource",value:function(e){var t=O.a.toJSON(e),n=new S.a({geometryType:t,hasZ:!1,hasM:!1});return{featureStore:n,queryEngine:new X.a({featureStore:n,fields:[{name:F,type:"esriFieldTypeOID",alias:F}],geometryType:t,hasM:!1,hasZ:!1,objectIdField:F,spatialReference:this.spatialReference,scheduler:Object(m.k)(this.view)&&"3d"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}},{key:"remove",value:function(e){var t=this;this.mapSources((function(n){return t.removeFromSource(n,e)}));var n,a=Object(u.a)(this.pendingAdds);try{for(a.s();!(n=a.n()).done;){var i=n.value;i.graphics.delete(e.uid),0===i.graphics.size&&i.task.abort()}}catch(r){a.e(r)}finally{a.f()}}},{key:"removeFromSource",value:function(e,t){var n=t.uid;e.featureStore.has(n)&&e.featureStore.removeById(t.uid)}},{key:"destroySource",value:function(e){e.queryEngine.destroy(),this.sources[e.type]=null}},{key:"mapSources",value:function(e){var t=this.sources,n=t.point,a=t.polygon,i=t.polyline,r=t.multipoint,s=[];return Object(m.k)(n)&&s.push(e(n)),Object(m.k)(a)&&s.push(e(a)),Object(m.k)(i)&&s.push(e(i)),Object(m.k)(r)&&s.push(e(r)),s}}]),n}(Object(B.b)(b.a));Object(f.a)([Object(v.b)({constructOnly:!0})],E.prototype,"spatialReference",void 0),Object(f.a)([Object(v.b)({constructOnly:!0})],E.prototype,"layerSource",void 0),Object(f.a)([Object(v.b)({constructOnly:!0})],E.prototype,"view",void 0),Object(f.a)([Object(v.b)({readOnly:!0})],E.prototype,"updating",null),Object(f.a)([Object(v.b)({readOnly:!0})],E.prototype,"availability",void 0),E=Object(f.a)([Object(y.a)("esri.views.interactive.snapping.featureSources.GraphicsSnappingSource")],E);var F="OBJECTID"},882:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(2),i=n(3),r=n(29),s=n(15),o=n(56),u=n(432),c=n(330),h=n(67),d=n(144),l=n(105);function f(e){if(!e)return null;if("mesh"===e.type)return e.toJSON();var t=null,n=e.spatialReference,a=Object(o.d)(n);if(!a)return e.toJSON();var i,r=n.isWebMercator?102100:4326,l=d.a[r].maxX,f=d.a[r].minX,y=d.a[r].plus180Line,p=d.a[r].minus180Line,x=e.toJSON();if(Object(h.f)(x))i=v(x,l,f);else if(Object(h.e)(x))x.points=x.points.map((function(e){return v(e,l,f)})),i=x;else if(Object(h.d)(x))i=m(x,a);else if(Object(h.g)(x)||Object(h.h)(x)){var j=g;Object(c.a)(j,x);var O={xmin:j[0],ymin:j[1],xmax:j[2],ymax:j[3]},_=Object(d.d)(O.xmin,f)*(2*l),k=0===_?x:function(e,t){var n,a=Object(d.b)(e),i=Object(s.a)(a);try{for(i.s();!(n=i.n()).done;){var r,o=n.value,u=Object(s.a)(o);try{for(u.s();!(r=u.n()).done;){r.value[0]+=t}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return e}(x,_);O.xmin+=_,O.xmax+=_,Object(u.a)(O,y)&&O.xmax!==l||Object(u.a)(O,p)&&O.xmin!==f?t=k:i=k}else i=e.toJSON();return null!==t?(new b).cut(t,l):i}function m(e,t){if(!t)return e;var n=function(e,t){var n,a=[],i=e.ymin,s=e.ymax,o=e.xmax-e.xmin,u=e.xmin,c=e.xmax,h=Object(r.a)(t.valid,2),d=h[0],l=h[1],f=(n=y(e.xmin,t)).x,m=n.frameId,v=(n=y(e.xmax,t)).x,x=n.frameId,b=f===v&&o>0;if(o>2*l){var g={xmin:u<c?f:v,ymin:i,xmax:l,ymax:s},j={xmin:d,ymin:i,xmax:u<c?v:f,ymax:s},O={xmin:0,ymin:i,xmax:l,ymax:s},_={xmin:d,ymin:i,xmax:0,ymax:s},k=[],I=[];p(g,O)&&k.push(m),p(g,_)&&I.push(m),p(j,O)&&k.push(x),p(j,_)&&I.push(x);for(var B=m+1;B<x;B++)k.push(B),I.push(B);a.push({extent:g,frameIds:[m]},{extent:j,frameIds:[x]},{extent:O,frameIds:k},{extent:_,frameIds:I})}else f>v||b?a.push({extent:{xmin:f,ymin:i,xmax:l,ymax:s},frameIds:[m]},{extent:{xmin:d,ymin:i,xmax:v,ymax:s},frameIds:[x]}):a.push({extent:{xmin:f,ymin:i,xmax:v,ymax:s},frameIds:[m]});return a}(e,t).map((function(e){return e.extent}));return n.length<2?n[0]||e:n.length>2?(e.xmin=t.valid[0],e.xmax=t.valid[1],e):{rings:n.map((function(e){return[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]}))}}function v(e,t,n){if(Array.isArray(e)){var a=e[0];if(a>t){var i=Object(d.d)(a,t);e[0]=a+i*(-2*t)}else if(a<n){var r=Object(d.d)(a,n);e[0]=a+r*(-2*n)}}else{var s=e.x;if(s>t){var o=Object(d.d)(s,t);e.x+=o*(-2*t)}else if(s<n){var u=Object(d.d)(s,n);e.x+=u*(-2*n)}}return e}function y(e,t){var n,a=Object(r.a)(t.valid,2),i=a[0],s=a[1],o=2*s,u=0;return e>s?(e-=(n=Math.ceil(Math.abs(e-s)/o))*o,u=n):e<i&&(e+=(n=Math.ceil(Math.abs(e-i)/o))*o,u=-n),{x:e,frameId:u}}function p(e,t){var n=t.xmin,a=t.ymin,i=t.xmax,r=t.ymax;return x(e,n,a)&&x(e,n,r)&&x(e,i,r)&&x(e,i,a)}function x(e,t,n){return t>=e.xmin&&t<=e.xmax&&n>=e.ymin&&n<=e.ymax}var b=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,[{key:"cut",value:function(e,t){var n;if(e.rings)this.closed=!0,n=e.rings,this.minPts=4;else{if(!e.paths)return null;this.closed=!1,n=e.paths,this.minPts=2}for(var a=n.length,i=-2*t,r=0;r<a;r++){var o=n[r];if(o&&o.length>=this.minPts){var u,c=[],h=Object(s.a)(o);try{for(h.s();!(u=h.n()).done;){var d=u.value;c.push([d[0]+i,d[1]])}}catch(l){h.e(l)}finally{h.f()}n.push(c)}}return this.closed?e.rings=n:e.paths=n,e}}]),e}(),g=Object(l.i)()},905:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(4),i=n(5),r=n(15),s=n(2),o=n(3),u=n(6),c=n(107),h=n(128),d=n(862),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1?arguments[1]:void 0;Object(s.a)(this,e),this.compareMinX=y,this.compareMinY=p,this.toBBox=function(e){return e},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&("function"==typeof n?this.toBBox=n:this._initFormat(n)),this.clear()}return Object(o.a)(e,[{key:"destroy",value:function(){this.clear(),I.prune(),B.prune(),M.prune(),w.prune()}},{key:"all",value:function(e){this._all(this.data,e)}},{key:"search",value:function(e,t){var n=this.data,a=this.toBBox;if(_(e,n))for(I.clear();n;){for(var i=0,r=n.children.length;i<r;i++){var s=n.children[i],o=n.leaf?a(s):s;_(e,o)&&(n.leaf?t(s):O(e,o)?this._all(s,t):I.push(s))}n=I.pop()}}},{key:"collides",value:function(e){var t=this.data,n=this.toBBox;if(!_(e,t))return!1;for(I.clear();t;){for(var a=0,i=t.children.length;a<i;a++){var r=t.children[a],s=t.leaf?n(r):r;if(_(e,s)){if(t.leaf||O(e,s))return!0;I.push(r)}}t=I.pop()}return!1}},{key:"load",value:function(e){if(!e.length)return this;if(e.length<this._minEntries){for(var t=0,n=e.length;t<n;t++)this.insert(e[t]);return this}var a=this._build(e.slice(0,e.length),0,e.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var i=this.data;this.data=a,a=i}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this}},{key:"insert",value:function(e){return e&&this._insert(e,this.data.height-1),this}},{key:"clear",value:function(){return this.data=new X([]),this}},{key:"remove",value:function(e){if(!e)return this;var t,n=this.data,a=null,i=0,r=!1,s=this.toBBox(e);for(M.clear(),w.clear();n||M.length>0;){var o;if(n||(n=Object(u.d)(M.pop()),a=M.data[M.length-1],i=null!=(o=w.pop())?o:0,r=!0),n.leaf&&-1!==(t=Object(c.e)(n.children,e,n.children.length,n.indexHint)))return n.children.splice(t,1),M.push(n),this._condense(M),this;r||n.leaf||!O(n,s)?a?(i++,n=a.children[i],r=!1):n=null:(M.push(n),w.push(i),i=0,a=n,n=n.children[0])}return this}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(e){return this.data=e,this}},{key:"_all",value:function(e,t){var n=e;for(B.clear();n;){var a;if(!0===n.leaf){var i,s=Object(r.a)(n.children);try{for(s.s();!(i=s.n()).done;){t(i.value)}}catch(o){s.e(o)}finally{s.f()}}else B.pushArray(n.children);n=null!=(a=B.pop())?a:null}}},{key:"_build",value:function(e,t,n,a){var i=n-t+1,r=this._maxEntries;if(i<=r){var s=new X(e.slice(t,n+1));return f(s,this.toBBox),s}a||(a=Math.ceil(Math.log(i)/Math.log(r)),r=Math.ceil(i/Math.pow(r,a-1)));var o=new Y([]);o.height=a;var u=Math.ceil(i/r),c=u*Math.ceil(Math.sqrt(r));k(e,t,n,c,this.compareMinX);for(var h=t;h<=n;h+=c){var d=Math.min(h+c-1,n);k(e,h,d,u,this.compareMinY);for(var l=h;l<=d;l+=u){var m=Math.min(l+u-1,d);o.children.push(this._build(e,l,m,a-1))}}return f(o,this.toBBox),o}},{key:"_chooseSubtree",value:function(e,t,n,a){for(;a.push(t),!0!==t.leaf&&a.length-1!==n;){for(var i=void 0,r=1/0,s=1/0,o=0,u=t.children.length;o<u;o++){var c=t.children[o],h=x(c),d=g(e,c)-h;d<s?(s=d,r=h<r?h:r,i=c):d===s&&h<r&&(r=h,i=c)}t=i||t.children[0]}return t}},{key:"_insert",value:function(e,t,n){var a=this.toBBox,i=n?e:a(e);M.clear();var r=this._chooseSubtree(i,this.data,t,M);for(r.children.push(e),v(r,i);t>=0&&M.data[t].children.length>this._maxEntries;)this._split(M,t),t--;this._adjustParentBBoxes(i,M,t)}},{key:"_split",value:function(e,t){var n=e.data[t],a=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,a);var r=this._chooseSplitIndex(n,i,a);if(r){var s=n.children.splice(r,n.children.length-r),o=n.leaf?new X(s):new Y(s);o.height=n.height,f(n,this.toBBox),f(o,this.toBBox),t?e.data[t-1].children.push(o):this._splitRoot(n,o)}else console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}},{key:"_splitRoot",value:function(e,t){this.data=new Y([e,t]),this.data.height=e.height+1,f(this.data,this.toBBox)}},{key:"_chooseSplitIndex",value:function(e,t,n){var a,i,r;a=i=1/0;for(var s=t;s<=n-t;s++){var o=m(e,0,s,this.toBBox),u=m(e,s,n,this.toBBox),c=j(o,u),h=x(o)+x(u);c<a?(a=c,r=s,i=h<i?h:i):c===a&&h<i&&(i=h,r=s)}return r}},{key:"_chooseSplitAxis",value:function(e,t,n){var a=e.leaf?this.compareMinX:y,i=e.leaf?this.compareMinY:p;this._allDistMargin(e,t,n,a)<this._allDistMargin(e,t,n,i)&&e.children.sort(a)}},{key:"_allDistMargin",value:function(e,t,n,a){e.children.sort(a);for(var i=this.toBBox,r=m(e,0,t,i),s=m(e,n-t,n,i),o=b(r)+b(s),u=t;u<n-t;u++){var c=e.children[u];v(r,e.leaf?i(c):c),o+=b(r)}for(var h=n-t-1;h>=t;h--){var d=e.children[h];v(s,e.leaf?i(d):d),o+=b(s)}return o}},{key:"_adjustParentBBoxes",value:function(e,t,n){for(var a=n;a>=0;a--)v(t.data[a],e)}},{key:"_condense",value:function(e){for(var t=e.length-1;t>=0;t--){var n=e.data[t];if(0===n.children.length)if(t>0){var a=e.data[t-1],i=a.children;i.splice(Object(c.e)(i,n,i.length,a.indexHint),1)}else this.clear();else f(n,this.toBBox)}}},{key:"_initFormat",value:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}]),e}();function f(e,t){m(e,0,e.children.length,t,e)}function m(e,t,n,a,i){i||(i=new X([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var r,s=t;s<n;s++)r=e.children[s],v(i,e.leaf?a(r):r);return i}function v(e,t){e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY)}function y(e,t){return e.minX-t.minX}function p(e,t){return e.minY-t.minY}function x(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function b(e){return e.maxX-e.minX+(e.maxY-e.minY)}function g(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function j(e,t){var n=Math.max(e.minX,t.minX),a=Math.max(e.minY,t.minY),i=Math.min(e.maxX,t.maxX),r=Math.min(e.maxY,t.maxY);return Math.max(0,i-n)*Math.max(0,r-a)}function O(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function _(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function k(e,t,n,a,i){for(var r=[t,n];r.length;){var s=Object(u.d)(r.pop()),o=Object(u.d)(r.pop());if(!(s-o<=a)){var c=o+Math.ceil((s-o)/a/2)*a;Object(d.a)(e,c,o,s,i),r.push(o,c,c,s)}}}var I=new h.a,B=new h.a,M=new h.a,w=new h.a({deallocator:void 0}),S=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.apply(this,arguments)).height=1,e.indexHint=new c.a,e}return n}((function e(){Object(s.a)(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0})),X=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this)).children=e,a.leaf=!0,a}return n}(S),Y=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this)).children=e,a.leaf=!1,a}return n}(S)},911:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(2),i=n(3),r=n(14),s=n(905),o={minX:0,minY:0,maxX:0,maxY:0};var u=function(){function e(){var t=this;Object(a.a)(this,e),this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new s.a(9,Object(r.a)("csp-restrictions")?function(e){return{minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]}}:["[0]","[1]","[2]","[3]"]),this._loadIndex=function(){if(t._indexInvalid){var e=new Array(t._idByBounds.size),n=0;t._idByBounds.forEach((function(t,a){e[n++]=a})),t._indexInvalid=!1,t._index.clear(),t._index.load(e)}else t._boundsToLoad.length&&(t._index.load(t._boundsToLoad.filter((function(e){return t._idByBounds.has(e)}))),t._boundsToLoad.length=0)}}return Object(i.a)(e,[{key:"clear",value:function(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}},{key:"delete",value:function(e){var t=this._boundsById.get(e);this._boundsById.delete(e),t&&(this._idByBounds.delete(t),this._indexInvalid||this._index.remove(t))}},{key:"forEachInBounds",value:function(e,t){var n=this;this._loadIndex(),function(e,t,n){o.minX=t[0],o.minY=t[1],o.maxX=t[2],o.maxY=t[3],e.search(o,n)}(this._index,e,(function(e){return t(n._idByBounds.get(e))}))}},{key:"get",value:function(e){return this._boundsById.get(e)}},{key:"has",value:function(e){return this._boundsById.has(e)}},{key:"invalidateIndex",value:function(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}},{key:"set",value:function(e,t){if(!this._indexInvalid){var n=this._boundsById.get(e);n&&(this._index.remove(n),this._idByBounds.delete(n))}this._boundsById.set(e,t),t&&(this._idByBounds.set(t,e),this._indexInvalid||(this._boundsToLoad.push(t),this._boundsToLoad.length>5e4&&this._loadIndex()))}}]),e}()},928:function(e,t,n){"use strict";var a=n(15),i=n(2),r=n(3),s=n(6),o=n(12),u=n(20),c=n(70),h=n(105),d=n(511),l=n(161),f=n(911),m=n(275),v=n(178),y=n(848),p={getObjectId:function(e){return e.objectId},getAttributes:function(e){return e.attributes},getAttribute:function(e,t){return e.attributes[t]},cloneWithGeometry:function(e,t){return new m.a(t,e.attributes,null,e.objectId)},getGeometry:function(e){return e.geometry},getCentroid:function(e,t){return e.centroid||(e.centroid=Object(y.a)(new v.a,e.geometry,t.hasZ,t.hasM)),e.centroid}},x=function(){function e(t){Object(i.a)(this,e),this.geometryInfo=t,this._boundsStore=new f.a,this._featuresById=new Map,this._markedIds=new Set,this.events=new c.a,this.featureAdapter=p}return Object(r.a)(e,[{key:"geometryType",get:function(){return this.geometryInfo.geometryType}},{key:"hasM",get:function(){return this.geometryInfo.hasM}},{key:"hasZ",get:function(){return this.geometryInfo.hasZ}},{key:"numFeatures",get:function(){return this._featuresById.size}},{key:"fullBounds",get:function(){var e=this;if(!this.numFeatures)return null;var t=Object(h.i)(h.a);return this._featuresById.forEach((function(n){var a=e._boundsStore.get(n.objectId);a&&(t[0]=Math.min(a[0],t[0]),t[1]=Math.min(a[1],t[1]),t[2]=Math.max(a[2],t[2]),t[3]=Math.max(a[3],t[3]))})),t}},{key:"storeStatistics",get:function(){var e=0;return this._featuresById.forEach((function(t){t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}},{key:"add",value:function(e){this._add(e),this._emitChanged()}},{key:"addMany",value:function(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._add(i)}}catch(r){n.e(r)}finally{n.f()}this._emitChanged()}},{key:"clear",value:function(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}},{key:"removeById",value:function(e){var t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}},{key:"removeManyById",value:function(e){this._boundsStore.invalidateIndex();var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,r=this._featuresById.get(i);r&&this._remove(r)}}catch(s){n.e(s)}finally{n.f()}this._emitChanged()}},{key:"forEachBounds",value:function(e,t,n){var i,r=Object(a.a)(e);try{for(r.s();!(i=r.n()).done;){var s=i.value,o=this._boundsStore.get(s.objectId);o&&t(Object(l.k)(n,o))}}catch(u){r.e(u)}finally{r.f()}}},{key:"getFeature",value:function(e){return this._featuresById.get(e)}},{key:"has",value:function(e){return this._featuresById.has(e)}},{key:"forEach",value:function(e){this._featuresById.forEach((function(t){return e(t)}))}},{key:"forEachInBounds",value:function(e,t){var n=this;this._boundsStore.forEachInBounds(e,(function(e){t(n._featuresById.get(e))}))}},{key:"startMarkingUsedFeatures",value:function(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}},{key:"sweep",value:function(){var e=this,t=!1;this._featuresById.forEach((function(n,a){e._markedIds.has(a)||(t=!0,e._remove(n))})),this._markedIds.clear(),t&&this._emitChanged()}},{key:"_emitChanged",value:function(){this.events.emit("changed",void 0)}},{key:"_add",value:function(e){if(e){var t=e.objectId;if(null!=t){var n,a=this._featuresById.get(t);if(this._markedIds.add(t),a?(e.displayId=a.displayId,n=this._boundsStore.get(t),this._boundsStore.delete(t)):Object(s.k)(this.onFeatureAdd)&&this.onFeatureAdd(e),!e.geometry||!e.geometry.coords||!e.geometry.coords.length)return this._boundsStore.set(t,null),void this._featuresById.set(t,e);n=Object(d.r)(n||Object(h.i)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),this._boundsStore.set(t,n),this._featuresById.set(t,e)}else o.a.getLogger("esri.layers.graphics.data.FeatureStore").error(new u.a("featurestore:invalid-feature","feature id is missing",{feature:e}))}}},{key:"_remove",value:function(e){return Object(s.k)(this.onFeatureRemove)&&this.onFeatureRemove(e),this._markedIds.delete(e.objectId),this._boundsStore.delete(e.objectId),this._featuresById.delete(e.objectId),e}}]),e}();t.a=x},970:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(10),i=n(2),r=n(3),s=n(4),o=n(5),u=n(186),c=n(549),h=n(254),d=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,Object(a.a)(Object(a.a)({},e),{},{constraint:new h.b(e.coordinateHelper,e.edgeStart,e.edgeEnd)}))}return Object(r.a)(n,[{key:"hints",get:function(){return[new u.a(1,this.constraint.start,this.constraint.end)]}}]),n}(c.a),l=n(570),f=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,Object(a.a)(Object(a.a)({},e),{},{constraint:new h.d(e.coordinateHelper,e.targetPoint)}))}return Object(r.a)(n,[{key:"hints",get:function(){return[new l.a(this.targetPoint)]}}]),n}(c.a);function m(e,t){switch(e.type){case"edge":return new d({coordinateHelper:t,edgeStart:t.fromPoint(e.start),edgeEnd:t.fromPoint(e.end),targetPoint:t.fromPoint(e.target),objectId:e.objectId});case"vertex":return new f({coordinateHelper:t,targetPoint:t.fromPoint(e.target),objectId:e.objectId})}}}}]);
//# sourceMappingURL=58.3cb6da23.chunk.js.map