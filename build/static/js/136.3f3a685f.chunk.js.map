{"version":3,"sources":["../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/tileUtils.js","../node_modules/@arcgis/core/views/2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js","../node_modules/@arcgis/core/views/3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js","../node_modules/@arcgis/core/views/support/TileTreeDebugger.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/WorkerTileTreeDebugger.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTilesSimple.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/FeatureServiceSnappingSource.js","../node_modules/@arcgis/core/views/interactive/snapping/candidates/EdgeSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js"],"names":["e","o","r","fromAABoundingRect","extent","s","distance","t","n","x","y","create","a","pointOfInterest","this","tilesCoveringView","view","center","sort","p","scale","layer","minScale","maxScale","ready","featuresTilingScheme","state","tileInfo","scaleEnabled","getTileCoverage","spans","lodInfo","i","level","row","colFrom","l","colTo","id","col","normalizeCol","updateTileInfo","push","size","handles","add","watch","notifyChange","readOnly","prototype","constructOnly","u","effectivePointOfInterest","map","length","slice","filterTiles","featureTiles","tiles","toArray","c","tilingScheme","toTileInfo","tileSize","pointsOfInterest","focus","location","remove","addClient","filter","Math","abs","measures","screenRect","visibility","lij","b","updating","enablePolygons","enableLabels","_polygons","Map","_labels","_enabled","_symbols","color","outline","width","update","clear","getTiles","Array","Set","keys","forEach","toString","delete","g","d","geometry","has","m","symbol","set","label","loadPriority","_","f","w","j","type","h","verticalOffset","screenLength","callout","border","symbolLayers","text","halo","material","haloColor","haloSize","get","JSON","stringify","graphics","removeMany","addMany","from","values","setInterval","fetchDebugInfo","clearInterval","destroy","debugInfo","storedTiles","data","featureCount","pendingTiles","fromExtent","spatialReference","handle","getDebugInfo","then","availability","workerHandleUpdating","editId","updatingHandles","workerHandle","scheduler","on","_set","serviceInfoFromLayer","configuration","convertConfiguration","serviceInfo","toJSON","addPromise","invokeMethod","point","coordinateHelper","toPoint","types","createQuery","invoke","result","edits","addedFeatures","objectId","deletedFeatures","updatedFeatures","customParameters","geometryType","url","parsedUrl","path","fields","capabilities","objectIdField","timeInfo","strategy","origin","lods","resolution","tilesOfInterest","layerSource","resourceController","setup","updateTiles","updateTilesParameters","configure","debug","applyEdits","refresh","fetchCandidates","candidates","constraint","edgeStart","edgeEnd","start","end","targetPoint","fromPoint","target"],"mappings":"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","file":"static/js/136.3f3a685f.chunk.js","sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{s as t}from\"../../../../../chunks/vec3.js\";import{a as o}from\"../../../../../chunks/vec4f64.js\";import{boundedPlane as r}from\"../../../../3d/support/geometryUtils.js\";function e(o,e){return r.fromAABoundingRect(e.extent,s),r.distance(s,t(n,o.x,o.y,0))}const s=r.create(),n=o();export{e as distanceToTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import\"../../../../../../core/has.js\";import{isSome as t,isNone as r}from\"../../../../../../core/maybe.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../../core/urlUtils.js\";import\"../../../../../../core/uuid.js\";import\"../../../../../../portal/support/resourceExtension.js\";import s from\"../../../../../../core/Accessor.js\";import{HandleOwnerMixin as l}from\"../../../../../../core/HandleOwner.js\";import{scaleBoundsPredicate as n}from\"../../../../../support/layerViewUtils.js\";import{distanceToTile as p}from\"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";let a=class extends(l(s)){constructor(e){super(e),this.pointOfInterest=null}get tiles(){const e=this.tilesCoveringView,r=t(this.pointOfInterest)?this.pointOfInterest:this.view.center;return e.sort(((e,t)=>p(r,e)-p(r,t))),e}scaleEnabled(){return n(this.view.scale,this.layer.minScale||0,this.layer.maxScale||0)}get tilesCoveringView(){if(!this.view.ready||!this.view.featuresTilingScheme||!this.view.state||r(this.tileInfo))return[];if(!this.scaleEnabled)return[];const{spans:e,lodInfo:t}=this.view.featuresTilingScheme.getTileCoverage(this.view.state,0),{level:i}=t,o=[];for(const{row:r,colFrom:s,colTo:l}of e)for(let e=s;e<=l;e++){const s={id:null,level:i,row:r,col:t.normalizeCol(e)};this.tileInfo.updateTileInfo(s),o.push(s)}return o}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featuresTilingScheme)?void 0:t.tileInfo)?e:null}get tileSize(){return t(this.tileInfo)?this.tileInfo.size[0]:256}initialize(){this.handles.add(this.watch(\"view.state.viewpoint\",(()=>this.notifyChange(\"tilesCoveringView\")),!0))}};e([i({readOnly:!0})],a.prototype,\"tiles\",null),e([i({readOnly:!0})],a.prototype,\"scaleEnabled\",null),e([i({readOnly:!0})],a.prototype,\"tilesCoveringView\",null),e([i({readOnly:!0})],a.prototype,\"tileInfo\",null),e([i({readOnly:!0})],a.prototype,\"tileSize\",null),e([i({constructOnly:!0})],a.prototype,\"view\",void 0),e([i({constructOnly:!0})],a.prototype,\"layer\",void 0),e([i()],a.prototype,\"pointOfInterest\",void 0),a=e([o(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles2D\")],a);export{a as FeatureServiceTiles2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../../chunks/tslib.es6.js\";import\"../../../../../../core/has.js\";import{isSome as t,isNone as r}from\"../../../../../../core/maybe.js\";import\"../../../../../../core/Logger.js\";import\"../../../../../../core/accessorSupport/ensureType.js\";import{property as i}from\"../../../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../../core/urlUtils.js\";import\"../../../../../../core/uuid.js\";import\"../../../../../../portal/support/resourceExtension.js\";import{init as o}from\"../../../../../../core/watchUtils.js\";import{HandleOwner as l}from\"../../../../../../core/HandleOwner.js\";import{distanceToTile as n}from\"../../../../../interactive/snapping/featureSources/featureServiceSource/tileUtils.js\";let u=class extends l{constructor(e){super(e),this.pointOfInterest=null}get tiles(){const e=this.tilesCoveringView,r=this.effectivePointOfInterest;if(t(r)){const t=e.map((e=>n(r,e)));for(let i=1;i<t.length;i++)if(t[i-1]>t[i])return e.sort(((e,t)=>n(r,e)-n(r,t))),e.slice()}return e}get tilesCoveringView(){var e,t;return this.filterTiles(null==(e=this.view.featureTiles)||null==(t=e.tiles)?void 0:t.toArray()).map(c)}get tileInfo(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tilingScheme.toTileInfo())?e:null}get tileSize(){var e,t;return null!=(e=null==(t=this.view.featureTiles)?void 0:t.tileSize)?e:256}get effectivePointOfInterest(){var e;const r=this.pointOfInterest;return t(r)?r:null==(e=this.view.pointsOfInterest)?void 0:e.focus.location}initialize(){this.handles.add(o(this.view,\"featureTiles\",(e=>{this.handles.remove(p),e&&this.handles.add(e.addClient(),p)})))}filterTiles(e){if(r(e))return[];return e.filter((e=>Math.abs(e.measures.screenRect[3]-e.measures.screenRect[1])>a&&2===e.measures.visibility))}};function c({lij:[e,t,r],extent:i}){return{id:`${e}/${t}/${r}`,level:e,row:t,col:r,extent:i}}e([i({readOnly:!0})],u.prototype,\"tiles\",null),e([i({readOnly:!0})],u.prototype,\"tilesCoveringView\",null),e([i({readOnly:!0})],u.prototype,\"tileInfo\",null),e([i({readOnly:!0})],u.prototype,\"tileSize\",null),e([i({constructOnly:!0})],u.prototype,\"view\",void 0),e([i()],u.prototype,\"pointOfInterest\",void 0),e([i()],u.prototype,\"effectivePointOfInterest\",null),u=e([s(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTiles3D\")],u);const a=50,p=\"feature-tiles\";export{u as FeatureServiceTiles3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../core/has.js\";import{isSome as s,isNone as o}from\"../../core/maybe.js\";import\"../../core/Logger.js\";import\"../../core/accessorSupport/ensureType.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import\"../../core/urlUtils.js\";import\"../../core/uuid.js\";import\"../../portal/support/resourceExtension.js\";import i from\"../../core/Accessor.js\";import{lerp as l}from\"../../core/mathUtils.js\";import a from\"../../Color.js\";import n from\"../../symbols/TextSymbol3DLayer.js\";import h from\"../../symbols/PointSymbol3D.js\";import p from\"../../symbols/SimpleFillSymbol.js\";import c from\"../../symbols/TextSymbol.js\";import m from\"../../Graphic.js\";const y=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let b=class extends i{constructor(e){super(e),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=y.map((e=>new p({color:[e[0],e[1],e[2],.6],outline:{color:\"black\",width:1}}))),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(e){this._enabled!==e&&(this._enabled=e,this.update())}update(){if(!this._enabled)return void this.clear();const e=e=>{if(s(e.label))return e.label;let o=e.lij.toString();return s(e.loadPriority)&&(o+=` (${e.loadPriority})`),o},t=this.getTiles(),r=new Array,i=new Set((this._labels.size,this._labels.keys()));t.forEach(((p,y)=>{const b=p.lij.toString();i.delete(b);const g=p.lij[0],d=p.geometry;if(this.enablePolygons&&!this._polygons.has(b)){const e=new m({geometry:d,symbol:this._symbols[g%this._symbols.length]});this._polygons.set(b,e),r.push(e)}if(this.enableLabels){const i=e(p),g=y/(t.length-1),u=l(0,200,g),_=l(20,6,g)/.75,f=s(p.loadPriority)&&p.loadPriority>=t.length,w=new a([u,f?0:u,f?0:u]),j=\"3d\"===this.view.type?()=>new h({verticalOffset:{screenLength:40/.75},callout:{type:\"line\",color:\"white\",border:{color:\"black\"}},symbolLayers:[new n({text:i,halo:{color:\"white\",size:1/.75},material:{color:w},size:_})]}):()=>new c({text:i,haloColor:\"white\",haloSize:1/.75,color:w,size:_});if(this._labels.has(b)){const e=this._labels.get(b),s=j();(o(e.symbol)||JSON.stringify(s)!==JSON.stringify(e.symbol))&&(e.symbol=s)}else{const e=new m({geometry:d.extent.center,symbol:j()});this._labels.set(b,e),r.push(e)}}}));const p=new Array;i.forEach((e=>{this._polygons.has(e)&&(p.push(this._polygons.get(e)),this._polygons.delete(e)),this._labels.has(e)&&(p.push(this._labels.get(e)),this._labels.delete(e))})),this.view.graphics.removeMany(p),this.view.graphics.addMany(r)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};e([t({constructOnly:!0})],b.prototype,\"view\",void 0),e([t({readOnly:!0})],b.prototype,\"updating\",void 0),e([t()],b.prototype,\"enabled\",null),b=e([r(\"esri.views.support.TileTreeDebugger\")],b);export{b as TileTreeDebugger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{makeHandle as t}from\"../../../../core/handleUtils.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import s from\"../../../../geometry/Polygon.js\";import i from\"../../../../core/Handles.js\";import{toExtent as a}from\"../../../../geometry/support/aaBoundingRect.js\";import{TileTreeDebugger as n}from\"../../../support/TileTreeDebugger.js\";let p=class extends n{constructor(e){super(e),this.handles=new i}initialize(){const e=setInterval((()=>this.fetchDebugInfo()),2e3);this.handles.add(t((()=>clearInterval(e))))}destroy(){this.handles.destroy()}getTiles(){if(!this.debugInfo)return[];const e=new Map,t=new Map;this.debugInfo.storedTiles.forEach((t=>{e.set(t.data.id,t.featureCount)})),this.debugInfo.pendingTiles.forEach((r=>{e.set(r.data.id,r.featureCount),t.set(r.data.id,r.state)}));const r=r=>{var o;const s=t.get(r),i=null!=(o=e.get(r))?o:\"?\";return s?`${s}:${i}\\n${r}`:`store:${i}\\n${r}`},o=new Map;return this.debugInfo.storedTiles.forEach((e=>{o.set(e.data.id,e.data)})),this.debugInfo.pendingTiles.forEach((e=>{o.set(e.data.id,e.data)})),Array.from(o.values()).map((e=>({lij:[e.level,e.row,e.col],geometry:s.fromExtent(a(e.extent,this.view.spatialReference)),label:r(e.id)})))}fetchDebugInfo(){this.handle.getDebugInfo(null).then((e=>{this.debugInfo=e,this.update()}))}};e([r({constructOnly:!0})],p.prototype,\"handle\",void 0),p=e([o(\"esri.views.interactive.snapping.featureSources.WorkerTileTreeDebugger\")],p);export{p as WorkerTileTreeDebugger};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{isNone as t,isSome as i}from\"../../../../../core/maybe.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import{whenOrAbort as a}from\"../../../../../core/promiseUtils.js\";import n from\"../../../../../geometry/Point.js\";import{featureGeometryTypeKebabDictionary as s}from\"../../../../../geometry/support/typeUtils.js\";import{HandleOwner as d}from\"../../../../../core/HandleOwner.js\";import{WorkerHandle as l}from\"../../../../../core/workers/WorkerHandle.js\";let p=class extends d{constructor(e){super(e),this.availability=0,this.workerHandleUpdating=!0,this.editId=0}get updating(){return this.updatingHandles.updating||this.workerHandleUpdating}destroy(){this.workerHandle.destroy()}initialize(){this.workerHandle=new u(this.scheduler),this.handles.add([this.workerHandle.on(\"notify-updating\",(({updating:e})=>this.workerHandleUpdating=e)),this.workerHandle.on(\"notify-availability\",(({availability:e})=>this._set(\"availability\",e)))])}async setup(e,i){const r=this.serviceInfoFromLayer(e.layer);if(t(r))return;const o={configuration:this.convertConfiguration(e.configuration),serviceInfo:r,spatialReference:e.spatialReference.toJSON()};await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"setup\",o,i)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},i))}async configure(e,t){const i=this.convertConfiguration(e);await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"configure\",i,t)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}async refresh(e){await this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"refresh\",{},e)),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},e))}async fetchCandidates(e,t){const r={distance:e.distance,point:e.coordinateHelper.toPoint(e.point,new n).toJSON(),types:e.types,filter:i(e.filter)?e.filter.createQuery().toJSON():null};return this.workerHandle.invoke(r,t)}async updateTiles(e,t){const r={tiles:e.tiles,tileInfo:i(e.tileInfo)?e.tileInfo.toJSON():null,tileSize:e.tileSize};await this.workerHandle.invokeMethod(\"updateTiles\",r,t),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}async applyEdits(e,t){var i,r,o,n,s,d;const l=this.editId++,p={id:l};await this.workerHandle.invokeMethod(\"beginApplyEdits\",p,t),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t));const u=await a(e.result,t),c={id:l,edits:{addedFeatures:null!=(i=null==(r=u.addedFeatures)?void 0:r.map((({objectId:e})=>e)))?i:[],deletedFeatures:null!=(o=null==(n=u.deletedFeatures)?void 0:n.map((({objectId:e})=>e)))?o:[],updatedFeatures:null!=(s=null==(d=u.updatedFeatures)?void 0:d.map((({objectId:e})=>e)))?s:[]}};await this.workerHandle.invokeMethod(\"endApplyEdits\",c,t),this.updatingHandles.addPromise(this.workerHandle.invokeMethod(\"whenNotUpdating\",{},t))}getDebugInfo(e){return this.workerHandle.invokeMethod(\"getDebugInfo\",{},e)}convertConfiguration(e){return{filter:i(e.filter)?e.filter.toJSON():null,customParameters:e.customParameters}}serviceInfoFromLayer(e){var t;return\"multipatch\"===e.geometryType||\"mesh\"===e.geometryType?null:{url:e.parsedUrl.path,fields:e.fields.map((e=>e.toJSON())),geometryType:s.toJSON(e.geometryType),capabilities:e.capabilities,objectIdField:e.objectIdField,spatialReference:e.spatialReference.toJSON(),timeInfo:null==(t=e.timeInfo)?void 0:t.toJSON()}}};e([r({constructOnly:!0})],p.prototype,\"scheduler\",void 0),e([r({readOnly:!0})],p.prototype,\"updating\",null),e([r({readOnly:!0})],p.prototype,\"availability\",void 0),e([r()],p.prototype,\"workerHandleUpdating\",void 0),p=e([o(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceSnappingSourceWorkerHandle\")],p);class u extends l{constructor(e){super(\"FeatureServiceSnappingSourceWorker\",\"fetchCandidates\",e,{strategy:\"dedicated\"})}getTransferList(){return[]}}export{p as FeatureServiceSnappingSourceWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import{property as r}from\"../../../../../core/accessorSupport/decorators/property.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../../core/urlUtils.js\";import\"../../../../../core/uuid.js\";import\"../../../../../portal/support/resourceExtension.js\";import t from\"../../../../../core/Accessor.js\";import s from\"../../../../../geometry/Point.js\";import{fromValues as i}from\"../../../../../geometry/support/aaBoundingRect.js\";import p from\"../../../../../layers/support/LOD.js\";import l from\"../../../../../layers/support/TileInfo.js\";let n=class extends t{constructor(e){super(e),this.pointOfInterest=null}get tiles(){return[{id:\"0/0/0\",level:0,row:0,col:0,extent:i(-1e8,-1e8,1e8,1e8)}]}get tileInfo(){return new l({origin:new s({x:-1e8,y:1e8,spatialReference:this.layer.spatialReference}),size:[512,512],lods:[new p({level:0,scale:1,resolution:390625})],spatialReference:this.layer.spatialReference})}get tileSize(){return this.tileInfo.size[0]}};e([r({readOnly:!0})],n.prototype,\"tiles\",null),e([r({readOnly:!0})],n.prototype,\"tileInfo\",null),e([r({readOnly:!0})],n.prototype,\"tileSize\",null),e([r({constructOnly:!0})],n.prototype,\"layer\",void 0),e([r()],n.prototype,\"pointOfInterest\",void 0),n=e([o(\"esri.views.interactive.snapping.featureSources.featureServiceSource.FeatureServiceTilesSimple\")],n);export{n as FeatureServiceTilesSimple};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import\"../../../../core/has.js\";import{isSome as r}from\"../../../../core/maybe.js\";import\"../../../../core/Logger.js\";import\"../../../../core/accessorSupport/ensureType.js\";import{destroyHandle as t}from\"../../../../core/handleUtils.js\";import{property as i}from\"../../../../core/accessorSupport/decorators/property.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import\"../../../../core/urlUtils.js\";import\"../../../../core/uuid.js\";import\"../../../../portal/support/resourceExtension.js\";import{reaction as o}from\"../../../../core/accessorSupport/trackingUtils.js\";import a from\"../../../../core/Accessor.js\";import n from\"../../../../geometry/Point.js\";import{init as l}from\"../../../../core/watchUtils.js\";import u from\"../../../support/debugFlags.js\";import{HandleOwnerMixin as p}from\"../../../../core/HandleOwner.js\";import{convertSnappingCandidate as c}from\"./queryEngineUtils.js\";import{FeatureServiceTiles2D as d}from\"../../../2d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles2D.js\";import{FeatureServiceTiles3D as h}from\"../../../3d/interactive/snapping/featureSources/featureServiceSource/FeatureServiceTiles3D.js\";import{WorkerTileTreeDebugger as f}from\"./WorkerTileTreeDebugger.js\";import{FeatureServiceSnappingSourceWorkerHandle as m}from\"./featureServiceSource/FeatureServiceSnappingSourceWorkerHandle.js\";import{FeatureServiceTilesSimple as y}from\"./featureServiceSource/FeatureServiceTilesSimple.js\";let g=class extends(p(a)){constructor(e){super(e)}get updateTilesParameters(){return{tiles:this.tilesOfInterest.tiles,tileInfo:this.tilesOfInterest.tileInfo,tileSize:this.tilesOfInterest.tileSize}}get updating(){return this.workerHandle.updating||this.updatingHandles.updating}get configuration(){return{filter:this.layer.createQuery(),customParameters:this.layer.customParameters}}get availability(){return this.workerHandle.availability}get layer(){return this.layerSource.layer}initialize(){if(r(this.view))switch(this.view.type){case\"2d\":this.tilesOfInterest=new d({view:this.view,layer:this.layer});break;case\"3d\":this.tilesOfInterest=new h({view:this.view})}else this.tilesOfInterest=new y({layer:this.layer});if(this.workerHandle=new m({scheduler:r(this.view)&&\"3d\"===this.view.type?this.view.resourceController.scheduler:null}),this.handles.add([t(this.workerHandle)]),this.workerHandle.setup({layer:this.layer,spatialReference:this.spatialReference,configuration:this.configuration},null),this.updatingHandles.add(this,\"updateTilesParameters\",(()=>this.workerHandle.updateTiles(this.updateTilesParameters,null)),2),this.handles.add([o((()=>this.configuration),(e=>this.workerHandle.configure(e,null)))]),r(this.view)){const e=this.view;this.handles.add(l(u,\"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES\",(r=>{r&&!this.debug?(this.debug=new f({view:e,handle:this.workerHandle}),this.handles.add(t(this.debug),\"debug\")):!r&&this.debug&&this.handles.remove(\"debug\")})))}this.handles.add(this.layerSource.layer.on(\"apply-edits\",(e=>{this.workerHandle.applyEdits(e,null)})))}refresh(){this.workerHandle.refresh(null)}async fetchCandidates(e,r){this.tilesOfInterest.pointOfInterest=e.coordinateHelper.toPoint(e.point,new n);const{candidates:t}=await this.workerHandle.fetchCandidates({...e,filter:null},r);return{candidates:t.map((r=>c(r,e.coordinateHelper)))}}getDebugInfo(e){return this.workerHandle.getDebugInfo(e)}};e([i({constructOnly:!0})],g.prototype,\"spatialReference\",void 0),e([i({constructOnly:!0})],g.prototype,\"layerSource\",void 0),e([i({constructOnly:!0})],g.prototype,\"view\",void 0),e([i()],g.prototype,\"tilesOfInterest\",void 0),e([i({readOnly:!0})],g.prototype,\"updateTilesParameters\",null),e([i({readOnly:!0})],g.prototype,\"updating\",null),e([i({readOnly:!0})],g.prototype,\"configuration\",null),e([i({readOnly:!0})],g.prototype,\"availability\",null),g=e([s(\"esri.views.interactive.snapping.featureSources.FeatureServiceSnappingSource\")],g);export{g as FeatureServiceSnappingSource};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{LineSnappingHint as t}from\"../hints/LineSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{LineConstraint as r}from\"../SnappingConstraint.js\";class e extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.edgeStart,t.edgeEnd)})}get hints(){return[new t(1,this.constraint.start,this.constraint.end)]}}export{e as EdgeSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{PointSnappingHint as t}from\"../hints/PointSnappingHint.js\";import{FeatureSnappingCandidate as n}from\"./FeatureSnappingCandidate.js\";import{PointConstraint as r}from\"../SnappingConstraint.js\";class i extends n{constructor(t){super({...t,constraint:new r(t.coordinateHelper,t.targetPoint)})}get hints(){return[new t(this.targetPoint)]}}export{i as VertexSnappingCandidate};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.19/esri/copyright.txt for details.\n*/\nimport{EdgeSnappingCandidate as e}from\"../candidates/EdgeSnappingCandidate.js\";import{VertexSnappingCandidate as t}from\"../candidates/VertexSnappingCandidate.js\";function r(r,n){switch(r.type){case\"edge\":return new e({coordinateHelper:n,edgeStart:n.fromPoint(r.start),edgeEnd:n.fromPoint(r.end),targetPoint:n.fromPoint(r.target),objectId:r.objectId});case\"vertex\":return new t({coordinateHelper:n,targetPoint:n.fromPoint(r.target),objectId:r.objectId})}}export{r as convertSnappingCandidate};\n"],"sourceRoot":""}