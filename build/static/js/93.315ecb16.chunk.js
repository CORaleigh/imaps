(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[93],{1175:function(t,e,n){"use strict";n.r(e),n.d(e,"ElevationSamplerWorker",(function(){return f}));var a=n(15),i=n(7),r=n.n(i),h=n(16),o=n(2),s=n(3),c=n(14),l=n(6),u=n(905),f=function(){function t(){Object(o.a)(this,t)}return Object(s.a)(t,[{key:"createIndex",value:function(){var t=Object(h.a)(r.a.mark((function t(e,n){var a,i,h;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=new Array,e.vertexAttributes&&e.vertexAttributes.position){t.next=3;break}return t.abrupt("return",new u.a);case 3:if(i=this.createMeshData(e),!Object(l.k)(n)){t.next=10;break}return t.next=7,n.invoke("createIndexThread",i,{transferList:a});case 7:t.t0=t.sent,t.next=11;break;case 10:t.t0=this.createIndexThread(i).result;case 11:return h=t.t0,t.abrupt("return",this.createPooledRBush().fromJSON(h));case 13:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"createIndexThread",value:function(t){var e=new Float64Array(t.position),n=this.createPooledRBush();return t.components?this.createIndexComponentsThread(n,e,t.components.map((function(t){return new Uint32Array(t)}))):this.createIndexAllThread(n,e)}},{key:"createIndexAllThread",value:function(t,e){for(var n=new Array(e.length/9),a=0,i=0;i<e.length;i+=9)n[a++]=m(e,i+0,i+3,i+6);return t.load(n),{result:t.toJSON()}}},{key:"createIndexComponentsThread",value:function(t,e,n){var i,r=0,h=Object(a.a)(n);try{for(h.s();!(i=h.n()).done;){r+=i.value.length/3}}catch(d){h.e(d)}finally{h.f()}var o,s=new Array(r),c=0,l=Object(a.a)(n);try{for(l.s();!(o=l.n()).done;)for(var u=o.value,f=0;f<u.length;f+=3)s[c++]=m(e,3*u[f+0],3*u[f+1],3*u[f+2])}catch(d){l.e(d)}finally{l.f()}return t.load(s),{result:t.toJSON()}}},{key:"createMeshData",value:function(t){var e=t.vertexAttributes.position.buffer;return!t.components||t.components.some((function(t){return!t.faces}))?{position:e}:{position:e,components:t.components.map((function(t){return t.faces}))}}},{key:"createPooledRBush",value:function(){return new u.a(9,Object(c.a)("csp-restrictions")?function(t){return t}:[".minX",".minY",".maxX",".maxY"])}}]),t}();function m(t,e,n,a){return{minX:Math.min(t[e+0],t[n+0],t[a+0]),maxX:Math.max(t[e+0],t[n+0],t[a+0]),minY:Math.min(t[e+1],t[n+1],t[a+1]),maxY:Math.max(t[e+1],t[n+1],t[a+1]),p0:[t[e+0],t[e+1],t[e+2]],p1:[t[n+0],t[n+1],t[n+2]],p2:[t[a+0],t[a+1],t[a+2]]}}e.default=f},862:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(351),i=Object(a.b)((function(t){var e;void 0!==(e=function(){function t(n,a,i,r,h){for(;r>i;){if(r-i>600){var o=r-i+1,s=a-i+1,c=Math.log(o),l=.5*Math.exp(2*c/3),u=.5*Math.sqrt(c*l*(o-l)/o)*(s-o/2<0?-1:1);t(n,a,Math.max(i,Math.floor(a-s*l/o+u)),Math.min(r,Math.floor(a+(o-s)*l/o+u)),h)}var f=n[a],m=i,d=r;for(e(n,i,a),h(n[r],f)>0&&e(n,i,r);m<d;){for(e(n,m,d),m++,d--;h(n[m],f)<0;)m++;for(;h(n[d],f)>0;)d--}0===h(n[i],f)?e(n,i,d):e(n,++d,r),d<=a&&(i=d+1),a<=d&&(r=d-1)}}function e(t,e,n){var a=t[e];t[e]=t[n],t[n]=a}function n(t,e){return t<e?-1:t>e?1:0}return function(e,a,i,r,h){t(e,a,i||0,r||e.length-1,h||n)}}())&&(t.exports=e)}))},905:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var a=n(4),i=n(5),r=n(15),h=n(2),o=n(3),s=n(6),c=n(107),l=n(128),u=n(862),f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,n=arguments.length>1?arguments[1]:void 0;Object(h.a)(this,t),this.compareMinX=x,this.compareMinY=p,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),n&&("function"==typeof n?this.toBBox=n:this._initFormat(n)),this.clear()}return Object(o.a)(t,[{key:"destroy",value:function(){this.clear(),k.prune(),_.prune(),O.prune(),j.prune()}},{key:"all",value:function(t){this._all(this.data,t)}},{key:"search",value:function(t,e){var n=this.data,a=this.toBBox;if(Y(t,n))for(k.clear();n;){for(var i=0,r=n.children.length;i<r;i++){var h=n.children[i],o=n.leaf?a(h):h;Y(t,o)&&(n.leaf?e(h):X(t,o)?this._all(h,e):k.push(h))}n=k.pop()}}},{key:"collides",value:function(t){var e=this.data,n=this.toBBox;if(!Y(t,e))return!1;for(k.clear();e;){for(var a=0,i=e.children.length;a<i;a++){var r=e.children[a],h=e.leaf?n(r):r;if(Y(t,h)){if(e.leaf||X(t,h))return!0;k.push(r)}}e=k.pop()}return!1}},{key:"load",value:function(t){if(!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var a=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===a.height)this._splitRoot(this.data,a);else{if(this.data.height<a.height){var i=this.data;this.data=a,a=i}this._insert(a,this.data.height-a.height-1,!0)}else this.data=a;return this}},{key:"insert",value:function(t){return t&&this._insert(t,this.data.height-1),this}},{key:"clear",value:function(){return this.data=new A([]),this}},{key:"remove",value:function(t){if(!t)return this;var e,n=this.data,a=null,i=0,r=!1,h=this.toBBox(t);for(O.clear(),j.clear();n||O.length>0;){var o;if(n||(n=Object(s.d)(O.pop()),a=O.data[O.length-1],i=null!=(o=j.pop())?o:0,r=!0),n.leaf&&-1!==(e=Object(c.e)(n.children,t,n.children.length,n.indexHint)))return n.children.splice(e,1),O.push(n),this._condense(O),this;r||n.leaf||!X(n,h)?a?(i++,n=a.children[i],r=!1):n=null:(O.push(n),j.push(i),i=0,a=n,n=n.children[0])}return this}},{key:"toJSON",value:function(){return this.data}},{key:"fromJSON",value:function(t){return this.data=t,this}},{key:"_all",value:function(t,e){var n=t;for(_.clear();n;){var a;if(!0===n.leaf){var i,h=Object(r.a)(n.children);try{for(h.s();!(i=h.n()).done;){e(i.value)}}catch(o){h.e(o)}finally{h.f()}}else _.pushArray(n.children);n=null!=(a=_.pop())?a:null}}},{key:"_build",value:function(t,e,n,a){var i=n-e+1,r=this._maxEntries;if(i<=r){var h=new A(t.slice(e,n+1));return m(h,this.toBBox),h}a||(a=Math.ceil(Math.log(i)/Math.log(r)),r=Math.ceil(i/Math.pow(r,a-1)));var o=new S([]);o.height=a;var s=Math.ceil(i/r),c=s*Math.ceil(Math.sqrt(r));B(t,e,n,c,this.compareMinX);for(var l=e;l<=n;l+=c){var u=Math.min(l+c-1,n);B(t,l,u,s,this.compareMinY);for(var f=l;f<=u;f+=s){var d=Math.min(f+s-1,u);o.children.push(this._build(t,f,d,a-1))}}return m(o,this.toBBox),o}},{key:"_chooseSubtree",value:function(t,e,n,a){for(;a.push(e),!0!==e.leaf&&a.length-1!==n;){for(var i=void 0,r=1/0,h=1/0,o=0,s=e.children.length;o<s;o++){var c=e.children[o],l=M(c),u=b(t,c)-l;u<h?(h=u,r=l<r?l:r,i=c):u===h&&l<r&&(r=l,i=c)}e=i||e.children[0]}return e}},{key:"_insert",value:function(t,e,n){var a=this.toBBox,i=n?t:a(t);O.clear();var r=this._chooseSubtree(i,this.data,e,O);for(r.children.push(t),v(r,i);e>=0&&O.data[e].children.length>this._maxEntries;)this._split(O,e),e--;this._adjustParentBBoxes(i,O,e)}},{key:"_split",value:function(t,e){var n=t.data[e],a=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,a);var r=this._chooseSplitIndex(n,i,a);if(r){var h=n.children.splice(r,n.children.length-r),o=n.leaf?new A(h):new S(h);o.height=n.height,m(n,this.toBBox),m(o,this.toBBox),e?t.data[e-1].children.push(o):this._splitRoot(n,o)}else console.log("  Error: assertion failed at PooledRBush._split: no valid split index")}},{key:"_splitRoot",value:function(t,e){this.data=new S([t,e]),this.data.height=t.height+1,m(this.data,this.toBBox)}},{key:"_chooseSplitIndex",value:function(t,e,n){var a,i,r;a=i=1/0;for(var h=e;h<=n-e;h++){var o=d(t,0,h,this.toBBox),s=d(t,h,n,this.toBBox),c=y(o,s),l=M(o)+M(s);c<a?(a=c,r=h,i=l<i?l:i):c===a&&l<i&&(i=l,r=h)}return r}},{key:"_chooseSplitAxis",value:function(t,e,n){var a=t.leaf?this.compareMinX:x,i=t.leaf?this.compareMinY:p;this._allDistMargin(t,e,n,a)<this._allDistMargin(t,e,n,i)&&t.children.sort(a)}},{key:"_allDistMargin",value:function(t,e,n,a){t.children.sort(a);for(var i=this.toBBox,r=d(t,0,e,i),h=d(t,n-e,n,i),o=g(r)+g(h),s=e;s<n-e;s++){var c=t.children[s];v(r,t.leaf?i(c):c),o+=g(r)}for(var l=n-e-1;l>=e;l--){var u=t.children[l];v(h,t.leaf?i(u):u),o+=g(h)}return o}},{key:"_adjustParentBBoxes",value:function(t,e,n){for(var a=n;a>=0;a--)v(e.data[a],t)}},{key:"_condense",value:function(t){for(var e=t.length-1;e>=0;e--){var n=t.data[e];if(0===n.children.length)if(e>0){var a=t.data[e-1],i=a.children;i.splice(Object(c.e)(i,n,i.length,a.indexHint),1)}else this.clear();else m(n,this.toBBox)}}},{key:"_initFormat",value:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}]),t}();function m(t,e){d(t,0,t.children.length,e,t)}function d(t,e,n,a,i){i||(i=new A([])),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var r,h=e;h<n;h++)r=t.children[h],v(i,t.leaf?a(r):r);return i}function v(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function x(t,e){return t.minX-e.minX}function p(t,e){return t.minY-e.minY}function M(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function g(t){return t.maxX-t.minX+(t.maxY-t.minY)}function b(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function y(t,e){var n=Math.max(t.minX,e.minX),a=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),r=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,r-a)}function X(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function Y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function B(t,e,n,a,i){for(var r=[e,n];r.length;){var h=Object(s.d)(r.pop()),o=Object(s.d)(r.pop());if(!(h-o<=a)){var c=o+Math.ceil((h-o)/a/2)*a;Object(u.a)(t,c,o,h,i),r.push(o,c,c,h)}}}var k=new l.a,_=new l.a,O=new l.a,j=new l.a({deallocator:void 0}),w=function(t){Object(a.a)(n,t);var e=Object(i.a)(n);function n(){var t;return Object(h.a)(this,n),(t=e.apply(this,arguments)).height=1,t.indexHint=new c.a,t}return n}((function t(){Object(h.a)(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0})),A=function(t){Object(a.a)(n,t);var e=Object(i.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this)).children=t,a.leaf=!0,a}return n}(w),S=function(t){Object(a.a)(n,t);var e=Object(i.a)(n);function n(t){var a;return Object(h.a)(this,n),(a=e.call(this)).children=t,a.leaf=!1,a}return n}(w)}}]);
//# sourceMappingURL=93.315ecb16.chunk.js.map