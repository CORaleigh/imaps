(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[18],{1025:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r(2),n=r(3),o=r(29),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.a)(this,e),this._options=t}return Object(n.a)(e,[{key:"toQueryParams",value:function(e){var t=this;if(!e)return null;var r=e.toJSON(),a={};return Object.keys(r).forEach((function(e){var n=t._options[e];if(n){var s="boolean"!=typeof n&&n.name?n.name:e,i="boolean"!=typeof n&&n.getter?n.getter(r):r[e];null!=i&&(a[s]=function(e){if(!Array.isArray(e))return!1;var t=Object(o.a)(e,1)[0];return"number"==typeof t||"string"==typeof t}(i)?i.join(","):"object"==typeof i?JSON.stringify(i):i)}else a[e]=r[e]}),this),a}}]),e}();function i(e){return new s(e)}},1026:function(e,t,r){"use strict";var a=r(2),n=r(4),o=r(5),s=r(0),i=(r(14),r(12),r(17),r(1)),u=r(45),c=r(8),l=(r(11),r(18),r(19),r(463)),p=new u.a({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"}),f=function(e){Object(n.a)(r,e);var t=Object(o.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).type=null,n}return r}(l.a);Object(s.a)([Object(i.b)({type:String,json:{read:p.read,write:p.write}})],f.prototype,"type",void 0);var d=f=Object(s.a)([Object(c.a)("esri.tasks.support.NAMessage")],f);t.a=d},1027:function(e,t,r){"use strict";r.d(t,"a",(function(){return w}));var a=r(15),n=r(7),o=r.n(n),s=r(2),i=r(3),u=r(4),c=r(5),l=r(16),p=r(0),f=(r(14),r(90)),d=r(6),v=(r(12),r(17),r(1),r(8)),b=r(20),y=r(11),h=(r(18),r(19),r(54)),j=r(302);function O(e,t){return m.apply(this,arguments)}function m(){return(m=Object(l.a)(o.a.mark((function e(t,r){var a,n,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(h.default)(t+("/"===t[t.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json",token:r}});case 3:return a=e.sent,n=a.data,s=n.supportedTravelModes,i=n.defaultTravelMode,e.abrupt("return",{supportedTravelModes:s,defaultTravelMode:i});case 10:throw e.prev=10,e.t0=e.catch(0),new b.a("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function g(e,t){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(o.a.mark((function e(t,r){var n,s,i,u,c,l,p,d,v,b,j,O,m,g,T,w,M,k;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.default)(t.substring(0,t.indexOf("/rest/")+6)+"info",{query:{f:"json",token:r}});case 2:if(n=e.sent,(s=n.data)&&s.owningSystemUrl){e.next=6;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 6:return t=s.owningSystemUrl,e.next=9,Object(h.default)(t+("/"===t[t.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json",token:r}});case 9:if(i=e.sent,u=i.data,c=Object(f.b)("helperServices.routingUtilities.url",u)){e.next=14;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 14:return l=Object(y.J)(t),p=/\/solveClosestFacility$/.test(l.path)?"Route":/\/solveClosestFacility$/.test(l.path)?"ClosestFacility":"ServiceAreas",e.next=18,Object(h.default)(c+("/"===c[c.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:p,token:r}});case 18:if(d=e.sent,v=[],b=null,d&&d.data&&d.data.results&&d.data.results.length){j=d.data.results,O=Object(a.a)(j);try{for(O.s();!(m=O.n()).done;)if("supportedTravelModes"===(g=m.value).paramName){if(g.value&&g.value.features){T=Object(a.a)(g.value.features);try{for(T.s();!(w=T.n()).done;)(M=w.value.attributes)&&(k=JSON.parse(M.TravelMode),v.push(k))}catch(o){T.e(o)}finally{T.f()}}}else"defaultTravelMode"===g.paramName&&(b=g.value)}catch(o){O.e(o)}finally{O.f()}}return e.abrupt("return",{supportedTravelModes:v,defaultTravelMode:b});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var w=function(e){var t=function(e){Object(u.a)(r,e);var t=Object(c.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"getServiceDescription",value:function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._serviceDescriptionPromise||(this._serviceDescriptionPromise=this._fetchServiceDescription(t)),this._serviceDescriptionPromise));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchServiceDescription",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var r,a,n,s,i,u,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.url&&this.parsedUrl){e.next=2;break}throw new b.a("network-service:missing-url","Url to Network service is missing");case 2:return r=this.url,e.next=5,Object(h.default)(r,{query:{f:"json",token:t}});case 5:for(a=e.sent,(n=a.data).supportedTravelModes||(n.supportedTravelModes=[]),s=0;s<n.supportedTravelModes.length;s++)n.supportedTravelModes[s].id||(n.supportedTravelModes[s].id=n.supportedTravelModes[s].itemId);return i=n.currentVersion>=10.4?O(r,t):g(r,t),e.next=12,i;case 12:return u=e.sent,c=u.defaultTravelMode,l=u.supportedTravelModes,e.abrupt("return",(n.defaultTravelMode=c,n.supportedTravelModes=l,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isInputGeometryZAware",value:function(e,t){for(var r=0;r<t.length;r++){var n=e[t[r]];if(n&&n.length){var o,s=Object(a.a)(n);try{for(s.s();!(o=s.n()).done;){var i=o.value;if(Object(d.k)(i)&&i.hasZ)return!0}}catch(u){s.e(u)}finally{s.f()}}}return!1}},{key:"_dropZValuesOffInputGeometry",value:function(e,t){for(var r=0;r<t.length;r++){var n=e[t[r]];if(n&&n.length){var o,s=Object(a.a)(n);try{for(s.s();!(o=s.n()).done;){o.value.z=void 0}}catch(i){s.e(i)}finally{s.f()}}}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}}]),r}(e);return t=Object(p.a)([Object(v.a)("esri.tasks.mixins.NAServiceDescription")],t)},M=function(e){Object(u.a)(r,e);var t=Object(c.a)(r);function r(){return Object(s.a)(this,r),t.apply(this,arguments)}return r}(w(j.a));M=Object(p.a)([Object(v.a)("esri.tasks.mixins.NAServiceDescription")],M)},1079:function(e,t,r){"use strict";r.d(t,"a",(function(){return B})),r.d(t,"b",(function(){return _})),r.d(t,"c",(function(){return P})),r.d(t,"d",(function(){return I})),r.d(t,"e",(function(){return A}));var a=r(7),n=r.n(a),o=r(16),s=r(15),i=r(90),u=r(6),c=r(20),l=r(54),p=r(84),f=r(2),d=r(3),v=r(4),b=r(5),y=r(0),h=(r(14),r(12),r(17),r(1)),j=r(41),O=r(8),m=(r(11),r(18),r(19),r(22)),g=r(72),T=r(150),w=r(1026),M=r(1090),k=function(e){Object(v.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(f.a)(this,r),(a=t.call(this,e)).directions=null,a.route=null,a.routeName=null,a.stops=null,a}return r}(m.a);Object(y.a)([Object(h.b)({type:M.a,json:{write:!0}})],k.prototype,"directions",void 0),Object(y.a)([Object(h.b)({type:g.a,json:{write:!0}})],k.prototype,"route",void 0),Object(y.a)([Object(h.b)({type:String,json:{write:!0}})],k.prototype,"routeName",void 0),Object(y.a)([Object(h.b)({type:[g.a],json:{write:!0}})],k.prototype,"stops",void 0);var x=k=Object(y.a)([Object(O.a)("esri.tasks.support.RouteResult")],k);function N(e){return e&&T.default.fromJSON(e).features.map((function(e){return e}))}var S=function(e){Object(v.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(f.a)(this,r),(a=t.call(this,e)).barriers=null,a.messages=null,a.pointBarriers=null,a.polylineBarriers=null,a.polygonBarriers=null,a.routeResults=null,a}return Object(d.a)(r,[{key:"readPointBarriers",value:function(e,t){return N(t.barriers||t.pointBarriers)}},{key:"readPolylineBarriers",value:function(e){return N(e)}},{key:"readPolygonBarriers",value:function(e){return N(e)}}]),r}(m.a);Object(y.a)([Object(h.b)({aliasOf:"pointBarriers"})],S.prototype,"barriers",void 0),Object(y.a)([Object(h.b)({type:[w.a]})],S.prototype,"messages",void 0),Object(y.a)([Object(h.b)({type:[g.a]})],S.prototype,"pointBarriers",void 0),Object(y.a)([Object(j.a)("pointBarriers",["barriers","pointBarriers"])],S.prototype,"readPointBarriers",null),Object(y.a)([Object(h.b)({type:[g.a]})],S.prototype,"polylineBarriers",void 0),Object(y.a)([Object(j.a)("polylineBarriers")],S.prototype,"readPolylineBarriers",null),Object(y.a)([Object(h.b)({type:[g.a]})],S.prototype,"polygonBarriers",void 0),Object(y.a)([Object(j.a)("polygonBarriers")],S.prototype,"readPolygonBarriers",null),Object(y.a)([Object(h.b)({type:[x]})],S.prototype,"routeResults",void 0);var R=S=Object(y.a)([Object(O.a)("esri.tasks.support.RouteResultsContainer")],S);function B(e,t,r,a){a[r]=[t.length,t.length+e.length],e.forEach((function(e){t.push(e.geometry)}))}function _(e,t){for(var r=0;r<t.length;r++){var a=e[t[r]];if(a&&a.length){var n,o=Object(s.a)(a);try{for(o.s();!(n=o.n()).done;){n.value.z=void 0}}catch(i){o.e(i)}finally{o.f()}}}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}function I(e){var t,r,a=[],n=[],o=e.data,s=o.directions,i=void 0===s?[]:s,u=o.routes,c=(u=void 0===u?{}:u).features,l=void 0===c?[]:c,p=u.spatialReference,f=void 0===p?null:p,d=o.stops,v=(d=void 0===d?{}:d).features,b=void 0===v?[]:v,y=d.spatialReference,h=void 0===y?null:y,j=o.barriers,O=o.polygonBarriers,m=o.polylineBarriers,g=o.messages,T="esri.tasks.RouteTask.NULL_ROUTE_NAME",w=!0,M=l&&f||b&&h||j&&j.spatialReference||O&&O.spatialReference||m&&m.spatialReference;i.forEach((function(e){a.push(t=e.routeName),n[t]={directions:e}})),l.forEach((function(e){-1===a.indexOf(t=e.attributes.Name)&&(a.push(t),n[t]={}),e.geometry&&(e.geometry.spatialReference=M),n[t].route=e})),b.forEach((function(e){r=e.attributes,-1===a.indexOf(t=r.RouteName||T)&&(a.push(t),n[t]={}),t!==T&&(w=!1),e.geometry&&(e.geometry.spatialReference=M),null==n[t].stops&&(n[t].stops=[]),n[t].stops.push(e)})),b.length>0&&!0===w&&(n[a[0]].stops=n[T].stops,delete n[T],a.splice(a.indexOf(T),1));var k=a.map((function(e){return n[e].routeName=e===T?null:e,n[e]}));return R.fromJSON({routeResults:k,pointBarriers:j,polygonBarriers:O,polylineBarriers:m,messages:g})}function A(e,t){for(var r=0;r<t.length;r++){var a=e[t[r]];if(a&&a.length){var n,o=Object(s.a)(a);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(Object(u.k)(i)&&i.hasZ)return!0}}catch(c){o.e(c)}finally{o.f()}}}return!1}function P(e){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(n.a.mark((function e(t){var r,a,o,s,i,u,p;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new c.a("network-service:missing-url","Url to Network service is missing");case 2:return e.next=4,Object(l.default)(t,{query:{f:"json"}});case 4:for(r=e.sent,(a=r.data).supportedTravelModes||(a.supportedTravelModes=[]),o=0;o<a.supportedTravelModes.length;o++)a.supportedTravelModes[o].id||(a.supportedTravelModes[o].id=a.supportedTravelModes[o].itemId);return s=a.currentVersion>=10.4?D(t):U(t),e.next=11,s;case 11:return i=e.sent,u=i.defaultTravelMode,p=i.supportedTravelModes,e.abrupt("return",(a.defaultTravelMode=u,a.supportedTravelModes=p,a));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return q.apply(this,arguments)}function q(){return(q=Object(o.a)(n.a.mark((function e(t){var r,a,o,u,c,f,d,v,b,y,h,j,O,m,g,T,w,M;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.default)(t.substring(0,t.indexOf("/rest/")+6)+"info",{query:{f:"json"}});case 2:if(r=e.sent,(a=r.data)&&a.owningSystemUrl){e.next=6;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 6:return t=a.owningSystemUrl,e.next=9,Object(l.default)(t+("/"===t[t.length-1]?"":"/")+"sharing/rest/portals/self",{query:{f:"json"}});case 9:if(o=e.sent,u=o.data,c=Object(i.b)("helperServices.routingUtilities.url",u)){e.next=14;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 14:return f=Object(p.c)(t),d=/\/solve$/.test(f.path)?"Route":/\/solveClosestFacility$/.test(f.path)?"ClosestFacility":"ServiceAreas",e.next=18,Object(l.default)(c+("/"===c[c.length-1]?"":"/")+"GetTravelModes/execute",{query:{f:"json",serviceName:d}});case 18:if(v=e.sent,b=[],y=null,v&&v.data&&v.data.results&&v.data.results.length){h=v.data.results,j=Object(s.a)(h);try{for(j.s();!(O=j.n()).done;)if("supportedTravelModes"===(m=O.value).paramName){if(m.value&&m.value.features){g=Object(s.a)(m.value.features);try{for(g.s();!(T=g.n()).done;)(w=T.value.attributes)&&(M=JSON.parse(w.TravelMode),b.push(M))}catch(n){g.e(n)}finally{g.f()}}}else"defaultTravelMode"===m.paramName&&(y=m.value)}catch(n){j.e(n)}finally{j.f()}}return e.abrupt("return",{supportedTravelModes:b,defaultTravelMode:y});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return G.apply(this,arguments)}function G(){return(G=Object(o.a)(n.a.mark((function e(t){var r,a,o,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(l.default)(t+("/"===t[t.length-1]?"":"/")+"retrieveTravelModes",{query:{f:"json"}});case 3:return r=e.sent,a=r.data,o=a.supportedTravelModes,s=a.defaultTravelMode,e.abrupt("return",{supportedTravelModes:o,defaultTravelMode:s});case 10:throw e.prev=10,e.t0=e.catch(0),new c.a("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}},1090:function(e,t,r){"use strict";var a=r(2),n=r(3),o=r(4),s=r(5),i=r(0),u=(r(14),r(6)),c=(r(12),r(17),r(1)),l=r(41),p=r(8),f=(r(11),r(18),r(19),r(44)),d=r(43),v=r(57),b=r(97),y=(r(78),r(72)),h=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).extent=null,n.features=null,n.geometryType="polyline",n.routeId=null,n.routeName=null,n.totalDriveTime=null,n.totalLength=null,n.totalTime=null,n}return Object(n.a)(r,[{key:"readFeatures",value:function(e,t){var r=this;(e||[]).forEach((function(e){r._decompressFeatureGeometry(e,t.summary.envelope.spatialReference)}));var a=f.a.fromJSON(t.spatialReference);return e.map((function(e){var t=y.a.fromJSON(e),r=e.geometry&&e.geometry.spatialReference;return t.geometry&&!r&&(Object(u.q)(t.geometry).spatialReference=a),t.strings=e.strings,t.events=(e.events||[]).map((function(t){var r=new y.a({geometry:new d.a({x:t.point.x,y:t.point.y,z:t.point.z,hasZ:void 0!==t.point.z,spatialReference:e.geometry&&e.geometry.spatialReference}),attributes:{ETA:t.ETA,arriveTimeUTC:t.arriveTimeUTC}});return r.strings=t.strings,r})),t}))}},{key:"mergedGeometry",get:function(){if(!this.features)return null;var e=this.features.map((function(e){var t=e.geometry;return Object(u.q)(t)})),t=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,t)}},{key:"strings",get:function(){return this.features.map((function(e){return e.strings}))}},{key:"_decompressFeatureGeometry",value:function(e,t){e.geometry=this._decompressGeometry(e.compressedGeometry,t)}},{key:"_decompressGeometry",value:function(e,t){var r,a,n,o,s,i,u,c,l=0,p=0,f=0,d=0,v=[],b=0,y=0,h=0;if((s=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(s=[]),0===parseInt(s[b],32)){b=2;var j=parseInt(s[b],32);b++,i=parseInt(s[b],32),b++,1&j&&(y=s.indexOf("|")+1,u=parseInt(s[y],32),y++),2&j&&(h=s.indexOf("|",y)+1,c=parseInt(s[h],32),h++)}else i=parseInt(s[b],32),b++;for(;b<s.length&&"|"!==s[b];){r=parseInt(s[b],32)+l,b++,l=r,a=parseInt(s[b],32)+p,b++,p=a;var O=[r/i,a/i];y&&(o=parseInt(s[y],32)+f,y++,f=o,O.push(o/u)),h&&(n=parseInt(s[h],32)+d,h++,d=n,O.push(n/c)),v.push(O)}return{paths:[v],hasZ:y>0,hasM:h>0,spatialReference:t}}},{key:"_mergePolylinesToSinglePath",value:function(e,t){var r=[];(e||[]).forEach((function(e){e.paths.forEach((function(e){r=r.concat(e)}))}));var a=[],n=[0,0];return r.forEach((function(e){e[0]===n[0]&&e[1]===n[1]||(a.push(e),n=e)})),new b.a({paths:[a]},t)}}]),r}(r(150).default);Object(i.a)([Object(c.b)({type:v.a,json:{read:{source:"summary.envelope"}}})],h.prototype,"extent",void 0),Object(i.a)([Object(c.b)()],h.prototype,"features",void 0),Object(i.a)([Object(l.a)("features")],h.prototype,"readFeatures",null),Object(i.a)([Object(c.b)()],h.prototype,"geometryType",void 0),Object(i.a)([Object(c.b)({readOnly:!0})],h.prototype,"mergedGeometry",null),Object(i.a)([Object(c.b)()],h.prototype,"routeId",void 0),Object(i.a)([Object(c.b)()],h.prototype,"routeName",void 0),Object(i.a)([Object(c.b)({value:null,readOnly:!0})],h.prototype,"strings",null),Object(i.a)([Object(c.b)({json:{read:{source:"summary.totalDriveTime"}}})],h.prototype,"totalDriveTime",void 0),Object(i.a)([Object(c.b)({json:{read:{source:"summary.totalLength"}}})],h.prototype,"totalLength",void 0),Object(i.a)([Object(c.b)({json:{read:{source:"summary.totalTime"}}})],h.prototype,"totalTime",void 0);var j=h=Object(i.a)([Object(p.a)("esri.tasks.support.DirectionsFeatureSet")],h);t.a=j}}]);
//# sourceMappingURL=18.6f6c4098.chunk.js.map