(this.webpackJsonpimaps=this.webpackJsonpimaps||[]).push([[126],{1033:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var r=a(15),n=1;function i(e,t){var a,n=0,i=Object(r.a)(t);try{for(i.s();!(a=i.n()).done;){var l,o=null==(l=a.value.attributes)?void 0:l[e];"number"==typeof o&&isFinite(o)&&(n=Math.max(n,o))}}catch(y){i.e(y)}finally{i.f()}return n}},988:function(e,t,a){"use strict";a.r(t);var r=a(10),n=a(39),i=a(30),l=a(28),o=a(15),y=a(2),u=a(3),c=a(4),p=a(5),s=a(0),b=(a(14),a(21)),O=a(90),f=a(6),d=(a(12),a(17),a(1)),m=a(41),j=a(163),v=a(8),g=a(42),S=a(20),h=(a(11),a(18),a(19),a(44)),w=a(57),N=(a(78),a(40)),J=a(111),L=a(113),T=a(108),C=a(196),k=(a(69),a(72)),x=a(180),M=a(193),I=a(294),D=a(194),E=a(297),_=a(293),F=a(295),P=a(219),G=a(303),R=a(1033);function z(e){return e.layers.some((function(e){return null!=e.layerDefinition.visibilityField}))}var B=new D.a({name:"OBJECTID",alias:"OBJECTID",type:"oid",nullable:!1,editable:!1}),A=new D.a({name:"title",alias:"Title",type:"string",nullable:!0,editable:!0}),W=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(){var e;return Object(y.a)(this,a),(e=t.apply(this,arguments)).visibilityMode="inherited",e}return Object(u.a)(a,[{key:"initialize",value:function(){var e,t=this,a=Object(o.a)(this.graphics);try{for(a.s();!(e=a.n()).done;){e.value.sourceLayer=this.layer}}catch(r){a.e(r)}finally{a.f()}this.graphics.on("after-add",(function(e){e.item.sourceLayer=t.layer})),this.graphics.on("after-remove",(function(e){e.item.sourceLayer=null}))}},{key:"sublayers",get:function(){return this.graphics}}]),a}(G.a);Object(s.a)([Object(d.b)({readOnly:!0})],W.prototype,"sublayers",null),Object(s.a)([Object(d.b)()],W.prototype,"layer",void 0),Object(s.a)([Object(d.b)({readOnly:!0})],W.prototype,"visibilityMode",void 0),W=Object(s.a)([Object(v.a)("esri.layers.MapNotesLayer.MapNotesSublayer")],W);var q=[{geometryType:"polygon",geometryTypeJSON:"esriGeometryPolygon",layerId:"polygonLayer",title:"Polygons",identifyingSymbol:(new L.a).toJSON()},{geometryType:"polyline",geometryTypeJSON:"esriGeometryPolyline",layerId:"polylineLayer",title:"Polylines",identifyingSymbol:(new J.a).toJSON()},{geometryType:"multipoint",geometryTypeJSON:"esriGeometryMultipoint",layerId:"multipointLayer",title:"Multipoints",identifyingSymbol:(new T.a).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",layerId:"pointLayer",title:"Points",identifyingSymbol:(new T.a).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",layerId:"textLayer",title:"Text",identifyingSymbol:(new C.a).toJSON()}],H=function(e){Object(c.a)(a,e);var t=Object(p.a)(a);function a(e){var r;return Object(y.a)(this,a),(r=t.call(this,e)).capabilities={operations:{supportsMapNotesEditing:!0}},r.featureCollections=null,r.featureCollectionJSON=null,r.featureCollectionType="notes",r.legendEnabled=!1,r.minScale=0,r.maxScale=0,r.sublayers=new N.a(q.map((function(e){return new W({id:e.layerId,title:e.title,layer:Object(n.a)(r)})}))),r.title="Map Notes",r.type="map-notes",r.visibilityMode="inherited",r}return Object(u.a)(a,[{key:"readCapabilities",value:function(e,t,a){return{operations:{supportsMapNotesEditing:!z(t)&&"portal-item"!==(null==a?void 0:a.origin)}}}},{key:"readFeatureCollections",value:function(e,t,a){if(!z(t))return null;var r=t.layers.map((function(e){var t=new P.default;return t.read(e,a),t}));return new N.a({items:r})}},{key:"readLegacyfeatureCollectionJSON",value:function(e,t){return z(t)?Object(b.a)(t.featureCollection):null}},{key:"readFullExtent",value:function(e,t){if(!t.layers.length)return new w.a({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:h.a.WGS84});var a=h.a.fromJSON(t.layers[0].layerDefinition.spatialReference);return t.layers.reduce((function(e,t){var a=t.layerDefinition.extent;return a?w.a.fromJSON(a).union(e):e}),new w.a({spatialReference:a}))}},{key:"readMinScale",value:function(e,t){var a,r=Object(o.a)(t.layers);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(null!=n.layerDefinition.minScale)return n.layerDefinition.minScale}}catch(i){r.e(i)}finally{r.f()}return 0}},{key:"readMaxScale",value:function(e,t){var a,r=Object(o.a)(t.layers);try{for(r.s();!(a=r.n()).done;){var n=a.value;if(null!=n.layerDefinition.maxScale)return n.layerDefinition.maxScale}}catch(i){r.e(i)}finally{r.f()}return 0}},{key:"multipointLayer",get:function(){return this._findSublayer("multipointLayer")}},{key:"pointLayer",get:function(){return this._findSublayer("pointLayer")}},{key:"polygonLayer",get:function(){return this._findSublayer("polygonLayer")}},{key:"polylineLayer",get:function(){return this._findSublayer("polylineLayer")}},{key:"readSublayers",value:function(e,t,a){var r=this;if(z(t))return null;for(var n=[],i=function(e){var a=t.layers[e],i=a.layerDefinition,l=a.featureSet,y=null!=(o=i.geometryType)?o:l.geometryType,u=q.find((function(e){var t,a,r;return y===e.geometryTypeJSON&&(null==(t=i.drawingInfo)||null==(a=t.renderer)||null==(r=a.symbol)?void 0:r.type)===e.identifyingSymbol.type}));if(u){var c=new W({id:u.layerId,title:i.name,layer:r,graphics:l.features.map((function(e){var t=e.geometry,a=e.symbol,r=e.attributes,n=e.popupInfo;return k.a.fromJSON({attributes:r,geometry:t,symbol:a,popupTemplate:n})}))});n.push(c)}},l=0;l<t.layers.length;l++){var o;i(l)}return new N.a(n)}},{key:"writeSublayers",value:function(e,t,a,r){var n=this,i=this.minScale,l=this.maxScale,y=e.some((function(e){return e.graphics.length>0}));if(this.capabilities.operations.supportsMapNotesEditing){var u,c=[],p=Object(o.a)(q);try{var s=function(){var t=u.value,a=e.find((function(e){return t.layerId===e.id}));n._writeMapNoteSublayer(c,a,t,i,l,r)};for(p.s();!(u=p.n()).done;)s()}catch(f){p.e(f)}finally{p.f()}Object(O.c)("featureCollection.layers",c,t)}else{var b;y&&(null==r||null==(b=r.messages)||b.push(new S.a("map-notes-layer:editing-not-supported","New map notes cannot be added to this layer")))}}},{key:"textLayer",get:function(){return this._findSublayer("textLayer")}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}},{key:"read",value:function(e,t){"featureCollection"in e&&(e=Object(b.a)(e),Object.assign(e,e.featureCollection)),Object(i.a)(Object(l.a)(a.prototype),"read",this).call(this,e,t)}},{key:"_findSublayer",value:function(e){var t,a;return Object(f.j)(this.sublayers)?null:null!=(t=null==(a=this.sublayers)?void 0:a.find((function(t){return t.id===e})))?t:null}},{key:"_writeMapNoteSublayer",value:function(e,t,a,r,n,i){var l=[];if(!Object(f.j)(t)){var y,u=Object(o.a)(t.graphics);try{for(u.s();!(y=u.n()).done;){var c=y.value;this._writeMapNote(l,c,a.geometryType,i)}}catch(p){u.e(p)}finally{u.f()}this._normalizeObjectIds(l,B),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:"simple",symbol:Object(b.a)(a.identifyingSymbol)}},geometryType:a.geometryTypeJSON,minScale:r,maxScale:n,objectIdField:"OBJECTID",fields:[B.toJSON(),A.toJSON()]},featureSet:{features:l,geometryType:a.geometryTypeJSON}})}}},{key:"_writeMapNote",value:function(e,t,a,n){if(!Object(f.j)(t)){var i,l,o=t.geometry,y=t.symbol,u=t.popupTemplate;if(!Object(f.j)(o))if(o.type===a)if(Object(f.j)(y))null==n||null==(l=n.messages)||l.push(new j.a("map-notes-layer:no-symbol","Skipping map notes with no symbol",{graphic:t}));else{var c={attributes:Object(r.a)({},t.attributes),geometry:o.toJSON(),symbol:y.toJSON()};Object(f.k)(u)&&(c.popupInfo=u.toJSON()),e.push(c)}else null==n||null==(i=n.messages)||i.push(new j.a("map-notes-layer:invalid-geometry-type",'Geometry "'.concat(o.type,'" cannot be saved in "').concat(a,'" layer'),{graphic:t}))}}},{key:"_normalizeObjectIds",value:function(e,t){var a,r=t.name,n=Object(R.a)(r,e)+1,i=new Set,l=Object(o.a)(e);try{for(l.s();!(a=l.n()).done;){var y=a.value;y.attributes||(y.attributes={});var u=y.attributes;(null==u[r]||i.has(u[r]))&&(u[r]=n++),i.add(u[r])}}catch(c){l.e(c)}finally{l.f()}}}]),a}(Object(E.a)(Object(F.a)(Object(I.a)(Object(_.a)(Object(M.a)(x.a))))));Object(s.a)([Object(d.b)({readOnly:!0})],H.prototype,"capabilities",void 0),Object(s.a)([Object(m.a)(["portal-item","web-map"],"capabilities",["layers"])],H.prototype,"readCapabilities",null),Object(s.a)([Object(d.b)({readOnly:!0})],H.prototype,"featureCollections",void 0),Object(s.a)([Object(m.a)(["web-map","portal-item"],"featureCollections",["layers"])],H.prototype,"readFeatureCollections",null),Object(s.a)([Object(d.b)({readOnly:!0,json:{origins:{"web-map":{write:{enabled:!0,target:"featureCollection"}}}}})],H.prototype,"featureCollectionJSON",void 0),Object(s.a)([Object(m.a)(["web-map","portal-item"],"featureCollectionJSON",["featureCollection"])],H.prototype,"readLegacyfeatureCollectionJSON",null),Object(s.a)([Object(d.b)({readOnly:!0,json:{read:!1,write:{enabled:!0,ignoreOrigin:!0}}})],H.prototype,"featureCollectionType",void 0),Object(s.a)([Object(d.b)({json:{write:!1}})],H.prototype,"fullExtent",void 0),Object(s.a)([Object(m.a)(["web-map","portal-item"],"fullExtent",["layers"])],H.prototype,"readFullExtent",null),Object(s.a)([Object(d.b)({readOnly:!0,json:{origins:{"web-map":{write:{target:"featureCollection.showLegend",overridePolicy:function(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],H.prototype,"legendEnabled",void 0),Object(s.a)([Object(d.b)({type:["show","hide"]})],H.prototype,"listMode",void 0),Object(s.a)([Object(d.b)({type:Number,nonNullable:!0,json:{write:!1}})],H.prototype,"minScale",void 0),Object(s.a)([Object(m.a)(["web-map","portal-item"],"minScale",["layers"])],H.prototype,"readMinScale",null),Object(s.a)([Object(d.b)({type:Number,nonNullable:!0,json:{write:!1}})],H.prototype,"maxScale",void 0),Object(s.a)([Object(m.a)(["web-map","portal-item"],"maxScale",["layers"])],H.prototype,"readMaxScale",null),Object(s.a)([Object(d.b)({readOnly:!0})],H.prototype,"multipointLayer",null),Object(s.a)([Object(d.b)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],H.prototype,"operationalLayerType",void 0),Object(s.a)([Object(d.b)({readOnly:!0})],H.prototype,"pointLayer",null),Object(s.a)([Object(d.b)({readOnly:!0})],H.prototype,"polygonLayer",null),Object(s.a)([Object(d.b)({readOnly:!0})],H.prototype,"polylineLayer",null),Object(s.a)([Object(d.b)({readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],H.prototype,"sublayers",void 0),Object(s.a)([Object(m.a)("web-map","sublayers",["layers"])],H.prototype,"readSublayers",null),Object(s.a)([Object(g.a)("web-map","sublayers")],H.prototype,"writeSublayers",null),Object(s.a)([Object(d.b)({readOnly:!0})],H.prototype,"textLayer",null),Object(s.a)([Object(d.b)()],H.prototype,"title",void 0),Object(s.a)([Object(d.b)({readOnly:!0,json:{read:!1}})],H.prototype,"type",void 0);var K=H=Object(s.a)([Object(v.a)("esri.layers.MapNotesLayer")],H);t.default=K}}]);
//# sourceMappingURL=126.d0ac4868.chunk.js.map